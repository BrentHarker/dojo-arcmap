//>>built
define("require exports ../../../../geometry/SpatialReference ../../../../geometry/Point ../../../../geometry/support/webMercatorUtils ../../lib/glMatrix".split(" "),function(z,g,n,x,r,t){function u(a,d){var b=a.spatialReference;b.equals(d)||(b.isWebMercator&&d.wkid===n.WGS84.wkid?r.webMercatorToGeographic(a,!1,a):d.isWebMercator&&b.wkid===n.WGS84.wkid&&r.geographicToWebMercator(a,!1,a))}function v(a){if(Array.isArray(a)){for(var d=0;d<a.length;d++)if(!v(a[d]))return!1;return!0}return null==a||0<=
a}Object.defineProperty(g,"__esModule",{value:!0});var w=t.vec4d,k=t.mat4d,y=[1,1,1];g.computeCentroid=function(a,d){if("extent"===a.type)return a.center;if("polygon"===a.type)return a.centroid;for(var b=0,c=0,e=0,h=a.hasZ,g=0,f=0,m=a.paths;f<m.length;f++){for(var l=m[f],p=0,k=l;p<k.length;p++){var q=k[p],b=b+q[0],c=c+q[1];h&&(e+=q[2])}g+=l.length}a=new x({x:b/g,y:c/g,z:h?e/g:void 0,spatialReference:a.spatialReference});return d&&u(a,d),a};g.convertToSR=u;g.enlargeExtent=function(a,d,b){if(a){d||
(d=w.create());var c=.5*a.width*(b-1);b=.5*a.height*(b-1);return a.width<1E-7*a.height?c+=b/20:a.height<1E-7*a.width&&(b+=c/20),w.set4(a.xmin-c,a.ymin-b,a.xmax+c,a.ymax+b,d),d}return null};g.updateVertexAttributeAuxpos1w=function(a,d){for(var b=0;b<a.geometries.length;++b){var c=a.geometries[b].data.vertexAttributes.auxpos1;c&&c.data[3]!==d&&(c.data[3]=d,a.geometryVertexAttrsUpdated(b))}};g.mixinColorAndOpacity=function(a,d){var b=[1,1,1,1];return null!=a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2]),null!==d&&
void 0!==d?b[3]=d:null!=a&&3<a.length&&(b[3]=a[3]),b};g.overrideColor=function(a,d,b,c,e){e=e.slice();for(var h=0;3>h;++h)a&&null!=a[h]?e[h]=a[h]:b&&null!=b[h]&&(e[h]=b[h]);return null!=d?e[3]=d:null!=c&&(e[3]=c),e};g.computeObjectScale=function(a,d,b,c){void 0===a&&(a=y);void 0===c&&(c=1);var e=Array(3);if(null==d||null==b)e[0]=1,e[1]=1,e[2]=1;else{for(var h=void 0,g=0,f=2;0<=f;f--){var m=a[f],l=void 0,k=null!=m,n=0===f&&!h&&!k;"symbolValue"===m||n?l=d[f]/b[f]:k&&"proportional"!==m&&isFinite(m)&&
(l=m/b[f]);null!=l&&(e[f]=l,h=l,g=Math.max(g,Math.abs(l)))}for(f=2;0<=f;f--)null==e[f]?e[f]=h:0===e[f]&&(e[f]=.001*g)}for(f=2;0<=f;f--)e[f]/=c;return e};g.computeSizeWithResourceSize=function(a,d){var b=d.width,c=d.depth,e=d.height;d=d.isPrimitive?10:1;if(null==b&&null==e&&null==c)return[d*a[0],d*a[1],d*a[2]];for(var g,b=[b,c,e],c=0;3>c;c++)if(e=b[c],null!=e){g=e/a[c];break}for(c=0;3>c;c++)null==b[c]&&(b[c]=a[c]*g);return b};g.validateSymbolLayerSize=function(a){return null!=a.isPrimitive&&(a=[a.width,
a.depth,a.height]),v(a)?null:"Symbol sizes may not be negative values"};g.computeObjectRotation=function(a,d,b,c){void 0===c&&(c=k.identity());a=a||0;d=d||0;b=b||0;return 0!==a&&k.rotateZ(c,-a/180*Math.PI,c),0!==d&&k.rotateX(c,d/180*Math.PI,c),0!==b&&k.rotateY(c,b/180*Math.PI,c),c}});