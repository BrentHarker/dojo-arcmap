//>>built
define(["./TileAgentBase","./TerrainConst","./UpsampleInfo","../../../core/ObjectPool"],function(d,e,f,g){var a=function(){d.apply(this,arguments)};return a.prototype=new d,a.prototype.constructor=a,a.prototype.dataArrived=function(a){a!==this.tile?this._setUpsamplingTile(a):this.updateGeometry();this._dataRequested=null;this._requestNext()},a.prototype.updateGeometry=function(){this._tileLayerInfo.pendingUpdates|=e.TileUpdateTypes.UPDATE_GEOMETRY;this.tile.updateGeometry()},a.prototype._findAncestorWithData=
function(){for(var a,b=this.layerClass,d=this.layerIdx,c=this.tile,g=c.vlevel;c&&!(c.layerInfo[b][d].data&&(a=c,g-c.lij[0]>=e.ELEVATION_DESIRED_RESOLUTION_LEVEL));)c=c.parent;return a?(b=f.Pool.acquire(),b.init(a,0,0,1),b):null},a.prototype._desiredMinLevelDelta=function(){return e.ELEVATION_DESIRED_RESOLUTION_LEVEL-(this.tile.vlevel-this.tile.lij[0])},a.prototype.START_LOADING_LEVEL_DELTA=4,a.prototype.SCALE_RANGE_ENABLED=!1,a.prototype._setUpsamplingTile=function(a){this._tileLayerInfo.upsampleFromTile&&
f.Pool.release(this._tileLayerInfo.upsampleFromTile);var b=f.Pool.acquire();b.init(a,0,0,1);this._tileLayerInfo.upsampleFromTile=b;this.updateGeometry()},a.Pool=new g(a),a});