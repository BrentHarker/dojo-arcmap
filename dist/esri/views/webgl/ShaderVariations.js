//>>built
define(["require","exports","./Program","./Util","./ShaderSourceVariator"],function(m,n,k,h,l){return function(){function b(a,c,d,e,b,f){"string"==typeof a?this._initParams(a,c,d,e,b,f):this._initObject({programNamePrefix:a.programNamePrefix,shaderSnippetPrefixes:a.shaderSnippetPrefixes,baseDefines:a.baseDefines,snippets:a.snippets,rctx:a.rctx,vertexAttribLocs:a.vertexAttribLocs})}return b.prototype._initObject=function(a){this._initParams(a.programNamePrefix,a.shaderSnippetPrefixes,a.baseDefines,
a.snippets,a.rctx,a.vertexAttribLocs)},b.prototype._initParams=function(a,c,d,e,b,f){this._defaultSnippets=e;this._defaultRctx=b;this._defaultVertexAttribLocs=f;this._sealed=!1;this._programCache=new Map;this._shaderSourceVariator=new l(a,c,d)},b.prototype.addDefine=function(a,c,d,b){this._shaderSourceVariator.addDefine(a,c,d,b)},b.prototype.addBinaryShaderSnippetSuffix=function(a,c,d){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(a,c,d)},b.prototype.addNaryShaderSnippetSuffix=function(a,
c){this._shaderSourceVariator.addNaryShaderSnippetSuffix(a,c)},b.prototype.getProgram=function(a,c,d,b){if(c=c||this._defaultSnippets,d=d||this._defaultRctx,b=b||this._defaultVertexAttribLocs,!c)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");if(!d)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!b)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");this._sealed=
!0;var e=a.reduce(function(a,b){return a+b.toString()},"");if(this._programCache[e])return this._programCache[e];var f,g=this._shaderSourceVariator.getShaderVariation(a);a=g.shaderSnippetNames[0];f=c[a];h.assert(null!=f,"shader snippet '"+a+"' does not exist");a=g.shaderSnippetNames[1];c=c[a];h.assert(null!=c,"shader snippet '"+a+"' does not exist");d=new k(d,f,c,b,g.defines);return this._programCache[e]=d,d},b}()});