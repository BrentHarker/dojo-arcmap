//>>built
require({cache:{"esri/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/promiseUtils ../../core/executeAsync ../../core/ObjectPool ./VertexMemoryBuffer ./IndexMemoryBuffer ./TileParser ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./Placement ./GeometryUtils".split(" "),function(p,a,b,y,n,l,h,c,d,k,g,m,B,E,z){p=function(){function a(){this.status=this.rotation=0;this._symbolBuckets=[];this.placementEngine=new E.PlacementEngine;this.polygonVertexBuffer=
new h.PolygonMemoryBuffer;this.polygonOutlineVertexBuffer=new h.PolygonOutlineMemoryBuffer;this.polygonIndexBuffer=new c.TriangleElementMemoryBuffer;this.polygonOutlineIndexBuffer=new c.TriangleElementMemoryBuffer;this.lineVertexBuffer=new h.LineMemoryBuffer;this.lineIndexBuffer=new c.TriangleElementMemoryBuffer;this.markerVertexBuffer=new h.SymbolMemoryBuffer;this.markerIndexBuffer=new c.TriangleElementMemoryBuffer;this.textVertexBuffer=new h.SymbolMemoryBuffer;this.textIndexBuffer=new c.TriangleElementMemoryBuffer}
return a.prototype.initialize=function(a,c,d,g){void 0===g&&(g=0);this.tileKey=a;this.refKey=c;this._workerTileHandler=d;this.rotation=g;this.placementEngine.setAngle(z.C_DEG_TO_RAD*g)},a.prototype.release=function(){this.tileKey=this.refKey="";this.rotation=this.status=0;this.polygonVertexBuffer.reset();this.polygonOutlineVertexBuffer.reset();this.polygonIndexBuffer.reset();this.polygonOutlineIndexBuffer.reset();this.lineVertexBuffer.reset();this.lineIndexBuffer.reset();this.markerVertexBuffer.reset();
this.markerIndexBuffer.reset();this.textVertexBuffer.reset();this.textIndexBuffer.reset();this.placementEngine.reset();this._symbolBuckets.length=0;this._workerTileHandler=null},a.prototype.setDataAndParse=function(a,c){var d=this,h=new b(function(a){d.status=6});return this._parse(a,c).then(function(a){d.status=4;for(var c=new Uint32Array([2,d.polygonVertexBuffer.sizeInBytes,3,d.polygonOutlineVertexBuffer.sizeInBytes,6,d.polygonIndexBuffer.sizeInBytes,7,d.polygonOutlineIndexBuffer.sizeInBytes,0,
d.lineVertexBuffer.sizeInBytes,8,d.lineIndexBuffer.sizeInBytes,4,d.markerVertexBuffer.sizeInBytes,9,d.markerIndexBuffer.sizeInBytes,5,d.textVertexBuffer.sizeInBytes,10,d.textIndexBuffer.sizeInBytes]),q=[],b=a.length,y=0;b>y;y++){var l=a[y];if(l instanceof g)q.push(l.layerIndex),q.push(1),q.push(l.polygonIndexStart),q.push(l.polygonIndexCount),q.push(l.polygonOutlineIndexStart),q.push(l.polygonOutlineIndexCount);else if(l instanceof m)q.push(l.layerIndex),q.push(2),q.push(l.triangleIndexStart),q.push(l.triangleIndexCount),
q.push(l.connectorStart),q.push(l.connectorCount);else if(l instanceof B){q.push(l.layerIndex);q.push(3);q.push(l.sdfMarker?1:0);var E=l.markerPageMap;q.push(E.size);E.forEach(function(a,c){q.push(c);q.push(a[0]);q.push(a[1])});l=l.glyphsPageMap;q.push(l.size);l.forEach(function(a,c){q.push(c);q.push(a[0]);q.push(a[1])})}else l instanceof k&&(q.push(l.layerIndex),q.push(0))}a=new Uint32Array(q);var b=d.polygonVertexBuffer.toBuffer(),y=d.polygonOutlineVertexBuffer.toBuffer(),l=d.polygonIndexBuffer.toBuffer(),
E=d.polygonOutlineIndexBuffer.toBuffer(),n=d.lineVertexBuffer.toBuffer(),x=d.lineIndexBuffer.toBuffer(),A=d.markerVertexBuffer.toBuffer(),M=d.markerIndexBuffer.toBuffer(),u=d.textVertexBuffer.toBuffer(),t=d.textIndexBuffer.toBuffer();h.resolve({data:{bufferDataInfo:c.buffer,bucketDataInfo:a.buffer,bufferData:[b,y,l,E,n,x,A,M,u,t]},buffers:[b,l,y,E,n,x,A,M,u,t,c.buffer,a.buffer]})}),h.promise},a.prototype.addBucket=function(a){this._symbolBuckets.push(a)},a.prototype.updateSymbols=function(a){var c=
this,d=this._symbolBuckets;if(!d||0===d.length)return y.resolve({data:null});this.rotation=a;var g=this.placementEngine;g.reset();g.setAngle(a/256*360*z.C_DEG_TO_RAD);var k=this.markerVertexBuffer;k.reset();var m=this.markerIndexBuffer;m.reset();var q=this.textVertexBuffer;q.reset();var h=this.textIndexBuffer;h.reset();var b=[],l=d.length,B=0;return n(function(){if(6===c.status||0===c.status)return!0;if(l>B){var a=d[B++].copy(k,m,q,h,g);a&&(b.push(a),a.updateSymbols())}return B>=l},5).then(function(){if(6===
c.status||0===c.status||0===k.sizeInBytes&&0===m.sizeInBytes&&0===q.sizeInBytes&&0===h.sizeInBytes)return{data:null};var a=new Uint32Array([4,k.sizeInBytes,9,m.sizeInBytes,5,q.sizeInBytes,10,h.sizeInBytes]),d=[];l=b.length;for(var g=0;l>g;g++){var v=b[g];d.push(v.layerIndex);d.push(3);d.push(v.sdfMarker?1:0);var u=v.markerPageMap;d.push(u.size);u.forEach(function(a,c){d.push(c);d.push(a[0]);d.push(a[1])});v=v.glyphsPageMap;d.push(v.size);v.forEach(function(a,c){d.push(c);d.push(a[0]);d.push(a[1])})}var g=
new Uint32Array(d),v=k.toBuffer(),u=m.toBuffer(),y=q.toBuffer(),B=h.toBuffer();return{data:{bufferDataInfo:a.buffer,bucketDataInfo:g.buffer,bufferData:[v,u,y,B]},buffers:[v,u,y,B,a.buffer,g.buffer]}}).otherwise(function(a){return y.resolve({data:null})})},a.prototype.setObsolete=function(){this.status=6},a.prototype.getLayers=function(){return this._workerTileHandler.getLayers()},a.prototype.getWorkerTileHandler=function(){return this._workerTileHandler},a.prototype._parse=function(a,c){if(!a||0===
a.byteLength)return y.resolve([]);this.status=2;return(new d(a,this,c)).parse()},a}();return p.pool=new l(p),p})},"esri/core/executeAsync":function(){define(["require","exports","dojo/Deferred","./now"],function(p,a,b,y){return function(a,l){var h;(!l||0>=l)&&(l=500);var c=new b(function(){h&&clearTimeout(h)}),d=function(){if(!c.isFulfilled()){for(var k=y(),g=!1;!g&&y()-k<l;)g=!0===a();g?c.resolve():h=setTimeout(d,0)}};return h=setTimeout(d,0),c.promise}})},"esri/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./MemoryBuffer ./GeometryUtils".split(" "),
function(p,a,b,y,n,l){Object.defineProperty(a,"__esModule",{value:!0});p=function(a){function c(){return a.call(this,12)||this}return b(c,a),c.prototype.add=function(a,c,g,m,h,b,l){var d=this.array,k=this.index;a=n.i1616to32(a,c);d.push(a);return a=n.i8888to32(Math.round(31*g),Math.round(31*m),Math.round(31*h),Math.round(31*b)),d.push(a),a=n.i1616to32(l,0),d.push(a),k},c}(n);a.LineMemoryBuffer=p;p=function(a){function c(){return a.call(this,4)||this}return b(c,a),c.prototype.add=function(a,c){var d=
this.index;return this.array.push(n.i1616to32(a,c)),d},c}(n);a.LineJoinMemoryBuffer=p;p=function(a){function c(){return a.call(this,4)||this}return b(c,a),c.prototype.add=function(a,c){this.array.push(n.i1616to32(a,c))},c}(n);a.PolygonMemoryBuffer=p;p=function(a){function c(){return a.call(this,8)||this}return b(c,a),c.prototype.add=function(a,c,g,m,b,h){var d=this.array,k=this.index;a=n.i1616to32(a,c);d.push(a);return a=n.i8888to32(Math.round(15*g),Math.round(15*m),b,h),d.push(a),k},c}(n);a.PolygonOutlineMemoryBuffer=
p;p=function(a){function c(){return a.call(this,16)||this}return b(c,a),c.prototype.add=function(a,c,g,m,b,h,y,x,t,w){var d=this.array,k=this.index;a=n.i1616to32(a,c);return d.push(a),a=n.i1616to32(Math.round(32*g),Math.round(32*m)),d.push(a),a=n.i8888to32(b/4,h/4,0,0),d.push(a),a=n.i8888to32(Math.ceil(10*w),l.radToByte(y),10*x,10*Math.min(t,25)),d.push(a),k},c}(n);a.SymbolMemoryBuffer=p})},"esri/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(p,a){return function(){function a(a){this._array=
[];0>=a&&console.error("strideInBytes must be positive!");this._stride=a}return Object.defineProperty(a.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*
this._array.length},enumerable:!0,configurable:!0}),a.prototype.reset=function(){this.array.length=0},a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer},a.i1616to32=function(a,b){return 65535&a|b<<16},a.i8888to32=function(a,b,l,h){return 255&a|(255&b)<<8|(255&l)<<16|h<<24},a.i8816to32=function(a,b,l){return 255&a|(255&b)<<8|l<<16},a}()})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(p,a){function b(a,b){return a%=b,0<=a?a:a+b}Object.defineProperty(a,
"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var y=1/Math.LN2;a.positiveMod=b;a.radToByte=function(y){return b(y*a.C_RAD_TO_256,256)};a.degToByte=function(y){return b(y*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*y};a.sqr=function(a){return a*a};a.clamp=function(a,b,
h){return Math.min(Math.max(a,b),h)};a.interpolate=function(a,b,h){return a*(1-h)+b*h};a.between=function(a,b,h){return a>=b&&h>=a||a>=h&&b>=a}})},"esri/views/vectorTiles/IndexMemoryBuffer":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(p,a,b,y,n){Object.defineProperty(a,"__esModule",{value:!0});p=function(a){function h(){return a.call(this,12)||this}return b(h,a),h.prototype.add=function(a,d,k){var c=this.array;
c.push(a);c.push(d);c.push(k)},h}(n);a.TriangleElementMemoryBuffer=p;n=function(a){function h(){return a.call(this,4)||this}return b(h,a),h.prototype.add=function(a){this.array.push(a)},h}(n);a.PointElementMemoryBuffer=n})},"esri/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/promiseUtils ../../core/executeAsync ../../core/pbf ./SourceLayerData ./Feature ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./TileClipper".split(" "),function(p,a,
b,y,n,l,h,c,d,k,g,m,B){return function(){function a(a,c,d){this._pbfTile=new l(new Uint8Array(a),new DataView(a));this._tile=c;this._connection=d;this._layers=c.getLayers();d=c.tileKey.split("/").map(parseFloat);var g=d[0];a=d[1];d=d[2];this._level=g;c.refKey&&(c=c.refKey.split("/").map(parseFloat)[0],c=g-c,0<c&&(g=(1<<c)-1,this._tileClipper=new B.TileClipper(c,a&g,d&g)));this._tileClipper||(this._tileClipper=new B.SimpleBuilder)}return a.prototype.parse=function(){for(var a,d=this,g=this._parseTileData(this._pbfTile),
k=this._layers,m=k.length,h=this._level,l=[],v={},q=new Set,m=m-1;0<=m;m--)if(a=k[m],!(a.minzoom&&h<a.minzoom||a.maxzoom&&h>=a.maxzoom||a.layout&&"none"===a.layout.visibility))if(0!==a.type){var B=a.sourceLayer,E=g[B];if(E){q.add(B);var I=this._createBucket(a);I&&(I.layerIndex=m,I.layerExtent=E.extent,(E=v[B])||(E=v[B]=[]),E.push(I))}}else I=this._createBucket(a),l.push(I);var O=10*(this._level+1),R=[],W=[],A=[],M=[],u=this._tileClipper,N=new Set,U={},P=[];q.forEach(function(a){return P.push(a)});
var J=0,Q=0,p=P.length;return n(function(){if(6===d._tile.status)return!0;switch(J){case 0:if(p>Q){var a=P[Q++],k=g[a],m=v[a];if(m&&0!==m.length)for(a=k.getData();a.next(2);){var b=new c(a.getMessage(),k),q=b.values;if(q&&(q=q._minzoom)&&q>=O)continue;for(var h=0,y=m;h<y.length;h++)q=y[h],q.pushFeature(b)}}else{k=d._tile;for(a in v)for(m=v[a],b=0;b<m.length;b++)q=m[b],q.hasFeatures()&&(3===q.layer.type?(R.push(q),k.addBucket(q)):q.layer.refLayerId?A.push(q):(W.push(q),M[q.layer.id]=q));J=1;Q=0;p=
R.length}break;case 1:p>Q?R[Q++].getResources(u,N,U):J=2}return 2===J},50).then(function(){if(6===d._tile.status)return[];var a,c=[],g=d._tile.getWorkerTileHandler();0<N.size&&(a=g.fetchSprites(N,d._connection),c.push(a));var k,m;for(m in U)a=U[m],0<a.size&&(k=g.fetchGlyphs(d._tile.tileKey,m,a,d._connection),c.push(k));return b(c).then(function(a){if(6===d._tile.status)return[];var c=0,g=0,k=W.length;return n(function(){if(6===d._tile.status)return!0;switch(c){case 0:if(k>g){var a=W[g++];a.processFeatures(u,
d._tile);l.push(a)}else c=1,g=0,k=A.length;break;case 1:for(var m=0;m<A.length;m++){var a=A[m],q=M[a.layer.refLayerId];q&&(q.assignBufferInfo(a),l.push(a))}c=2;g=0;k=R.length;break;case 2:k>g?(a=R[g++],a.processFeatures(u,d._tile),l.push(a)):c=3}return 3===c},50).then(function(){return l.sort(function(a,c){return a.layerIndex-c.layerIndex}),l})}).otherwise(function(a){return y.reject(Error(a))})}).otherwise(function(a){return y.reject(Error(a))})},a.prototype._parseTileData=function(a){for(var c=
{};a.next();)switch(a.tag()){case 3:var d=new h(a.getMessage());c[d.name]=d;break;default:a.skip()}return c},a.prototype._createBucket=function(a){switch(a.type){case 0:return this._createBackgroundBucket(a);case 1:return this._createFillBucket(a);case 2:return this._createLineBucket(a);case 3:return this._createSymbolBucket(a)}},a.prototype._createBackgroundBucket=function(a){return new d(a,this._level)},a.prototype._createFillBucket=function(a){var c=this._tile;return new k(a,this._level,c.polygonVertexBuffer,
c.polygonIndexBuffer,c.polygonOutlineVertexBuffer,c.polygonOutlineIndexBuffer)},a.prototype._createLineBucket=function(a){var c=this._tile;return new g(a,this._level,c.lineVertexBuffer,c.lineIndexBuffer)},a.prototype._createSymbolBucket=function(a){var c=this._tile;return new m(a,this._level,c.markerVertexBuffer,c.markerIndexBuffer,c.textVertexBuffer,c.textIndexBuffer,c.placementEngine,c.getWorkerTileHandler())},a}()})},"esri/core/pbf":function(){define(["require","exports"],function(p,a){return function(){function a(a,
b,l,h){this._tag=0;this._dataType=99;this._data=a;this._dataView=b;this._pos=l||0;this._end=h||a.byteLength}return a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)},a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var b=this._decodeVarint();if(this._tag=b>>3,this._dataType=7&b,!a||a===this._tag)break;this.skip()}return!0},a.prototype.empty=function(){return this._pos>=this._end},a.prototype.tag=function(){return this._tag},a.prototype.getInt32=
function(){return this._decodeVarint()},a.prototype.getInt64=function(){return this._decodeVarint()},a.prototype.getUInt32=function(){return this._decodeVarint()},a.prototype.getUInt64=function(){return this._decodeVarint()},a.prototype.getSInt32=function(){return this._decodeSVarint()},a.prototype.getSInt64=function(){return this._decodeSVarint()},a.prototype.getBool=function(){var a=0!==this._data[this._pos];return this._skip(1),a},a.prototype.getEnum=function(){return this._decodeVarint()},a.prototype.getFixed64=
function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getUint32(b+4,!0);return this._skip(8),a},a.prototype.getSFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getInt32(b+4,!0);return this._skip(8),a},a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);return this._skip(8),a},a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);return this._skip(4),a},a.prototype.getSFixed32=function(){var a=
this._dataView.getInt32(this._pos,!0);return this._skip(4),a},a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);return this._skip(4),a},a.prototype.getString=function(){var a=this._getLength(),b=this._pos,b=this._toString(this._data,b,b+a);return this._skip(a),b},a.prototype.getBytes=function(){var a=this._getLength(),b=this._pos,b=this._toBytes(this._data,b,b+a);return this._skip(a),b},a.prototype.getMessage=function(){var b=this._getLength(),n=this._pos,n=new a(this._data,
this._dataView,n,n+b);return this._skip(b),n},a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}},a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a},a.prototype._decodeVarint=function(){var a,b=this._data,l=this._pos,h=0;if(10<=this._end-l){if(a=b[l++],
h|=127&a,0!==(128&a))if(a=b[l++],h|=(127&a)<<7,0!==(128&a))if(a=b[l++],h|=(127&a)<<14,0!==(128&a))if(a=b[l++],h|=(127&a)<<21,0!==(128&a))if(a=b[l++],h+=268435456*(127&a),0!==(128&a))if(a=b[l++],h+=34359738368*(127&a),0!==(128&a))if(a=b[l++],h+=4398046511104*(127&a),0!==(128&a))if(a=b[l++],h+=562949953421312*(127&a),0!==(128&a))if(a=b[l++],h+=72057594037927936*(127&a),0!==(128&a))if(a=b[l++],h+=0x7fffffffffffffff*(127&a),0!==(128&a))throw Error("Varint too long!");}else{for(var c=1;l!==this._end&&
(a=b[l],0!==(128&a));)++l,h+=(127&a)*c,c*=128;if(l===this._end)throw Error("Varint overrun!");++l;h+=a*c}return this._pos=l,h},a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2},a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()},a.prototype._toString=function(a,b,l){var h="",c="";for(l=Math.min(this._end,l);l>b;++b){var d=a[b];128&d?c+="%"+d.toString(16):(h+=decodeURIComponent(c)+String.fromCharCode(d),
c="")}return c.length&&(h+=decodeURIComponent(c)),h},a.prototype._toBytes=function(a,b,l){return l=Math.min(this._end,l),new Uint8Array(a.buffer,b,l-b)},a}()})},"esri/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(p,a){return function(){function a(b){this.extent=4096;this.keys=[];this.values=[];for(this._pbfLayer=b.clone();b.next();)switch(b.tag()){case 1:this.name=b.getString();break;case 3:this.keys.push(b.getString());break;case 4:this.values.push(a._parseValue(b.getMessage()));
break;case 5:this.extent=b.getUInt32();break;default:b.skip()}}return a.prototype.getData=function(){return this._pbfLayer},a._parseValue=function(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getInt64();case 5:return a.getUInt64();case 6:return a.getSInt64();case 7:return a.getBool();default:a.skip()}return null},a}()})},"esri/views/vectorTiles/Feature":function(){define(["require","exports","./Geometry"],function(p,
a,b){return function(){function a(a,b){this.values={};var h=b.keys;for(b=b.values;a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:for(var c=a.getMessage(),d=this.values;!c.empty();){var k=c.getUInt32(),g=c.getUInt32();d[h[k]]=b[g]}break;case 3:this.type=a.getUInt32();break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}return a.prototype.getGeometry=function(a){if(void 0!==this._geometry)return this._geometry;var l,h,c=this._pbfGeometry;a?a.reset(this.type):l=
[];for(var d=1,k=0,g=0,m=0;!c.empty();)switch(0===k&&(k=c.getUInt32(),d=7&k,k>>=3),k--,d){case 1:g+=c.getSInt32();m+=c.getSInt32();a?a.moveTo(g,m):(h&&l.push(h),h=[],h.push(new b.Point(g,m)));break;case 2:g+=c.getSInt32();m+=c.getSInt32();a?a.lineTo(g,m):h.push(new b.Point(g,m));break;case 7:a?a.close():h&&!h[0].equals(g,m)&&h.push(h[0].clone());break;default:throw Error("Invalid path operation");}var B;return a?B=a.result():(h&&l.push(h),B=l),this._geometry=B,B},a}()})},"esri/views/vectorTiles/Geometry":function(){define(["require",
"exports"],function(p,a){Object.defineProperty(a,"__esModule",{value:!0});p=function(){function a(a,b){this.x=a;this.y=b}return a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.equals=function(a,b){return a===this.x&&b===this.y},a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y},a.prototype.setCoords=function(a,b){this.x=a;this.y=b},a.prototype.normalize=function(){var a=this.x,b=this.y,a=Math.sqrt(a*a+b*b);this.x/=a;this.y/=a},a.prototype.rightPerpendicular=function(){var a=
this.x;this.x=this.y;this.y=-a},a.prototype.move=function(a,b){this.x+=a;this.y+=b},a.prototype.assign=function(a){this.x=a.x;this.y=a.y},a.prototype.assignAdd=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y},a.prototype.assignSub=function(a,b){this.x=a.x-b.x;this.y=a.y-b.y},a.prototype.rotate=function(a,b){var l=this.x,h=this.y;this.x=l*a-h*b;this.y=l*b+h*a},a.prototype.scale=function(a){this.x*=a;this.y*=a},a.prototype.length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)},a.distance=function(a,
b){var l=b.x-a.x;a=b.y-a.y;return Math.sqrt(l*l+a*a)},a.add=function(b,n){return new a(b.x+n.x,b.y+n.y)},a.sub=function(b,n){return new a(b.x-n.x,b.y-n.y)},a}();a.Point=p})},"esri/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(p,a,b,y,n){return function(a){function h(c,d){return a.call(this,c,d)||this}return b(h,a),h}(n)})},"esri/views/vectorTiles/Bucket":function(){define(["require",
"exports"],function(p,a){return function(){function a(a,b){this.layerExtent=4096;this._features=[];this.layer=a;this.zoom=b;this._filter=a.getFeatureFilter()}return a.prototype.pushFeature=function(a){this._filter.filter(a)&&this._features.push(a)},a.prototype.hasFeatures=function(){return 0<this._features.length},a.prototype.processFeatures=function(a,b){},a.prototype.assignBufferInfo=function(a){},a}()})},"esri/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ../../core/libs/earcut/earcut".split(" "),
function(p,a,b,y,n,l,h){return function(a){function c(c,d,b,h,l,z){c=a.call(this,c,d)||this;return c.polygonVertexBuffer=b,c.polygonIndexBuffer=h,c.polygonOutlineVertexBuffer=l,c.polygonOutlineIndexBuffer=z,c}return b(c,a),Object.defineProperty(c.prototype,"polygonIndexStart",{get:function(){return this._triangleElementsStart},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"polygonIndexCount",{get:function(){return this._triangleElementsNum},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,
"polygonOutlineIndexStart",{get:function(){return this._outlineElementsStart},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"polygonOutlineIndexCount",{get:function(){return this._outlineElementsNum},enumerable:!0,configurable:!0}),c.prototype.assignBufferInfo=function(a){a._triangleElementsStart=this._triangleElementsStart;a._triangleElementsNum=this._triangleElementsNum;a.layer.hasPaintProperty("fill-outline-color")?(a._outlineElementsStart=this._outlineElementsStart,a._outlineElementsNum=
this._outlineElementsNum):(a._outlineElementsStart=0,a._outlineElementsNum=0)},c.prototype.processFeatures=function(a,c){this._triangleElementsStart=this.polygonIndexBuffer.index;this._triangleElementsNum=0;this._outlineElementsStart=this.polygonOutlineIndexBuffer.index;this._outlineElementsNum=0;a&&a.setExtent(this.layerExtent);c=this.layer.getPaintValue("fill-pattern",this.zoom);c=this.layer.getPaintValue("fill-antialias",this.zoom)&&void 0===c;for(var d=0,g=this._features;d<g.length;d++){var k=
g[d].getGeometry(a);this._processFeature(k,c)}},c.prototype._processFeature=function(a,d){if(a){var g=a.length;if(d)for(d=0;g>d;d++)this._processOutline(a[d]);var k;for(d=0;g>d;d++){var b=c._area(a[d]);128<b?(void 0!==k&&this._processFill(a,k),k=[d]):-128>b&&void 0!==k&&k.push(d)}void 0!==k&&this._processFill(a,k)}},c.prototype._processOutline=function(a){var c,d,k,b=this.polygonOutlineVertexBuffer,h=this.polygonOutlineIndexBuffer,x=h.index,t=new l.Point(0,0),w=new l.Point(0,0),H=new l.Point(0,0),
F=-1,C=-1,v=-1,q=-1,D=-1,G=a.length;if(!(2>G)){for(var I=a[0],y=a[G-1];G&&y.isEqual(I);)--G,y=a[G-1];if(!(2>G-0)){for(I=0;G>I;++I){0===I?(c=a[G-1],d=a[0],k=a[1],t.assignSub(d,c),t.normalize(),t.rightPerpendicular()):(c=d,d=k,k=I!==G-1?a[I+1]:a[0],t.assign(w));w.assignSub(k,d);w.normalize();w.rightPerpendicular();y=t.x*w.y-t.y*w.x;H.assignAdd(t,w);H.normalize();var n=-H.x*-t.x+-H.y*-t.y,n=Math.abs(0!==n?1/n:1);8<n&&(n=8);0<=y?(v=b.add(d.x,d.y,t.x,t.y,0,1),-1===q&&(q=v),0<=F&&0<=C&&0<=v&&h.add(F,C,
v),C=b.add(d.x,d.y,n*-H.x,n*-H.y,0,-1),-1===D&&(D=C),0<=F&&0<=C&&0<=v&&h.add(F,C,v),F=C,C=v,v=b.add(d.x,d.y,H.x,H.y,0,1),0<=F&&0<=C&&0<=v&&h.add(F,C,v),C=b.add(d.x,d.y,w.x,w.y,0,1),0<=F&&0<=C&&0<=v&&h.add(F,C,v)):(v=b.add(d.x,d.y,n*H.x,n*H.y,0,1),-1===q&&(q=v),0<=F&&0<=C&&0<=v&&h.add(F,C,v),C=b.add(d.x,d.y,-t.x,-t.y,0,-1),-1===D&&(D=C),0<=F&&0<=C&&0<=v&&h.add(F,C,v),F=C,C=v,v=b.add(d.x,d.y,-H.x,-H.y,0,-1),0<=F&&0<=C&&0<=v&&h.add(F,C,v),F=b.add(d.x,d.y,-w.x,-w.y,0,-1),0<=F&&0<=C&&0<=v&&h.add(F,C,v))}0<=
F&&0<=C&&0<=q&&h.add(F,C,q);0<=F&&0<=q&&0<=D&&h.add(F,D,q);this._outlineElementsNum+=3*(h.index-x)}}},c.prototype._processFill=function(a,c){var d;1<c.length&&(d=[]);for(var g=0,k=0;k<c.length;k++){var b=c[k];0!==g&&d.push(g);g+=a[b].length}for(var g=2*g,k=new Float64Array(g),l=0,t=0;t<c.length;t++)for(var b=c[t],b=a[b],w=b.length,y=0;w>y;++y)k[l++]=b[y].x,k[l++]=b[y].y;a=h(k,d,2);c=a.length;if(0<c){d=this.polygonVertexBuffer.index;for(l=0;g>l;)this.polygonVertexBuffer.add(k[l++],k[l++]);for(g=0;c>
g;)this.polygonIndexBuffer.add(d+a[g++],d+a[g++],d+a[g++]);this._triangleElementsNum+=c}},c._area=function(a){for(var c=0,d=a.length-1,b=0;d>b;b++)c+=(a[b].x-a[b+1].x)*(a[b].y+a[b+1].y);return c+=(a[d].x-a[0].x)*(a[d].y+a[0].y),.5*c},c}(n)})},"esri/core/libs/earcut/earcut":function(){define([],function(){function p(c,g,k){k=k||2;F=c.length/k+(g?2*g.length:0);C=!1;var q=g&&g.length,m=q?g[0]*k:c.length,v=a(c,0,m,k,!0),B=[];if(!v)return B;var E,A,M,u;if(q)a:{var t=k,D,x,w;u=[];q=0;for(D=g.length;D>q;q++)x=
g[q]*t,w=D-1>q?g[q+1]*t:c.length,x=a(c,x,w,t,!1),x===x.next&&(x.steiner=!0),u.push(d(x));u.sort(l);for(q=0;q<u.length;q++){if(!v){v=null;break a}g=u[q];t=v;if(t=h(g,t))g=z(t,g),b(g,g.next);v=b(v,v.next)}}if(C)return B;if(c.length>80*k){E=M=c[0];A=q=c[1];for(t=k;m>t;t+=k)u=c[t],g=c[t+1],E>u&&(E=u),A>g&&(A=g),u>M&&(M=u),g>q&&(q=g);M=Math.max(M-E,q-A)}return y(v,B,k,E,A,M),B}function a(a,c,d,g,b){var k;if(b===0<H(a,c,d,g))for(b=c;d>b;b+=g)k=x(b,a[b],a[b+1],k);else for(b=d-g;b>=c;b-=g)k=x(b,a[b],a[b+
1],k);return k&&m(k,k.next)&&(t(k),k=k.next),k}function b(a,c){if(!a)return a;c||(c=a);var d=a,b=0,k=F*F/2;do{if(a=!1,d.steiner||!m(d,d.next)&&0!==g(d.prev,d,d.next))d=d.next;else{if(t(d),d=c=d.prev,d===d.next)return null;a=!0}if(b++>k)return C=!0,null}while(a||d!==c);return c}function y(a,d,h,l,x,w,F){if(a){if(!F&&w){var q=a,A=q;do null===A.z&&(A.z=c(A.x,A.y,l,x,w)),A.prevZ=A.prev,A=A.nextZ=A.next;while(A!==q);A.prevZ.nextZ=null;A.prevZ=null;var q=A,M,u,v,D,G,J,H=1;do{A=q;D=q=null;for(G=0;A;){G++;
u=A;for(M=J=0;H>M&&(J++,u=u.nextZ,u);M++);for(M=H;0<J||0<M&&u;)0===J?(v=u,u=u.nextZ,M--):0!==M&&u?A.z<=u.z?(v=A,A=A.nextZ,J--):(v=u,u=u.nextZ,M--):(v=A,A=A.nextZ,J--),D?D.nextZ=v:q=v,v.prevZ=D,D=v;A=u}D.nextZ=null;H*=2}while(1<G)}for(A=a;a.prev!==a.next;){v=a.prev;q=a.next;if(w)a:{u=a;M=l;var I=x,O=w;D=u.prev;G=u;J=u.next;if(0<=g(D,G,J))u=!1;else{var p=D.x>G.x?D.x>J.x?D.x:J.x:G.x>J.x?G.x:J.x,R=D.y>G.y?D.y>J.y?D.y:J.y:G.y>J.y?G.y:J.y,H=c(D.x<G.x?D.x<J.x?D.x:J.x:G.x<J.x?G.x:J.x,D.y<G.y?D.y<J.y?D.y:
J.y:G.y<J.y?G.y:J.y,M,I,O);M=c(p,R,M,I,O);for(I=u.nextZ;I&&I.z<=M;){if(I!==u.prev&&I!==u.next&&k(D.x,D.y,G.x,G.y,J.x,J.y,I.x,I.y)&&0<=g(I.prev,I,I.next)){u=!1;break a}I=I.nextZ}for(I=u.prevZ;I&&I.z>=H;){if(I!==u.prev&&I!==u.next&&k(D.x,D.y,G.x,G.y,J.x,J.y,I.x,I.y)&&0<=g(I.prev,I,I.next)){u=!1;break a}I=I.prevZ}u=!0}}else u=n(a);if(u)d.push(v.i/h),d.push(a.i/h),d.push(q.i/h),t(a),A=a=q.next;else{if(C)break;if(a=q,a===A){if(F)if(1===F){F=d;v=h;q=a;do A=q.prev,u=q.next.next,!m(A,u)&&B(A,q,q.next,u)&&
E(A,u)&&E(u,A)&&(F.push(A.i/v),F.push(q.i/v),F.push(u.i/v),t(q),t(q.next),q=a=u),q=q.next;while(q!==a);a=q;y(a,d,h,l,x,w,2)}else{if(2===F)a:{F=a;do{for(v=F.next.next;v!==F.prev;){if(q=F.i!==v.i){q=F;A=v;u=void 0;if(u=q.next.i!==A.i&&q.prev.i!==A.i){u=void 0;b:{u=q;do{if(u.i!==q.i&&u.next.i!==q.i&&u.i!==A.i&&u.next.i!==A.i&&B(u,u.next,q,A)){u=!0;break b}u=u.next}while(u!==q);u=!1}u=!u}D=void 0;if(D=u&&E(q,A)&&E(A,q)){u=q;D=!1;G=(q.x+A.x)/2;A=(q.y+A.y)/2;do u.y>A!=u.next.y>A&&G<(u.next.x-u.x)*(A-u.y)/
(u.next.y-u.y)+u.x&&(D=!D),u=u.next;while(u!==q)}q=D}if(q){a=z(F,v);F=b(F,F.next);a=b(a,a.next);y(F,d,h,l,x,w);y(a,d,h,l,x,w);break a}v=v.next}F=F.next}while(F!==a)}}else y(b(a),d,h,l,x,w,1);break}}}}}function n(a){var c=a.prev,d=a.next;if(0<=g(c,a,d))return!1;for(var b=a.next.next,h=0;b!==a.prev;){if(k(c.x,c.y,a.x,a.y,d.x,d.y,b.x,b.y)&&0<=g(b.prev,b,b.next))return!1;if(b=b.next,h++>F)return C=!0,!1}return!0}function l(a,c){return a.x-c.x}function h(a,c){var d,g=c,b=a.x,q=a.y,h=-(1/0);do{if(!g)return null;
if(q<=g.y&&q>=g.next.y){var m=g.x+(q-g.y)*(g.next.x-g.x)/(g.next.y-g.y);if(b>=m&&m>h){if(h=m,m===b){if(q===g.y)return g;if(q===g.next.y)return g.next}d=g.x<g.next.x?g:g.next}}g=g.next}while(g!==c);if(!d)return null;if(b===h)return d.prev;var A;c=d;for(var m=d.x,l=d.y,u=1/0,g=d.next;g!==c;)b>=g.x&&g.x>=m&&k(l>q?b:h,q,m,l,l>q?h:b,q,g.x,g.y)&&(A=Math.abs(q-g.y)/(b-g.x),(u>A||A===u&&g.x>d.x)&&E(g,a)&&(d=g,u=A)),g=g.next;return d}function c(a,c,d,g,b){return a=32767*(a-d)/b,c=32767*(c-g)/b,a=16711935&
(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),c=16711935&(c|c<<8),c=252645135&(c|c<<4),c=858993459&(c|c<<2),c=1431655765&(c|c<<1),a|c<<1}function d(a){var c=a,d=a;do c.x<d.x&&(d=c),c=c.next;while(c!==a);return d}function k(a,c,d,g,b,k,h,m){return 0<=(b-h)*(c-m)-(a-h)*(k-m)&&0<=(a-h)*(g-m)-(d-h)*(c-m)&&0<=(d-h)*(k-m)-(b-h)*(g-m)}function g(a,c,d){return(c.y-a.y)*(d.x-c.x)-(c.x-a.x)*(d.y-c.y)}function m(a,c){return a.x===c.x&&a.y===c.y}function B(a,c,d,b){return m(a,c)&&m(d,
b)||m(a,b)&&m(d,c)?!0:0<g(a,c,d)!=0<g(a,c,b)&&0<g(d,b,a)!=0<g(d,b,c)}function E(a,c){return 0>g(a.prev,a,a.next)?0<=g(a,c,a.next)&&0<=g(a,a.prev,c):0>g(a,c,a.prev)||0>g(a,a.next,c)}function z(a,c){var d=new w(a.i,a.x,a.y),g=new w(c.i,c.x,c.y),b=a.next,k=c.prev;return a.next=c,c.prev=a,d.next=b,b.prev=d,g.next=d,d.prev=g,k.next=g,g.prev=k,g}function x(a,c,d,g){a=new w(a,c,d);return g?(a.next=g.next,a.prev=g,g.next.prev=a,g.next=a):(a.prev=a,a.next=a),a}function t(a){a.next.prev=a.prev;a.prev.next=
a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function w(a,c,d){this.i=a;this.x=c;this.y=d;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function H(a,c,d,g){for(var b=0,k=d-g;d>c;c+=g)b+=(a[k]-a[c])*(a[c+1]+a[k+1]),k=c;return b}var F,C;return p.deviation=function(a,c,d,g){var b=c&&c.length,k=Math.abs(H(a,0,b?c[0]*d:a.length,d));if(b)for(var b=0,h=c.length;h>b;b++)k-=Math.abs(H(a,c[b]*d,h-1>b?c[b+1]*d:a.length,d));for(b=c=0;b<g.length;b+=3){var h=
g[b]*d,m=g[b+1]*d,A=g[b+2]*d;c+=Math.abs((a[h]-a[A])*(a[m+1]-a[h+1])-(a[h]-a[m])*(a[A+1]-a[h+1]))}return 0===k&&0===c?0:Math.abs((c-k)/k)},p.flatten=function(a){for(var c=a[0][0].length,d={vertices:[],holes:[],dimensions:c},g=0,b=0;b<a.length;b++){for(var k=0;k<a[b].length;k++)for(var h=0;c>h;h++)d.vertices.push(a[b][k][h]);0<b&&(g+=a[b-1].length,d.holes.push(g))}return d},p})},"esri/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./LineTess ./style/StyleLayer".split(" "),
function(p,a,b,y,n,l,h){return function(a){function c(c,d,b,h){c=a.call(this,c,d)||this;return c.extrudeVectorsDoubleBuffer=[l.allocExtrudeVectors(),l.allocExtrudeVectors()],c.firstExtrudeVectors=l.allocExtrudeVectors(),c.recycledTriangleBridge=l.allocTriangles(20),c.recycledTrianglePie=l.allocTriangles(20),c.lineVertexBuffer=b,c.lineIndexBuffer=h,c}return b(c,a),Object.defineProperty(c.prototype,"triangleIndexStart",{get:function(){return this.triangleElementsStart},enumerable:!0,configurable:!0}),
Object.defineProperty(c.prototype,"triangleIndexCount",{get:function(){return this.triangleElementsCount},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"connectorStart",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"connectorCount",{get:function(){return 0},enumerable:!0,configurable:!0}),c.prototype.assignBufferInfo=function(a){a.triangleElementsStart=this.triangleElementsStart;a.triangleElementsCount=this.triangleElementsCount},c.prototype.processFeatures=
function(a,c){this.triangleElementsStart=this.lineIndexBuffer.index;this.triangleElementsCount=0;a&&a.setExtent(this.layerExtent);c=new h.LineLayout(this.layer,this.zoom);for(var d=0,g=this._features;d<g.length;d++){var b=g[d].getGeometry(a);this._processFeature(c,b)}},c.prototype._processFeature=function(a,c){if(c){var d,g=c.length;for(d=0;g>d;d++)this._processGeometry(c[d],a)}},c.prototype._processGeometry=function(a,c){if(!(2>a.length)){var d=a[0],g=a[a.length-1],b=g.x-d.x,g=g.y-d.y,d=1E-6>b*b+
g*g;if(!(2>a.length)){for(var k=a[0],h=1;h<a.length;)b=a[h].x-k.x,g=a[h].y-k.y,1E-6>b*b+g*g?a.splice(h,1):(k=a[h],++h);if(!(2>a.length)){this.vertices=a;this.verticesLen=a.length;this.isClosed=d;this.cap=c.cap;this.join=c.join;this.almostParallelRads=.05;this.veryShallowRads=.1;this.miterSafeRads=l.MITER_SAFE_RADS;this.miterLimitMag=Math.min(c.miterLimit,l.SYSTEM_MAG_LIMIT);this.roundLimitRads=Math.min(c.roundLimit,.5);this.newRoundJoinsSafeRads=2.3;var b=this.lineIndexBuffer.index,g=0,t=void 0,k=
this.verticesLen;for(c=0;k>c;++c){var w=a[c],h=t===this.extrudeVectorsDoubleBuffer[c%2]?this.extrudeVectorsDoubleBuffer[(c+1)%2]:this.extrudeVectorsDoubleBuffer[c%2];if(k>c||!d?(this._computeExtrudeVectors(h,c),this._writeGPUVertices(w.x,w.y,g,h),!h.capCenter||d&&c===k-1||this._writeGPUPieElements(h),d&&0===c&&l.copyExtrudeVectors(this.firstExtrudeVectors,h)):l.copyExtrudeVectors(h,this.firstExtrudeVectors),t&&this._writeGPUBridgeElements(t,h),k-1>c)t=a[c+1],w=l.length([t.x-w.x,t.y-w.y]),g+=w;t=h}this.triangleElementsCount+=
3*(this.lineIndexBuffer.index-b)}}}},c.prototype._computeExtrudeVectors=function(a,c){var d=this.vertices,g=this.verticesLen,b=this.isClosed,k=d[c],h=[void 0,void 0],t=[void 0,void 0];if(0<c&&g-1>c){var w=d[(c+g-1)%g],y=d[(c+1)%g];l.normalize(h,[k.x-w.x,k.y-w.y]);l.normalize(t,[y.x-k.x,y.y-k.y])}else if(0===c)y=d[(c+1)%g],(l.normalize(t,[y.x-k.x,y.y-k.y]),b)?(d=d[g-2],l.normalize(h,[k.x-d.x,k.y-d.y])):h=t;else{if(c!==g-1)return void console.error("Vertex index 'i' out of range.");w=d[(c+g-1)%g];(l.normalize(h,
[k.x-w.x,k.y-w.y]),b)?(d=d[1],l.normalize(t,[d.x-k.x,d.y-k.y])):t=h}b||0!==c?b||c!==g-1?this._computeJoinExtrudeVectors(a,h,t):this._computeCapExtrudeVectors(a,h,t,l.CapPosition.END):this._computeCapExtrudeVectors(a,h,t,l.CapPosition.START)},c.prototype._computeCapExtrudeVectors=function(a,c,d,b){0===this.cap?l.buttCap(a,c,d):1===this.cap?l.roundCap(a,c,d,b,l.getNumberOfSlices(Math.PI),b===l.CapPosition.START?-1:1):2===this.cap?l.squareCap(a,c,d,b):(l.buttCap(a,c,d),console.error("Unknown cap type!"))},
c.prototype._computeJoinExtrudeVectors=function(a,c,d){var b=l.getRads(c,d);if(b>Math.PI-this.almostParallelRads)l.rectJoin(a,c,d);else if(2===this.join||b<this.veryShallowRads)b<this.almostParallelRads?l.fastMiterJoin(a,c,d):b<this.miterSafeRads?l.miterJoin(a,c,d):l.bevelJoin(a,c,d,this.miterLimitMag);else if(0===this.join)l.bevelJoin(a,c,d,1);else if(1===this.join){var g=l.getNumberOfSlices(b);b<this.newRoundJoinsSafeRads?2>g||b<this.roundLimitRads?l.bevelJoin(a,c,d,1):l.roundJoin(a,c,d,g):l.unitRoundJoin(a,
c,d,g)}},c.prototype._writeGPUVertices=function(a,c,d,b){var g;for(g=0;g<b.vectors.count;++g){var h=this.lineVertexBuffer.add(a,c,b.vectors.items[g].vector[0],b.vectors.items[g].vector[1],b.vectors.items[g].texCoords[0],b.vectors.items[g].texCoords[1],d);b.vectors.items[g].base=h}},c.prototype._writeGPUBridgeElements=function(a,c){l.bridge(this.recycledTriangleBridge,a,c);for(a=0;a<this.recycledTriangleBridge.count;++a)c=this.recycledTriangleBridge.items[a],this.lineIndexBuffer.add(c.v1.base,c.v2.base,
c.v3.base)},c.prototype._writeGPUPieElements=function(a){l.pie(this.recycledTrianglePie,a);for(a=0;a<this.recycledTrianglePie.count;++a){var c=this.recycledTrianglePie.items[a];this.lineIndexBuffer.add(c.v1.base,c.v2.base,c.v3.base)}},c}(n)})},"esri/views/vectorTiles/LineTess":function(){define(["require","exports"],function(p,a){function b(a){var c,d={items:[],count:0};for(c=0;a>c;++c)d.items.push(void 0);return d}function y(a,c){return a[0]*c[0]+a[1]*c[1]}function n(a){return Math.sqrt(y(a,a))}
function l(a,c){var d=n(c);return a[0]=c[0]/d,a[1]=c[1]/d,a}function h(a,c){return a[0]=-c[1],a[1]=c[0],a}function c(a,c){return a[0]*c[1]-a[1]*c[0]}function d(a,c){return a[0]=-c[0],a[1]=-c[1],a}function k(a,c,d){return a[0]=c[0]*d,a[1]=c[1]*d,a}function g(a,c,d){return a[0]=c[0]+d[0],a[1]=c[1]+d[1],a}function m(a,c){a=y(a,c);return.999<a?0:-.999>a?Math.PI:Math.acos(a)}function B(a,c,d,b,g){if(0===b)return void(a.count=0);var h=n(c),u=k(q[0],c,1/h);d=k(q[1],d,1/h);u=m(u,d);u=(g?-1:1)*u/b;g=Math.cos(u);
u=Math.sin(u);d=c[0];var l=c[1];for(c=0;b-1>c;++c)h=d,d=g*h-u*l,l=u*h+g*l,a.items[c][0]=d,a.items[c][1]=l;a.count=b-1}function E(a){var c,d=a.count,b=Math.floor(d/2);for(c=0;b>c;++c){var g=a.items[c];a.items[c]=a.items[d-c-1];a.items[d-c-1]=g}}function z(a,c,b){b=h(q[0],b);c=d(q[1],b);var g=a.vectors.items[0];g.vector[0]=b[0];g.vector[1]=b[1];g.texCoords[0]=C;g.texCoords[1]=H;b=a.vectors.items[1];b.vector[0]=c[0];b.vector[1]=c[1];b.texCoords[0]=C;b.texCoords[1]=F;a.vectors.count=2;c=a.lists[x.ENTRY];
c.items[0]=0;c.items[1]=1;c.count=2;c=a.lists[x.EXIT];c.items[0]=0;c.items[1]=1;c.count=2;a.lists[x.CAP].count=0;a.capCenter=void 0}Object.defineProperty(a,"__esModule",{value:!0});var x;!function(a){a[a.ENTRY=1]="ENTRY";a[a.EXIT=2]="EXIT";a[a.CAP=3]="CAP"}(x=a.VectorRole||(a.VectorRole={}));var t;!function(a){a[a.START=1]="START";a[a.END=2]="END"}(t=a.CapPosition||(a.CapPosition={}));a.SYSTEM_MAG_LIMIT=3.8;a.MITER_SAFE_RADS=2*Math.acos(1/a.SYSTEM_MAG_LIMIT);var w=a.SYSTEM_MAG_LIMIT*a.SYSTEM_MAG_LIMIT,
H=-1,F=1,C=0,v=16/(2*Math.PI);a.allocTriangles=function(a){var c,d={items:[],count:0};for(c=0;a>c;++c)d.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0]}});return d};a.allocExtrudeVectors=function(){var a,c={items:[],count:0};for(a=0;30>a;++a)c.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0]});a={};a[x.ENTRY]=b(20);a[x.EXIT]=b(20);a[x.CAP]=b(20);return{vectors:c,
lists:a}};a.copyExtrudeVectors=function(a,c){var d;for(d=0;d<c.vectors.count;++d)a.vectors.items[d].vector[0]=c.vectors.items[d].vector[0],a.vectors.items[d].vector[1]=c.vectors.items[d].vector[1],a.vectors.items[d].texCoords[0]=c.vectors.items[d].texCoords[0],a.vectors.items[d].texCoords[1]=c.vectors.items[d].texCoords[1],a.vectors.items[d].base=c.vectors.items[d].base;a.vectors.count=c.vectors.count;a.capCenter=c.capCenter};var q=[];for(p=0;32>p;++p)q.push([void 0,void 0]);var D=function(a){var c,
d={items:[],count:0};for(c=0;a>c;++c)d.items.push([void 0,void 0]);return d}(16);a.length=n;a.normalize=l;a.getNumberOfSlices=function(a){return Math.round(a*v)};a.getRads=m;var G=[void 0,void 0],I=[void 0,void 0];a.bridge=function(a,c,d){var b,g,h=c.vectors,k=c.lists[x.EXIT];g=d.vectors;var l=d.lists[x.ENTRY];if(k.count===l.count+1)d=k.items,c=h.items,b=l.items,g=g.items;else{if(l.count!==k.count+1&&k.count!==l.count)return console.error("Cannot bridge "+k.count+" to "+l.count+"."),void(a.count=
0);d=l.items;c=g.items;b=k.items;g=h.items}h=k.count+l.count-2;a.count=h;G[0]=d;G[1]=b;I[0]=c;I[1]=g;for(d=0;h>d;++d)c=a.items[d],b=(d+0)%2,b=I[b][G[b][Math.floor((d+0)/2)]],c.v1.vector[0]=b.vector[0],c.v1.vector[1]=b.vector[1],c.v1.texCoords[0]=b.texCoords[0],c.v1.texCoords[1]=b.texCoords[1],c.v1.base=b.base,b=(d+1)%2,b=I[b][G[b][Math.floor((d+1)/2)]],c.v2.vector[0]=b.vector[0],c.v2.vector[1]=b.vector[1],c.v2.texCoords[0]=b.texCoords[0],c.v2.texCoords[1]=b.texCoords[1],c.v2.base=b.base,b=(d+2)%2,
b=I[b][G[b][Math.floor((d+2)/2)]],c.v3.vector[0]=b.vector[0],c.v3.vector[1]=b.vector[1],c.v3.texCoords[0]=b.texCoords[0],c.v3.texCoords[1]=b.texCoords[1],c.v3.base=b.base};a.pie=function(a,c){if(0===c.lists[x.CAP].count)return void(a.count=0);if(1===c.lists[x.CAP].count)return console.error("A single vector is not enough to define a pie."),void(a.count=0);a.count=c.lists[x.CAP].count-1;var d;for(d=0;d<a.count;++d){var b=a.items[d],g=c.vectors.items[c.lists[x.CAP].items[d]];b.v1.vector[0]=g.vector[0];
b.v1.vector[1]=g.vector[1];b.v1.texCoords[0]=g.texCoords[0];b.v1.texCoords[1]=g.texCoords[1];b.v1.base=g.base;g=c.vectors.items[c.lists[x.CAP].items[d+1]];b.v2.vector[0]=g.vector[0];b.v2.vector[1]=g.vector[1];b.v2.texCoords[0]=g.texCoords[0];b.v2.texCoords[1]=g.texCoords[1];b.v2.base=g.base;g=c.vectors.items[c.capCenter];b.v3.vector[0]=g.vector[0];b.v3.vector[1]=g.vector[1];b.v3.texCoords[0]=g.texCoords[0];b.v3.texCoords[1]=g.texCoords[1];b.v3.base=g.base}};a.buttCap=function(a,c,d){z(a,c,d)};a.roundCap=
function(a,c,d,b,g,h){void 0===h&&(h=0);z(a,c,d);d=b===t.START?0:1;b=b===t.START?1:0;a.capCenter=a.vectors.count;c=a.vectors.items[a.capCenter];c.vector[0]=0;c.vector[1]=0;c.texCoords[0]=C;c.texCoords[1]=C;++a.vectors.count;B(D,a.vectors.items[d].vector,a.vectors.items[b].vector,g,!1);g=a.vectors.count;c=a.lists[x.CAP];c.items[0]=d;var k=a.vectors.items[d].texCoords[1],l=a.vectors.items[b].texCoords[1];for(d=0;d<D.count;++d){var q=h*(1-Math.abs(D.count/2-d)/(D.count/2)),u=k+d/(D.count-1)*(l-k),m=
D.items[d],A=a.vectors.items[g+d];A.vector[0]=m[0];A.vector[1]=m[1];A.texCoords[0]=q;A.texCoords[1]=u;c.items[d+1]=g+d}c.items[D.count+1]=b;c.count=D.count+2;a.vectors.count=g+D.count};var O=Math.cos(Math.PI/4),R=Math.sin(Math.PI/4),W=Math.sqrt(2);a.squareCap=function(a,c,d,b){z(a,c,d);c=b===t.START?0:1;d=b===t.START?1:0;var g=q[0],h=q[1],l=q[2],u=q[3];b=q[4];var m=a.vectors.items[c].vector;g[0]=O*m[0]-R*m[1];g[1]=R*m[0]+O*m[1];k(u,g,W);h[0]=O*g[0]-R*g[1];h[1]=R*g[0]+O*g[1];l[0]=O*h[0]-R*h[1];l[1]=
R*h[0]+O*h[1];k(b,l,W);c=a.vectors.items[c];c.vector[0]=u[0];c.vector[1]=u[1];a=a.vectors.items[d];a.vector[0]=b[0];a.vector[1]=b[1]};a.fastMiterJoin=z;a.miterJoin=function(a,c,b){c=h(q[0],c);b=h(q[1],b);var g=q[2];g[0]=c[0]+b[0];g[1]=c[1]+b[1];b=l(q[3],g);c=y(b,c);b=k(q[4],b,1/c);c=d(q[5],b);g=a.vectors.items[0];g.vector[0]=b[0];g.vector[1]=b[1];g.texCoords[0]=C;g.texCoords[1]=H;b=a.vectors.items[1];b.vector[0]=c[0];b.vector[1]=c[1];b.texCoords[0]=C;b.texCoords[1]=F;a.vectors.count=2;c=a.lists[x.ENTRY];
c.items[0]=0;c.items[1]=1;c.count=2;c=a.lists[x.EXIT];c.items[0]=0;c.items[1]=1;c.count=2;a.lists[x.CAP].count=0;a.capCenter=void 0};a.bevelJoin=function(a,b,m,t){var u=t*t;t=c(b,m);var B=0<t?[H,F]:[F,H],v=B[0],B=B[1],A=0<t?d(q[0],h(q[1],b)):h(q[2],b),D=0<t?d(q[3],h(q[4],m)):h(q[5],m),z=q[6];z[0]=A[0]+D[0];z[1]=A[1]+D[1];var z=l(q[7],z),n=d(q[8],z),M=y(z,A),I=c(z,A),p=Math.abs(I/M),G=1+p*p,N=w>G?[p,!1]:[Math.sqrt(w-1),!0],I=N[0],N=N[1],p=u>G?[p,!1]:[Math.sqrt(u-1),!0],u=p[0];(p=p[1])&&N?(N=a.vectors.items[0],
g(N.vector,d(q[9],A),k(q[10],d(q[11],b),I)),N.texCoords[0]=C,N.texCoords[1]=v,n=a.vectors.items[1],g(n.vector,d(q[12],D),k(q[13],m,I)),n.texCoords[0]=C,n.texCoords[1]=v,v=a.vectors.items[2],v.vector[0]=0,v.vector[1]=0,v.texCoords[0]=C,v.texCoords[1]=C,v=a.vectors.items[3],g(v.vector,A,k(q[14],b,u)),v.texCoords[0]=C,v.texCoords[1]=B,b=a.vectors.items[4],g(b.vector,D,k(q[15],d(q[16],m),u)),b.texCoords[0]=C,b.texCoords[1]=B,a.vectors.count=5,m=a.lists[x.ENTRY],m.items[0]=0,m.items[1]=2,m.items[2]=3,
m.count=3,m=a.lists[x.EXIT],m.items[0]=1,m.items[1]=2,m.items[2]=4,m.count=3,m=a.lists[x.CAP],m.items[0]=3,m.items[1]=4,m.count=2,a.capCenter=2):!p&&N?(N=a.vectors.items[0],g(N.vector,d(q[9],A),k(q[10],d(q[11],b),I)),N.texCoords[0]=C,N.texCoords[1]=v,n=a.vectors.items[1],g(n.vector,d(q[12],D),k(q[13],m,I)),n.texCoords[0]=C,n.texCoords[1]=v,v=a.vectors.items[2],v.vector[0]=0,v.vector[1]=0,v.texCoords[0]=C,v.texCoords[1]=C,v=a.vectors.items[3],k(v.vector,z,1/M),v.texCoords[0]=C,v.texCoords[1]=B,a.vectors.count=
4,m=a.lists[x.ENTRY],m.items[0]=0,m.items[1]=2,m.items[2]=3,m.count=3,m=a.lists[x.EXIT],m.items[0]=1,m.items[1]=2,m.items[2]=3,m.count=3,a.lists[x.CAP].count=0,a.capCenter=void 0):p&&!N?(N=a.vectors.items[0],k(N.vector,n,1/M),N.texCoords[0]=C,N.texCoords[1]=v,n=a.vectors.items[1],n.vector[0]=0,n.vector[1]=0,n.texCoords[0]=C,n.texCoords[1]=C,v=a.vectors.items[2],g(v.vector,A,k(q[9],b,u)),v.texCoords[0]=C,v.texCoords[1]=B,v=a.vectors.items[3],g(v.vector,D,k(q[10],d(q[11],m),u)),v.texCoords[0]=C,v.texCoords[1]=
B,a.vectors.count=4,m=a.lists[x.ENTRY],m.items[0]=0,m.items[1]=1,m.items[2]=2,m.count=3,m=a.lists[x.EXIT],m.items[0]=0,m.items[1]=1,m.items[2]=3,m.count=3,m=a.lists[x.CAP],m.items[0]=2,m.items[1]=3,m.count=2,a.capCenter=1):p||N||(N=a.vectors.items[0],k(N.vector,n,1/M),N.texCoords[0]=C,N.texCoords[1]=v,n=a.vectors.items[1],k(n.vector,z,1/M),n.texCoords[0]=C,n.texCoords[1]=B,a.vectors.count=2,m=a.lists[x.ENTRY],m.items[0]=0,m.items[1]=1,m.count=2,m=a.lists[x.EXIT],m.items[0]=0,m.items[1]=1,m.count=
2,a.lists[x.CAP].count=0,a.capCenter=void 0);0>t&&(E(a.lists[x.ENTRY]),E(a.lists[x.EXIT]))};a.roundJoin=function(a,b,m,t){var v=c(b,m),u=0<v?[H,F]:[F,H],A=u[0],u=u[1],n=0<v?d(q[0],h(q[1],b)):h(q[2],b),z=0<v?d(q[3],h(q[4],m)):h(q[5],m),M=q[6];M[0]=n[0]+z[0];M[1]=n[1]+z[1];var p=l(q[7],M),M=d(q[8],p),I=y(p,n),p=c(p,n),p=Math.abs(p/I),G=w>1+p*p?[p,!1]:[Math.sqrt(w-1),!0],p=G[0];G[1]?(G=a.vectors.items[0],G.vector[0]=n[0],G.vector[1]=n[1],G.texCoords[0]=C,G.texCoords[1]=u,G=a.vectors.items[1],G.vector[0]=
z[0],G.vector[1]=z[1],G.texCoords[0]=C,G.texCoords[1]=u,G=a.vectors.items[2],g(G.vector,d(q[9],n),k(q[10],d(q[11],b),p)),G.texCoords[0]=C,G.texCoords[1]=A,b=a.vectors.items[3],g(b.vector,d(q[12],z),k(q[13],m,p)),b.texCoords[0]=C,b.texCoords[1]=A,m=a.vectors.items[4],m.vector[0]=0,m.vector[1]=0,m.texCoords[0]=C,m.texCoords[1]=C,a.vectors.count=5,m=a.lists[x.ENTRY],m.items[0]=2,m.items[1]=4,m.items[2]=0,m.count=3,m=a.lists[x.EXIT],m.items[0]=3,m.items[1]=4,m.items[2]=1,m.count=3,a.capCenter=4):(G=a.vectors.items[0],
G.vector[0]=n[0],G.vector[1]=n[1],G.texCoords[0]=C,G.texCoords[1]=u,G=a.vectors.items[1],G.vector[0]=z[0],G.vector[1]=z[1],G.texCoords[0]=C,G.texCoords[1]=u,G=a.vectors.items[2],k(G.vector,M,1/I),G.texCoords[0]=C,G.texCoords[1]=A,b=a.vectors.items[3],b.vector[0]=0,b.vector[1]=0,b.texCoords[0]=C,b.texCoords[1]=C,a.vectors.count=4,m=a.lists[x.ENTRY],m.items[0]=2,m.items[1]=3,m.items[2]=0,m.count=3,m=a.lists[x.EXIT],m.items[0]=2,m.items[1]=3,m.items[2]=1,m.count=3,a.capCenter=3);B(D,n,z,t,0>v);t=a.vectors.count;
n=a.lists[x.CAP];for(z=n.items[0]=0;z<D.count;++z)m=D.items[z],A=a.vectors.items[t+z],A.vector[0]=m[0],A.vector[1]=m[1],A.texCoords[0]=C,A.texCoords[1]=u,n.items[z+1]=t+z;n.items[D.count+1]=1;n.count=D.count+2;a.vectors.count=t+D.count;0>v&&(E(a.lists[x.ENTRY]),E(a.lists[x.EXIT]))};a.unitRoundJoin=function(a,b,g,k){var m=c(b,g),l=0<m?[H,F]:[F,H],t=l[0],l=l[1];b=0<m?d(q[0],h(q[1],b)):h(q[2],b);g=0<m?d(q[3],h(q[4],g)):h(q[5],g);var v=a.vectors.items[0];v.vector[0]=b[0];v.vector[1]=b[1];v.texCoords[0]=
C;v.texCoords[1]=l;v=a.vectors.items[1];v.vector[0]=g[0];v.vector[1]=g[1];v.texCoords[0]=C;v.texCoords[1]=l;v=a.vectors.items[2];d(v.vector,b);v.texCoords[0]=C;v.texCoords[1]=t;v=a.vectors.items[3];d(v.vector,g);v.texCoords[0]=C;v.texCoords[1]=t;t=a.vectors.items[4];t.vector[0]=0;t.vector[1]=0;t.texCoords[0]=C;t.texCoords[1]=C;a.vectors.count=5;t=a.lists[x.ENTRY];t.items[0]=2;t.items[1]=0;t.count=2;t=a.lists[x.EXIT];t.items[0]=3;t.items[1]=1;t.count=2;a.capCenter=4;B(D,b,g,k,0>m);k=a.vectors.count;
b=a.lists[x.CAP];for(t=b.items[0]=0;t<D.count;++t)g=D.items[t],v=a.vectors.items[k+t],v.vector[0]=g[0],v.vector[1]=g[1],v.texCoords[0]=C,v.texCoords[1]=l,b.items[t+1]=k+t;b.items[D.count+1]=1;b.count=D.count+2;a.vectors.count=k+D.count;0>m&&(E(a.lists[x.ENTRY]),E(a.lists[x.EXIT]))};a.rectJoin=function(a,c,b){c=h(q[0],c);b=h(q[1],b);var g=a.vectors.items[0];g.vector[0]=c[0];g.vector[1]=c[1];g.texCoords[0]=C;g.texCoords[1]=H;g=a.vectors.items[1];g.vector[0]=b[0];g.vector[1]=b[1];g.texCoords[0]=C;g.texCoords[1]=
H;g=a.vectors.items[2];d(g.vector,c);g.texCoords[0]=C;g.texCoords[1]=F;c=a.vectors.items[3];d(c.vector,b);c.texCoords[0]=C;c.texCoords[1]=F;a.vectors.count=4;c=a.lists[x.ENTRY];c.items[0]=0;c.items[1]=2;c.count=2;c=a.lists[x.EXIT];c.items[0]=1;c.items[1]=3;c.count=2;a.capCenter=void 0}})},"esri/views/vectorTiles/style/StyleLayer":function(){define(["require","exports","./StyleDefinition","./StyleProperty","./Filter"],function(p,a,b,y,n){Object.defineProperty(a,"__esModule",{value:!0});p=function(){function a(a,
c,d){switch(this.type=a,this.id=c.id,this.source=c.source,this.sourceLayer=c["source-layer"],this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,this.filter=c.filter,this.layout=c.layout,this.paint=c.paint,this.z=d,a){case 0:this._layoutDefinition=b.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=b.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=b.StyleDefinition.fillLayoutDefinition;this._paintDefinition=b.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=
b.StyleDefinition.lineLayoutDefinition;this._paintDefinition=b.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=b.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=b.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}return a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=n.createFilter(this.filter)},a.prototype.hasLayoutProperty=
function(a){var c=this._layoutProperties;return c&&c[a]?!0:!1},a.prototype.hasPaintProperty=function(a){var c=this._paintProperties;return c?void 0!==c[a]:!1},a.prototype.getLayoutValue=function(a,c){var d,b=this._layoutProperties;b&&(b=b[a])&&(d=b.getValue(c));a=this._layoutDefinition[a];return void 0===d&&(d=a["default"]),"enum"===a.type&&(d=a.values.indexOf(d)),d},a.prototype.getPaintValue=function(a,c){var d,b=this._paintProperties;b&&(b=b[a])&&(d=b.getValue(c));a=this._paintDefinition[a];return void 0===
d&&(d=a["default"]),"enum"===a.type&&(d=a.values.indexOf(d)),d},a.prototype._parseLayout=function(a){var c={},d;for(d in a)c[d]=new y(this._layoutDefinition[d],a[d]);return c},a.prototype._parsePaint=function(a){var c={},d;for(d in a)c[d]=new y(this._paintDefinition[d],a[d]);return c},a}();a.StyleLayer=p;p=function(){return function(a,b){this.cap=a.getLayoutValue("line-cap",b);this.join=a.getLayoutValue("line-join",b);this.miterLimit=a.getLayoutValue("line-miter-limit",b);this.roundLimit=a.getLayoutValue("line-round-limit",
b)}}();a.LineLayout=p;p=function(){return function(a,b,c){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b);this.optional=a.getLayoutValue("icon-optional",b);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b);this.size=a.getLayoutValue("icon-size",b);this.rotate=a.getLayoutValue("icon-rotate",b);this.padding=a.getLayoutValue("icon-padding",b);this.keepUpright=a.getLayoutValue("icon-keep-upright",b);this.offset=
a.getLayoutValue("icon-offset",b);c&&1===this.rotationAlignment&&!a.hasLayoutProperty("icon-rotation-alignment")&&(this.rotationAlignment=0)}}();a.IconLayout=p;p=function(){return function(a,b,c){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b);this.optional=a.getLayoutValue("text-optional",b);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b);this.font=a.getLayoutValue("text-font",b);this.maxWidth=a.getLayoutValue("text-max-width",
b);this.lineHeight=a.getLayoutValue("text-line-height",b);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b);this.justify=a.getLayoutValue("text-justify",b);this.anchor=a.getLayoutValue("text-anchor",b);this.maxAngle=a.getLayoutValue("text-max-angle",b);this.size=a.getLayoutValue("text-size",b);this.rotate=a.getLayoutValue("text-rotate",b);this.padding=a.getLayoutValue("text-padding",b);this.keepUpright=a.getLayoutValue("text-keep-upright",b);this.transform=a.getLayoutValue("text-transform",
b);this.offset=a.getLayoutValue("text-offset",b);c&&1===this.rotationAlignment&&!a.hasLayoutProperty("text-rotation-alignment")&&(this.rotationAlignment=0)}}();a.TextLayout=p})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(p,a){Object.defineProperty(a,"__esModule",{value:!0});p=function(){return function(){}}();p.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};p.fillLayoutDefinition={visibility:{type:"enum",
values:["visible","none"],"default":"visible"}};p.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};p.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",
values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},
"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!0},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number",
"default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",
values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};p.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};p.fillPaintDefinition={"fill-opacity":{type:"number",
minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};p.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},
"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};p.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,
maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color",
"default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};p.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",
minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};p.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",
value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};a.StyleDefinition=p})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(p,a,b,y){return function(){function a(b,h){switch(b.type){case "number":b=!0;break;case "color":b=!0;h=a._parseColor(h);break;case "array":b="number"===b.value;break;default:b=!1}b?this.getValue=this._interpolate(h):this.getValue=
this._piecewise(h)}return a.prototype._piecewise=function(a){var b=a.stops;return b?function(a){var c=b.length;if(0!==c){for(var k=0,g=0;c>g&&b[g][0]<=a;g++)k=g;return b[k][1]}}:function(){return a}},a.prototype._interpolate=function(a){var b=a.stops;if(b){var c=a.base||1;return function(a){for(var d,g,m=b.length,h=0;m>h;h++){var l=b[h];if(!(l[0]<=a)){g=l;break}d=l}if(d&&g){h=g[0]-d[0];a-=d[0];a=1===c?a/h:(Math.pow(c,a)-1)/(Math.pow(c,h)-1);if(Array.isArray(d[1])){d=d[1];g=g[1];m=[];for(h=0;h<d.length;h++)m.push(y.interpolate(d[h],
g[h],a));return m}return y.interpolate(d[1],g[1],a)}return d?d[1]:g?g[1]:void 0}}return function(){return a}},a._parseColor=function(l){if(Array.isArray(l))return l;if("string"==typeof l)return l=new b(l),[l.r/255,l.g/255,l.b/255,l.a||1];if(l&&l.stops)return l.stops=l.stops.map(function(b){return[b[0],a._parseColor(b[1])]}),l;throw Error("Incorrect color definition "+l);},a}()})},"esri/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(p,a){p=function(){function a(b,
n,l){this._op=b;"$type"===n?(l instanceof Array?this._val=l.map(function(b){return a._types.indexOf(b)}):this._val=a._types.indexOf(l),this._op+=11):(this._key=n,this._val=l)}return a.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=this._val;case 6:return a.values[this._key]>=
this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var b=0,l=this._val;b<l.length;b++){var h=l[b];if(h.filter(a))return!0}return!1;case 10:b=0;for(l=this._val;b<l.length;b++)if(h=l[b],!h.filter(a))return!1;return!0;case 11:b=0;for(l=this._val;b<l.length;b++)if(h=l[b],h.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<this._val;case 15:return a.type>
this._val;case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}},a.createFilter=function(b){if(!b)return new a(0,void 0,!0);var n=b[0];if(1>=b.length)return new a(0,void 0,"any"!==n);switch(n){case "\x3d\x3d":return new a(1,b[1],b[2]);case "!\x3d":return new a(2,b[1],b[2]);case "\x3e":return new a(4,b[1],b[2]);case "\x3c":return new a(3,b[1],b[2]);case "\x3e\x3d":return new a(6,b[1],b[2]);case "\x3c\x3d":return new a(5,
b[1],b[2]);case "in":return new a(7,b[1],b.slice(2));case "!in":return new a(8,b[1],b.slice(2));case "any":return new a(9,void 0,b.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,b.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,b.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+n);}},a}();return p._types=["Unknown","Point","LineString","Polygon"],p})},"esri/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ./style/StyleLayer ./Placement ./GeometryUtils ./TextShaping dojox/string/BidiEngine".split(" "),
function(p,a,b,y,n,l,h,c,d,k,g){function m(a,c){return a.iconMosaicItem&&c.iconMosaicItem?a.iconMosaicItem.page===c.iconMosaicItem.page?0:a.iconMosaicItem.page<c.iconMosaicItem.page?-1:1:a.iconMosaicItem&&!c.iconMosaicItem?1:!a.iconMosaicItem&&c.iconMosaicItem?-1:0}var B=function(){return function(){}}(),E=function(){return function(a,c,d,b){this.line=c;this.shaping=a;this.iconMosaicItem=d;this.anchor=b}}();p=(function(){return function(){}}(),function(a){function g(c,d,b,g,m,k,h,l){c=a.call(this,
c,d)||this;return c._markerRatio=1,c._markerMap=new Map,c._glyphMap=new Map,c._glyphBufferDataStorage=new Map,c._markerVertexBuffer=b,c._markerIndexBuffer=g,c._textVertexBuffer=m,c._textIndexBuffer=k,c._placementEngine=h,c._workerTileHandler=l,c}return b(g,a),Object.defineProperty(g.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"glyphsPageMap",{get:function(){return this._glyphMap},enumerable:!0,configurable:!0}),
Object.defineProperty(g.prototype,"textIndexStart",{get:function(){return this._textTriangleElementsStart},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"textIndexCount",{get:function(){return this._textTriangleElementsNum},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"sdfMarker",{get:function(){return!1},enumerable:!0,configurable:!0}),g.prototype.copy=function(a,c,d,b,m){m=new g(this.layer,this.zoom,a,c,d,b,m,this._workerTileHandler);return m.layerIndex=
this.layerIndex,m.layerExtent=this.layerExtent,m._markerVertexStart=a.index,m._markerTriangleElementsStart=c.index,m._textVertexStart=d.index,m._textTriangleElementsStart=b.index,m._markerTriangleElementsNum=0,m._textTriangleElementsNum=0,m._symbolInstances=this._symbolInstances,m._workerTileHandler=this._workerTileHandler,m._font=this._font,m._textLayout=this._textLayout,m._markerLayout=this._markerLayout,m._isLinePlacement=this._isLinePlacement,m._avoidEdges=this._avoidEdges,m},g.prototype.getResources=
function(a,c,d){var b=this.layer,m=this.zoom;a&&a.setExtent(this.layerExtent);for(var k=b.getLayoutValue("icon-image",m),h=b.getLayoutValue("text-field",m),l=b.getLayoutValue("text-font",m),b=b.getLayoutValue("text-transform",m),m=[],t=0,E=this._features;t<E.length;t++){var w=E[t],n=w.getGeometry(a);if(n&&0!==n.length){var z=void 0;k&&(z=this._replaceKeys(k,w.values),z&&c.add(z));var A=void 0,x=!1;if(h){switch(A=this._replaceKeys(h,w.values),b){case 2:A=A.toLowerCase();break;case 1:A=A.toUpperCase()}g._bidiEngine.hasBidiChar(A)&&
(x=void 0,x="rtl"===g._bidiEngine.checkContextual(A)?"IDNNN":"ICNNN",A=g._bidiEngine.bidiTransform(A,x,"VLYSN"),x=!0);w=A.length;if(0<w){var u=d[l];u||(u=d[l]=new Set);for(var H=0;w>H;H++){var p=A.charCodeAt(H);u.add(p)}}}if(z||A)w=new B,w.sprite=z,w.label=A,w.rtl=x,w.geometry=n,m.push(w)}}this._symbolFeatures=m},g.prototype.processFeatures=function(a,b){a&&a.setExtent(this.layerExtent);var l,t=this.layer,B=this.zoom;b=this._isLinePlacement=1===t.getLayoutValue("symbol-placement",B);a=this._avoidEdges=
t.getLayoutValue("symbol-avoid-edges",B)&&!b;var v=8*t.getLayoutValue("symbol-spacing",B),q=t.getLayoutValue("icon-image",B),w=t.getLayoutValue("text-field",B),z=this._workerTileHandler;q&&(this._markerLayout=new h.IconLayout(t,B,b),l=z.getSpriteItems());var n,x;if(w){var p=this._textLayout=new h.TextLayout(t,B,b);n=void 0;p.font&&p.font.length&&(n=p.font[0],this._font=n);x=.5;switch(p.anchor){case 5:case 1:case 7:x=0;break;case 6:case 2:case 8:x=1}t=.5;switch(p.anchor){case 5:case 3:case 6:t=0;break;
case 7:case 4:case 8:t=1}B=.5;switch(p.justify){case 0:B=0;break;case 2:B=1}var q=24*p.letterSpacing,w=b?0:24*p.maxWidth,y=24*p.lineHeight,p=[24*p.offset[0],24*p.offset[1]];n=z.getGlyphItems(n);x=new k(n,w,y,q,p,x,t,B)}this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=
0;this._markerMap.clear();this._glyphMap.clear();this._symbolInstances=z=[];t=this._textLayout;B=1;t&&t.size&&(B=t.size/24);q=t?t.maxAngle*d.C_DEG_TO_RAD:0;w=t?8*t.size:0;y=0;for(p=this._symbolFeatures;y<p.length;y++){var A=p[y],M=void 0;A.sprite&&(M=l[A.sprite]);var u=void 0,N=A.label,U=0;if(N&&(u=x.getShaping(N,A.rtl),u&&0<u.length)){for(var U=1E30,N=-1E30,P=0,J=u;P<J.length;P++)var Q=J[P],U=Math.min(U,Q.x),N=Math.max(N,Q.x);U=(N-U+48)*B*8}N=0;for(A=A.geometry;N<A.length;N++)for(P=A[N],Q=void 0,
b?(u&&0<u.length&&t&&t.size&&g._smoothVertices(P,8*t.size*(2+Math.min(2,4*Math.abs(t.offset[1])))),Q=g._findAnchors(P,v,U)):Q=[new c.Anchor(P[0].x,P[0].y)],J=0;J<Q.length;J++){var S=Q[J];0>S.x||4096<S.x||0>S.y||4096<S.y||b&&0<U&&0===t.rotationAlignment&&!g._honorsTextMaxAngle(P,S,U,q,w)||z.push(new E(u,P,M,S))}}z.sort(m);for(l=0;l<z.length;l++)this._processFeature(z[l],n,a);this._addPlacedGlyphs()},g.prototype.updateSymbols=function(){this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=
this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=0;this._markerMap.clear();this._glyphMap.clear();for(var a=this._workerTileHandler.getGlyphItems(this._font),c=this._avoidEdges,b=0,d=this._symbolInstances;b<d.length;b++)this._processFeature(d[b],a,c);this._addPlacedGlyphs()},g.prototype._replaceKeys=function(a,c){return a.replace(/{([^{}]+)}/g,function(a,
b){return b in c?c[b]:""})},g.prototype._processFeature=function(a,c,b){var g=a.line,m=a.iconMosaicItem,k=a.shaping,h=a.anchor,t=(a=this._markerLayout)&&!!m,B=!0,E=1;t&&(E=a.size/(1/this._markerRatio)*8,B=a.optional||!m);var w=this._textLayout,z=w&&k&&0<k.length,n=1,x=n,p=!0;z&&(n=w.size/24,x=8*n,p=w.optional||!k||0===k.length);var u,n=new l.Point(0,-17);if(t){if(u=this._placementEngine.getIconPlacement(h,m,E,g,a,b),u.footprint.minzoom===d.C_INFINITY&&!B)return;h.minzoom>u.footprint.minzoom&&(u.footprint.minzoom=
h.minzoom)}var H;if(z&&(H=this._placementEngine.getTextPlacement(h,n,k,c,x,g,w,b))){if(H.footprint.minzoom===d.C_INFINITY&&!p)return;h.minzoom>H.footprint.minzoom&&(H.footprint.minzoom=h.minzoom)}if(!p&&!B||!B&&H&&H.footprint.minzoom!==d.C_INFINITY||!p&&u&&u.footprint.minzoom!==d.C_INFINITY)c=Math.max(u.footprint.minzoom,H.footprint.minzoom),u.footprint.minzoom=c,H.footprint.minzoom=c;H&&H.footprint.minzoom!==d.C_INFINITY&&(w.ignorePlacement||this._placementEngine.add(H),this._storePlacedGlyphs(H.shapes,
H.footprint.minzoom,this.zoom));u&&u.footprint.minzoom!==d.C_INFINITY&&(a.ignorePlacement||this._placementEngine.add(u),this._addPlacedIcons(u.shapes,u.footprint.minzoom,this.zoom,m.page))},g.prototype._addPlacedIcons=function(a,c,b,g){c=Math.max(b+d.log2(c),0);for(var m=this._markerVertexBuffer,k=this._markerIndexBuffer,h=0;h<a.length;h++){var l=a[h],t=Math.max(b+d.log2(l.minzoom),c),B=Math.min(b+d.log2(l.maxzoom),25);if(!(t>=B)){var E=l.tl,w=l.tr,n=l.bl,z=l.br,x=l.mosaicRect,u=-l.labelAngle,l=l.anchor,
p=m.index,H=x.x,F=x.y,y=H+x.width,x=F+x.height;m.add(l.x,l.y,E.x,E.y,H,F,u,t,B,c);m.add(l.x,l.y,w.x,w.y,y,F,u,t,B,c);m.add(l.x,l.y,n.x,n.y,H,x,u,t,B,c);m.add(l.x,l.y,z.x,z.y,y,x,u,t,B,c);k.add(p+0,p+1,p+2);k.add(p+1,p+2,p+3);this._markerMap.has(g)?this._markerMap.get(g)[1]+=6:this._markerMap.set(g,[this._markerTriangleElementsStart+this._markerTriangleElementsNum/3,6]);this._markerTriangleElementsNum+=6}}},g.prototype._addPlacedGlyphs=function(){var a=this,c=this._textVertexBuffer,b=this._textIndexBuffer;
this._glyphBufferDataStorage.forEach(function(d,g){for(var m=0;m<d.length;m++){var k=d[m],h=c.index;c.add(k.glyphAnchor[0],k.glyphAnchor[1],k.tl[0],k.tl[1],k.xmin,k.ymin,k.labelAngle,k.minLod,k.maxLod,k.placementLod);c.add(k.glyphAnchor[0],k.glyphAnchor[1],k.tr[0],k.tr[1],k.xmax,k.ymin,k.labelAngle,k.minLod,k.maxLod,k.placementLod);c.add(k.glyphAnchor[0],k.glyphAnchor[1],k.bl[0],k.bl[1],k.xmin,k.ymax,k.labelAngle,k.minLod,k.maxLod,k.placementLod);c.add(k.glyphAnchor[0],k.glyphAnchor[1],k.br[0],k.br[1],
k.xmax,k.ymax,k.labelAngle,k.minLod,k.maxLod,k.placementLod);b.add(h+0,h+1,h+2);b.add(h+1,h+2,h+3);a._glyphMap.has(g)?a._glyphMap.get(g)[1]+=6:a._glyphMap.set(g,[a._textTriangleElementsStart+a._textTriangleElementsNum/3,6]);a._textTriangleElementsNum+=6}});this._glyphBufferDataStorage.clear()},g.prototype._storePlacedGlyphs=function(a,c,b){c=Math.max(b+d.log2(c),0);for(var g=0;g<a.length;g++){var k=a[g],m=Math.max(b+d.log2(k.minzoom),c),h=Math.min(b+d.log2(k.maxzoom),25);if(!(m>=h)){var l=k.tl,t=
k.tr,B=k.bl,E=k.br,n=-k.labelAngle,z=k.anchor,w=k.mosaicRect;this._glyphBufferDataStorage.has(k.page)||this._glyphBufferDataStorage.set(k.page,[]);this._glyphBufferDataStorage.get(k.page).push({glyphAnchor:[z.x,z.y],tl:[l.x,l.y],tr:[t.x,t.y],bl:[B.x,B.y],br:[E.x,E.y],xmin:w.x,ymin:w.y,xmax:w.x+w.width,ymax:w.y+w.height,labelAngle:n,minLod:m,maxLod:h,placementLod:c})}}},g._findAnchors=function(a,b,g){b+=g;for(var k=0,m=a.length-1,h=0;m>h;h++)k+=l.Point.distance(a[h],a[h+1]);h=g||b;if(h*=.5,h>=k)return[];
g=h/k;b=k/Math.max(Math.round(k/b),1);for(var k=0,m=-b/2,t=[],B=a.length-1,h=0;B>h;h++){for(var E=a[h],n=a[h+1],z=n.x-E.x,w=n.y-E.y,x=Math.sqrt(z*z+w*w),p=void 0;k+x>m+b;){var m=m+b,H=(m-k)/x,u=d.interpolate(E.x,n.x,H),H=d.interpolate(E.y,n.y,H);void 0===p&&(p=Math.atan2(w,z));t.push(new c.Anchor(u,H,p,h,g))}k+=x}return t},g.deviation=function(a,c,b){return Math.atan2((c.x-a.x)*(b.y-c.y)-(c.y-a.y)*(b.x-c.x),(c.x-a.x)*(b.x-c.x)+(c.y-a.y)*(b.y-c.y))},g._honorsTextMaxAngle=function(a,c,b,d,g){var k=
0;b/=2;for(var m=new l.Point(c.x,c.y),h=c.segment+1;k>-b;){if(--h,0>h)return!1;k-=l.Point.distance(a[h],m);m=a[h]}k+=l.Point.distance(a[h],a[h+1]);c=[];for(var m=0,B=a.length;b>k;){var t=a[h],E=void 0;do{if(++h,h===B)return!1;E=a[h]}while(E.isEqual(t));var n=h,z=void 0;do{if(++n,n===B)return!1;z=a[n]}while(z.isEqual(E));t=this.deviation(t,E,z);c.push({deviation:t,distToAnchor:k});for(m+=t;k-c[0].distToAnchor>g;)m-=c.shift().deviation;if(Math.abs(m)>d)return!1;k+=l.Point.distance(E,z)}return!0},g._smoothVertices=
function(a,c){if(!(0>=c)){var b=a.length;if(!(3>b)){var d=[],g=0;d.push(0);for(var k=1;b>k;k++)g+=l.Point.distance(a[k],a[k-1]),d.push(g);c=Math.min(c,.2*g);g=[];g.push(a[0].x);g.push(a[0].y);var m=a[b-1].x,h=a[b-1].y,k=l.Point.sub(a[0],a[1]);k.normalize();a[0].x+=c*k.x;a[0].y+=c*k.y;k.assignSub(a[b-1],a[b-2]);k.normalize();a[b-1].x+=c*k.x;a[b-1].y+=c*k.y;for(k=1;b>k;k++)d[k]+=c;d[b-1]+=c;for(var B=.5*c,k=1;b-1>k;k++){for(var E=0,t=0,n=0,z=k-1;0<=z&&!(d[z+1]<d[k]-B);z--){var x=B+d[z+1]-d[k],p=d[z+
1]-d[z],u=d[k]-d[z]<B?1:x/p;if(1E-6>Math.abs(u))break;var w=u*u,y=u*x-.5*w*p,P=u*p/c,J=a[z+1],Q=a[z].x-J.x,S=a[z].y-J.y,E=E+P/y*(J.x*u*x+.5*w*(x*Q-p*J.x)-w*u*p*Q/3),t=t+P/y*(J.y*u*x+.5*w*(x*S-p*J.y)-w*u*p*S/3),n=n+P}for(z=k+1;b>z&&!(d[z-1]>d[k]+B);z++){x=B-d[z-1]+d[k];p=d[z]-d[z-1];u=d[z]-d[k]<B?1:x/p;if(1E-6>Math.abs(u))break;w=u*u;y=u*x-.5*w*p;P=u*p/c;J=a[z-1];Q=a[z].x-J.x;S=a[z].y-J.y;E+=P/y*(J.x*u*x+.5*w*(x*Q-p*J.x)-w*u*p*Q/3);t+=P/y*(J.y*u*x+.5*w*(x*S-p*J.y)-w*u*p*S/3);n+=P}g.push(E/n);g.push(t/
n)}g.push(m);g.push(h);for(z=k=0;b>k;k++)a[k].x=g[z++],a[k].y=g[z++]}}},g}(n));return p._bidiEngine=new g,p})},"esri/views/vectorTiles/Placement":function(){define(["require","exports","./Geometry","./GeometryUtils","./Conflict"],function(p,a,b,y,n){Object.defineProperty(a,"__esModule",{value:!0});p=function(){return function(a,c,b,h,l){void 0===b&&(b=0);void 0===h&&(h=-1);void 0===l&&(l=d);this.x=a;this.y=c;this.angle=b;this.segment=h;this.minzoom=l}}();a.Anchor=p;p=function(){return function(a,
c,b){this.glyph=a;this.x=c;this.y=b}}();a.ShapedGlyph=p;var l=function(){return function(a,c,b,h,l,z,n){void 0===l&&(l=!1);void 0===z&&(z=d);void 0===n&&(n=y.C_INFINITY);this.anchor=a;this.labelAngle=c;this.glyphAngle=b;this.page=h;this.upsideDown=l;this.minzoom=z;this.maxzoom=n}}(),h=function(){return function(a,c,b,d,h,l,n,t,p,y){this.tl=a;this.tr=c;this.bl=b;this.br=d;this.mosaicRect=h;this.labelAngle=l;this.anchor=n;this.minzoom=t;this.maxzoom=p;this.page=y}}();a.PlacedSymbol=h;var c=function(){return function(a,
c){this.footprint=a;this.shapes=c}}();a.Placement=c;var d=.5;p=function(){function a(){this.mapAngle=0;this._conflictEngine=new n.ConflictEngine}return a.prototype.reset=function(){this._conflictEngine.reset()},a.prototype.setAngle=function(a){this.mapAngle=a;this._conflictEngine.setAngle(a)},a.prototype.getIconPlacement=function(a,k,l,E,z,x){var g=k.width/k.pixelRatio,m=k.height/k.pixelRatio;E=z.offset[0]-g/2;var B=z.offset[1]-m/2,g=E+g,m=B+m,p=k.rect,C=E-2,v=B-2,q=C+p.width/k.pixelRatio,D=v+p.height/
k.pixelRatio;k=new b.Point(C,v);var G=new b.Point(q,D),C=new b.Point(C,D),q=new b.Point(q,v),D=z.rotate*y.C_DEG_TO_RAD,v=1===z.rotationAlignment;if(0<=a.segment&&!v&&(D+=a.angle),0!==D){var I=Math.cos(D),O=Math.sin(D);k.rotate(I,O);G.rotate(I,O);C.rotate(I,O);q.rotate(I,O)}I=8*z.padding;O=new b.Point(a.x,a.y);a=new n.Footprint(this.mapAngle,I,v);a.addBox(O,new n.Box(E,B,g,m),l,D,d,y.C_INFINITY);l=new h(k,q,C,G,p,0,O,d,y.C_INFINITY,0);l=new c(a,[l]);E=d;return z.allowOverlap||(E=this._conflictEngine.getMinZoom(l.footprint,
E,x,v)),a.minzoom=E,l},a.prototype.getTextPlacement=function(a,k,B,E,z,x,t,p){for(var g,m=new b.Point(a.x,a.y),w=t.rotate*y.C_DEG_TO_RAD,v=0===t.rotationAlignment,q=t.keepUpright,D=d,G=!v,I=G?0:a.angle,O=0<=a.segment&&v,R=new n.Footprint(this.mapAngle,8*t.padding,G),W=[],A=!O,M=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,N=M,U=u,P=O?q:v&&q,J=[],Q=0;Q<B.length;Q++){var S=B[Q],X=E[S.glyph];if(X&&!X.rect.isEmpty){var ja=X.rect,ea=X.metrics,ca=X.page;A&&(g&&g!==S.y&&(R.addBox(m,new n.Box(M,N,
u,U),z,w,d,y.C_INFINITY),M=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,N=M,U=u),g=S.y);var fa=[];if(O){if(X=(k.x+S.x+ea.left-4+.5*X.metrics.width)*z,D=this._placeGlyph(a,D,X,x,a.segment,1,ca,fa),q&&(D=this._placeGlyph(a,D,X,x,a.segment,-1,ca,fa)),2<=D)break}else fa.push(new l(m,I,I,ca)),v&&q&&fa.push(new l(m,I+y.C_PI,I+y.C_PI,ca,!0));for(var ca=S.x+k.x+ea.left,S=S.y+k.y-ea.top,X=ca+ea.width,ea=S+ea.height,da=new b.Point(ca-4,S-4),Y=new b.Point(da.x+ja.width,da.y+ja.height),ga=new b.Point(da.x,
Y.y),V=new b.Point(Y.x,da.y),ha=0;ha<fa.length;ha++){var Z=fa[ha],ka=da.clone(),la=ga.clone(),ma=V.clone(),na=Y.clone(),oa=S,ba=ea,K=Z.glyphAngle+w;if(0!==K){var T=Math.cos(K),e=Math.sin(K);ka.rotate(T,e);na.rotate(T,e);la.rotate(T,e);ma.rotate(T,e)}W.push(new h(ka,ma,la,na,ja,Z.labelAngle,Z.anchor,Z.minzoom,Z.maxzoom,Z.page));(!P||this._legible(Z.labelAngle))&&(A?(M>ca&&(M=ca),N>oa&&(N=oa),X>u&&(u=X),ba>U&&(U=ba)):2>Z.minzoom&&R.addBox(Z.anchor,new n.Box(ca,oa,X,ba),z,K,Z.minzoom,Z.maxzoom));J.push(Z)}}}if(2<=
D)return null;A&&R.addBox(m,new n.Box(M,N,u,U),z,w,d,y.C_INFINITY);a=new c(R,W);return t.allowOverlap||(D=this._conflictEngine.getMinZoom(a.footprint,D,p,G)),R.minzoom=D,a},a.prototype.add=function(a){this._conflictEngine.add(a.footprint)},a.prototype._legible=function(a){a=y.radToByte(a);return 65>a||193<=a},a.prototype._placeGlyph=function(a,c,d,k,h,n,t,p){var g=0>n?y.positiveMod(a.angle+y.C_PI,y.C_2PI):a.angle,m=this._legible(g),B=0;0>d&&(n*=-1,d*=-1,B=y.C_PI);0<n&&++h;a=new b.Point(a.x,a.y);var E=
k[h],q=y.C_INFINITY;if(k.length<=h)return q;for(;;){var z=E.x-a.x,x=E.y-a.y,w=Math.sqrt(z*z+x*x),O=Math.max(d/w,c),z=y.positiveMod(Math.atan2(x/w,z/w)+B,y.C_2PI);if(p.push(new l(a,g,z,t,m,O,q)),c>=O)return O;a=E.clone();do{if(h+=n,k.length<=h||0>h)return O;E=k[h]}while(a.isEqual(E));q=E.x-a.x;z=E.y-a.y;x=Math.sqrt(q*q+z*z);q*=w/x;z*=w/x;a.x-=q;a.y-=z;q=O}},a}();a.PlacementEngine=p})},"esri/views/vectorTiles/Conflict":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(p,
a,b,y){Object.defineProperty(a,"__esModule",{value:!0});p=function(){function a(a,b,k,g){this.left=a;this.top=b;this.right=k;this.bottom=g}return a.prototype.clone=function(){return new a(this.left,this.top,this.right,this.bottom)},a.prototype.move=function(a,b){this.left+=a;this.top+=b;this.right+=a;this.bottom+=b},a.prototype.rotate=function(a,b){var c=this.left,d=this.right,m=this.top,h=this.bottom,l=c*a-m*b,z=c*b+m*a,n=d*a-m*b,m=d*b+m*a,t=c*a-h*b,c=c*b+h*a,p=d*a-h*b;a=d*b+h*a;this.left=Math.min(l,
n,t,p);this.top=Math.min(z,m,c,a);this.right=Math.max(l,n,t,p);this.bottom=Math.max(z,m,c,a)},a.overlaps=function(a,b){return a.right>b.left&&a.left<b.right&&a.bottom>b.top&&a.top<b.bottom},a}();a.Box=p;var n=function(){function a(a,b,k,g){this.anchor=a;this.corners=b;this.minzoom=k;this.maxzoom=g}return a.prototype.left=function(){return this.corners[0].x},a.prototype.right=function(){return this.corners[2].x},a.prototype.top=function(){return this.corners[1].y},a.prototype.bottom=function(){return this.corners[3].y},
a}();a.Obstacle=n;p=function(){function a(a,b,k){this.obstacles=[];this.mapAngle=a;this.padding=b;this.isScreenAligned=k;this.minzoom=l}return a.prototype.addBox=function(a,d,k,g,m,h){var c=d.left*k-this.padding,l=d.top*k-this.padding,B=d.right*k+this.padding;d=d.bottom*k+this.padding;c=[new b.Point(c,l),new b.Point(B,l),new b.Point(B,d),new b.Point(c,d)];0!==this.mapAngle&&(l=Math.cos(this.mapAngle),B=Math.sin(this.mapAngle),a=a.clone(),a.rotate(l,B));if(this.isScreenAligned||(g+=this.mapAngle),
0!==g){l=Math.cos(g);B=Math.sin(g);c[0].rotate(l,B);c[1].rotate(l,B);c[2].rotate(l,B);c[3].rotate(l,B);g=0;for(l=1;4>l;l++)c[l].x<c[g].x?g=l:c[l].x===c[g].x&&c[l].y<c[g].y&&(g=l);if(g){B=[];for(l=0;4>l;l++)B.push(c[(l+g)%4]);c=B}}this.obstacles.push(new n(a,c,m,h))},a}();a.Footprint=p;var l=.5;p=function(){function a(){this._grid=[]}return a.prototype.setAngle=function(a){this._angle=a;this._c=Math.cos(a);this._s=Math.sin(a)},a.prototype.reset=function(){this._angle=this._s=0;this._c=1;this._grid=
[]},a.prototype.add=function(c){var b=this._grid,k=0;for(c=c.obstacles;k<c.length;k++)for(var g=c[k],m=g.anchor,h=a._gridClamp(Math.min(g.left()+m.x,m.x)),l=a._gridClamp(Math.max(g.right()+m.x,m.x)),n=a._gridClamp(Math.min(g.top()+m.y,m.y)),m=a._gridClamp(Math.max(g.bottom()+m.y,m.y));m>=n;n++)for(var p=h;l>=p;p++){var t=b[16*n+p];t||(t=b[16*n+p]=[]);t.push(g)}},a.prototype.getMinZoom=function(c,b,k,g){if(0===c.obstacles.length)return y.C_INFINITY;k=this._grid;g=0;for(c=c.obstacles;g<c.length;g++)for(var d=
c[g],h=d.anchor,l=a._gridClamp(Math.min(d.left()+h.x,h.x)),n=a._gridClamp(Math.max(d.right()+h.x,h.x)),p=a._gridClamp(Math.min(d.top()+h.y,h.y)),h=a._gridClamp(Math.max(d.bottom()+h.y,h.y));h>=p;p++)for(var t=l;n>=t;t++){var w=k[16*p+t];if(w)for(var H=0;H<w.length;H++){var F=w[H];if(!(d.minzoom>=F.maxzoom||F.minzoom>=d.maxzoom)&&(b=a._calcPlacementZoom(d,F,b),2<=b))return y.C_INFINITY}}return 2>b?b:y.C_INFINITY},a._gridClamp=function(a){return y.clamp(a>>9,-7,8)},a._calcPlacementZoom=function(c,b,
k){var d=b.anchor.x-c.anchor.x;if(0===d&&(c.right()<b.left()||b.right()<c.left()))return k;var m=b.anchor.y-c.anchor.y;if(0===m&&(c.bottom()<b.top()||b.bottom()<c.top()))return k;var h=y.C_INFINITY;if(0!==d){var l=(0<d?c.right()-b.left():c.left()-b.right())/d;h>l&&(h=l);d=0<d?a._calcExtZoomX(c,b,l):a._calcExtZoomX(b,c,l);h>d&&(h=d)}0!==m&&(d=(0<m?c.bottom()-b.top():c.top()-b.bottom())/m,h>d&&(h=d),m=0<m?a._calcExtZoomY(c,b,d):a._calcExtZoomY(b,c,d),h>m&&(h=m));return h<c.minzoom||h<b.minzoom?k:(h=
Math.min(h,c.maxzoom,b.maxzoom),k>h&&(h=k),h)},a._calcExtZoomX=function(a,b,k){var c,d,h,l;if(b.anchor.y+b.corners[0].y/k>a.anchor.y+a.corners[2].y/k){var n=a.corners[2].x-a.corners[3].x,p=a.corners[2].y-a.corners[3].y,t=b.corners[1].x-b.corners[0].x,w=b.corners[1].y-b.corners[0].y;0<=n*w-p*t?a.anchor.y+a.corners[3].y/k<b.anchor.y+b.corners[0].y/k?(c=a.corners[3],d=b.corners[0],h=b.corners[1],l=1):(c=b.corners[0],d=a.corners[3],h=a.corners[2],l=-1):a.anchor.y+a.corners[2].y/k>b.anchor.y+b.corners[1].y/
k?(c=a.corners[2],d=b.corners[0],h=b.corners[1],l=1):(c=b.corners[1],d=a.corners[3],h=a.corners[2],l=-1)}else n=a.corners[2].x-a.corners[1].x,p=a.corners[2].y-a.corners[1].y,t=b.corners[3].x-b.corners[0].x,w=b.corners[3].y-b.corners[0].y,0>n*w-p*t?a.anchor.y+a.corners[1].y/k>b.anchor.y+b.corners[0].y/k?(c=a.corners[1],d=b.corners[0],h=b.corners[3],l=1):(c=b.corners[0],d=a.corners[1],h=a.corners[2],l=-1):a.anchor.y+a.corners[2].y/k<b.anchor.y+b.corners[3].y/k?(c=a.corners[2],d=b.corners[0],h=b.corners[3],
l=1):(c=b.corners[3],d=a.corners[1],h=a.corners[2],l=-1);k=h.x-d.x;h=h.y-d.y;return l*((c.y-d.y)*k-(c.x-d.x)*h)/((a.anchor.x-b.anchor.x)*h-(a.anchor.y-b.anchor.y)*k)},a._calcExtZoomY=function(a,b,k){var c,d,h,l;if(b.anchor.x+b.corners[1].x/k>a.anchor.x+a.corners[3].x/k){var n=a.corners[3].x-a.corners[2].x,p=a.corners[3].y-a.corners[2].y,t=b.corners[0].x-b.corners[1].x,w=b.corners[0].y-b.corners[1].y;0>n*w-p*t?a.anchor.x+a.corners[2].x/k<b.anchor.x+b.corners[1].x/k?(c=a.corners[2],d=b.corners[1],h=
b.corners[0],l=1):(c=b.corners[1],d=a.corners[2],h=a.corners[3],l=-1):a.anchor.x+a.corners[3].x/k>b.anchor.x+b.corners[0].x/k?(c=a.corners[3],d=b.corners[1],h=b.corners[0],l=1):(c=b.corners[0],d=a.corners[2],h=a.corners[3],l=-1)}else n=a.corners[3].x-a.corners[0].x,p=a.corners[3].y-a.corners[0].y,t=b.corners[2].x-b.corners[1].x,w=b.corners[2].y-b.corners[1].y,0<n*w-p*t?a.anchor.x+a.corners[0].x/k>b.anchor.x+b.corners[1].x/k?(c=a.corners[0],d=b.corners[1],h=b.corners[2],l=1):(c=b.corners[1],d=a.corners[0],
h=a.corners[3],l=-1):a.anchor.x+a.corners[3].x/k<b.anchor.x+b.corners[2].x/k?(c=a.corners[3],d=b.corners[1],h=b.corners[2],l=1):(c=b.corners[2],d=a.corners[0],h=a.corners[3],l=-1);k=h.x-d.x;h=h.y-d.y;return l*((c.y-d.y)*k-(c.x-d.x)*h)/((a.anchor.x-b.anchor.x)*h-(a.anchor.y-b.anchor.y)*k)},a}();a.ConflictEngine=p})},"esri/views/vectorTiles/TextShaping":function(){define(["require","exports","./Placement"],function(p,a,b){return function(){function a(a,b,h,c,d,k,g,m){this._glyphItems=a;this._maxWidth=
b;this._lineHeight=h;this._letterSpacing=c;this._offset=d;this._hAnchor=k;this._vAnchor=g;this._justify=m}return a.prototype.getShaping=function(a,l){for(var h=this._glyphItems,c=this._letterSpacing,d=this._offset[0],k=this._offset[1],g=[],m=a.length,n=0;m>n;n++){var p=a.charCodeAt(n),z=h[p];z&&(g.push(new b.ShapedGlyph(p,d,k)),d+=z.metrics.advance+c)}if(0<g.length){p=this._maxWidth;a=this._lineHeight;c=this._justify;d=g.length;m=k=h=0;if(0!==p)for(var x=z=0,n=0;d>n;n++){var t=g[n];if(t.x-=x,l?t.y-=
a*h:t.y+=a*h,t.x>p&&0<z){for(var w=g[z+1].x,m=Math.max(w,m),y=z+1;n>=y;y++)l?g[y].y-=a:g[y].y+=a,g[y].x-=w;c&&this._applyJustification(g,k,z-1);k=z+1;z=0;x+=w;h++}32===t.glyph&&(z=n)}n=g[d-1];m=Math.max(m,n.x+this._glyphItems[n.glyph].metrics.advance);c&&this._applyJustification(g,k,d-1);n=(c-this._hAnchor)*m;c=(-this._vAnchor*(h+1)+.5)*a;l&&h&&(c+=h*a);for(l=0;l<g.length;l++)a=g[l],a.x+=n,a.y+=c}return g},a.prototype._applyJustification=function(a,b,h){for(var c=a[h],c=(c.x+this._glyphItems[c.glyph].metrics.advance)*
this._justify;h>=b;b++)a[b].x-=c},a}()})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(p,a,b){function y(a,b,d,e,f){var g=a;void 0===b&&(b=f.defInFormat);void 0===d&&(d=f.defOutFormat);void 0===e&&(e=f.defSwap);if(b!==d){var k,h=b.substring(0,1);k=b.substring(1,4);var m=d.substring(0,1),q=d.substring(1,4);"C"===k.charAt(0)&&(k=n(g),k="ltr"===k||"rtl"===k?k.toUpperCase():"L"===b.charAt(2)?"LTR":"RTL",b=h+k);"C"===q.charAt(0)&&(k=n(g),
"rtl"===k?q="RTL":"ltr"===k?(g=g.split(""),g.reverse(),k=n(g.join("")),q=k.toUpperCase()):q="L"===d.charAt(2)?"LTR":"RTL",d=m+q)}if(b===d)return a;m=b.substring(0,1);g=b.substring(1,4);h=d.substring(0,1);q=d.substring(1,4);f.inFormat=b;f.outFormat=d;f.swap=e;if("L"===m&&"VLTR"===d){if("LTR"===g)return f.dir=D,l(a,f);if("RTL"===g)return f.dir=G,l(a,f)}if("V"===m&&"V"===h)return f.dir="RTL"===g?G:D,c(a,f);if("L"===m&&"VRTL"===d)return f.dir="LTR"===g?D:G,a=l(a,f),c(a);if("VLTR"===b&&"LLTR"===d)return f.dir=
D,l(a,f);if("V"===m&&"L"===h&&g!==q)return a=c(a),"RTL"===g?y(a,"LLTR","VLTR",e,f):y(a,"LRTL","VRTL",e,f);if("VRTL"===b&&"LRTL"===d)return y(a,"LRTL","VRTL",e,f);if("L"===m&&"L"===h)return b=f.swap,f.swap=b.substr(0,1)+"N","RTL"===g?(f.dir=G,a=l(a,f),f.swap="N"+b.substr(1,2),f.dir=D,a=l(a,f)):(f.dir=D,a=l(a,f),f.swap="N"+b.substr(1,2),a=y(a,"VLTR","LRTL",f.swap,f)),a}function n(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?"z">=a[0]?"ltr":"rtl":""}
function l(a,c){a=a.split("");var b=[];h(a,b,c);if(0!==c.hiLevel&&c.swap.substr(0,1)!==c.swap.substr(1,2))for(var d=0;d<a.length;d++)if(1===b[d]){var f=d,e;b:{e=a[d];for(var k=void 0,m=0,l=R.length-1;m<=l;)if(k=Math.floor((m+l)/2),e<R[k][0])l=k-1;else if(e>R[k][0])m=k+1;else{e=R[k][1];break b}}a[f]=e}g(2,a,b,c);g(1,a,b,c);F=b;return a.join("")}function h(a,c,b){var d=a.length,e=b.dir?ca:ea,f=null,g=null,k=null,f=0,g=g=null,h=-1,l=g=null,n=[],p=[];b.hiLevel=b.dir;b.lastArabic=!1;b.hasUbatAl=!1;b.hasUbatB=
!1;b.hasUbatS=!1;for(g=0;g<d;g++){var l=g,k=a[g].charCodeAt(0),t=qa[k>>8];n[l]=t<ba?t:ra[t-ba][k&255]}for(l=0;l<d;l++){p[l]=g=m(a,n,p,l,b);f=e[f][g];g=f&240;f&=15;c[l]=k=e[f][v];if(0<g){if(16===g)for(g=h;g<l;g++)c[g]=1;h=-1}if(g=e[f][q])-1===h&&(h=l);else if(-1<h){for(g=h;g<l;g++)c[g]=k;h=-1}n[l]===ha&&(c[l]=0);b.hiLevel|=k}if(b.hasUbatS)for(a=0;a<d;a++)if(n[a]===Z)for(c[a]=b.dir,e=a-1;0<=e;e--)if(n[e]===la)c[e]=b.dir;else break}function c(a,c){a=a.split("");if(c){var b=[];h(a,b,c);F=b}a.reverse();
w.reverse();return a.join("")}function d(a){for(var c=0;c<X.length;c++)if(a>=X[c]&&a<=ja[c])return!0;return!1}function k(a,c,b,e){for(;c*b<e&&E(a[c]);)c+=b;return c*b<e&&d(a[c])?!0:!1}function g(a,c,b,d){if(!(d.hiLevel<a))if(1!==a||d.dir!==G||d.hasUbatB){d=c.length;for(var e=0,f,g,k;e<d;){if(b[e]>=a){for(f=e+1;f<d&&b[f]>=a;)f++;for(g=f-1;e<g;e++,g--)k=c[e],c[e]=c[g],c[g]=k,k=w[e],w[e]=w[g],w[g]=k;e=f}e++}}else c.reverse(),w.reverse()}function m(a,c,b,d,e){return{UBAT_L:function(){e.lastArabic=!1;
return fa},UBAT_R:function(){e.lastArabic=!1;return da},UBAT_ON:function(){return V},UBAT_AN:function(){return ga},UBAT_EN:function(){return e.lastArabic?ga:Y},UBAT_AL:function(){e.lastArabic=!0;e.hasUbatAl=!0;return da},UBAT_WS:function(){return V},UBAT_CS:function(){var a,f;if(1>d||d+1>=c.length||(a=b[d-1])!==Y&&a!==ga||(f=c[d+1])!==Y&&f!==ga)return V;e.lastArabic&&(f=ga);return f===a?f:V},UBAT_ES:function(){return(0<d?b[d-1]:ha)===Y&&d+1<c.length&&c[d+1]===Y?Y:V},UBAT_ET:function(){if(0<d&&b[d-
1]===Y)return Y;if(e.lastArabic)return V;for(var a=d+1,f=c.length;a<f&&c[a]===ma;)a++;return a<f&&c[a]===Y?Y:V},UBAT_NSM:function(){if("VLTR"===e.inFormat){for(var f=c.length,g=d+1;g<f&&c[g]===na;)g++;if(g<f&&(f=a[d],g=c[g],(1425<=f&&2303>=f||64286===f)&&(g===da||g===ka)))return da}return 1>d||c[d-1]===ha?V:b[d-1]},UBAT_B:function(){e.lastArabic=!0;e.hasUbatB=!0;return e.dir},UBAT_S:function(){e.hasUbatS=!0;return V},UBAT_LRE:function(){e.lastArabic=!1;return V},UBAT_RLE:function(){e.lastArabic=!1;
return V},UBAT_LRO:function(){e.lastArabic=!1;return V},UBAT_RLO:function(){e.lastArabic=!1;return V},UBAT_PDF:function(){e.lastArabic=!1;return V},UBAT_BN:function(){return V}}[oa[c[d]]]()}function B(a,c){for(var b=0;b<u.length;b++)if(a===u[b])return c[b];return a}function E(a){return"\u064b"<=a&&"\u0655">=a?!0:!1}function z(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function x(a,c){for(var b=0;b<W.length;b++)if(a===W[b])return c[b];return a}function t(a,
c,b,d){for(var e=0;e<a.length;e++)if(a[e]>c||!b&&a[e]===c)a[e]+=d}p.getObject("string",!0,dojox);p=a("dojox.string.BidiEngine",b,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(a,c,b){this.sourceToTarget=[];this.targetToSource=[];if(!a)return"";var e=this.sourceToTarget,f=this.targetToSource,g=a.length;w=[];F=[];for(var h=0;h<g;h++)e[h]=h,f[h]=h,w[h]=h;if(!this.checkParameters(c,b))return a;c=this.inputFormat;b=this.outputFormat;var e=
a,e=C,h=z(c.charAt(1)),f=z(b.charAt(1)),m="I"===c.charAt(0)?"L":c.charAt(0),g="I"===b.charAt(0)?"L":b.charAt(0),h=m+h,f=g+f,g=c.charAt(2)+b.charAt(2);e.defInFormat=h;e.defOutFormat=f;e.defSwap=g;a=y(a,h,f,g,e);e=!1;if("R"===b.charAt(1))e=!0;else if("C"===b.charAt(1)||"D"===b.charAt(1))e=this.checkContextual(a);f=this.sourceToTarget=w;g=Array(f.length);for(h=0;h<f.length;h++)g[f[h]]=h;H=this.targetToSource=g;if(c.charAt(3)===b.charAt(3))e=a;else if("S"===b.charAt(3))if(c=e,b=!0,0===a.length)e=void 0;
else{void 0===c&&(c=!0);void 0===b&&(b=!0);a=String(a);a=a.split("");var l=0,f=1,e=a.length;c||(l=a.length-1,f=-1,e=1);for(var g=e,h=b,q=0,e=[],m=0;l*f<g;l+=f)if(d(a[l])||E(a[l])){var n;if(n="\u0644"===a[l])b:{for(var p=a,r=l+f,v=f,D=g;r*v<D&&E(p[r]);)r+=v;n=" ";if(r*v<D)for(n=p[r],p=0;p<W.length;p++)if(W[p]===n){n=!0;break b}n=!1}if(n){a[l]=0===q?x(a[l+f],A):x(a[l+f],M);l+=f;q=a;n=l;p=f;for(r=g;n*p<r&&E(q[n]);)n+=p;n*p<r&&(q[n]=" ");h&&(e[m]=l,m++);q=0}else{n=a[l];if(1===q){p=l;if(k(a,l+f,f,g))b:for(r=
a[l],v=0;v<u.length;v++){if(r===u[v]){r=P[v];break b}}else r=B(a[l],U);a[p]=r}else!0===k(a,l+f,f,g)?a[l]=B(a[l],J):a[l]=B(a[l],N);E(n)||(q=1);b:{for(p=0;p<Q.length;p++)if(Q[p]===n){n=!0;break b}n=!1}!0===n&&(q=0)}}else q=0;f="";for(g=0;g<a.length;g++){if(h=b){b:{for(h=0;h<e.length;h++)if(e[h]===g)break b;h=-1}h=-1<h}h?(t(H,g,!c,-1),w.splice(g,1)):f+=a[g]}e=f}else if(c=a,b=e,a=!0,0===c.length)e=void 0;else for(void 0===a&&(a=!0),void 0===b&&(b=!0),c=String(c),e="",f=[],f=c.split(""),g=0;g<c.length;g++)h=
!1,"\ufe70"<=f[g]&&"\ufeff">f[g]?(m=c.charCodeAt(g),"\ufef5"<=f[g]&&"\ufefc">=f[g]?(b?(0<g&&a&&" "===f[g-1]?e=e.substring(0,e.length-1)+"\u0644":(e+="\u0644",h=!0),e+=W[(m-65269)/2]):(e+=W[(m-65269)/2],e+="\u0644",g+1<c.length&&a&&" "===f[g+1]?g++:h=!0),h&&(t(H,g,!0,1),w.splice(g,0,w[g]))):e+=S[m-65136]):e+=f[g];this.sourceToTarget=w;this.targetToSource=H;this.levels=F;return e},_inputFormatSetter:function(a){if(!I.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=
a},_outputFormatSetter:function(a){if(!I.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=a},checkParameters:function(a,c){a?this.set("inputFormat",a):a=this.inputFormat;c?this.set("outputFormat",c):c=this.outputFormat;return a===c?!1:!0},checkContextual:function(a){a=n(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(sa){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return O.test(a)}});var w=[],H=[],F=[],C={dir:0,
defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},v=5,q=6,D=0,G=1,I=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,O=/[\u0591-\u06ff\ufb1d-\ufefc]/,R=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],
["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],W=["\u0622","\u0623","\u0625","\u0627"],A=["\ufef5","\ufef7","\ufef9","\ufefb"],M=["\ufef6","\ufef8","\ufefa","\ufefc"],u="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),
N="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),U="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),
P="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),J="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),
Q="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),S="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
X=["\u0621","\u0641"],ja=["\u063a","\u064a"],ea=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ca=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],fa=0,da=1,Y=2,ga=3,V=4,ha=5,Z=6,ka=7,la=8,ma=11,na=12,oa="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),ba=100;a=fa;b=da;var K=Y,T=ga,e=V,ia=ha,pa=Z,f=ka,aa=la,L=
ma,r=na,qa=[ba+0,a,a,a,a,ba+1,ba+2,ba+3,b,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,ba+4,e,e,e,a,e,a,e,a,e,e,e,a,a,e,e,a,a,a,a,a,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,a,a,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,a,a,e,e,a,a,e,e,a,a,e,e,e,e,e,e,e,e,e,e,e,e,
e,e,e,e,e,e,e,e,e,e,e,a,a,a,ba+5,f,f,ba+6,ba+7],ra=[[18,18,18,18,18,18,18,18,18,pa,ia,pa,aa,ia,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ia,ia,ia,pa,aa,e,e,L,L,L,e,e,e,e,e,10,9,10,9,9,K,K,K,K,K,K,K,K,K,K,9,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,e,18,18,18,18,18,18,ia,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,e,L,L,L,L,e,e,e,e,a,e,e,18,e,e,L,L,K,K,e,a,e,e,e,K,a,e,e,e,
e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,a,a,a,a,a,a,a,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,a,e,e,e,e,e,e,e,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,
r,r,r,r,r,r,b,r,b,r,r,b,r,r,b,r,e,e,e,e,e,e,e,e,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,e,e,e,e,e,b,b,b,b,b,e,e,e,e,e,e,e,e,e,e,e],[T,T,T,T,e,e,e,e,f,L,L,f,9,f,e,e,r,r,r,r,r,r,r,r,r,r,r,f,e,e,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,T,T,T,T,T,T,T,T,T,T,L,T,T,f,f,f,r,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,
f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,r,r,r,r,r,r,r,T,e,r,r,r,r,r,r,f,f,r,r,e,r,r,r,r,f,f,K,K,K,K,K,K,K,K,K,K,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,f,f,f,f,e,f,f,r,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,e,e,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,r,r,r,r,r,r,
r,r,r,r,r,f,e,e,e,e,e,e,e,e,e,e,e,e,e,e,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,r,r,r,r,r,r,r,r,r,b,b,e,e,e,e,b,e,e,e,e,e],[aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,18,18,18,a,b,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,aa,ia,13,14,15,16,17,9,L,L,L,L,L,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,9,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,aa,18,18,18,18,18,e,e,e,e,e,18,18,18,18,18,18,K,a,e,e,K,K,K,K,K,K,10,10,e,e,e,a,K,K,K,K,K,K,K,K,K,K,10,10,e,e,e,e,a,a,a,
a,a,a,a,a,a,a,a,a,a,e,e,e,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[a,a,a,a,a,a,a,e,e,e,e,e,e,e,e,e,e,e,e,a,a,a,a,a,e,e,e,e,e,b,r,b,b,b,b,b,b,b,b,b,b,10,b,b,b,b,b,b,b,b,b,b,b,b,b,e,b,b,b,b,b,e,b,e,b,b,e,b,b,e,b,b,b,b,b,b,b,b,b,b,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,
f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,r,r,r,r,r,r,r,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,9,e,9,e,e,9,e,e,e,e,e,e,e,e,e,L,e,e,10,10,e,e,e,e,e,L,L,e,e,e,e,e,f,f,f,f,f,e,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,
f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,e,e,18],[e,e,e,L,L,L,e,e,e,e,e,10,9,10,9,9,K,K,K,K,K,K,K,K,K,K,9,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,e,e,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,a,a,a,a,a,a,e,e,a,a,a,a,a,a,e,e,a,a,a,a,a,a,e,e,a,a,a,e,e,e,L,L,e,e,e,L,L,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e]];return p})},"esri/views/vectorTiles/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(p,a,b,y){Object.defineProperty(a,"__esModule",{value:!0});var n=function(){return function(a,c,b){this.ratio=
a;this.x=c;this.y=b}}();p=function(){function a(a,b,k){this.dz=a;this.yPos=b;this.xPos=k}return a.prototype.setExtent=function(a){this.finalRatio=4096/a*(1<<this.dz);var c;c=64/this.finalRatio;a>>=this.dz;c>a&&(c=a);this.margin=c;this.xmin=a*this.xPos-c;this.ymin=a*this.yPos-c;this.xmax=this.xmin+a+2*c;this.ymax=this.ymin+a+2*c},a.prototype.reset=function(a){this.type=a;this._prevIsIn=!1;this.lines=[];this.line=null},a.prototype.moveTo=function(a,d){this._pushLine();this._prevIsIn=this._isIn(a,d);
this._moveTo(a,d,this._prevIsIn);this._prevPt=new b.Point(a,d);this._firstPt=new b.Point(a,d)},a.prototype.lineTo=function(a,d){var c,g,h,l,p,z,x,t,w=this._isIn(a,d);if(w)this._prevIsIn?this._lineTo(a,d,!0):(c=this._prevPt,g=new b.Point(a,d),h=this._intersect(g,c),this._lineTo(h.x,h.y,!0),this._lineTo(g.x,g.y,!0));else{if(this._prevIsIn)g=this._prevPt,c=new b.Point(a,d),h=this._intersect(g,c),this._lineTo(h.x,h.y,!0);else if(h=this._prevPt,c=new b.Point(a,d),!(h.x<=this.xmin&&c.x<=this.xmin||h.x>=
this.xmax&&c.x>=this.xmax||h.y<=this.ymin&&c.y<=this.ymin||h.y>=this.ymax&&c.y>=this.ymax))if(g=[],(h.x<this.xmin&&c.x>this.xmin||h.x>this.xmin&&c.x<this.xmin)&&(l=(this.xmin-h.x)/(c.x-h.x),t=h.y+l*(c.y-h.y),t<=this.ymin?z=!1:t>=this.ymax?z=!0:g.push(new n(l,this.xmin,t))),(h.x<this.xmax&&c.x>this.xmax||h.x>this.xmax&&c.x<this.xmax)&&(l=(this.xmax-h.x)/(c.x-h.x),t=h.y+l*(c.y-h.y),t<=this.ymin?z=!1:t>=this.ymax?z=!0:g.push(new n(l,this.xmax,t))),(h.y<this.ymin&&c.y>this.ymin||h.y>this.ymin&&c.y<this.ymin)&&
(l=(this.ymin-h.y)/(c.y-h.y),x=h.x+l*(c.x-h.x),x<=this.xmin?p=!1:x>=this.xmax?p=!0:g.push(new n(l,x,this.ymin))),(h.y<this.ymax&&c.y>this.ymax||h.y>this.ymax&&c.y<this.ymax)&&(l=(this.ymax-h.y)/(c.y-h.y),x=h.x+l*(c.x-h.x),x<=this.xmin?p=!1:x>=this.xmax?p=!0:g.push(new n(l,x,this.ymax))),0===g.length)p?z?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):z?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<g.length&&g[0].ratio>g[1].ratio)this._lineTo(g[1].x,
g[1].y,!0),this._lineTo(g[0].x,g[0].y,!0);else for(l=0;l<g.length;l++)this._lineTo(g[l].x,g[l].y,!0);this._lineTo(c.x,c.y,!1)}this._prevIsIn=w;this._prevPt=new b.Point(a,d)},a.prototype.close=function(){var a,b;0<this.line.length&&(a=this._firstPt,b=this._prevPt,a.x===b.x&&a.y===b.y||this.lineTo(a.x,a.y),a=this.line,b=a.length,4<=b&&(a[0].x===a[1].x&&a[0].x===a[b-2].x||a[0].y===a[1].y&&a[0].y===a[b-2].y)&&(a.pop(),a[0].x=a[b-2].x,a[0].y=a[b-2].y))},a.prototype.result=function(){return this._pushLine(),
0===this.lines.length?null:(3===this.type&&l.simplify(this.margin*this.finalRatio,this.lines),this.lines)},a.prototype._isIn=function(a,b){return a>=this.xmin&&a<=this.xmax&&b>=this.ymin&&b<=this.ymax},a.prototype._intersect=function(a,d){var c,g;if(d.x>=this.xmin&&d.x<=this.xmax)g=d.y<=this.ymin?this.ymin:this.ymax,c=a.x+(g-a.y)/(d.y-a.y)*(d.x-a.x);else if(d.y>=this.ymin&&d.y<=this.ymax)c=d.x<=this.xmin?this.xmin:this.xmax,g=a.y+(c-a.x)/(d.x-a.x)*(d.y-a.y);else{g=d.y<=this.ymin?this.ymin:this.ymax;
c=d.x<=this.xmin?this.xmin:this.xmax;var h=(c-a.x)/(d.x-a.x),l=(g-a.y)/(d.y-a.y);l>h?g=a.y+h*(d.y-a.y):c=a.x+l*(d.x-a.x)}return new b.Point(c,g)},a.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&this.lines.push(this.line):2===this.type?1<this.line.length&&this.lines.push(this.line):3===this.type&&3<this.line.length&&this.lines.push(this.line));this.line=[]},a.prototype._moveTo=function(a,d,h){3!==this.type?h&&(a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),
d=Math.round((d-(this.ymin+this.margin))*this.finalRatio),this.line.push(new b.Point(a,d))):(h||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),d<this.ymin&&(d=this.ymin),d>this.ymax&&(d=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),d=Math.round((d-(this.ymin+this.margin))*this.finalRatio),this.line.push(new b.Point(a,d)),this._is_h=!1,this._is_v=!1)},a.prototype._lineTo=function(a,d,h){var c,k;if(3!==this.type)h?(a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),
d=Math.round((d-(this.ymin+this.margin))*this.finalRatio),0<this.line.length&&(c=this.line[this.line.length-1],c.equals(a,d)))||this.line.push(new b.Point(a,d)):this.line&&0<this.line.length&&this._pushLine();else if(h||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),d<this.ymin&&(d=this.ymin),d>this.ymax&&(d=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),d=Math.round((d-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){c=this.line[this.line.length-
1];h=c.x===a;var l=c.y===d;h&&l||(this._is_h&&h?(c.x=a,c.y=d,k=this.line[this.line.length-2],this._is_h=k.x===a,this._is_v=k.y===d):this._is_v&&l?(c.x=a,c.y=d,k=this.line[this.line.length-2],this._is_h=k.x===a,this._is_v=k.y===d):(this.line.push(new b.Point(a,d)),this._is_h=h,this._is_v=l))}else this.line.push(new b.Point(a,d))},a}();a.TileClipper=p;p=function(){function a(){}return a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a},a.prototype.reset=function(a){this.type=a;this.lines=
[];this.line=null},a.prototype.moveTo=function(a,d){this.line&&this.lines.push(this.line);this.line=[];var c=this._ratio;this.line.push(new b.Point(Math.round(a*c),Math.round(d*c)))},a.prototype.lineTo=function(a,d){var c=this._ratio;this.line.push(new b.Point(Math.round(a*c),Math.round(d*c)))},a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])},a.prototype.result=function(){return this.line&&this.lines.push(this.line),0===this.lines.length?null:(3===this.type&&
1!==this._ratio&&l.simplify(64,this.lines),this.lines)},a}();a.SimpleBuilder=p;var l=function(){function a(){}return a.simplify=function(b,d){if(d){var c=-b,g=4096+b,h=-b,l=4096+b;b=[];for(var n=[],p=d.length,x=0;p>x;++x){var t=d[x];if(t&&!(2>t.length))for(var w=t[0],y=void 0,F=t.length,C=1;F>C;++C)y=t[C],w.x===y.x&&(w.x<=c&&(w.y>y.y?(b.push(x),b.push(C),b.push(0),b.push(-1)):(n.push(x),n.push(C),n.push(0),n.push(-1))),w.x>=g&&(w.y<y.y?(b.push(x),b.push(C),b.push(1),b.push(-1)):(n.push(x),n.push(C),
n.push(1),n.push(-1)))),w.y===y.y&&(w.y<=h&&(w.x<y.x?(b.push(x),b.push(C),b.push(2),b.push(-1)):(n.push(x),n.push(C),n.push(2),n.push(-1))),w.y>=l&&(w.x>y.x?(b.push(x),b.push(C),b.push(3),b.push(-1)):(n.push(x),n.push(C),n.push(3),n.push(-1)))),w=y}0!==b.length&&0!==n.length&&(a.fillParent(d,n,b),a.fillParent(d,b,n),c=[],a.calcDeltas(c,n,b),a.calcDeltas(c,b,n),a.addDeltas(c,d))}},a.fillParent=function(a,b,h){for(var c=h.length,d=b.length,k=0;d>k;k+=4){for(var l=b[k],n=b[k+1],p=b[k+2],t=a[l][n-1],
l=a[l][n],n=8092,w=-1,H=0;c>H;H+=4)if(h[H+2]===p){var F=h[H],C=h[H+1],v=a[F][C-1],F=a[F][C];switch(p){case 0:case 1:y.between(t.y,v.y,F.y)&&y.between(l.y,v.y,F.y)&&(v=Math.abs(F.y-v.y),n>v&&(n=v,w=H));break;case 2:case 3:y.between(t.x,v.x,F.x)&&y.between(l.x,v.x,F.x)&&(v=Math.abs(F.x-v.x),n>v&&(n=v,w=H))}}b[k+3]=w}},a.calcDeltas=function(b,d,h){for(var c=d.length,k=0;c>k;k+=4){var l=a.calcDelta(k,d,h,[]);b.push(d[k]);b.push(d[k+1]);b.push(d[k+2]);b.push(l)}},a.calcDelta=function(b,d,h,g){b=d[b+3];
if(-1===b)return 0;var c=g.length;return 1<c&&g[c-2]===b?0:(g.push(b),a.calcDelta(b,h,d,g)+1)},a.addDeltas=function(a,b){for(var c=a.length,d=0,h=0;c>h;h+=4){var l=a[h+3];l>d&&(d=l)}for(h=0;c>h;h+=4){var n=b[a[h]],p=a[h+1],l=d-a[h+3];switch(a[h+2]){case 0:n[p-1].x-=l;n[p].x-=l;break;case 1:n[p-1].x+=l;n[p].x+=l;break;case 2:n[p-1].y-=l;n[p].y-=l;break;case 3:n[p-1].y+=l,n[p].y+=l}}a=b.length;for(c=0;a>c;++c)n=b[c],!n||2>n.length||n[n.length-1].x!==n[0].x&&n[n.length-1].y!==n[0].y&&n.push(n[0])},a}()})},
"esri/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","./StyleLayer","dojo/has"],function(p,a,b,y){return function(){function a(b,h){if(this.styleJSON=b,this.version=parseFloat(b.version),this.sprite=h?h.spriteUrl:b.sprite,this.glyphs=h?h.glyphsUrl:b.glyphs,y("stable-symbol-rendering")){var c=(b.layers||[]).filter(function(a){return a.layout&&a.layout["text-font"]})[0];c&&(b.layers||[]).forEach(function(a){a.layout&&a.layout["text-font"]&&(a.layout["text-font"]=c.layout["text-font"])})}this.layers=
(b.layers||[]).map(a._create);this._identifyRefLayers()}return a.prototype._identifyRefLayers=function(){for(var a=[],b=[],c=0,d=this.layers;c<d.length;c++){var k=d[c];if(1===k.type){var g=k.sourceLayer,g=g+("|"+JSON.stringify(k.minzoom)),g=g+("|"+JSON.stringify(k.maxzoom)),g=g+("|"+JSON.stringify(k.filter));a.push({key:g,layer:k})}2===k.type&&(g=k.sourceLayer,g+="|"+JSON.stringify(k.minzoom),g+="|"+JSON.stringify(k.maxzoom),g+="|"+JSON.stringify(k.filter),g+="|"+JSON.stringify(k.layout["line-cap"]),
g+="|"+JSON.stringify(k.layout["line-join"]),b.push({key:g,layer:k}))}this._assignRefLayers(a);this._assignRefLayers(b)},a.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var b,c,d=a.length,k=0;d>k;k++){var g=a[k];if(g.key===b)g.layer.refLayerId=c;else if(b=g.key,c=g.layer.id,1===g.layer.type&&!g.layer.hasPaintProperty("fill-outline-color"))for(var l=k+1;d>l;l++){var n=a[l];if(n.key!==b)break;if(n.layer.hasPaintProperty("fill-outline-color")){a[k]=
n;a[l]=g;c=n.layer.id;break}}}},a._create=function(a,h,c){h=1-1/(c.length+1)*(1+h);switch(a.type){case "background":return new b.StyleLayer(0,a,h);case "fill":return new b.StyleLayer(1,a,h);case "line":return new b.StyleLayer(2,a,h);case "symbol":return new b.StyleLayer(3,a,h);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":throw Error("Unsupported vector tile circle layer");}throw Error("Unknown vector tile layer");},a}()})},"*noref":1}});
define("require exports dojo/Deferred ../../core/promiseUtils ./WorkerTile ./style/StyleRepository".split(" "),function(p,a,b,y,n,l){return function(){function a(){this._tiles=new Map;this._spriteInfo={};this._glyphInfo={}}return a.prototype.reset=function(){var a=new b;this._spriteInfo={};this._glyphInfo={};var d=this._tiles;return d.forEach(function(a){return a.setObsolete()}),d.clear(),a.resolve(),a.promise},a.prototype.getLayers=function(){return this._layers},a.prototype.setLayers=function(a){return this._layers=
(new l(a)).layers,y.resolve({data:""})},a.prototype.getTile=function(a,b){var c=this,d=a.key,h=n.pool.acquire();h.initialize(a.key,a.refKey,this,a.rotation);var l=a.cacheTile;return b.invoke("fetchTileData",a.refKey).then(function(a){return h.setDataAndParse(a.protobuff,b).then(function(a){return l&&6!==h.status&&c._tiles.set(d,h),a}).otherwise(function(a){return h.setObsolete(),n.pool.release(h),c._tiles["delete"](h.tileKey),y.reject(a)})}).otherwise(function(a){return h.setObsolete(),c._tiles.has(h.tileKey)&&
c._tiles["delete"](h.tileKey),y.reject(a)}).always(function(a){return l||n.pool.release(h),a})},a.prototype.update=function(a){var b=this._tiles.get(a.key);return b?b.updateSymbols(a.rotation):y.reject()},a.prototype.destructTileData=function(a){return this._tiles.has(a.key)&&(n.pool.release(this._tiles.get(a.key)),this._tiles["delete"](a.key)),y.resolve()},a.prototype.fetchSprites=function(a,b){var c=[],d=this._spriteInfo;return a.forEach(function(a){void 0===d[a]&&c.push(a)}),0===c.length?y.resolve():
b.invoke("getSprites",{sprites:c}).then(function(a){a=a.spriteItems;for(var b in a)d[b]=a[b]})},a.prototype.getSpriteItems=function(){return this._spriteInfo},a.prototype.fetchGlyphs=function(a,b,h,g){var c=[],d=this._glyphInfo[b];return d?h.forEach(function(a){d[a]||c.push(a)}):(d=this._glyphInfo[b]=[],h.forEach(function(a){return c.push(a)})),0===c.length?y.resolve():g.invoke("getGlyphs",{tileID:a,font:b,codePoints:c}).then(function(a){a=a.glyphItems;for(var b in a)d[b]=a[b]})},a.prototype.getGlyphItems=
function(a){return this._glyphInfo[a]},a}()});