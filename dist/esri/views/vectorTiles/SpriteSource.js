//>>built
define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojo/Deferred dojo/promise/all ../../request ../../kernel ../../core/promiseUtils".split(" "),function(n,p,q,r,k,l,m,g,f){return function(){function b(c,a){this.baseURL=c;this.devicePixelRatio=a;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}return Object.defineProperty(b.prototype,"spriteNames",{get:function(){var c=[],a;for(a in this._spritesData)c.push(a);
return c.sort(),c},enumerable:!0,configurable:!0}),b.prototype.getSpritePosition=function(c){return this._spritesData[c]},b.prototype.load=function(){var c=this;return this.loadStatus="loading",this.baseURL?this._loadSprites().then(function(){return c.loadStatus="loaded",c}).otherwise(function(a){return c.loadStatus="failed",c}):f.resolve(this)},b.prototype._loadSprites=function(){var c=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var a=this.baseURL,b=this._isRetina?"@2x":"",f=m(a+b+".json",
{callbackParamName:"callback",responseType:"json"}).then(function(d){c._spritesData=d.data}),h=new k,e=new Image;e.crossOrigin="anonymous";e.onload=function(){e.onload=null;c.width=e.width;c.height=e.height;var d=document.createElement("canvas");d.width=e.width;d.height=e.height;d=d.getContext("2d");d.drawImage(e,0,0,e.width,e.height);for(var d=d.getImageData(0,0,e.width,e.height),a=new Uint8Array(d.data),b=0;b<a.length;b+=4)d=a[b+3]/255,a[b]*=d,a[b+1]*=d,a[b+2]*=d;c.image=a;h.resolve()};a=""+a+b+
".png";g.id&&(b=g.id.findCredential(a))&&b.token&&(a+="?token\x3d"+b.token);return e.src=a,l([f,h.promise])},b}()});