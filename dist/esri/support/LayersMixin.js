//>>built
define(["../core/Accessor","../core/Collection","../core/Logger"],function(h,d,k){var g=function(b,a){for(var c,f,e=0,d=b.length;d>e;e++){if(c=b.getItemAt(e),c.id===a)return c;if(c.layers&&(f=g(c.layers,a)))return f}},l=k.getLogger("esri.Map");return h.createSubclass({declaredClass:"esri.support.LayersMixin",destroy:function(){this._layersHandle.remove();this._layersHandle=null;this.layers.drain(this._lyrRemove,this)},properties:{layers:{type:d,get:function(){var b=this._get("layers");return b?b:
(b=new d,b.on("after-add",function(a){a=a.item;a.parent&&a.parent!==this&&a.parent.remove(a);a.parent=this;this.layerAdded(a);"elevation"===a.type&&l.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as an operational layer and will therefore be ignored.")}.bind(this)),b.on("after-remove",function(a){a=a.item;a.parent=null;this.layerRemoved(a)}.bind(this)),b)},set:function(b){var a=this._get("layers");a&&this.remove(a.toArray());this.addMany(b.toArray())}}},findLayerById:function(b){return g(this.layers,
b)},add:function(b,a){var c=this.layers;return a=c.getNextIndex(a),b.parent===this?void this.reorder(b,a):void c.add(b,a)},addMany:function(b,a){var c=this.layers;a=c.getNextIndex(a);b.slice().forEach(function(b){return b.parent===this?void this.reorder(b,a):(c.add(b,a),void(a+=1))},this)},remove:function(b){return this.layers.remove(b)},removeMany:function(b){return this.layers.removeMany(b)},removeAll:function(){return this.layers.removeAll()},reorder:function(b,a){return this.layers.reorder(b,
a)},layerAdded:function(b){},layerRemoved:function(b){}})});