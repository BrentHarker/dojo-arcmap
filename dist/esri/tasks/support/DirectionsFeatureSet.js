//>>built
define("../../geometry/Extent ../../geometry/Polyline ../../geometry/SpatialReference ./FeatureSet ../../Graphic dojo/_base/array".split(" "),function(k,l,m,n,p,d){return n.createSubclass({declaredClass:"esri.tasks.support.DirectionsFeatureSet",properties:{geometryType:"esriGeometryPolyline",extent:{type:k,json:{read:{source:"summary.envelope"}}},features:{value:null,json:{read:function(a,e){a.forEach(this._decompressFeatureGeometry,this);var b=m.fromJSON(e.spatialReference);return a.map(function(a){var c=
p.fromJSON(a);a=a.geometry&&a.geometry.spatialReference;return c.geometry&&!a&&(c.geometry.spatialReference=b),c})}}},mergedGeometry:{value:null,readOnly:!0,dependsOn:["features","extent.spatialReference"],get:function(){if(!this.features)return null;var a=d.map(this.features,function(a){return a.geometry}),e=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(a,e)}},routeId:null,routeName:null,strings:{value:null,readOnly:!0,dependsOn:["features"],get:function(){return d.map(this.features,
function(a){return a.strings})}},totalDriveTime:{value:null,json:{read:{source:"summary.totalDriveTime"}}},totalLength:{value:null,json:{read:{source:"summary.totalLength"}}},totalTime:{value:null,json:{read:{source:"summary.totalTime"}}}},_decompressFeatureGeometry:function(a){a.geometry=this._decompressGeometry(a.compressedGeometry)},_decompressGeometry:function(a){var e,b,f,c=0,h=0,d=[];(b=a.match(/((\+|\-)[^\+\-]+)/g))||(b=[]);f=parseInt(b[0],32);for(var g=1;g<b.length;g+=2)c=a=parseInt(b[g],
32)+c,h=e=parseInt(b[g+1],32)+h,d.push([a/f,e/f]);return{paths:[d]}},_mergePolylinesToSinglePath:function(a,e){var b=[];d.forEach(a,function(a){d.forEach(a.paths,function(a){b=b.concat(a)})});var f=[],c=[0,0];return d.forEach(b,function(a){(a[0]!==c[0]||a[1]!==c[1])&&(f.push(a),c=a)}),new l({paths:[f]},e)}})});