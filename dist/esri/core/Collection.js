//>>built
define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./accessorSupport/decorators ./accessorSupport/ensureType ./Accessor ./ArrayPool ./Evented ./ObjectPool ./Scheduler ./lang".split(" "),function(E,R,H,A,I,v,J,K,w,L,M,N,O){function p(e){return e&&e.isInstanceOf&&e.isInstanceOf(m)?!0:!1}function B(e){return e?p(e)?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function C(e){return e&&e.length?e[0]:void 0}function F(e,b,a,c){b&&b.forEach(function(G,
b,d){e.push(G);F(e,a.call(c,G,b,d),a,c)})}E=(function(){return function(){}}(),function(){function e(){this.target=null;this.defaultPrevented=this.cancellable=!1}return e.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)},e.prototype.reset=function(b){this.defaultPrevented=!1;this.item=b},e}());var P=function(){},k=new M(E,!0,function(e){e.item=null;e.target=null}),q=new Set,r=new Set,t=new Set,D=new Map,Q=0,m=u=function(e){function b(a){a=e.call(this,a)||this;return a._boundDispatch=
a._dispatchColChange.bind(a),a._chgListeners=[],a._notifications=null,a._timer=null,a.length=0,a._items=[],Object.defineProperty(a,"uid",{value:Q++}),a}return H(b,e),b.ofType=function(a){if(!a)return u;if(D.has(a))return D.get(a);var c=u.createSubclass({declaredClass:"esri.core.Collection\x3c"+a.prototype.declaredClass+"\x3e"});return Object.defineProperty(c.prototype,"itemType",{value:a}),D.set(a,c),c},b.prototype.normalizeCtorArgs=function(a){return a?Array.isArray(a)||p(a)?{items:a}:a:{}},Object.defineProperty(b.prototype,
"items",{get:function(){return this._items},set:function(a){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(B(a))),this._emitAfterChanges())},enumerable:!0,configurable:!0}),b.prototype.on=function(a,c){var b;if(Array.isArray(a)?b=a:-1<a.indexOf(",")&&(b=a.split(/\s*,\s*/)),b){var h=[];for(a=0;a<b.length;a++)h.push(this.on(b[a],c));return h.remove=function(){for(var a=0;a<h.length;a++)h[a].remove()},h}if("change"===a){var d=this._chgListeners,e={removed:!1,callback:c};return d.push(e),
this._notifications&&this._notifications.push({listeners:d.slice(),items:this._items.slice(),changes:[]}),{remove:function(){this.remove=P;e.removed=!0;d.splice(d.indexOf(e),1)}}}return I.after(this,"on"+a,c,!0)},b.prototype.hasEventListener=function(a){return"change"===a?0<this._chgListeners.length:this.inherited(arguments)},b.prototype.add=function(a,c){if(this._emitBeforeChanges())return this;c=this.getNextIndex(c);return this._splice(c,0,a),this._emitAfterChanges(),this},b.prototype.addMany=function(a,
c){if(void 0===c&&(c=this._items.length),this._emitBeforeChanges())return this;c=this.getNextIndex(c);return this._splice.apply(this,[c,0].concat(B(a))),this._emitAfterChanges(),this},b.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var a=this._splice(0,this.length)||[];return this._emitAfterChanges(),a},b.prototype.clone=function(){return this._createNewInstance({items:this._items.map(O.clone)})},b.prototype.concat=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=
arguments[c];a=a.map(B);return this._createNewInstance({items:(b=this._items).concat.apply(b,a)});var b},b.prototype.drain=function(a,c){if(this.length&&!this._emitBeforeChanges()){for(var b=this._splice(0,this.length),h=b.length,d=0;h>d;d++)a.call(c,b[d],d,b);this._emitAfterChanges()}},b.prototype.every=function(a,c){return this._items.every(a,c)},b.prototype.filter=function(a,c){var b;return b=2===arguments.length?this._items.filter(a,c):this._items.filter(a),this._createNewInstance({items:b})},
b.prototype.find=function(a,c){if("function"!=typeof a)throw new TypeError(a+" is not a function");for(var b=this._items,h=b.length,d=0;h>d;d++){var e=b[d];if(a.call(c,e,d,b))return e}},b.prototype.findIndex=function(a,c){if("function"!=typeof a)throw new TypeError(a+" is not a function");for(var b=this._items,h=b.length,d=0;h>d;d++)if(a.call(c,b[d],d,b))return d;return-1},b.prototype.flatten=function(a,c){var b=[];return F(b,this,a,c),new u(b)},b.prototype.forEach=function(a,c){for(var b=this._items,
h=b.length,d=0;h>d;d++)a.call(c,b[d],d,b)},b.prototype.getItemAt=function(a){return this._items[a]},b.prototype.getNextIndex=function(a){var c=this.length;return a=null==a?c:a,0>a?a=0:a>c&&(a=c),a},b.prototype.includes=function(a,c){return void 0===c&&(c=0),arguments.length?-1!==this._items.indexOf(a,c):!1},b.prototype.indexOf=function(a,c){return void 0===c&&(c=0),this._items.indexOf(a,c)},b.prototype.join=function(a){return void 0===a&&(a=","),this._items.join(a)},b.prototype.lastIndexOf=function(a,
c){return void 0===c&&(c=this.length-1),this._items.lastIndexOf(a,c)},b.prototype.map=function(a,c){a=this._items.map(a,c);return new u({items:a})},b.prototype.reorder=function(a,c){void 0===c&&(c=this.length-1);var b=this.indexOf(a);if(-1!==b){if(0>c?c=0:c>=this.length&&(c=this.length-1),b!==c){if(this._emitBeforeChanges())return a;this._splice(b,1);this._splice(c,0,a);this._emitAfterChanges()}return a}},b.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var a=C(this._splice(this.length-
1,1));return this._emitAfterChanges(),a}},b.prototype.push=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return this._emitBeforeChanges()?this.length:(this._splice.apply(this,[this.length,0].concat(a)),this._emitAfterChanges(),this.length)},b.prototype.reduce=function(a,c){var b=this._items;return 2===arguments.length?b.reduce(a,c):b.reduce(a)},b.prototype.reduceRight=function(a,c){var b=this._items;return 2===arguments.length?b.reduceRight(a,c):b.reduceRight(a)},b.prototype.remove=
function(a){return this.removeAt(this.indexOf(a))},b.prototype.removeAt=function(a){if(!(0>a||a>=this.length||this._emitBeforeChanges()))return a=C(this._splice(a,1)),this._emitAfterChanges(),a},b.prototype.removeMany=function(a){if(!a||!a.length||this._emitBeforeChanges())return[];a=p(a)?a.toArray():a;for(var c=this._items,b=[],h=a.length,d=0;h>d;d++){var e=c.indexOf(a[d]);if(-1<e){for(var l=d+1,n=e+1,g=Math.min(a.length-l,c.length-n),f=0;g>f&&a[l+f]===c[n+f];)f++;l=1+f;(e=this._splice(e,l))&&0<
e.length&&b.push.apply(b,e);d+=l-1}}return this._emitAfterChanges(),b},b.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var a=this._splice(0,this.length);return a&&(a.reverse(),this._splice.apply(this,[0,0].concat(a))),this._emitAfterChanges(),this},b.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var a=C(this._splice(0,1));return this._emitAfterChanges(),a}},b.prototype.slice=function(a,c){return void 0===a&&(a=0),void 0===c&&(c=this.length),this._createNewInstance({items:this._items.slice(a,
c)})},b.prototype.some=function(a,c){return this._items.some(a,c)},b.prototype.sort=function(a){if(!this.length||this._emitBeforeChanges())return this;var c=this._splice(0,this.length);return arguments.length?c.sort(a):c.sort(),this._splice.apply(this,[0,0].concat(c)),this},b.prototype.splice=function(a,c){for(var b=[],e=2;e<arguments.length;e++)b[e-2]=arguments[e];if(this._emitBeforeChanges())return[];b=this._splice.apply(this,[a,c].concat(b))||[];return this._emitAfterChanges(),b},b.prototype.toArray=
function(){return this._items.slice()},b.prototype.toJSON=function(){return this.toArray()},b.prototype.toLocaleString=function(){return this._items.toLocaleString()},b.prototype.toString=function(){return this._items.toString()},b.prototype.unshift=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return this._emitBeforeChanges()?this.length:(this._splice.apply(this,[0,0].concat(a)),this._emitAfterChanges(),this.length)},b.prototype._createNewInstance=function(a){return new this.constructor(a)},
b.prototype._splice=function(a,c){for(var b=this,e=[],d=2;d<arguments.length;d++)e[d-2]=arguments[d];var y,l,n=this._items,g=this.constructor.prototype.itemType;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=N.schedule(this._boundDispatch)),c){if(l=n.splice(a,c),this.hasEventListener("before-remove")){d=k.acquire();d.target=this;d.cancellable=
!0;for(var f=0,z=l.length;z>f;f++)y=l[f],d.reset(y),this.emit("before-remove",d),d.defaultPrevented&&(l.splice(f,1),n.splice(a,0,y),a+=1,--f,--z);k.release(d)}if(this.length=this._items.length,this.hasEventListener("after-remove")){d=k.acquire();d.target=this;d.cancellable=!1;z=l.length;for(f=0;z>f;f++)d.reset(l[f]),this.emit("after-remove",d);k.release(d)}this._notifyChangeEvent(null,l)}if(e&&e.length){if(g&&(e=e.map(J.ensureType.bind(null,g))),this.hasEventListener("before-add")){var x=k.acquire();
x.target=this;x.cancellable=!0;e=e.filter(function(a){return x.reset(a),b.emit("before-add",x),!x.defaultPrevented});k.release(x)}if(n.splice.apply(n,[a,0].concat(e)),this.length=this._items.length,this.hasEventListener("after-add")){d=k.acquire();d.target=this;d.cancellable=!1;n=0;for(g=e;n<g.length;n++)y=g[n],d.reset(y),this.emit("after-add",d);k.release(d)}this._notifyChangeEvent(e,null)}return l},b.prototype._emitBeforeChanges=function(){var a=!1;if(this.hasEventListener("before-changes")){var b=
k.acquire();b.target=this;b.cancellable=!0;this.emit("before-changes",b);a=b.defaultPrevented;k.release(b)}return a},b.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var a=k.acquire();a.target=this;a.cancellable=!1;this.emit("after-changes",a);k.release(a)}},b.prototype._notifyChangeEvent=function(a,b){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:b})},b.prototype._dispatchColChange=function(){if(this._timer&&
(this._timer.remove(),this._timer=null),this._notifications){var a=this._notifications;this._notifications=null;for(var b=function(a){var b=a.changes;q.clear();r.clear();t.clear();for(var c=0;c<b.length;c++){var d=b[c],g=d.added,d=d.removed;if(g)if(0===t.size&&0===r.size)for(var f=0,h=g;f<h.length;f++)g=h[f],q.add(g);else for(f=0,h=g;f<h.length;f++)g=h[f],r.has(g)?(t.add(g),r["delete"](g)):t.has(g)||q.add(g);if(d)if(0===t.size&&0===q.size)for(f=0;f<d.length;f++)g=d[f],r.add(g);else for(f=0;f<d.length;f++)g=
d[f],q.has(g)?q["delete"](g):(t["delete"](g),r.add(g))}var k=w.acquire();q.forEach(function(a){k.push(a)});var m=w.acquire();r.forEach(function(a){m.push(a)});var u=e._items,v=a.items,p=w.acquire();if(t.forEach(function(a){v.indexOf(a)!==u.indexOf(a)&&p.push(a)}),a.listeners&&(k.length||m.length||p.length))for(b={target:e,added:k,removed:m,moved:p},c=a.listeners.length,g=0;c>g;g++)d=a.listeners[g],d.removed||d.callback.call(e,b);w.release(k);w.release(m);w.release(p)},e=this,h=0;h<a.length;h++)b(a[h]);
q.clear();r.clear();t.clear()}},b}(v.declared(K,L));m.isCollection=p;A([v.property()],m.prototype,"length",void 0);A([v.property()],m.prototype,"items",null);var m=u=A([v.subclass("esri.core.Collection")],m),u;return m});