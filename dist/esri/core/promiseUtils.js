//>>built
define(["require","exports","dojo/Deferred","dojo/promise/all","./Error"],function(m,c,f,k,l){function h(a){if(a){if("function"!=typeof a.forEach){var b=Object.keys(a),e=b.map(function(b){return a[b]});return h(e).then(function(a){var d={};return b.forEach(function(b,e){return d[b]=a[e]}),d})}var d=new f,g=[],c=a.length;return 0===c&&d.resolve(g),a.forEach(function(a){var b={promise:a};g.push(b);a.then(function(a){b.value=a}).otherwise(function(a){b.error=a}).then(function(){--c;0===c&&d.resolve(g)})}),
d.promise}}Object.defineProperty(c,"__esModule",{value:!0});c.all=function(a){return k(a)};c.eachAlways=h;c.create=function(a,b){var e=new f(b);return a(function(a){return void 0===a&&(a=null),e.resolve(a)},e.reject),e.promise};c.reject=function(a){var b=new f;return b.reject(a),b.promise};c.resolve=function(a){void 0===a&&(a=null);var b=new f;return b.resolve(a),b.promise};c.after=function(a,b){void 0===b&&(b=null);var e=0,d=new f(function(){e&&(clearTimeout(e),e=0)});return e=setTimeout(function(){d.resolve(b)},
a),d.promise};c.timeout=function(a,b,e){var d=0,c=new f(a.cancel);return a.then(function(a){c.isFulfilled()||(c.resolve(a),d&&(clearTimeout(d),d=0))}),a.otherwise(function(a){c.isFulfilled()||(c.reject(a),d&&(clearTimeout(d),d=0))}),d=setTimeout(function(){var a=e||new l("promiseUtils:timeout","The wrapped promise did not resolve within "+b+" ms");c.reject(a)},b),c.promise};c.wrapCallback=function(a){var b=!1,c=new f(function(){return b=!0});return a(function(a){b||c.resolve(a)}),c.promise}});