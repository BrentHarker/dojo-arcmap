//>>built
define(["dojo/_base/window","dojo/sniff","../kernel"],function(f,a,n){function m(){if(e)return e;e={available:!1,version:0,supportsHighPrecisionFragment:!1};var a;try{if(!k.WebGLRenderingContext)throw 0;a=document.createElement("canvas")}catch(w){return e}for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d=null,c=0;c<b.length;++c){try{d=a.getContext(b[c])}catch(w){}if(d)break}a=d;if(!a)return e;b=a.getParameter(a.VERSION);if(!b)return e;if(b=b.match(/^WebGL\s+([\d.]*)/))e.version=parseFloat(b[1]),
e.available=.94<=e.version,b=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT),e.supportsHighPrecisionFragment=b&&0<b.precision,e.supportsVertexShaderSamplers=0<a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),e.supportsElementIndexUint=null!=a.getExtension("OES_element_index_uint");return e}if(a("host-node"))return a;var c,d=a("ff"),g=a("ie"),p=void 0===g&&7<=a("trident"),l=a("webkit"),h=a("opera"),q=a("chrome"),r=a("safari"),k=f.global;f=navigator.userAgent;if(c=f.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i),
c&&a.add("esri-iphone",parseFloat(c[2].replace("_","."))),c=f.match(/Android\s+(\d+\.\d+)/i),c&&a.add("esri-android",parseFloat(c[1])),c=f.match(/Fennec\/(\d+\.\d+)/i),c&&a.add("esri-fennec",parseFloat(c[1])),0<=f.indexOf("BlackBerry")&&0<=f.indexOf("WebKit")&&a.add("esri-blackberry",1),a.add("esri-touch",a("esri-iphone")||a("esri-android")||a("esri-blackberry")||6<=a("esri-fennec")||(d||l)&&document.createTouch?!0:!1),c=f.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),c&&
a.add("esri-mobile",c),a.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled),n._getDOMAccessor=function(a){var b="";return d?b="Moz":l?b="Webkit":g?b="ms":h&&(b="O"),b+a.charAt(0).toUpperCase()+a.substr(1)},a.add("esri-phonegap",!!k.cordova),a.add("esri-cors",a("esri-phonegap")||"XMLHttpRequest"in k&&"withCredentials"in new XMLHttpRequest),a.add("esri-canvas-svg-support",function(){return!(a("trident")||a("ie"))}),a("host-webworker"))return a;a.add("esri-workers",k.Worker?!0:
!1);a.add("esri-transforms",p||9<=g||3.5<=d||4<=q||3.1<=r||10.5<=h||3.2<=a("esri-iphone")||2.1<=a("esri-android"));a.add("esri-transitions",p||10<=g||4<=d||4<=q||3.1<=r||10.5<=h||3.2<=a("esri-iphone")||2.1<=a("esri-android"));a.add("esri-transforms3d",p||10<=d||12<=q||4<=r||3.2<=a("esri-iphone")||3<=a("esri-android"));a.add("esri-url-encodes-apostrophe",function(){var a=k.document.createElement("a");return a.href="?'",-1<a.href.indexOf("?%27")});3>a("esri-android")&&(a.add("esri-transforms",!1,!1,
!0),a.add("esri-transitions",!1,!1,!0),a.add("esri-transforms3d",!1,!1,!0));n._css=function(c){var b=a("esri-transforms3d");void 0!==c&&null!==c?b=c:b&&(q||r&&!a("esri-iphone"))&&(b=!1);var e=b?"translate3d(":"translate(",f=b?q?",-1px)":",0px)":")",k=b?"scale3d(":"scale(",m=b?",1)":")",p=b?"rotate3d(0,0,1,":"rotate(",n=b?"matrix3d(":"matrix(",t=b?",0,0,":",",u=b?",0,0,0,0,1,0,":",",v=b?",0,1)":")";return{names:{transition:l&&"-webkit-transition"||d&&"MozTransition"||h&&"OTransition"||g&&"msTransition"||
"transition",transform:l&&"-webkit-transform"||d&&"MozTransform"||h&&"OTransform"||g&&"msTransform"||"transform",transformName:l&&"-webkit-transform"||d&&"-moz-transform"||h&&"-o-transform"||g&&"-ms-transform"||"transform",origin:l&&"-webkit-transform-origin"||d&&"MozTransformOrigin"||h&&"OTransformOrigin"||g&&"msTransformOrigin"||"transformOrigin",endEvent:l&&"webkitTransitionEnd"||d&&"transitionend"||h&&"oTransitionEnd"||g&&"MSTransitionEnd"||"transitionend"},translate:function(a,b){return e+a+
"px,"+b+"px"+f},scale:function(a){return k+a+","+a+m},rotate:function(a){return p+a+"deg)"},matrix:function(a){return a.m?(a=a.m,n+a[0].toFixed(10)+","+a[1].toFixed(10)+t+a[2].toFixed(10)+","+a[3].toFixed(10)+u+a[4].toFixed(10)+(d?"px,":",")+a[5].toFixed(10)+(d?"px":"")+v):n+a.xx.toFixed(10)+","+a.yx.toFixed(10)+t+a.xy.toFixed(10)+","+a.yy.toFixed(10)+u+a.dx.toFixed(10)+(d?"px,":",")+a.dy.toFixed(10)+(d?"px":"")+v},matrix3d:function(a){return a=a.m,"matrix3d("+a[0].toFixed(10)+","+a[1].toFixed(10)+
",0,0,"+a[2].toFixed(10)+","+a[3].toFixed(10)+",0,0,0,0,1,0,"+a[4].toFixed(10)+","+a[5].toFixed(10)+",0,1)"},getScaleFromMatrix:function(a){if(!a)return 1;a=a.toLowerCase();var b=-1<a.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(a.substring(b.length,a.indexOf(",")))}}};var e;return a.add("esri-webgl",function(){return!!m().available}),a.add("esri-webgl-high-precision-fragment",function(){return!!m().supportsHighPrecisionFragment}),a.add("esri-webgl-vertex-shader-samplers",function(){return!!m().supportsVertexShaderSamplers}),
a.add("esri-webgl-element-index-uint",function(){return!!m().supportsElementIndexUint}),a});