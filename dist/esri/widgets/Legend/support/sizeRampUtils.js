//>>built
define("require exports ../../../symbols/Symbol3D ../../../symbols/SimpleMarkerSymbol ../../../symbols/PictureMarkerSymbol ../../../symbols/SimpleLineSymbol ../../../symbols/support/symbolUtils ../../../core/numberUtils ./utils".split(" "),function(R,v,D,E,F,w,t,q,G){function H(a,b){var c=null,e=null;if("simple"===a.type)c=a.symbol;else if("uniqueValue"===a.type||"classBreaks"===a.type)c=(c=(a=a.classBreakInfos||a.uniqueValueInfos)&&a[0])&&c.symbol,e=1<a.length;if(!c||I(c))b=null;else{c=c.clone();
if(b||e)-1<c.type.indexOf("3d")?J(c):(b=c,-1!==b.type.indexOf("line-symbol")?b.color=n:(b.color=A,"simple-marker-symbol"===b.type&&(b.outline={color:n,width:1.5})));b=c}return b}function I(a){if(a)return-1<a.type.indexOf("3d")?(a=a.symbolLayers)?a.some(function(a){return a&&"fill"===a.type}):!1:-1!==a.type.indexOf("fill-symbol")}function J(a){t.isVolumetricSymbol(a)||(-1!==a.type.indexOf("line-symbol-3d")?a.symbolLayers.forEach(function(a){a.material={color:n}}):a.symbolLayers.forEach(function(a){"icon"!==
a.type||a.resource&&a.resource.href?a.material={color:K}:(a.material={color:A},a.outline={color:n,size:1.5})}))}function L(a,b,c,e){var d=a.getSizeRangeAtScale(b,e),k=d&&M(d);if(d||k){for(var h=k.map(function(a){var c=d.minSize,e=d.maxSize,f=b.minDataValue,p=b.maxDataValue;return c>=a?f:a>=e?p:(a-c)/(e-c)*(p-f)+f}),h=q.round(h),f=1;f<h.length-1;f++){var l=N(a,b,c,h[f],h[f-1],e);l&&(h[f]=l[0],k[f]=l[1])}return h}}function M(a){var b=a.minSize,c=O;a=(a.maxSize-b)/(c-1);for(var e=[],d=0;c>d;d++)e.push(b+
a*d);return e}function N(a,b,c,e,d,k){var h=u(a,b,c,e,k);d=u(a,b,c,d,k);var f=q.numDigits(e),l=f.fractional,z=P,g=f.integer,r=f=null;0<e&&1>e&&(f=Math.pow(10,l),e*=f,g=q.numDigits(e).integer);for(l=g-1;0<=l;l--){var m=Math.pow(10,l),g=Math.floor(e/m)*m,m=Math.ceil(e/m)*m;null!=f&&(g/=f,m/=f);var p=(g+m)/2,p=q.round([g,p,m],{indexes:[1]}),p=p[1],B=u(a,b,c,g,k),C=u(a,b,c,m,k),n=u(a,b,c,p,k),t=q.percentChange(h,B,d,null),v=q.percentChange(h,C,d,null),w=q.percentChange(h,n,d,null),x=t.previous<=z,y=v.previous<=
z;if(x&&y&&(t.previous<=v.previous?(x=!0,y=!1):(y=!0,x=!1)),x?r=[g,B]:y?r=[m,C]:w.previous<=z&&(r=[p,n]),r)break}return r}function u(a,b,c,e,d){return a.getSize(e,{sizeInfo:b,scale:d,shape:-1!==c.type.indexOf("marker-symbol")?c.style:null})}function Q(a,b){a=a.clone();if(a.isInstanceOf(D))t.isVolumetricSymbol(a)||a.symbolLayers.forEach(function(a){"fill"!==a.type&&(a.size=b)});else if(a.isInstanceOf(E))a.size=b;else if(a.isInstanceOf(F)){var c=a.width,e=a.height;a.height=b;a.width=c/e*b}else a.isInstanceOf(w)?
a.width=b:a.isInstanceOf(w)&&a.font&&(a.font.size=b);return a}Object.defineProperty(v,"__esModule",{value:!0});var A=[255,255,255],K=[200,200,200],n=[128,128,128],P=20,O=5;v.getRampStops=function(a,b,c,e){var d=b.legendOptions,d=d&&d.customValues,k=H(a,c);c=null!=b.minSize&&null!=b.maxSize;var h=b.stops&&1<b.stops.length,f=!!b.target;if(k&&(d||c||h&&!f)){var l=t.isVolumetricSymbol(k),n=null,g=null,r=null,g=l&&!h?[b.minDataValue,b.maxDataValue]:d||L(a,b,k,e);!g&&h&&(g=b.stops.map(function(a){return a.value}),
n=b.stops.some(function(a){return!!a.label}),n&&(r=b.stops.map(function(a){return a.label})));d=!l||g&&2===g.length;if(!g||!d)return null;var m=[12,30];return g.map(function(c,d){var f=l?m[d]:u(a,b,k,c,e),h=Q(k,f);d=n?r[d]:G.getLabelPrefix(d,g.length-1)+q.format(c);return{value:c,symbol:h,label:d,size:f}}).reverse()}}});