//>>built
define(["./SpatialReference","./Geometry","./support/webMercatorUtils","./support/spatialReferenceUtils"],function(p,q,m,r){var k=[0,0],l=m.lngLatToXY,n=m.xyToLngLat,g=q.createSubclass({declaredClass:"esri.geometry.Point",normalizeCtorArgs:function(a,b,d,f,e){var c;if(Array.isArray(a))c=a,e=b,a=c[0],b=c[1],d=c[2],f=c[3];else if(a&&"object"==typeof a){if(c=a,a=null!=c.x?c.x:c.longitude,b=null!=c.y?c.y:c.latitude,d=null!=c.z?c.z:c.altitude,f=c.m,e=c.spatialReference,e&&"esri.SpatialReference"!==e.declaredClass&&
(e=new p(e)),!c.declaredClass&&e&&e.isWebMercator&&null!=c.longitude&&null!=c.latitude)b=l(c.longitude,c.latitude,!1,k),a=b[0],b=b[1]}else this.isSR(d)?(e=d,d=null):this.isSR(f)&&(e=f,f=null);a={x:a,y:b};return null!=e&&(a.spatialReference=e),null!=d&&(a.z=d),null!=f&&(a.m=f),a},properties:{cache:{dependsOn:["x","y","z","m"]},hasM:{dependsOn:["m"],get:function(){return void 0!==this.m},set:function(a){var b=this._get("hasM");a!==b&&(this._set("m",a?0:void 0),this._set("hasM",a))}},hasZ:{dependsOn:["z"],
get:function(){return void 0!==this.z},set:function(a){var b=this._get("hasZ");a!==b&&(this._set("z",a?0:void 0),this._set("hasZ",a))}},latitude:{dependsOn:["y"],get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return n(this.x,this.y,!1,k)[1];if(4326===a.wkid)return this._get("y")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("y",l(this.x,a,!1,k)[1]):4326===b.wkid&&this._set("y",a),this._set("latitude",a))}},longitude:{dependsOn:["x"],
get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return n(this._get("x"),this._get("y"),!1,k)[0];if(4326===a.wkid)return this._get("x")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("x",l(a,this._get("y"),!1,k)[0]):4326===b.wkid&&this._set("x",a),this._set("longitude",a))}},x:0,y:0,z:void 0,m:void 0,type:"point"},clone:function(){var a=new g;return a.x=this.x,a.y=this.y,a.z=this.z,a.m=this.m,a.spatialReference=this.spatialReference,
a},copy:function(a){return g.copy(a,this),this},equals:function(a){if(!a)return!1;var b=this.x,d=this.y,f=this.z,e=this.m,c=this.spatialReference,g=a.x,h=a.y,k=a.z,m=a.m;a=a.spatialReference;if(!c.equals(a)){if(c.isWebMercator&&4326===a.wkid)h=l(g,h);else{if(4326!==c.wkid||!a.isWebMercator)return!1;h=n(g,h)}g=h[0];h=h[1];a=c}return b===g&&d===h&&f===k&&e===m&&c.wkid===a.wkid},offset:function(a,b,d){return this.x+=a,this.y+=b,null!=d&&this.hasZ&&(this.z+=d),this},normalize:function(){var a=this.x,
b=this.spatialReference;if(b){var d=r.getInfo(b);if(d){var f,b=d.valid[0],d=d.valid[1],e=2*d;a>d?(f=Math.ceil(Math.abs(a-d)/e),a-=f*e):b>a&&(f=Math.ceil(Math.abs(a-b)/e),a+=f*e)}}return this._set("x",a),this},distance:function(a){return g.distance(this,a)},toArray:function(){var a=this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:[this.x,this.y]},toJSON:function(){var a=this.spatialReference,b={x:this.x,y:this.y};return this.hasZ&&(b.z=
this.z),this.hasM&&(b.m=this.m),b.spatialReference=a&&a.toJSON(),b}});return g.lngLatToXY=l,g.xyToLngLat=n,g.copy=function(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.m=a.m;b.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()},g.distance=function(a,b){var d=a.x-b.x,f=a.y-b.y;a=a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(d*d+f*f+a*a)},g});