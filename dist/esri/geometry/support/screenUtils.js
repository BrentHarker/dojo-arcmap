//>>built
define("dojo/_base/array ../Point ../ScreenPoint ../Polyline ../Polygon ../Multipoint ../Extent ./webMercatorUtils".split(" "),function(z,n,C,u,v,w,x,A){return{toScreenPoint:function(b,m,k,a,h){var f,e=b.spatialReference,g=a.spatialReference,c=a.x;a=a.y;return e&&g&&!e.equals(g)&&A.canProject(e,g)&&(f=e.isWebMercator?n.lngLatToXY(c,a):n.xyToLngLat(c,a,!0),c=f[0],a=f[1]),c=(c-b.xmin)*(m/b.getWidth()),a=(b.ymax-a)*(k/b.getHeight()),h||(c=Math.round(c),a=Math.round(a)),new C(c,a)},toScreenGeometry:function(b,
m,k,a){var h=b.xmin,f=b.ymax,e=m/b.getWidth(),g=k/b.getHeight(),c=z.forEach,d=Math.round;if(a instanceof n)return new n(d((a.x-h)*e),d((f-a.y)*g));if(a instanceof w){b=new w;var p=b.points;return c(a.points,function(a,b){p[b]=[d((a[0]-h)*e),d((f-a[1])*g)]}),b}if(a instanceof x)return new x(d((a.xmin-h)*e),d((f-a.ymin)*g),d((a.xmax-h)*e),d((f-a.ymax)*e));if(a instanceof u){var q;b=new u;var t=b.paths;return c(a.paths,function(a,b){q=t[b]=[];c(a,function(a,b){q[b]=[d((a[0]-h)*e),d((f-a[1])*g)]})}),
b}if(a instanceof v){var l;b=new v;var r=b.rings;return c(a.rings,function(a,b){l=r[b]=[];c(a,function(a,b){l[b]=[d((a[0]-h)*e),d((f-a[1])*g)]})}),b}},_toScreenPath:function(b,m,k,a,h,f){var e,g,c=a instanceof u,d=b.spatialReference,p=a.spatialReference;d&&p&&!d.equals(p)&&A.canProject(d,p)&&(d.isWebMercator?e=n.lngLatToXY:(e=n.xyToLngLat,g=!0));d=b.xmin;p=b.ymax;m/=b.getWidth();b=k/b.getHeight();a=c?a.paths:a.rings;var q,t,l,r,y=[],B=Math.round,c=0;for(q=a?a.length:0;q>c;c++)for(l=a[c],y.push("M"),
k=0,t=l?l.length:0;t>k;k++)r=e?e(l[k][0],l[k][1],g):l[k],y.push(B((r[0]-d)*m+h)+","+B((p-r[1])*b+f));return y},toMapPoint:function(b,m,k,a){return new n(b.xmin+a.x/(m/b.width),b.ymax-a.y/(k/b.height),b.spatialReference)},toMapGeometry:function(b,m,k,a){var h=b.xmin,f=b.ymax,e=b.spatialReference,g=m/b.getWidth(),c=k/b.getHeight(),d=z.forEach;if(a instanceof n)return new n(h+a.x/g,f-a.y/c,e);if(a instanceof w){b=new w(e);var p=b.points;return d(a.points,function(a,b){p[b]=[h+a[0]/g,f-a[1]/c]}),b}if(a instanceof
x)return new x(h+a.xmin/g,f-a.ymin/c,h+a.xmax/g,f-a.ymax/c,e);if(a instanceof u){var q;b=new u(e);var t=b.paths;return d(a.paths,function(a,b){q=t[b]=[];d(a,function(a,b){q[b]=[h+a[0]/g,f-a[1]/c]})}),b}if(a instanceof v){var l;b=new v(e);var r=b.rings;return d(a.rings,function(a,b){l=r[b]=[];d(a,function(a,b){l[b]=[h+a[0]/g,f-a[1]/c]})}),b}}}});