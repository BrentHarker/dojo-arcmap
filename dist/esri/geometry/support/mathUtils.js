//>>built
define(["../Point"],function(n){function q(a,b){var c,d,e;return a instanceof n?(c=b.x-a.x,d=b.y-a.y,e=0,null!=a.z&&null!=b.z&&(e=a.z-b.z)):(c=b[0]-a[0],d=b[1]-a[1],e=0,null!=a[2]&&null!=b[2]&&(e=a[2]-b[2])),Math.sqrt(c*c+d*d+e*e)}function p(a,b,c){var d,e,f;return a instanceof n?(d=a.x+c*(b.x-a.x),e=a.y+c*(b.y-a.y),null!=a.z&&null!=b.z&&(f=a.z+c*(b.z-a.z)),new n(d,e,f)):(d=a[0]+c*(b[0]-a[0]),e=a[1]+c*(b[1]-a[1]),2<a.length&&2<b.length?[d,e,a[2]+c*(b[2]-a[2])]:[d,e])}function h(a,b){return 1E-8>Math.abs(a-
b)}function t(a,b,c,d){var e,f,g=h(a[0],b[0])?1E10:(a[1]-b[1])/(a[0]-b[0]),k=h(c[0],d[0])?1E10:(c[1]-d[1])/(c[0]-d[0]),m=a[1]-g*a[0],l=c[1]-k*c[0];if(h(g,k)){if(h(m,l)){if(h(a[0],b[0])){if(!(Math.min(a[1],b[1])<Math.max(c[1],d[1])||Math.max(a[1],b[1])>Math.min(c[1],d[1])))return null;f=(a[1]+b[1]+c[1]+d[1]-Math.min(a[1],b[1],c[1],d[1])-Math.max(a[1],b[1],c[1],d[1]))/2;e=(f-m)/g}else{if(!(Math.min(a[0],b[0])<Math.max(c[0],d[0])||Math.max(a[0],b[0])>Math.min(c[0],d[0])))return null;e=(a[0]+b[0]+c[0]+
d[0]-Math.min(a[0],b[0],c[0],d[0])-Math.max(a[0],b[0],c[0],d[0]))/2;f=g*e+m}return[e,f]}return null}return h(g,1E10)?(e=a[0],f=k*e+l):h(k,1E10)?(e=c[0],f=g*e+m):(e=-(m-l)/(g-k),f=a[1]===b[1]?a[1]:c[1]===d[1]?c[1]:g*e+m),[e,f]}return{getLength:q,_getLength:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},getPointOnLine:p,getMidpoint:function(a,b){return p(a,b,.5)},_equals:h,_getLineIntersection:t,getLineIntersection:function(a,b,c,d,e){a=t([a.x,a.y],[b.x,b.y],[c.x,c.y],[d.x,d.y]);
return a&&(a=new n(a[0],a[1],e)),a},_getLineIntersection2:function(a,b){var c,d,e,f,g=a[0],k=a[1],m=b[0],l=b[1];b=g[0];g=g[1];a=k[0];var k=k[1],h=m[0],r=m[1],m=l[0]-h,h=b-h,n=a-b,l=l[1]-r,r=g-r,q=k-g,p=l*n-m*q;return 0===p?!1:(c=(m*r-l*h)/p,d=(n*r-q*h)/p,0<=c&&1>=c&&0<=d&&1>=d?(e=b+c*(a-b),f=g+c*(k-g),[e,f]):!1)},_pointLineDistance:function(a,b){var c=b[0],d=b[1];b=c[0];var e=c[1],c=a[0];a=a[1];var f=d[0]-b,g=d[1]-e,k=c-b,h=a-e,d=Math.sqrt,l=Math.pow,n=d(l(f,2)+l(g,2)),k=(k*f+h*g)/(n*n),e=e+k*g;return d(l(c-
(b+k*f),2)+l(a-e,2))},getPathLength:function(a){for(var b=0,c=a.length,d=0;c-1>d;++d)b+=q(a[d],a[d+1]);return b},getPointOnPath:function(a,b){if(0>=b)return a[0];for(var c=0,d=a.length,e=0;d-1>e;++e){var f=q(a[e],a[e+1]);if(f>b-c)return p(a[e],a[e+1],(b-c)/f);c+=f}return a[d-1]}}});