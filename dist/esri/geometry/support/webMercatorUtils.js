//>>built
define(["require","exports","../SpatialReference"],function(y,e,k){function n(a,b,c,d,g){if("point"===a.type)b=b(a.x,a.y,d,q),g.x=b[0],g.y=b[1];else if("extent"===a.type)f=b(a.xmin,a.ymin,d,q),g.xmin=f[0],g.ymin=f[1],b=b(a.xmax,a.ymax,d,q),g.xmax=b[0],g.ymax=b[1];else if("polyline"===a.type||"polygon"===a.type){var e=(f="polyline"===a.type)?a.paths:a.rings,k=[],m=void 0;for(a=0;a<e.length;a++){var l=e[a],m=[];k.push(m);for(var h=0;h<l.length;h++)m.push(b(l[h][0],l[h][1],d)),2<l[h].length&&m[h].push(l[h][2]),
3<l[h].length&&m[h].push(l[h][3])}f?g.paths=k:g.rings=k}else if("multipoint"===a.type){f=a.points;e=[];for(a=0;a<f.length;a++)e[a]=b(f[a][0],f[a][1],d),2<f[a].length&&e[a].push(f[a][2]),3<f[a].length&&e[a].push(f[a][3]);g.points=e}return g.spatialReference=c,g;var f}function u(a,b){a=a&&(null!=a.wkid?a:a.spatialReference);b=b&&(null!=b.wkid?b:b.spatialReference);return a&&b?b.equals(a)?!0:b.isWebMercator&&4326===a.wkid||a.isWebMercator&&4326===b.wkid:!1}function r(a,b,c,d){void 0===d&&(d=[0,0]);89.99999<
b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=v;return d[0]=a*v*p,d[1]=.5*p*Math.log((1+Math.sin(b))/(1-Math.sin(b))),d}function t(a,b,c,d){void 0===c&&(c=!1);void 0===d&&(d=[0,0]);a=a/p*w;return d[0]=c?a:a-360*Math.floor((a+180)/360),d[1]=(x/2-2*Math.atan(Math.exp(-1*b/p)))*w,d}Object.defineProperty(e,"__esModule",{value:!0});var p=6378137,x=3.141592653589793,w=57.29577951308232,v=.017453292519943,q=[0,0];e.canProject=u;e.project=function(a,b){var c=a&&a.spatialReference;b=b&&(null!=b.wkid?b:b.spatialReference);
return u(c,b)?c.equals(b)?a.clone():b.isWebMercator?n(a,r,k.WebMercator,!1,a.clone()):4326===b.wkid?n(a,t,k.WGS84,!1,a.clone()):null:null};e.lngLatToXY=r;e.xyToLngLat=t;e.geographicToWebMercator=function(a,b,c){return void 0===b&&(b=!1),void 0===c&&(c=a.clone()),n(a,r,k.WebMercator,b,c)};e.webMercatorToGeographic=function(a,b,c){return void 0===b&&(b=!1),void 0===c&&(c=a.clone()),n(a,t,k.WGS84,b,c)}});