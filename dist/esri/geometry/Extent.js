//>>built
define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./support/webMercatorUtils ./support/mathUtils ./support/spatialReferenceUtils".split(" "),function(x,y,t,z,h,q,A,v){var r=z.createSubclass({declaredClass:"esri.geometry.Extent",type:"extent",normalizeCtorArgs:function(a,b,c,d,e){return this.isSR(a)?{spatialReference:a,xmin:0,ymin:0,xmax:0,ymax:0}:x.isObject(a)?(a.spatialReference=null!=a.spatialReference?a.spatialReference:t.WGS84,a):{xmin:a,ymin:b,xmax:c,ymax:d,spatialReference:null!=
e?e:t.WGS84}},properties:{cache:{dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax".split(" ")},center:{readOnly:!0,dependsOn:["cache"],get:function(a){return a||(a=new h({spatialReference:this.spatialReference})),a.x=.5*(this.xmin+this.xmax),a.y=.5*(this.ymin+this.ymax),this.hasZ&&(a.z=.5*(this.zmin+this.zmax)),this.hasM&&(a.m=.5*(this.mmin+this.mmax)),a}},extent:{readOnly:!0,dependsOn:["cache"],get:function(){return this.clone()}},hasM:{readOnly:!0,dependsOn:["mmin","mmax"],get:function(){return null!=
this.mmin&&null!=this.mmax}},hasZ:{readOnly:!0,dependsOn:["zmin","zmax"],get:function(){return null!=this.zmin&&null!=this.zmax}},height:{readOnly:!0,dependsOn:["ymin","ymax"],get:function(){return Math.abs(this.ymax-this.ymin)}},width:{readOnly:!0,dependsOn:["xmin","xmax"],get:function(){return Math.abs(this.xmax-this.xmin)}},xmin:0,ymin:0,mmin:void 0,zmin:void 0,xmax:0,ymax:0,mmax:void 0,zmax:void 0},centerAt:function(a){var b=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-b.x,a.y-b.y,
a.z-b.z):this.offset(a.x-b.x,a.y-b.y)},clone:function(){var a=new r;return a.xmin=this.xmin,a.ymin=this.ymin,a.xmax=this.xmax,a.ymax=this.ymax,a.spatialReference=this.spatialReference,null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax),null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax),a},contains:function(a){if(!a)return!1;var b=a.type;if("point"===b){var c,b=this.spatialReference,d=a.spatialReference,e=a.x,f=a.y;a=a.z;return b&&d&&!b.equals(d)&&q.canProject(b,d)&&(c=b.isWebMercator?h.lngLatToXY(e,
f):h.xyToLngLat(e,f,!0),e=c[0],f=c[1]),e>=this.xmin&&e<=this.xmax&&f>=this.ymin&&f<=this.ymax?null!=a&&this.hasZ?a>=this.zmin&&a<=this.zmax:!0:!1}return"extent"===b?this._containsExtent(a):!1},equals:function(a){if(!a)return!1;var b=this.spatialReference;if(!b.equals(a.spatialReference)){if(!q.canProject(a.spatialReference,b))return!1;a=q.project(a,b)}return this.xmin===a.xmin&&this.ymin===a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&
this.mmax===a.mmax},expand:function(a){a=.5*(1-a);var b=this.width*a,c=this.height*a;if(this.xmin+=b,this.ymin+=c,this.xmax-=b,this.ymax-=c,this.hasZ)b=(this.zmax-this.zmin)*a,this.zmin+=b,this.zmax-=b;this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this},intersects:function(a){if(!a)return!1;var b=a.type,c=this.spatialReference,d=a.spatialReference;switch(c&&d&&!c.equals(d)&&q.canProject(c,d)&&(a=c.isWebMercator?q.geographicToWebMercator(a):q.webMercatorToGeographic(a,!0)),b){case "point":return this.contains(a);
case "multipoint":return this._intersectsMultipoint(a);case "extent":return this._intersectsExtent(a);case "polygon":return this._intersectsPolygon(a);case "polyline":return this._intersectsPolyline(a)}},normalize:function(){var a=this._normalize(!1,!0);return Array.isArray(a)||(a=[a]),a},offset:function(a,b,c){return this.xmin+=a,this.ymin+=b,this.xmax+=a,this.ymax+=b,null!=c&&(this.zmin+=c,this.zmax+=c),this},shiftCentralMeridian:function(){return this._normalize(!0)},toJSON:function(){var a=this.spatialReference,
a={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax,spatialReference:a&&a.toJSON()};return this.hasZ&&(a.zmin=this.zmin,a.zmax=this.zmax),this.hasM&&(a.mmax=this.mmax,a.mmin=this.mmin),a},union:function(a){function b(a,b,e){return null==b?e:null==e?b:a(b,e)}return this.xmin=Math.min(this.xmin,a.xmin),this.ymin=Math.min(this.ymin,a.ymin),this.xmax=Math.max(this.xmax,a.xmax),this.ymax=Math.max(this.ymax,a.ymax),(this.hasZ||a.hasZ)&&(this.zmin=b(Math.min,this.zmin,a.zmin),this.zmax=b(Math.max,
this.zmax,a.zmax)),(this.hasM||a.hasM)&&(this.mmin=b(Math.min,this.mmin,a.mmin),this.mmax=b(Math.max,this.mmax,a.mmax)),this},intersection:function(a){function b(a,b,e){return null==b?e:null==e?b:a(b,e)}return this._intersectsExtent(a)?(this.xmin=Math.max(this.xmin,a.xmin),this.ymin=Math.max(this.ymin,a.ymin),this.xmax=Math.min(this.xmax,a.xmax),this.ymax=Math.min(this.ymax,a.ymax),(this.hasZ||a.hasZ)&&(this.zmin=b(Math.max,this.zmin,a.zmin),this.zmax=b(Math.min,this.zmax,a.zmax)),(this.hasM||a.hasM)&&
(this.mmin=b(Math.max,this.mmin,a.mmin),this.mmax=b(Math.min,this.mmax,a.mmax)),this):null},_containsExtent:function(a){var b=a.xmin,c=a.ymin,d=a.zmin,e=a.xmax,f=a.ymax,g=a.zmax;a=a.spatialReference;return null!=d&&this.hasZ?this.contains(new h(b,c,d,a))&&this.contains(new h(b,f,d,a))&&this.contains(new h(e,f,d,a))&&this.contains(new h(e,c,d,a))&&this.contains(new h(b,c,g,a))&&this.contains(new h(b,f,g,a))&&this.contains(new h(e,f,g,a))&&this.contains(new h(e,c,g,a)):this.contains(new h(b,c,a))&&
this.contains(new h(b,f,a))&&this.contains(new h(e,f,a))&&this.contains(new h(e,c,a))},_intersectsMultipoint:function(a){var b,c=a.points.length;for(b=0;c>b;b++)if(this.contains(a.getPoint(b)))return!0;return!1},_intersectsExtent:function(a){var b,c,d,e=this.hasZ&&a.hasZ;if(this.xmin<=a.xmin){if(b=a.xmin,this.xmax<b)return!1}else if(b=this.xmin,a.xmax<b)return!1;if(this.ymin<=a.ymin){if(c=a.ymin,this.ymax<c)return!1}else if(c=this.ymin,a.ymax<c)return!1;if(e&&a.hasZ)if(this.zmin<=a.zmin){if(d=a.zmin,
this.zmax<d)return!1}else if(d=this.zmin,a.zmax<d)return!1;return!0},_intersectsPolygon:function(a){var b,c,d;b=[this.xmin,this.ymax];d=[this.xmax,this.ymax];var e=[this.xmin,this.ymin],f=[this.xmax,this.ymin],g=[b,d,e,f],e=[[e,b],[b,d],[d,f],[f,e]],f=a.rings,u=f.length,l=new h(0,0,this.spatialReference);d=g.length;for(b=0;d>b;b++)if(l.x=g[b][0],l.y=g[b][1],a.contains(l))return!0;var l={x:0,y:0,spatialReference:a.spatialReference,type:"point"},k,m;for(b=0;u>b;b++)if(c=f[b],d=c.length){if(k=c[0],l.x=
k[0],l.y=k[1],this.contains(l))return!0;for(a=1;d>a;a++){if(m=c[a],l.x=m[0],l.y=m[1],this.contains(l)||this._intersectsLine([k,m],e))return!0;k=m}}return!1},_intersectsPolyline:function(a){var b,c,d,e,f,g=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],u=a.paths,l=u.length,k={x:0,y:0,spatialReference:a.spatialReference,type:"point"};for(a=0;l>a;a++)if(c=u[a],d=
c.length){if(e=c[0],k.x=e[0],k.y=e[1],this.contains(k))return!0;for(b=1;d>b;b++){if(f=c[b],k.x=f[0],k.y=f[1],this.contains(k)||this._intersectsLine([e,f],g))return!0;e=f}}return!1},_intersectsLine:function(a,b){var c,d=A._getLineIntersection2,e=b.length;for(c=0;e>c;c++)if(d(a,b[c]))return!0;return!1},_shiftCM:function(a){var b=this.spatialReference;if(a=a||v.getInfo(b)){var c=this._getCM(a);if(c){var d=b.isWebMercator?q.webMercatorToGeographic(c):c;this.xmin-=c.x;this.xmax-=c.x;b.isWebMercator||(d.x=
this._normalizeX(d.x,a).x);this.spatialReference=new t(y.substitute({Central_Meridian:d.x},4326===b.wkid?a.altTemplate:a.wkTemplate))}}return this},_getCM:function(a){var b,c=a.valid[0];a=a.valid[1];var d=this.xmin,e=this.xmax;return d>=c&&a>=d&&e>=c&&a>=e||(b=this.center),b},_normalize:function(a,b,c){var d=this.spatialReference;if(d&&(c=c||v.getInfo(d))){var e=this._getParts(c).map(function(a){return a.extent});if(2<e.length)return a?this._shiftCM(c):this.set({xmin:c.valid[0],xmax:c.valid[1]});
if(2===e.length){if(a)return this._shiftCM(c);if(b)return e;var f=!0,g=!0;return e.map(function(a){a.hasZ||(f=!1);a.hasM||(g=!1)}),{rings:e.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(f)for(var c=(a.zmax-a.zmin)/2,d=0;d<b.length;d++)b[d].push(c);if(g)for(a=(a.mmax-a.mmin)/2,d=0;d<b.length;d++)b[d].push(a);return b}),hasZ:f,hasM:g,spatialReference:d}}return e[0]||this}return this},_getParts:function(a){var b=this.cache._parts;if(!b){var b=
[],c,d,e,f,g=this.xmin,h=this.xmax,l=this.ymin,k=this.ymax,m=this.spatialReference,q=this.width,t=g,w=h,n=0,p=0;if(a=a||v.getInfo(m),d=a.valid[0],e=a.valid[1],c=this._normalizeX(g,a),g=c.x,n=c.frameId,c=this._normalizeX(h,a),h=c.x,p=c.frameId,f=g===h&&0<q,q>2*e){a=new r(w>t?g:h,l,e,k,m);g=new r(d,l,w>t?h:g,k,m);e=new r(0,l,e,k,m);l=new r(d,l,0,k,m);k=[];m=[];a.contains(e)&&k.push(n);a.contains(l)&&m.push(n);g.contains(e)&&k.push(p);g.contains(l)&&m.push(p);for(d=n+1;p>d;d++)k.push(d),m.push(d);b.push({extent:a,
frameIds:[n]},{extent:g,frameIds:[p]},{extent:e,frameIds:k},{extent:l,frameIds:m})}else g>h||f?b.push({extent:new r(g,l,e,k,m),frameIds:[n]},{extent:new r(d,l,h,k,m),frameIds:[p]}):b.push({extent:new r(g,l,h,k,m),frameIds:[n]});this.cache._parts=b}p=this.hasZ;d=this.hasM;if(p||d)for(n={},p&&(n.zmin=this.zmin,n.zmax=this.zmax),d&&(n.mmin=this.mmin,n.mmax=this.mmax),p=0;p<b.length;p++)b[p].extent.set(n);return b},_normalizeX:function(a,b){var c,d=0,e=b.valid[0];b=b.valid[1];var f=2*b;return a>b?(c=
Math.ceil(Math.abs(a-b)/f),a-=c*f,d=c):e>a&&(c=Math.ceil(Math.abs(a-e)/f),a+=c*f,d=-c),{x:a,frameId:d}}});return r});