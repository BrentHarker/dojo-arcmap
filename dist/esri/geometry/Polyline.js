//>>built
define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/zmUtils".split(" "),function(O,P,Q,R,f,L,h){var n=R.createSubclass({declaredClass:"esri.geometry.Polyline",type:"polyline",getDefaults:function(a){return{paths:[]}},normalizeCtorArgs:function(a,b){var c,e,d=null,g=null;return a&&!Array.isArray(a)?(d=a.paths?a.paths:null,b||(a.spatialReference?b=a.spatialReference:a.paths||(b=a)),c=a.hasZ,e=a.hasM):d=a,d=d||[],b=b||Q.WGS84,d.length&&d[0]&&null!=d[0][0]&&"number"==
typeof d[0][0]&&(d=[d]),g=d[0]&&d[0][0],g&&(void 0===c&&void 0===e?(c=2<g.length,e=!1):void 0===c?c=!e&&3<g.length:void 0===e&&(e=!c&&3<g.length)),{paths:d,spatialReference:b,hasZ:c,hasM:e}},_path:0,properties:{cache:{dependsOn:["hasM","hasZ","paths"]},extent:{dependsOn:["cache"],readOnly:!0,get:function(){function a(a){return function(b,c){return void 0===b?c:void 0===c?b:a(b,c)}}var b=this.paths,c=b.length;if(!c||!b[0].length)return null;var e,d,g,f,m,h,p,q,D,E,r,t,n,F,G,u,v,w,x,y,z,A,B,H=p=b[0][0][0],
I=q=b[0][0][1],k=a(Math.min),l=a(Math.max),C=this.spatialReference,J=[],K=this.hasZ,M=this.hasM,N=K?3:2;for(r=0;c>r;r++){e=b[r];u=v=e[0]&&e[0][0];w=x=e[0]&&e[0][1];n=e.length;A=B=y=z=void 0;for(t=0;n>t;t++)d=e[t],g=d[0],f=d[1],H=k(H,g),I=k(I,f),p=l(p,g),q=l(q,f),u=k(u,g),w=k(w,f),v=l(v,g),x=l(x,f),K&&2<d.length&&(m=d[2],F=k(F,m),D=l(D,m),y=k(y,m),z=l(z,m)),M&&d.length>N&&(h=d[N],G=k(G,m),E=l(E,m),A=k(A,h),B=l(B,h));J.push(new L({xmin:u,ymin:w,zmin:y,mmin:A,xmax:v,ymax:x,zmax:z,mmax:B,spatialReference:C?
C.clone():null}))}b=new L({xmin:H,ymin:I,xmax:p,ymax:q,spatialReference:C?C.toJSON():null});return K&&(b.zmin=F,b.zmax=D),M&&(b.mmin=G,b.mmax=E),b.cache._partwise=1<J.length?J:null,b}},paths:null},addPath:function(a){return this.clearCache(),this._path=this.paths.length,this.paths[this._path]=[],a.forEach(this._addPoint,this),this},clone:function(){var a=new n;return a.spatialReference=this.spatialReference,a.paths=O.clone(this.paths),a.hasZ=this.hasZ,a.hasM=this.hasM,a},getPoint:function(a,b){if(this._validateInputs(a,
b)){a=this.paths[a][b];b=this.hasZ;var c=this.hasM;return b&&c?new f(a[0],a[1],a[2],a[3],this.spatialReference):b?new f(a[0],a[1],a[2],void 0,this.spatialReference):c?new f(a[0],a[1],void 0,a[2],this.spatialReference):new f(a[0],a[1],this.spatialReference)}},insertPoint:function(a,b,c){return this._validateInputs(a)&&P.isDefined(b)&&0<=b&&b<=this.paths[a].length?(this.clearCache(),h.updateSupportFromPoint(this,c),Array.isArray(c)||(c=c.toArray()),this.paths[a].splice(b,0,c),this):void 0},removePath:function(a){if(this._validateInputs(a,
null)){this.clearCache();var b=this.paths.splice(a,1)[0],c=b.length,e=this.spatialReference;for(a=0;c>a;a++)b[a]=new f(b[a],e);return b}},removePoint:function(a,b){return this._validateInputs(a,b)?(this.clearCache(),new f(this.paths[a].splice(b,1)[0],this.spatialReference)):void 0},setPoint:function(a,b,c){return this._validateInputs(a,b)?(this.clearCache(),h.updateSupportFromPoint(this,c),Array.isArray(c)||(c=c.toArray()),this.paths[a][b]=c,this):void 0},toJSON:function(){var a=this.spatialReference,
a={paths:this.paths,spatialReference:a&&a.toJSON()};return this.hasZ&&(a.hasZ=!0),this.hasM&&(a.hasM=!0),a},_initPathPointsToArray:function(a){for(var b=0;b<a.paths.length;b++)a.paths[b]=a.paths[b].map(function(b){return h.updateSupportFromPoint(a,b,!0),Array.isArray(b)||(a.spatialReference||(a.spatialReference=b.spatialReference),b=b.toArray()),b});return a},_addPoint:function(a){Array.isArray(a)?this.paths[this._path].push(a):this.paths[this._path].push(a.toArray());h.updateSupportFromPoint(this,
a)},_insertPoints:function(a,b){this.clearCache();this._path=b;this.paths[this._path]||(this.paths[this._path]=[]);a.forEach(this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.paths.length)?!1:null!==b&&void 0!==a&&(0>b||b>=this.paths[a].length)?!1:!0}});return n});