//>>built
define("require exports esri/Map esri/views/MapView esri/layers/FeatureLayer esri/widgets/Search esri/widgets/Home dojo/query dojo/touch dojo/on esri/widgets/Legend esri/widgets/LayerList".split(" "),function(z,A,r,t,g,u,v,e,h,w,x){function y(){f.findLayerById(k[0])&&p();var a=new g({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Buildings_Edited/FeatureServer/0",outFields:["Name","Description"],popupTemplate:{title:"{Name}",content:"{Description}"},opacity:0});f.add(a);k.push(a.id)}
function p(){console.log("removing layers");document.getElementById("listNode").innerHTML="";b.popup.close();null!=m&&(m.destroy(),m=null);null!=n&&(n.destroy(),n=null);f.removeAll();k=[]}function l(a){f.findLayerById(k[0])&&p();var d=new g({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/"+a+"/FeatureServer/0",outFields:["*"],definitionExpression:"Name !\x3d ''",popupTemplate:{title:"{Name}",content:[{type:"text",text:"\x3cimg src\x3d'{ImageUrl}'\x3e\x3cdiv class\x3d'popupText'\x3e{Description}\x3c/div\x3e   \x3ca target\x3d'_blank' href\x3d'{url}'\x3e{url}\x3c/a\x3e"}]}});
f.add(d);d.then(function(){d.capabilities.queryRelated.supportsOrderBy?console.log("order supported"):console.log("order NOT supported")});k.push(d.id);var c,e=document.getElementById("listNode");b.whenLayerView(d).then(function(a){a.watch("updating",function(b){b||a.queryFeatures().then(function(a){a.sort(function(a,b){return a.attributes.BLDG_NAME>b.attributes.BLDG_NAME?1:a.attributes.BLDG_NAME<b.attributes.BLDG_NAME?-1:0});c=a;var b=document.createDocumentFragment();a.forEach(function(a,d){a=a.attributes;
a=null!=a.BLDG_ABBR?a.Name+" ("+a.BLDG_ABBR+")":a.Name;var c=document.createElement("li");c.classList.add("panel-result");c.tabIndex=0;c.setAttribute("data-result-id",d);c.textContent=a;b.appendChild(c)});e.innerHTML="";e.appendChild(b)},function(a){console.log("something query messed up",a)})})});e.addEventListener("click",function(a){(a=(a=a.target.getAttribute("data-result-id"))&&c&&c[parseInt(a,10)])&&b.popup.open({features:[a],location:"Buildings Edited"==d.title||"Athletics"==d.title?a.geometry.centroid:
{latitude:a.geometry.latitude,longitude:a.geometry.longitude}})})}function q(a){f.findLayerById(k[0])&&p();var d={title:"{Name}",content:"{Description} {StopLocati}"},c;c="ComputerLabs_Merge"===a||"Transportaion_Merge"===a?new g({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/"+a+"/FeatureServer/0",outFields:["Name","Description","StopLocati"],popupTemplate:d}):new g({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/"+a+"/FeatureServer/0"});f.add(c);c.then(function(){k.push(c.id);
console.log(c);n=new w({view:b,layerInfos:[{layer:c}]});b.ui.add(n,"bottom-left")})}var f,b,m,n,k=[];e("#Buildings_Edited").on(h.press,function(){l("Buildings_Edited")});e("#Dining").on(h.press,function(){l("Dining")});e("#Athletics").on(h.press,function(){l("Athletics")});e("#Services").on(h.press,function(){l("Services")});e("#StudentServices").on(h.press,function(){l("StudentServices")});e("#Web_Cams").on(h.press,function(){l("Web_Cams")});e("#Transportation_Merge").on(h.press,function(){q("Transportation_Merge")});
e("#AccessibilityRoutes").on(h.press,function(){q("AccessibilityRoutes")});e("#ComputerLabs_Merge").on(h.press,function(){q("ComputerLabs_Merge")});e("#ParkingLayers").on(h.press,function(){f.findLayerById(k[0])&&p();for(var a={title:"{Lot}",content:"{Description}"},d=2;12>d;d++){var c=new g({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/ParkingLayers/FeatureServer/"+d,outFields:["Lot","Description","Map_Category"],popupTemplate:a});f.add(c);k.push(c.id)}m=new x({view:b});
b.ui.add(m,{position:"bottom-left"})});return{init:function(){f=new r({basemap:"topo"});b=new t({container:"viewDiv",map:f,center:[-111.649278,40.249251],zoom:16});b.then(function(){y();var a={title:"{Name}",content:"{Description}",overwriteActions:!0},a=new u({view:b,allPlaceholder:"Enter Name or Acronym",sources:[{featureLayer:new g({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Buildings_Edited/FeatureServer/0",popupTemplate:a}),searchFields:["Name","BLDG_ABBR"],suggestionTemplate:"{Name} ({BLDG_ABBR})",
displayField:"Name",exactMatch:!1,outFields:["Name","BLDG_ABBR","Description"],name:"Buildings",placeholder:"example: JSB"},{featureLayer:new g({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Athletics/FeatureServer/0",popupTemplate:a}),searchFields:["Name","BLDG_ABBR"],suggestionTemplate:"{Name}",exactMatch:!1,outFields:["*"],name:"Sports",placeholder:"example: Marriott Center"},{featureLayer:new g({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Services/FeatureServer/0",
popupTemplate:a}),searchFields:["Name"],suggestionTemplate:"{Name}",exactMatch:!1,outFields:["*"],name:"Services",placeholder:"example: Admissions"},{featureLayer:new g({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/StudentServices/FeatureServer/0",popupTemplate:a}),searchFields:["Name"],suggestionTemplate:"{Name}",exactMatch:!1,outFields:["*"],name:"Student Services",placeholder:"example: Title IX"},{featureLayer:new g({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Entertainment_Museums/FeatureServer/0",
popupTemplate:a}),searchFields:["Name"],suggestionTemplate:"{Name}",exactMatch:!1,outFields:["*"],name:"Entertainment and Museums",placeholder:"example: Planetarium"}]});b.ui.add(a,{position:"top-left",index:2});b.ui.move("zoom","top-left");var d=new v({view:b});b.ui.add(d,"top-left");b.popup.dockEnabled=!1;a.then(function(){},function(a){console.log("search failed",a)})},function(a){console.log("The view's resources failed to load: ",a)})}}});