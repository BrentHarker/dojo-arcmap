//>>built
var map,view,layerList,legend,featureLayerIDSet=[];define("require exports esri/Map esri/views/MapView esri/layers/FeatureLayer esri/widgets/Search esri/widgets/Home".split(" "),function(b,d,e,a,c,f,g){});
function toggleLayers(b){map.findLayerById(featureLayerIDSet[0])&&removeLayers();require(["esri/layers/FeatureLayer","esri/tasks/support/Query","dojo/domReady!"],function(d,e){var a=new d({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/"+b+"/FeatureServer/0",outFields:["*"],definitionExpression:"Name !\x3d ''",popupTemplate:{title:"{Name}",content:[{type:"text",text:"\x3cimg src\x3d'{ImageUrl}'\x3e\x3cdiv class\x3d'popupText'\x3e{Description}\x3c/div\x3e   \x3ca target\x3d'_blank' href\x3d'{url}'\x3e{url}\x3c/a\x3e"}]}});
map.add(a);a.then(function(){a.capabilities.queryRelated.supportsOrderBy?console.log("order supported"):console.log("order NOT supported")});featureLayerIDSet.push(a.id);var c,f=document.getElementById("listNode");view.whenLayerView(a).then(function(a){a.watch("updating",function(b){b||a.queryFeatures().then(function(a){a.sort(function(a,b){return a.attributes.BLDG_NAME>b.attributes.BLDG_NAME?1:a.attributes.BLDG_NAME<b.attributes.BLDG_NAME?-1:0});c=a;var b=document.createDocumentFragment();a.forEach(function(a,
c){a=a.attributes;a=null!=a.BLDG_ABBR?a.Name+" ("+a.BLDG_ABBR+")":a.Name;var d=document.createElement("li");d.classList.add("panel-result");d.tabIndex=0;d.setAttribute("data-result-id",c);d.textContent=a;b.appendChild(d)});f.innerHTML="";f.appendChild(b)},function(a){console.log("something query messed up",a)})})});f.addEventListener("click",function(b){(b=(b=b.target.getAttribute("data-result-id"))&&c&&c[parseInt(b,10)])&&view.popup.open({features:[b],location:"Buildings Edited"==a.title||"Athletics"==
a.title?b.geometry.centroid:{latitude:b.geometry.latitude,longitude:b.geometry.longitude}})})})}
function toggleLegendLayers(b){map.findLayerById(featureLayerIDSet[0])&&removeLayers();require(["esri/layers/FeatureLayer","esri/widgets/Legend","dojo/domReady"],function(d,e){var a={title:"{Name}",content:"{Description} {StopLocati}"},c;c="ComputerLabs_Merge"===b||"Transportaion_Merge"===b?new d({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/"+b+"/FeatureServer/0",outFields:["Name","Description","StopLocati"],popupTemplate:a}):new d({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/"+
b+"/FeatureServer/0"});map.add(c);c.then(function(){featureLayerIDSet.push(c.id);console.log(c);legend=new e({view:view,layerInfos:[{layer:c}]});view.ui.add(legend,"bottom-left")})})}
function toggleBuildings(){map.findLayerById(featureLayerIDSet[0])&&removeLayers();require(["esri/layers/FeatureLayer","dojo/domReady!"],function(b){b=new b({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Buildings_Edited/FeatureServer/0",outFields:["Name","Description"],popupTemplate:{title:"{Name}",content:"{Description}"},opacity:0});map.add(b);featureLayerIDSet.push(b.id)})}
function toggleParkingLots(){map.findLayerById(featureLayerIDSet[0])&&removeLayers();require(["esri/layers/FeatureLayer","esri/widgets/LayerList","dojo/domReady!"],function(b,d){for(var e={title:"{Lot}",content:"{Description}"},a=2;12>a;a++){var c=new b({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/ParkingLayers/FeatureServer/"+a,outFields:["Lot","Description","Map_Category"],popupTemplate:e});map.add(c);featureLayerIDSet.push(c.id)}layerList=new d({view:view,listItemCreatedFunction:function(a){a=
a.item;a.title=a.title.substr(16)}});view.ui.add(layerList,{position:"bottom-left"})})}function toggleAEDs(){removeLayers();require(["esri/layers/FeatureLayer","esri/request","esri/config","dojo/domReady!"],function(b,d,e){e.request.proxyUrl="https://risk.byu.edu/ws/aedfeed.php";d("https://risk.byu.edu/ws/aedfeed.php",{responseType:"json",useProxy:!0}).then(function(a){console.log("response",a);a=JSON.stringify(a,null,2);console.log(a)},function(a){console.log("request failed",a)})})}
function removeLayers(){console.log("removing layers");document.getElementById("listNode").innerHTML="";view.popup.close();null!=layerList&&(layerList.destroy(),layerList=null);null!=legend&&(legend.destroy(),legend=null);map.removeAll();featureLayerIDSet=[]};