//>>built
define("dojox/testing/DocTest",["dojo/string"],function(){return dojo.declare("dojox.testing.DocTest",null,{errors:[],getTests:function(a){a=dojo.moduleUrl(a).path;a=a.substring(0,a.length-1)+".js";dojo.xhrGet({url:a,handleAs:"text"});a=dojo._getText(a);return this._getTestsFromString(a,!0)},getTestsFromString:function(a){return this._getTestsFromString(a,!1)},_getTestsFromString:function(a,d){var b=dojo.hitch(dojo.string,"trim");a=a.split("\n");for(var g=a.length,h=[],f=[],e=[],k=null,l=0;l<g+1;l++){var c=
b(a[l]||"");d&&c.match(/^\/\/\s+>>>\s.*/)||c.match(/^\s*>>>\s.*/)?(k||(k=l+1),0<e.length&&(h.push({commands:f,expectedResult:e.join("\n"),line:k}),f=[],e=[],k=l+1),c=d?b(c).substring(2,c.length):c,c=b(c).substring(3,c.length),f.push(b(c))):d&&!c.match(/^\/\/\s+.*/)||!f.length||0!=e.length?0<f.length&&e.length&&(d&&!c.match(/^\/\/\s*$/)||h.push({commands:f,expectedResult:e.join("\n"),line:k}),d&&!c.match(/^\/\//)&&h.push({commands:f,expectedResult:e.join("\n"),line:k}),f=[],e=[],k=0):(c=d?b(c).substring(3,
c.length):c,e.push(b(c)))}return h},run:function(a){this.errors=[];(a=this.getTests(a))&&this._run(a)},_run:function(a){var d=a.length;this.tests=d;for(var b=0;b<d;b++){var g=a[b],h=this.runTest(g.commands,g.expectedResult),f="Test "+(b+1)+": ",e=g.commands.join(" "),e=50<e.length?e.substr(0,50)+"...":e;h.success||(this.errors.push({commands:g.commands,actual:h.actualResult,expected:g.expectedResult}),console.error(f+"Failed: "+e,{commands:g.commands,actualResult:h.actualResult,expectedResult:g.expectedResult}))}},
runTest:function(a,d){var b={success:!1,actualResult:null};a=a.join("\n");b.actualResult=eval(a);if(String(b.actualResult)==d||dojo.toJson(b.actualResult)==d||'"'==d.charAt(0)&&'"'==d.charAt(d.length-1)&&String(b.actualResult)==d.substring(1,d.length-1))b.success=!0;return b}})});