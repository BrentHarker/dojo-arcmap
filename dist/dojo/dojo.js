//>>built
(function(a,h){var m,f=function(){},d=function(b){for(var k in b)return 0;return 1},c={}.toString,n=function(b){return"[object Function]"==c.call(b)},e=function(b){return"[object String]"==c.call(b)},l=function(b){return"[object Array]"==c.call(b)},b=function(b,k){if(b)for(var a=0;a<b.length;)k(b[a++])},g=function(b,k){for(var a in k)b[a]=k[a];return b},q=function(b,k){return g(Error(b),{src:"dojoLoader",info:k})},t=1,w=function(){return"_"+t++},v=function(b,k,a){return ua(b,k,a,0,v)},r=this,p=r.document,
u=p&&p.createElement("DiV"),k=v.has=function(b){return n(x[b])?x[b]=x[b](r,p,u):x[b]},x=k.cache=h.hasCache;k.add=function(b,a,g,c){(void 0===x[b]||c)&&(x[b]=a);return g&&k(b)};k.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);k("host-webworker")&&(g(h.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),h.loaderPatch={injectUrl:function(b,k){try{importScripts(b),k()}catch(gb){console.error(gb)}}});
for(var B in a.has)k.add(B,a.has[B],0,1);v.async=1;var y=k("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");v.eval=function(b,k){return y(b+"\r\n//# sourceURL\x3d"+k)};var z={},A=v.signal=function(k,a){k=z[k];b(k&&k.slice(0),function(b){b.apply(null,l(a)?a:[a])})},D=v.on=function(b,k){var a=z[b]||(z[b]=[]);a.push(k);return{remove:function(){for(var b=0;b<a.length;b++)if(a[b]===k){a.splice(b,1);break}}}},F=[],C={},H=[],I={},M=v.map={},Q=[],K={},G="",N={},S={};B={};var J=
0,W=function(b){var k,a,g,c;for(k in S)a=S[k],(g=k.match(/^url\:(.+)/))?N["url:"+$a(g[1],b)]=a:"*now"==k?c=a:"*noref"!=k&&(g=ya(k,b,!0),N[g.mid]=N["url:"+g.url]=a);c&&c(Da(b));S={}},L=function(b){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(b){return"\\"+b})},P=function(b,k){k.splice(0,k.length);for(var a in b)k.push([a,b[a],new RegExp("^"+L(a)+"(/|$)"),a.length]);k.sort(function(b,k){return k[3]-b[3]});return k},Y=function(k,a){b(k,function(b){a.push([e(b[0])?new RegExp("^"+L(b[0])+"$"):
b[0],b[1]])})},ba=function(b){var k=b.name;k||(k=b,b={name:k});b=g({main:"main"},b);b.location=b.location?b.location:k;b.packageMap&&(M[k]=b.packageMap);b.main.indexOf("./")||(b.main=b.main.substring(2));I[k]=b},V=[],X=function(a,c,l){for(var d in a){"waitSeconds"==d&&(v.waitms=1E3*(a[d]||0));"cacheBust"==d&&(G=a[d]?e(a[d])?a[d]:(new Date).getTime()+"":"");if("baseUrl"==d||"combo"==d)v[d]=a[d];a[d]!==x&&(v.rawConfig[d]=a[d],"has"!=d&&k.add("config-"+d,a[d],0,c))}v.baseUrl||(v.baseUrl="./");/\/$/.test(v.baseUrl)||
(v.baseUrl+="/");for(d in a.has)k.add(d,a.has[d],0,c);b(a.packages,ba);for(var p in a.packagePaths)b(a.packagePaths[p],function(b){var k=p+"/"+b;e(b)&&(b={name:b});b.location=k;ba(b)});P(g(M,a.map),Q);b(Q,function(b){b[1]=P(b[1],[]);"*"==b[0]&&(Q.star=b)});P(g(C,a.paths),H);Y(a.aliases,F);if(c)V.push({config:a.config});else for(d in a.config)c=Ha(d,l),c.config=g(c.config||{},a.config[d]);a.cache&&(W(),S=a.cache,a.cache["*noref"]&&W());A("config",[a,v.rawConfig])};if(k("dojo-cdn")){var ca=p.getElementsByTagName("script");
m=0;for(var Z,ia,fa,ka;m<ca.length;)if(Z=ca[m++],(fa=Z.getAttribute("src"))&&(ka=fa.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(ia=ka[3]||"",h.baseUrl=h.baseUrl||ia,J=Z),fa=Z.getAttribute("data-dojo-config")||Z.getAttribute("djConfig"))B=v.eval("({ "+fa+" })","data-dojo-config"),J=Z}v.rawConfig={};X(h,1);k("dojo-cdn")&&((I.dojo.location=ia)&&(ia+="/"),I.dijit.location=ia+"../dijit/",I.dojox.location=ia+"../dojox/");X(a,1);X(B,1);var na=function(k){E(function(){b(k.deps,nb)})},ua=function(b,k,a,c,d){var p;
if(e(b)){if((p=Ha(b,c,!0))&&p.executed)return p.result;throw q("undefinedModule",b);}l(b)||(X(b,0,c),b=k,k=a);if(l(b))if(b.length){a="require*"+w();for(var x,n=[],t=0;t<b.length;)x=b[t++],n.push(Ha(x,c));p=g(Ua("",a,0,""),{injected:2,deps:n,def:k||f,require:c?c.require:v,gc:1});K[p.mid]=p;na(p);var r=la&&!0;E(function(){R(p,r)});p.executed||za.push(p);ga()}else k&&k();return d},Da=function(b){if(!b)return v;var k=b.require;k||(k=function(a,g,c){return ua(a,g,c,b,k)},b.require=g(k,v),k.module=b,k.toUrl=
function(k){return $a(k,b)},k.toAbsMid=function(k){return Ra(k,b)});return k},za=[],Fa=[],pa={},kb=function(b){b.injected=1;pa[b.mid]=1;b.url&&(pa[b.url]=b.pack||1);sb()},Ia=function(b){b.injected=2;delete pa[b.mid];b.url&&delete pa[b.url];d(pa)&&Va()},va=v.idle=function(){return!Fa.length&&d(pa)&&!za.length&&!la},wa=function(b,k){if(k)for(var a=0;a<k.length;a++)if(k[a][2].test(b))return k[a];return 0},Ja=function(b){var k=[],a,g;for(b=b.replace(/\\/g,"/").split("/");b.length;)a=b.shift(),".."==a&&
k.length&&".."!=g?(k.pop(),g=k[k.length-1]):"."!=a&&k.push(g=a);return k.join("/")},Ua=function(b,k,a,g){return{pid:b,mid:k,pack:a,url:g,executed:0,def:0}},bb=function(k,a,g,c,e,d,l,p,x){var t,f,w,r;r=/^\./.test(k);if(/(^\/)|(\:)|(\.js$)/.test(k)||r&&!a)return Ua(0,k,0,k);k=Ja(r?a.mid+"/../"+k:k);if(/^\./.test(k))throw q("irrationalPath",k);a&&(w=wa(a.mid,d));(w=(w=w||d.star)&&wa(k,w[1]))&&(k=w[1]+k.substring(w[3]));a=(ka=k.match(/^([^\/]+)(\/(.+))?$/))?ka[1]:"";(t=g[a])?k=a+"/"+(f=ka[3]||t.main):
a="";var u=0;b(p,function(b){var a=k.match(b[0]);a&&0<a.length&&(u=n(b[1])?k.replace(b[0],b[1]):b[1])});if(u)return bb(u,0,g,c,e,d,l,p,x);if(g=c[k])return x?Ua(g.pid,g.mid,g.pack,g.url):c[k];c=(w=wa(k,l))?w[1]+k.substring(w[3]):a?t.location+"/"+f:k;/(^\/)|(\:)/.test(c)||(c=e+c);return Ua(a,k,t,Ja(c+".js"))},ya=function(b,k,a){return bb(b,k,I,K,v.baseUrl,a?[]:Q,a?[]:H,a?[]:F)},Na=function(b,k,a){return b.normalize?b.normalize(k,function(b){return Ra(b,a)}):Ra(k,a)},Ga=0,Ha=function(b,k,a){var g,c;
(g=b.match(/^(.+?)\!(.*)$/))?(c=Ha(g[1],k,a),5!==c.executed||c.load||Ma(c),c.load?(g=Na(c,g[2],k),b=c.mid+"!"+(c.dynamic?++Ga+"!":"")+g):(g=g[2],b=c.mid+"!"+ ++Ga+"!waitingForPlugin"),b={plugin:c,mid:b,req:Da(k),prid:g}):b=ya(b,k);return K[b.mid]||!a&&(K[b.mid]=b)},Ra=v.toAbsMid=function(b,k){return ya(b,k).mid},$a=v.toUrl=function(b,k){k=ya(b+"/x",k);var a=k.url;return ja(0===k.pid?b:a.substring(0,a.length-5))},Ea={injected:2,executed:5,def:3,result:3};ia=function(b){return K[b]=g({mid:b},Ea)};var Oa=
ia("require"),T=ia("exports"),Aa=ia("module"),sa={},ha=0,Ma=function(b){var k=b.result;b.dynamic=k.dynamic;b.normalize=k.normalize;b.load=k.load;return b},Ka=function(k){var a={};b(k.loadQ,function(b){var c=Na(k,b.prid,b.req.module),e=k.dynamic?b.mid.replace(/waitingForPlugin$/,c):k.mid+"!"+c,c=g(g({},b),{mid:e,prid:c,injected:0});K[e]&&K[e].injected||ma(K[e]=c);a[b.mid]=K[e];Ia(b);delete K[b.mid]});k.loadQ=0;var c=function(b){for(var k=b.deps||[],g=0;g<k.length;g++)(b=a[k[g].mid])&&(k[g]=b)},e;for(e in K)c(K[e]);
b(za,c)},da=function(b){v.trace("loader-finish-exec",[b.mid]);b.executed=5;b.defOrder=ha++;b.loadQ&&(Ma(b),Ka(b));for(m=0;m<za.length;)za[m]===b?za.splice(m,1):m++;/^require\*/.test(b.mid)&&delete K[b.mid]},cb=[],R=function(b,k){if(4===b.executed)return v.trace("loader-circular-dependency",[cb.concat(b.mid).join("-\x3e")]),!b.def||k?sa:b.cjs&&b.cjs.exports;if(!b.executed){if(!b.def)return sa;var a=b.mid,g=b.deps||[],c,e=[],d=0;for(b.executed=4;c=g[d++];){c=c===Oa?Da(b):c===T?b.cjs.exports:c===Aa?
b.cjs:R(c,k);if(c===sa)return b.executed=0,v.trace("loader-exec-module",["abort",a]),sa;e.push(c)}v.trace("loader-run-factory",[b.mid]);k=b.def;e=n(k)?k.apply(null,e):k;b.result=void 0===e&&b.cjs?b.cjs.exports:e;da(b)}return b.result},la=0,E=function(b){try{la++,b()}catch(jb){throw jb;}finally{la--}va()&&A("idle",[])},ga=function(){la||E(function(){for(var b,k,a=0;a<za.length;)b=ha,k=za[a],R(k),b!=ha?a=0:a++})};void 0===k("dojo-loader-eval-hint-url")&&k.add("dojo-loader-eval-hint-url",1);var ja="function"==
typeof a.fixupUrl?a.fixupUrl:function(b){b+="";return b+(G?(/\?/.test(b)?"\x26":"?")+G:"")},ma=function(b){var k=b.plugin;5!==k.executed||k.load||Ma(k);var a=function(k){b.result=k;Ia(b);da(b);ga()};k.load?k.load(b.prid,b.req,a):k.loadQ?k.loadQ.push(b):(k.loadQ=[b],za.unshift(k),nb(k))},aa=0,ea=0,O=0,Wa=function(b,a){k("config-stripStrict")&&(b=b.replace(/(["'])use strict\1/g,""));O=1;b===aa?aa.call(null):v.eval(b,k("dojo-loader-eval-hint-url")?a.url:a.mid);O=0},nb=function(b){var a=b.mid,c=b.url;
if(!(b.executed||b.injected||pa[a]||b.url&&(b.pack&&pa[b.url]===b.pack||1==pa[b.url])))if(kb(b),b.plugin)ma(b);else{var e=function(){ub(b);if(2!==b.injected){if(k("dojo-enforceDefine")){A("error",q("noDefine",b));return}Ia(b);g(b,Ea);v.trace("loader-define-nonmodule",[b.url])}ga()};(aa=N[a]||N["url:"+b.url])?(v.trace("loader-inject",["cache",b.mid,c]),Wa(aa,b),e()):(v.trace("loader-inject",["script",b.mid,c]),ea=b,v.injectUrl(ja(c),e,b),ea=0)}},lb=function(b,k,a){v.trace("loader-define-module",[b.mid,
k]);if(2===b.injected)return A("error",q("multipleDefine",b)),b;g(b,{deps:k,def:a,cjs:{id:b.mid,uri:b.url,exports:b.result={},setExports:function(k){b.cjs.exports=k},config:function(){return b.config}}});for(var c=0;k[c];c++)k[c]=Ha(k[c],b);Ia(b);n(a)||k.length||(b.result=a,da(b));return b},ub=function(k,a){for(var g=[],c,e;Fa.length;)e=Fa.shift(),a&&(e[0]=a.shift()),c=e[0]&&Ha(e[0])||k,g.push([c,e[1],e[2]]);W(k);b(g,function(b){na(lb.apply(null,b))})},Va=f,sb=f;k("dom")&&k.add("ie-event-behavior",
p.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));if(k("dom")){var db=function(b,a,g,c){if(k("ie-event-behavior"))return b.attachEvent(g,c),function(){b.detachEvent(g,c)};b.addEventListener(a,c,!1);return function(){b.removeEventListener(a,c,!1)}},vb=db(window,"load","onload",function(){v.pageLoaded=1;try{"complete"!=p.readyState&&(p.readyState="complete")}catch(Ob){}vb()}),ca=p.getElementsByTagName("script");for(m=0;!J;)/^dojo/.test((Z=
ca[m++])&&Z.type)||(J=Z);v.injectUrl=function(b,k,a){a=a.node=p.createElement("script");var g=db(a,"load","onreadystatechange",function(b){b=b||window.event;var a=b.target||b.srcElement;if("load"===b.type||/complete|loaded/.test(a.readyState))g(),c(),k&&k()}),c=db(a,"error","onerror",function(k){g();c();A("error",q("scriptError",[b,k]))});a.type="text/javascript";a.charset="utf-8";a.src=b;J.parentNode.insertBefore(a,J);return a}}v.log=f;v.trace=f;Z=function(b,a,g){var c=arguments.length,d=["require",
"exports","module"],l=[0,b,a];1==c?l=[0,n(b)?d:[],b]:2==c&&e(b)?l=[b,n(a)?d:[],a]:3==c&&(l=[b,a,g]);v.trace("loader-define",l.slice(0,2));if((c=l[0]&&Ha(l[0]))&&!pa[c.mid])na(lb(c,l[1],l[2]));else if(k("ie-event-behavior")&&k("host-browser")&&!O){c=c||ea;if(!c)for(b in pa)if((d=K[b])&&d.node&&"interactive"===d.node.readyState){c=d;break}c?(W(c),na(lb(c,l[1],l[2]))):A("error",q("ieDefineFailed",l[0]));ga()}else Fa.push(l)};Z.amd={vendor:"dojotoolkit.org"};g(g(v,h.loaderPatch),a.loaderPatch);D("error",
function(b){try{if(console.error(b),b instanceof Error)for(var k in b);}catch(gb){}});g(v,{uid:w,cache:N,packs:I});r.define||(r.define=Z,r.require=v,b(V,function(b){X(b)}),D=B.deps||a.deps||h.deps,a=B.callback||a.callback||h.callback,v.boot=D||a?[D||[],a]:0)})(this.dojoConfig||this.djConfig||this.require||{},{async:1,baseUrl:"dojo",hasCache:{"config-deferredInstrumentation":0,"config-selectorEngine":"lite","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-has-api":1,"dojo-loader":1,"dojo-undef-api":0,
dom:1,"host-browser":1},packages:[{location:"../app",name:"app"},{location:"../dijit",name:"dijit"},{location:".",name:"dojo"},{location:"../dojox",name:"dojox"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../esri",name:"esri"},{location:"../moment",main:"moment",name:"moment"}]});
require({cache:{"app/main":function(){define(["require","esri/Map","esri/views/MapView","esri/layers/FeatureLayer"],function(a,h,m,f){function d(){b.findLayerById(w[0])&&c();var a=new f({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Buildings_Edited/FeatureServer/0",outFields:["Name","Description"],popupTemplate:{title:"{Name}",content:"{Description}"},opacity:0});b.add(a);w.push(a.id)}function c(){document.getElementById("listNode").innerHTML="";g.popup.close();null!=q&&
(q.destroy(),q=null);null!=t&&(t.destroy(),t=null);b.removeAll();w=[]}function n(a){b.findLayerById(w[0])&&c();var e=new f({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/"+a+"/FeatureServer/0",outFields:["*"],definitionExpression:"Name !\x3d ''",popupTemplate:{title:"{Name}",content:[{type:"text",text:"\x3cimg src\x3d'{ImageUrl}'\x3e\x3cdiv class\x3d'popupText'\x3e{Description}\x3c/div\x3e   \x3ca target\x3d'_blank' href\x3d{url}\x3e{url}\x3c/a\x3e"}]}});b.add(e);e.then(function(){});
w.push(e.id);var d,l=document.getElementById("listNode");g.whenLayerView(e).then(function(b){b.watch("updating",function(k){k||b.queryFeatures().then(function(b){b.sort(function(b,k){return b.attributes.BLDG_NAME>k.attributes.BLDG_NAME?1:b.attributes.BLDG_NAME<k.attributes.BLDG_NAME?-1:0});d=b;var k=document.createDocumentFragment();b.forEach(function(b,a){b=b.attributes;b=null!=b.BLDG_ABBR?b.Name+" ("+b.BLDG_ABBR+")":b.Name;var g=document.createElement("li");g.classList.add("panel-result");g.tabIndex=
0;g.setAttribute("data-result-id",a);g.textContent=b;k.appendChild(g)});l.innerHTML="";l.appendChild(k)},function(b){})})});l.addEventListener("click",function(b){(b=(b=b.target.getAttribute("data-result-id"))&&d&&d[parseInt(b,10)])&&g.popup.open({features:[b],location:"Buildings Edited"==e.title||"Athletics"==e.title?b.geometry.centroid:{latitude:b.geometry.latitude,longitude:b.geometry.longitude}})})}function e(e){b.findLayerById(w[0])&&c();a(["esri/widgets/Legend"],function(a){var c={title:"{Name}",
content:"{Description} {StopLocati}"},d;d="AccessibilityRoutes"===e?new f({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/"+e+"/FeatureServer/0"}):new f({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/"+e+"/FeatureServer/0",outFields:["*"],popupTemplate:c});b.add(d);d.then(function(){w.push(d.id);t=new a({layerInfos:[{layer:d}],view:g});g.ui.add(t,"bottom-left")})})}function l(){b.findLayerById(w[0])&&c();a(["esri/widgets/LayerList","dojo/query"],function(a,
c){for(var e={title:"{Lot}",content:"{Description}"},d="MotorcycleParking Students RestrictedVisitor Construction StudentHousing FreeParking VisitorParking TimedParking GraduateStudents FacultyandStaff".split(" "),k=[],l=0;10>l;l++)k[l]=new f({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/"+d[l]+"/FeatureServer/0",outFields:["Lot","Description","Map_Category"],popupTemplate:e}),b.add(k[l]),w.push(k[l].id);q=new a({view:g,listItemCreatedFunction:function(b){var k=b.item;setTimeout(function(){var b=
c('[aria-labelledby\x3d"'+(q.id+"_"+k.uid+"__title")+'"]')[0];b&&b.children[0]&&k.layer.renderer&&k.layer.renderer.symbol&&(b.children[0].style.backgroundColor=k.layer.renderer.symbol.color,"FacultyandStaff"===k.title?k.title="Faculty and Staff":"FreeParking"===k.title?k.title="Free Parking":"MotorcycleParking"===k.title?k.title="Motorcycle Parking":"RestrictedVisitor"===k.title?k.title="Restricted Visitor":"StudentHousing"===k.title?k.title="Student Housing":"TimedParking"===k.title?k.title="Timed Parking":
"VisitorParking"===k.title?k.title="Visitor Parking":"GraduateStudents"===k.title?k.title="Graduate Students":"Students"===k.title&&(b.children[0].children[0].children[1].style.color="unset"))},50)}});g.ui.add(q,{position:"bottom-left"})})}var b,g,q,t,w=[];a(["dojo/query","dojo/touch","dojo/on"],function(b,a){b("#Buildings_Edited").on(a.press,function(){n("Buildings_Edited")});b("#Dining").on(a.press,function(){n("Dining")});b("#Athletics").on(a.press,function(){n("Athletics")});b("#Services").on(a.press,
function(){n("Services")});b("#StudentServices").on(a.press,function(){n("StudentServices")});b("#Web_Cams").on(a.press,function(){n("Web_Cams")});b("#Transportation_Merge").on(a.press,function(){e("Transportation_Merge")});b("#Emergency_Phones").on(a.press,function(){e("Emergency_Phones")});b("#AccessibilityRoutes").on(a.press,function(){e("AccessibilityRoutes")});b("#ComputerLabs_Merge").on(a.press,function(){e("ComputerLabs_Merge")});b("#ParkingLayers").on(a.press,function(){l()})});return{init:function(){b=
new h({basemap:"topo"});g=new m({container:"viewDiv",map:b,center:[-111.649278,40.249251],zoom:16});g.then(function(){d();a(["esri/widgets/Search","esri/widgets/Home"],function(b,a){var c={title:"{Name}",content:"{Description}",overwriteActions:!0};b=new b({view:g,allPlaceholder:"Enter Name or Acronym",sources:[{featureLayer:new f({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Buildings_Edited/FeatureServer/0",popupTemplate:c}),searchFields:["Name","BLDG_ABBR"],suggestionTemplate:"{Name} ({BLDG_ABBR})",
displayField:"Name",exactMatch:!1,outFields:["Name","BLDG_ABBR","Description"],name:"Buildings",placeholder:"example: JSB"},{featureLayer:new f({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Athletics/FeatureServer/0",popupTemplate:c}),searchFields:["Name","BLDG_ABBR"],suggestionTemplate:"{Name}",exactMatch:!1,outFields:["*"],name:"Sports",placeholder:"example: Marriott Center"},{featureLayer:new f({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Services/FeatureServer/0",
popupTemplate:c}),searchFields:["Name"],suggestionTemplate:"{Name}",exactMatch:!1,outFields:["*"],name:"Services",placeholder:"example: Admissions"},{featureLayer:new f({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/StudentServices/FeatureServer/0",popupTemplate:c}),searchFields:["Name"],suggestionTemplate:"{Name}",exactMatch:!1,outFields:["*"],name:"Student Services",placeholder:"example: Title IX"},{featureLayer:new f({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Entertainment_Museums/FeatureServer/0",
popupTemplate:c}),searchFields:["Name"],suggestionTemplate:"{Name}",exactMatch:!1,outFields:["*"],name:"Entertainment and Museums",placeholder:"example: Planetarium"}]});g.ui.add(b,{position:"top-left",index:2});g.ui.move("zoom","top-left");a=new a({view:g});g.ui.add(a,"top-left");g.popup.dockEnabled=!1})},function(b){})}}})},"esri/Map":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/Accessor ./core/CollectionFlattener ./core/Evented ./support/LayersMixin ./Ground ./support/basemapUtils ./support/groundUtils ./core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q){a=function(a){function g(g){g=a.call(this)||this;return g.basemap=null,g.ground=new l,g._basemapCache=b.createCache(),g}return m(g,a),Object.defineProperty(g.prototype,"allLayers",{get:function(){return new c({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:function(b){return b.layers}})},enumerable:!0,configurable:!0}),g.prototype.castBasemap=function(a){return b.ensureType(a,this._basemapCache)},
g}(q.declared(d,n,e));return f([q.property({readOnly:!0})],a.prototype,"allLayers",null),f([q.property()],a.prototype,"basemap",void 0),f([q.cast("basemap")],a.prototype,"castBasemap",null),f([q.property(),q.cast(g.ensureType)],a.prototype,"ground",void 0),a=f([q.subclass("esri.Map")],a)})},"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(a,h){return function(a,f){a.__bases__=f.__bases__}})},"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(a,
h,m,f){var d,c=arguments.length,n=3>c?h:null===f?f=Object.getOwnPropertyDescriptor(h,m):f;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,h,m,f);else for(var e=a.length-1;0<=e;e--)(d=a[e])&&(n=(3>c?d(n):3<c?d(h,m,n):d(h,m))||n);return 3<c&&n&&Object.defineProperty(h,m,n),n}})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),
function(a,h,m,f,d,c){h=h["default"];a.before(function(c,d){a.hasMixin(c,n)&&f.processPrototype(d)});a.after(function(c){a.hasMixin(c,n)&&(f.processClass(c),Object.defineProperties(c.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var n=a(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===
n)throw Error("[accessor] cannot instanciate Accessor. This can be fixed by creating a subclass of Accessor");if(Object.defineProperty(this,"__accessor__",{value:new h(this)}),0<arguments.length&&this.normalizeCtorArgs){for(var a=[],c=0;c<arguments.length;c++)a.push(arguments[c]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,a)}},__accessor__:null,postscript:function(a){var c,b=this.__accessor__;a=b.ctorArgs||a;null!=this.getDefaults&&(c=this.getDefaults(a||{}),this.set(c));b.initialize();
a&&(this.set(a),b.ctorArgs=null);this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");}catch(e){console.warn(e.stack)}else c.removeTarget(this),this.__accessor__.destroy()},get:function(a){return m.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,c){return d.set(this,
a,c),this},watch:function(a,d,b){return c.watch(this,a,d,b)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},_override:function(a,c){return this.__accessor__.override(a,c)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,c){return this.__accessor__.internalSet(a,c)}});return n})},"esri/core/declare":function(){define(["require",
"exports","dojo/_base/declare"],function(a,h,m){function f(a,c){return a&&!Array.isArray(a)&&"function"!=typeof a&&(c=a,a=null),a=a||[],c=c||{},d([this].concat(a),c)}function d(a,d){a&&!Array.isArray(a)&&"function"!=typeof a&&(d=a,a=null);"function"==typeof a?a=[a]:a||(a=[]);d=d||{};var b,g;b=0;for(g=c.length;g>b;b++)c[b](a,d);a=m(a,d);a.createSubclass=f;b=0;for(g=n.length;g>b;b++)n[b](a);return a}var c=[],n=[];return function(a){a.hasMixin=function(a,b){var g;if(g=Array.isArray(a)?a.reduce(function(b,
a){return a._meta?b.concat(a._meta.bases):b},[]):a._meta?a._meta.bases:a,!g)return!1;if("string"==typeof b)for(a=g.length-1;0<=a;a--)if(g[a].prototype.declaredClass===b)return!0;return-1!==g.indexOf(b)};a.safeMixin=function(a,b){return m.safeMixin(a,b)};a.before=function(a){c.push(a)};a.after=function(a){n.push(a)}}(d||(d={})),d})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(a,h,m){function f(b,k){throw Error("declare"+(k?" "+k:"")+": "+b);}function d(b,k){for(var a=
[],g=[{cls:0,refs:[]}],c={},d=1,e=b.length,l=0,p,q,x,n,t;l<e;++l){(p=b[l])?"[object Function]"!=y.call(p)&&f("mixin #"+l+" is not a callable constructor.",k):f("mixin #"+l+" is unknown. Did you use dojo.require to pull it in?",k);q=p._meta?p._meta.bases:[p];x=0;for(p=q.length-1;0<=p;--p)n=q[p].prototype,n.hasOwnProperty("declaredClass")||(n.declaredClass="uniqName_"+A++),n=n.declaredClass,c.hasOwnProperty(n)||(c[n]={count:0,refs:[],cls:q[p]},++d),n=c[n],x&&x!==n&&(n.refs.push(x),++x.count),x=n;++x.count;
g[0].refs.push(x)}for(;g.length;){x=g.pop();a.push(x.cls);for(--d;t=x.refs,1==t.length;){x=t[0];if(!x||--x.count){x=0;break}a.push(x.cls);--d}if(x)for(l=0,e=t.length;l<e;++l)x=t[l],--x.count||g.push(x)}d&&f("can't build consistent linearization",k);p=b[0];a[0]=p?p._meta&&p===a[a.length-p._meta.bases.length]?p._meta.bases.length:1:0;return a}function c(b,k,a,g){var c,d,e,l,p,q,x=this._inherited=this._inherited||{};"string"===typeof b&&(c=b,b=k,k=a,a=g);if("function"===typeof b)e=b,b=k,k=a;else try{e=
b.callee}catch(W){if(W instanceof TypeError)f("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass);else throw W;}(c=c||e.nom)||f("can't deduce a name to call inherited()",this.declaredClass);a=g=0;l=this.constructor._meta;g=l.bases;q=x.p;if("constructor"!=c){if(x.c!==e&&(q=0,p=g[0],l=p._meta,l.hidden[c]!==e)){(d=l.chains)&&"string"==typeof d[c]&&f("calling chained method with inherited: "+c,this.declaredClass);do if(l=p._meta,d=p.prototype,l&&(d[c]===
e&&d.hasOwnProperty(c)||l.hidden[c]===e))break;while(p=g[++q]);q=p?q:-1}if(p=g[++q])if(d=p.prototype,p._meta&&d.hasOwnProperty(c))a=d[c];else{e=B[c];do if(d=p.prototype,(a=d[c])&&(p._meta?d.hasOwnProperty(c):a!==e))break;while(p=g[++q])}a=p&&a||B[c]}else{if(x.c!==e&&(q=0,(l=g[0]._meta)&&l.ctor!==e)){for((d=l.chains)&&"manual"===d.constructor||f("calling chained constructor with inherited",this.declaredClass);(p=g[++q])&&(!(l=p._meta)||l.ctor!==e););q=p?q:-1}for(;(p=g[++q])&&!(a=(l=p._meta)?l.ctor:
p););a=p&&a}x.c=a;x.p=q;if(a)return!0===k?a:a.apply(this,k||b)}function n(b,k,a){return"string"===typeof b?"function"===typeof k?this.__inherited(b,k,a,!0):this.__inherited(b,k,!0):"function"===typeof b?this.__inherited(b,k,!0):this.__inherited(b,!0)}function e(b,k,a,g){var c=this.getInherited(b,k,a);if(c)return c.apply(this,g||a||k||b)}function l(b){for(var k=this.constructor._meta.bases,a=0,g=k.length;a<g;++a)if(k[a]===b)return!0;return this instanceof b}function b(b,k){for(var a in k)"constructor"!=
a&&k.hasOwnProperty(a)&&(b[a]=k[a]);if(h("bug-for-in-skips-shadowed"))for(var g=m._extraNames,c=g.length;c;)a=g[--c],"constructor"!=a&&k.hasOwnProperty(a)&&(b[a]=k[a])}function g(b){k.safeMixin(this.prototype,b);return this}function q(b,a){b instanceof Array||"function"===typeof b||(a=b,b=void 0);a=a||{};b=b||[];return k([this].concat(b),a)}function t(b,k){return function(){var a=arguments,g=a,c=a[0],d,e;e=b.length;var l;if(!(this instanceof a.callee))return u(a);if(k&&(c&&c.preamble||this.preamble))for(l=
Array(b.length),l[0]=a,d=0;;){(c=a[0])&&(c=c.preamble)&&(a=c.apply(this,a)||a);c=b[d].prototype;(c=c.hasOwnProperty("preamble")&&c.preamble)&&(a=c.apply(this,a)||a);if(++d==e)break;l[d]=a}for(d=e-1;0<=d;--d)c=b[d],(c=(e=c._meta)?e.ctor:c)&&c.apply(this,l?l[d]:a);(c=this.postscript)&&c.apply(this,g)}}function w(b,k){return function(){var a=arguments,g=a,c=a[0];if(!(this instanceof a.callee))return u(a);k&&(c&&(c=c.preamble)&&(g=c.apply(this,g)||g),(c=this.preamble)&&c.apply(this,g));b&&b.apply(this,
a);(c=this.postscript)&&c.apply(this,a)}}function v(b){return function(){var k=arguments,a=0,g,c;if(!(this instanceof k.callee))return u(k);for(;g=b[a];++a)if(g=(c=g._meta)?c.ctor:g){g.apply(this,k);break}(g=this.postscript)&&g.apply(this,k)}}function r(b,k,a){return function(){var g,c,d=0,e=1;a&&(d=k.length-1,e=-1);for(;g=k[d];d+=e)c=g._meta,(g=(c?c.hidden:g.prototype)[b])&&g.apply(this,arguments)}}function p(b){z.prototype=b.prototype;b=new z;z.prototype=null;return b}function u(b){var k=b.callee,
a=p(k);k.apply(a,b);return a}function k(a,e,u){"string"!=typeof a&&(u=e,e=a,a="");u=u||{};var C,F,A,z,H,N,S,J=1,W=e;"[object Array]"==y.call(e)?(N=d(e,a),A=N[0],J=N.length-A,e=N[J]):(N=[0],e?"[object Function]"==y.call(e)?(A=e._meta,N=N.concat(A?A.bases:e)):f("base class is not a callable constructor.",a):null!==e&&f("unknown base class. Did you use dojo.require to pull it in?",a));if(e)for(F=J-1;;--F){C=p(e);if(!F)break;A=N[F];(A._meta?b:x)(C,A.prototype);z=h("csp-restrictions")?function(){}:new Function;
z.superclass=e;z.prototype=C;e=C.constructor=z}else C={};k.safeMixin(C,u);A=u.constructor;A!==B.constructor&&(A.nom="constructor",C.constructor=A);for(F=J-1;F;--F)(A=N[F]._meta)&&A.chains&&(S=x(S||{},A.chains));C["-chains-"]&&(S=x(S||{},C["-chains-"]));e&&e.prototype&&e.prototype["-chains-"]&&(S=x(S||{},e.prototype["-chains-"]));A=!S||!S.hasOwnProperty("constructor");N[0]=z=S&&"manual"===S.constructor?v(N):1==N.length?w(u.constructor,A):t(N,A);z._meta={bases:N,hidden:u,chains:S,parents:W,ctor:u.constructor};
z.superclass=e&&e.prototype;z.extend=g;z.createSubclass=q;z.prototype=C;C.constructor=z;C.getInherited=n;C.isInstanceOf=l;C.inherited=D;C.__inherited=c;a&&(C.declaredClass=a,m.setObject(a,z));if(S)for(H in S)C[H]&&"string"==typeof S[H]&&"constructor"!=H&&(A=C[H]=r(H,N,"after"===S[H]),A.nom=H);return z}var x=m.mixin,B=Object.prototype,y=B.toString,z,A=0;z=h("csp-restrictions")?function(){}:new Function;var D=a.config.isDebug?e:c;a.safeMixin=k.safeMixin=function(b,k){var a,g;for(a in k)g=k[a],g===B[a]&&
a in B||"constructor"==a||("[object Function]"==y.call(g)&&(g.nom=a),b[a]=g);if(h("bug-for-in-skips-shadowed")&&k)for(var c=m._extraNames,d=c.length;d;)a=c[--d],g=k[a],g===B[a]&&a in B||"constructor"==a||("[object Function]"==y.call(g)&&(g.nom=a),b[a]=g);return b};return a.declare=k})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(a,h,m,f){var d,c=function(){return this}(),n={},e={},l={config:h,global:c,dijit:n,dojox:e},n={dojo:["dojo",l],dijit:["dijit",n],
dojox:["dojox",e]};f=m.map&&m.map[f.id.match(/[^\/]+/)[0]];for(d in f)n[d]?n[d][0]=f[d]:n[d]=[f[d],{}];for(d in n)f=n[d],f[1]._scopeName=f[0],h.noGlobals||(c[f[0]]=f[1]);l.scopeMap=n;l.baseUrl=l.config.baseUrl=m.baseUrl;l.isAsync=m.async;l.locale=h.locale;h="$Rev: 594ed6f $".match(/[0-9a-f]{7,}/);l.version={major:1,minor:12,patch:2,flag:"",revision:h?h[0]:NaN,toString:function(){var b=l.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};a("csp-restrictions")||Function("d",
"d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(l);l.exit=function(){};a("host-webworker");a.add("console-as-object",function(){return Function.prototype.bind&&console&&"object"===typeof console.log});"undefined"!=typeof console||(console={});m="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var b;for(h=0;b=m[h++];)console[b]?a("console-as-object")&&(console[b]=Function.prototype.bind.call(console[b],
console)):function(){var a=b+"";console[a]="log"in console?function(){var b=Array.prototype.slice.call(arguments);b.unshift(a+":");console.log(b.join(" "))}:function(){};console[a]._fake=!0}();l.deprecated=l.experimental=function(){};l._hasResource={};return l})},"dojo/has":function(){define(["require","module"],function(a,h){var m=a.has||function(){};m("host-browser")&&(m.add("dom-addeventlistener",!!document.addEventListener),m.add("touch","ontouchstart"in document||"onpointerdown"in document&&
0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints),m.add("touch-events","ontouchstart"in document),m.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window),m.add("MSPointer",window.navigator.msPointerEnabled),m.add("touch-action",m("touch")&&m("pointer-events")),m.add("device-width",screen.availWidth||innerWidth),a=document.createElement("form"),m.add("dom-attributes-explicit",0==a.attributes.length),m.add("dom-attributes-specified-flag",
0<a.attributes.length&&40>a.attributes.length));m.clearElement=function(a){a.innerHTML="";return a};m.normalize=function(a,d){var c=a.match(/[\?:]|[^:\?]*/g),n=0,e=function(a){var b=c[n++];if(":"==b)return 0;if("?"==c[n++]){if(!a&&m(b))return e();e(!0);return e(a)}return b||0};return(a=e())&&d(a)};m.load=function(a,d,c){a?d([a],c):c()};return m})},"dojo/_base/config":function(){define(["../has","require"],function(a,h){a={};h=h.rawConfig;for(var m in h)a[m]=h[m];!a.locale&&"undefined"!=typeof navigator&&
(m=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(a.locale=m.toLowerCase());return a})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(a,h){h.add("bug-for-in-skips-shadowed",function(){for(var b in{toString:1})return 0;return 1});var m=h("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],f=m.length,d=function(b,
g,c){c||(c=b[0]&&a.scopeMap[b[0]]?a.scopeMap[b.shift()][1]:a.global);try{for(var d=0;d<b.length;d++){var e=b[d];if(!(e in c))if(g)c[e]={};else return;c=c[e]}return c}catch(v){}},c=Object.prototype.toString,n=function(b,a,c){return(c||[]).concat(Array.prototype.slice.call(b,a||0))},e=/\{([^\}]+)\}/g,l={_extraNames:m,_mixin:function(b,a,c){var g,d,e,l={};for(g in a)d=a[g],g in b&&(b[g]===d||g in l&&l[g]===d)||(b[g]=c?c(d):d);if(h("bug-for-in-skips-shadowed")&&a)for(e=0;e<f;++e)g=m[e],d=a[g],g in b&&
(b[g]===d||g in l&&l[g]===d)||(b[g]=c?c(d):d);return b},mixin:function(b,a){b||(b={});for(var g=1,c=arguments.length;g<c;g++)l._mixin(b,arguments[g]);return b},setObject:function(b,a,c){var g=b.split(".");b=g.pop();return(c=d(g,!0,c))&&b?c[b]=a:void 0},getObject:function(b,a,c){return b?d(b.split("."),a,c):c},exists:function(b,a){return void 0!==l.getObject(b,!1,a)},isString:function(b){return"string"==typeof b||b instanceof String},isArray:Array.isArray||function(b){return"[object Array]"==c.call(b)},
isFunction:function(b){return"[object Function]"===c.call(b)},isObject:function(b){return void 0!==b&&(null===b||"object"==typeof b||l.isArray(b)||l.isFunction(b))},isArrayLike:function(b){return!!b&&!l.isString(b)&&!l.isFunction(b)&&!(b.tagName&&"form"==b.tagName.toLowerCase())&&(l.isArray(b)||isFinite(b.length))},isAlien:function(b){return b&&!l.isFunction(b)&&/\{\s*\[native code\]\s*\}/.test(String(b))},extend:function(b,a){for(var g=1,c=arguments.length;g<c;g++)l._mixin(b.prototype,arguments[g]);
return b},_hitchArgs:function(b,g){var c=l._toArray(arguments,2),d=l.isString(g);return function(){var e=l._toArray(arguments),q=d?(b||a.global)[g]:g;return q&&q.apply(b||this,c.concat(e))}},hitch:function(b,g){if(2<arguments.length)return l._hitchArgs.apply(a,arguments);g||(g=b,b=null);if(l.isString(g)){b=b||a.global;if(!b[g])throw['lang.hitch: scope["',g,'"] is null (scope\x3d"',b,'")'].join("");return function(){return b[g].apply(b,arguments||[])}}return b?function(){return g.apply(b,arguments||
[])}:g},delegate:function(){function b(){}return function(a,c){b.prototype=a;a=new b;b.prototype=null;c&&l._mixin(a,c);return a}}(),_toArray:h("ie")?function(){function b(b,a,c){c=c||[];for(a=a||0;a<b.length;a++)c.push(b[a]);return c}return function(a){return(a.item?b:n).apply(this,arguments)}}():n,partial:function(b){return l.hitch.apply(a,[null].concat(l._toArray(arguments)))},clone:function(b){if(!b||"object"!=typeof b||l.isFunction(b))return b;if(b.nodeType&&"cloneNode"in b)return b.cloneNode(!0);
if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return new RegExp(b);var a,c,d;if(l.isArray(b))for(a=[],c=0,d=b.length;c<d;++c)c in b&&(a[c]=l.clone(b[c]));else a=b.constructor?new b.constructor:{};return l._mixin(a,b,l.clone)},trim:String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,a,c){return b.replace(c||e,l.isFunction(a)?a:function(b,c){return l.getObject(c,!1,a)})}};l.mixin(a,l);return l})},
"dojo/sniff":function(){define(["./has"],function(a){if(a("host-browser")){var h=navigator,m=h.userAgent,h=h.appVersion,f=parseFloat(h);a.add("air",0<=m.indexOf("AdobeAIR"));a.add("wp",parseFloat(m.split("Windows Phone")[1])||void 0);a.add("msapp",parseFloat(m.split("MSAppHost/")[1])||void 0);a.add("khtml",0<=h.indexOf("Konqueror")?f:void 0);a.add("edge",parseFloat(m.split("Edge/")[1])||void 0);a.add("opr",parseFloat(m.split("OPR/")[1])||void 0);a.add("webkit",!a("wp")&&!a("edge")&&parseFloat(m.split("WebKit/")[1])||
void 0);a.add("chrome",!a("edge")&&!a("opr")&&parseFloat(m.split("Chrome/")[1])||void 0);a.add("android",!a("wp")&&parseFloat(m.split("Android ")[1])||void 0);a.add("safari",!(0<=h.indexOf("Safari"))||a("wp")||a("chrome")||a("android")||a("edge")||a("opr")?void 0:parseFloat(h.split("Version/")[1]));a.add("mac",0<=h.indexOf("Macintosh"));a.add("quirks","BackCompat"==document.compatMode);if(!a("wp")&&m.match(/(iPhone|iPod|iPad)/)){var d=RegExp.$1.replace(/P/,"p"),c=m.match(/OS ([\d_]+)/)?RegExp.$1:
"1",c=parseFloat(c.replace(/_/,".").replace(/_/g,""));a.add(d,c);a.add("ios",c)}a.add("bb",(0<=m.indexOf("BlackBerry")||0<=m.indexOf("BB10"))&&parseFloat(m.split("Version/")[1])||void 0);a.add("trident",parseFloat(h.split("Trident/")[1])||void 0);a.add("svg","undefined"!==typeof SVGAngle);a("webkit")||(0<=m.indexOf("Opera")&&a.add("opera",9.8<=f?parseFloat(m.split("Version/")[1])||f:f),!(0<=m.indexOf("Gecko"))||a("wp")||a("khtml")||a("trident")||a("edge")||a.add("mozilla",f),a("mozilla")&&a.add("ff",
parseFloat(m.split("Firefox/")[1]||m.split("Minefield/")[1])||void 0),document.all&&!a("opera")&&(m=parseFloat(h.split("MSIE ")[1])||void 0,(h=document.documentMode)&&5!=h&&Math.floor(m)!=h&&(m=h),a.add("ie",m)),a.add("wii","undefined"!=typeof opera&&opera.wiiremote))}return a})},"esri/core/accessorSupport/Properties":function(){define("require exports dojo/has ./Store ./PropertyOrigin ./extensions ../Logger".split(" "),function(a,h,m,f,d,c,n){function e(b,a){return a.metadatas[b]?!0:(m("dojo-debug-messages")&&
l.warn("cannot access unknown property '"+b+"' on instance of "+a.host.declaredClass+"."),!1)}Object.defineProperty(h,"__esModule",{value:!0});var l=n.getLogger("esri.core.Accessor"),b=0;a=function(){function a(a){this.host=a;this._origin=d.OriginId.USER;this.cursors={};this.ctorArgs=null;this.destroyed=!1;this.dirties={};this.initialized=!1;this.metadatas=this.host.constructor.__accessorMetadata__;this.overridden=null;this.store=new f["default"];Object.defineProperty(this,"uid",{value:b++})}return a.prototype.initialize=
function(){this.initialized=!0;c.instanceCreated(this.host,this.metadatas)},a.prototype.destroy=function(){this.destroyed=!0;for(var b=this.cursors,a=0,c=Object.getOwnPropertyNames(b);a<c.length;a++){var g=c[a],d=b[g];if(d){for(;0<d.length;)d.pop().propertyDestroyed(this,g);b[g]=null}}},a.prototype.clearOverride=function(b){this.isOverridden(b)&&(this.overridden[b]=!1,this.propertyInvalidated(b))},a.prototype.get=function(b){e(b,this);var a=this.metadatas[b];if(this.store.has(b)&&1==!this.dirties[b])return this.store.get(b);
var c=a.get;return c?(a=c.call(this.host),this.store.set(b,a,d.OriginId.COMPUTED),this.propertyCommitted(b),a):a.value},a.prototype.originOf=function(b){var a=this.store.originOf(b);return void 0===a&&(b=this.metadatas[b])&&b.hasOwnProperty("value")?"defaults":d.idToName(a)},a.prototype.has=function(b){return this.metadatas[b]?this.store.has(b):!1},a.prototype.internalGet=function(b){if(e(b,this)){var a=this.store;return a.has(b)?a.get(b):this.metadatas[b].value}},a.prototype.internalSet=function(b,
a){e(b,this)&&(this.propertyInvalidated(b),this.initialized?this.store.set(b,a,this._origin):this.store.set(b,a,d.OriginId.DEFAULTS),this.propertyCommitted(b))},a.prototype.isOverridden=function(b){return null!=this.overridden&&!0===this.overridden[b]},a.prototype.keys=function(){return this.store.keys()},a.prototype.override=function(b,a){e(b,this)&&(this.overridden||(this.overridden={}),this.overridden[b]=!0,this.internalSet(b,a))},a.prototype.set=function(b,a){if(e(b,this)){var c=this.metadatas[b],
g=c.set;(c=c.cast)&&(a=c.call(this.host,a));g?g.call(this.host,a):this.internalSet(b,a)}},a.prototype.setDefaultOrigin=function(b){this._origin=d.nameToId(b)},a.prototype.propertyInvalidated=function(b){var a=this.cursors[b];if(a)for(var c=0;c<a.length;c++)a[c].propertyInvalidated(this,b);this.isOverridden(b)||(this.dirties[b]=!0)},a.prototype.propertyCommitted=function(b){this.dirties[b]=!1;var a=this.cursors[b];if(a)for(var c=0;c<a.length;c++)a[c].propertyCommitted(this,b)},a.prototype.addCursor=
function(b,a){var c=this.cursors[b];c||(this.cursors[b]=c=[]);c.push(a)},a.prototype.removeCursor=function(b,a){var c=this.cursors[b];this.cursors[b]&&(c.splice(c.indexOf(a),1),0===c.length&&(this.cursors[b]=null))},a}();h["default"]=a})},"esri/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(a,h,m){Object.defineProperty(h,"__esModule",{value:!0});a=function(){function a(){this._values={}}return a.prototype.get=function(a){return this._values[a]},a.prototype.originOf=
function(a){return m.OriginId.USER},a.prototype.keys=function(){return Object.keys(this._values)},a.prototype.set=function(a,c){this._values[a]=c},a.prototype.clear=function(a){delete this._values[a]},a.prototype.has=function(a){return a in this._values},a}();h["default"]=a})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(a,h){function m(a){switch(a){case "defaults":return d.DEFAULTS;case "service":return d.SERVICE;case "portal-item":return d.PORTAL_ITEM;
case "web-scene":return d.WEB_SCENE;case "web-map":return d.WEB_MAP;case "user":return d.USER}}function f(a){switch(a){case d.DEFAULTS:return"defaults";case d.SERVICE:return"service";case d.PORTAL_ITEM:return"portal-item";case d.WEB_SCENE:return"web-scene";case d.WEB_MAP:return"web-map";case d.USER:return"user"}}Object.defineProperty(h,"__esModule",{value:!0});var d;!function(a){a[a.DEFAULTS=0]="DEFAULTS";a[a.COMPUTED=1]="COMPUTED";a[a.SERVICE=2]="SERVICE";a[a.PORTAL_ITEM=3]="PORTAL_ITEM";a[a.WEB_SCENE=
4]="WEB_SCENE";a[a.WEB_MAP=5]="WEB_MAP";a[a.USER=6]="USER";a[a.NUM=7]="NUM"}(d=h.OriginId||(h.OriginId={}));h.nameToId=m;h.idToName=f;h.readableNameToId=function(a){return m(a)};h.idToReadableName=function(a){return f(a)};h.writableNameToId=function(a){return m(a)};h.idToWritableName=function(a){return f(a)}})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(a,
h,m,f,d){Object.defineProperty(h,"__esModule",{value:!0});var c=[m["default"],f["default"],d["default"]];h.processPrototypeMetadatas=function(a,d){for(var e=Object.getOwnPropertyNames(a),b=0;b<c.length;b++){var g=c[b];if(g.processPrototypePropertyMetadata)for(var q=0,n=e;q<n.length;q++){var f=n[q];g.processPrototypePropertyMetadata(f,a[f],a,d)}}};h.processClassMetadatas=function(a,d){for(var e=Object.getOwnPropertyNames(a),b=0;b<c.length;b++){var g=c[b];if(g.processClassPropertyMetadata)for(var q=
0,n=e;q<n.length;q++){var f=n[q];g.processClassPropertyMetadata(f,a[f],a,d)}}};h.instanceCreated=function(a,d){for(var e=Object.getOwnPropertyNames(d),b=0;b<c.length;b++){var g=c[b];g.instanceCreated&&g.instanceCreated(a,d,e)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../wire ../utils ../get ../set".split(" "),function(a,h,m,f,d,c,n){function e(b,a,c){var g=d.getProperties(b);return f.wire(b,c.aliasOf,function(){g.propertyInvalidated(a)})}
Object.defineProperty(h,"__esModule",{value:!0});var l=m("dojo-debug-messages");h.AliasedPropertyExtension={processClassPropertyMetadata:function(b,a,d,e){var g=a.aliasOf;if(g){var q=g.split(".")[0];if(null==d[q])return void(l&&console.error("[accessor] class '"+e+"' - property '"+b+"' is alias of aliased of '"+g+"', but '"+q+"' isn't declared as property. This can be fix by adding '"+q+"' to the metadata for example."));if(a.set)return void(l&&console.error("[accessor] class '"+e+"' - property '"+
b+"' is alias of aliased of '"+g+"', so it cannot have a setter defined"));if(a.get)return void(l&&console.error("[accessor] class '"+e+"' - property '"+b+"' is alias of aliased of '"+g+"', so it cannot have a getter defined"));var f;a.get=function(){var b=c["default"](this,g);if("function"==typeof b){f||(f=g.split(".").slice(0,-1).join("."));var a=c["default"](this,f);a&&(b=b.bind(a))}return b};a.readOnly||(a.set=function(b){return n["default"](this,g,b)})}},instanceCreated:function(b,a,c){for(var g=
0;g<c.length;g++){var d=c[g],l=a[d];l.aliasOf&&e(b,d,l)}}};h["default"]=h.AliasedPropertyExtension})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(a,h,m){function f(b,a,c){a=m.splitPath(a);if(Array.isArray(a)){for(var g=[],q=0;q<a.length;q++)g.push((new d(a[q],c)).install(b));return new e(g)}b=(new d(a,c)).install(b);return new l(b)}Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function b(b,a){return this.path=b,this.callback=a,this.chain=
null,this.path=b,-1<b.indexOf(".")&&(this.chain=m.pathToArray(b)),this.callback=a,this}return b.prototype.install=function(b){return this.chain?new n(this,b):new c(this,b)},b.prototype.notify=function(b){this.callback(b,this.path)},b}(),c=function(){function b(b,a){this.binding=b;this.target=a;m.getProperties(a).addCursor(this.binding.path,this)}return b.prototype.destroy=function(){this.target&&(m.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)},b.prototype.propertyDestroyed=
function(b,a){m.getProperties(this.target).removeCursor(a,this)},b.prototype.propertyInvalidated=function(b,a){this.binding&&this.binding.notify(this.target)},b.prototype.propertyCommitted=function(b,a){this.binding&&this.binding.notify(this.target)},b}(),n=function(){function b(b,a){return this.binding=b,this.target=a,this.stack=[],this.properties=m.getProperties(a),this.stack.push({properties:this.properties,propertyName:b.chain[0]}),this.properties.addCursor(b.chain[0],this),this.moveForward(),
this}return b.prototype.destroy=function(){for(var b;b=this.stack.pop();)b.properties.removeCursor(b.propertyName,this);this.target=this.binding=null},b.prototype.propertyDestroyed=function(b,a){this.moveBackward(b,a)},b.prototype.propertyInvalidated=function(b,a){this.binding&&this.binding.notify(this.target)},b.prototype.propertyCommitted=function(b,a){this.binding&&(this.moveBackward(b,a),this.moveForward(),this.binding.notify(this.target))},b.prototype.moveBackward=function(b,a){for(var c=this.stack,
g=c[c.length-1];g.properties!==b&&g.propertyName!==a;)g.properties.removeCursor(g.propertyName,this),c.pop(),g=c[c.length-1]},b.prototype.moveForward=function(){var b=this.stack,a=b[b.length-1],a=a.properties.internalGet(a.propertyName);(a=m.getProperties(a))&&b.length<this.binding.chain.length&&(b=this.binding.chain[b.length],this.stack.push({properties:a,propertyName:b}),a.addCursor(b,this),this.moveForward())},b}(),e=function(){function b(b){this.cursors=b}return b.prototype.remove=function(){for(var b=
this.cursors;0<b.length;)b.pop().destroy();this.cursors=null},b}(),l=function(){function b(b){this.cursor=b}return b.prototype.remove=function(){this.cursor.destroy();this.cursor=null},b}();h.create=function(b,a){b=m.splitPath(b);if(Array.isArray(b)){for(var c=[],g=0;g<b.length;g++)c.push(new d(b[g],a));return function(b){for(var a=[],g=0;g<c.length;g++)a[g]=c[g].install(b);return new e(a)}}var n=new d(b,a);return function(b){return new l(n.install(b))}};h.wire=f;h["default"]=f})},"esri/core/accessorSupport/utils":function(){define(["require",
"exports","../lang"],function(a,h,m){function f(b){return b?b.__accessor__?b.__accessor__:b.propertyInvalidated?b:null:null}function d(b,a){return a?Object.keys(a).reduce(function(b,c){if("value"===c)return b[c]=a[c],b;if(void 0===b[c])return b[c]=m.clone(a[c]),b;var g=b[c],e=a[c];return g===e?b:(Array.isArray(e)||Array.isArray(b)?(g=g?Array.isArray(g)?b[c]=g.concat():b[c]=[g]:b[c]=[],e&&(Array.isArray(e)||(e=[e]),e.forEach(function(b){-1===g.indexOf(b)&&g.push(b)}))):e&&"object"==typeof e?b[c]=d(g,
e):(!b.hasOwnProperty(c)||a.hasOwnProperty(c))&&(b[c]=e),b)},b||{}):b}function c(b){return Array.isArray(b)?b:b.split(".")}function n(b){if(Array.isArray(b)||-1<b.indexOf(",")){b=Array.isArray(b)?b:b.split(",");for(var a=0;a<b.length;a++)b[a]=b[a].trim();return 1===b.length?b[0]:b}return b.trim()}function e(b){var a=!1;return function(){a||(a=!0,b())}}Object.defineProperty(h,"__esModule",{value:!0});h.getProperties=f;h.isPropertyDeclared=function(b,a){return b&&b.metadatas&&null!=b.metadatas[a]};
h.merge=d;h.pathToStringOrArray=function(b){return b?"string"==typeof b&&-1===b.indexOf(".")?b:c(b):b};h.pathToArray=c;h.splitPath=n;h.parse=function(b,a,c,d){a=n(a);if(Array.isArray(a)){var g=a.map(function(a){return d(b,a.trim(),c)});return{remove:e(function(){return g.forEach(function(b){return b.remove()})})}}return d(b,a.trim(),c)};h.once=e;var l=0;h.uid=function(b){if(null==b)return l++;b=f(b);return null==b.uid&&(b.uid=l++),b.uid}})},"esri/core/lang":function(){define("dojo/_base/array dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),
function(a,h,m,f,d,c,n){function e(b){return void 0!==b&&null!==b}function l(b){return e(b)?b:""}function b(b,g,p){var n,k=p.match(/([^\(]+)(\([^\)]+\))?/i),x=m.trim(k[1]);p=g[b];var k=JSON.parse((k[2]?m.trim(k[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,'$1"$2":').replace(/\"\s*:\s*\'/gi,'":"').replace(/\'\s*(,|\})/gi,'"$1')),q=k.utcOffset;if(-1===a.indexOf(t,x))n=m.getObject(x),m.isFunction(n)&&(p=n(p,b,g,k));else if("number"==typeof p||"string"==typeof p&&
p&&!isNaN(Number(p)))switch(p=Number(p),x){case "NumberFormat":return b=m.mixin({},k),g=parseFloat(b.places),(isNaN(g)||0>g)&&(b.places=1/0),d.format(p,b);case "DateString":return n=new Date(p),k.local||k.systemLocale?k.systemLocale?n.toLocaleDateString()+(k.hideTime?"":" "+n.toLocaleTimeString()):n.toDateString()+(k.hideTime?"":" "+n.toTimeString()):(n=n.toUTCString(),k.hideTime&&(n=n.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,"")),n);case "DateFormat":return n=new Date(p),e(q)&&(n=f.add(n,"minute",
n.getTimezoneOffset()-q)),c.format(n,k)}return l(p)}function g(b,a){var c;if(a)for(c in b)b.hasOwnProperty(c)&&(void 0===b[c]?delete b[c]:b[c]instanceof Object&&g(b[c],!0));else for(c in b)b.hasOwnProperty(c)&&void 0===b[c]&&delete b[c];return b}function q(b){if(!b||"object"!=typeof b||m.isFunction(b))return b;if("function"==typeof b.clone)b=b.clone();else if("function"==typeof b.map&&"function"==typeof b.forEach)b=b.map(q);else{var a={},c,g,k={};for(c in b){g=b[c];var d=!(c in k)||k[c]!==g;c in a&&
(a[c]===g||!d)||(a[c]=q?q(g):g)}b=a}return b}var t=["NumberFormat","DateString","DateFormat"],w=/<\/?[^>]+>/g;return{equals:function(b,a){return b===a||"number"==typeof b&&isNaN(b)&&"number"==typeof a&&isNaN(a)||m.isFunction((b||{}).getTime)&&m.isFunction((a||{}).getTime)&&b.getTime()==a.getTime()||m.isFunction((b||{}).equals)&&b.equals(a)||m.isFunction((a||{}).equals)&&a.equals(b)||!1},valueOf:function(b,a){for(var c in b)if(b[c]==a)return c;return null},stripTags:function(b){if(b){var a=typeof b;
if("string"===a)b=b.replace(w,"");else if("object"===a)for(var c in b)(a=b[c])&&"string"==typeof a&&(a=a.replace(w,"")),b[c]=a}return b},substitute:function(c,g,d){var p,k,x;if(e(d)&&(m.isObject(d)?(p=d.first,k=d.dateFormat,x=d.numberFormat):p=d),g&&"{*}"!==g)return m.replace(g,m.hitch({obj:c},function(c,g){c=g.split(":");return 1<c.length?(g=c[0],c.shift(),b(g,this.obj,c.join(":"))):k&&-1!==a.indexOf(k.properties||"",g)?b(g,this.obj,k.formatter||"DateString"):x&&-1!==a.indexOf(x.properties||"",g)?
b(g,this.obj,x.formatter||"NumberFormat"):l(this.obj[g])}));var q,f;g=[];g.push('\x3ctable summary\x3d"'+n.fieldsSummary+'"\x3e\x3ctbody\x3e');for(f in c)if(q=c[f],k&&-1!==a.indexOf(k.properties||"",f)?q=b(f,c,k.formatter||"DateString"):x&&-1!==a.indexOf(x.properties||"",f)&&(q=b(f,c,x.formatter||"NumberFormat")),g.push("\x3ctr\x3e\x3cth\x3e"+f+"\x3c/th\x3e\x3ctd\x3e"+l(q)+"\x3c/td\x3e\x3c/tr\x3e"),p)break;return g.push("\x3c/tbody\x3e\x3c/table\x3e"),g.join("")},filter:function(b,a,c){var g;a=[m.isString(b)?
b.split(""):b,c||h.global,m.isString(a)?new Function("item","index","array",a):a];c={};b=a[0];for(g in b)a[2].call(a[g],b[g],g,b)&&(c[g]=b[g]);return c},startsWith:function(b,a,c){return c=c||0,b.indexOf(a,c)===c},endsWith:function(b,a,c){("number"!=typeof c||!isFinite(c)||Math.floor(c)!==c||c>b.length)&&(c=b.length);c-=a.length;b=b.indexOf(a,c);return-1!==b&&b===c},isDefined:e,fixJson:g,clone:q}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(a,h,m){function f(b){return n[b]=
new Function("item","index","array",b)}function d(b){var a=!b;return function(c,g,d){var e=0,l=c&&c.length||0,p;l&&"string"==typeof c&&(c=c.split(""));"string"==typeof g&&(g=n[g]||f(g));if(d)for(;e<l;++e){if(p=!g.call(d,c[e],e,c),b^p)return!p}else for(;e<l;++e)if(p=!g(c[e],e,c),b^p)return!p;return a}}function c(b){var a=1,c=0,d=0;b||(a=c=d=-1);return function(g,n,q,p){if(p&&0<a)return l.lastIndexOf(g,n,q);p=g&&g.length||0;var f=b?p+d:c;q===e?q=b?c:p+d:0>q?(q=p+q,0>q&&(q=c)):q=q>=p?p+d:q;for(p&&"string"==
typeof g&&(g=g.split(""));q!=f;q+=a)if(g[q]==n)return q;return-1}}var n={},e,l={every:d(!1),some:d(!0),indexOf:c(!0),lastIndexOf:c(!1),forEach:function(b,a,c){var g=0,d=b&&b.length||0;d&&"string"==typeof b&&(b=b.split(""));"string"==typeof a&&(a=n[a]||f(a));if(c)for(;g<d;++g)a.call(c,b[g],g,b);else for(;g<d;++g)a(b[g],g,b)},map:function(b,a,c,d){var g=0,e=b&&b.length||0;d=new (d||Array)(e);e&&"string"==typeof b&&(b=b.split(""));"string"==typeof a&&(a=n[a]||f(a));if(c)for(;g<e;++g)d[g]=a.call(c,b[g],
g,b);else for(;g<e;++g)d[g]=a(b[g],g,b);return d},filter:function(b,a,c){var g=0,d=b&&b.length||0,e=[],l;d&&"string"==typeof b&&(b=b.split(""));"string"==typeof a&&(a=n[a]||f(a));if(c)for(;g<d;++g)l=b[g],a.call(c,l,g,b)&&e.push(l);else for(;g<d;++g)l=b[g],a(l,g,b)&&e.push(l);return e},clearCache:function(){n={}}};m.mixin(a,l);return l})},"dojo/date":function(){define(["./has","./_base/lang"],function(a,h){var m={getDaysInMonth:function(a){var d=a.getMonth();return 1==d&&m.isLeapYear(a)?29:[31,28,
31,30,31,30,31,31,30,31,30,31][d]},isLeapYear:function(a){a=a.getFullYear();return!(a%400)||!(a%4)&&!!(a%100)},getTimezoneName:function(a){var d=a.toString(),c="",n=d.indexOf("(");if(-1<n)c=d.substring(++n,d.indexOf(")"));else if(n=/([A-Z\/]+) \d{4}$/,d=d.match(n))c=d[1];else if(d=a.toLocaleString(),n=/ ([A-Z\/]+)$/,d=d.match(n))c=d[1];return"AM"==c||"PM"==c?"":c},compare:function(a,d,c){a=new Date(+a);d=new Date(+(d||new Date));"date"==c?(a.setHours(0,0,0,0),d.setHours(0,0,0,0)):"time"==c&&(a.setFullYear(0,
0,0),d.setFullYear(0,0,0));return a>d?1:a<d?-1:0},add:function(a,d,c){var n=new Date(+a),e=!1,l="Date";switch(d){case "day":break;case "weekday":var b;(d=c%5)?b=parseInt(c/5):(d=0<c?5:-5,b=0<c?(c-5)/5:(c+5)/5);var g=a.getDay(),q=0;6==g&&0<c?q=1:0==g&&0>c&&(q=-1);g+=d;if(0==g||6==g)q=0<c?2:-2;c=7*b+d+q;break;case "year":l="FullYear";e=!0;break;case "week":c*=7;break;case "quarter":c*=3;case "month":e=!0;l="Month";break;default:l="UTC"+d.charAt(0).toUpperCase()+d.substring(1)+"s"}if(l)n["set"+l](n["get"+
l]()+c);e&&n.getDate()<a.getDate()&&n.setDate(0);return n},difference:function(a,d,c){d=d||new Date;c=c||"day";var n=d.getFullYear()-a.getFullYear(),e=1;switch(c){case "quarter":a=a.getMonth();d=d.getMonth();e=Math.floor(d/3)+1+4*n-(Math.floor(a/3)+1);break;case "weekday":n=Math.round(m.difference(a,d,"day"));c=parseInt(m.difference(a,d,"week"));if(0==n%7)n=5*c;else{var e=0,l=a.getDay(),b=d.getDay();c=parseInt(n/7);d=n%7;a=new Date(a);a.setDate(a.getDate()+7*c);a=a.getDay();if(0<n)switch(!0){case 6==
l:e=-1;break;case 0==l:e=0;break;case 6==b:e=-1;break;case 0==b:e=-2;break;case 5<a+d:e=-2}else if(0>n)switch(!0){case 6==l:e=0;break;case 0==l:e=1;break;case 6==b:e=2;break;case 0==b:e=1;break;case 0>a+d:e=2}n=n+e-2*c}e=n;break;case "year":e=n;break;case "month":e=d.getMonth()-a.getMonth()+12*n;break;case "week":e=parseInt(m.difference(a,d,"day")/7);break;case "day":e/=24;case "hour":e/=60;case "minute":e/=60;case "second":e/=1E3;case "millisecond":e*=d.getTime()-a.getTime()}return Math.round(e)}};
h.mixin(h.getObject("dojo.date",!0),m);return m})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(a,h,m,f,d){var c={};a.setObject("dojo.number",c);c.format=function(d,l){l=a.mixin({},l||{});var b=h.normalizeLocale(l.locale),b=h.getLocalization("dojo.cldr","number",b);l.customs=b;b=l.pattern||b[(l.type||"decimal")+"Format"];return isNaN(d)||Infinity==Math.abs(d)?null:c._applyPattern(d,b,l)};c._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;
c._applyPattern=function(a,d,b){b=b||{};var g=b.customs.group,e=b.customs.decimal;d=d.split(";");var l=d[0];d=d[0>a?1:0]||"-"+l;if(-1!=d.indexOf("%"))a*=100;else if(-1!=d.indexOf("\u2030"))a*=1E3;else if(-1!=d.indexOf("\u00a4"))g=b.customs.currencyGroup||g,e=b.customs.currencyDecimal||e,d=d.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(a,c,g,d){return(a=b[["symbol","currency","displayName"][g.length-1]]||b.currency||"")?c+a+d:""});else if(-1!=d.indexOf("E"))throw Error("exponential notation not supported");
var n=c._numberPatternRE,l=l.match(n);if(!l)throw Error("unable to find a number expression in pattern: "+d);!1===b.fractional&&(b.places=0);return d.replace(n,c._formatAbsolute(a,l[0],{decimal:e,group:g,places:b.places,round:b.round}))};c.round=function(a,c,b){b=10/(b||10);return(b*+a).toFixed(c)/b};if(0==(.9).toFixed()){var n=c.round;c.round=function(a,c,b){var g=Math.pow(10,-c||0),d=Math.abs(a);if(!a||d>=g)g=0;else if(d/=g,.5>d||.95<=d)g=0;return n(a,c,b)+(0<a?g:-g)}}c._formatAbsolute=function(a,
d,b){b=b||{};!0===b.places&&(b.places=0);Infinity===b.places&&(b.places=6);d=d.split(".");var g="string"==typeof b.places&&b.places.indexOf(","),e=b.places;g?e=b.places.substring(g+1):0<=e||(e=(d[1]||[]).length);0>b.round||(a=c.round(a,e,b.round));a=String(Math.abs(a)).split(".");var l=a[1]||"";d[1]||b.places?(g&&(b.places=b.places.substring(0,g)),g=void 0!==b.places?b.places:d[1]&&d[1].lastIndexOf("0")+1,g>l.length&&(a[1]=f.pad(l,g,"0",!0)),e<l.length&&(a[1]=l.substr(0,e))):a[1]&&a.pop();e=d[0].replace(",",
"");g=e.indexOf("0");-1!=g&&(g=e.length-g,g>a[0].length&&(a[0]=f.pad(a[0],g)),-1==e.indexOf("#")&&(a[0]=a[0].substr(a[0].length-g)));var e=d[0].lastIndexOf(","),n,h;-1!=e&&(n=d[0].length-e-1,d=d[0].substr(0,e),e=d.lastIndexOf(","),-1!=e&&(h=d.length-e-1));d=[];for(e=a[0];e;)g=e.length-n,d.push(0<g?e.substr(g):e),e=0<g?e.slice(0,g):"",h&&(n=h,h=void 0);a[0]=d.reverse().join(b.group||",");return a.join(b.decimal||".")};c.regexp=function(a){return c._parseInfo(a).regexp};c._parseInfo=function(a){a=a||
{};var e=h.normalizeLocale(a.locale),e=h.getLocalization("dojo.cldr","number",e),b=a.pattern||e[(a.type||"decimal")+"Format"],g=e.group,n=e.decimal,f=1;if(-1!=b.indexOf("%"))f/=100;else if(-1!=b.indexOf("\u2030"))f/=1E3;else{var w=-1!=b.indexOf("\u00a4");w&&(g=e.currencyGroup||g,n=e.currencyDecimal||n)}e=b.split(";");1==e.length&&e.push("-"+e[0]);e=d.buildGroupRE(e,function(b){b="(?:"+d.escapeString(b,".")+")";return b.replace(c._numberPatternRE,function(b){var d={signed:!1,separator:a.strict?g:[g,
""],fractional:a.fractional,decimal:n,exponent:!1};b=b.split(".");var e=a.places;1==b.length&&1!=f&&(b[1]="###");1==b.length||0===e?d.fractional=!1:(void 0===e&&(e=a.pattern?b[1].lastIndexOf("0")+1:Infinity),e&&void 0==a.fractional&&(d.fractional=!0),!a.places&&e<b[1].length&&(e+=","+b[1].length),d.places=e);b=b[0].split(",");1<b.length&&(d.groupSize=b.pop().length,1<b.length&&(d.groupSize2=b.pop().length));return"("+c._realNumberRegexp(d)+")"})},!0);w&&(e=e.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,
function(b,c,g,e){b=d.escapeString(a[["symbol","currency","displayName"][g.length-1]]||a.currency||"");if(!b)return"";c=c?"[\\s\\xa0]":"";e=e?"[\\s\\xa0]":"";return a.strict?c+b+e:(c&&(c+="*"),e&&(e+="*"),"(?:"+c+b+e+")?")}));return{regexp:e.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:g,decimal:n,factor:f}};c.parse=function(a,d){d=c._parseInfo(d);a=(new RegExp("^"+d.regexp+"$")).exec(a);if(!a)return NaN;var b=a[1];if(!a[1]){if(!a[2])return NaN;b=a[2];d.factor*=-1}b=b.replace(new RegExp("["+d.group+"\\s\\xa0]",
"g"),"").replace(d.decimal,".");return b*d.factor};c._realNumberRegexp=function(a){a=a||{};"places"in a||(a.places=Infinity);"string"!=typeof a.decimal&&(a.decimal=".");"fractional"in a&&!/^0/.test(a.places)||(a.fractional=[!0,!1]);"exponent"in a||(a.exponent=[!0,!1]);"eSigned"in a||(a.eSigned=[!0,!1]);var e=c._integerRegexp(a),b=d.buildGroupRE(a.fractional,function(b){var c="";b&&0!==a.places&&(c="\\"+a.decimal,c=Infinity==a.places?"(?:"+c+"\\d+)?":c+("\\d{"+a.places+"}"));return c},!0),g=d.buildGroupRE(a.exponent,
function(b){return b?"([eE]"+c._integerRegexp({signed:a.eSigned})+")":""}),e=e+b;b&&(e="(?:(?:"+e+")|(?:"+b+"))");return e+g};c._integerRegexp=function(a){a=a||{};"signed"in a||(a.signed=[!0,!1]);"separator"in a?"groupSize"in a||(a.groupSize=3):a.separator="";var c=d.buildGroupRE(a.signed,function(b){return b?"[-+]":""},!0),b=d.buildGroupRE(a.separator,function(b){if(!b)return"(?:\\d+)";b=d.escapeString(b);" "==b?b="\\s":"\u00a0"==b&&(b="\\s\\xa0");var c=a.groupSize,g=a.groupSize2;return g?(b="(?:0|[1-9]\\d{0,"+
(g-1)+"}(?:["+b+"]\\d{"+g+"})*["+b+"]\\d{"+c+"})",0<c-g?"(?:"+b+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":b):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+b+"]\\d{"+c+"})*)"},!0);return c+b};return c})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./has!host-browser?./_base/xhr ./json module".split(" "),function(a,h,m,f,d,c,n,e,l){m.add("dojo-preload-i18n-Api",1);n=a.i18n={};var b=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,g=function(b,a,k,c){var g=[k+c];a=a.split("-");
for(var d="",e=0;e<a.length;e++)if(d+=(d?"-":"")+a[e],!b||b[d])g.push(k+d+"/"+c),g.specificity=d;return g},q={},t=function(b,k,c){c=c?c.toLowerCase():a.locale;b=b.replace(/\./g,"/");k=k.replace(/\./g,"/");return/root/i.test(c)?b+"/nls/"+k:b+"/nls/"+c+"/"+k},w=a.getL10nName=function(b,a,k){return b=l.id+"!"+t(b,a,k)},v=function(b,a,k,d,e,l){b([a],function(p){var x=c.clone(p.root||p.ROOT),n=g(!p._v1x&&p,e,k,d);b(n,function(){for(var b=1;b<n.length;b++)x=c.mixin(c.clone(x),arguments[b]);q[a+"/"+e]=x;
x.$locale=n.specificity;l()})})},r=function(b){var a=d.extraLocale||[],a=c.isArray(a)?a:[a];a.push(b);return a},p=function(g,d,l){var p=b.exec(g),n=p[1]+"/",t=p[5]||p[4],w=n+t,u=(p=p[5]&&p[4])||a.locale||"",h=w+"/"+u,p=p?[u]:r(u),A=p.length,z=function(){--A||l(c.delegate(q[h]))},u=g.split("*"),D="preload"==u[1];if(m("dojo-preload-i18n-Api")){if(D&&(q[g]||(q[g]=1,B(u[2],e.parse(u[3]),1,d)),l(1)),(u=D)||(k&&x.push([g,d,l]),u=k&&!q[h]),u)return}else if(D){l(1);return}f.forEach(p,function(b){var a=w+
"/"+b;m("dojo-preload-i18n-Api")&&y(a);q[a]?z():v(d,w,n,t,b,z)})};m("dojo-preload-i18n-Api");var u=n.normalizeLocale=function(b){b=b?b.toLowerCase():a.locale;return"root"==b?"ROOT":b},k=0,x=[],B=n._preloadLocalizations=function(b,g,d,e){function l(b,a){e([b],a)}function n(b,a){for(b=b.split("-");b.length;){if(a(b.join("-")))return;b.pop()}a("ROOT")}function t(){for(--k;!k&&x.length;)p.apply(null,x.shift())}function w(a){a=u(a);n(a,function(d){if(0<=f.indexOf(g,d)){var p=b.replace(/\./g,"/")+"_"+d;
k++;l(p,function(b){for(var g in b){var l=b[g],p=g.match(/(.+)\/([^\/]+)$/),x;if(p&&(x=p[2],p=p[1]+"/",l._localized)){var f;if("ROOT"===d){var w=f=l._localized;delete l._localized;w.root=l;q[h.toAbsMid(g)]=w}else f=l._localized,q[h.toAbsMid(p+x+"/"+d)]=l;d!==a&&function(b,g,d,l){var p=[],x=[];n(a,function(a){l[a]&&(p.push(h.toAbsMid(b+a+"/"+g)),x.push(h.toAbsMid(b+g+"/"+a)))});p.length?(k++,e(p,function(){for(var k=p.length-1;0<=k;k--)d=c.mixin(c.clone(d),arguments[k]),q[x[k]]=d;q[h.toAbsMid(b+g+
"/"+a)]=c.clone(d);t()})):q[h.toAbsMid(b+g+"/"+a)]=d}(p,x,l,f)}}t()});return!0}return!1})}e=e||h;w();f.forEach(a.config.extraLocale,w)},y=function(){},y=function(b){for(var k,c=b.split("/"),g=a.global[c[0]],d=1;g&&d<c.length-1;g=g[c[d++]]);g&&((k=g[c[d]])||(k=g[c[d].replace(/-/g,"_")]),k&&(q[b]=k));return k};n.getLocalization=function(b,a,k){var c;b=t(b,a,k);p(b,h,function(b){c=b});return c};return c.mixin(n,{dynamic:!0,normalize:function(b,a){return/^\./.test(b)?a(b):b},load:p,cache:q,getL10nName:w})})},
"dojo/json":function(){define(["./has"],function(a){var h="undefined"!=typeof JSON;a.add("json-parse",h);a.add("json-stringify",h&&'{"a":1}'==JSON.stringify({a:0},function(a,d){return d||1}));if(a("json-stringify"))return JSON;var m=function(a){return('"'+a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:a("json-parse")?JSON.parse:function(a,d){if(d&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(a))throw new SyntaxError("Invalid characters in JSON");
return eval("("+a+")")},stringify:function(a,d,c){function n(a,b,g){d&&(a=d(g,a));var l;l=typeof a;if("number"==l)return isFinite(a)?a+"":"null";if("boolean"==l)return a+"";if(null===a)return"null";if("string"==typeof a)return m(a);if("function"==l||"undefined"==l)return e;if("function"==typeof a.toJSON)return n(a.toJSON(g),b,g);if(a instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(b,k,c){b=a["getUTC"+k]()+(c?1:0);return 10>b?"0"+
b:b});if(a.valueOf()!==a)return n(a.valueOf(),b,g);var f=c?b+c:"",w=c?" ":"",h=c?"\n":"";if(a instanceof Array){var w=a.length,r=[];for(g=0;g<w;g++)l=n(a[g],f,g),"string"!=typeof l&&(l="null"),r.push(h+f+l);return"["+r.join(",")+h+b+"]"}r=[];for(g in a){var p;if(a.hasOwnProperty(g)){if("number"==typeof g)p='"'+g+'"';else if("string"==typeof g)p=m(g);else continue;l=n(a[g],f,g);"string"==typeof l&&r.push(h+f+p+":"+w+l)}}return"{"+r.join(",")+h+b+"}"}var e;"string"==typeof d&&(c=d,d=null);return n(a,
"","")}}})},"dojo/cldr/nls/number":function(){define({root:{scientificFormat:"#E0","currencySpacing-afterCurrency-currencyMatch":"[:^S:]",infinity:"\u221e",superscriptingExponent:"\u00d7",list:";",percentSign:"%",minusSign:"-","currencySpacing-beforeCurrency-surroundingMatch":"[:digit:]","decimalFormat-short":"000T","currencySpacing-afterCurrency-insertBetween":"\u00a0",nan:"NaN",plusSign:"+","currencySpacing-afterCurrency-surroundingMatch":"[:digit:]","currencySpacing-beforeCurrency-currencyMatch":"[:^S:]",
currencyFormat:"\u00a4\u00a0#,##0.00",perMille:"\u2030",group:",",percentFormat:"#,##0%","decimalFormat-long":"000T",decimalFormat:"#,##0.###",decimal:".","currencySpacing-beforeCurrency-insertBetween":"\u00a0",exponential:"E"},ar:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,"en-au":!0,es:!0,et:!0,fi:!0,fr:!0,"fr-ch":!0,he:!0,hi:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,mk:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-pt":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,vi:!0,zh:!0,"zh-hant":!0,"zh-hk":!0,
"zh-tw":!0})},"dojo/cldr/nls/en/number":function(){define({group:",",percentSign:"%",exponential:"E",scientificFormat:"#E0",percentFormat:"#,##0%",list:";",infinity:"\u221e",minusSign:"-",decimal:".",superscriptingExponent:"\u00d7",nan:"NaN",perMille:"\u2030",decimalFormat:"#,##0.###",currencyFormat:"\u00a4#,##0.00;(\u00a4#,##0.00)",plusSign:"+","decimalFormat-long":"000 trillion","decimalFormat-short":"000T"})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(a,h){var m=
/[&<>'"\/]/g,f={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},d={};h.setObject("dojo.string",d);d.escape=function(a){return a?a.replace(m,function(a){return f[a]}):""};d.rep=function(a,d){if(0>=d||!a)return"";for(var c=[];;){d&1&&c.push(a);if(!(d>>=1))break;a+=a}return c.join("")};d.pad=function(a,n,e,l){e||(e="0");a=String(a);n=d.rep(e,Math.ceil((n-a.length)/e.length));return l?a+n:n+a};d.substitute=function(c,d,e,l){l=l||a.global;e=e?h.hitch(l,
e):function(b){return b};return c.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(b,a,c){if(""==a)return"$";b=h.getObject(a,!1,d);c&&(b=h.getObject(c,!1,l).call(l,b,a));c=e(b,a);if("undefined"===typeof c)throw Error('string.substitute could not find key "'+a+'" in template');return c.toString()})};d.trim=String.prototype.trim?h.trim:function(a){a=a.replace(/^\s+/,"");for(var c=a.length-1;0<=c;c--)if(/\S/.test(a.charAt(c))){a=a.substring(0,c+1);break}return a};return d})},"dojo/regexp":function(){define(["./_base/kernel",
"./_base/lang"],function(a,h){var m={};h.setObject("dojo.regexp",m);m.escapeString=function(a,d){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(a){return d&&-1!=d.indexOf(a)?a:"\\"+a})};m.buildGroupRE=function(a,d,c){if(!(a instanceof Array))return d(a);for(var n=[],e=0;e<a.length;e++)n.push(d(a[e]));return m.group(n.join("|"),c)};m.group=function(a,d){return"("+(d?"?:":"")+a+")"};return m})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),
function(a,h,m,f,d,c,n,e,l){function b(b,a,k,c){return c.replace(/([a-z])\1*/ig,function(g){var d,e,l=g.charAt(0);g=g.length;var p=["abbr","wide","narrow"];switch(l){case "G":d=a[4>g?"eraAbbr":"eraNames"][0>b.getFullYear()?0:1];break;case "y":d=b.getFullYear();switch(g){case 1:break;case 2:if(!k.fullYear){d=String(d);d=d.substr(d.length-2);break}default:e=!0}break;case "Q":case "q":d=Math.ceil((b.getMonth()+1)/3);e=!0;break;case "M":case "L":d=b.getMonth();3>g?(d+=1,e=!0):(l=["months","L"==l?"standAlone":
"format",p[g-3]].join("-"),d=a[l][d]);break;case "w":d=t._getWeekOfYear(b,0);e=!0;break;case "d":d=b.getDate();e=!0;break;case "D":d=t._getDayOfYear(b);e=!0;break;case "e":case "c":if(d=b.getDay(),2>g){d=(d-f.getFirstDayOfWeek(k.locale)+8)%7;break}case "E":d=b.getDay();3>g?(d+=1,e=!0):(l=["days","c"==l?"standAlone":"format",p[g-3]].join("-"),d=a[l][d]);break;case "a":l=12>b.getHours()?"am":"pm";d=k[l]||a["dayPeriods-format-wide-"+l];break;case "h":case "H":case "K":case "k":e=b.getHours();switch(l){case "h":d=
e%12||12;break;case "H":d=e;break;case "K":d=e%12;break;case "k":d=e||24}e=!0;break;case "m":d=b.getMinutes();e=!0;break;case "s":d=b.getSeconds();e=!0;break;case "S":d=Math.round(b.getMilliseconds()*Math.pow(10,g-3));e=!0;break;case "v":case "z":if(d=t._getZone(b,!0,k))break;g=4;case "Z":l=t._getZone(b,!1,k);l=[0>=l?"+":"-",n.pad(Math.floor(Math.abs(l)/60),2),n.pad(Math.abs(l)%60,2)];4==g&&(l.splice(0,0,"GMT"),l.splice(3,0,":"));d=l.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+
c);}e&&(d=n.pad(d,g));return d})}function g(b,a,k,c){var g=function(b){return b};a=a||g;k=k||g;c=c||g;var d=b.match(/(''|[^'])+/g),e="'"==b.charAt(0);h.forEach(d,function(b,c){b?(d[c]=(e?k:a)(b.replace(/''/g,"'")),e=!e):d[c]=""});return c(d.join(""))}function q(b,a,k,g){g=c.escapeString(g);k.strict||(g=g.replace(" a"," ?a"));return g.replace(/([a-z])\1*/ig,function(c){var g;g=c.charAt(0);var d=c.length,e="",l="";k.strict?(1<d&&(e="0{"+(d-1)+"}"),2<d&&(l="0{"+(d-2)+"}")):(e="0?",l="0{0,2}");switch(g){case "y":g=
"\\d{2,4}";break;case "M":case "L":2<d?(g=a["months-"+("L"==g?"standAlone":"format")+"-"+w[d-3]].slice(0).join("|"),k.strict||(g=g.replace(/\./g,""),g="(?:"+g+")\\.?")):g="1[0-2]|"+e+"[1-9]";break;case "D":g="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+e+"[1-9][0-9]|"+l+"[1-9]";break;case "d":g="3[01]|[12]\\d|"+e+"[1-9]";break;case "w":g="[1-4][0-9]|5[0-3]|"+e+"[1-9]";break;case "E":case "e":case "c":g=".+?";break;case "h":g="1[0-2]|"+e+"[1-9]";break;case "k":g="1[01]|"+e+"\\d";break;case "H":g="1\\d|2[0-3]|"+
e+"\\d";break;case "K":g="1\\d|2[0-4]|"+e+"[1-9]";break;case "m":case "s":g="[0-5]\\d";break;case "S":g="\\d{"+d+"}";break;case "a":d=k.am||a["dayPeriods-format-wide-am"];e=k.pm||a["dayPeriods-format-wide-pm"];g=d+"|"+e;k.strict||(d!=d.toLowerCase()&&(g+="|"+d.toLowerCase()),e!=e.toLowerCase()&&(g+="|"+e.toLowerCase()),-1!=g.indexOf(".")&&(g+="|"+g.replace(/\./g,"")));g=g.replace(/\./g,"\\.");break;default:g=".*"}b&&b.push(c);return"("+g+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var t={};a.setObject(l.id.replace(/\//g,
"."),t);t._getZone=function(b,a,k){return a?m.getTimezoneName(b):b.getTimezoneOffset()};t.format=function(c,e){e=e||{};var k=d.normalizeLocale(e.locale),l=e.formatLength||"short",k=t._getGregorianBundle(k),p=[];c=a.hitch(this,b,c,k,e);if("year"==e.selector)return g(k["dateFormatItem-yyyy"]||"yyyy",c);var n;"date"!=e.selector&&(n=e.timePattern||k["timeFormat-"+l])&&p.push(g(n,c));"time"!=e.selector&&(n=e.datePattern||k["dateFormat-"+l])&&p.push(g(n,c));return 1==p.length?p[0]:k["dateTimeFormat-"+l].replace(/\'/g,
"").replace(/\{(\d+)\}/g,function(b,a){return p[a]})};t.regexp=function(b){return t._parseInfo(b).regexp};t._parseInfo=function(b){b=b||{};var c=d.normalizeLocale(b.locale),c=t._getGregorianBundle(c),k=b.formatLength||"short",e=b.datePattern||c["dateFormat-"+k],l=b.timePattern||c["timeFormat-"+k],k="date"==b.selector?e:"time"==b.selector?l:c["dateTimeFormat-"+k].replace(/\{(\d+)\}/g,function(b,a){return[l,e][a]}),p=[];return{regexp:g(k,a.hitch(this,q,p,c,b)),tokens:p,bundle:c}};t.parse=function(b,
a){var k=/[\u200E\u200F\u202A\u202E]/g,c=t._parseInfo(a),g=c.tokens,d=c.bundle;b=(new RegExp("^"+c.regexp.replace(k,"")+"$",c.strict?"":"i")).exec(b&&b.replace(k,""));if(!b)return null;var e=["abbr","wide","narrow"],l=[1970,0,1,0,0,0,0],p="";b=h.every(b,function(b,k){if(!k)return!0;var c=g[k-1];k=c.length;c=c.charAt(0);switch(c){case "y":if(2!=k&&a.strict)l[0]=b;else if(100>b)b=Number(b),c=""+(new Date).getFullYear(),k=100*c.substring(0,2),c=Math.min(Number(c.substring(2,4))+20,99),l[0]=b<c?k+b:k-
100+b;else{if(a.strict)return!1;l[0]=b}break;case "M":case "L":if(2<k){if(k=d["months-"+("L"==c?"standAlone":"format")+"-"+e[k-3]].concat(),a.strict||(b=b.replace(".","").toLowerCase(),k=h.map(k,function(b){return b.replace(".","").toLowerCase()})),b=h.indexOf(k,b),-1==b)return!1}else b--;l[1]=b;break;case "E":case "e":case "c":k=d["days-"+("c"==c?"standAlone":"format")+"-"+e[k-3]].concat();a.strict||(b=b.toLowerCase(),k=h.map(k,function(b){return b.toLowerCase()}));b=h.indexOf(k,b);if(-1==b)return!1;
break;case "D":l[1]=0;case "d":l[2]=b;break;case "a":k=a.am||d["dayPeriods-format-wide-am"];c=a.pm||d["dayPeriods-format-wide-pm"];if(!a.strict){var n=/\./g;b=b.replace(n,"").toLowerCase();k=k.replace(n,"").toLowerCase();c=c.replace(n,"").toLowerCase()}if(a.strict&&b!=k&&b!=c)return!1;p=b==c?"p":b==k?"a":"";break;case "K":24==b&&(b=0);case "h":case "H":case "k":if(23<b)return!1;l[3]=b;break;case "m":l[4]=b;break;case "s":l[5]=b;break;case "S":l[6]=b}return!0});k=+l[3];"p"===p&&12>k?l[3]=k+12:"a"===
p&&12==k&&(l[3]=0);k=new Date(l[0],l[1],l[2],l[3],l[4],l[5],l[6]);a.strict&&k.setFullYear(l[0]);var n=g.join(""),c=-1!=n.indexOf("d"),n=-1!=n.indexOf("M");if(!b||n&&k.getMonth()>l[1]||c&&k.getDate()>l[2])return null;if(n&&k.getMonth()<l[1]||c&&k.getDate()<l[2])k=m.add(k,"hour",1);return k};var w=["abbr","wide","narrow"],v=[],r={};t.addCustomFormats=function(b,a){v.push({pkg:b,name:a});r={}};t._getGregorianBundle=function(b){if(r[b])return r[b];var c={};h.forEach(v,function(k){k=d.getLocalization(k.pkg,
k.name,b);c=a.mixin(c,k)},this);return r[b]=c};t.addCustomFormats(l.id.replace(/\/date\/locale$/,".cldr"),"gregorian");t.getNames=function(b,a,k,c){var g;c=t._getGregorianBundle(c);b=[b,k,a];"standAlone"==k&&(k=b.join("-"),g=c[k],1==g[0]&&(g=void 0));b[1]="format";return(g||c[b.join("-")]).concat()};t.isWeekend=function(b,a){a=f.getWeekend(a);b=(b||new Date).getDay();a.end<a.start&&(a.end+=7,b<a.start&&(b+=7));return b>=a.start&&b<=a.end};t._getDayOfYear=function(b){return m.difference(new Date(b.getFullYear(),
0,1,b.getHours()),b)+1};t._getWeekOfYear=function(b,a){1==arguments.length&&(a=0);var k=(new Date(b.getFullYear(),0,1)).getDay(),c=(k-a+7)%7,c=Math.floor((t._getDayOfYear(b)+c-1)/7);k==a&&c++;return c};return t})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(a,h){var m={};a.setObject("dojo.cldr.supplemental",m);m.getFirstDayOfWeek=function(a){a={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,
br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[m._region(a)];return void 0===a?1:a};m._region=function(a){a=h.normalizeLocale(a);a=a.split("-");var d=a[1];d?4==d.length&&(d=a[2]):d={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",
bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",
kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",
sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",
bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",
hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",
mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",
ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[a[0]];return d};m.getWeekend=
function(a){var d=m._region(a);a={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[d];d={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[d];void 0===a&&(a=6);void 0===d&&(d=0);return{start:a,end:d}};return m})},"dojo/cldr/nls/gregorian":function(){define({root:{"dateFormatItem-Ehm":"E h:mm a","days-standAlone-short":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"months-format-narrow":"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),
"field-second-relative+0":"now","quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"y-MM-dd, E","field-wed-relative+0":"this Wednesday","field-wed-relative+1":"next Wednesday","dateFormatItem-GyMMMEd":"G y MMM d, E","dateFormatItem-MMMEd":"MMM d, E",eraNarrow:["BCE","CE"],"field-tue-relative+-1":"last Tuesday","days-format-short":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}",
"dateFormat-long":"y MMMM d","field-fri-relative+-1":"last Friday","field-wed-relative+-1":"last Wednesday","months-format-wide":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"PM","dateFormat-full":"y MMMM d, EEEE","field-thu-relative+-1":"last Thursday","dateFormatItem-Md":"MM-dd","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dayPeriods-format-wide-noon":"noon","dateFormatItem-yMd":"y-MM-dd",
"field-era":"Era","dateFormatItem-yM":"y-MM","months-standAlone-wide":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"timeFormat-short":"HH:mm","quarters-format-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-yQQQQ":"y QQQQ","timeFormat-long":"HH:mm:ss z","field-year":"Year","dateFormatItem-yMMM":"y MMM","dateTimeFormats-appendItem-Era":"{1} {0}","field-hour":"Hour","months-format-abbr":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"field-sat-relative+0":"this Saturday","field-sat-relative+1":"next Saturday",
"timeFormat-full":"HH:mm:ss zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"today","field-thu-relative+0":"this Thursday","field-day-relative+1":"tomorrow","field-thu-relative+1":"next Thursday","dateFormatItem-GyMMMd":"G y MMM d","dateFormatItem-H":"HH","months-standAlone-abbr":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-Gy":"G y","dateFormatItem-M":"L",
"days-standAlone-wide":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dayPeriods-format-abbr-noon":"noon","timeFormat-medium":"HH:mm:ss","field-sun-relative+0":"this Sunday","dateFormatItem-Hm":"HH:mm","field-sun-relative+1":"next Sunday","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],eraAbbr:["BCE","CE"],"field-minute":"Minute","field-dayperiod":"Dayperiod","days-standAlone-abbr":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1",
"2","3","4"],"field-day-relative+-1":"yesterday","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"a","dateFormatItem-h":"h a","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"MM-dd, E","dateTimeFormat-full":"{1} {0}","field-fri-relative+0":"this Friday","field-fri-relative+1":"next Friday","field-day":"Day","days-format-wide":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"field-zone":"Zone","months-standAlone-narrow":"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),"dateFormatItem-y":"y","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})",
"field-year-relative+-1":"last year","field-month-relative+-1":"last month","dateTimeFormats-appendItem-Year":"{1} {0}","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","days-format-abbr":"Sun Mon Tue Wed Thu Fri Sat".split(" "),eraNames:["BCE","CE"],"dateFormatItem-yMMMd":"y MMM d","days-format-narrow":"SMTWTFS".split(""),"field-month":"Month","days-standAlone-narrow":"SMTWTFS".split(""),"dateFormatItem-MMM":"LLL","field-tue-relative+0":"this Tuesday",
"dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","field-tue-relative+1":"next Tuesday","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormatItem-EHm":"E HH:mm","field-mon-relative+0":"this Monday","field-mon-relative+1":"next Monday","dateFormat-short":"y-MM-dd","dateFormatItem-EHms":"E HH:mm:ss","dateFormatItem-Ehms":"E h:mm:ss a","dayPeriods-format-narrow-noon":"n","field-second":"Second","field-sat-relative+-1":"last Saturday",
"dateFormatItem-yMMMEd":"y MMM d, E","field-sun-relative+-1":"last Sunday","field-month-relative+0":"this month","field-month-relative+1":"next month","dateTimeFormats-appendItem-Timezone":"{0} {1}","dateFormatItem-Ed":"d, E","field-week":"Week","dateFormat-medium":"y MMM d","field-week-relative+-1":"last week","field-year-relative+0":"this year","field-year-relative+1":"next year","dayPeriods-format-narrow-pm":"p","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a",
"dateFormatItem-GyMMM":"G y MMM","field-mon-relative+-1":"last Monday","field-week-relative+0":"this week","field-week-relative+1":"next week"},ar:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,"en-au":!0,"en-ca":!0,"en-gb":!0,es:!0,et:!0,fi:!0,fr:!0,"fr-ch":!0,he:!0,hi:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,mk:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-pt":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,vi:!0,zh:!0,"zh-hant":!0,"zh-hk":!0,"zh-tw":!0})},"dojo/cldr/nls/en/gregorian":function(){define({"dateFormatItem-Ehm":"E h:mm a",
"days-standAlone-short":"Su Mo Tu We Th Fr Sa".split(" "),"months-format-narrow":"JFMAMJJASOND".split(""),"field-second-relative+0":"now","quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"E, M/d/y","field-wed-relative+0":"this Wednesday","field-wed-relative+1":"next Wednesday","dateFormatItem-GyMMMEd":"E, MMM d, y G","dateFormatItem-MMMEd":"E, MMM d",eraNarrow:["B","A"],"field-tue-relative+-1":"last Tuesday","days-format-short":"Su Mo Tu We Th Fr Sa".split(" "),
"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"MMMM d, y","field-fri-relative+-1":"last Friday","field-wed-relative+-1":"last Wednesday","months-format-wide":"January February March April May June July August September October November December".split(" "),"dateTimeFormat-medium":"{1}, {0}","dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE, MMMM d, y","field-thu-relative+-1":"last Thursday","dateFormatItem-Md":"M/d","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})",
"dayPeriods-format-wide-noon":"noon","dateFormatItem-yMd":"M/d/y","field-era":"Era","dateFormatItem-yM":"M/y","months-standAlone-wide":"January February March April May June July August September October November December".split(" "),"timeFormat-short":"h:mm a","quarters-format-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormatItem-yQQQQ":"QQQQ y","timeFormat-long":"h:mm:ss a z","field-year":"Year","dateFormatItem-yMMM":"MMM y","dateTimeFormats-appendItem-Era":"{0} {1}","field-hour":"Hour",
"months-format-abbr":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),"field-sat-relative+0":"this Saturday","field-sat-relative+1":"next Saturday","timeFormat-full":"h:mm:ss a zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"today","field-thu-relative+0":"this Thursday","field-day-relative+1":"tomorrow","field-thu-relative+1":"next Thursday","dateFormatItem-GyMMMd":"MMM d, y G","dateFormatItem-H":"HH","months-standAlone-abbr":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormatItem-Gy":"y G","dateFormatItem-M":"L","days-standAlone-wide":"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),"timeFormat-medium":"h:mm:ss a","field-sun-relative+0":"this Sunday","dateFormatItem-Hm":"HH:mm","field-sun-relative+1":"next Sunday",eraAbbr:["BC","AD"],"field-minute":"Minute","field-dayperiod":"AM/PM","dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss",
"field-day-relative+-1":"yesterday","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} 'at' {0}","dayPeriods-format-narrow-am":"a","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"E, M/d","dateTimeFormat-full":"{1} 'at' {0}","field-fri-relative+0":"this Friday","field-fri-relative+1":"next Friday","field-day":"Day","days-format-wide":"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),"field-zone":"Time Zone","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-y":"y",
"months-standAlone-narrow":"JFMAMJJASOND".split(""),"field-year-relative+-1":"last year","field-month-relative+-1":"last month","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","days-format-abbr":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dateFormatItem-yMMMd":"MMM d, y",eraNames:["Before Christ","Anno Domini"],"days-standAlone-narrow":"SMTWTFS".split(""),"dateFormatItem-MMM":"LLL","field-month":"Month","field-tue-relative+0":"this Tuesday",
"dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","field-tue-relative+1":"next Tuesday","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormatItem-EHm":"E HH:mm","field-mon-relative+0":"this Monday","field-mon-relative+1":"next Monday","dateFormat-short":"M/d/yy","dateFormatItem-EHms":"E HH:mm:ss","dateFormatItem-Ehms":"E h:mm:ss a","dayPeriods-format-narrow-noon":"n","field-second":"Second","field-sat-relative+-1":"last Saturday",
"dateFormatItem-yMMMEd":"E, MMM d, y","field-sun-relative+-1":"last Sunday","field-month-relative+0":"this month","field-month-relative+1":"next month","dateFormatItem-Ed":"d E","dateTimeFormats-appendItem-Timezone":"{0} {1}","field-week":"Week","dateFormat-medium":"MMM d, y","field-year-relative+0":"this year","field-week-relative+-1":"last week","field-year-relative+1":"next year","dayPeriods-format-narrow-pm":"p","dateTimeFormat-short":"{1}, {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a",
"dateFormatItem-GyMMM":"MMM y G","field-mon-relative+-1":"last Monday","field-week-relative+0":"this week","field-week-relative+1":"next week"})},"esri/nls/common":function(){define({root:{about:"About",add:"Add",all:"All",apply:"Apply",auth:{logOut:"Log Out",signIn:"Sign In"},back:"Back",cancel:"Cancel",change:"Change",clear:"Clear",close:"Close",collapse:"Collapse",configure:"Configure",control:{pause:"Pause",play:"Play",resume:"Resume",stop:"Stop"},copy:"Copy",create:"Create",cut:"Cut","delete":"Delete",
details:"Details",edit:"Edit",error:"Error",esri:"Esri",exit:"Exit",expand:"Expand",fieldsSummary:"List of attributes and values",find:"Find",form:{no:"No",ok:"OK",password:"Password",submit:"Submit",username:"Username",yes:"Yes"},help:"Help",home:"Home",info:"Info",information:"Information",layer:"Layer",loading:"Loading",maximize:"Maximize",menu:"Menu",more:"More",none:"None",open:"Open",pagination:{first:"First",last:"Last",next:"Next",page:"Page",pageText:"{index} of {total}",previous:"Previous"},
paste:"Paste",preview:"Preview",print:"Print",publish:"Publish",redo:"Redo",refresh:"Refresh",remove:"Remove",rename:"Rename",reset:"Reset",restore:"Restore",save:"Save",search:"Search",searching:"Searching",select:"Select",settings:"Settings",sort:"Sort",share:"Share",title:"Title",untitled:"Untitled",upload:"Upload",undo:"Undo",view:"View",visibility:{hide:"Hide",show:"Show",toggle:"Toggle"},warning:"Warning"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,
lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(a,h,m){function f(a,c,b){if(null!=b.getItemAt||Array.isArray(b)){var g=parseInt(a,10);if(!isNaN(g))return Array.isArray(b)?b[g]:b.getItemAt(g)}g=m.getProperties(b);return c?m.isPropertyDeclared(g,a)?g.get(a):b[a]:m.isPropertyDeclared(g,a)?g.internalGet(a):b[a]}function d(a,c,b,g){if(null==a)return a;
a=f(c[g],b,a);return!a&&g<c.length-1?void 0:g===c.length-1?a:d(a,c,b,g+1)}function c(a,c,b,g){return void 0===b&&(b=!1),void 0===g&&(g=0),"string"==typeof c&&-1===c.indexOf(".")?f(c,b,a):d(a,m.pathToArray(c),b,g)}function n(a,d){return c(a,d,!0)}Object.defineProperty(h,"__esModule",{value:!0});h.valueOf=c;h.get=n;h.exists=function(a,d){return void 0!==c(d,a,!0)};h["default"]=n})},"esri/core/accessorSupport/set":function(){define(["require","exports","./get"],function(a,h,m){function f(a,c,n){if(a&&
c)if("object"==typeof c){n=0;for(var d=Object.getOwnPropertyNames(c);n<d.length;n++){var l=d[n];f(a,l,c[l])}}else if("_"!==c[0]){if(-1!==c.indexOf("."))return c=c.split("."),l=c.splice(c.length-1,1)[0],void f(m["default"](a,c),l,n);a[c]=n}}Object.defineProperty(h,"__esModule",{value:!0});h.set=f;h["default"]=f})},"esri/core/accessorSupport/extensions/computedProperty":function(){define(["require","exports","dojo/has","../utils","../wire"],function(a,h,m,f,d){Object.defineProperty(h,"__esModule",{value:!0});
var c=m("dojo-debug-messages");h.ComputedPropertyExtension={processClassPropertyMetadata:function(a,e,l,b){if(c){var g=e.dependsOn;g&&g.length&&g.map(function(b){return b.split(".")[0]}).forEach(function(c){null==l[c]&&console.error("[accessor] class '"+b+"' - property '"+a+"' depends on unknown property '"+c+"' which hasn't been found during introspection. This can be fix by adding '"+c+"' to the metadata for example.")})}e.dependsOn&&(e.wire=d.create(e.dependsOn,function(b){return f.getProperties(b).propertyInvalidated(a)}))},
instanceCreated:function(a,c,d){for(var b=0;b<d.length;b++){var g=c[d[b]];g.wire&&g.wire(a)}}};h["default"]=h.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/shorthands ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/writer".split(" "),function(a,h,m,f,d,c){function n(a,c,b){var g=a&&a.json;a&&a.json&&a.json.origins&&b&&(a=a.json.origins[b.origin])&&c in a&&
(g=a);return g}Object.defineProperty(h,"__esModule",{value:!0});h.originSpecificReadPropertyDefinition=function(a,c){return n(a,"read",c)};h.originSpecificWritePropertyDefinition=function(a,c){return n(a,"write",c)};h.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,l,b,g){if(m.process(l)){f.process(l);g=(b=Array.isArray(l.type))?l.type[0]:l.type;if(l.json.origins)for(var e in l.json.origins){var n=l.json.origins[e];d.create(g,b,a,n);c.create(g,b,a,n)}d.create(g,b,a,l.json);
c.create(g,b,a,l.json)}}};h["default"]=h.SerializablePropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(a,h){function m(a){"boolean"==typeof a.read?a.read={enabled:a.read}:"function"==typeof a.read?a.read={enabled:!0,reader:a.read}:a.read&&"object"==typeof a.read&&void 0===a.read.enabled&&(a.read.enabled=!0)}function f(a){"boolean"==typeof a.write?a.write={enabled:a.write}:"function"==typeof a.write?a.write=
{enabled:!0,writer:a.write}:a.write&&"object"==typeof a.write&&void 0===a.write.enabled&&(a.write.enabled=!0)}Object.defineProperty(h,"__esModule",{value:!0});h.process=function(a){if(a.json||(a.json={}),m(a.json),f(a.json),a.json.origins)for(var c in a.json.origins)m(a.json.origins[c]),f(a.json.origins[c]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(a,h){Object.defineProperty(h,"__esModule",{value:!0});h.process=
function(a){if(a.json&&a.json.origins){var f=a.json.origins,d={portalItem:["portal-item"],webScene:["web-scene"],webMap:["web-map"],webDocument:["web-scene","web-map"],"web-document":["web-scene","web-map"]};a=function(a){if(f[a]){var c=f[a];d[a].forEach(function(a){f[a]=c});delete f[a]}};for(var c in d)a(c)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","dojo/_base/lang","./type"],function(a,h,m,f){function d(b,a,d,l){if(a)return n(b);
if(e(b)){var g=n(b.prototype.itemType);return function(a,c,d){return(a=g(a,c,d))?new b(a):a}}return c(b)}function c(b){return b.prototype.read?function(a,c,d){return null==a?a:(new b).read(a,d)}:b.fromJSON}function n(b){var a=c(b);return function(b,c,g){return null==b?b:Array.isArray(b)?b.map(function(b){return a(b,null,g)}):[a(b,null,g)]}}function e(b){return f.isCollection(b)&&l(b.prototype.itemType)}function l(b){return!!b&&(!!b.prototype.read||!!b.fromJSON||e(b))}Object.defineProperty(h,"__esModule",
{value:!0});h.create=function(b,a,c,e){(!e.read||!e.read.reader&&!1!==e.read.enabled)&&l(b)&&m.setObject("read.reader",d(b,a,c,e),e)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(a,h){Object.defineProperty(h,"__esModule",{value:!0});h.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require",
"exports","dojo/_base/lang","./type"],function(a,h,m,f){function d(a,d,b,g){m.setObject(b,c(a,g),d)}function c(a,c){return a&&"function"==typeof a.write?a.write({},c):a&&"function"==typeof a.toJSON?a.toJSON():a}function n(a,d,b,g){var e;null===a?e=null:a&&"function"==typeof a.map?(e=a.map(function(b){return c(b,g)}),"function"==typeof e.toArray&&(e=e.toArray())):e=[c(a,g)];m.setObject(b,e,d)}Object.defineProperty(h,"__esModule",{value:!0});h.create=function(a,c,b,g){g.write&&!g.write.writer&&!1!==
g.write.enabled&&(c||f.isCollection(a)?g.write.writer=n:g.write.writer=d)}})},"esri/core/Logger":function(){define(["require","exports","dojo/has"],function(a,h,m){var f={info:0,warn:1,error:2};a=function(){function a(c){void 0===c&&(c={});this.module=c.module||"";this.writer=c.writer||null;this.level=c.level||null;null!=c.enabled&&(this.enabled=!!c.enabled);a._loggers[this.module]=this;c=this.module.lastIndexOf(".");-1!==c&&(this.parent=a.getLogger(this.module.slice(0,c)))}return a.prototype.log=
function(a){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];this._isEnabled()&&this._matchLevel(a)&&(d=this._inheritedWriter())&&d.apply(void 0,[a,this.module].concat(c))},a.prototype.error=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];this.log.apply(this,["error"].concat(a))},a.prototype.warn=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];this.log.apply(this,["warn"].concat(a))},a.prototype.info=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=
arguments[d];this.log.apply(this,["info"].concat(a))},a.prototype.getLogger=function(c){return a.getLogger(this.module+"."+c)},a.getLogger=function(c){var d=a._loggers[c];return d||(d=new a({module:c})),d},a.prototype._parentWithMember=function(a,d){for(var c=this;c&&null==c[a];)c=c.parent;return c?c[a]:d},a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)},a.prototype._consoleWriter=function(a,d){for(var c=[],l=2;l<arguments.length;l++)c[l-2]=arguments[l];
console[a].apply(console,["["+d+"]"].concat(c))},a.prototype._matchLevel=function(a){return f[this._parentWithMember("level","error")]<=f[a]},a.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)},a}();a._loggers={};h=a.getLogger("esri");return m("dojo-debug-messages")?h.level="info":h.level="warn",a})},"esri/core/accessorSupport/introspection":function(){define("require exports dojo/_base/lang ./utils ./metadata ./ensureType ./extensions ./decorators/cast".split(" "),function(a,
h,m,f,d,c,n,e){Object.defineProperty(h,"__esModule",{value:!0});var l=Object.prototype.hasOwnProperty,b=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,g={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},q=/^_(set|get)([a-zA-Z0-9]+)Attr$/;h.processPrototype=function(a){for(var e=a.declaredClass,t=a.properties||{},r=0,p=Object.getOwnPropertyNames(t);r<p.length;r++){var u=p[r],k=t[u],x=typeof k;null==k?d.setPropertyMetadata(a,u,{value:k}):Array.isArray(k)?
d.setPropertyMetadata(a,u,{type:[k[0]],value:null}):"object"===x?f.getProperties(k)||k instanceof Date?d.setPropertyMetadata(a,u,{type:k.constructor,value:k}):d.setPropertyMetadata(a,u,k):"boolean"===x?d.setPropertyMetadata(a,u,{type:Boolean,value:k}):"string"===x?d.setPropertyMetadata(a,u,{type:String,value:k}):"number"===x?d.setPropertyMetadata(a,u,{type:Number,value:k}):"function"===x&&d.setPropertyMetadata(a,u,{type:k,value:null})}r=0;for(p=Object.getOwnPropertyNames(a);r<p.length;r++){var x=
p[r],k=a[x],h=void 0,t=u=void 0;if((h=b.exec(x))?(u=h[1],t=g[h[2]]):(h=q.exec(x))&&(u=h[2][0].toLowerCase()+h[2].substr(1),t=h[1].toLowerCase()),u&&t)u=d.getPropertyMetadata(a,u),m.setObject(t,k,u)}r=0;for(p=Object.getOwnPropertyNames(d.getPropertiesMetadata(a));r<p.length;r++)if(u=p[r],k=d.getPropertyMetadata(a,u),t=k.type,void 0===k.value&&l.call(a,u)&&(k.value=a[u]),!k.cast&&t)switch(t){case Number:k.cast=c.ensureNumber;break;case Boolean:k.cast=c.ensureBoolean;break;case String:k.cast=c.ensureString;
break;case Date:k.cast=c.ensureDate;break;default:Array.isArray(t)?k.cast=c.ensureArray(t[0]):k.cast=c.ensureType(t)}return n.processPrototypeMetadatas(d.getPropertiesMetadata(a),e),d.getPropertiesMetadata(a)};h.processClass=function(b){for(var a=b.prototype,c=a.declaredClass,g=b._meta.bases,l={},q=g.length-1;0<=q;q--)f.merge(l,d.getMetadata(g[q].prototype));var k=l.properties;n.processClassMetadatas(k,c);Object.defineProperty(b,"__accessorMetadata__",{value:k});for(var x={},c=function(b){var a=k[b];
x[b]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(b):a.value},set:function(k){var c=this.__accessor__;if(!c)return void Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:k});if(!Object.isFrozen(this)){if(c.initialized&&a.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+b+"' of "+this.declaredClass);c.set(b,k)}}}},g=0,q=Object.getOwnPropertyNames(k);g<q.length;g++)c(q[g]);if(Object.defineProperties(b.prototype,
x),l.parameters)for(b=0,c=Object.getOwnPropertyNames(l.parameters);b<c.length;b++)g=c[b],q=Object.getOwnPropertyDescriptor(a,g)||{value:a[g]},(q=e.autocastMethod(a,g,q))&&Object.defineProperty(a,g,q);return l}})},"esri/core/accessorSupport/metadata":function(){define(["require","exports"],function(a,h){function m(a){return null!=a.__accessorMetadata__}function f(a){return m(a)&&null!=d(a).properties}function d(a){return a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},
enumerable:!0,configurable:!0,writable:!0}),a.__accessorMetadata__}function c(a){a=d(a);var c=a.properties;return c||(c=a.properties={}),c}function n(a,c){var b=d(a);(a=b.parameters)||(a=b.parameters={});b=a[c];return b||(b=[],a[c]=b),b}Object.defineProperty(h,"__esModule",{value:!0});h.hasMetadata=m;h.hasPropertiesMetadata=f;h.hasPropertyMetadata=function(a,d){return f(a)&&null!=c(a)[d]};h.hasParametersMetadata=function(a,c){return m(a)&&null!=d(a).parameters&&null!=d(a).parameters[c]};h.getMetadata=
d;h.getPropertiesMetadata=c;h.getPropertyMetadata=function(a,d){a=c(a);var b=a[d];return b||(b=a[d]={}),b};h.setPropertyMetadata=function(a,d,b){c(a)[d]=b};h.getParametersMetadata=n;h.getParameterMetadata=function(a,c,b){var g=n(a,c)[b];return g||(n(a,c)[b]=g={index:b}),g}})},"esri/core/accessorSupport/ensureType":function(){define(["require","exports","dojo/has"],function(a,h,m){function f(b,a){return a.isInstanceOf?a.isInstanceOf(b):a instanceof b}function d(b){return b&&b.constructor&&void 0!==
b.constructor._meta}function c(b,a){return null!=a&&b&&!f(b,a)}function n(b,a){return 1===arguments.length?n.bind(null,b):(c(b,a)&&(l&&d(a)?console.warn("Assigning an instance of '"+(a.declaredClass||"unknown")+"' which is not a subclass of '"+(b.prototype&&b.prototype.declaredClass||"unknown")+"'"):a=new b(a)),a)}function e(b,a){return 1===arguments.length?e.bind(null,b):a?Array.isArray(a)?a.map(n.bind(null,b)):[n(b,a)]:a}Object.defineProperty(h,"__esModule",{value:!0});var l=m("dojo-debug-messages");
h.isInstanceOf=f;h.ensureDate=function(b){return null==b?b:new Date(b)};h.ensureBoolean=function(b){return!0===b||!1===b?b:!!b};h.ensureString=function(b){return null==b?b:b.toString()};h.ensureNumber=function(b){return null==b?b:parseFloat(b)};h.isClassedType=d;h.requiresType=c;h.ensureType=n;h.ensureArray=e;h["default"]=n})},"esri/core/accessorSupport/decorators/cast":function(){define(["require","exports","../metadata","../ensureType"],function(a,h,m,f){function d(b){var a="_meta"in b?f.ensureType(b):
b;return function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];return b.push(a),"number"==typeof b[2]?n.apply(this,b):c.apply(this,b)}}function c(b,a,c,d){m.getPropertyMetadata(b,a).cast=d}function n(b,a,c,d){m.getParameterMetadata(b,a,c).cast=d}function e(b){return function(a,c,d){m.getPropertyMetadata(a,b).cast=a[c]}}Object.defineProperty(h,"__esModule",{value:!0});var l=Object.prototype.toString;h.autocastMethod=function(b,a,c){if(m.hasParametersMetadata(b,a)){var g=m.getParametersMetadata(b,
a).filter(function(b){return null!=b.cast});if(!g.length)return void console.warn("Method "+b.declaredClass+"::"+a+" is decorated with @cast but no parameters are decorated");var d=c.value;return c.value=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<g.length;a++){var c=g[a];b[c.index]=c.cast(b[c.index])}return d.apply(this,b)},c}};h.cast=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];return 3!==b.length||"string"!=typeof b[1]?1===b.length&&"[object Function]"===
l.call(b[0])?d(b[0]):1===b.length&&"string"==typeof b[0]?e(b[0]):void 0:void 0}})},"esri/core/accessorSupport/watch":function(){define("require exports ../Scheduler ../ObjectPool ../ArrayPool ../lang ./utils ./get ./wire".split(" "),function(a,h,m,f,d,c,n,e,l){function b(b){k.has(b)?x.splice(x.indexOf(b),1):k.add(b);x.push(b);p||(p=m.schedule(q))}function g(b){if(!b.removed){var a=b.callback,k=b.path,g=b.oldValue,d=b.target,l=e.valueOf(d,b.propertyPath,!0);!c.equals(g,l)&&(b.oldValue=l,a.call(d,l,
g,k,d))}}function q(){if(p){p=null;var b=x;x=u.acquire();k.clear();for(var a=u.acquire(),c=0;c<b.length;c++){var d=b[c];g(d);d.removed&&a.push(d)}for(c=0;c<x.length;c++)d=x[c],d.removed&&(a.push(d),k["delete"](d),x.splice(c,1),--c);for(c=0;c<a.length;c++)r.pool.release(a[c]);u.release(b);u.release(a)}}function t(a,k,c){var g=n.parse(a,k,c,function(a,k,c){var d,p=e.valueOf(a,k,!0),x=l.wire(a,k,function(a,k){return a.__accessor__.destroyed?void g.remove():(d||(d=r.pool.acquire(a,k,p,c),p=null),void b(d))});
return{remove:n.once(function(){x.remove();d&&(d.removed=!0,b(d),d=null);g=x=p=null})}});return g}function w(b,a,k){var g=n.parse(b,a,k,function(b,a,k){var d=e.valueOf(b,a,!0),p=!1;return l.wire(b,a,function(b,a){if(b.__accessor__.destroyed)return void g.remove();if(!p){p=!0;var l=e.valueOf(b,a,!0);!c.equals(d,l)&&k.call(b,l,d,a,b);d=e.valueOf(b,a,!0);p=!1}})});return g}function v(b,a,k,c){return void 0===c&&(c=!1),!b.__accessor__||b.__accessor__.destroyed?{remove:function(){}}:c?w(b,a,k):t(b,a,k)}
Object.defineProperty(h,"__esModule",{value:!0});var r=function(){function b(b,a,k,c){this.target=b;this.path=a;this.oldValue=k;this.callback=c;this.removed=!1;this.propertyPath=n.pathToStringOrArray(a)}return b.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null;this.removed=!0},b}();r.pool=new f(r,!0);var p,u=new d,k=new Set,x=u.acquire();h.dispatchTarget=function(b){for(var a=u.copy(x),c=0;c<a.length;c++){var d=a[c];d.target===b&&(g(d),k["delete"](d),
x.splice(x.indexOf(d),1))}};h.removeTarget=function(b){for(var a=0;a<x.length;a++){var k=x[a];k.target===b&&(k.removed=!0)}};h.dispatch=q;h.watch=v;h["default"]=v})},"esri/core/Scheduler":function(){define(["./ArrayPool","./ObjectPool","./nextTick","./requestAnimationFrame","./now"],function(a,h,m,f,d){var c=["prepare","preRender","render","postRender","update"],n=new h(function(){this.isActive=!0;this.callback=null},!0,function(b){b.isActive=!1;b.callback=null}),e=function(){},l=function(){this.item.isActive=
!1;g.release(this)},b={time:0,deltaTime:0,spendInFrame:0,spendInTask:0},g=new h(function(){this.remove=l;this.item=null},!0,function(b){b.remove=e;b.item=null});h=function(){this._boundDispatch=this._dispatch.bind(this);this.willDispatch=!1;this._queue=a.acquire();this._frameTasks=a.acquire();this._phaseTasks={};this._previousFrameTime=-1;for(var b=0;b<c.length;b++)this._phaseTasks[c[b]]=a.acquire();this._boundAnimationFrame=this._animationFrame.bind(this);this.executing=!1;this._animationFrameRequestId=
null};h.prototype={schedule:function(b){var a=n.acquire();a.callback=b;this._schedule(a);b=g.acquire();return b.item=a,b},_dispatch:function(){for(var b=this._queue;b.length;){var a=b.shift();a.isActive&&(a.isActive=!1,a.callback());!a.isActive}this.willDispatch=!1},_schedule:function(b){this._queue.push(b);this.willDispatch||(this.willDispatch=!0,m(this._boundDispatch))},addFrameTask:function(b){var a={phases:b,paused:!1,pausedAt:0,epoch:-1,dt:0,ticks:-1,removed:!1};this._frameTasks.push(a);for(var g=
0;g<c.length;g++){var e=c[g];b[e]&&this._phaseTasks[e].push(a)}return this._animationFrameRequestId||(this._previousFrameTime=-1,this._requestAnimationFrame()),{isPaused:function(){return a.paused},remove:function(){a.removed=!0},pause:function(){a.paused=!0;a.pausedAt=d()},resume:function(){a.paused=!1;-1!==a.epoch&&(a.epoch+=d()-a.pausedAt)}}},clearFrameTasks:function(){for(var b=0;b<this._frameTasks.length;b++)this._frameTasks[b].removed=!0},_purge:function(){for(var b=0;b<this._frameTasks.length;){var a=
this._frameTasks[b];if(b++,a.removed){this._frameTasks.splice(b-1,1);for(var g=0;g<c.length;g++){var d=c[g];if(a.phases[d]){var d=this._phaseTasks[d],e=d.indexOf(a);-1!==e&&d.splice(e,1)}}}}},_animationFrame:function(a){this._animationFrameRequestId=null;this.executing=!0;0<this._frameTasks.length&&this._requestAnimationFrame();a=d();0>this._previousFrameTime&&(this._previousFrameTime=a);var g=a-this._previousFrameTime;this._previousFrameTime=a;for(var e=0;e<this._frameTasks.length;e++){var l=this._frameTasks[e];
-1!==l.epoch&&(l.dt=g)}for(e=0;e<c.length;e++)for(var g=c[e],p=this._phaseTasks[g],n=0;n<p.length;n++)l=p[n],l.paused||l.removed||(0===e&&l.ticks++,-1===l.epoch&&(l.epoch=a),b.time=a,b.deltaTime=l.dt,b.spendInFrame=d()-a,b.spendInTask=a-l.epoch,l.phases[g].call(l,b));this._purge();this.executing=!1},_requestAnimationFrame:function(){this._animationFrameRequestId=f(this._boundAnimationFrame)}};var q=new h;return h.schedule=function(b){return q.schedule(b)},h.addFrameTask=function(b){return q.addFrameTask(b)},
h.clearFrameTasks=function(){return q.clearFrameTasks()},Object.defineProperty(h,"executing",{get:function(){return q.executing}}),h.instance=q,h})},"esri/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(a,h,m){var f=Array.prototype.splice;a=function(){function a(a,c){void 0===a&&(a=50);void 0===c&&(c=50);this._pool=new m(Array,!1,function(a){return a.length=0},c,a)}return a.prototype.acquire=function(){return this._pool.acquire()},a.prototype.copy=function(a){var c=
this.acquire();return a.unshift(0,0),f.apply(c,a),a.splice(0,2),c},a.prototype.release=function(a){this._pool.release(a)},a.acquire=function(){return d.acquire()},a.copy=function(a){return d.copy(a)},a.release=function(a){return d.release(a)},a}();var d=new a(100);return a})},"esri/core/ObjectPool":function(){define(["require","exports"],function(a,h){var m=function(){return function(){}}();return function(){function a(a,c,n,e,l){void 0===e&&(e=1);void 0===l&&(l=0);this.classConstructor=a;this.acquireFunctionOrWithConstructor=
c;this.releaseFunction=n;this.growthSize=e;!0===c?this.acquireFunction=this._constructorAcquireFunction:"function"==typeof c&&(this.acquireFunction=c);this._pool=Array(l);this._set=new Set;this._initialSize=l;for(a=0;l>a;a++)this._pool[a]=new this.classConstructor;this.growthSize=Math.max(e,1)}return a.prototype.acquire=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var n,c=this.classConstructor||m;if(0===this._pool.length)for(var e=this.growthSize,l=0;e>l;l++)this._pool[l]=
new c;return n=this._pool.shift(),this.acquireFunction?this.acquireFunction.apply(this,[n].concat(a)):n&&n.acquire&&"function"==typeof n.acquire&&n.acquire.apply(n,a),this._set["delete"](n),n},a.prototype.release=function(a){a&&!this._set.has(a)&&(this.releaseFunction?this.releaseFunction(a):a&&a.release&&"function"==typeof a.release&&a.release(),this._pool.push(a),this._set.add(a))},a.prototype.prune=function(){if(!(this._pool.length<=this._initialSize))for(var a;this._initialSize>this._pool.length;)a=
this._pool.shift(),this._set["delete"](a),a.dispose&&"function"==typeof a.dispose&&a.dispose()},a.prototype._constructorAcquireFunction=function(a){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];(e=this.classConstructor).call.apply(e,[a].concat(c));var e},a}()})},"esri/core/nextTick":function(){define(["require","exports"],function(a,h){function m(){if(f.postMessage&&!f.importScripts){var a=f.onmessage,d=!0;return f.onmessage=function(){d=!1},f.postMessage("","*"),f.onmessage=a,d}return!1}
var f=function(){return this}(),d=f.MutationObserver||f.WebKitMutationObserver;return function(){var a;if(f.process&&f.process.nextTick)a=function(b){f.process.nextTick(b)};else if(f.Promise)a=function(b){f.Promise.resolve().then(b)};else if(d){var n=[],e=document.createElement("div");(new d(function(){for(;0<n.length;)n.shift()()})).observe(e,{attributes:!0});a=function(b){n.push(b);e.setAttribute("queueStatus","1")}}else if(m()){var l=[];f.addEventListener("message",function(b){if(b.source===f&&
"esri-nexttick-message"===b.data)for(b.stopPropagation();l.length;)l.shift()()},!0);a=function(b){l.push(b);f.postMessage("esri-nexttick-message","*")}}else a=f.setImmediate?function(b){return f.setImmediate(b)}:function(b){return f.setTimeout(b,0)};return a}()})},"esri/core/requestAnimationFrame":function(){define(["require","exports","./global","dojo/sniff","./now"],function(a,h,m,f,d){var c;a=f("ff");h=f("ie");var n=f("webkit");f=f("opera");var e=d(),l=m.requestAnimationFrame;return l||(c=n&&"webkit"||
a&&"moz"||f&&"o"||h&&"ms",l=m[c+"RequestAnimationFrame"],l||(l=function(b){var a=d(),c=Math.max(0,16-(a-e)),l=m.setTimeout(function(){b(d())},c);return e=a+c,l})),l})},"esri/core/global":function(){define(["require","exports"],function(a,h){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}})},"esri/core/now":function(){define(["require","exports","./global"],function(a,h,m){return function(){var a=m.performance||{};if(a.now)return function(){return a.now()};
if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};if(a.oNow)return function(){return a.oNow()};var d;return d=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now(),function(){return Date.now()-d}}()})},"esri/core/CollectionFlattener":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./accessorSupport/decorators ./Collection ./HandleRegistry".split(" "),
function(a,h,m,f,d,c,n){a=function(a){function d(b){b=a.call(this)||this;return b._handles=new n,b.root=null,b.refresh=b.refresh.bind(b),b.updateCollections=b.updateCollections.bind(b),b}return m(d,a),d.prototype.initialize=function(){var b=this;this._handles.add(this.rootCollectionNames.map(function(a){return b.watch("root."+a,b.updateCollections,!0)}));this.updateCollections()},d.prototype.destroy=function(){this.root=null;this.refresh();this._handles.destroy();this._handles=null},d.prototype.updateCollections=
function(){var b=this;this._collections=this.rootCollectionNames.map(function(a){return b.get("root."+a)}).filter(function(b){return null!=b});this.refresh()},d.prototype.refresh=function(){var b=this._handles;b.remove("collections");this.removeAll();for(var a=this._collections.slice(),c=0,d=this._collections;c<d.length;c++)this._processCollection(a,this,d[c]);for(c=0;c<a.length;c++)b.add(a[c].on("after-changes",this.refresh),"collections")},d.prototype._createNewInstance=function(b){return new c(b)},
d.prototype._processCollection=function(b,a,c){var g=this;c&&(b.push(c),c.forEach(function(c){c&&(a.push(c),g._processCollection(b,a,g.getChildrenFunction(c)))}))},d}(d.declared(c));return f([d.property()],a.prototype,"rootCollectionNames",void 0),f([d.property()],a.prototype,"root",void 0),f([d.property()],a.prototype,"getChildrenFunction",void 0),a=f([d.subclass("esri.core.CollectionFlattener")],a)})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(a,h,m,f,d,c,n,e,l,b){function g(a){for(var b in a)h.hasOwnProperty(b)||(h[b]=a[b])}Object.defineProperty(h,"__esModule",{value:!0});g(m);g(f);g(d);g(c);g(n);g(e);g(l);g(b)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(a,h,m){Object.defineProperty(h,"__esModule",{value:!0});h.aliasOf=function(a){return function(d,c){m.getPropertyMetadata(d,c).aliasOf=a}}})},"esri/core/accessorSupport/decorators/declared":function(){define(["require",
"exports"],function(a,h){Object.defineProperty(h,"__esModule",{value:!0});h.declared=function(a){for(var f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];d=function(){return this||{}};return d.__bases__=[a].concat(f),d}})},"esri/core/accessorSupport/decorators/property":function(){define(["require","exports","dojo/has","../../lang","../metadata"],function(a,h,m,f,d){Object.defineProperty(h,"__esModule",{value:!0});var c=m("dojo-debug-messages");h.property=function(a){return void 0===a&&(a={}),
function(e,l){var b=e.constructor.prototype;if(b===Function.prototype)return void(c&&console.error("[accessor] inappropriate use of @property() on a static field: "+e.name+"."+l+". Accessor does not support static properties."));(e=Object.getOwnPropertyDescriptor(e,l))&&(e.get||e.set)&&(a=f.clone(a),e.set&&(a.set=e.set),e.get&&(a.get=e.get));l=d.getPropertyMetadata(b,l);for(var g in a)b=a[g],Array.isArray(b)?l[g]=(l[g]||[]).concat(b):l[g]=b}};h.propertyJSONMeta=function(a,c,l){a=d.getPropertyMetadata(a.constructor.prototype,
l);a.json||(a.json={});a=a.json;return void 0!==c&&(a.origins||(a.origins={}),a.origins[c]||(a.origins[c]={}),a=a.origins[c]),a}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require","exports","dojo/_base/lang","./property"],function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});h.reader=function(a,c,n){var d,l;return void 0===c||Array.isArray(c)?(l=a,n=c,d=[void 0]):(l=c,d=Array.isArray(a)?a:[a]),function(a,c,e){var b=a.constructor.prototype;d.forEach(function(g){g=
f.propertyJSONMeta(a,g,l);g.read&&"object"!=typeof g.read&&(g.read={});m.setObject("read.reader",b[c],g);n&&(g.read.source=(g.read.source||[]).concat(n))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(a,h){Object.defineProperty(h,"__esModule",{value:!0});h.shared=function(a){return function(f,d){f[d]=a}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(a,h,m,f){function d(a,
c){a.read&&("function"==typeof a.read?c.push(a.read):"object"==typeof a.read&&a.read.reader&&c.push(a.read.reader))}function c(a,c){a.write&&("function"==typeof a.write?c.push(a.write):"object"==typeof a.write&&a.write.writer&&c.push(a.write.writer))}function n(a){var b=[];a=f.getPropertiesMetadata(a.prototype);if(!a)return b;for(var e in a){var l=a[e];l.cast&&b.push(l.cast);l.copy&&b.push(l.copy);if(l=l.json)if(d(l,b),c(l,b),l=l.origins)for(var n in l){var h=l[n];d(h,b);c(h,b)}}return b}function e(a){var b=
{},c=["__bases__"],d=f.getPropertiesMetadata(a.prototype),e=n(a);return Object.getOwnPropertyNames(a.prototype).filter(function(b){return-1!==c.indexOf(b)?!1:d&&d.hasOwnProperty(b)?!1:-1!==e.indexOf(a.prototype[b])?!1:!0}).forEach(function(c){b[c]=a.prototype[c]}),b}function l(a){var b=Object.getOwnPropertyNames(a),c=Object.getPrototypeOf(a.prototype).constructor,d=Object.getOwnPropertyNames(Function);d.push("__bases__");var e=Object.getOwnPropertyNames(c),l={};return b.filter(function(b){return-1!==
d.indexOf(b)?!1:-1===e.indexOf(b)?!0:c[b]!==a[b]?!0:!1}).forEach(function(b){l[b]=a[b]}),l}Object.defineProperty(h,"__esModule",{value:!0});h.subclass=function(a){return function(b){var c=e(b),g=l(b);null!=a&&(c.declaredClass=a);b=m(b.__bases__,c);for(var d in g)b[d]=g[d];return b}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require","exports","dojo/_base/lang","./property"],function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});h.writer=function(a,c){var d;return void 0===
c?(c=a,d=[void 0]):d=Array.isArray(a)?a:[a],function(a,l,b){var g=a.constructor.prototype;d.forEach(function(b){b=f.propertyJSONMeta(a,b,c);b.write&&"object"!=typeof b.write&&(b.write={});m.setObject("write.writer",g[l],b)})}}})},"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./accessorSupport/decorators ./accessorSupport/ensureType ./Accessor ./ArrayPool ./Evented ./ObjectPool ./Scheduler ./lang".split(" "),function(a,
h,m,f,d,c,n,e,l,b,g,q,t){function w(a){return a&&a.isInstanceOf&&a.isInstanceOf(D)?!0:!1}function v(a){return a?w(a)?a.toArray():a.length?Array.prototype.slice.apply(a):[]:[]}function r(a){return a&&a.length?a[0]:void 0}function p(a,b,k,c){b&&b.forEach(function(b,g,d){a.push(b);p(a,k.call(c,b,g,d),k,c)})}a=(function(){return function(){}}(),function(){function a(){this.target=null;this.defaultPrevented=this.cancellable=!1}return a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=
!0)},a.prototype.reset=function(a){this.defaultPrevented=!1;this.item=a},a}());var u=function(){},k=new g(a,!0,function(a){a.item=null;a.target=null}),x=new Set,B=new Set,y=new Set,z=new Map,A=0,D=F=function(a){function b(b){b=a.call(this,b)||this;return b._boundDispatch=b._dispatchColChange.bind(b),b._chgListeners=[],b._notifications=null,b._timer=null,b.length=0,b._items=[],Object.defineProperty(b,"uid",{value:A++}),b}return m(b,a),b.ofType=function(a){if(!a)return F;if(z.has(a))return z.get(a);
var b=F.createSubclass({declaredClass:"esri.core.Collection\x3c"+a.prototype.declaredClass+"\x3e"});return Object.defineProperty(b.prototype,"itemType",{value:a}),z.set(a,b),b},b.prototype.normalizeCtorArgs=function(a){return a?Array.isArray(a)||w(a)?{items:a}:a:{}},Object.defineProperty(b.prototype,"items",{get:function(){return this._items},set:function(a){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(v(a))),this._emitAfterChanges())},enumerable:!0,configurable:!0}),
b.prototype.on=function(a,b){var k;if(Array.isArray(a)?k=a:-1<a.indexOf(",")&&(k=a.split(/\s*,\s*/)),k){var c=[];for(a=0;a<k.length;a++)c.push(this.on(k[a],b));return c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()},c}if("change"===a){var g=this._chgListeners,e={removed:!1,callback:b};return g.push(e),this._notifications&&this._notifications.push({listeners:g.slice(),items:this._items.slice(),changes:[]}),{remove:function(){this.remove=u;e.removed=!0;g.splice(g.indexOf(e),1)}}}return d.after(this,
"on"+a,b,!0)},b.prototype.hasEventListener=function(a){return"change"===a?0<this._chgListeners.length:this.inherited(arguments)},b.prototype.add=function(a,b){if(this._emitBeforeChanges())return this;b=this.getNextIndex(b);return this._splice(b,0,a),this._emitAfterChanges(),this},b.prototype.addMany=function(a,b){if(void 0===b&&(b=this._items.length),this._emitBeforeChanges())return this;b=this.getNextIndex(b);return this._splice.apply(this,[b,0].concat(v(a))),this._emitAfterChanges(),this},b.prototype.removeAll=
function(){if(!this.length||this._emitBeforeChanges())return[];var a=this._splice(0,this.length)||[];return this._emitAfterChanges(),a},b.prototype.clone=function(){return this._createNewInstance({items:this._items.map(t.clone)})},b.prototype.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=a.map(v);return this._createNewInstance({items:(k=this._items).concat.apply(k,a)});var k},b.prototype.drain=function(a,b){if(this.length&&!this._emitBeforeChanges()){for(var k=this._splice(0,
this.length),c=k.length,g=0;c>g;g++)a.call(b,k[g],g,k);this._emitAfterChanges()}},b.prototype.every=function(a,b){return this._items.every(a,b)},b.prototype.filter=function(a,b){var k;return k=2===arguments.length?this._items.filter(a,b):this._items.filter(a),this._createNewInstance({items:k})},b.prototype.find=function(a,b){if("function"!=typeof a)throw new TypeError(a+" is not a function");for(var k=this._items,c=k.length,g=0;c>g;g++){var d=k[g];if(a.call(b,d,g,k))return d}},b.prototype.findIndex=
function(a,b){if("function"!=typeof a)throw new TypeError(a+" is not a function");for(var k=this._items,c=k.length,g=0;c>g;g++)if(a.call(b,k[g],g,k))return g;return-1},b.prototype.flatten=function(a,b){var k=[];return p(k,this,a,b),new F(k)},b.prototype.forEach=function(a,b){for(var k=this._items,c=k.length,g=0;c>g;g++)a.call(b,k[g],g,k)},b.prototype.getItemAt=function(a){return this._items[a]},b.prototype.getNextIndex=function(a){var b=this.length;return a=null==a?b:a,0>a?a=0:a>b&&(a=b),a},b.prototype.includes=
function(a,b){return void 0===b&&(b=0),arguments.length?-1!==this._items.indexOf(a,b):!1},b.prototype.indexOf=function(a,b){return void 0===b&&(b=0),this._items.indexOf(a,b)},b.prototype.join=function(a){return void 0===a&&(a=","),this._items.join(a)},b.prototype.lastIndexOf=function(a,b){return void 0===b&&(b=this.length-1),this._items.lastIndexOf(a,b)},b.prototype.map=function(a,b){a=this._items.map(a,b);return new F({items:a})},b.prototype.reorder=function(a,b){void 0===b&&(b=this.length-1);var k=
this.indexOf(a);if(-1!==k){if(0>b?b=0:b>=this.length&&(b=this.length-1),k!==b){if(this._emitBeforeChanges())return a;this._splice(k,1);this._splice(b,0,a);this._emitAfterChanges()}return a}},b.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var a=r(this._splice(this.length-1,1));return this._emitAfterChanges(),a}},b.prototype.push=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return this._emitBeforeChanges()?this.length:(this._splice.apply(this,[this.length,
0].concat(a)),this._emitAfterChanges(),this.length)},b.prototype.reduce=function(a,b){var k=this._items;return 2===arguments.length?k.reduce(a,b):k.reduce(a)},b.prototype.reduceRight=function(a,b){var k=this._items;return 2===arguments.length?k.reduceRight(a,b):k.reduceRight(a)},b.prototype.remove=function(a){return this.removeAt(this.indexOf(a))},b.prototype.removeAt=function(a){if(!(0>a||a>=this.length||this._emitBeforeChanges()))return a=r(this._splice(a,1)),this._emitAfterChanges(),a},b.prototype.removeMany=
function(a){if(!a||!a.length||this._emitBeforeChanges())return[];a=w(a)?a.toArray():a;for(var b=this._items,k=[],c=a.length,g=0;c>g;g++){var d=b.indexOf(a[g]);if(-1<d){for(var e=g+1,l=d+1,p=Math.min(a.length-e,b.length-l),x=0;p>x&&a[e+x]===b[l+x];)x++;e=1+x;(d=this._splice(d,e))&&0<d.length&&k.push.apply(k,d);g+=e-1}}return this._emitAfterChanges(),k},b.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var a=this._splice(0,this.length);return a&&(a.reverse(),this._splice.apply(this,
[0,0].concat(a))),this._emitAfterChanges(),this},b.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var a=r(this._splice(0,1));return this._emitAfterChanges(),a}},b.prototype.slice=function(a,b){return void 0===a&&(a=0),void 0===b&&(b=this.length),this._createNewInstance({items:this._items.slice(a,b)})},b.prototype.some=function(a,b){return this._items.some(a,b)},b.prototype.sort=function(a){if(!this.length||this._emitBeforeChanges())return this;var b=this._splice(0,this.length);
return arguments.length?b.sort(a):b.sort(),this._splice.apply(this,[0,0].concat(b)),this},b.prototype.splice=function(a,b){for(var k=[],c=2;c<arguments.length;c++)k[c-2]=arguments[c];if(this._emitBeforeChanges())return[];k=this._splice.apply(this,[a,b].concat(k))||[];return this._emitAfterChanges(),k},b.prototype.toArray=function(){return this._items.slice()},b.prototype.toJSON=function(){return this.toArray()},b.prototype.toLocaleString=function(){return this._items.toLocaleString()},b.prototype.toString=
function(){return this._items.toString()},b.prototype.unshift=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return this._emitBeforeChanges()?this.length:(this._splice.apply(this,[0,0].concat(a)),this._emitAfterChanges(),this.length)},b.prototype._createNewInstance=function(a){return new this.constructor(a)},b.prototype._splice=function(a,b){for(var c=this,g=[],d=2;d<arguments.length;d++)g[d-2]=arguments[d];var e,l,p=this._items,x=this.constructor.prototype.itemType;if(!this._notifications&&
this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=q.schedule(this._boundDispatch)),b){if(l=p.splice(a,b),this.hasEventListener("before-remove")){d=k.acquire();d.target=this;d.cancellable=!0;for(var f=0,t=l.length;t>f;f++)e=l[f],d.reset(e),this.emit("before-remove",d),d.defaultPrevented&&(l.splice(f,1),p.splice(a,0,e),a+=1,--f,--t);k.release(d)}if(this.length=this._items.length,
this.hasEventListener("after-remove")){d=k.acquire();d.target=this;d.cancellable=!1;t=l.length;for(f=0;t>f;f++)d.reset(l[f]),this.emit("after-remove",d);k.release(d)}this._notifyChangeEvent(null,l)}if(g&&g.length){if(x&&(g=g.map(n.ensureType.bind(null,x))),this.hasEventListener("before-add")){var w=k.acquire();w.target=this;w.cancellable=!0;g=g.filter(function(a){return w.reset(a),c.emit("before-add",w),!w.defaultPrevented});k.release(w)}if(p.splice.apply(p,[a,0].concat(g)),this.length=this._items.length,
this.hasEventListener("after-add")){d=k.acquire();d.target=this;d.cancellable=!1;p=0;for(x=g;p<x.length;p++)e=x[p],d.reset(e),this.emit("after-add",d);k.release(d)}this._notifyChangeEvent(g,null)}return l},b.prototype._emitBeforeChanges=function(){var a=!1;if(this.hasEventListener("before-changes")){var b=k.acquire();b.target=this;b.cancellable=!0;this.emit("before-changes",b);a=b.defaultPrevented;k.release(b)}return a},b.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var a=
k.acquire();a.target=this;a.cancellable=!1;this.emit("after-changes",a);k.release(a)}},b.prototype._notifyChangeEvent=function(a,b){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:b})},b.prototype._dispatchColChange=function(){if(this._timer&&(this._timer.remove(),this._timer=null),this._notifications){var a=this._notifications;this._notifications=null;for(var b=function(a){var b=a.changes;x.clear();B.clear();y.clear();for(var c=0;c<
b.length;c++){var g=b[c],d=g.added,g=g.removed;if(d)if(0===y.size&&0===B.size)for(var e=0,p=d;e<p.length;e++)d=p[e],x.add(d);else for(e=0,p=d;e<p.length;e++)d=p[e],B.has(d)?(y.add(d),B["delete"](d)):y.has(d)||x.add(d);if(g)if(0===y.size&&0===x.size)for(e=0;e<g.length;e++)d=g[e],B.add(d);else for(e=0;e<g.length;e++)d=g[e],x.has(d)?x["delete"](d):(y["delete"](d),B.add(d))}var n=l.acquire();x.forEach(function(a){n.push(a)});var q=l.acquire();B.forEach(function(a){q.push(a)});var f=k._items,t=a.items,
w=l.acquire();if(y.forEach(function(a){t.indexOf(a)!==f.indexOf(a)&&w.push(a)}),a.listeners&&(n.length||q.length||w.length))for(b={target:k,added:n,removed:q,moved:w},c=a.listeners.length,d=0;c>d;d++)g=a.listeners[d],g.removed||g.callback.call(k,b);l.release(n);l.release(q);l.release(w)},k=this,c=0;c<a.length;c++)b(a[c]);x.clear();B.clear();y.clear()}},b}(c.declared(e,b));D.isCollection=w;f([c.property()],D.prototype,"length",void 0);f([c.property()],D.prototype,"items",null);var D=F=f([c.subclass("esri.core.Collection")],
D),F;return D})},"dojo/aspect":function(){define([],function(){function a(a,c,d,b){var g=a[c],e="around"==c,l;if(e){var n=d(function(){return g.advice(this,arguments)});l={remove:function(){n&&(n=a=d=null)},advice:function(a,b){return n?n.apply(a,b):g.advice(a,b)}}}else l={remove:function(){if(l.advice){var b=l.previous,g=l.next;g||b?(b?b.next=g:a[c]=g,g&&(g.previous=b)):delete a[c];a=d=l.advice=null}},id:a.nextId++,advice:d,receiveArguments:b};if(g&&!e)if("after"==c){for(;g.next&&(g=g.next););g.next=
l;l.previous=g}else"before"==c&&(a[c]=l,l.next=g,g.previous=l);else a[c]=l;return l}function h(c){return function(d,l,b,g){var e=d[l],n;e&&e.target==d||(d[l]=n=function(){for(var a=n.nextId,b=arguments,c=n.before;c;)c.advice&&(b=c.advice.apply(this,b)||b),c=c.next;if(n.around)var g=n.around.advice(this,b);for(c=n.after;c&&c.id<a;){if(c.advice)if(c.receiveArguments)var d=c.advice.apply(this,b),g=d===m?g:d;else g=c.advice.call(this,g,b);c=c.next}return g},e&&(n.around={advice:function(a,b){return e.apply(a,
b)}}),n.target=d,n.nextId=n.nextId||0);d=a(n||e,c,b,g);b=null;return d}}var m,f=h("after"),d=h("before"),c=h("around");return{before:d,around:c,after:f}})},"esri/core/Evented":function(){define(["./declare","dojo/Evented"],function(a,h){return a(h,{declaredClass:"esri.core.Evented",hasEventListener:function(a){return a="on"+a,!(!this[a]||!this[a].after)},emit:function(a,f){return this.hasEventListener(a)?(f=f||{},f.target||(f.target=this),this.inherited(arguments,[a,f])):void 0}})})},"dojo/Evented":function(){define(["./aspect",
"./on"],function(a,h){function m(){}var f=a.after;m.prototype={on:function(a,c){return h.parse(this,a,c,function(a,d){return f(a,"on"+d,c,!0)})},emit:function(a,c){var d=[this];d.push.apply(d,arguments);return h.emit.apply(h,d)}};return m})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(a,h,m){function f(a,b,k,c,g){if(c=b.match(/(.*):(.*)/))return b=c[2],c=c[1],e.selector(c,b).call(g,a,k);m("touch")&&(l.test(b)&&(k=z(k)),m("event-orientationchange")||
"orientationchange"!=b||(b="resize",a=window,k=z(k)));w&&(k=w(k));if(a.addEventListener){var d=b in q,p=d?q[b]:b;a.addEventListener(p,k,d);return{remove:function(){a.removeEventListener(p,k,d)}}}if(u&&a.attachEvent)return u(a,"on"+b,k);throw Error("Target must be an event emitter");}function d(){this.cancelable=!1;this.defaultPrevented=!0}function c(){this.bubbles=!1}if(m("dom")){var n=window.ScriptEngineMajorVersion;m.add("jscript",n&&n()+ScriptEngineMinorVersion()/10);m.add("event-orientationchange",
m("touch")&&!m("android"));m.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);m.add("event-focusin",function(a,b,k){return"onfocusin"in k});m("touch")&&m.add("touch-can-modify-event-delegate",function(){var a=function(){};a.prototype=document.createEvent("MouseEvents");try{var b=new a;b.target=null;return null===b.target}catch(F){return!1}})}var e=function(a,b,k,c){return"function"!=typeof a.on||"function"==typeof b||a.nodeType?
e.parse(a,b,k,f,c,this):a.on(b,k)};e.pausable=function(a,b,k,c){var g;a=e(a,b,function(){if(!g)return k.apply(this,arguments)},c);a.pause=function(){g=!0};a.resume=function(){g=!1};return a};e.once=function(a,b,k,c){var g=e(a,b,function(){g.remove();return k.apply(this,arguments)});return g};e.parse=function(a,b,k,c,g,d){var l;if(b.call)return b.call(d,a,k);b instanceof Array?l=b:-1<b.indexOf(",")&&(l=b.split(/\s*,\s*/));if(l){var p=[];b=0;for(var x;x=l[b++];)p.push(e.parse(a,x,k,c,g,d));p.remove=
function(){for(var a=0;a<p.length;a++)p[a].remove()};return p}return c(a,b,k,g,d)};var l=/^touch/;e.matches=function(a,b,k,c,g){g=g&&"function"==typeof g.matches?g:h.query;c=!1!==c;1!=a.nodeType&&(a=a.parentNode);for(;!g.matches(a,b,k);)if(a==k||!1===c||!(a=a.parentNode)||1!=a.nodeType)return!1;return a};e.selector=function(a,b,k){return function(c,g){function d(b){return e.matches(b,a,c,k,l)}var l="function"==typeof a?{matches:a}:this,p=b.bubble;return p?e(c,p(d),g):e(c,b,function(a){var b=d(a.target);
if(b)return a.selectorTarget=b,g.call(b,a)})}};var b=[].slice,g=e.emit=function(a,k,g){var e=b.call(arguments,2),l="on"+k;if("parentNode"in a){var p=e[0]={},x;for(x in g)p[x]=g[x];p.preventDefault=d;p.stopPropagation=c;p.target=a;p.type=k;g=p}do a[l]&&a[l].apply(a,e);while(g&&g.bubbles&&(a=a.parentNode));return g&&g.cancelable&&g},q=m("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!m("event-stopimmediatepropagation"))var t=function(){this.modified=this.immediatelyStopped=!0},w=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=
t,a.apply(this,arguments)}};if(m("dom-addeventlistener"))e.emit=function(a,b,k){if(a.dispatchEvent&&document.createEvent){var c=(a.ownerDocument||document).createEvent("HTMLEvents");c.initEvent(b,!!k.bubbles,!!k.cancelable);for(var d in k)d in c||(c[d]=k[d]);return a.dispatchEvent(c)&&c}return g.apply(e,arguments)};else{e._fixEvent=function(a,b){a||(a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event);if(!a)return a;try{v&&a.type==v.type&&a.srcElement==v.target&&(a=v)}catch(F){}if(!a.target)switch(a.target=
a.srcElement,a.currentTarget=b||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=k,a.preventDefault=x),a.type){case "keypress":b="charCode"in a?a.charCode:a.keyCode,10==b?(b=0,a.keyCode=13):13==b||27==b?b=0:3==b&&(b=99),a.charCode=b,b=a,b.keyChar=b.charCode?String.fromCharCode(b.charCode):"",b.charOrCode=b.keyChar||b.keyCode}return a};var v,r=function(a){this.handle=a};r.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};
var p=function(a){return function(b){b=e._fixEvent(b,this);var k=a.call(this,b);b.modified&&(v||setTimeout(function(){v=null}),v=b);return k}},u=function(b,k,c){c=p(c);if(((b.ownerDocument?b.ownerDocument.parentWindow:b.parentWindow||b.window||window)!=top||5.8>m("jscript"))&&!m("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var g=b[k];if(!g||!g.listeners){var d=g,g=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
g.listeners=[];b[k]=g;g.global=this;d&&g.listeners.push(_dojoIEListeners_.push(d)-1)}g.listeners.push(b=g.global._dojoIEListeners_.push(c)-1);return new r(b)}return a.after(b,k,c,!0)},k=function(){this.cancelBubble=!0},x=e._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(A){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(m("touch"))var B=function(){},y=window.orientation,z=function(a){return function(b){var k=b.corrected;if(!k){var c=
b.type;try{delete b.type}catch(M){}if(b.type){if(m("touch-can-modify-event-delegate"))B.prototype=b,k=new B;else{var k={},g;for(g in b)k[g]=b[g]}k.preventDefault=function(){b.preventDefault()};k.stopPropagation=function(){b.stopPropagation()}}else k=b,k.type=c;b.corrected=k;if("resize"==c){if(y==window.orientation)return null;y=window.orientation;k.type="orientationchange";return a.call(this,k)}"rotation"in k||(k.rotation=0,k.scale=1);if(window.TouchEvent&&b instanceof TouchEvent){var c=k.changedTouches[0],
d;for(d in c)delete k[d],k[d]=c[d]}}return a.call(this,k)}};return e})},"esri/core/HandleRegistry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./accessorSupport/decorators".split(" "),function(a,h,m,f,d,c){a=function(a){function c(){var c=a.call(this)||this;return c._groups=null,c._groups={},c}return m(c,a),c.prototype.destroy=function(){this.removeAll();this._groups=null},Object.defineProperty(c.prototype,"size",{get:function(){var a=
0,b=this._groups,c;for(c in b)a+=b[c].length;return a},enumerable:!0,configurable:!0}),c.prototype.add=function(a,b){if(!this._isHandle(a)&&!Array.isArray(a))return this;b=this._getOrCreateGroup(b);if(Array.isArray(a))for(var c=0;c<a.length;c++)b.push(a[c]);else b.push(a);return this.notifyChange("size"),this},c.prototype.has=function(a){a=this._groups[a];return!!a&&0<a.length},c.prototype.remove=function(a){if(Array.isArray(a))return a.forEach(this.remove.bind(this)),this;a=this._getGroup(a);if(!a)return this;
for(var b=0;b<a.length;b++)a[b].remove();return a.length=0,this.notifyChange("size"),this},c.prototype.removeAll=function(){var a=this._groups,b;for(b in a)this.remove(b),delete a[b];return this},c.prototype._isHandle=function(a){return a&&!!a.remove},c.prototype._getOrCreateGroup=function(a){return this._getGroup(a)||(this._groups[this._ensureGroupName(a)]=[])},c.prototype._getGroup=function(a){return this._groups[this._ensureGroupName(a)]},c.prototype._ensureGroupName=function(a){return a||"_default_"},
c}(c.declared(d));return f([c.property({readOnly:!0})],a.prototype,"size",null),a=f([c.subclass()],a)})},"esri/support/LayersMixin":function(){define(["../core/Accessor","../core/Collection","../core/Logger"],function(a,h,m){var f=function(a,d){for(var c,l,b=0,g=a.length;g>b;b++){if(c=a.getItemAt(b),c.id===d)return c;if(c.layers&&(l=f(c.layers,d)))return l}},d=m.getLogger("esri.Map");return a.createSubclass({declaredClass:"esri.support.LayersMixin",destroy:function(){this._layersHandle.remove();this._layersHandle=
null;this.layers.drain(this._lyrRemove,this)},properties:{layers:{type:h,get:function(){var a=this._get("layers");return a?a:(a=new h,a.on("after-add",function(a){a=a.item;a.parent&&a.parent!==this&&a.parent.remove(a);a.parent=this;this.layerAdded(a);"elevation"===a.type&&d.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as an operational layer and will therefore be ignored.")}.bind(this)),a.on("after-remove",function(a){a=a.item;a.parent=null;this.layerRemoved(a)}.bind(this)),
a)},set:function(a){var c=this._get("layers");c&&this.remove(c.toArray());this.addMany(a.toArray())}}},findLayerById:function(a){return f(this.layers,a)},add:function(a,d){var c=this.layers;return d=c.getNextIndex(d),a.parent===this?void this.reorder(a,d):void c.add(a,d)},addMany:function(a,d){var c=this.layers;d=c.getNextIndex(d);a.slice().forEach(function(a){return a.parent===this?void this.reorder(a,d):(c.add(a,d),void(d+=1))},this)},remove:function(a){return this.layers.remove(a)},removeMany:function(a){return this.layers.removeMany(a)},
removeAll:function(){return this.layers.removeAll()},reorder:function(a,d){return this.layers.reorder(a,d)},layerAdded:function(a){},layerRemoved:function(a){}})})},"esri/Ground":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/accessorSupport/decorators ./core/Accessor ./core/Collection ./core/collectionUtils ./core/Logger ./core/requireUtils ./layers/Layer ./layers/support/types".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q){var t=n.ofType(g),
w=l.getLogger("esri.Ground");h=v=function(c){function g(a){a=c.call(this)||this;return a.layers=new t,a.layers.on("after-add",function(a){a=a.item;q.isOfType(a,["elevation","base-elevation"])||w.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.")}),a}return m(g,c),Object.defineProperty(g.prototype,"layers",{set:function(a){this._set("layers",e.referenceSetter(a,this._get("layers"),
t))},enumerable:!0,configurable:!0}),g.prototype.queryElevation=function(c,k){var g=this;return b.when(a,"./layers/support/ElevationQuery").then(function(a){a=new a.ElevationQuery;var b=g.layers.filter(function(a){return"elevation"===a.type}).toArray();return a.queryAll(b,c,k)})},g.prototype.clone=function(){return new v({layers:this.layers.slice()})},g}(d.declared(c));f([d.property({type:t}),d.cast(e.castForReferenceSetter)],h.prototype,"layers",null);h=v=f([d.subclass("esri.Ground")],h);var v;return h})},
"esri/core/collectionUtils":function(){define(["require","exports","./Collection"],function(a,h,m){Object.defineProperty(h,"__esModule",{value:!0});h.referenceSetter=function(a,d,c){void 0===c&&(c=m);d||(d=new c);d.removeAll();return a&&(Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(m))?d.addMany(a):d.add(a),d};h.castForReferenceSetter=function(a){return a}})},"esri/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(a,h,m){function f(a,c){if(Array.isArray(c)){var d=
new m;return a(c,function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];d.resolve(a)}),d.promise}return f(a,[c]).then(function(a){return a[0]})}Object.defineProperty(h,"__esModule",{value:!0});h.when=f;h.getAbsMid=function(a,c,n){return c.toAbsMid?c.toAbsMid(a):n.id.replace(/\/[^\/]*$/gi,"/")+a}})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","require"],function(a,h,m,f,d){var c=Object.freeze||function(){},n=function(a,b,c,g,d){for(d=
0;d<a.length;d++)e(a[d],b,c,g)},e=function(a,c,g,d){d=a[c];var e=a.deferred;if(d)try{var p=d(g);0===c?"undefined"!==typeof p&&b(e,c,p):p&&"function"===typeof p.then?(a.cancel=p.cancel,p.then(l(e,1),l(e,2),l(e,0))):b(e,1,p)}catch(u){b(e,2,u)}else b(e,c,g)},l=function(a,c){return function(g){b(a,c,g)}},b=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);break;case 1:a.resolve(c);break;case 2:a.reject(c)}},g=function(a){var b=this.promise=new f,d=this,l,q,p=!1,h=[];this.isResolved=b.isResolved=
function(){return 1===l};this.isRejected=b.isRejected=function(){return 2===l};this.isFulfilled=b.isFulfilled=function(){return!!l};this.isCanceled=b.isCanceled=function(){return p};this.progress=function(a,k){if(l){if(!0===k)throw Error("This deferred has already been fulfilled.");return b}n(h,0,a,null,d);return b};this.resolve=function(a,k){if(l){if(!0===k)throw Error("This deferred has already been fulfilled.");return b}n(h,l=1,q=a,null,d);h=null;return b};var k=this.reject=function(a,k){if(l){if(!0===
k)throw Error("This deferred has already been fulfilled.");return b}n(h,l=2,q=a,void 0,d);h=null;return b};this.then=b.then=function(a,k,c){var d=[c,a,k];d.cancel=b.cancel;d.deferred=new g(function(a){return d.cancel&&d.cancel(a)});l&&!h?e(d,l,q,void 0):h.push(d);return d.deferred.promise};this.cancel=b.cancel=function(b,c){if(!l){a&&(c=a(b),b="undefined"===typeof c?b:c);p=!0;if(!l)return"undefined"===typeof b&&(b=new m),k(b),b;if(2===l&&q===b)return b}else if(!0===c)throw Error("This deferred has already been fulfilled.");
};c(b)};g.prototype.toString=function(){return"[object Deferred]"};d&&d(g);return g})},"dojo/errors/CancelError":function(){define(["./create"],function(a){return a("CancelError",null,null,{dojoType:"cancel",log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(a){return function(h,m,f,d){f=f||Error;var c=function(a){if(f===Error){Error.captureStackTrace&&Error.captureStackTrace(this,c);var d=Error.call(this,a),l;for(l in d)d.hasOwnProperty(l)&&(this[l]=d[l]);this.message=
a;this.stack=d.stack}else f.apply(this,arguments);m&&m.apply(this,arguments)};c.prototype=a.delegate(f.prototype,d);c.prototype.name=h;return c.prototype.constructor=c}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(a){function h(){throw new TypeError("abstract");}return a.extend(function(){},{then:function(a,f,d){h()},cancel:function(a,f){h()},isResolved:function(){h()},isRejected:function(){h()},isFulfilled:function(){h()},isCanceled:function(){h()},always:function(a){return this.then(a,
a)},otherwise:function(a){return this.then(null,a)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"esri/layers/Layer":function(){define("require dojo/Deferred ../core/Accessor ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/urlUtils ../core/requireUtils ../core/promiseUtils ../core/Logger ../config ../kernel ../request ../geometry/SpatialReference ../geometry/Extent".split(" "),function(a,h,m,f,d,
c,n,e,l,b,g,q,t,w,v,r){var p=0,u=g.getLogger("esri.layers.Layer");m=m.createSubclass([d,c,n],{declaredClass:"esri.layers.Layer",properties:{attributionDataUrl:null,credential:{value:null,readOnly:!0,dependsOn:["loaded","parsedUrl"],get:function(){var a=this.loaded&&this.parsedUrl&&t.id&&t.id.findCredential(this.parsedUrl.path)||null;return a&&a.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),a}},fullExtent:new r(-180,-90,180,90,v.WGS84),hasAttributionData:{readOnly:!0,dependsOn:["attributionDataUrl"],
get:function(){return null!=this.attributionDataUrl}},id:{get:function(){return Date.now().toString(16)+"-layer-"+p++}},legendEnabled:!0,listMode:"show",opacity:{value:1,type:Number,cast:function(a){return 0>a?0:1<a?1:a}},parsedUrl:{readOnly:!0,dependsOn:["url"],get:function(){var a=this._get("url");return a?e.urlToObject(a):null}},popupEnabled:!0,refreshInterval:0,attributionVisible:!0,spatialReference:v.WGS84,title:null,token:{dependsOn:["credential.token"],get:function(){var a=this.get("parsedUrl.query.token"),
b=this.get("credential.token");return a||b||null},set:function(a){a?this._override("token",a):this._clearOverride("token")}},type:{type:String,readOnly:!0,value:null,json:{read:!1}},url:{value:null},visible:!0},initialize:function(){this.otherwise(function(a){g.getLogger(this.declaredClass).error("#load()","Failed to load layer (title: '"+this.title+"', id: '"+this.id+"')",a)})},createLayerView:function(k){var c=this.viewModulePaths[k.type];return c?l.when(a,c).then(function(a){return a["default"]&&
(a=a["default"]),new a({layer:this,view:k})}.bind(this)):b.reject(new f("layerview:module-unavailable","No LayerView module available for layer '${layer.declaredClass}' and view type: '${view.type}'",{view:k,layer:this}))},destroyLayerView:function(a){a.destroy()},fetchAttributionData:function(){var a;a=this.attributionDataUrl;this.hasAttributionData&&a?a=w(a,{query:{f:"json"},responseType:"json"}).then(function(a){return a.data}):(a=new h,a.reject(new f("layer:no-attribution-data","Layer does not have attribution data")),
a=a.promise);return a},refresh:function(){this.emit("refresh")}});return m.fromArcGISServerUrl=function(b){"string"==typeof b&&(b={url:b});var k=l.when(a,"./support/arcgisLayers").then(function(a){return a.fromUrl(b)});return k.otherwise(function(a){u.error("#fromArcGISServerUrl({ url: '"+b.url+"'})","Failed to create layer from arcgis server url",a)}),k},m.fromPortalItem=function(b){!b||b.portalItem||"object"!=typeof b||b.declaredClass&&"esri.portal.PortalItem"!==b.declaredClass||(b={portalItem:b});
var k=l.when(a,"../portal/support/portalLayers").then(function(a){return a.fromItem(b)});return k.otherwise(function(a){var k=b&&b.portalItem;u.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+(k&&k.portal&&k.portal.url||q.portalUrl)+"', id: '"+(k&&k.id||"unset")+"')",a)}),k},m})},"esri/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./Message"],function(a,h,m,f){a=function(a){function c(d,e,l){var b=a.call(this,d,e,l)||this;return b instanceof
c?b:new c(d,e,l)}return m(c,a),c}(f);return a.prototype.type="error",a})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,m){a.__proto__=m}||function(a,m){for(var f in m)m.hasOwnProperty(f)&&(a[f]=m[f])};return function(h,m){function f(){this.constructor=h}a(h,m);h.prototype=null===m?Object.create(m):(f.prototype=m.prototype,new f)}}()})},"esri/core/Message":function(){define(["require","exports",
"dojo/string"],function(a,h,m){return function(){function a(d,c,n){this instanceof a&&(this.name=d,this.message=c&&m.substitute(c,n,function(a){return null==a?"":a})||"",this.details=n)}return a.prototype.toString=function(){return"["+this.name+"]: "+this.message},a}()})},"esri/core/Identifiable":function(){define(["./declare"],function(a){var h=0;return a(null,{constructor:function(){Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+h++})}})})},
"esri/core/Loadable":function(){define("./Promise ./Accessor ./Error ./Warning dojo/aspect dojo/_base/lang dojo/Deferred".split(" "),function(a,h,m,f,d,c,n){return a.createSubclass([h],{declaredClass:"esri.core.Loadable","-chains-":c.mixin(h._meta.chains,{load:"after"}),constructor:function(){this._set("loadWarnings",[]);var a=new n;this.addResolvingPromise(a.promise);d.around(this,"load",function(c){return function(){return"not-loaded"===this.loadStatus&&(this.loadStatus="loading",c.apply(this),
a.resolve(),a=null),this}});this.then(function(a){this.loadStatus="loaded"}.bind(this),function(a){this.loadStatus="failed";this.loadError=a}.bind(this))},properties:{loaded:{readOnly:!0,dependsOn:["loadStatus"],get:function(){return"loaded"===this.loadStatus}},loadError:null,loadStatus:"not-loaded",loadWarnings:{type:[f],readOnly:!0}},load:function(){},cancelLoad:function(){return this.isFulfilled()?this:(this.loadError=new m("load:cancelled","Cancelled"),this._promiseProps.cancel(this.loadError),
this)}})})},"esri/core/Promise":function(){define("./declare dojo/promise/all dojo/aspect dojo/Deferred dojo/errors/create ./Scheduler".split(" "),function(a,h,m,f,d,c){var n=function(a){if(!a.isFulfilled()){var b,g,d=a._promiseProps,e=d.resolvingPromises;d.allPromise&&d.allPromise.cancel();var l=new f;for(b=e.length-1;0<=b;b--)g=e[b],g.isCanceled&&g.isCanceled()?e.splice(b,1):g.then(null,null,d.resolver.progress);g=null;(d.allPromise=h(e.concat([l.promise]))).then(function(){d.resolver.resolve(a);
a=d=l=d.allPromise=d.resolvingPromises=null},function(b){if(d.allPromise=null,!b||"cancel"!==b.dojoType){var c=Array.prototype.slice.call(arguments,0);d.resolver.reject(c[0]);a=d=l=d.allPromise=d.resolvingPromises=null}});l&&c.schedule(function(){l&&l.resolve()})}},e=d("CancelError",null,function(a){this.target=a}),l=function(a){return a||new e(this.instance)},b=function(a){this.instance=a;this.canceler=l.bind(this);this.resolver=new f;this.initialized=!1;this.resolvingPromises=[]};b.prototype={canceler:null,
cancel:function(a){if(!this.resolver.isFulfilled()){this.allPromise.cancel();for(var b=this.resolvingPromises.concat(),c=b.length-1;0<=c;c--)b[c].cancel(a);this.resolver.cancel(a)}}};return a(null,{declaredClass:"esri.core.Promise",constructor:function(){Object.defineProperty(this,"_promiseProps",{value:new b(this),enumerable:!1,configurable:!1,writable:!0});var a=m.after(this,"postscript",function(b,c){a.remove();a=null;n(this)},!0)},_promiseProps:null,always:function(a){return this.then(a,a)},then:function(a,
b,c){var d=new f(this._promiseProps.canceler);a=d.then(a,b,c);return this._promiseProps.resolver.then(d.resolve,d.reject,d.progress),a},isResolved:function(){return this._promiseProps.resolver.isResolved()},isRejected:function(){return this._promiseProps.resolver.isRejected()},isFulfilled:function(){return this._promiseProps.resolver.isFulfilled()},otherwise:function(a){return this.then(null,a)},addResolvingPromise:function(a){a&&!this.isFulfilled()&&(this._promiseProps.resolvingPromises.push(a),
n(this))}})})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(a,h,m){var f=a.some;return function(a){var c,d;a instanceof Array?d=a:a&&"object"===typeof a&&(c=a);var e,l=[];if(c){d=[];for(var b in c)Object.hasOwnProperty.call(c,b)&&(l.push(b),d.push(c[b]));e={}}else d&&(e=[]);if(!d||!d.length)return(new h).resolve(e);var g=new h;g.promise.always(function(){e=l=null});var q=d.length;f(d,function(a,b){c||l.push(b);m(a,function(a){g.isFulfilled()||(e[l[b]]=a,
0===--q&&g.resolve(e))},g.reject);return g.isFulfilled()});return g.promise}})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(a,h){return function(m,f,d,c){var n=m&&"function"===typeof m.then,e=n&&m instanceof h;if(!n)return 1<arguments.length?f?f(m):m:(new a).resolve(m);e||(n=new a(m.cancel),m.then(n.resolve,n.reject,n.progress),m=n.promise);return f||d||c?m.then(f,d,c):m}})},"esri/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper",
"./Message"],function(a,h,m,f,d){a=function(a){function c(d,l,b){var g=a.call(this,d,l,b)||this;return g instanceof c?g:new c(d,l,b)}return m(c,a),c}(d);return a.prototype.type="warning",a})},"esri/core/urlUtils":function(){define("require exports dojo/_base/window dojo/_base/lang dojo/_base/url dojo/io-query ../config ./lang ./sniff ./Logger ./Error".split(" "),function(a,h,m,f,d,c,n,e,l,b,g){function q(a){var b={path:null,query:null},k=new d(a),g=a.indexOf("?");return null===k.query?b.path=a:(b.path=
a.substring(0,g),b.query=c.queryToObject(k.query)),k.fragment&&(b.hash=k.fragment,null===k.query&&(b.path=b.path.substring(0,b.path.length-(k.fragment.length+1)))),b}function t(a,b){void 0===a&&(a=!1);void 0===b&&(b=!0);var c,d=L.proxyUrl;"string"==typeof a?(c=Q(a),(a=r(a))&&(d=a.proxyUrl)):c=!!a;if(!d)throw W.warn(P),new g("urlutils:proxy-not-set",P);var e;c&&b&&"https"===h.appUrl.scheme&&(b=G(d),k(b)&&(d=b,e=1));d=q(d);return d._xo=e,d}function w(a){var b=a.indexOf("?");return-1!==b?(ca.path=a.slice(0,
b),ca.query=a.slice(b+1)):(ca.path=a,ca.query=null),ca}function v(a){return a=w(a).path,a=a&&"/"===a[a.length-1]?a:a+"/",a=N(a,!0),a=a.toLowerCase()}function r(a){var b=L.proxyRules;a=v(a);for(var k=0;k<b.length;k++)if(0===a.indexOf(b[k].urlPrefix))return b[k]}function p(a){a=A(a);var b=a.indexOf("/sharing");return 0<b?a.substring(0,b):a.replace(/\/+$/,"")}function u(a,b,k){void 0===k&&(k=!1);a=J(a);b=J(b);return k||a.scheme===b.scheme?a.host.toLowerCase()===b.host.toLowerCase()&&a.port===b.port:
!1}function k(a){return l("esri-phonegap")?!0:l("esri-cors")?null!=x(a):!1}function x(a,b){void 0===b&&(b=!1);"string"==typeof a&&(a=C(a)?J(a):h.appUrl);for(var k=L.corsEnabledServers||[],c=0;c<k.length;c++)for(var d=k[c],g=void 0,g="string"==typeof d?B(d):d.host?B(d.host):[],e=0;e<g.length;e++)if(u(a,g[e]))return b?c:d;return b?-1:null}function B(a){return h.corsServersUrlCache[a]||(M(a)||I(a)?h.corsServersUrlCache[a]=[new d(y(a))]:h.corsServersUrlCache[a]=[new d("http://"+a),new d("https://"+a)]),
h.corsServersUrlCache[a]}function y(a,b,k){void 0===b&&(b=h.appBaseUrl);if(I(a))a=k&&k.preserveProtocolRelative?a:"http"===h.appUrl.scheme&&h.appUrl.authority===F(a).slice(2)?"http:"+a:"https:"+a;else if(!M(a)){k=D;if("/"===a[0]){var c=b.indexOf("//"),c=b.indexOf("/",c+2);b=-1===c?b:b.slice(0,c)}a=k(b,a)}return a}function z(a,b,k){if(void 0===b&&(b=h.appBaseUrl),!C(a))return a;var c=A(a),d=c.toLowerCase();b=A(b).toLowerCase().replace(/\/+$/,"");if((k=k?A(k).toLowerCase().replace(/\/+$/,""):null)&&
0!==b.indexOf(k))return a;for(var g=function(a,b,k){return k=a.indexOf(b,k),-1===k?a.length:k},e=g(d,"/",d.indexOf("//")+2),l=-1;d.slice(0,e+1)===b.slice(0,e)+"/"&&(l=e+1,e!==d.length);)e=g(d,"/",e+1);if(-1===l||k&&l<k.length)return a;a=c.slice(l);c=b.slice(l-1).replace(/[^\/]+/g,"").length;if(0<c)for(d=0;c>d;d++)a="../"+a;else a="./"+a;return a}function A(a){a=a.trim();var b=a=y(a);return a="http"===h.appUrl.scheme&&Q(b)&&u(h.appBaseUrl,b,!0)&&!k(b)?I(b)?"http:"+b:b.replace(V,"http:"):b,a=S(a),a=
a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function D(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(a&&a.length){b=[];if(C(a[0])){var k=a[0],c=k.indexOf("//");b.push(k.slice(0,c+1));X.test(a[0])&&(b[0]+="/");a[0]=k.slice(c+2)}else"/"===a[0][0]&&b.push("");a=a.reduce(function(a,b){return a.concat(b.split("/"))},[]);for(k=0;k<a.length;k++)c=a[k],".."===c&&0<b.length?b.pop():!c||"."===c&&0!==b.length||b.push(c);return b.join("/")}}function F(a){if(H(a))return null;var b=a.indexOf("://");
if(-1===b&&I(a))b=2;else{if(-1===b)return null;b+=3}b=a.indexOf("/",b);return-1===b?a:a.slice(0,b)}function C(a){return I(a)||M(a)}function H(a){return"data:"===a.slice(0,5)}function I(a){return a&&"/"===a[0]&&"/"===a[1]}function M(a){return Y.test(a)}function Q(a){return V.test(a)||"https"===h.appUrl.scheme&&I(a)}function K(a){return ba.test(a)||"http"===h.appUrl.scheme&&I(a)}function G(a){return I(a)?"https:"+a:a.replace(ba,"https:")}function N(a,b){return void 0===b&&(b=!1),I(a)?a.slice(2):(a=
a.replace(Y,""),b&&1<a.length&&"/"===a[0]&&"/"===a[1]&&(a=a.slice(2)),a)}function S(a){var b=n.request.httpsDomains;if(!K(a))return a;var k,c=a.indexOf("/",7);return k=-1===c?a:a.slice(0,c),k=k.toLowerCase().slice(7),"http"===h.appUrl.scheme&&k===h.appUrl.authority?a:(("https"===h.appUrl.scheme&&k===h.appUrl.authority||b&&b.some(function(a){return k===a||e.endsWith(k,"."+a)}))&&(a=G(a)),a)}function J(a){return"string"==typeof a?new d(y(a)):(a.scheme||(a.scheme=h.appUrl.scheme),a)}Object.defineProperty(h,
"__esModule",{value:!0});a=m.global;var W=b.getLogger("esri.core.urlUtils"),L=n.request,P="esri/config: esriConfig.request.proxyUrl is not set. If making a request to a CORS-enabled\n server, please push the domain into esriConfig.request.corsEnabledServers.",Y=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,ba=/^\s*http:/i,V=/^\s*https:/i,X=/^\s*file:/i;h.appUrl=new d(a.location);h.corsServersUrlCache={};h.appBaseUrl=function(){var a=h.appUrl.path,a=a.substring(0,a.lastIndexOf(a.split("/")[a.split("/").length-
1]));return""+(h.appUrl.scheme+"://"+h.appUrl.host+(null!=h.appUrl.port?":"+h.appUrl.port:""))+a}();h.urlToObject=q;h.getProxyUrl=t;h.addProxy=function(a){var b,k,d=r(a);d?(k=w(d.proxyUrl),b=k.path,k=k.query?c.queryToObject(k.query):null):L.forceProxy&&(k=t(),b=k.path,k=k.query);b&&(d=q(a),a=b+"?"+d.path,(b=c.objectToQuery(f.mixin(k||{},d.query)))&&(a=a+"?"+b));return a};var ca={path:"",query:""};h.addProxyRule=function(a){a={proxyUrl:a.proxyUrl,urlPrefix:v(a.urlPrefix)};for(var b=L.proxyRules,k=
a.urlPrefix,c=b.length,d=0;d<b.length;d++){var g=b[d].urlPrefix;if(0===k.indexOf(g)){if(k.length===g.length)return-1;c=d;break}0===g.indexOf(k)&&(c=d+1)}return b.splice(c,0,a),c};h.getProxyRule=r;h.hasSamePortal=function(a,b){return a=p(a),b=p(b),N(a)===N(b)};h.hasSameOrigin=u;h.canUseXhr=k;h.getCorsConfig=x;h.makeAbsolute=y;h.makeRelative=z;h.normalize=A;h.join=D;h.getOrigin=F;h.isAbsolute=C;h.isDataProtocol=H;var Z=/^data:(.*?)(;base64)?,(.*)$/;h.dataComponents=function(a){return(a=a.match(Z))?
{mediaType:a[1],isBase64:!!a[2],data:a[3]}:null};h.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};h.isProtocolRelative=I;h.hasProtocol=M;h.read=function(a,b){b=b&&b.url&&b.url.path;return a&&b?y(a,b,{preserveProtocolRelative:!0}):a};h.write=function(a,b){if(!a)return a;!C(a)&&b&&b.blockedRelativeUrls&&b.blockedRelativeUrls.push(a);var k=y(a);if(b){var c=b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.rootPath||b.url&&b.url.path;c&&(k=
z(k,c,c),k!==a&&b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.writtenUrls.push(k))}return k};h.isSVG=function(a){return ia.test(a)};var ia=/(^data:image\/svg|\.svg$)/i})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(a,h,m){var f={global:a.global,doc:a.global.document||null,body:function(d){d=d||a.doc;return d.body||d.getElementsByTagName("body")[0]},setContext:function(d,c){a.global=f.global=d;a.doc=f.doc=c},withGlobal:function(d,c,n,e){var l=a.global;try{return a.global=
f.global=d,f.withDoc.call(null,d.document,c,n,e)}finally{a.global=f.global=l}},withDoc:function(d,c,n,e){var l=f.doc,b=m("quirks"),g=m("ie"),q,t,w;try{return a.doc=f.doc=d,a.isQuirks=m.add("quirks","BackCompat"==a.doc.compatMode,!0,!0),m("ie")&&(w=d.parentWindow)&&w.navigator&&(q=parseFloat(w.navigator.appVersion.split("MSIE ")[1])||void 0,(t=d.documentMode)&&5!=t&&Math.floor(q)!=t&&(q=t),a.isIE=m.add("ie",q,!0,!0)),n&&"string"==typeof c&&(c=n[c]),c.apply(n,e||[])}finally{a.doc=f.doc=l,a.isQuirks=
m.add("quirks",b,!0,!0),a.isIE=m.add("ie",g,!0,!0)}}};h.mixin(a,f);return f})},"dojo/_base/url":function(){define(["./kernel"],function(a){var h=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,m=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,f=function(){for(var a=arguments,c=[a[0]],n=1;n<a.length;n++)if(a[n]){var e=new f(a[n]+""),c=new f(c[0]+"");if(""==e.path&&!e.scheme&&!e.authority&&!e.query)null!=e.fragment&&(c.fragment=e.fragment),e=c;else if(!e.scheme&&(e.scheme=
c.scheme,!e.authority&&(e.authority=c.authority,"/"!=e.path.charAt(0)))){for(var c=(c.path.substring(0,c.path.lastIndexOf("/")+1)+e.path).split("/"),l=0;l<c.length;l++)"."==c[l]?l==c.length-1?c[l]="":(c.splice(l,1),l--):0<l&&(1!=l||""!=c[0])&&".."==c[l]&&".."!=c[l-1]&&(l==c.length-1?(c.splice(l,1),c[l-1]=""):(c.splice(l-1,2),l-=2));e.path=c.join("/")}c=[];e.scheme&&c.push(e.scheme,":");e.authority&&c.push("//",e.authority);c.push(e.path);e.query&&c.push("?",e.query);e.fragment&&c.push("#",e.fragment)}this.uri=
c.join("");a=this.uri.match(h);this.scheme=a[2]||(a[1]?"":null);this.authority=a[4]||(a[3]?"":null);this.path=a[5];this.query=a[7]||(a[6]?"":null);this.fragment=a[9]||(a[8]?"":null);null!=this.authority&&(a=this.authority.match(m),this.user=a[3]||null,this.password=a[4]||null,this.host=a[6]||a[7],this.port=a[9]||null)};f.prototype.toString=function(){return this.uri};return a._Url=f})},"dojo/io-query":function(){define(["./_base/lang"],function(a){var h={};return{objectToQuery:function(m){var f=encodeURIComponent,
d=[],c;for(c in m){var n=m[c];if(n!=h[c]){var e=f(c)+"\x3d";if(a.isArray(n))for(var l=0,b=n.length;l<b;++l)d.push(e+f(n[l]));else d.push(e+f(n))}}return d.join("\x26")},queryToObject:function(h){var f=decodeURIComponent;h=h.split("\x26");for(var d={},c,n,e=0,l=h.length;e<l;++e)if(n=h[e],n.length){var b=n.indexOf("\x3d");0>b?(c=f(n),n=""):(c=f(n.slice(0,b)),n=f(n.slice(b+1)));"string"==typeof d[c]&&(d[c]=[d[c]]);a.isArray(d[c])?d[c].push(n):d[c]=n}return d}}})},"esri/config":function(){define(["require",
"exports","dojo/_base/window"],function(a,h,m){return{screenDPI:96,geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:null,kmlServiceUrl:null,portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{corsDetection:!(m.global&&m.global.cordova),corsDetectionTimeout:15,corsEnabledServers:"basemaps.arcgis.com basemapsbeta.arcgis.com basemapsbetadev.arcgis.com basemapsdev.arcgis.com demographics1.arcgis.com demographics2.arcgis.com demographics3.arcgis.com demographics4.arcgis.com demographics5.arcgis.com demographics6.arcgis.com dev.arcgis.com devext.arcgis.com elevation3d.arcgis.com elevation3ddev.arcgis.com js.arcgis.com jsdev.arcgis.com jsqa.arcgis.com geocode.arcgis.com geocodedev.arcgis.com geocodeqa.arcgis.com geoenrich.arcgis.com geoenrichdev.arcgis.com geoenrichqa.arcgis.com localvtiles.arcgis.com qaext.arcgis.com server.arcgisonline.com services.arcgis.com services.arcgisonline.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com services6.arcgis.com services7.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com static.arcgis.com staticqa.arcgis.com staticdev.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com tilesdevext.arcgis.com tilesqa.arcgis.com utility.arcgis.com utility.arcgisonline.com www.arcgis.com".split(" "),
corsStatus:{},forceProxy:!1,maxUrlLength:2E3,maxWorkers:5,proxyRules:[],proxyUrl:null,timeout:6E4,useCors:"with-credentials",useWorkers:"on-request",httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},useSpatialIndex:(m.global&&m.global.Worker,!1)}})},"esri/core/sniff":function(){define(["dojo/_base/window","dojo/sniff","../kernel"],function(a,h,m){function f(){if(w)return w;
w={available:!1,version:0,supportsHighPrecisionFragment:!1};var a;try{if(!t.WebGLRenderingContext)throw 0;a=document.createElement("canvas")}catch(k){return w}for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=null,d=0;d<b.length;++d){try{c=a.getContext(b[d])}catch(k){}if(c)break}a=c;if(!a)return w;b=a.getParameter(a.VERSION);if(!b)return w;if(b=b.match(/^WebGL\s+([\d.]*)/))w.version=parseFloat(b[1]),w.available=.94<=w.version,b=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT),
w.supportsHighPrecisionFragment=b&&0<b.precision,w.supportsVertexShaderSamplers=0<a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w.supportsElementIndexUint=null!=a.getExtension("OES_element_index_uint");return w}if(h("host-node"))return h;var d,c=h("ff"),n=h("ie"),e=void 0===n&&7<=h("trident"),l=h("webkit"),b=h("opera"),g=h("chrome"),q=h("safari"),t=a.global;a=navigator.userAgent;if(d=a.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i),d&&h.add("esri-iphone",parseFloat(d[2].replace("_","."))),d=a.match(/Android\s+(\d+\.\d+)/i),
d&&h.add("esri-android",parseFloat(d[1])),d=a.match(/Fennec\/(\d+\.\d+)/i),d&&h.add("esri-fennec",parseFloat(d[1])),0<=a.indexOf("BlackBerry")&&0<=a.indexOf("WebKit")&&h.add("esri-blackberry",1),h.add("esri-touch",h("esri-iphone")||h("esri-android")||h("esri-blackberry")||6<=h("esri-fennec")||(c||l)&&document.createTouch?!0:!1),d=a.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),d&&h.add("esri-mobile",d),h.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled),
m._getDOMAccessor=function(a){var d="";return c?d="Moz":l?d="Webkit":n?d="ms":b&&(d="O"),d+a.charAt(0).toUpperCase()+a.substr(1)},h.add("esri-phonegap",!!t.cordova),h.add("esri-cors",h("esri-phonegap")||"XMLHttpRequest"in t&&"withCredentials"in new XMLHttpRequest),h.add("esri-canvas-svg-support",function(){return!(h("trident")||h("ie"))}),h("host-webworker"))return h;h.add("esri-workers",t.Worker?!0:!1);h.add("esri-transforms",e||9<=n||3.5<=c||4<=g||3.1<=q||10.5<=b||3.2<=h("esri-iphone")||2.1<=h("esri-android"));
h.add("esri-transitions",e||10<=n||4<=c||4<=g||3.1<=q||10.5<=b||3.2<=h("esri-iphone")||2.1<=h("esri-android"));h.add("esri-transforms3d",e||10<=c||12<=g||4<=q||3.2<=h("esri-iphone")||3<=h("esri-android"));h.add("esri-url-encodes-apostrophe",function(){var a=t.document.createElement("a");return a.href="?'",-1<a.href.indexOf("?%27")});3>h("esri-android")&&(h.add("esri-transforms",!1,!1,!0),h.add("esri-transitions",!1,!1,!0),h.add("esri-transforms3d",!1,!1,!0));m._css=function(a){var d=h("esri-transforms3d");
void 0!==a&&null!==a?d=a:d&&(g||q&&!h("esri-iphone"))&&(d=!1);var e=d?"translate3d(":"translate(",f=d?g?",-1px)":",0px)":")",k=d?"scale3d(":"scale(",x=d?",1)":")",t=d?"rotate3d(0,0,1,":"rotate(",w=d?"matrix3d(":"matrix(",m=d?",0,0,":",",v=d?",0,0,0,0,1,0,":",",D=d?",0,1)":")";return{names:{transition:l&&"-webkit-transition"||c&&"MozTransition"||b&&"OTransition"||n&&"msTransition"||"transition",transform:l&&"-webkit-transform"||c&&"MozTransform"||b&&"OTransform"||n&&"msTransform"||"transform",transformName:l&&
"-webkit-transform"||c&&"-moz-transform"||b&&"-o-transform"||n&&"-ms-transform"||"transform",origin:l&&"-webkit-transform-origin"||c&&"MozTransformOrigin"||b&&"OTransformOrigin"||n&&"msTransformOrigin"||"transformOrigin",endEvent:l&&"webkitTransitionEnd"||c&&"transitionend"||b&&"oTransitionEnd"||n&&"MSTransitionEnd"||"transitionend"},translate:function(a,b){return e+a+"px,"+b+"px"+f},scale:function(a){return k+a+","+a+x},rotate:function(a){return t+a+"deg)"},matrix:function(a){return a.m?(a=a.m,w+
a[0].toFixed(10)+","+a[1].toFixed(10)+m+a[2].toFixed(10)+","+a[3].toFixed(10)+v+a[4].toFixed(10)+(c?"px,":",")+a[5].toFixed(10)+(c?"px":"")+D):w+a.xx.toFixed(10)+","+a.yx.toFixed(10)+m+a.xy.toFixed(10)+","+a.yy.toFixed(10)+v+a.dx.toFixed(10)+(c?"px,":",")+a.dy.toFixed(10)+(c?"px":"")+D},matrix3d:function(a){return a=a.m,"matrix3d("+a[0].toFixed(10)+","+a[1].toFixed(10)+",0,0,"+a[2].toFixed(10)+","+a[3].toFixed(10)+",0,0,0,0,1,0,"+a[4].toFixed(10)+","+a[5].toFixed(10)+",0,1)"},getScaleFromMatrix:function(a){if(!a)return 1;
a=a.toLowerCase();var b=-1<a.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(a.substring(b.length,a.indexOf(",")))}}};var w;return h.add("esri-webgl",function(){return!!f().available}),h.add("esri-webgl-high-precision-fragment",function(){return!!f().supportsHighPrecisionFragment}),h.add("esri-webgl-vertex-shader-samplers",function(){return!!f().supportsVertexShaderSamplers}),h.add("esri-webgl-element-index-uint",function(){return!!f().supportsElementIndexUint}),h})},"esri/kernel":function(){define(["require",
"./core/requireUtils","dojo/main","dojo/has"],function(a,h,m,f){(function(){var a=m.config,c=a.has&&void 0!==a.has["config-deferredInstrumentation"],n=a.has&&void 0!==a.has["config-useDeferredInstrumentation"];void 0!==a.useDeferredInstrumentation||c||n||(f.add("config-deferredInstrumentation",!1,!0,!0),f.add("config-useDeferredInstrumentation",!1,!0,!0))})();return{version:"4.4",workerMessages:{request:function(d){return h.when(a,"./request").then(function(a){var c=d.options||{};return c.responseType=
"array-buffer",a(d.url,c)}).then(function(a){return{data:{data:a.data,ssl:a.ssl},buffers:[a.data]}}).otherwise(function(a){throw{code:a.code,message:a.message,ssl:a.ssl};})}}}})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color require ./has!host-browser?./_base/browser require".split(" "),function(a,h,m,f,d,c,n,e){n.isDebug&&m(["./_firebug/firebug"]);return a})},
"dojo/ready":function(){define(["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(a,h,m,f,d){var c=0,n=[],e=0;h=function(){c=1;a._postLoad=a.config.afterOnLoad=!0;l()};var l=function(){if(!e){for(e=1;c&&(!f||0==f._Q.length)&&(m.idle?m.idle():1)&&n.length;){var a=n.shift();try{a()}catch(t){if(t.info=t.message,m.signal)m.signal("error",t);else throw t;}}e=0}};m.on&&m.on("idle",l);f&&(f._onQEmpty=l);var b=a.ready=a.addOnLoad=function(b,c,g){var e=d._toArray(arguments);
"number"!=typeof b?(g=c,c=b,b=1E3):e.shift();g=g?d.hitch.apply(a,e):function(){c()};g.priority=b;for(e=0;e<n.length&&b>=n[e].priority;e++);n.splice(e,0,g);l()},g=a.config.addOnLoad;if(g)b[d.isArray(g)?"apply":"call"](a,g);f?f(h):h();return b})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(a,h,m,f,d,c,n,e){function l(b,d,g,k,l){k=e.hitch(g,k);if(!b||!b.addEventListener&&!b.attachEvent)return f.after(b||a.global,
d,k,!0);"string"==typeof d&&"on"==d.substring(0,2)&&(d=d.substring(2));b||(b=a.global);if(!l)switch(d){case "keypress":d=w;break;case "mouseenter":d=c.enter;break;case "mouseleave":d=c.leave}return h(b,d,k,l)}function b(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}n.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(p){}return 0==
a.charCode&&!n("opera")});var g={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},q=n("mac")?"metaKey":"ctrlKey",t=function(a,c){c=e.mixin({},a,c);b(c);c.preventDefault=function(){a.preventDefault()};c.stopPropagation=function(){a.stopPropagation()};return c},w;w=n("events-keypress-typed")?function(a,b){var c=h(a,"keydown",function(a){var k=a.keyCode,c=13!=k&&32!=k&&(27!=k||!n("ie"))&&(48>k||90<k)&&(96>k||111<k)&&(186>k||192<k)&&(219>k||222<k)&&229!=
k;if(c||a.ctrlKey){c=c?0:k;if(a.ctrlKey){if(3==k||13==k)return b.call(a.currentTarget,a);c=95<c&&106>c?c-48:!a.shiftKey&&65<=c&&90>=c?c+32:g[c]||c}k=t(a,{type:"keypress",faux:!0,charCode:c});b.call(a.currentTarget,k);if(n("ie"))try{a.keyCode=k.keyCode}catch(z){}}}),k=h(a,"keypress",function(a){var k=a.charCode;a=t(a,{charCode:32<=k?k:0,faux:!0});return b.call(this,a)});return{remove:function(){c.remove();k.remove()}}}:n("opera")?function(a,b){return h(a,"keypress",function(a){var k=a.which;3==k&&
(k=99);k=32>k&&!a.shiftKey?0:k;a.ctrlKey&&!a.shiftKey&&65<=k&&90>=k&&(k+=32);return b.call(this,t(a,{charCode:k}))})}:function(a,c){return h(a,"keypress",function(a){b(a);return c.call(this,a)})};var v={_keypress:w,connect:function(a,b,c,k,d){var g=arguments,e=[],p=0;e.push("string"==typeof g[0]?null:g[p++],g[p++]);var x=g[p+1];e.push("string"==typeof x||"function"==typeof x?g[p++]:null,g[p++]);for(x=g.length;p<x;p++)e.push(g[p]);return l.apply(this,e)},disconnect:function(a){a&&a.remove()},subscribe:function(a,
b,c){return m.subscribe(a,e.hitch(b,c))},publish:function(a,b){return m.publish.apply(m,[a].concat(b))},connectPublisher:function(a,b,c){var k=function(){v.publish(a,arguments)};return c?v.connect(b,c,k):v.connect(b,k)},isCopyKey:function(a){return a[q]}};v.unsubscribe=v.disconnect;e.mixin(a,v);return v})},"dojo/topic":function(){define(["./Evented"],function(a){var h=new a;return{publish:function(a,f){return h.emit.apply(h,arguments)},subscribe:function(a,f){return h.on.apply(h,arguments)}}})},"dojo/_base/event":function(){define(["./kernel",
"../on","../has","../dom-geometry"],function(a,h,m,f){if(h._fixEvent){var d=h._fixEvent;h._fixEvent=function(a,c){(a=d(a,c))&&f.normalizeEvent(a);return a}}var c={fix:function(a,c){return h._fixEvent?h._fixEvent(a,c):a},stop:function(a){m("dom-addeventlistener")||a&&a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a=a||window.event,a.cancelBubble=!0,h._preventDefault.call(a))}};a.fixEvent=c.fix;a.stopEvent=c.stop;return c})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window",
"./dom","./dom-style"],function(a,h,m,f){function d(a,c,d,e,l,n){n=n||"px";a=a.style;isNaN(c)||(a.left=c+n);isNaN(d)||(a.top=d+n);0<=e&&(a.width=e+n);0<=l&&(a.height=l+n)}function c(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function n(a){return"border-box"==e.boxModel||"table"==a.tagName.toLowerCase()||c(a)}var e={boxModel:"content-box"};a("ie")&&(e.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");
e.getPadExtents=function(a,c){a=m.byId(a);var b=c||f.getComputedStyle(a),d=f.toPixelValue;c=d(a,b.paddingLeft);var g=d(a,b.paddingTop),e=d(a,b.paddingRight);a=d(a,b.paddingBottom);return{l:c,t:g,r:e,b:a,w:c+e,h:g+a}};e.getBorderExtents=function(a,c){a=m.byId(a);var b=f.toPixelValue,d=c||f.getComputedStyle(a);c="none"!=d.borderLeftStyle?b(a,d.borderLeftWidth):0;var g="none"!=d.borderTopStyle?b(a,d.borderTopWidth):0,e="none"!=d.borderRightStyle?b(a,d.borderRightWidth):0;a="none"!=d.borderBottomStyle?
b(a,d.borderBottomWidth):0;return{l:c,t:g,r:e,b:a,w:c+e,h:g+a}};e.getPadBorderExtents=function(a,c){a=m.byId(a);var b=c||f.getComputedStyle(a);c=e.getPadExtents(a,b);a=e.getBorderExtents(a,b);return{l:c.l+a.l,t:c.t+a.t,r:c.r+a.r,b:c.b+a.b,w:c.w+a.w,h:c.h+a.h}};e.getMarginExtents=function(a,c){a=m.byId(a);var b=c||f.getComputedStyle(a),d=f.toPixelValue;c=d(a,b.marginLeft);var g=d(a,b.marginTop),e=d(a,b.marginRight);a=d(a,b.marginBottom);return{l:c,t:g,r:e,b:a,w:c+e,h:g+a}};e.getMarginBox=function(b,
c){b=m.byId(b);c=c||f.getComputedStyle(b);c=e.getMarginExtents(b,c);var d=b.offsetLeft-c.l,g=b.offsetTop-c.t,l=b.parentNode,n=f.toPixelValue;8==a("ie")&&!a("quirks")&&l&&(l=f.getComputedStyle(l),d-="none"!=l.borderLeftStyle?n(b,l.borderLeftWidth):0,g-="none"!=l.borderTopStyle?n(b,l.borderTopWidth):0);return{l:d,t:g,w:b.offsetWidth+c.w,h:b.offsetHeight+c.h}};e.getContentBox=function(b,c){b=m.byId(b);var d=c||f.getComputedStyle(b);c=b.clientWidth;var g,l=e.getPadExtents(b,d);g=e.getBorderExtents(b,
d);var d=b.offsetLeft+l.l+g.l,n=b.offsetTop+l.t+g.t;c?g=b.clientHeight:(c=b.offsetWidth-g.w,g=b.offsetHeight-g.h);if(8==a("ie")&&!a("quirks")){var h=b.parentNode,p=f.toPixelValue;h&&(h=f.getComputedStyle(h),d-="none"!=h.borderLeftStyle?p(b,h.borderLeftWidth):0,n-="none"!=h.borderTopStyle?p(b,h.borderTopWidth):0)}return{l:d,t:n,w:c-l.w,h:g-l.h}};e.setContentSize=function(a,c,l){a=m.byId(a);var b=c.w;c=c.h;n(a)&&(l=e.getPadBorderExtents(a,l),0<=b&&(b+=l.w),0<=c&&(c+=l.h));d(a,NaN,NaN,b,c)};var l={l:0,
t:0,w:0,h:0};e.setMarginBox=function(b,g,q){b=m.byId(b);var t=q||f.getComputedStyle(b);q=g.w;var h=g.h,v=n(b)?l:e.getPadBorderExtents(b,t),t=e.getMarginExtents(b,t);if(a("webkit")&&c(b)){var r=b.style;0<=q&&!r.width&&(r.width="4px");0<=h&&!r.height&&(r.height="4px")}0<=q&&(q=Math.max(q-v.w-t.w,0));0<=h&&(h=Math.max(h-v.h-t.h,0));d(b,g.l,g.t,q,h)};e.isBodyLtr=function(a){a=a||h.doc;return"ltr"==(h.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};e.docScroll=function(b){b=b||h.doc;var c=h.doc.parentWindow||
h.doc.defaultView;return"pageXOffset"in c?{x:c.pageXOffset,y:c.pageYOffset}:(c=a("quirks")?h.body(b):b.documentElement)&&{x:e.fixIeBiDiScrollLeft(c.scrollLeft||0,b),y:c.scrollTop||0}};e.getIeDocumentElementOffset=function(a){return{x:0,y:0}};e.fixIeBiDiScrollLeft=function(b,c){c=c||h.doc;var d=a("ie");if(d&&!e.isBodyLtr(c)){var g=a("quirks");c=g?h.body(c):c.documentElement;var l=h.global;6==d&&!g&&l.frameElement&&c.scrollHeight>c.clientHeight&&(b+=c.clientLeft);return 8>d||g?b+c.clientWidth-c.scrollWidth:
-b}return b};e.position=function(b,c){b=m.byId(b);var d=h.body(b.ownerDocument),g=b.getBoundingClientRect(),g={x:g.left,y:g.top,w:g.right-g.left,h:g.bottom-g.top};9>a("ie")&&(g.x-=a("quirks")?d.clientLeft+d.offsetLeft:0,g.y-=a("quirks")?d.clientTop+d.offsetTop:0);c&&(b=e.docScroll(b.ownerDocument),g.x+=b.x,g.y+=b.y);return g};e.getMarginSize=function(a,c){a=m.byId(a);c=e.getMarginExtents(a,c||f.getComputedStyle(a));a=a.getBoundingClientRect();return{w:a.right-a.left+c.w,h:a.bottom-a.top+c.h}};e.normalizeEvent=
function(b){"layerX"in b||(b.layerX=b.offsetX,b.layerY=b.offsetY);if(!("pageX"in b)){var c=b.target,c=c&&c.ownerDocument||document,d=a("quirks")?c.body:c.documentElement;b.pageX=b.clientX+e.fixIeBiDiScrollLeft(d.scrollLeft||0,c);b.pageY=b.clientY+(d.scrollTop||0)}};return e})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(a,h,m){if(7>=a("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(c){}var f={};a("ie")?f.byId=function(a,d){if("string"!=typeof a)return a;
var c=d||h.doc;d=a&&c.getElementById(a);if(!d||d.attributes.id.value!=a&&d.id!=a){c=c.all[a];if(!c||c.nodeName)c=[c];for(var l=0;d=c[l++];)if(d.attributes&&d.attributes.id&&d.attributes.id.value==a||d.id==a)return d}else return d}:f.byId=function(a,d){return("string"==typeof a?(d||h.doc).getElementById(a):a)||null};m=m.global.document||null;a.add("dom-contains",!(!m||!m.contains));f.isDescendant=a("dom-contains")?function(a,d){return!(!(d=f.byId(d))||!d.contains(f.byId(a)))}:function(a,d){try{for(a=
f.byId(a),d=f.byId(d);a;){if(a==d)return!0;a=a.parentNode}}catch(e){}return!1};a.add("css-user-select",function(a,d,e){if(!e)return!1;a=e.style;d=["Khtml","O","Moz","Webkit"];e=d.length;var c="userSelect";do if("undefined"!==typeof a[c])return c;while(e--&&(c=d[e]+"UserSelect"));return!1});var d=a("css-user-select");f.setSelectable=d?function(a,n){f.byId(a).style[d]=n?"":"none"}:function(a,d){a=f.byId(a);var c=a.getElementsByTagName("*"),l=c.length;if(d)for(a.removeAttribute("unselectable");l--;)c[l].removeAttribute("unselectable");
else for(a.setAttribute("unselectable","on");l--;)c[l].setAttribute("unselectable","on")};return f})},"dojo/dom-style":function(){define(["./sniff","./dom","./_base/window"],function(a,h,m){function f(a,b,c){b=b.toLowerCase();if("auto"==c){if("height"==b)return a.offsetHeight;if("width"==b)return a.offsetWidth}if("fontweight"==b)switch(c){case 700:return"bold";default:return"normal"}b in g||(g[b]=q.test(b));return g[b]?n(a,c):c}var d,c={};d=a("webkit")?function(a){var b;if(1==a.nodeType){var c=a.ownerDocument.defaultView;
b=c.getComputedStyle(a,null);!b&&a.style&&(a.style.display="",b=c.getComputedStyle(a,null))}return b||{}}:a("ie")&&(9>a("ie")||a("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){if(1===a.nodeType){var b=a.ownerDocument.defaultView;return(b.opener?b:m.global.window).getComputedStyle(a,null)}return{}};c.getComputedStyle=d;var n;n=a("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var c=a.style,d=a.runtimeStyle,
g=c.left,k=d.left;d.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(x){b=0}c.left=g;d.left=k;return b}:function(a,b){return parseFloat(b)||0};c.toPixelValue=n;var e=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(r){return b?{}:null}},l=9>a("ie")||10>a("ie")&&a("quirks")?function(a){try{return e(a).Opacity/100}catch(v){return 1}}:function(a){return d(a).opacity},b=9>a("ie")||10>a("ie")&&a("quirks")?function(a,c){""===c&&(c=1);var d=100*c;1===c?(a.style.zoom=
"",e(a)&&(a.style.filter=a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(a.style.zoom=1,e(a)?e(a,1).Opacity=d:a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+d+")",e(a,1).Enabled=!0);if("tr"==a.tagName.toLowerCase())for(a=a.firstChild;a;a=a.nextSibling)"td"==a.tagName.toLowerCase()&&b(a,c);return c}:function(a,b){return a.style.opacity=b},g={left:!0,top:!0},q=/margin|padding|width|height|max|min|offset/,t={cssFloat:1,styleFloat:1,"float":1};
c.get=function(a,b){var d=h.byId(a),g=arguments.length;if(2==g&&"opacity"==b)return l(d);b=t[b]?"cssFloat"in d.style?"cssFloat":"styleFloat":b;var e=c.getComputedStyle(d);return 1==g?e:f(d,b,e[b]||d.style[b])};c.set=function(a,d,g){var e=h.byId(a),l=arguments.length,k="opacity"==d;d=t[d]?"cssFloat"in e.style?"cssFloat":"styleFloat":d;if(3==l)return k?b(e,g):e.style[d]=g;for(var x in d)c.set(a,x,d[x]);return c.getComputedStyle(e)};return c})},"dojo/mouse":function(){define(["./_base/kernel","./on",
"./has","./dom","./_base/window"],function(a,h,m,f,d){function c(a,d){var e=function(b,c){return h(b,a,function(a){if(d)return d(a,c);if(!f.isDescendant(a.relatedTarget,b))return c.call(this,a)})};e.bubble=function(b){return c(a,function(a,c){var d=b(a.target),g=a.relatedTarget;if(d&&d!=(g&&1==g.nodeType&&b(g)))return c.call(d,a)})};return e}m.add("dom-quirks",d.doc&&"BackCompat"==d.doc.compatMode);m.add("events-mouseenter",d.doc&&"onmouseenter"in d.doc.createElement("div"));m.add("events-mousewheel",
d.doc&&"onmousewheel"in d.doc);d=m("dom-quirks")&&m("ie")||!m("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(a,c){return a.button&c},isLeft:function(a){return a.button&1},isMiddle:function(a){return a.button&4},isRight:function(a){return a.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(a,c){return a.button==c},isLeft:function(a){return 0==a.button},isMiddle:function(a){return 1==a.button},isRight:function(a){return 2==a.button}};a.mouseButtons=d;a=m("events-mousewheel")?
"mousewheel":function(a,c){return h(a,"DOMMouseScroll",function(a){a.wheelDelta=-a.detail;c.call(this,a)})};return{_eventHandler:c,enter:c("mouseover"),leave:c("mouseout"),wheel:a,isLeft:d.isLeft,isMiddle:d.isMiddle,isRight:d.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(a,h,m){if(!m("host-browser"))return m;a._name="browser";h.mixin(a,{isBrowser:!0,isFF:m("ff"),isIE:m("ie"),isKhtml:m("khtml"),isWebKit:m("webkit"),isMozilla:m("mozilla"),isMoz:m("mozilla"),
isOpera:m("opera"),isSafari:m("safari"),isChrome:m("chrome"),isMac:m("mac"),isIos:m("ios"),isAndroid:m("android"),isWii:m("wii"),isQuirks:m("quirks"),isAir:m("air")});return m})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(a,h){return a.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:h("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,
HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:h("mac")&&!h("air")?
h("safari")?91:224:17}})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(a,h,m,f,d,c,n){var e=function(){},l=Object.freeze||function(){},b=a.Deferred=function(a){function g(a){if(v)throw Error("This deferred has already been resolved");w=a;v=!0;n()}function n(){for(var a;!a&&x;){var b=x;x=x.next;if(a=b.progress==e)v=!1;var k=u?b.error:b.resolved;d("config-useDeferredInstrumentation")&&u&&h.instrumentRejected&&
h.instrumentRejected(w,!!k);if(k)try{var g=k(w);g&&"function"===typeof g.then?g.then(c.hitch(b.deferred,"resolve"),c.hitch(b.deferred,"reject"),c.hitch(b.deferred,"progress")):(k=a&&void 0===g,a&&!k&&(u=g instanceof Error),b.deferred[k&&u?"reject":"resolve"](k?w:g))}catch(C){b.deferred.reject(C)}else u?b.deferred.reject(w):b.deferred.resolve(w)}}var w,v,r,p,u,k,x,B=this.promise=new m;this.isResolved=B.isResolved=function(){return 0==p};this.isRejected=B.isRejected=function(){return 1==p};this.isFulfilled=
B.isFulfilled=function(){return 0<=p};this.isCanceled=B.isCanceled=function(){return r};this.resolve=this.callback=function(a){this.fired=p=0;this.results=[a,null];g(a)};this.reject=this.errback=function(a){u=!0;this.fired=p=1;d("config-useDeferredInstrumentation")&&h.instrumentRejected&&h.instrumentRejected(a,!!x);g(a);this.results=[null,a]};this.progress=function(a){for(var b=x;b;){var k=b.progress;k&&k(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,e);return this};B.then=this.then=
function(a,c,d){var g=d==e?this:new b(B.cancel);a={resolved:a,error:c,progress:d,deferred:g};x?k=k.next=a:x=k=a;v&&n();return g.promise};var y=this;B.cancel=this.cancel=function(){if(!v){var b=a&&a(y);v||(b instanceof Error||(b=new f(b)),b.log=!1,y.reject(b))}r=!0};l(B)};c.extend(b,{addCallback:function(b){return this.addCallbacks(c.hitch.apply(a,arguments))},addErrback:function(b){return this.addCallbacks(null,c.hitch.apply(a,arguments))},addBoth:function(b){var d=c.hitch.apply(a,arguments);return this.addCallbacks(d,
d)},fired:-1});b.when=a.when=n;return b})},"dojo/_base/json":function(){define(["./kernel","../json"],function(a,h){a.fromJson=function(a){return eval("("+a+")")};a._escapeString=h.stringify;a.toJsonIndentStr="\t";a.toJson=function(m,f){return h.stringify(m,function(a,c){return c&&(a=c.__json__||c.json,"function"==typeof a)?a.call(c):c},f&&a.toJsonIndentStr)};return a})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(a,h,m,f){var d=a.Color=function(a){a&&
this.setColor(a)};d.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:f.transparentColor||[0,0,0,0]};h.extend(d,{r:255,g:255,b:255,a:1,_set:function(a,d,e,l){this.r=a;this.g=d;this.b=e;this.a=l},setColor:function(a){h.isString(a)?d.fromString(a,this):h.isArray(a)?
d.fromArray(a,this):(this._set(a.r,a.g,a.b,a.a),a instanceof d||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+m.map(["r","g","b"],function(a){a=this[a].toString(16);return 2>a.length?"0"+a:a},this).join("")},toCss:function(a){var c=this.r+", "+this.g+", "+this.b;return(a?"rgba("+c+", "+this.a:"rgb("+c)+")"},toString:function(){return this.toCss(!0)}});d.blendColors=
a.blendColors=function(a,n,e,l){var b=l||new d;m.forEach(["r","g","b","a"],function(c){b[c]=a[c]+(n[c]-a[c])*e;"a"!=c&&(b[c]=Math.round(b[c]))});return b.sanitize()};d.fromRgb=a.colorFromRgb=function(a,n){return(a=a.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&d.fromArray(a[1].split(/\s*,\s*/),n)};d.fromHex=a.colorFromHex=function(a,n){var c=n||new d,l=4==a.length?4:8,b=(1<<l)-1;a=Number("0x"+a.substr(1));if(isNaN(a))return null;m.forEach(["b","g","r"],function(d){var g=a&b;a>>=l;c[d]=4==l?17*
g:g});c.a=1;return c};d.fromArray=a.colorFromArray=function(a,n){n=n||new d;n._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));isNaN(n.a)&&(n.a=1);return n.sanitize()};d.fromString=a.colorFromString=function(a,n){var c=d.named[a];return c&&d.fromArray(c,n)||d.fromRgb(a,n)||d.fromHex(a,n)};return d})},"esri/core/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all","./Error"],function(a,h,m,f,d){function c(a){if(a){if("function"!=typeof a.forEach){var d=Object.keys(a),
l=d.map(function(b){return a[b]});return c(l).then(function(a){var b={};return d.forEach(function(c,d){return b[c]=a[d]}),b})}var b=new m,g=[],n=a.length;return 0===n&&b.resolve(g),a.forEach(function(a){var c={promise:a};g.push(c);a.then(function(a){c.value=a}).otherwise(function(a){c.error=a}).then(function(){--n;0===n&&b.resolve(g)})}),b.promise}}Object.defineProperty(h,"__esModule",{value:!0});h.all=function(a){return f(a)};h.eachAlways=c;h.create=function(a,c){var d=new m(c);return a(function(a){return void 0===
a&&(a=null),d.resolve(a)},d.reject),d.promise};h.reject=function(a){var c=new m;return c.reject(a),c.promise};h.resolve=function(a){void 0===a&&(a=null);var c=new m;return c.resolve(a),c.promise};h.after=function(a,c){void 0===c&&(c=null);var d=0,b=new m(function(){d&&(clearTimeout(d),d=0)});return d=setTimeout(function(){b.resolve(c)},a),b.promise};h.timeout=function(a,c,l){var b=0,g=new m(a.cancel);return a.then(function(a){g.isFulfilled()||(g.resolve(a),b&&(clearTimeout(b),b=0))}),a.otherwise(function(a){g.isFulfilled()||
(g.reject(a),b&&(clearTimeout(b),b=0))}),b=setTimeout(function(){var a=l||new d("promiseUtils:timeout","The wrapped promise did not resolve within "+c+" ms");g.reject(a)},c),g.promise};h.wrapCallback=function(a){var c=!1,d=new m(function(){return c=!0});return a(function(a){c||d.resolve(a)}),d.promise}})},"esri/request":function(){define("require dojo/_base/config dojo/Deferred dojo/_base/lang dojo/_base/url dojo/request dojo/io-query dojo/when ./kernel ./config ./core/global ./core/sniff ./core/lang ./core/urlUtils ./core/deferredUtils ./core/promiseUtils dojo/has!host-browser?dojo/io/script dojo/has!host-webworker?./core/workers/request".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u){function k(a){var b=n.objectToQuery(a.content);if(b&&(a.url+=(-1===a.url.indexOf("?")?"?":"\x26")+b),2E3<a.url.length)return r.reject(f.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."}));var k=new Image;a.allowImageDataAccess&&(a.withCredentials?k.crossOrigin="use-credentials":k.crossOrigin="anonymous");var c=!1,d=new m(function(a){c=!0;k.onload=k.onerror=k.onabort=null;k.src=""}),b=function(a){k.onload=
k.onerror=k.onabort=null;c||d.reject(a)};return k.onload=function(){k.onload=k.onerror=k.onabort=null;c||d.resolve(this)},k.onerror=b,k.onabort=b,k.alt="",k.src=a.url,d.promise}function x(a){return a=new d(a),(a.host+(a.port?":"+a.port:"")).toLowerCase()}function B(a,b){var d=!!a.useProxy,g=a.method||"auto",e=t.isDefined(a.crossOrigin)?a.crossOrigin:H.useCors;a=f.mixin({},a);a._ssl&&(a.url=a.url.replace(/^http:/i,"https:"));var x=a.content,u=a.url;a.load=function(a){var b;return a&&(a.error?(b=f.mixin(Error(),
a.error),b.log=!!h.isDebug):"error"===a.status&&(b=f.mixin(Error(),a),b.log=!!h.isDebug),b&&!t.isDefined(b.httpCode)&&(b.httpCode=b.code)),b||a};a.error=function(a,b){return b&&b.xhr&&b.xhr.abort(),a instanceof Error||(a=f.mixin(Error(),a)),a.log=!!h.isDebug,a};a._token&&(a.content=a.content||{},a.content.token=a._token);var r,v=0;u&&(r=n.objectToQuery(x),v=r.length+u.length+1,q("esri-url-encodes-apostrophe")&&(v=r.replace(/'/g,"%27").length+u.length+1));a.timeout=t.isDefined(a.timeout)?a.timeout:
H.timeout;a.handleAs=a.handleAs||"json";try{var B,y,F=e&&w.canUseXhr(a.urlObj)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(a.url),z=w.hasSameOrigin(a.urlObj,w.appUrl)||F,A="post"===g||!!a.body||v>H.maxUrlLength,D=!z&&-1!==a.handleAs.indexOf("json")&&a.callbackParamName&&!a.body,I=!!w.getProxyRule(a.url)||H.forceProxy||d||("image"!==a.handleAs||a.allowImageDataAccess)&&(!D||A)&&!z;if((q("host-browser")||q("host-webworker"))&&I)if(B=w.getProxyUrl(u,e),y=B.path,B._xo&&(F=!0),!A&&y.length+1+
v>H.maxUrlLength&&(A=!0),a.url=y+"?"+u,A)a.content=f.mixin(B.query||{},x);else{var ka=n.objectToQuery(f.mixin(B.query||{},x));ka&&(a.url+=(-1===u.indexOf("?")?"?":"\x26")+ka);a.content=null}if((q("host-browser")||q("host-webworker"))&&D&&!A)return!t.isDefined(a.isAsync)&&4>q("ff")&&(a.isAsync=!0),p.get(C?C(a):a);var Q=a.headers;if(!q("host-browser")&&!q("host-webworker")||Q&&Q.hasOwnProperty("X-Requested-With")||(Q=a.headers=Q||{},Q["X-Requested-With"]=null),q("host-browser")&&b){var K=a.content&&
a.content.token;K&&b.set("token",K);a.contentType=!1}if(F&&!a.hasOwnProperty("withCredentials")&&"with-credentials"===H.useCors){var d=I?y:u,G=w.getCorsConfig(d);if(G&&G.hasOwnProperty("withCredentials"))G.withCredentials&&(a.withCredentials=!0);else if(l.id){var za=l.id.findServerInfo(d);za&&za.webTierAuth&&(a.withCredentials=!0)}}return a=C?C(a):a,"image"===a.handleAs?k(a):A?(a.body?(a.data=b||a.body,a.query=a.content):a.data=a.content,delete a.body,delete a.content,!I&&q("safari")&&(a.url+=(-1===
a.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+M++),c.post(a.url,a)):(a.query=a.content,delete a.content,c.get(a.url,a))}catch(Fa){return b=new m,b.reject(a.error(Fa)),b}}function y(a){var b=H.corsStatus,k=w.getCorsConfig(a,!0);return-1<k&&H.corsEnabledServers.splice(k,1),b[x(a)]=1,k}function z(a){var b=H.corsStatus;try{var k=x(a.url);if(H.corsDetection&&H.useCors&&q("esri-cors")&&a.url&&-1!==a.url.toLowerCase().indexOf("/rest/services")&&!w.hasSameOrigin(a.urlObj,w.appUrl)&&!w.canUseXhr(a.urlObj)){if(b[k])return b[k];
var d=new m;b[k]=d.promise;var g=a.url.substring(0,a.url.toLowerCase().indexOf("/rest/")+6)+"info";return c.get(g,{query:{f:"json"},handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*H.corsDetectionTimeout}).then(function(b){b?(w.canUseXhr(a.url)||H.corsEnabledServers.push(k),d.resolve()):d.reject()},function(a){d.reject()}),d.promise}}catch(W){}}function A(b,k,d,g){function e(a){if(a._pendingDfd=B(d,C),!a._pendingDfd){a.ioArgs=a._pendingDfd&&a._pendingDfd.ioArgs;var b=Error("Deferred object is missing");
return b.log=!!h.isDebug,a.reject(b),void(a._pendingDfd=null)}var k=!!a._pendingDfd.response;(a._pendingDfd.response||a._pendingDfd).then(function(a){if(!k||!a.data)return a;var b=a.getHeader("Content-Type");if(b&&(b=b.toLowerCase(),-1===b.indexOf("text/plain")&&-1===b.indexOf("application/json")))return a;b=a.data;if(b instanceof ArrayBuffer&&750>=b.byteLength)b=new Blob([b]);else if(!(b instanceof Blob&&750>=b.size))return a;var c=new m,d=new FileReader;return d.readAsText(b),d.onloadend=function(){if(!d.error)try{var b=
JSON.parse(d.result);b.error&&(Object.isExtensible(a)||(a=f.mixin({},a)),a._jsonData=b)}catch(pa){}c.resolve(a)},c.promise}).then(function(b){var c=k?b.data:b,d=k?b.getHeader.bind(b):Q,e=null;if(a.ioArgs=a._pendingDfd&&a._pendingDfd.ioArgs,c)if(b=k&&b._jsonData||c,b.error?(e=f.mixin(Error(),b.error),e.log=!!h.isDebug):"error"===b.status&&(e=f.mixin(Error(),b),e.log=!!h.isDebug),e&&!t.isDefined(e.httpCode)&&(e.httpCode=e.code),e)throw e;a.resolve({data:c,url:g.url,requestOptions:g.requestOptions,getHeader:d});
a._pendingDfd=null}).otherwise(function(b){var k,c,e;if(b&&(k=b.code,c=b.subcode,e=b.messageCode,e=e&&e.toUpperCase()),b&&403==k&&(4==c||b.message&&-1<b.message.toLowerCase().indexOf("ssl")&&-1===b.message.toLowerCase().indexOf("permission"))){if(!d._ssl)return d._ssl=d._sslFromServer=!0,void A(a,!0,d,g)}else if(b&&415==b.status){if(y(d.url),!d._err415)return d._err415=1,void A(a,!0,d,g)}else if(l.id&&l.id._errorCodes&&-1!==l.id._errorCodes.indexOf(k)&&!l.id._isPublic(d.url)&&!n&&(403!=k||I&&-1===
I.indexOf(e)&&(!t.isDefined(c)||2==c&&d._token)))return void D(a,d,g,b);a.ioArgs=a._pendingDfd&&a._pendingDfd.ioArgs;a.reject(b);a._pendingDfd=null})}var p=d.body,n=d.disableIdentityLookup,u=d._preLookup,r=!1;if(q("esri-workers")&&!1!==H.useWorkers)if(!0===d.useWorkers||!0===H.useWorkers)r=!0;else if(d.workerOptions){var v=d.workerOptions;(v.callback||v.worker&&v.worker.worker instanceof Worker)&&(r=!0)}var C=null;((v=p instanceof FormData)||p&&p.elements)&&(C=v?p:new FormData(p));var F=!!(-1!==d.url.toLowerCase().indexOf("token\x3d")||
d.content&&d.content.token||C&&C.get("token"));if(!k){b.then(function(a){if((/\/sharing\/rest\/accounts\/self/i.test(d.url)||/\/sharing\/rest\/portals\/self/i.test(d.url))&&!F&&!d._token&&a.user&&a.user.username){var b=H.corsEnabledServers,k=w.getCorsConfig(d.url,!0),c={host:x(d.url),withCredentials:!0};if(-1===k)b.push(c);else{var g=b[k];"object"==typeof g?g.withCredentials=!0:b.splice(k,1,c)}}if(b=d._credential){var e;(k=(k=l.id.findServerInfo(b.server))&&k.owningSystemUrl)&&(k=k.replace(/\/?$/,
"/sharing"),e=l.id.findCredential(k,b.userId),e&&-1===l.id._getIdenticalSvcIdx(k,e)&&e.resources.splice(0,0,k))}return a}).always(function(a){delete d._credential;a&&(a.ssl=!!d._ssl)});var z=d.load,Z=d.error;z&&b.then(function(a){var k=b._pendingDfd,k=k&&k.ioArgs;return z.call(k&&k.args,a,k)});Z&&b.then(null,function(a){var k=b._pendingDfd,k=k&&k.ioArgs;return Z.call(k&&k.args,a,k)})}!l.id||F||d._token||l.id._isPublic(d.url)||n&&!u||(k=l.id.findCredential(d.url))&&(d._token=k.token,d._ssl=k.ssl);
return r?d.workerOptions&&d.workerOptions.worker?(c=d.workerOptions.worker,e(b)):a(["./workers/RequestClient"],function(a){if(d.workerOptions){var k=d.workerOptions;c=a.getClient(k.callback,k.cbFunction)}else c=a.getClient();e(b)}):e(b),b.promise}function D(a,b,k,c){a._pendingDfd=l.id.getCredential(b.url,{token:b._token,error:c});a._pendingDfd.then(function(c){b._token=c.token;b._credential=c;b._ssl=b._sslFromServer||c.ssl;A(a,!0,b,k)}).otherwise(function(b){a.reject(b);a._pendingDfd=null})}function F(a,
b){if(u&&g.invokeStaticMessage)return u.execute(a,b);"string"!=typeof a&&console.error("esri/request: the first parameter should be a url string");var k=f.mixin({},b),c={url:a,requestOptions:f.mixin({},b)};if(k.content=k.query,delete k.query,k.preventCache=!!k.cacheBust,delete k.cacheBust,k.handleAs=k.responseType,delete k.responseType,"array-buffer"===k.handleAs&&(k.handleAs="arraybuffer"),"image"===k.handleAs){if(q("host-webworker")||q("host-node"))return r.reject(f.mixin(Error(),{message:"The responseType 'image' is not supported in Web Workers or Node environment."}));
k.preventCache&&(k.content=k.content||{},k.content["request.preventCache"]=Date.now());k.method="auto"}k.url=w.normalize(a);k.urlObj=new d(k.url);var l=v.makeDeferredCancellingPending();return e(z(k)).always(function(){A(l,!1,k,c)}),l.promise}var C,H=b.request,I=["COM_0056","COM_0057"],M=0,Q=function(){return null};return F._makeRequest=B,F._processRequest=A,F._disableCors=y,F._detectCors=z,F.setRequestPreCallback=function(a){C=a},F})},"dojo/request":function(){define(["./request/default!"],function(a){return a})},
"dojo/request/default":function(){define(["exports","require","../has"],function(a,h,m){var f=m("config-requestProvider"),d;if(m("host-browser")||m("host-webworker"))d="./xhr";f||(f=d);a.getPlatformDefaultId=function(){return d};a.load=function(a,n,e,l){h(["platform"==a?d:f],function(a){e(a)})}})},"esri/core/deferredUtils":function(){define(["dojo/Deferred"],function(a){var h={makeDeferredCancellingPending:function(){var m={},f=h._dfdCanceller.bind(null,m),f=new a(f);return m.deferred=f,f},_dfdCanceller:function(a){a=
a.deferred?a.deferred:a;a.canceled=!0;var f=a._pendingDfd;a.isResolved()||!f||f.isResolved()||f.cancel();a._pendingDfd=null},_fixDfd:function(a){var f=a.then;return a.then=function(a,c,n){if(a){var d=a;a=function(a){return a&&a._argsArray?d.apply(null,a):d(a)}}return f.call(this,a,c,n)},a},_resDfd:function(a,f,d){var c=f.length;1===c?d?a.reject(f[0]):a.resolve(f[0]):1<c?(f._argsArray=!0,a.resolve(f)):a.resolve()}};return h})},"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),
function(a,h,m,f,d,c,n){a=e=function(a){function c(b){b=a.call(this)||this;return b.latestWkid=null,b.wkid=null,b.wkt=null,b}return m(c,a),c.prototype.normalizeCtorArgs=function(a){return a&&"object"==typeof a?a:(b={},b["string"==typeof a?"wkt":"wkid"]=a,b);var b},Object.defineProperty(c.prototype,"isWGS84",{get:function(){return 4326===this.wkid},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isWebMercator",{get:function(){return-1!==l.indexOf(this.wkid)},enumerable:!0,configurable:!0}),
Object.defineProperty(c.prototype,"isGeographic",{get:function(){return n.isGeographic(this)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isWrappable",{get:function(){return-1!==b.indexOf(this.wkid)},enumerable:!0,configurable:!0}),c.prototype.writeWkt=function(a,b){this.wkid||(b.wkt=a)},c.prototype.clone=function(){if(this===e.WGS84)return e.WGS84;if(this===e.WebMercator)return e.WebMercator;var a=new e;return null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&(a.latestWkid=
this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt),a},c.prototype.equals=function(a){if(a){if(this===a)return!0;if(null!=this.wkid||null!=a.wkid)return this.wkid===a.wkid||this.isWebMercator&&a.isWebMercator||null!=a.latestWkid&&this.wkid===a.latestWkid||null!=this.latestWkid&&a.wkid===this.latestWkid;if(this.wkt&&a.wkt)return this.wkt.toUpperCase()===a.wkt.toUpperCase()}return!1},c.fromJSON=
function(a){if(!a)return null;if(a.wkid){if(102100===a.wkid)return e.WebMercator;if(4326===a.wkid)return e.WGS84}var b=new e;return b.read(a),b},c}(c.declared(d));a.WGS84=null;a.WebMercator=null;f([c.property({dependsOn:["wkid"],readOnly:!0})],a.prototype,"isWGS84",null);f([c.property({dependsOn:["wkid"],readOnly:!0})],a.prototype,"isWebMercator",null);f([c.property({dependsOn:["wkid","wkt"],readOnly:!0})],a.prototype,"isGeographic",null);f([c.property({dependsOn:["wkid"],readOnly:!0})],a.prototype,
"isWrappable",null);f([c.property({json:{write:!0}})],a.prototype,"latestWkid",void 0);f([c.property({json:{write:!0}})],a.prototype,"wkid",void 0);f([c.property()],a.prototype,"wkt",void 0);f([c.writer("wkt")],a.prototype,"writeWkt",null);f([c.property({json:{write:!0}})],a.prototype,"vcsWkid",void 0);f([c.property({json:{write:!0}})],a.prototype,"latestVcsWkid",void 0);a=e=f([c.subclass("esri.SpatialReference")],a);a.WGS84=new a(4326);a.WebMercator=new a({wkid:102100,latestWkid:3857});Object.freeze&&
(Object.freeze(a.WGS84),Object.freeze(a.WebMercator));var e,l=[102113,102100,3857,3785],b=[102113,102100,3857,3785,4326];return a})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/read ./accessorSupport/write ./accessorSupport/decorators".split(" "),function(a,h,m,f,d,c,n,e,l){function b(a,b){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var c=new this;
return c.read(a,b),c}var g=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return m(b,a),b.prototype.read=function(a,b){return n["default"](this,a,b),this},b.prototype.write=function(a,b){return e["default"](this,a||{},b)},b.prototype.toJSON=function(a){return this.write(null,a)},b}(l.declared(d));return g=f([l.subclass("esri.core.JSONSupport")],g),g.prototype.toJSON.isDefaultToJSON=!0,c.after(function(a){c.hasMixin(a,g)&&(a.fromJSON=b.bind(a))}),g})},"esri/core/accessorSupport/read":function(){define("require exports dojo/_base/lang ./utils ./get ./extensions/serializableProperty".split(" "),
function(a,h,m,f,d,c){function n(a,b,g){void 0===g&&(g=e);for(var l=f.getProperties(a),n=l.metadatas,h={},m=0,r=Object.getOwnPropertyNames(b);m<r.length;m++){var p=h,u=n,k=r[m],x=b,B=g,y=c.originSpecificReadPropertyDefinition(u[k],B);y&&(!y.read||!1!==y.read.enabled&&!y.read.source)&&(p[k]=!0);for(var z=0,A=Object.getOwnPropertyNames(u);z<A.length;z++){var D=A[z],y=c.originSpecificReadPropertyDefinition(u[D],B),F;a:{F=k;var C=x;if(y&&y.read&&!1!==y.read.enabled&&y.read.source)if(y=y.read.source,"string"==
typeof y){if(y===F||-1<y.indexOf(".")&&0===y.indexOf(F)&&d.exists(y,C)){F=!0;break a}}else for(var H=0;H<y.length;H++){var I=y[H];if(I===F||-1<I.indexOf(".")&&0===I.indexOf(F)&&d.exists(I,C)){F=!0;break a}}F=!1}F&&(p[D]=!0)}}l.setDefaultOrigin(g.origin);m=0;for(h=Object.getOwnPropertyNames(h);m<h.length;m++)r=h[m],u=(p=c.originSpecificReadPropertyDefinition(n[r],g).read)&&p.source,k=void 0,k=u&&"string"==typeof u?d.valueOf(b,u):b[r],p&&p.reader&&(k=p.reader.call(a,k,b,g)),void 0!==k&&l.set(r,k);l.setDefaultOrigin("user")}
Object.defineProperty(h,"__esModule",{value:!0});var e={origin:"service"};h.read=n;h.readLoadable=function(a,b,c,d){void 0===d&&(d=e);b=m.mixin({},d,{messages:[]});c(b);b.messages.forEach(function(b){"warning"!==b.type||a.loaded?d&&d.messages.push(b):a.loadWarnings.push(b)})};h["default"]=n})},"esri/core/accessorSupport/write":function(){define(["require","exports","./PropertyOrigin","./utils","./extensions/serializableProperty"],function(a,h,m,f,d){function c(a,c,b,d,n,f){if(!d||!d.write)return!1;
var g=a.get(b);if(void 0===g)return!1;!n&&d.write.overridePolicy&&(a=d.write.overridePolicy.call(a,g,b,f),void 0!==a&&(n=a));return(n||(n=d.write),!n||!1===n.enabled)||!n.allowNull&&null===g||!n.ignoreOrigin&&f&&f.origin&&c.store.originOf(b)<m.nameToId(f.origin)?!1:!0}function n(a,l,b){if(a&&"function"==typeof a.toJSON&&(!a.toJSON.isDefaultToJSON||!a.write))return f.merge(l,a.toJSON());var g=f.getProperties(a),e=g.metadatas,n;for(n in e){var h=d.originSpecificWritePropertyDefinition(e[n],b);if(c(a,
g,n,h,null,b)){var v=a.get(n),r={},h=(h.write.writer.call(a,v,r,h.write.target||n,b),r);0<Object.keys(h).length&&(l=f.merge(l,h),b&&b.writtenProperties&&b.writtenProperties.push({target:a,propName:n,oldOrigin:m.idToReadableName(g.store.originOf(n)),newOrigin:b.origin}))}}return l}Object.defineProperty(h,"__esModule",{value:!0});h.willPropertyWrite=function(a,l,b,g){var e=f.getProperties(a),n=d.originSpecificWritePropertyDefinition(e.metadatas[l],g);return n?c(a,e,l,n,b,g):!1};h.write=n;h["default"]=
n})},"esri/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(a,h,m){Object.defineProperty(h,"__esModule",{value:!0});h.isGeographic=function(a){return a.wkid?null==m[a.wkid]:a.wkt?/^\s*GEOGCS/i.test(a.wkt):!1};h.getInfo=function(a){return a.wkid?f[a.wkid]:null};a=[-2.0037508342788905E7,2.0037508342788905E7];h=[-2.0037508342787E7,2.0037508342787E7];var f={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:h,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:h,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:h,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:h,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}}})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var a,h={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,
2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,
3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,
3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,
3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,
5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,
6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,
6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,
6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,
6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,
7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,
7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,
26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,54034:0,
65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,
103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,
103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,
103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,
103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(a=2E3;2045>=a;a++)h[a]=0;for(a=2056;2065>=a;a++)h[a]=0;for(a=2067;2135>=a;a++)h[a]=0;for(a=2137;2154>=a;a++)h[a]=0;for(a=2161;2170>=a;a++)h[a]=0;for(a=2172;2193>=a;a++)h[a]=0;for(a=2195;2198>=a;a++)h[a]=0;for(a=2200;2203>=a;a++)h[a]=0;for(a=2205;2217>=a;a++)h[a]=0;for(a=2222;2224>=a;a++)h[a]=1;for(a=2225;2250>=a;a++)h[a]=2;for(a=2251;2253>=
a;a++)h[a]=1;for(a=2257;2264>=a;a++)h[a]=2;for(a=2274;2279>=a;a++)h[a]=2;for(a=2280;2282>=a;a++)h[a]=1;for(a=2283;2289>=a;a++)h[a]=2;for(a=2290;2292>=a;a++)h[a]=0;for(a=2308;2313>=a;a++)h[a]=0;for(a=2315;2491>=a;a++)h[a]=0;for(a=2494;2866>=a;a++)h[a]=0;for(a=2867;2869>=a;a++)h[a]=1;for(a=2870;2888>=a;a++)h[a]=2;for(a=2891;2895>=a;a++)h[a]=2;for(a=2896;2898>=a;a++)h[a]=1;for(a=2902;2908>=a;a++)h[a]=2;for(a=2915;2920>=a;a++)h[a]=2;for(a=2921;2923>=a;a++)h[a]=1;for(a=2924;2930>=a;a++)h[a]=2;for(a=2931;2962>=
a;a++)h[a]=0;for(a=2964;2968>=a;a++)h[a]=2;for(a=2969;2973>=a;a++)h[a]=0;for(a=2975;2991>=a;a++)h[a]=0;for(a=2995;3051>=a;a++)h[a]=0;for(a=3054;3079>=a;a++)h[a]=0;for(a=3081;3088>=a;a++)h[a]=0;for(a=3092;3101>=a;a++)h[a]=0;for(a=3106;3138>=a;a++)h[a]=0;for(a=3146;3151>=a;a++)h[a]=0;for(a=3153;3166>=a;a++)h[a]=0;for(a=3168;3172>=a;a++)h[a]=0;for(a=3174;3203>=a;a++)h[a]=0;for(a=3294;3358>=a;a++)h[a]=0;for(a=3367;3403>=a;a++)h[a]=0;for(a=3408;3416>=a;a++)h[a]=0;for(a=3417;3438>=a;a++)h[a]=2;for(a=3441;3446>=
a;a++)h[a]=2;for(a=3447;3450>=a;a++)h[a]=0;for(a=3451;3459>=a;a++)h[a]=2;for(a=3460;3478>=a;a++)h[a]=0;for(a=3554;3559>=a;a++)h[a]=0;for(a=3560;3570>=a;a++)h[a]=2;for(a=3571;3581>=a;a++)h[a]=0;for(a=3594;3597>=a;a++)h[a]=0;for(a=3601;3604>=a;a++)h[a]=0;for(a=3637;3639>=a;a++)h[a]=0;for(a=3665;3667>=a;a++)h[a]=0;for(a=3693;3695>=a;a++)h[a]=0;for(a=3701;3727>=a;a++)h[a]=0;for(a=3728;3739>=a;a++)h[a]=2;for(a=3740;3751>=a;a++)h[a]=0;for(a=3753;3760>=a;a++)h[a]=2;for(a=3761;3773>=a;a++)h[a]=0;for(a=3775;3777>=
a;a++)h[a]=0;for(a=3779;3781>=a;a++)h[a]=0;for(a=3783;3785>=a;a++)h[a]=0;for(a=3788;3791>=a;a++)h[a]=0;for(a=3797;3802>=a;a++)h[a]=0;for(a=3814;3816>=a;a++)h[a]=0;for(a=3825;3829>=a;a++)h[a]=0;for(a=3832;3841>=a;a++)h[a]=0;for(a=3844;3852>=a;a++)h[a]=0;for(a=3873;3885>=a;a++)h[a]=0;for(a=3890;3893>=a;a++)h[a]=0;for(a=3907;3912>=a;a++)h[a]=0;for(a=3942;3950>=a;a++)h[a]=0;for(a=3968;3970>=a;a++)h[a]=0;for(a=3973;3976>=a;a++)h[a]=0;for(a=3986;3989>=a;a++)h[a]=0;for(a=3994;3997>=a;a++)h[a]=0;for(a=4048;4051>=
a;a++)h[a]=0;for(a=4056;4063>=a;a++)h[a]=0;for(a=4093;4096>=a;a++)h[a]=0;for(a=4390;4398>=a;a++)h[a]=0;for(a=4399;4413>=a;a++)h[a]=2;for(a=4418;4433>=a;a++)h[a]=2;for(a=4455;4457>=a;a++)h[a]=2;for(a=4484;4489>=a;a++)h[a]=0;for(a=4491;4554>=a;a++)h[a]=0;for(a=4568;4589>=a;a++)h[a]=0;for(a=4652;4656>=a;a++)h[a]=0;for(a=4766;4800>=a;a++)h[a]=0;for(a=5014;5016>=a;a++)h[a]=0;for(a=5069;5072>=a;a++)h[a]=0;for(a=5105;5130>=a;a++)h[a]=0;for(a=5173;5188>=a;a++)h[a]=0;for(a=5253;5259>=a;a++)h[a]=0;for(a=5269;5275>=
a;a++)h[a]=0;for(a=5292;5311>=a;a++)h[a]=0;for(a=5329;5331>=a;a++)h[a]=0;for(a=5343;5349>=a;a++)h[a]=0;for(a=5355;5357>=a;a++)h[a]=0;for(a=5387;5389>=a;a++)h[a]=0;for(a=5459;5463>=a;a++)h[a]=0;for(a=5479;5482>=a;a++)h[a]=0;for(a=5518;5520>=a;a++)h[a]=0;for(a=5530;5539>=a;a++)h[a]=0;for(a=5550;5552>=a;a++)h[a]=0;for(a=5562;5583>=a;a++)h[a]=0;for(a=5623;5625>=a;a++)h[a]=2;for(a=5631;5639>=a;a++)h[a]=0;for(a=5649;5653>=a;a++)h[a]=0;for(a=5663;5680>=a;a++)h[a]=0;for(a=5682;5685>=a;a++)h[a]=0;for(a=5875;5877>=
a;a++)h[a]=0;for(a=5921;5940>=a;a++)h[a]=0;for(a=6050;6125>=a;a++)h[a]=0;for(a=6244;6275>=a;a++)h[a]=0;for(a=6328;6348>=a;a++)h[a]=0;for(a=6350;6356>=a;a++)h[a]=0;for(a=6366;6372>=a;a++)h[a]=0;for(a=6381;6387>=a;a++)h[a]=0;for(a=6393;6404>=a;a++)h[a]=0;for(a=6480;6483>=a;a++)h[a]=0;for(a=6511;6514>=a;a++)h[a]=0;for(a=6579;6581>=a;a++)h[a]=0;for(a=6619;6624>=a;a++)h[a]=0;for(a=6625;6627>=a;a++)h[a]=2;for(a=6628;6632>=a;a++)h[a]=0;for(a=6634;6637>=a;a++)h[a]=0;for(a=6669;6692>=a;a++)h[a]=0;for(a=6707;6709>=
a;a++)h[a]=0;for(a=6720;6723>=a;a++)h[a]=0;for(a=6732;6738>=a;a++)h[a]=0;for(a=6931;6933>=a;a++)h[a]=0;for(a=6956;6959>=a;a++)h[a]=0;for(a=7005;7007>=a;a++)h[a]=0;for(a=7057;7070>=a;a++)h[a]=2;for(a=7074;7082>=a;a++)h[a]=0;for(a=7109;7118>=a;a++)h[a]=0;for(a=7119;7127>=a;a++)h[a]=1;for(a=7374;7376>=a;a++)h[a]=0;for(a=7528;7586>=a;a++)h[a]=0;for(a=7587;7645>=a;a++)h[a]=2;for(a=7845;7859>=a;a++)h[a]=0;for(a=20002;20032>=a;a++)h[a]=0;for(a=20062;20092>=a;a++)h[a]=0;for(a=20135;20138>=a;a++)h[a]=0;for(a=
20248;20258>=a;a++)h[a]=0;for(a=20348;20358>=a;a++)h[a]=0;for(a=20436;20440>=a;a++)h[a]=0;for(a=20822;20824>=a;a++)h[a]=0;for(a=20934;20936>=a;a++)h[a]=0;for(a=21035;21037>=a;a++)h[a]=0;for(a=21095;21097>=a;a++)h[a]=0;for(a=21148;21150>=a;a++)h[a]=0;for(a=21413;21423>=a;a++)h[a]=0;for(a=21473;21483>=a;a++)h[a]=0;for(a=21780;21782>=a;a++)h[a]=0;for(a=21891;21894>=a;a++)h[a]=0;for(a=21896;21899>=a;a++)h[a]=0;for(a=22171;22177>=a;a++)h[a]=0;for(a=22181;22187>=a;a++)h[a]=0;for(a=22191;22197>=a;a++)h[a]=
0;for(a=22234;22236>=a;a++)h[a]=0;for(a=22521;22525>=a;a++)h[a]=0;for(a=22991;22994>=a;a++)h[a]=0;for(a=23028;23038>=a;a++)h[a]=0;for(a=23830;23853>=a;a++)h[a]=0;for(a=23866;23872>=a;a++)h[a]=0;for(a=23877;23884>=a;a++)h[a]=0;for(a=23886;23894>=a;a++)h[a]=0;for(a=23946;23948>=a;a++)h[a]=0;for(a=24311;24313>=a;a++)h[a]=0;for(a=24342;24347>=a;a++)h[a]=0;for(a=24370;24374>=a;a++)h[a]=10;for(a=24375;24381>=a;a++)h[a]=0;for(a=24718;24721>=a;a++)h[a]=0;for(a=24817;24821>=a;a++)h[a]=0;for(a=24877;24882>=
a;a++)h[a]=0;for(a=24891;24893>=a;a++)h[a]=0;for(a=25391;25395>=a;a++)h[a]=0;for(a=25828;25838>=a;a++)h[a]=0;for(a=26191;26195>=a;a++)h[a]=0;for(a=26391;26393>=a;a++)h[a]=0;for(a=26701;26722>=a;a++)h[a]=0;for(a=26729;26799>=a;a++)h[a]=2;for(a=26801;26803>=a;a++)h[a]=2;for(a=26811;26813>=a;a++)h[a]=2;for(a=26847;26870>=a;a++)h[a]=2;for(a=26891;26899>=a;a++)h[a]=0;for(a=26901;26923>=a;a++)h[a]=0;for(a=26929;26946>=a;a++)h[a]=0;for(a=26948;26998>=a;a++)h[a]=0;for(a=27037;27040>=a;a++)h[a]=0;for(a=27205;27232>=
a;a++)h[a]=0;for(a=27258;27260>=a;a++)h[a]=0;for(a=27391;27398>=a;a++)h[a]=0;for(a=27561;27564>=a;a++)h[a]=0;for(a=27571;27574>=a;a++)h[a]=0;for(a=27581;27584>=a;a++)h[a]=0;for(a=27591;27594>=a;a++)h[a]=0;for(a=28191;28193>=a;a++)h[a]=0;for(a=28348;28358>=a;a++)h[a]=0;for(a=28402;28432>=a;a++)h[a]=0;for(a=28462;28492>=a;a++)h[a]=0;for(a=29118;29122>=a;a++)h[a]=0;for(a=29168;29172>=a;a++)h[a]=0;for(a=29177;29185>=a;a++)h[a]=0;for(a=29187;29195>=a;a++)h[a]=0;for(a=29900;29903>=a;a++)h[a]=0;for(a=30161;30179>=
a;a++)h[a]=0;for(a=30491;30494>=a;a++)h[a]=0;for(a=30729;30732>=a;a++)h[a]=0;for(a=31251;31259>=a;a++)h[a]=0;for(a=31265;31268>=a;a++)h[a]=0;for(a=31275;31279>=a;a++)h[a]=0;for(a=31281;31297>=a;a++)h[a]=0;for(a=31461;31469>=a;a++)h[a]=0;for(a=31491;31495>=a;a++)h[a]=0;for(a=31917;31922>=a;a++)h[a]=0;for(a=31965;32E3>=a;a++)h[a]=0;for(a=32001;32003>=a;a++)h[a]=2;for(a=32005;32031>=a;a++)h[a]=2;for(a=32033;32060>=a;a++)h[a]=2;for(a=32064;32067>=a;a++)h[a]=2;for(a=32074;32077>=a;a++)h[a]=2;for(a=32081;32086>=
a;a++)h[a]=0;for(a=32107;32130>=a;a++)h[a]=0;for(a=32133;32158>=a;a++)h[a]=0;for(a=32164;32167>=a;a++)h[a]=2;for(a=32180;32199>=a;a++)h[a]=0;for(a=32201;32260>=a;a++)h[a]=0;for(a=32301;32360>=a;a++)h[a]=0;for(a=32601;32662>=a;a++)h[a]=0;for(a=32664;32667>=a;a++)h[a]=2;for(a=32701;32761>=a;a++)h[a]=0;for(a=53001;53004>=a;a++)h[a]=0;for(a=53008;53019>=a;a++)h[a]=0;for(a=53021;53032>=a;a++)h[a]=0;for(a=53042;53046>=a;a++)h[a]=0;for(a=53074;53080>=a;a++)h[a]=0;for(a=54001;54004>=a;a++)h[a]=0;for(a=54008;54019>=
a;a++)h[a]=0;for(a=54021;54032>=a;a++)h[a]=0;for(a=54042;54046>=a;a++)h[a]=0;for(a=54048;54053>=a;a++)h[a]=0;for(a=54074;54080>=a;a++)h[a]=0;for(a=102001;102040>=a;a++)h[a]=0;for(a=102042;102063>=a;a++)h[a]=0;for(a=102065;102067>=a;a++)h[a]=0;for(a=102070;102117>=a;a++)h[a]=0;for(a=102122;102216>=a;a++)h[a]=0;for(a=102221;102377>=a;a++)h[a]=0;for(a=102382;102388>=a;a++)h[a]=0;for(a=102389;102398>=a;a++)h[a]=2;for(a=102399;102444>=a;a++)h[a]=0;for(a=102445;102447>=a;a++)h[a]=2;for(a=102448;102458>=
a;a++)h[a]=0;for(a=102459;102468>=a;a++)h[a]=2;for(a=102469;102496>=a;a++)h[a]=0;for(a=102500;102519>=a;a++)h[a]=1;for(a=102520;102524>=a;a++)h[a]=0;for(a=102525;102529>=a;a++)h[a]=2;for(a=102530;102561>=a;a++)h[a]=0;for(a=102570;102588>=a;a++)h[a]=0;for(a=102590;102598>=a;a++)h[a]=0;for(a=102601;102603>=a;a++)h[a]=0;for(a=102605;102628>=a;a++)h[a]=0;for(a=102629;102646>=a;a++)h[a]=2;for(a=102648;102700>=a;a++)h[a]=2;for(a=102701;102703>=a;a++)h[a]=0;for(a=102707;102730>=a;a++)h[a]=2;for(a=102733;102758>=
a;a++)h[a]=2;for(a=102767;102798>=a;a++)h[a]=0;for(a=102965;102969>=a;a++)h[a]=0;for(a=102971;102973>=a;a++)h[a]=0;for(a=102975;102989>=a;a++)h[a]=0;for(a=102990;102992>=a;a++)h[a]=1;for(a=102997;103002>=a;a++)h[a]=0;for(a=103003;103008>=a;a++)h[a]=2;for(a=103009;103011>=a;a++)h[a]=0;for(a=103012;103014>=a;a++)h[a]=2;for(a=103019;103021>=a;a++)h[a]=0;for(a=103022;103024>=a;a++)h[a]=2;for(a=103029;103031>=a;a++)h[a]=0;for(a=103032;103034>=a;a++)h[a]=2;for(a=103065;103068>=a;a++)h[a]=0;for(a=103074;103076>=
a;a++)h[a]=0;for(a=103077;103079>=a;a++)h[a]=1;for(a=103080;103082>=a;a++)h[a]=0;for(a=103083;103085>=a;a++)h[a]=2;for(a=103090;103093>=a;a++)h[a]=0;for(a=103097;103099>=a;a++)h[a]=0;for(a=103100;103102>=a;a++)h[a]=2;for(a=103107;103109>=a;a++)h[a]=0;for(a=103110;103112>=a;a++)h[a]=2;for(a=103113;103116>=a;a++)h[a]=0;for(a=103117;103120>=a;a++)h[a]=2;for(a=103153;103157>=a;a++)h[a]=0;for(a=103158;103162>=a;a++)h[a]=2;for(a=103163;103165>=a;a++)h[a]=0;for(a=103166;103168>=a;a++)h[a]=1;for(a=103169;103171>=
a;a++)h[a]=2;for(a=103186;103188>=a;a++)h[a]=0;for(a=103189;103191>=a;a++)h[a]=2;for(a=103192;103195>=a;a++)h[a]=0;for(a=103196;103199>=a;a++)h[a]=2;for(a=103200;103224>=a;a++)h[a]=0;for(a=103225;103227>=a;a++)h[a]=1;for(a=103232;103237>=a;a++)h[a]=0;for(a=103238;103243>=a;a++)h[a]=2;for(a=103244;103246>=a;a++)h[a]=0;for(a=103247;103249>=a;a++)h[a]=2;for(a=103254;103256>=a;a++)h[a]=0;for(a=103257;103259>=a;a++)h[a]=2;for(a=103264;103266>=a;a++)h[a]=0;for(a=103267;103269>=a;a++)h[a]=2;for(a=103300;103375>=
a;a++)h[a]=0;for(a=103381;103383>=a;a++)h[a]=0;for(a=103384;103386>=a;a++)h[a]=1;for(a=103387;103389>=a;a++)h[a]=0;for(a=103390;103392>=a;a++)h[a]=2;for(a=103397;103399>=a;a++)h[a]=0;for(a=103400;103471>=a;a++)h[a]=2;for(a=103476;103478>=a;a++)h[a]=0;for(a=103479;103481>=a;a++)h[a]=2;for(a=103486;103488>=a;a++)h[a]=0;for(a=103489;103491>=a;a++)h[a]=2;for(a=103492;103495>=a;a++)h[a]=0;for(a=103496;103499>=a;a++)h[a]=2;for(a=103528;103543>=a;a++)h[a]=0;for(a=103544;103548>=a;a++)h[a]=2;for(a=103549;103551>=
a;a++)h[a]=0;for(a=103552;103554>=a;a++)h[a]=1;for(a=103555;103557>=a;a++)h[a]=2;for(a=103558;103560>=a;a++)h[a]=0;for(a=103571;103573>=a;a++)h[a]=0;for(a=103574;103576>=a;a++)h[a]=2;for(a=103577;103580>=a;a++)h[a]=0;for(a=103581;103583>=a;a++)h[a]=2;for(a=103600;103694>=a;a++)h[a]=0;for(a=103700;103793>=a;a++)h[a]=2;for(a=103794;103871>=a;a++)h[a]=0;for(a=103900;103971>=a;a++)h[a]=2;return h})},"esri/geometry/Extent":function(){define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./support/webMercatorUtils ./support/mathUtils ./support/spatialReferenceUtils".split(" "),
function(a,h,m,f,d,c,n,e){var l=f.createSubclass({declaredClass:"esri.geometry.Extent",type:"extent",normalizeCtorArgs:function(b,c,d,e,l){return this.isSR(b)?{spatialReference:b,xmin:0,ymin:0,xmax:0,ymax:0}:a.isObject(b)?(b.spatialReference=null!=b.spatialReference?b.spatialReference:m.WGS84,b):{xmin:b,ymin:c,xmax:d,ymax:e,spatialReference:null!=l?l:m.WGS84}},properties:{cache:{dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax".split(" ")},center:{readOnly:!0,dependsOn:["cache"],get:function(a){return a||
(a=new d({spatialReference:this.spatialReference})),a.x=.5*(this.xmin+this.xmax),a.y=.5*(this.ymin+this.ymax),this.hasZ&&(a.z=.5*(this.zmin+this.zmax)),this.hasM&&(a.m=.5*(this.mmin+this.mmax)),a}},extent:{readOnly:!0,dependsOn:["cache"],get:function(){return this.clone()}},hasM:{readOnly:!0,dependsOn:["mmin","mmax"],get:function(){return null!=this.mmin&&null!=this.mmax}},hasZ:{readOnly:!0,dependsOn:["zmin","zmax"],get:function(){return null!=this.zmin&&null!=this.zmax}},height:{readOnly:!0,dependsOn:["ymin",
"ymax"],get:function(){return Math.abs(this.ymax-this.ymin)}},width:{readOnly:!0,dependsOn:["xmin","xmax"],get:function(){return Math.abs(this.xmax-this.xmin)}},xmin:0,ymin:0,mmin:void 0,zmin:void 0,xmax:0,ymax:0,mmax:void 0,zmax:void 0},centerAt:function(a){var b=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-b.x,a.y-b.y,a.z-b.z):this.offset(a.x-b.x,a.y-b.y)},clone:function(){var a=new l;return a.xmin=this.xmin,a.ymin=this.ymin,a.xmax=this.xmax,a.ymax=this.ymax,a.spatialReference=this.spatialReference,
null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax),null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax),a},contains:function(a){if(!a)return!1;var b=a.type;if("point"===b){var e,b=this.spatialReference,l=a.spatialReference,n=a.x,f=a.y;a=a.z;return b&&l&&!b.equals(l)&&c.canProject(b,l)&&(e=b.isWebMercator?d.lngLatToXY(n,f):d.xyToLngLat(n,f,!0),n=e[0],f=e[1]),n>=this.xmin&&n<=this.xmax&&f>=this.ymin&&f<=this.ymax?null!=a&&this.hasZ?a>=this.zmin&&a<=this.zmax:!0:!1}return"extent"===b?this._containsExtent(a):
!1},equals:function(a){if(!a)return!1;var b=this.spatialReference;if(!b.equals(a.spatialReference)){if(!c.canProject(a.spatialReference,b))return!1;a=c.project(a,b)}return this.xmin===a.xmin&&this.ymin===a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&this.mmax===a.mmax},expand:function(a){a=.5*(1-a);var b=this.width*a,c=this.height*a;if(this.xmin+=b,this.ymin+=c,this.xmax-=b,this.ymax-=c,this.hasZ)b=(this.zmax-this.zmin)*a,this.zmin+=b,
this.zmax-=b;this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this},intersects:function(a){if(!a)return!1;var b=a.type,d=this.spatialReference,e=a.spatialReference;switch(d&&e&&!d.equals(e)&&c.canProject(d,e)&&(a=d.isWebMercator?c.geographicToWebMercator(a):c.webMercatorToGeographic(a,!0)),b){case "point":return this.contains(a);case "multipoint":return this._intersectsMultipoint(a);case "extent":return this._intersectsExtent(a);case "polygon":return this._intersectsPolygon(a);
case "polyline":return this._intersectsPolyline(a)}},normalize:function(){var a=this._normalize(!1,!0);return Array.isArray(a)||(a=[a]),a},offset:function(a,c,d){return this.xmin+=a,this.ymin+=c,this.xmax+=a,this.ymax+=c,null!=d&&(this.zmin+=d,this.zmax+=d),this},shiftCentralMeridian:function(){return this._normalize(!0)},toJSON:function(){var a=this.spatialReference,a={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax,spatialReference:a&&a.toJSON()};return this.hasZ&&(a.zmin=this.zmin,
a.zmax=this.zmax),this.hasM&&(a.mmax=this.mmax,a.mmin=this.mmin),a},union:function(a){function b(a,b,c){return null==b?c:null==c?b:a(b,c)}return this.xmin=Math.min(this.xmin,a.xmin),this.ymin=Math.min(this.ymin,a.ymin),this.xmax=Math.max(this.xmax,a.xmax),this.ymax=Math.max(this.ymax,a.ymax),(this.hasZ||a.hasZ)&&(this.zmin=b(Math.min,this.zmin,a.zmin),this.zmax=b(Math.max,this.zmax,a.zmax)),(this.hasM||a.hasM)&&(this.mmin=b(Math.min,this.mmin,a.mmin),this.mmax=b(Math.max,this.mmax,a.mmax)),this},
intersection:function(a){function b(a,b,c){return null==b?c:null==c?b:a(b,c)}return this._intersectsExtent(a)?(this.xmin=Math.max(this.xmin,a.xmin),this.ymin=Math.max(this.ymin,a.ymin),this.xmax=Math.min(this.xmax,a.xmax),this.ymax=Math.min(this.ymax,a.ymax),(this.hasZ||a.hasZ)&&(this.zmin=b(Math.max,this.zmin,a.zmin),this.zmax=b(Math.min,this.zmax,a.zmax)),(this.hasM||a.hasM)&&(this.mmin=b(Math.max,this.mmin,a.mmin),this.mmax=b(Math.min,this.mmax,a.mmax)),this):null},_containsExtent:function(a){var b=
a.xmin,c=a.ymin,e=a.zmin,l=a.xmax,n=a.ymax,f=a.zmax;a=a.spatialReference;return null!=e&&this.hasZ?this.contains(new d(b,c,e,a))&&this.contains(new d(b,n,e,a))&&this.contains(new d(l,n,e,a))&&this.contains(new d(l,c,e,a))&&this.contains(new d(b,c,f,a))&&this.contains(new d(b,n,f,a))&&this.contains(new d(l,n,f,a))&&this.contains(new d(l,c,f,a)):this.contains(new d(b,c,a))&&this.contains(new d(b,n,a))&&this.contains(new d(l,n,a))&&this.contains(new d(l,c,a))},_intersectsMultipoint:function(a){var b,
c=a.points.length;for(b=0;c>b;b++)if(this.contains(a.getPoint(b)))return!0;return!1},_intersectsExtent:function(a){var b,c,d,e=this.hasZ&&a.hasZ;if(this.xmin<=a.xmin){if(b=a.xmin,this.xmax<b)return!1}else if(b=this.xmin,a.xmax<b)return!1;if(this.ymin<=a.ymin){if(c=a.ymin,this.ymax<c)return!1}else if(c=this.ymin,a.ymax<c)return!1;if(e&&a.hasZ)if(this.zmin<=a.zmin){if(d=a.zmin,this.zmax<d)return!1}else if(d=this.zmin,a.zmax<d)return!1;return!0},_intersectsPolygon:function(a){var b,c,e;b=[this.xmin,
this.ymax];e=[this.xmax,this.ymax];var l=[this.xmin,this.ymin],n=[this.xmax,this.ymin],f=[b,e,l,n],l=[[l,b],[b,e],[e,n],[n,l]],n=a.rings,p=n.length,h=new d(0,0,this.spatialReference);e=f.length;for(b=0;e>b;b++)if(h.x=f[b][0],h.y=f[b][1],a.contains(h))return!0;var h={x:0,y:0,spatialReference:a.spatialReference,type:"point"},k,x;for(b=0;p>b;b++)if(c=n[b],e=c.length){if(k=c[0],h.x=k[0],h.y=k[1],this.contains(h))return!0;for(a=1;e>a;a++){if(x=c[a],h.x=x[0],h.y=x[1],this.contains(h)||this._intersectsLine([k,
x],l))return!0;k=x}}return!1},_intersectsPolyline:function(a){var b,c,d,e,l,n=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],p=a.paths,f=p.length,k={x:0,y:0,spatialReference:a.spatialReference,type:"point"};for(a=0;f>a;a++)if(c=p[a],d=c.length){if(e=c[0],k.x=e[0],k.y=e[1],this.contains(k))return!0;for(b=1;d>b;b++){if(l=c[b],k.x=l[0],k.y=l[1],this.contains(k)||
this._intersectsLine([e,l],n))return!0;e=l}}return!1},_intersectsLine:function(a,c){var b,d=n._getLineIntersection2,g=c.length;for(b=0;g>b;b++)if(d(a,c[b]))return!0;return!1},_shiftCM:function(a){var b=this.spatialReference;if(a=a||e.getInfo(b)){var d=this._getCM(a);if(d){var l=b.isWebMercator?c.webMercatorToGeographic(d):d;this.xmin-=d.x;this.xmax-=d.x;b.isWebMercator||(l.x=this._normalizeX(l.x,a).x);this.spatialReference=new m(h.substitute({Central_Meridian:l.x},4326===b.wkid?a.altTemplate:a.wkTemplate))}}return this},
_getCM:function(a){var b,c=a.valid[0];a=a.valid[1];var d=this.xmin,e=this.xmax;return d>=c&&a>=d&&e>=c&&a>=e||(b=this.center),b},_normalize:function(a,c,d){var b=this.spatialReference;if(b&&(d=d||e.getInfo(b))){var g=this._getParts(d).map(function(a){return a.extent});if(2<g.length)return a?this._shiftCM(d):this.set({xmin:d.valid[0],xmax:d.valid[1]});if(2===g.length){if(a)return this._shiftCM(d);if(c)return g;var l=!0,n=!0;return g.map(function(a){a.hasZ||(l=!1);a.hasM||(n=!1)}),{rings:g.map(function(a){var b=
[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(l)for(var k=(a.zmax-a.zmin)/2,c=0;c<b.length;c++)b[c].push(k);if(n)for(a=(a.mmax-a.mmin)/2,c=0;c<b.length;c++)b[c].push(a);return b}),hasZ:l,hasM:n,spatialReference:b}}return g[0]||this}return this},_getParts:function(a){var b=this.cache._parts;if(!b){var b=[],c,d,n,f,h=this.xmin,p=this.xmax,u=this.ymin,k=this.ymax,x=this.spatialReference,m=this.width,y=h,z=p,A=0,D=0;if(a=a||e.getInfo(x),d=a.valid[0],n=a.valid[1],
c=this._normalizeX(h,a),h=c.x,A=c.frameId,c=this._normalizeX(p,a),p=c.x,D=c.frameId,f=h===p&&0<m,m>2*n){a=new l(z>y?h:p,u,n,k,x);h=new l(d,u,z>y?p:h,k,x);n=new l(0,u,n,k,x);u=new l(d,u,0,k,x);k=[];x=[];a.contains(n)&&k.push(A);a.contains(u)&&x.push(A);h.contains(n)&&k.push(D);h.contains(u)&&x.push(D);for(d=A+1;D>d;d++)k.push(d),x.push(d);b.push({extent:a,frameIds:[A]},{extent:h,frameIds:[D]},{extent:n,frameIds:k},{extent:u,frameIds:x})}else h>p||f?b.push({extent:new l(h,u,n,k,x),frameIds:[A]},{extent:new l(d,
u,p,k,x),frameIds:[D]}):b.push({extent:new l(h,u,p,k,x),frameIds:[A]});this.cache._parts=b}D=this.hasZ;d=this.hasM;if(D||d)for(A={},D&&(A.zmin=this.zmin,A.zmax=this.zmax),d&&(A.mmin=this.mmin,A.mmax=this.mmax),D=0;D<b.length;D++)b[D].extent.set(A);return b},_normalizeX:function(a,c){var b,d=0,g=c.valid[0];c=c.valid[1];var e=2*c;return a>c?(b=Math.ceil(Math.abs(a-c)/e),a-=b*e,d=b):g>a&&(b=Math.ceil(Math.abs(a-g)/e),a+=b*e,d=-b),{x:a,frameId:d}}});return l})},"esri/geometry/Geometry":function(){define(["../core/JSONSupport",
"./SpatialReference"],function(a,h){return a.createSubclass({declaredClass:"esri.geometry.Geometry",type:null,properties:{cache:{value:null,readOnly:!0,dependsOn:["spatialReference"],get:function(){return{}}},extent:{value:null,readOnly:!0,dependsOn:["spatialReference"]},hasM:!1,hasZ:!1,spatialReference:h.WGS84},isSR:function(a){return a&&("esri.SpatialReference"===a.declaredClass||null!=a.wkid)},clone:function(){return console.warn(".clone() is not implemented for "+this.declaredClass),null},toJSON:function(){return console.warn(".toJSON() is not implemented for "+
this.declaredClass),null},clearCache:function(){this.notifyChange("cache")},getCacheValue:function(a){return this.cache[a]},setCacheValue:function(a,f){this.cache[a]=f}})})},"esri/geometry/Point":function(){define(["./SpatialReference","./Geometry","./support/webMercatorUtils","./support/spatialReferenceUtils"],function(a,h,m,f){var d=[0,0],c=m.lngLatToXY,n=m.xyToLngLat,e=h.createSubclass({declaredClass:"esri.geometry.Point",normalizeCtorArgs:function(e,b,g,n,f){var l;if(Array.isArray(e))l=e,f=b,
e=l[0],b=l[1],g=l[2],n=l[3];else if(e&&"object"==typeof e){if(l=e,e=null!=l.x?l.x:l.longitude,b=null!=l.y?l.y:l.latitude,g=null!=l.z?l.z:l.altitude,n=l.m,f=l.spatialReference,f&&"esri.SpatialReference"!==f.declaredClass&&(f=new a(f)),!l.declaredClass&&f&&f.isWebMercator&&null!=l.longitude&&null!=l.latitude)b=c(l.longitude,l.latitude,!1,d),e=b[0],b=b[1]}else this.isSR(g)?(f=g,g=null):this.isSR(n)&&(f=n,n=null);e={x:e,y:b};return null!=f&&(e.spatialReference=f),null!=g&&(e.z=g),null!=n&&(e.m=n),e},
properties:{cache:{dependsOn:["x","y","z","m"]},hasM:{dependsOn:["m"],get:function(){return void 0!==this.m},set:function(a){var b=this._get("hasM");a!==b&&(this._set("m",a?0:void 0),this._set("hasM",a))}},hasZ:{dependsOn:["z"],get:function(){return void 0!==this.z},set:function(a){var b=this._get("hasZ");a!==b&&(this._set("z",a?0:void 0),this._set("hasZ",a))}},latitude:{dependsOn:["y"],get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return n(this.x,this.y,!1,d)[1];if(4326===
a.wkid)return this._get("y")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("y",c(this.x,a,!1,d)[1]):4326===b.wkid&&this._set("y",a),this._set("latitude",a))}},longitude:{dependsOn:["x"],get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return n(this._get("x"),this._get("y"),!1,d)[0];if(4326===a.wkid)return this._get("x")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("x",c(a,
this._get("y"),!1,d)[0]):4326===b.wkid&&this._set("x",a),this._set("longitude",a))}},x:0,y:0,z:void 0,m:void 0,type:"point"},clone:function(){var a=new e;return a.x=this.x,a.y=this.y,a.z=this.z,a.m=this.m,a.spatialReference=this.spatialReference,a},copy:function(a){return e.copy(a,this),this},equals:function(a){if(!a)return!1;var b=this.x,d=this.y,e=this.z,l=this.m,f=this.spatialReference,h=a.x,r=a.y,p=a.z,u=a.m;a=a.spatialReference;if(!f.equals(a)){if(f.isWebMercator&&4326===a.wkid)r=c(h,r);else{if(4326!==
f.wkid||!a.isWebMercator)return!1;r=n(h,r)}h=r[0];r=r[1];a=f}return b===h&&d===r&&e===p&&l===u&&f.wkid===a.wkid},offset:function(a,b,c){return this.x+=a,this.y+=b,null!=c&&this.hasZ&&(this.z+=c),this},normalize:function(){var a=this.x,b=this.spatialReference;if(b){var c=f.getInfo(b);if(c){var d,b=c.valid[0],c=c.valid[1],e=2*c;a>c?(d=Math.ceil(Math.abs(a-c)/e),a-=d*e):b>a&&(d=Math.ceil(Math.abs(a-b)/e),a+=d*e)}}return this._set("x",a),this},distance:function(a){return e.distance(this,a)},toArray:function(){var a=
this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:[this.x,this.y]},toJSON:function(){var a=this.spatialReference,b={x:this.x,y:this.y};return this.hasZ&&(b.z=this.z),this.hasM&&(b.m=this.m),b.spatialReference=a&&a.toJSON(),b}});return e.lngLatToXY=c,e.xyToLngLat=n,e.copy=function(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.m=a.m;b.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()},e.distance=function(a,
b){var c=a.x-b.x,d=a.y-b.y;a=a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(c*c+d*d+a*a)},e})},"esri/geometry/support/webMercatorUtils":function(){define(["require","exports","../SpatialReference"],function(a,h,m){function f(a,b,c,d,g){if("point"===a.type)b=b(a.x,a.y,d,q),g.x=b[0],g.y=b[1];else if("extent"===a.type)f=b(a.xmin,a.ymin,d,q),g.xmin=f[0],g.ymin=f[1],b=b(a.xmax,a.ymax,d,q),g.xmax=b[0],g.ymax=b[1];else if("polyline"===a.type||"polygon"===a.type){var e=(f="polyline"===a.type)?a.paths:a.rings,
k=[],l=void 0;for(a=0;a<e.length;a++){var p=e[a],l=[];k.push(l);for(var n=0;n<p.length;n++)l.push(b(p[n][0],p[n][1],d)),2<p[n].length&&l[n].push(p[n][2]),3<p[n].length&&l[n].push(p[n][3])}f?g.paths=k:g.rings=k}else if("multipoint"===a.type){f=a.points;e=[];for(a=0;a<f.length;a++)e[a]=b(f[a][0],f[a][1],d),2<f[a].length&&e[a].push(f[a][2]),3<f[a].length&&e[a].push(f[a][3]);g.points=e}return g.spatialReference=c,g;var f}function d(a,b){a=a&&(null!=a.wkid?a:a.spatialReference);b=b&&(null!=b.wkid?b:b.spatialReference);
return a&&b?b.equals(a)?!0:b.isWebMercator&&4326===a.wkid||a.isWebMercator&&4326===b.wkid:!1}function c(a,b,c,d){void 0===d&&(d=[0,0]);89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=g;return d[0]=a*g*e,d[1]=.5*e*Math.log((1+Math.sin(b))/(1-Math.sin(b))),d}function n(a,c,d,g){void 0===d&&(d=!1);void 0===g&&(g=[0,0]);a=a/e*b;return g[0]=d?a:a-360*Math.floor((a+180)/360),g[1]=(l/2-2*Math.atan(Math.exp(-1*c/e)))*b,g}Object.defineProperty(h,"__esModule",{value:!0});var e=6378137,l=3.141592653589793,
b=57.29577951308232,g=.017453292519943,q=[0,0];h.canProject=d;h.project=function(a,b){var g=a&&a.spatialReference;b=b&&(null!=b.wkid?b:b.spatialReference);return d(g,b)?g.equals(b)?a.clone():b.isWebMercator?f(a,c,m.WebMercator,!1,a.clone()):4326===b.wkid?f(a,n,m.WGS84,!1,a.clone()):null:null};h.lngLatToXY=c;h.xyToLngLat=n;h.geographicToWebMercator=function(a,b,d){return void 0===b&&(b=!1),void 0===d&&(d=a.clone()),f(a,c,m.WebMercator,b,d)};h.webMercatorToGeographic=function(a,b,c){return void 0===
b&&(b=!1),void 0===c&&(c=a.clone()),f(a,n,m.WGS84,b,c)}})},"esri/geometry/support/mathUtils":function(){define(["../Point"],function(a){function h(c,d){var e,l,b;return c instanceof a?(e=d.x-c.x,l=d.y-c.y,b=0,null!=c.z&&null!=d.z&&(b=c.z-d.z)):(e=d[0]-c[0],l=d[1]-c[1],b=0,null!=c[2]&&null!=d[2]&&(b=c[2]-d[2])),Math.sqrt(e*e+l*l+b*b)}function m(c,d,e){var l,b,g;return c instanceof a?(l=c.x+e*(d.x-c.x),b=c.y+e*(d.y-c.y),null!=c.z&&null!=d.z&&(g=c.z+e*(d.z-c.z)),new a(l,b,g)):(l=c[0]+e*(d[0]-c[0]),b=
c[1]+e*(d[1]-c[1]),2<c.length&&2<d.length?[l,b,c[2]+e*(d[2]-c[2])]:[l,b])}function f(a,d){return 1E-8>Math.abs(a-d)}function d(a,d,e,l){var b,c,n=f(a[0],d[0])?1E10:(a[1]-d[1])/(a[0]-d[0]),h=f(e[0],l[0])?1E10:(e[1]-l[1])/(e[0]-l[0]),m=a[1]-n*a[0],v=e[1]-h*e[0];if(f(n,h)){if(f(m,v)){if(f(a[0],d[0])){if(!(Math.min(a[1],d[1])<Math.max(e[1],l[1])||Math.max(a[1],d[1])>Math.min(e[1],l[1])))return null;c=(a[1]+d[1]+e[1]+l[1]-Math.min(a[1],d[1],e[1],l[1])-Math.max(a[1],d[1],e[1],l[1]))/2;b=(c-m)/n}else{if(!(Math.min(a[0],
d[0])<Math.max(e[0],l[0])||Math.max(a[0],d[0])>Math.min(e[0],l[0])))return null;b=(a[0]+d[0]+e[0]+l[0]-Math.min(a[0],d[0],e[0],l[0])-Math.max(a[0],d[0],e[0],l[0]))/2;c=n*b+m}return[b,c]}return null}return f(n,1E10)?(b=a[0],c=h*b+v):f(h,1E10)?(b=e[0],c=n*b+m):(b=-(m-v)/(n-h),c=a[1]===d[1]?a[1]:e[1]===l[1]?e[1]:n*b+m),[b,c]}return{getLength:h,_getLength:function(a,d){var c=d[0]-a[0];a=d[1]-a[1];return Math.sqrt(c*c+a*a)},getPointOnLine:m,getMidpoint:function(a,d){return m(a,d,.5)},_equals:f,_getLineIntersection:d,
getLineIntersection:function(c,n,e,l,b){c=d([c.x,c.y],[n.x,n.y],[e.x,e.y],[l.x,l.y]);return c&&(c=new a(c[0],c[1],b)),c},_getLineIntersection2:function(a,d){var c,l,b,g,n=a[0],f=a[1],h=d[0],m=d[1];d=n[0];n=n[1];a=f[0];var f=f[1],r=h[0],p=h[1],h=m[0]-r,r=d-r,u=a-d,m=m[1]-p,p=n-p,k=f-n,x=m*u-h*k;return 0===x?!1:(c=(h*p-m*r)/x,l=(u*p-k*r)/x,0<=c&&1>=c&&0<=l&&1>=l?(b=d+c*(a-d),g=n+c*(f-n),[b,g]):!1)},_pointLineDistance:function(a,d){var c=d[0],l=d[1];d=c[0];var b=c[1],c=a[0];a=a[1];var g=l[0]-d,n=l[1]-
b,f=c-d,h=a-b,l=Math.sqrt,m=Math.pow,r=l(m(g,2)+m(n,2)),f=(f*g+h*n)/(r*r),b=b+f*n;return l(m(c-(d+f*g),2)+m(a-b,2))},getPathLength:function(a){for(var c=0,d=a.length,l=0;d-1>l;++l)c+=h(a[l],a[l+1]);return c},getPointOnPath:function(a,d){if(0>=d)return a[0];for(var c=0,l=a.length,b=0;l-1>b;++b){var g=h(a[b],a[b+1]);if(g>d-c)return m(a[b],a[b+1],(d-c)/g);c+=g}return a[l-1]}}})},"esri/layers/support/types":function(){define(["require","exports"],function(a,h){Object.defineProperty(h,"__esModule",{value:!0});
h.isOfType=function(a,f){a=a.constructor._meta;if(!a||!a.bases)return!1;a=a.bases;var d=Array.isArray(f);return a.some(function(a){a=a.__accessorMetadata__;if(!a||!a.type||!a.type.value)return!1;a=a.type.value;return d?-1!==f.indexOf(a):a===f})}})},"esri/support/basemapUtils":function(){define("require exports ./basemapDefinitions ../core/accessorSupport/ensureType ../core/urlUtils ../core/Logger ../Basemap".split(" "),function(a,h,m,f,d,c,n){function e(a,b){var k;if("string"==typeof a){if(!(a in
m))return b=Object.keys(m).map(function(a){return'"'+a+'"'}).join(", "),u.warn("Unable to find basemap definition for: "+a+". Try one of these: "+b),null;b&&(k=b[a]);k||(k=n.fromId(a),b&&(b[a]=k))}else k=f["default"](n,a);return k}function l(a,b){return a.map(function(a){return b.find(function(b){var k=q(a);b=q(b);return k.type===b.type&&k.url===b.url})||a})}function b(a){return a?!a.loaded&&a.resourceInfo?t(a.resourceInfo):{baseLayers:g(a.baseLayers),referenceLayers:g(a.referenceLayers)}:null}function g(a){return(Array.isArray(a)?
a:a.toArray()).map(q)}function q(a){return{type:a.type,url:p(a.urlTemplate||a.url||a.styleUrl)}}function t(a){return a?{baseLayers:w(a.baseMapLayers.filter(function(a){return!a.isReference})),referenceLayers:w(a.baseMapLayers.filter(function(a){return a.isReference}))}:null}function w(a){return a.map(function(a){var b;switch(a.layerType){case "VectorTileLayer":b="vector-tile";break;case "ArcGISTiledMapServiceLayer":b="tile";break;default:b="unknown"}return{type:b,url:p(a.templateUrl||a.urlTemplate||
a.styleUrl||a.url)}})}function v(a,b,c){return null!=a!=(null!=b)?"not-equal":a?r(a.baseLayers,b.baseLayers)?r(a.referenceLayers,b.referenceLayers)?"equal":c.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function r(a,b){return a.length!==b.length?!1:!a.some(function(a){return!b.some(function(b){return a.type===b.type&&a.url===b.url})})}function p(a){return a?d.normalize(a).replace(/^\s*https?:/i,"").toLowerCase():""}Object.defineProperty(h,"__esModule",{value:!0});var u=
c.getLogger("esri.Basemap");h.createCache=function(){return{}};h.ensureType=e;h.clonePreservingTiledLayers=function(a,b){void 0===b&&(b=null);a=e(a);if(!a)return null;a=new n({id:a.id,title:a.title,baseLayers:a.baseLayers.slice(),referenceLayers:a.referenceLayers.slice()});return b&&(a.baseLayers=l(a.baseLayers,b.baseLayers),a.referenceLayers=l(a.referenceLayers,b.referenceLayers)),a};h.getWellKnownBasemapId=function(a){var k=null;a=b(a);for(var c in m){var d=t(m[c]),d=v(a,d,{mustMatchReferences:!1});
if("equal"===d){k=c;break}"base-layers-equal"===d&&(k=c)}return k};h.contentEquals=function(a,c){if(a===c)return!0;a=b(a);c=b(c);return"equal"===v(a,c,{mustMatchReferences:!0})}})},"esri/support/basemapDefinitions":function(){define(["require","exports","dojo/i18n!../nls/basemaps"],function(a,h,m){return{streets:{id:"streets",title:m.streets,thumbnailUrl:a.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",title:m.satellite,thumbnailUrl:a.toUrl("../images/basemap/satellite.jpg"),baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",title:m.hybrid,thumbnailUrl:a.toUrl("../images/basemap/hybrid.jpg"),
baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",
title:m.terrain,thumbnailUrl:a.toUrl("../images/basemap/terrain.jpg"),baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,
showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",title:m.topo,thumbnailUrl:a.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",title:m.gray,thumbnailUrl:a.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",title:m["dark-gray"],thumbnailUrl:a.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",title:m.oceans,thumbnailUrl:a.toUrl("../images/basemap/oceans.jpg"),
baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",
title:m["national-geographic"],thumbnailUrl:a.toUrl("../images/basemap/national-geographic.jpg"),baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",title:m.osm,thumbnailUrl:a.toUrl("../images/basemap/osm.jpg"),baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",title:m["dark-gray"],thumbnailUrl:a.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/5ad3948260a147a993ef4865e3fad476/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Dark Gray",visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",title:m.gray,thumbnailUrl:a.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",
styleUrl:"//www.arcgis.com/sharing/rest/content/items/5dd75c1a544b46c3af01ba5736bfdfa0/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Light Gray",visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",title:m.streets,thumbnailUrl:a.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/a60a37a27cc140ddad15f919cd5a69f2/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",
visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",title:m.topo,thumbnailUrl:a.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/86d5ed4b6dc741de9dad5f0fbe09ae95/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",title:m["streets-night-vector"],thumbnailUrl:a.toUrl("../images/basemap/streets-night.jpg"),baseMapLayers:[{id:"streets-night-vector-base-layer",
styleUrl:"//www.arcgis.com/sharing/rest/content/items/92c551c9f07b4147846aae273e822714/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",title:m["streets-relief-vector"],thumbnailUrl:a.toUrl("../images/basemap/streets-relief.jpg"),baseMapLayers:[{id:"streets-relief-vector-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",
title:"World Streets Relief Base",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-reference-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/78c0a9ab4fbf4198a8b951848aab19d8/resources/styles/root.json",title:"World Streets Relief Reference",layerType:"VectorTileLayer",showLegend:!1,visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",title:m["streets-navigation-vector"],thumbnailUrl:a.toUrl("../images/basemap/streets-navigation.jpg"),
baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/e19e9330bf08490ca8353d76b5e2e658/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]}}})},"esri/nls/basemaps":function(){define({root:{streets:"Streets",satellite:"Imagery",hybrid:"Imagery with Labels",terrain:"Terrain with Labels",topo:"Topographic",gray:"Light Gray Canvas","dark-gray":"Dark Gray Canvas",oceans:"Oceans","national-geographic":"National Geographic",
osm:"OpenStreetMap","streets-night-vector":"World Street Map (Night)","streets-relief-vector":"World Street Map (with Relief)","streets-navigation-vector":"World Navigation Map"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/Basemap":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/accessorSupport/decorators dojo/_base/lang ./support/basemapDefinitions ./core/Collection ./core/collectionUtils ./core/Evented ./core/JSONSupport ./core/Loadable ./core/promiseUtils ./core/requireUtils ./core/urlUtils ./core/Logger ./portal/Portal ./portal/PortalItem ./layers/Layer".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k){var x=0,B=e.ofType(k),y=r.getLogger("esri.Basemap");h=z=function(b){function k(a){a=b.call(this)||this;a.id=null;a.portalItem=null;a.resourceInfo=null;a.thumbnailUrl=null;a.title="Basemap";a.id=Date.now().toString(16)+"-basemap-"+x++;a.baseLayers=new e;a.referenceLayers=new e;var k=function(a){"elevation"===a.type&&y.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as a basemap layer and will therefore be ignored.")};return a.baseLayers.on("after-add",
function(a){return k(a.item)}),a.referenceLayers.on("after-add",function(a){return k(a.item)}),a}return m(k,b),k.prototype.initialize=function(){var a=this;this.otherwise(function(b){y.error("#load()","Failed to load basemap (title: '"+a.title+"', id: '"+a.id+"')",b)});this.resourceInfo&&this.read(this.resourceInfo)},Object.defineProperty(k.prototype,"baseLayers",{set:function(a){this._set("baseLayers",l.referenceSetter(a,this._get("baseLayers"),B))},enumerable:!0,configurable:!0}),k.prototype.writeBaseLayers=
function(a,b,k,d){var g=[];return a?(d=c.mixin({},d,{layerContainerType:"basemap"}),this.baseLayers.forEach(function(a){if(a.write){var b={};a.write(b,d)&&g.push(b)}}),this.referenceLayers.forEach(function(a){if(a.write){var b={isReference:!0};a.write(b,d)&&g.push(b)}}),void(b.baseMapLayers=g)):g},Object.defineProperty(k.prototype,"referenceLayers",{set:function(a){this._set("referenceLayers",l.referenceSetter(a,this._get("referenceLayers"),B))},enumerable:!0,configurable:!0}),k.prototype.writeTitle=
function(a,b){b.title=a||"Basemap"},k.prototype.load=function(){return this.addResolvingPromise(this._loadFromSource()),this},k.prototype.clone=function(){var a={id:this.id,title:this.title};return this.resourceInfo||this.portalItem?(a.portalItem=this.portalItem,a.resourceInfo=this.resourceInfo):(a.baseLayers=this.baseLayers.slice(),a.referenceLayers=this.referenceLayers.slice()),new z(a)},k.prototype.read=function(a,b){return!b||"web-scene"!==b.origin&&"web-map"!==b.origin||(this._layerOrigin=b.origin),
b&&b.portal&&(this._layerPortal=b.portal),this.inherited(arguments)},k.prototype.write=function(a,b){return a=a||{},b&&b.origin||(b=c.mixin({origin:"web-map"},b)),this.inherited(arguments,[a,b]),!this.loaded&&this.resourceInfo&&this.resourceInfo.baseMapLayers&&(a.baseMapLayers=this.resourceInfo.baseMapLayers.map(function(a){a=c.clone(a);return a.url&&v.isProtocolRelative(a.url)&&(a.url="https:"+a.url),a.templateUrl&&v.isProtocolRelative(a.templateUrl)&&(a.templateUrl="https:"+a.templateUrl),a})),
a},k.prototype._loadFromSource=function(){var a=this.resourceInfo,b=this.portalItem;return a?this._loadFromJSON(a):b?this._loadFromItem(b):t.resolve(null)},k.prototype._loadFromJSON=function(b,k){var c=this,d=this.portalItem&&this.portalItem.portal||this._layerPortal||null;return w.when(a,"./portal/support/layersCreator").then(function(a){var g=[];if(b.baseMapLayers&&Array.isArray(b.baseMapLayers)){var e={context:{origin:c._layerOrigin||"web-map",layerContainerType:"basemap",url:k,portal:d},defaultLayerType:"DefaultTileLayer"},
l=a.populateOperationalLayers(c.baseLayers,b.baseMapLayers.filter(function(a){return!a.isReference}),e);g.push.apply(g,l);a=a.populateOperationalLayers(c.referenceLayers,b.baseMapLayers.filter(function(a){return a.isReference}),e);g.push.apply(g,a)}return t.eachAlways(g)}).then(function(){})},k.prototype._loadFromItem=function(a){var b=this;return a.load().then(function(a){return a.fetchData()}).then(function(k){var c=v.urlToObject(a.itemUrl);return b.resourceInfo=k.baseMap,b.read(b.resourceInfo,
{origin:"web-map",portal:a.portal||p.getDefault(),url:c}),b.read({title:a.title,thumbnailUrl:a.thumbnailUrl},{origin:"portal-item",portal:a.portal||p.getDefault(),url:c}),b._loadFromJSON(b.resourceInfo,c)})},k.fromJSON=function(a){return a?new z({resourceInfo:a}):null},k.fromId=function(a){return(a=n[a])?z.fromJSON(a):null},k}(d.declared(g,b,q));f([d.property({type:B,json:{write:{ignoreOrigin:!0}}}),d.cast(l.castForReferenceSetter)],h.prototype,"baseLayers",null);f([d.writer("baseLayers")],h.prototype,
"writeBaseLayers",null);f([d.property({json:{origins:{webScene:{write:!0}}}})],h.prototype,"id",void 0);f([d.property({type:u})],h.prototype,"portalItem",void 0);f([d.property({type:B}),d.cast(l.castForReferenceSetter)],h.prototype,"referenceLayers",null);f([d.property()],h.prototype,"resourceInfo",void 0);f([d.property()],h.prototype,"thumbnailUrl",void 0);f([d.property()],h.prototype,"title",void 0);f([d.writer("title")],h.prototype,"writeTitle",null);h=z=f([d.subclass("esri.Basemap")],h);var z;
return h})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/accessorSupport/decorators ../core/Error ../config ../identity/IdentityManager ../request ../geometry/Extent ../core/JSONSupport ../core/Loadable ./PortalQueryParams ./PortalQueryResult ./PortalUser ../core/promiseUtils ../core/requireUtils ../core/urlUtils dojo/promise/all dojo/_base/kernel dojo/_base/lang".split(" "),function(a,
h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k,x,B,y){var z;h=A=function(c){function d(a){a=c.call(this)||this;return a.access=null,a.allSSL=!1,a.authMode=A.AUTH_MODE_AUTO,a.authorizedCrossOriginDomains=null,a.basemapGalleryGroupQuery=null,a.bingKey=null,a.canListApps=!1,a.canListData=!1,a.canListPreProvisionedItems=!1,a.canProvisionDirectPurchase=!1,a.canSearchPublic=!1,a.canShareBingPublic=!1,a.canSharePublic=!1,a.canSignInArcGIS=!1,a.canSignInIDP=!1,a.colorSetsGroupQuery=null,a.commentsEnabled=!1,a.created=
null,a.culture=null,a.customBaseUrl=null,a.defaultBasemap=null,a.defaultExtent=null,a.defaultVectorBasemap=null,a.description=null,a.featuredGroups=null,a.featuredItemsGroupQuery=null,a.galleryTemplatesGroupQuery=null,a.livingAtlasGroupQuery=null,a.helperServices=null,a.homePageFeaturedContent=null,a.homePageFeaturedContentCount=null,a.httpPort=null,a.httpsPort=null,a.id=null,a.ipCntryCode=null,a.isPortal=!1,a.layerTemplatesGroupQuery=null,a.maxTokenExpirationMinutes=null,a.modified=null,a.name=null,
a.portalHostname=null,a.portalMode=null,a.portalProperties=null,a.region=null,a.rotatorPanels=null,a.showHomePageDescription=!1,a.supportsHostedServices=!1,a.symbolSetsGroupQuery=null,a.templatesGroupQuery=null,a.units=null,a.url=e.portalUrl,a.urlKey=null,a.user=null,a.useStandardizedQuery=!1,a.useVectorBasemaps=!1,a.vectorBasemapGalleryGroupQuery=null,a}return m(d,c),d.prototype.normalizeCtorArgs=function(a){return"string"==typeof a?{url:a}:a},d.prototype.initialize=function(){var a=this;this._esriId_credentialCreateHandle=
l.on("credential-create",function(){a.loaded&&!a.credential&&a.authMode===A.AUTH_MODE_AUTO&&l.findCredential(a.restUrl)&&a._signIn()})},d.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)},d.prototype.readAuthorizedCrossOriginDomains=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b],d=c;k.hasProtocol(d)||(d=k.appUrl.scheme+"://"+d);k.canUseXhr(d)||e.request.corsEnabledServers.push({host:c,
withCredentials:!0})}return a},d.prototype.readDefaultBasemap=function(a){return a?(a=z.fromJSON(a),a.portalItem={portal:this},a):null},d.prototype.readDefaultVectorBasemap=function(a){return a?(a=z.fromJSON(a),a.portalItem={portal:this},a):null},Object.defineProperty(d.prototype,"extraQuery",{get:function(){return this.id&&!this.canSearchPublic?" AND orgid:"+this.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"isOrganization",{get:function(){return!!this.access},enumerable:!0,
configurable:!0}),Object.defineProperty(d.prototype,"restUrl",{get:function(){var a=this.url;if(a)var b=a.indexOf("/sharing"),a=0<b?a.substring(0,b):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"thumbnailUrl",{get:function(){var a=this.restUrl,b=this.thumbnail;return a&&b?this._normalizeSSL(a+"/portals/self/resources/"+b):null},enumerable:!0,configurable:!0}),d.prototype.readUser=function(a){var b=null;return a&&(b=r.fromJSON(a),
b.portal=this),b},d.prototype.load=function(){var b=this,k=p.resolve().then(function(){return b.authMode===A.AUTH_MODE_IMMEDIATE?l.getCredential(b.restUrl):b.authMode===A.AUTH_MODE_AUTO?l.checkSignInStatus(b.restUrl).otherwise(function(){return null}):null}).then(function(k){return b.credential=k,u.when(a,"../Basemap")}).then(function(a){z=a}).then(function(){return b._fetchSelf()}).then(function(a){b.read(a)});return this.addResolvingPromise(k),this},d.prototype.fetchBasemaps=function(){var a=new w;
return a.query=this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery,a.disableExtraQuery=!0,this.queryGroups(a).then(function(b){return(a.num=100,a.query='type:"Web Map" -type:"Web Application"',b.total)?(b=b.results[0],a.sortField=b.sortField||"name",a.sortOrder=b.sortOrder||"desc",b.queryItems(a)):null}).then(function(a){return a&&a.total?a.results.filter(function(a){return"Web Map"===a.type}).map(function(a){return new z({portalItem:a})}):[]})},d.prototype.fetchFeaturedGroups=
function(){var a=this.featuredGroups,b=new w;if(b.num=100,b.sortField="title",a&&a.length){for(var k=[],c=0;c<a.length;c++){var d=a[c];k.push('(title:"'+d.title+'" AND owner:'+d.owner+")")}return b.query=k.join(" OR "),this.queryGroups(b).then(function(a){return a.results})}return p.resolve([])},d.getDefault=function(){return A._default||(A._default=new A),A._default},d.prototype.queryGroups=function(a){return this._queryPortal("/community/groups",a,"PortalGroup")},d.prototype.queryItems=function(a){return this._queryPortal("/search",
a,"PortalItem")},d.prototype.queryUsers=function(a){return a.sortField||(a.sortField="username"),this._queryPortal("/community/users",a,"PortalUser")},d.prototype.toJSON=function(){throw new n("internal:not-yet-implemented","Portal.toJSON is not yet implemented");},d.prototype._fetchSelf=function(){return this._request(this.restUrl+"/portals/self",{query:{culture:B.locale}})},d.prototype._queryPortal=function(b,k,c){var d=this,g=function(a){return d._request(d.restUrl+b,k.toRequestOptions(d)).then(function(b){var c=
k.clone();return c.start=b.nextStart,new v({nextQueryParams:c,queryParams:k,total:b.total,results:A._resultsToTypedArray(a,{portal:d},b)})}).then(function(a){return x(a.results).always(function(){return a})})};return c?u.when(a,"./"+c).then(function(a){return g(a)}):g()},d.prototype._signIn=function(){var a=this;return this.authMode===A.AUTH_MODE_ANONYMOUS?p.reject(new n("portal:invalid-auth-mode",'Current "authMode"\' is "'+this.authMode+'"')):"failed"===this.loadStatus?p.reject(this.loadError):
l.getCredential(this.restUrl).then(function(b){return"not-loaded"===a.loadStatus?a.load().then(function(){return null}):"loading"===a.loadStatus?a.load().then(function(){return a.credential?null:(a.credential=b,a._fetchSelf())}):a.user&&a.credential===b?null:(a.credential=b,a._fetchSelf())}).then(function(b){b&&a.read(b)})},d.prototype._normalizeSSL=function(a){var b=this.allSSL||window&&"https:"===window.location.protocol;if(this.isPortal){var k=A._getLocation(a);if(-1<this.portalHostname.toLowerCase().indexOf(k.hostname.toLowerCase())&&
k.port&&"80"!==k.port&&"443"!==k.port)return a=k.pathname,0!==a.indexOf("/")&&(a="/"+a),b?"https://"+k.hostname+(this.httpsPort&&443!==this.httpsPort?":"+this.httpsPort:"")+a+k.search:"http://"+k.hostname+(this.httpPort&&80!==this.httpPort?":"+this.httpPort:"")+a+k.search}return b?a.replace("http:","https:"):a},d.prototype._normalizeUrl=function(a){var b=this.credential&&this.credential.token;return this._normalizeSSL(b?a+(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+b:a)},d.prototype._requestToTypedArray=
function(b,k,c){var d=this,g=function(a){return d._request(b,k).then(function(b){var k=A._resultsToTypedArray(a,{portal:d},b);return x(k).always(function(){return k})})};return c?u.when(a,"./"+c).then(function(a){return g(a)}):g()},d.prototype._request=function(a,k){var c,d={f:"json"},g={disableIdentityLookup:this.authMode===A.AUTH_MODE_ANONYMOUS};return k&&(y.mixin(d,k.query),c=k.responseType,g.method=k.method),b(this._normalizeSSL(a),y.mixin({callbackParamName:"callback",query:d,responseType:c,
timeout:0},g)).then(function(a){return a.data})},d._getLocation=function(a){var b=document.createElement("a");return b.href=a,{protocol:b.protocol,hostname:b.hostname,port:b.port,pathname:b.pathname,search:b.search,hash:b.hash,host:b.host}},d._resultsToTypedArray=function(a,b,k){var c;return k?(c=k.listings||k.notifications||k.userInvitations||k.tags||k.items||k.groups||k.comments||k.provisions||k.results||k.relatedItems||k,(a||b)&&(c=c.map(function(k){k=y.mixin(a?a.fromJSON(k):k,b);return"function"==
typeof k.load&&k.load(),k}))):c=[],c},d}(c.declared(q,t));h.AUTH_MODE_ANONYMOUS="anonymous";h.AUTH_MODE_AUTO="auto";h.AUTH_MODE_IMMEDIATE="immediate";f([c.property()],h.prototype,"access",void 0);f([c.property()],h.prototype,"allSSL",void 0);f([c.property()],h.prototype,"authMode",void 0);f([c.property()],h.prototype,"authorizedCrossOriginDomains",void 0);f([c.reader("authorizedCrossOriginDomains")],h.prototype,"readAuthorizedCrossOriginDomains",null);f([c.property()],h.prototype,"basemapGalleryGroupQuery",
void 0);f([c.property()],h.prototype,"bingKey",void 0);f([c.property()],h.prototype,"canListApps",void 0);f([c.property()],h.prototype,"canListData",void 0);f([c.property()],h.prototype,"canListPreProvisionedItems",void 0);f([c.property()],h.prototype,"canProvisionDirectPurchase",void 0);f([c.property()],h.prototype,"canSearchPublic",void 0);f([c.property()],h.prototype,"canShareBingPublic",void 0);f([c.property()],h.prototype,"canSharePublic",void 0);f([c.property()],h.prototype,"canSignInArcGIS",
void 0);f([c.property()],h.prototype,"canSignInIDP",void 0);f([c.property()],h.prototype,"colorSetsGroupQuery",void 0);f([c.property()],h.prototype,"commentsEnabled",void 0);f([c.property({type:Date})],h.prototype,"created",void 0);f([c.property()],h.prototype,"credential",void 0);f([c.property()],h.prototype,"culture",void 0);f([c.property()],h.prototype,"customBaseUrl",void 0);f([c.property()],h.prototype,"defaultBasemap",void 0);f([c.reader("defaultBasemap")],h.prototype,"readDefaultBasemap",null);
f([c.property({type:g})],h.prototype,"defaultExtent",void 0);f([c.property()],h.prototype,"defaultVectorBasemap",void 0);f([c.reader("defaultVectorBasemap")],h.prototype,"readDefaultVectorBasemap",null);f([c.property()],h.prototype,"description",void 0);f([c.property({dependsOn:["id","canSearchPublic"],readOnly:!0})],h.prototype,"extraQuery",null);f([c.property()],h.prototype,"featuredGroups",void 0);f([c.property()],h.prototype,"featuredItemsGroupQuery",void 0);f([c.property()],h.prototype,"galleryTemplatesGroupQuery",
void 0);f([c.property()],h.prototype,"livingAtlasGroupQuery",void 0);f([c.property()],h.prototype,"helpBase",void 0);f([c.property()],h.prototype,"helperServices",void 0);f([c.property()],h.prototype,"helpMap",void 0);f([c.property()],h.prototype,"homePageFeaturedContent",void 0);f([c.property()],h.prototype,"homePageFeaturedContentCount",void 0);f([c.property()],h.prototype,"httpPort",void 0);f([c.property()],h.prototype,"httpsPort",void 0);f([c.property()],h.prototype,"id",void 0);f([c.property()],
h.prototype,"ipCntryCode",void 0);f([c.property({dependsOn:["access"],readOnly:!0})],h.prototype,"isOrganization",null);f([c.property()],h.prototype,"isPortal",void 0);f([c.property()],h.prototype,"layerTemplatesGroupQuery",void 0);f([c.property()],h.prototype,"maxTokenExpirationMinutes",void 0);f([c.property({type:Date})],h.prototype,"modified",void 0);f([c.property()],h.prototype,"name",void 0);f([c.property()],h.prototype,"portalHostname",void 0);f([c.property()],h.prototype,"portalMode",void 0);
f([c.property()],h.prototype,"portalProperties",void 0);f([c.property()],h.prototype,"region",void 0);f([c.property({dependsOn:["url"],readOnly:!0})],h.prototype,"restUrl",null);f([c.property()],h.prototype,"rotatorPanels",void 0);f([c.property()],h.prototype,"showHomePageDescription",void 0);f([c.property()],h.prototype,"staticImagesUrl",void 0);f([c.property()],h.prototype,"stylesGroupQuery",void 0);f([c.property()],h.prototype,"supportsHostedServices",void 0);f([c.property()],h.prototype,"symbolSetsGroupQuery",
void 0);f([c.property()],h.prototype,"templatesGroupQuery",void 0);f([c.property()],h.prototype,"thumbnail",void 0);f([c.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],h.prototype,"thumbnailUrl",null);f([c.property()],h.prototype,"units",void 0);f([c.property()],h.prototype,"url",void 0);f([c.property()],h.prototype,"urlKey",void 0);f([c.property()],h.prototype,"user",void 0);f([c.reader("user")],h.prototype,"readUser",null);f([c.property()],h.prototype,"useStandardizedQuery",void 0);
f([c.property()],h.prototype,"useVectorBasemaps",void 0);f([c.property()],h.prototype,"vectorBasemapGalleryGroupQuery",void 0);f([d(1,c.cast(w))],h.prototype,"_queryPortal",null);h=A=f([c.subclass("esri.portal.Portal")],h);var A;return h})},"esri/core/tsSupport/paramHelper":function(){define([],function(){return function(a,h){return function(m,f){h(m,f,a)}}})},"esri/identity/IdentityManager":function(){define(["./IdentityManagerDialog","../kernel","./OAuthSignInHandler","../core/declare"],function(a,
h,m,f){a=new a;return h.id=f.safeMixin(a,m),h.id})},"esri/identity/IdentityManagerDialog":function(){define("dojo/_base/kernel ../core/declare dojo/_base/config dojo/Deferred dojo/_base/lang dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ../kernel ../core/lang ../core/domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/identity dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v){return h([w],{declaredClass:"esri.identity.IdentityManager",
constructor:function(a){d.mixin(this,a)},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblUser}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblPwd}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
signIn:function(a,b,d){this._nls||(this._nls=v);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.emit("dialog-create"));var k=this._loginDialog,g=d&&d.error,e=d&&d.token,l=new f(function(){k.onCancel()});return k.open?(a=Error("BUSY"),a.code="IdentityManager.1",a.log=!!m.isDebug,l.reject(a),l.promise):(q.hide(k.errMsg_),g&&403==g.code&&e&&(c.set(k.errMsg_,"innerHTML",this._nls.forbidden),q.show(k.errMsg_)),k.dfd_=l,k.serverInfo_=b,k.resUrl_=a,k.admin_=d&&d.isAdmin,
c.set(k.resLink_,{title:a,innerHTML:"("+(this.getResourceName(a)||this._nls.lblItem)+")"}),c.set(k.serverLink_,{title:b.server,innerHTML:(-1!==b.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":b.server)+" "}),k.txtPwd_.set("value",""),k.show(),l.promise)},_createLoginDialog:function(){var d=this._nls,p=g.substitute(d,this._dialogContent),p=g.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},
p),f=new l({title:d.title,content:p,"class":" esri-widget esriSignInDialog esriIdentityDialog",style:"width: 18em;",esriIdMgr_:this,onShow:function(){this.domNode.classList.add("esriIdentityDialog--visible")},onHide:function(){this.domNode.classList.remove("esriIdentityDialog--visible")},keypressed_:function(a){a.charOrCode===n.ENTER&&this.execute_()},execute_:function(){var a=this.txtUser_.get("value"),e=this.txtPwd_.get("value"),p=this.dfd_,f=this;if(this.form_.validate()&&a&&e){this.btnSubmit_.set("label",
d.lblSigning);var n=b.id.findCredential(f.resUrl_,a),h=function(b){f.btnSubmit_.set("label",d.lblOk);f.btnSubmit_.set("disabled",!1);q.hide(f.errMsg_);f.hide();l._DialogLevelManager.hide(f);var k=f.serverInfo_;f.dfd_=f.serverInfo_=f.generateDfd_=f.resUrl_=null;var c,e,x,h=n;b&&(c=b.token,e=g.isDefined(b.expires)?Number(b.expires):null,x=!!b.ssl,h?(h.userId=a,h.token=c,h.expires=e,h.validity=b.validity,h.ssl=x,h.creationTime=(new Date).getTime()):h=new t({userId:a,server:k.server,token:c,expires:e,
ssl:x,isAdmin:f.admin_,validity:b.validity}));p.resolve(h)};if(n&&!n._enqueued)return void h();f.btnSubmit_.set("disabled",!0);f.generateDfd_=b.id.generateToken(this.serverInfo_,{username:a,password:e},{isAdmin:this.admin_}).then(h).then(null,function(a){f.btnSubmit_.set("disabled",!1);f.generateDfd_=null;f.btnSubmit_.set("label",d.lblOk);c.set(f.errMsg_,"innerHTML",a&&a.code?d.invalidUser:d.noAuthService);q.show(f.errMsg_)})}},cancel_:function(){f.generateDfd_&&f.generateDfd_.cancel();var a=f.dfd_,
b=f.resUrl_,c=f.serverInfo_;f.btnSubmit_.set("disabled",!1);f.dfd_=f.serverInfo_=f.generateDfd_=f.resUrl_=null;q.hide(f.errMsg_);l._DialogLevelManager.hide(f);f.esriIdMgr_.emit("dialog-cancel",{resourceUrl:b,serverInfo:c});b=Error("ABORTED");b.code="IdentityManager.2";b.log=!!m.isDebug;a.reject(b)}}),p=f.domNode;return f.form_=e.byNode(a.query(".esriIdForm",p)[0]),f.txtUser_=e.byNode(a.query(".esriIdUser",p)[0]),f.txtPwd_=e.byNode(a.query(".esriIdPwd",p)[0]),f.btnSubmit_=e.byNode(a.query(".esriIdSubmit",
p)[0]),f.btnCancel_=e.byNode(a.query(".esriIdCancel",p)[0]),f.resLink_=a.query(".resLink",p)[0],f.serverLink_=a.query(".serverLink",p)[0],f.errMsg_=a.query(".esriErrorMsg",p)[0],f.connect(f.txtUser_,"onKeyPress",f.keypressed_),f.connect(f.txtPwd_,"onKeyPress",f.keypressed_),f.connect(f.btnSubmit_,"onClick",f.execute_),f.connect(f.btnCancel_,"onClick",f.onCancel),f.connect(f,"onCancel",f.cancel_),f}})})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),
function(a,h,m,f,d,c){function n(a,c){a=a.getAttributeNode&&a.getAttributeNode(c);return!!a&&a.specified}var e={innerHTML:1,textContent:1,className:1,htmlFor:h("ie"),value:1},l={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};a.has=function(a,d){var b=d.toLowerCase();return e[c.names[b]||d]||n(f.byId(a),l[b]||d)};a.get=function(a,d){a=f.byId(a);var b=d.toLowerCase(),g=c.names[b]||d,h=a[g];if(e[g]&&"undefined"!=typeof h)return h;if("textContent"==g)return c.get(a,g);if("href"!=
g&&("boolean"==typeof h||m.isFunction(h)))return h;d=l[b]||d;return n(a,d)?a.getAttribute(d):null};a.set=function(b,g,n){b=f.byId(b);if(2==arguments.length){for(var h in g)a.set(b,h,g[h]);return b}h=g.toLowerCase();var q=c.names[h]||g,v=e[q];if("style"==q&&"string"!=typeof n)return d.set(b,n),b;if(v||"boolean"==typeof n||m.isFunction(n))return c.set(b,g,n);b.setAttribute(l[h]||g,n);return b};a.remove=function(a,c){f.byId(a).removeAttribute(l[c.toLowerCase()]||c)};a.getNodeProp=function(a,d){a=f.byId(a);
var b=d.toLowerCase(),g=c.names[b]||d;if(g in a&&"href"!=g)return a[g];d=l[b]||d;return n(a,d)?a.getAttribute(d):null}})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(a,h,m,f,d,c,n,e){function l(a){var b="";a=a.childNodes;for(var c=0,d;d=a[c];c++)8!=d.nodeType&&(b=1==d.nodeType?b+l(d):b+d.nodeValue);return b}var b={},g=1,q=h._scopeName+"attrid";m.add("dom-textContent",function(a,b,c){return"textContent"in
c});a.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};a.get=function(b,c){b=d.byId(b);var g=c.toLowerCase();c=a.names[g]||c;return"textContent"!=c||m("dom-textContent")?b[c]:l(b)};a.set=function(l,h,v){l=d.byId(l);if(2==arguments.length&&"string"!=typeof h){for(var r in h)a.set(l,r,h[r]);return l}r=h.toLowerCase();r=a.names[r]||h;if("style"==r&&"string"!=
typeof v)return c.set(l,v),l;if("innerHTML"==r)return m("ie")&&l.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(n.empty(l),l.appendChild(n.toDom(v,l.ownerDocument))):l[r]=v,l;if("textContent"==r&&!m("dom-textContent"))return n.empty(l),l.appendChild(l.ownerDocument.createTextNode(v)),l;if(f.isFunction(v)){var p=l[q];p||(p=g++,l[q]=p);b[p]||(b[p]={});var u=b[p][r];if(u)e.disconnect(u);else try{delete l[r]}catch(k){}v?b[p][r]=e.connect(l,r,v):l[r]=null;return l}l[r]=
v;return l}})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(a,h,m,f,d,c){function n(a,b){var k=b.parentNode;k&&k.insertBefore(a,b)}function e(a){if("innerHTML"in a)try{a.innerHTML="";return}catch(x){}for(var b;b=a.lastChild;)a.removeChild(b)}var l={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],
colgroup:["table"],col:["table","colgroup"],li:["ul"]},b=/<\s*([\w\:]+)/,g={},q=0,t="__"+h._scopeName+"ToDomId",w;for(w in l)l.hasOwnProperty(w)&&(h=l[w],h.pre="option"==w?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+h.join("\x3e\x3c")+"\x3e",h.post="\x3c/"+h.reverse().join("\x3e\x3c/")+"\x3e");var v;8>=m("ie")&&(v=function(a){a.__dojo_html5_tested="yes";var b=r("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},a.body);1!==b.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,
function(b){a.createElement(b)});p(b)});a.toDom=function(a,k){k=k||f.doc;var c=k[t];c||(k[t]=c=++q+"",g[c]=k.createElement("div"));8>=m("ie")&&!k.__dojo_html5_tested&&k.body&&v(k);a+="";var d=a.match(b),e=d?d[1].toLowerCase():"",c=g[c];if(d&&l[e])for(d=l[e],c.innerHTML=d.pre+a+d.post,a=d.length;a;--a)c=c.firstChild;else c.innerHTML=a;if(1==c.childNodes.length)return c.removeChild(c.firstChild);for(a=k.createDocumentFragment();k=c.firstChild;)a.appendChild(k);return a};a.place=function(b,k,c){k=d.byId(k);
"string"==typeof b&&(b=/^\s*</.test(b)?a.toDom(b,k.ownerDocument):d.byId(b));if("number"==typeof c){var g=k.childNodes;!g.length||g.length<=c?k.appendChild(b):n(b,g[0>c?0:c])}else switch(c){case "before":n(b,k);break;case "after":c=b;(g=k.parentNode)&&(g.lastChild==k?g.appendChild(c):g.insertBefore(c,k.nextSibling));break;case "replace":k.parentNode.replaceChild(b,k);break;case "only":a.empty(k);k.appendChild(b);break;case "first":if(k.firstChild){n(b,k.firstChild);break}default:k.appendChild(b)}return b};
var r=a.create=function(b,k,g,e){var l=f.doc;g&&(g=d.byId(g),l=g.ownerDocument);"string"==typeof b&&(b=l.createElement(b));k&&c.set(b,k);g&&a.place(b,g,e);return b};a.empty=function(a){e(d.byId(a))};var p=a.destroy=function(a){if(a=d.byId(a)){var b=a;a=a.parentNode;b.firstChild&&e(b);a&&(m("ie")&&a.canHaveChildren&&"removeNode"in b?b.removeNode(!1):a.removeChild(b))}}})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(a,h,m){var f={},d={},c={length:0,
add:function(a){if(d[a.id])throw Error("Tried to register widget with id\x3d\x3d"+a.id+" but that id is already registered");d[a.id]=a;this.length++},remove:function(a){d[a]&&(delete d[a],this.length--)},byId:function(a){return"string"==typeof a?d[a]:a},byNode:function(a){return d[a.getAttribute("widgetId")]},toArray:function(){var a=[],c;for(c in d)a.push(d[c]);return a},getUniqueId:function(a){var c;do c=a+"_"+(a in f?++f[a]:f[a]=0);while(d[c]);return"dijit"==m._scopeName?c:m._scopeName+"_"+c},
findWidgets:function(a,c){function e(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType){var g=a.getAttribute("widgetId");g?(g=d[g])&&b.push(g):a!==c&&e(a)}}var b=[];e(a);return b},_destroyAll:function(){m._curFocus=null;m._prevFocus=null;m._activeStack=[];a.forEach(c.findWidgets(h.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(a){for(;a;){var c=1==a.nodeType&&a.getAttribute("widgetId");if(c)return d[c];a=a.parentNode}return null},
_hash:d};return m.registry=c})},"dijit/main":function(){define(["dojo/_base/kernel"],function(a){return a.dijit})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k,x,B,y,z,A,D,F,C,H,I,M,Q){function K(){}var G=new d;G.resolve(!0);y=f("dijit._DialogBase"+(r("dojo-bidi")?"_NoBidi":""),[A,F,C,D],{templateString:Q,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:y.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:.9,
closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=g.getLocalization("dijit","common");t.mixin(this,a);this.inherited(arguments)},postCreate:function(){l.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);m.after(this,"onExecute",t.hitch(this,"hide"),!0);m.after(this,"onCancel",t.hitch(this,"hide"),!0);w(this.closeButtonNode,
p.press,function(a){a.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&S.isTop(this)&&(this._getFocusItems(),B.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();B.focus(this._firstFocusItem)},_endDrag:function(){var a=e.position(this.domNode),b=u.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==r("ie")?x:k)(a,{handle:this.titleBar}),m.after(this._moveable,"onMoveStop",t.hitch(this,"_endDrag"),!0)):n.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":h.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:t.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!n.contains(this.ownerDocumentBody,"dojoMove")){var a=
this.domNode,b=u.getBox(this.ownerDocument),k=this._relativePosition,c=e.position(a);l.set(a,{left:Math.floor(b.l+(k?Math.min(k.x,b.w-c.w):(b.w-c.w)/2))+"px",top:Math.floor(b.t+(k?Math.min(k.y,b.h-c.h):(b.h-c.h)/2))+"px"})}},_onKey:function(a){if(a.keyCode==q.TAB){this._getFocusItems();var b=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(B.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||
a.shiftKey||(B.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==q.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return G.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),S.hide(this));var a=u.get(this.ownerDocument);this._modalconnects.push(w(a,"scroll",t.hitch(this,"resize",null)));this._modalconnects.push(w(this.domNode,
"keydown",t.hitch(this,"_onKey")));l.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();var k;this._fadeInDeferred=new d(t.hitch(this,function(){k.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,K);a=this._fadeInDeferred.promise;k=b.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:t.hitch(this,function(){S.show(this,this.underlayAttrs)}),onEnd:t.hitch(this,function(){this.autofocus&&S.isTop(this)&&(this._getFocusItems(),
B.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return a},hide:function(){if(!this._alreadyInitialized||!this.open)return G.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new d(t.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,K);this._fadeOutDeferred.then(t.hitch(this,"onHide"));var k=this._fadeOutDeferred.promise;a=b.fadeOut({node:this.domNode,duration:this.duration,
onEnd:t.hitch(this,function(){this.domNode.style.display="none";S.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var c;c=this._modalconnects.pop();)c.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return k},resize:function(a){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!a){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),h.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(a){a&&l.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var b=u.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;var k=e.position(this.domNode);k.w>=b.w||k.h>=b.h?(a={w:Math.min(k.w,b.w),h:Math.min(k.h,b.h)},this._shrunk=!0):this._shrunk=!1}if(a){e.setMarginBox(this.domNode,
a);b=[];this.titleBar&&b.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&b.push({domNode:this.actionBarNode,region:"bottom"});k={domNode:this.containerNode,region:"center"};b.push(k);var c=M.marginBox2contentBox(this.domNode,a);M.layoutChildren(this.domNode,c,b);this._singleChild?(b=M.marginBox2contentBox(this.containerNode,k),this._singleChild.resize({w:b.w,h:b.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();r("touch")||a||this._position()}},
_layoutChildren:function(){h.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();S.hide(this);this.inherited(arguments)}});r("dojo-bidi")&&(y=f("dijit._DialogBase",y,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},
_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var N=f("dijit.Dialog",[I,y],{});N._DialogBase=y;var S=N._DialogLevelManager={_beginZIndex:950,show:function(a,b){J[J.length-1].focus=B.curNode;var k=J[J.length-1].dialog?J[J.length-1].zIndex+2:N._DialogLevelManager._beginZIndex;l.set(a.domNode,"zIndex",k);H.show(b,k-1);J.push({dialog:a,underlayAttrs:b,zIndex:k})},hide:function(a){if(J[J.length-1].dialog==a){J.pop();var b=J[J.length-
1];1==J.length?H.hide():H.show(b.underlayAttrs,b.zIndex-1);if(a.refocus&&(a=b.focus,!b.dialog||a&&c.isDescendant(a,b.dialog.domNode)||(b.dialog._getFocusItems(),a=b.dialog._firstFocusItem),a))try{a.focus()}catch(P){}}else b=h.indexOf(h.map(J,function(a){return a.dialog}),a),-1!=b&&J.splice(b,1)},isTop:function(a){return J[J.length-1].dialog==a}},J=N._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];B.watch("curNode",function(a,b,k){a=J[J.length-1].dialog;if(k&&a&&!a._fadeOutDeferred&&k.ownerDocument==
a.ownerDocument){do if(k==a.domNode||n.contains(k,"dijitPopup"))return;while(k=k.parentNode);a.focus()}});r("dijit-legacy-requires")&&v(0,function(){a(["dijit/TooltipDialog"])});return N})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(a,h,m){function f(a){if("string"==typeof a||a instanceof String){if(a&&!c.test(a))return n[0]=a,n;a=a.split(c);a.length&&!a[0]&&a.shift();a.length&&!a[a.length-1]&&a.pop();return a}return a?h.filter(a,function(a){return a}):[]}
var d,c=/\s+/,n=[""],e={};return d={contains:function(a,b){return 0<=(" "+m.byId(a).className+" ").indexOf(" "+b+" ")},add:function(a,b){a=m.byId(a);b=f(b);var c=a.className,d,c=c?" "+c+" ":" ";d=c.length;for(var e=0,l=b.length,n;e<l;++e)(n=b[e])&&0>c.indexOf(" "+n+" ")&&(c+=n+" ");d<c.length&&(a.className=c.substr(1,c.length-2))},remove:function(c,b){c=m.byId(c);var d;if(void 0!==b){b=f(b);d=" "+c.className+" ";for(var e=0,l=b.length;e<l;++e)d=d.replace(" "+b[e]+" "," ");d=a.trim(d)}else d="";c.className!=
d&&(c.className=d)},replace:function(a,b,c){a=m.byId(a);e.className=a.className;d.remove(e,c);d.add(e,b);a.className!==e.className&&(a.className=e.className)},toggle:function(a,b,c){a=m.byId(a);if(void 0===c){b=f(b);for(var g=0,e=b.length,l;g<e;++g)l=b[g],d[d.contains(a,l)?"remove":"add"](a,l)}else d[c?"add":"remove"](a,b);return c}}})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(a,h,m,f,d,c,n,e,l){var b=
m.mixin,g={},q=g._Line=function(a,b){this.start=a;this.end=b};q.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var t=g.Animation=function(a){b(this,a);m.isArray(this.curve)&&(this.curve=new q(this.curve[0],this.curve[1]))};t.prototype=new f;m.extend(t,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){b=b||[];if(this[a])if(h.debugAtAllCosts)this[a].apply(this,b);else try{this[a].apply(this,
b)}catch(B){console.error("exception in animation handler for:",a),console.error(B)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);a=a||this.delay;b=m.hitch(this,"_play",b);if(0<a)return this._delayTimer=setTimeout(b,a),this;b();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();
this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,
b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?
1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);
delete this._delayTimer}});var w=0,v=null,r={run:function(){}};m.extend(t,{_startTimer:function(){this._timer||(this._timer=c.after(r,"run",m.hitch(this,"_cycle"),!0),w++);v||(v=setInterval(m.hitch(r,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,w--);0>=w&&(clearInterval(v),v=null,w=0)}});var p=n("ie")?function(a){var b=a.style;b.width.length||"auto"!=l.get(a,"width")||(b.width="auto")}:function(){};g._fade=function(a){a.node=e.byId(a.node);var k=b({properties:{}},
a);a=k.properties.opacity={};a.start="start"in k?k.start:function(){return+l.get(k.node,"opacity")||0};a.end=k.end;a=g.animateProperty(k);c.after(a,"beforeBegin",m.partial(p,k.node),!0);return a};g.fadeIn=function(a){return g._fade(b({end:1},a))};g.fadeOut=function(a){return g._fade(b({end:0},a))};g._defaultEasing=function(a){return.5+Math.sin((a+1.5)*Math.PI)/2};var u=function(a){this._properties=a;for(var b in a){var c=a[b];c.start instanceof d&&(c.tempColor=new d)}};u.prototype.getValue=function(a){var b=
{},c;for(c in this._properties){var k=this._properties[c],g=k.start;g instanceof d?b[c]=d.blendColors(g,k.end,a,k.tempColor).toCss():m.isArray(g)||(b[c]=(k.end-g)*a+g+("opacity"!=c?k.units||"px":0))}return b};g.animateProperty=function(k){var g=k.node=e.byId(k.node);k.easing||(k.easing=a._defaultEasing);k=new t(k);c.after(k,"beforeBegin",m.hitch(k,function(){var a={},c;for(c in this.properties){var k=function(a,b){var c={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==c)return c;c=l.get(a,
b);return"opacity"==b?+c:p?c:parseFloat(c)};if("width"==c||"height"==c)this.node.display="block";var e=this.properties[c];m.isFunction(e)&&(e=e(g));e=a[c]=b({},m.isObject(e)?e:{end:e});m.isFunction(e.start)&&(e.start=e.start(g));m.isFunction(e.end)&&(e.end=e.end(g));var p=0<=c.toLowerCase().indexOf("color");"end"in e?"start"in e||(e.start=k(g,c)):e.end=k(g,c);p?(e.start=new d(e.start),e.end=new d(e.end)):e.start="opacity"==c?+e.start:parseFloat(e.start)}this.curve=new u(a)}),!0);c.after(k,"onAnimate",
m.hitch(l,"set",k.node),!0);return k};g.anim=function(a,b,c,d,e,l){return g.animateProperty({node:a,duration:c||t.prototype.duration,properties:b,easing:d,onEnd:e}).play(l||0)};b(a,g);a._Animation=t;return g})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(a,h,m,f,d,c,n,e,l,b){function g(a,b,k){return v&&k?function(a,b){return c(a,k,b)}:p?function(k,d){var g=c(k,b,function(a){d.call(this,a);
C=(new Date).getTime()}),e=c(k,a,function(a){(!C||(new Date).getTime()>C+1E3)&&d.call(this,a)});return{remove:function(){g.remove();e.remove()}}}:function(b,k){return c(b,a,k)}}function q(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function t(a,d,g){if(!e.isRight(a)){var l=q(a.target);if(k=!a.target.disabled&&l&&l.dojoClick)if(B=(x="useTarget"==k)?l:a.target,x&&a.preventDefault(),y=a.changedTouches?a.changedTouches[0].pageX-b.global.pageXOffset:a.clientX,z=a.changedTouches?a.changedTouches[0].pageY-
b.global.pageYOffset:a.clientY,A=("object"==typeof k?k.x:"number"==typeof k?k:0)||4,D=("object"==typeof k?k.y:"number"==typeof k?k:0)||4,!u){a=function(a){b.doc.addEventListener(a,function(b){var c=b.target;k&&!b._dojo_click&&(new Date).getTime()<=F+1E3&&("INPUT"!=c.tagName||!f.contains(c,"dijitOffScreen"))&&(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"==a&&("INPUT"!=c.tagName||"radio"==c.type&&(f.contains(c,"dijitCheckBoxInput")||f.contains(c,"mblRadioButton"))||
"checkbox"==c.type&&(f.contains(c,"dijitCheckBoxInput")||f.contains(c,"mblCheckBox")))&&"TEXTAREA"!=c.tagName&&"AUDIO"!=c.tagName&&"VIDEO"!=c.tagName&&b.preventDefault())},!0)};var p=function(a){k=x?m.isDescendant(b.doc.elementFromPoint(a.changedTouches?a.changedTouches[0].pageX-b.global.pageXOffset:a.clientX,a.changedTouches?a.changedTouches[0].pageY-b.global.pageYOffset:a.clientY),B):k&&(a.changedTouches?a.changedTouches[0].target:a.target)==B&&Math.abs((a.changedTouches?a.changedTouches[0].pageX-
b.global.pageXOffset:a.clientX)-y)<=A&&Math.abs((a.changedTouches?a.changedTouches[0].pageY-b.global.pageYOffset:a.clientY)-z)<=D};u=!0;b.doc.addEventListener(d,function(a){e.isRight(a)||(p(a),x&&a.preventDefault())},!0);b.doc.addEventListener(g,function(a){if(!e.isRight(a)&&(p(a),k)){var b=function(b){var c=document.createEvent("MouseEvents");c._dojo_click=!0;c.initMouseEvent(b,!0,!0,a.view,a.detail,g.screenX,g.screenY,g.clientX,g.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);return c};
F=(new Date).getTime();var d=x?B:a.target;"LABEL"===d.tagName&&(d=m.byId(d.getAttribute("for"))||d);var g=a.changedTouches?a.changedTouches[0]:a,l=b("mousedown"),f=b("mouseup"),n=b("click");setTimeout(function(){c.emit(d,"mousedown",l);c.emit(d,"mouseup",f);c.emit(d,"click",n);F=(new Date).getTime()},0)}},!0);a("click");a("mousedown");a("mouseup")}}}var w=5>n("ios"),v=n("pointer-events")||n("MSPointer"),r=function(){var a={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[b]=n("MSPointer")?
"MSPointer"+b.charAt(0).toUpperCase()+b.slice(1):"pointer"+b;return a}(),p=n("touch-events"),u,k,x=!1,B,y,z,A,D,F,C,H;n("touch")&&(v?l(function(){b.doc.addEventListener(r.down,function(a){t(a,r.move,r.up)},!0)}):l(function(){function a(a){var b=d.delegate(a,{bubbles:!0});6<=n("ios")&&(b.touches=a.touches,b.altKey=a.altKey,b.changedTouches=a.changedTouches,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.targetTouches=a.targetTouches);return b}H=b.body();b.doc.addEventListener("touchstart",
function(a){C=(new Date).getTime();var b=H;H=a.target;c.emit(b,"dojotouchout",{relatedTarget:H,bubbles:!0});c.emit(H,"dojotouchover",{relatedTarget:b,bubbles:!0});t(a,"touchmove","touchend")},!0);c(b.doc,"touchmove",function(k){C=(new Date).getTime();var d=b.doc.elementFromPoint(k.pageX-(w?0:b.global.pageXOffset),k.pageY-(w?0:b.global.pageYOffset));d&&(H!==d&&(c.emit(H,"dojotouchout",{relatedTarget:d,bubbles:!0}),c.emit(d,"dojotouchover",{relatedTarget:H,bubbles:!0}),H=d),c.emit(d,"dojotouchmove",
a(k))||k.preventDefault())});c(b.doc,"touchend",function(k){C=(new Date).getTime();var d=b.doc.elementFromPoint(k.pageX-(w?0:b.global.pageXOffset),k.pageY-(w?0:b.global.pageYOffset))||b.body();c.emit(d,"dojotouchend",a(k))})}));h={press:g("mousedown","touchstart",r.down),move:g("mousemove","dojotouchmove",r.move),release:g("mouseup","dojotouchend",r.up),cancel:g(e.leave,"touchcancel",v?r.cancel:null),over:g("mouseover","dojotouchover",r.over),out:g("mouseout","dojotouchout",r.out),enter:e._eventHandler(g("mouseover",
"dojotouchover",r.over)),leave:e._eventHandler(g("mouseout","dojotouchout",r.out))};return a.touch=h})},"dojo/domReady":function(){define(["./has"],function(a){function h(a){l.push(a);e&&m()}function m(){if(!b){for(b=!0;l.length;)try{l.shift()(d)}catch(r){console.error(r,"in domReady callback",r.stack)}b=!1;h._onQEmpty()}}var f=function(){return this}(),d=document,c={loaded:1,complete:1},n="string"!=typeof d.readyState,e=!!c[d.readyState],l=[],b;h.load=function(a,b,c){h(c)};h._Q=l;h._onQEmpty=function(){};
n&&(d.readyState="loading");if(!e){var g=[],q=function(a){a=a||f.event;e||"readystatechange"==a.type&&!c[d.readyState]||(n&&(d.readyState="complete"),e=1,m())},t=function(a,b){a.addEventListener(b,q,!1);l.push(function(){a.removeEventListener(b,q,!1)})};if(!a("dom-addeventlistener")){var t=function(a,b){b="on"+b;a.attachEvent(b,q);l.push(function(){a.detachEvent(b,q)})},w=d.createElement("div");try{w.doScroll&&null===f.frameElement&&g.push(function(){try{return w.doScroll("left"),1}catch(r){}})}catch(r){}}t(d,
"DOMContentLoaded");t(f,"load");"onreadystatechange"in d?t(d,"readystatechange"):n||g.push(function(){return c[d.readyState]});if(g.length){var v=function(){if(!e){for(var a=g.length;a--;)if(g[a]()){q("poller");return}setTimeout(v,30)}};v()}}return h})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(a,h,m,f,d,c,n){h.add("rtl-adjust-position-for-verticalScrollBar",function(a,b){a=m.body(b);b=n.create("div",
{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},a,"last");var c=n.create("div",{style:{overflow:"hidden",direction:"ltr"}},b,"last"),e=0!=d.position(c).x;b.removeChild(c);a.removeChild(b);return e});h.add("position-fixed-support",function(a,b){a=m.body(b);b=n.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},a,"last");var c=n.create("span",{style:{position:"fixed",left:"0",
top:"0"}},b,"last"),e=d.position(c).x!=d.position(b).x;b.removeChild(c);a.removeChild(b);return e});var e={getBox:function(a){a=a||m.doc;var b="BackCompat"==a.compatMode?m.body(a):a.documentElement,c=d.docScroll(a);if(h("touch")){var l=e.get(a);a=l.innerWidth||b.clientWidth;b=l.innerHeight||b.clientHeight}else a=b.clientWidth,b=b.clientHeight;return{l:c.x,t:c.y,w:a,h:b}},get:function(a){if(h("ie")&&e!==document.parentWindow){a.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");
var b=a._parentWindow;a._parentWindow=null;return b}return a.parentWindow||a.defaultView},scrollIntoView:function(a,b){try{a=f.byId(a);var g=a.ownerDocument||m.doc,e=m.body(g),l=g.documentElement||e.parentNode,n=h("ie")||h("trident"),v=h("webkit");if(a!=e&&a!=l)if(!(h("mozilla")||n||v||h("opera")||h("trident")||h("edge"))&&"scrollIntoView"in a)a.scrollIntoView(!1);else{var r="BackCompat"==g.compatMode,p=Math.min(e.clientWidth||l.clientWidth,l.clientWidth||e.clientWidth),u=Math.min(e.clientHeight||
l.clientHeight,l.clientHeight||e.clientHeight),g=v||r?e:l,k=b||d.position(a),x=a.parentNode;b=function(a){return 6>=n||7==n&&r?!1:h("position-fixed-support")&&"fixed"==c.get(a,"position").toLowerCase()};var B=this,v=function(a,b,c){"BODY"==a.tagName||"HTML"==a.tagName?B.get(a.ownerDocument).scrollBy(b,c):(b&&(a.scrollLeft+=b),c&&(a.scrollTop+=c))};if(!b(a))for(;x;){x==e&&(x=g);var y=d.position(x),z=b(x),A="rtl"==c.getComputedStyle(x).direction.toLowerCase();if(x==g)y.w=p,y.h=u,g==l&&(n||h("trident"))&&
A&&(y.x+=g.offsetWidth-y.w),y.x=0,y.y=0;else{var D=d.getPadBorderExtents(x);y.w-=D.w;y.h-=D.h;y.x+=D.l;y.y+=D.t;var F=x.clientWidth,C=y.w-F;0<F&&0<C&&(A&&h("rtl-adjust-position-for-verticalScrollBar")&&(y.x+=C),y.w=F);F=x.clientHeight;C=y.h-F;0<F&&0<C&&(y.h=F)}z&&(0>y.y&&(y.h+=y.y,y.y=0),0>y.x&&(y.w+=y.x,y.x=0),y.y+y.h>u&&(y.h=u-y.y),y.x+y.w>p&&(y.w=p-y.x));var H=k.x-y.x,I=k.y-y.y,M=H+k.w-y.w,Q=I+k.h-y.h,K,G;0<M*H&&(x.scrollLeft||x==g||x.scrollWidth>x.offsetHeight)&&(K=Math[0>H?"max":"min"](H,M),
A&&(8==n&&!r||5<=h("trident"))&&(K=-K),G=x.scrollLeft,v(x,K,0),K=x.scrollLeft-G,k.x-=K);0<Q*I&&(x.scrollTop||x==g||x.scrollHeight>x.offsetHeight)&&(K=Math.ceil(Math[0>I?"max":"min"](I,Q)),G=x.scrollTop,v(x,0,K),K=x.scrollTop-G,k.y-=K);x=x!=g&&!z&&x.parentNode}}}catch(N){console.error("scrollIntoView: "+N),a.scrollIntoView(!1)}}};a.setObject("dojo.window",e);return e})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../has ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t){function w(a,b){"touchAction"in document.body.style?v="touchAction":"msTouchAction"in document.body.style&&(v="msTouchAction");r=function(a,b){a.style[v]=b};r(a,b)}var v,r=function(){};n("touch-action")&&(r=w);return h("dojo.dnd.Moveable",[c],{handle:"",delay:0,skip:!1,constructor:function(a,c){this.node=f.byId(a);r(this.node,"none");c||(c={});this.handle=c.handle?f.byId(c.handle):null;this.handle||(this.handle=this.node);this.delay=0<c.delay?c.delay:0;this.skip=
c.skip;this.mover=c.mover?c.mover:q;this.events=[e(this.handle,b.press,m.hitch(this,"onMouseDown")),e(this.handle,"dragstart",m.hitch(this,"onSelectStart")),e(this.handle,"selectstart",m.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,c){return new c(b,a)},destroy:function(){a.forEach(this.events,function(a){a.remove()});r(this.node,"");this.events=this.node=this.handle=null},onMouseDown:function(a){if(!this.skip||!g.isFormElement(a)){if(this.delay)this.events.push(e(this.handle,b.move,
m.hitch(this,"onMouseMove")),e(this.handle.ownerDocument,b.release,m.hitch(this,"onMouseUp"))),this._lastX=a.pageX,this._lastY=a.pageY;else this.onDragDetected(a);a.stopPropagation();a.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},
onSelectStart:function(a){this.skip&&g.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){l.publish("/dnd/move/start",a);d.add(t.body(),"dojoMove");d.add(this.node,"dojoMoveItem")},onMoveStop:function(a){l.publish("/dnd/move/stop",a);d.remove(t.body(),"dojoMove");d.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+
"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(a,h,m,f){var d=m.getObject("dojo.dnd",!0);d.getCopyKeyState=function(c){return c[a("mac")?"metaKey":"ctrlKey"]};d._uniqueId=0;d.getUniqueId=function(){var a;do a=h._scopeName+"Unique"+ ++d._uniqueId;while(f.byId(a));return a};d._empty={};d.isFormElement=function(a){a=a.target;3==a.nodeType&&(a=a.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+
a.tagName.toLowerCase()+" ")};return d})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q,t){return h("dojo.dnd.Mover",[l],{constructor:function(a,d,e){function l(a){a.preventDefault();a.stopPropagation()}this.node=c.byId(a);this.marginBox={l:d.pageX,t:d.pageY};this.mouseButton=d.button;d=this.host=e;a=a.ownerDocument;
this.events=[b(a,g.move,m.hitch(this,"onFirstMove")),b(a,g.move,m.hitch(this,"onMouseMove")),b(a,g.release,m.hitch(this,"onMouseUp")),b(a,"dragstart",l),b(a.body,"selectstart",l)];t.autoScrollStart(a);if(d&&d.onMoveStart)d.onMoveStart(this)},onMouseMove:function(a){t.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(f("webkit")&&f("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&
this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,c,g=this.host;switch(b.position){case "relative":case "absolute":c=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=n.getMarginBox(this.node);c=d.doc.body;var l=e.getComputedStyle(c),k=n.getMarginBox(c,l),l=n.getContentBox(c,l);c=b.l-(l.l-k.l);b=b.t-(l.t-k.t)}this.marginBox.l=c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(g&&g.onFirstMove)g.onFirstMove(this,
a);this.events.shift().remove()},destroy:function(){a.forEach(this.events,function(a){a.remove()});var b=this.host;if(b&&b.onMoveStop)b.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(a,h,m,f,d,c){var n={};a.setObject("dojo.dnd.autoscroll",n);n.getViewport=c.getBox;n.V_TRIGGER_AUTOSCROLL=32;n.H_TRIGGER_AUTOSCROLL=32;n.V_AUTOSCROLL_VALUE=16;n.H_AUTOSCROLL_VALUE=
16;var e,l=m.doc,b=Infinity,g=Infinity;n.autoScrollStart=function(a){l=a;e=c.getBox(l);a=m.body(l).parentNode;b=Math.max(a.scrollHeight-e.h,0);g=Math.max(a.scrollWidth-e.w,0)};n.autoScroll=function(a){var d=e||c.getBox(l),f=m.body(l).parentNode,h=0,q=0;a.clientX<n.H_TRIGGER_AUTOSCROLL?h=-n.H_AUTOSCROLL_VALUE:a.clientX>d.w-n.H_TRIGGER_AUTOSCROLL&&(h=Math.min(n.H_AUTOSCROLL_VALUE,g-f.scrollLeft));a.clientY<n.V_TRIGGER_AUTOSCROLL?q=-n.V_AUTOSCROLL_VALUE:a.clientY>d.h-n.V_TRIGGER_AUTOSCROLL&&(q=Math.min(n.V_AUTOSCROLL_VALUE,
b-f.scrollTop));window.scrollBy(h,q)};n._validNodes={div:1,p:1,td:1};n._validOverflow={auto:1,scroll:1};n.autoScrollNodes=function(a){for(var b,c,g,e,l,q=0,k=0,x=a.target;x;){if(1==x.nodeType&&x.tagName.toLowerCase()in n._validNodes){g=d.getComputedStyle(x);l=g.overflowX.toLowerCase()in n._validOverflow;e=g.overflowY.toLowerCase()in n._validOverflow;if(l||e)b=f.getContentBox(x,g),c=f.position(x,!0);if(l){g=Math.min(n.H_TRIGGER_AUTOSCROLL,b.w/2);l=a.pageX-c.x;if(h("webkit")||h("opera"))l+=m.body().scrollLeft;
q=0;0<l&&l<b.w&&(l<g?q=-g:l>b.w-g&&(q=g),x.scrollLeft+=q)}if(e){e=Math.min(n.V_TRIGGER_AUTOSCROLL,b.h/2);g=a.pageY-c.y;if(h("webkit")||h("opera"))g+=m.body().scrollTop;k=0;0<g&&g<b.h&&(g<e?k=-e:g>b.h-e&&(k=e),x.scrollTop+=k)}if(q||k)return}try{x=x.parentNode}catch(B){x=null}}n.autoScroll(a)};return n})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(a,h){var m=h.prototype.onMove;return a("dojo.dnd.TimedMoveable",h,{timeout:40,constructor:function(a,d){d||(d=
{});d.timeout&&"number"==typeof d.timeout&&0<=d.timeout&&(this.timeout=d.timeout)},onMoveStop:function(a){a._timer&&(clearTimeout(a._timer),m.call(this,a,a._leftTop));h.prototype.onMoveStop.apply(this,arguments)},onMove:function(a,d){a._leftTop=d;if(!a._timer){var c=this;a._timer=setTimeout(function(){a._timer=null;m.call(c,a,a._leftTop)},this.timeout)}}})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p){var u,k,x=new (h([q,n],{curNode:null,activeStack:[],constructor:function(){var b=e.hitch(this,function(a){m.isDescendant(this.curNode,a)&&this.set("curNode",null);m.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});a.before(c,"empty",b);a.before(c,"destroy",b)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var c=this,k=a.document&&a.document.body;if(k){var d=g("pointer-events")?"pointerdown":g("MSPointer")?
"MSPointerDown":g("touch-events")?"mousedown, touchstart":"mousedown",e=l(a.document,d,function(a){a&&a.target&&null==a.target.parentNode||c._onTouchNode(b||a.target,"mouse")}),p=l(k,"focusin",function(a){if(a.target.tagName){var k=a.target.tagName.toLowerCase();"#document"!=k&&"body"!=k&&(v.isFocusable(a.target)?c._onFocusNode(b||a.target):c._onTouchNode(b||a.target))}}),f=l(k,"focusout",function(a){c._onBlurNode(b||a.target)});return{remove:function(){e.remove();p.remove();f.remove();k=e=p=f=null}}}},
_onBlurNode:function(a){a=(new Date).getTime();a<u+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(e.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<k+100||(this._clearActiveWidgetsTimer=setTimeout(e.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){k=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);d.contains(a,"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var g=f.get(a,"dijitPopupParent");if(g)a=r.byId(g).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===t.body())break;a=w.get(a.ownerDocument).frameElement}else{var e=a.getAttribute&&a.getAttribute("widgetId"),l=e&&r.byId(e);!l||"mouse"==b&&l.get("disabled")||c.unshift(e);a=a.parentNode}}}catch(H){}this._setStack(c,
b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(u=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,k=c.length-1,d=a.length-1;if(a[d]!=c[k]){this.set("activeStack",a);var g;for(g=k;0<=g&&c[g]!=a[g];g--)if(k=r.byId(c[g]))k._hasBeenBlurred=!0,k.set("focused",!1),k._focusManager==this&&k._onBlur(b),
this.emit("widget-blur",k,b);for(g++;g<=d;g++)if(k=r.byId(a[g]))k.set("focused",!0),k._focusManager==this&&k._onFocus(b),this.emit("widget-focus",k,b)}},focus:function(a){if(a)try{a.focus()}catch(z){}}}));b(function(){var a=x.registerWin(w.get(document));g("ie")&&l(window,"unload",function(){a&&(a.remove(),a=null)})});p.focus=function(a){x.focus(a)};for(var B in x)/^_/.test(B)||(p.focus[B]="function"==typeof x[B]?e.hitch(x,B):x[B]);x.watch(function(a,b,c){p.focus[a]=c});return x})},"dojo/Stateful":function(){define(["./_base/declare",
"./_base/lang","./_base/array","./when"],function(a,h,m,f){return a("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var c=this._attrPairNames;return c[a]?c[a]:c[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,c){return"function"===typeof this[c.g]?this[c.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,c){if("object"===typeof a){for(var d in a)a.hasOwnProperty(d)&&"_watchCallbacks"!=d&&this.set(d,
a[d]);return this}d=this._getAttrNames(a);var e=this._get(a,d);d=this[d.s];var l;"function"===typeof d?l=d.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=c;if(this._watchCallbacks){var b=this;f(l,function(){b._watchCallbacks(a,e,c)})}return this},_changeAttrValue:function(a,c){var d=this.get(a);this[a]=c;this._watchCallbacks&&this._watchCallbacks(a,d,c);return this},watch:function(a,c){var d=this._watchCallbacks;if(!d)var e=this,d=this._watchCallbacks=function(a,c,l,f){var b=function(b){if(b){b=
b.slice();for(var d=0,g=b.length;d<g;d++)b[d].call(e,a,c,l)}};b(d["_"+a]);f||b(d["*"])};c||"function"!==typeof a?a="_"+a:(c=a,a="*");var l=d[a];"object"!==typeof l&&(l=d[a]=[]);l.push(c);a={};a.unwatch=a.remove=function(){var a=m.indexOf(l,c);-1<a&&l.splice(a,1)};return a}})})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(a,h,m,f,d,c,n){var e={_isElementShown:function(a){var b=f.get(a);return"hidden"!=
b.visibility&&"collapsed"!=b.visibility&&"none"!=b.display&&"hidden"!=m.get(a,"type")},hasDefaultTabStop:function(a){switch(a.nodeName.toLowerCase()){case "a":return m.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var c=a.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;b=c.body}catch(q){try{b=a.contentWindow.document.body}catch(t){return!1}}return b&&("true"==b.contentEditable||b.firstChild&&"true"==
b.firstChild.contentEditable);default:return"true"==a.contentEditable}},effectiveTabIndex:function(a){if(!m.get(a,"disabled"))return m.has(a,"tabIndex")?+m.get(a,"tabIndex"):e.hasDefaultTabStop(a)?0:void 0},isTabNavigable:function(a){return 0<=e.effectiveTabIndex(a)},isFocusable:function(a){return-1<=e.effectiveTabIndex(a)},_getTabNavigable:function(a){function b(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}function d(a){return u[b(a)]||
a}var l,f,n,h,r,p,u={},k=e._isElementShown,x=e.effectiveTabIndex,B=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||9>=c("ie")&&"HTML"!==a.scopeName)&&k(a)){var d=x(a);if(0<=d){if(0==d)l||(l=a),f=a;else if(0<d){if(!n||d<h)h=d,n=a;if(!r||d>=p)p=d,r=a}d=b(a);m.get(a,"checked")&&d&&(u[d]=a)}"SELECT"!=a.nodeName.toUpperCase()&&B(a)}};k(a)&&B(a);return{first:d(l),last:d(f),lowest:d(n),highest:d(r)}},getFirstInTabbingOrder:function(a,b){a=e._getTabNavigable(h.byId(a,b));return a.lowest?
a.lowest:a.first},getLastInTabbingOrder:function(a,b){a=e._getTabNavigable(h.byId(a,b));return a.last?a.last:a.highest}};d.mixin(n,e);return e})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(a,h,m,f,d){var c={};a.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(a){c[a]=f[a]});m.mixin(c,{defaultDuration:h.defaultDuration||200});m.mixin(d,c);return d})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t){function w(){}function v(a){return function(b,c,k,d){return b&&"string"==typeof c&&b[c]==w?b.on(c.substring(2).toLowerCase(),n.hitch(k,d)):a.apply(m,arguments)}}a.around(m,"connect",v);c.connect&&a.around(c,"connect",v);a=f("dijit._Widget",[g,q,t],{onClick:w,onDblClick:w,onKeyDown:w,onKeyPress:w,onKeyUp:w,onMouseDown:w,onMouseMove:w,onMouseOut:w,onMouseOver:w,onMouseLeave:w,onMouseEnter:w,onMouseUp:w,constructor:function(a){this._toConnect={};for(var b in a)this[b]===
w&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===w?m.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){c.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){c.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?e("[widgetId]",this.containerNode).map(b.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});d("dijit-legacy-requires")&&l(0,function(){require(["dijit/_base"])});
return a})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(a,h,m,f,d,c,n,e){function l(a,b){var c=function(c,k){if("string"==typeof k&&(k=m.byId(k),!k))return new b([]);c="string"==typeof c?a(c,k):c?c.end&&c.on?c:[c]:[];return c.end&&c.on?c:new b(c)};c.matches=a.match||function(a,b,k){return 0<c.filter([a],b,k).length};c.filter=a.filter||function(a,b,k){return c(b,k).filter(function(b){return-1<
d.indexOf(a,b)})};if("function"!=typeof a){var k=a.search;a=function(a,b){return k(b||document,a)}}return c}h.add("array-extensible",function(){return 1==c.delegate([],{length:1}).length&&!h("bug-for-in-skips-shadowed")});var b=Array.prototype,g=b.slice,q=b.concat,t=d.forEach,w=function(b,c,d){c=[0].concat(g.call(c,0));d=d||a.global;return function(a){c[0]=a;return b.apply(d,c)}},v=function(a){var b=this instanceof r&&h("array-extensible");"number"==typeof a&&(a=Array(a));var k=a&&"length"in a?a:
arguments;if(b||!k.sort){for(var d=b?this:[],g=d.length=k.length,e=0;e<g;e++)d[e]=k[e];if(b)return d;k=d}c._mixin(k,p);k._NodeListCtor=function(a){return r(a)};return k},r=v,p=r.prototype=h("array-extensible")?[]:{};r._wrap=p._wrap=function(a,b,c){a=new (c||this._NodeListCtor||r)(a);return b?a._stash(b):a};r._adaptAsMap=function(a,b){return function(){return this.map(w(a,arguments,b))}};r._adaptAsForEach=function(a,b){return function(){this.forEach(w(a,arguments,b));return this}};r._adaptAsFilter=
function(a,b){return function(){return this.filter(w(a,arguments,b))}};r._adaptWithCondition=function(b,c,d){return function(){var k=arguments,g=w(b,k,d);if(c.call(d||a.global,k))return this.map(g);this.forEach(g);return this}};t(["slice","splice"],function(a){var c=b[a];p[a]=function(){return this._wrap(c.apply(this,arguments),"slice"==a?this:null)}});t(["indexOf","lastIndexOf","every","some"],function(b){var c=d[b];p[b]=function(){return c.apply(a,[this].concat(g.call(arguments,0)))}});c.extend(v,
{constructor:r,_NodeListCtor:r,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return f(c,a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=g.call(this,0),c=d.map(arguments,function(a){return g.call(a,0)});return this._wrap(q.apply(b,c),this)},map:function(a,b){return this._wrap(d.map(this,
a,b),this)},forEach:function(a,b){t(this,a,b);return this},filter:function(a){var b=arguments,c=this,k=0;if("string"==typeof a){c=u._filterResult(this,b[0]);if(1==b.length)return c._stash(this);k=1}return this._wrap(d.filter(c,b[k],b[k+1]),this)},instantiate:function(a,b){var k=c.isFunction(a)?a:c.getObject(a);b=b||{};return this.forEach(function(a){new k(b,a)})},at:function(){var a=new this._NodeListCtor(0);t(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});
var u=l(e,v);a.query=l(e,function(a){return v(a)});u.load=function(a,b,c){n.load(a,b,function(a){c(l(a,v))})};a._filterQueryResult=u._filterResult=function(a,b,c){return new v(u.filter(a,b,c))};a.NodeList=u.NodeList=v;return u})},"dojo/selector/_loader":function(){define(["../has","require"],function(a,h){if("undefined"!==typeof document){var m=document.createElement("div");a.add("dom-qsa2.1",!!m.querySelectorAll);a.add("dom-qsa3",function(){try{return m.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",
1==m.querySelectorAll(".TEST:empty").length}catch(d){}})}var f;return{load:function(d,c,n,e){if(e&&e.isBuild)n();else{e=h;d="default"==d?a("config-selectorEngine")||"css3":d;d="css2"==d||"lite"==d?"./lite":"css2.1"==d?a("dom-qsa2.1")?"./lite":"./acme":"css3"==d?a("dom-qsa3")?"./lite":"./acme":"acme"==d?"./acme":(e=c)&&d;if("?"==d.charAt(d.length-1)){d=d.substring(0,d.length-1);var l=!0}if(l&&(a("dom-compliant-qsa")||f))return n(f);e([d],function(a){"./lite"!=d&&(f=a);n(a)})}}}})},"dojo/selector/lite":function(){define(["../has",
"../_base/kernel"],function(a,h){var m=document.createElement("div"),f=m.matches||m.webkitMatchesSelector||m.mozMatchesSelector||m.msMatchesSelector||m.oMatchesSelector,d=m.querySelectorAll,c=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;a.add("dom-matches-selector",!!f);a.add("dom-qsa",!!d);var n=function(c,f){if(b&&-1<c.indexOf(","))return b(c,f);var g=f?f.ownerDocument||f:h.doc||document,q=(d?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(c);
f=f||g;if(q){var m=8===a("ie")&&a("quirks")?f.nodeType===g.nodeType:null!==f.parentNode&&9!==f.nodeType&&f.parentNode===g;if(q[2]&&m){var r=h.byId?h.byId(q[2],g):g.getElementById(q[2]);if(!r||q[1]&&q[1]!=r.tagName.toLowerCase())return[];if(f!=g)for(c=r;c!=f;)if(c=c.parentNode,!c)return[];return q[3]?n(q[3],r):[r]}if(q[3]&&f.getElementsByClassName)return f.getElementsByClassName(q[4]);if(q[5])if(r=f.getElementsByTagName(q[5]),q[4]||q[6])c=(q[4]||"")+q[6];else return r}if(d)return 1===f.nodeType&&"object"!==
f.nodeName.toLowerCase()?e(f,c,f.querySelectorAll):f.querySelectorAll(c);r||(r=f.getElementsByTagName("*"));q=[];g=0;for(m=r.length;g<m;g++){var p=r[g];1==p.nodeType&&l(p,c,f)&&q.push(p)}return q},e=function(a,b,d){var g=a,e=a.getAttribute("id"),l=e||"__dojo__",p=a.parentNode,f=/^\s*[+~]/.test(b);if(f&&!p)return[];e?l=l.replace(/'/g,"\\$\x26"):a.setAttribute("id",l);f&&p&&(a=a.parentNode);b=b.match(c);for(p=0;p<b.length;p++)b[p]="[id\x3d'"+l+"'] "+b[p];b=b.join(",");try{return d.call(a,b)}finally{e||
g.removeAttribute("id")}};if(!a("dom-matches-selector"))var l=function(){function a(a,b,c){var k=b.charAt(0);if('"'==k||"'"==k)b=b.slice(1,-1);b=b.replace(/\\/g,"");var d=p[c||""];return function(c){return(c=c.getAttribute(a))&&d(c,b)}}function b(a){return function(b,c){for(;(b=b.parentNode)!=c;)if(a(b,c))return!0}}function c(a){return function(b,c){b=b.parentNode;return a?b!=c&&a(b,c):b==c}}function d(a,b){return a?function(c,k){return b(c)&&a(c,k)}:b}var e="div"==m.tagName?"toLowerCase":"toUpperCase",
l={"":function(a){a=a[e]();return function(b){return b.tagName==a}},".":function(a){var b=" "+a+" ";return function(c){return-1<c.className.indexOf(a)&&-1<(" "+c.className+" ").indexOf(b)}},"#":function(a){return function(b){return b.id==a}}},p={"^\x3d":function(a,b){return 0==a.indexOf(b)},"*\x3d":function(a,b){return-1<a.indexOf(b)},"$\x3d":function(a,b){return a.substring(a.length-b.length,a.length)==b},"~\x3d":function(a,b){return-1<(" "+a+" ").indexOf(" "+b+" ")},"|\x3d":function(a,b){return 0==
(a+"-").indexOf(b+"-")},"\x3d":function(a,b){return a==b},"":function(a,b){return!0}},f={};return function(k,g,e){var p=f[g];if(!p){if(g.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,function(k,g,e,f,n,x,h){f?p=d(p,l[e||""](f.replace(/\\/g,""))):g?p=(" "==g?b:c)(p):n&&(p=d(p,a(n,h,x)));return""}))throw Error("Syntax error in query");if(!p)return!0;f[g]=p}return p(k,e)}}();if(!a("dom-qsa"))var b=function(a,b){for(var d=
a.match(c),g=[],e=0;e<d.length;e++){a=new String(d[e].replace(/\s*$/,""));a.indexOf=escape;a=n(a,b);for(var l=0,p=a.length;l<p;l++){var f=a[l];g[f.sourceIndex]=f}}b=[];for(e in g)b.push(g[e]);return b};n.match=f?function(a,b,c){return c&&9!=c.nodeType?e(c,b,function(b){return f.call(a,b)}):f.call(a,b)}:l;return n})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k,x,B,y,z){function A(a){return function(b){e[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}t.add("dijit-legacy-requires",!w.isAsync);t.add("dojo-bidi",!1);t("dijit-legacy-requires")&&p(0,function(){a(["dijit/_base/manager"])});var D={};f=c("dijit._WidgetBase",[u,B],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:A("lang"),dir:"",_setDirAttr:A("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:f.blankGif||a.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},k;for(k in b.attributeMap)c.push(k);for(k in b)/^on/.test(k)&&(a[k.substring(2).toLowerCase()]=k),/^_set[A-Z](.*)Attr$/.test(k)&&(k=k.charAt(4).toLowerCase()+
k.substr(5,k.length-9),b.attributeMap&&k in b.attributeMap||c.push(k))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=n.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,v.mixin(this,a));this.postMixInProperties();this.id||(this.id=z.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=
this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=x.body(this.ownerDocument);z.add(this);this.buildRendering();var c;this.domNode&&(this._applyAttributes(),(a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),c=!0),this.domNode.setAttribute("widgetId",this.id));this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);h.forEach(this.constructor._setterAttrs,
function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(h.map(a,function(a){return a+"Rtl"})));l.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,h.forEach(this.getChildren(),function(a){a._started||
a._destroyed||!v.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.uninitialize();h.forEach(this._connects,v.hitch(this,"disconnect"));h.forEach(this._supportingWidgets,b);this.domNode&&h.forEach(z.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);
z.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?e.remove(this.domNode,"widgetId"):b.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||b.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){h.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;v.isObject(a)?
q.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,c){c=3<=arguments.length?c:this.attributeMap[a];h.forEach(v.isArray(c)?c:[c],function(c){var k=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":v.isFunction(b)&&(b=v.hitch(this,b));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;k.tagName?e.set(k,c,b):k.set(c,b);break;case "innerText":k.innerHTML="";k.appendChild(this.ownerDocument.createTextNode(b));
break;case "innerHTML":k.innerHTML=b;break;case "class":l.replace(k,b,this[a]);break;case "toggleClass":l.toggle(k,c.className||a,b)}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var k=this[c.s];if(v.isFunction(k))var d=k.apply(this,Array.prototype.slice.call(arguments,1));else{var k=this.focusNode&&!v.isFunction(this.focusNode)?"focusNode":
"domNode",g=this[k]&&this[k].tagName,e;if((e=g)&&!(e=D[g])){e=this[k];var l={},p;for(p in e)l[p.toLowerCase()]=!0;e=D[g]=l}p=e;c=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:p&&c.l in p&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?k:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return d||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});
return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;!this._created||c===b||c!==c&&b!==b||(this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}}))},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var k,d=this["on"+a];d&&(k=d.apply(this,c?
c:[b]));this._started&&!this._beingDestroyed&&r.emit(this.domNode,a.toLowerCase(),b);return k},on:function(a,b){var c=this._onMap(a);return c?m.after(this,c,b,!0):this.own(r(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},k;for(k in b.prototype)/^on/.test(k)&&(c[k.replace(/^on/,"").toLowerCase()]=k)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?
z.findWidgets(this.containerNode):[]},getParent:function(){return z.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(d.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(k.subscribe(a,v.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():g.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=q.get(this.domNode,"display")},
placeAt:function(a,c){var k=!a.tagName&&z.byId(a);!k||!k.addChild||c&&"number"!==typeof c?(a=k&&"domNode"in k?k.containerNode&&!/after|before|replace/.test(c||"")?k.containerNode:k.domNode:n.byId(a,this.ownerDocument),b.place(this.domNode,a,c),!this._started&&(this.getParent()||{})._started&&this.startup()):k.addChild(this,c);return this},defer:function(a,b){var c=setTimeout(v.hitch(this,function(){c&&(c=null,this._destroyed||v.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),
c=null);return null}}}});t("dojo-bidi")&&f.extend(y);return f})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(a,h,m){return m("dijit.Destroyable",null,{destroy:function(a){this._destroyed=!0},own:function(){var f=["destroyRecursive","destroy","remove"];a.forEach(arguments,function(d){function c(){e.remove();a.forEach(l,function(a){a.remove()})}var n,e=h.before(this,"destroy",function(a){d[n](a)}),l=[];d.then?(n="cancel",d.then(c,c)):a.forEach(f,
function(a){"function"===typeof d[a]&&(n||(n=a),l.push(h.after(d,a,c,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(a,h,m,f,d,c){a=f("dijit._OnDijitClickMixin",null,{connect:function(a,d,l){return this.inherited(arguments,[a,"ondijitclick"==d?c:d,l])}});a.a11yclick=c;return a})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(a,
h,m,f){function d(c){if((c.keyCode===a.ENTER||c.keyCode===a.SPACE)&&!/input|button|textarea/i.test(c.target.nodeName))for(c=c.target;c;c=c.parentNode)if(c.dojoClick)return!0}var c;m(document,"keydown",function(a){d(a)?(c=a.target,a.preventDefault()):c=null});m(document,"keyup",function(a){d(a)&&a.target==c&&(c=null,m.emit(a.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey,altKey:a.altKey,_origType:a.type}))});var n=function(a,c){a.dojoClick=!0;return m(a,
"click",c)};n.click=n;n.press=function(c,d){var b=m(c,f.press,function(a){("mousedown"!=a.type||h.isLeft(a))&&d(a)}),g=m(c,"keydown",function(b){b.keyCode!==a.ENTER&&b.keyCode!==a.SPACE||d(b)});return{remove:function(){b.remove();g.remove()}}};n.release=function(c,d){var b=m(c,f.release,function(a){("mouseup"!=a.type||h.isLeft(a))&&d(a)}),g=m(c,"keyup",function(b){b.keyCode!==a.ENTER&&b.keyCode!==a.SPACE||d(b)});return{remove:function(){b.remove();g.remove()}}};n.move=f.move;return n})},"dijit/_FocusMixin":function(){define(["./focus",
"./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(a,h,m,f){f.extend(h,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return m("dijit._FocusMixin",null,{_focusManager:a})})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(a,h,m,f,d){var c=d.doc.documentElement;d=f("ie");var n=f("trident"),e=f("opera"),l=Math.floor,b=f("ff"),g=a.boxModel.replace(/-/,
""),e={dj_quirks:f("quirks"),dj_opera:e,dj_khtml:f("khtml"),dj_webkit:f("webkit"),dj_safari:f("safari"),dj_chrome:f("chrome"),dj_edge:f("edge"),dj_gecko:f("mozilla"),dj_ios:f("ios"),dj_android:f("android")};d&&(e.dj_ie=!0,e["dj_ie"+l(d)]=!0,e.dj_iequirks=f("quirks"));n&&(e.dj_trident=!0,e["dj_trident"+l(n)]=!0);b&&(e["dj_ff"+l(b)]=!0);e["dj_"+g]=!0;var q="",t;for(t in e)e[t]&&(q+=t+" ");c.className=h.trim(c.className+" "+q);m(function(){if(!a.isBodyLtr()){var b="dj_rtl dijitRtl "+q.replace(/ /g,"-rtl ");
c.className=h.trim(c.className+" "+b+"dj_rtl dijitRtl "+q.replace(/ /g,"-rtl "))}});return f})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(a,h,m,f){m(function(){h("highcontrast")&&a.add(f.body(),"dijit_a11y")});return h})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(a,h,m,f,d,c,n){d.add("highcontrast",function(){var c=n.doc.createElement("div");
try{c.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(h.blankGif||a.toUrl("./resources/blank.gif"))+'");';n.body().appendChild(c);var l=f.getComputedStyle(c),b=l.backgroundImage;return l.borderTopColor==l.borderRightColor||b&&("none"==b||"url(invalid-url:)"==b)}catch(g){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+g.toString()),!1}finally{8>=d("ie")?c.outerHTML="":n.body().removeChild(c)}});
c(function(){d("highcontrast")&&m.add(n.body(),"dj_a11y")});return d})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(a,h,m,f,d,c,n,e){var l=h("dijit._TemplatedMixin",e,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var b=this.declaredClass,c=this;return n.substitute(a,this,function(a,d){"!"==d.charAt(0)&&(a=f.getObject(d.substr(1),
!1,c));if("undefined"==typeof a)throw Error(b+" template:"+d);return null==a?"":"!"==d.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=a(this.templatePath,{sanitize:!0}));var b=l.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),
c;if(f.isString(b)){if(c=m.toDom(this._stringRepl(b),this.ownerDocument),1!=c.nodeType)throw Error("Invalid template: "+b);}else c=b.cloneNode(!0);this.domNode=c}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});l._templateCache={};l.getCachedTemplate=function(a,c,d){var b=l._templateCache,g=a,e=b[g];if(e){try{if(!e.ownerDocument||e.ownerDocument==
(d||document))return e}catch(r){}m.destroy(e)}a=n.trim(a);if(c||a.match(/\$\{([^\}]+)\}/g))return b[g]=a;c=m.toDom(a,d);if(1!=c.nodeType)throw Error("Invalid template: "+a);return b[g]=c};c("ie")&&d(window,"unload",function(){var a=l._templateCache,c;for(c in a){var d=a[c];"object"==typeof d&&m.destroy(d);delete a[c]}});return l})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(a){return a.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./has!host-browser?./request"],
function(a,h,m,f){var d;m("host-browser")?d=function(a,c,d){f(a,{sync:!!c,headers:{"X-Requested-With":null}}).then(d)}:h.getText?d=h.getText:console.error("dojo/text plugin failed to load because loader does not support getText");var c={},n=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},e={},l={};a.cache=function(a,g,e){var b;"string"==typeof a?/\//.test(a)?(b=a,e=g):
b=h.toUrl(a.replace(/\./g,"/")+(g?"/"+g:"")):(b=a+"",e=g);a=void 0!=e&&"string"!=typeof e?e.value:e;e=e&&e.sanitize;if("string"==typeof a)return c[b]=a,e?n(a):a;if(null===a)return delete c[b],null;b in c||d(b,!0,function(a){c[b]=a});return e?n(c[b]):c[b]};return{dynamic:!0,normalize:function(a,c){a=a.split("!");var b=a[0];return(/^\./.test(b)?c(b):b)+(a[1]?"!"+a[1]:"")},load:function(a,g,f){a=a.split("!");var b=1<a.length,h=a[0],q=g.toUrl(a[0]);a="url:"+q;var m=e,p=function(a){f(b?n(a):a)};h in c?
m=c[h]:g.cache&&a in g.cache?m=g.cache[a]:q in c&&(m=c[q]);if(m===e)if(l[q])l[q].push(p);else{var u=l[q]=[p];d(q,!g.async,function(a){c[h]=c[q]=a;for(var b=0;b<u.length;)u[b++](a);delete l[q]})}else p(m)}}})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(a,h,m,f,d,c,n,e,l){var b=d.delegate(e,{mouseenter:c.enter,mouseleave:c.leave,keypress:m._keypress}),g;m=f("dijit._AttachMixin",
null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=
b.nextSibling}},_processTemplateNode:function(a,b,c){var g=!0,e=this.attachScope||this,l=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(l)for(var f=l.split(/\s*,\s*/);l=f.shift();)d.isArray(e[l])?e[l].push(a):e[l]=a,g="containerNode"!=l,this._attachPoints.push(l);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event"))for(l=b.split(/\s*,\s*/),f=d.trim;b=l.shift();)if(b){var k=null;-1!=b.indexOf(":")?(k=b.split(":"),b=f(k[0]),k=f(k[1])):b=f(b);k||(k=b);this._attachEvents.push(c(a,b,d.hitch(e,
k)))}return g},_attach:function(c,d,e){d=d.replace(/^on/,"").toLowerCase();d="dijitclick"==d?g||(g=a("./a11yclick")):b[d]||d;return n(c,d,e)},_detachTemplateNodes:function(){var a=this.attachScope||this;h.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];h.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});d.extend(l,{dojoAttachEvent:"",dojoAttachPoint:""});return m})},
"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q){h=h("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);a.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,c.hitch(this,"_setStateClass"))},
this);for(var b in this.cssStateNodes||{})this._trackMouseState(this[b],this.cssStateNodes[b]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",
!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function b(b){c=c.concat(a.map(c,function(a){return a+b}),"dijit"+b)}var c=this.baseClass.split(" ");this.isLeftToRight()||b("Rtl");var d="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(d);this.state&&b(this.state);this.selected&&b("Selected");this._opened&&b("Opened");this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?
b("Active"):this.hovering&&b("Hover");this.focused&&b("Focused");var d=this.stateNode||this.domNode,g={};a.forEach(d.className.split(" "),function(a){g[a]=!0});"_stateClasses"in this&&a.forEach(this._stateClasses,function(a){delete g[a]});a.forEach(c,function(a){g[a]=!0});var e=[],l;for(l in g)e.push(l);d.className=e.join(" ");this._stateClasses=c},_subnodeCssMouseEvent:function(a,b,c){function d(c){f.toggle(a,b+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":case "MSPointerOver":case "pointerover":f.toggle(a,
b+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":f.toggle(a,b+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":d(!0);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":f.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":f.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});e(function(){function a(a,
b,c){if(!c||!m.isDescendant(c,b))for(;b&&b!=c;b=b.parentNode)if(b._cssState){var k=q.getEnclosingWidget(b);k&&(b==k.domNode?k._cssMouseEvent(a):k._subnodeCssMouseEvent(b,b._cssState,a))}}var c=b.body(),d;n(c,l.over,function(b){a(b,b.target,b.relatedTarget)});n(c,l.out,function(b){a(b,b.target,b.relatedTarget)});n(c,g.press,function(b){d=b.target;a(b,d)});n(c,g.release,function(b){a(b,d);d=null});n(c,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=
q.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return h})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(a,h,m,f,d,c){return h("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(c){var d=[];a.forEach(c||this.getChildren(),function(a){"value"in a?d.push(a):d=d.concat(this._getDescendantFormWidgets(a.getChildren()))},this);return d},reset:function(){a.forEach(this._getDescendantFormWidgets(),
function(a){a.reset&&a.reset()})},validate:function(){var d=!1;return a.every(a.map(this._getDescendantFormWidgets(),function(a){a._hasBeenBlurred=!0;var e=a.disabled||!a.validate||a.validate();e||d||(c.scrollIntoView(a.containerNode||a.domNode),a.focus(),d=!0);return e}),function(a){return a})},setValues:function(a){m.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(c){var d={};a.forEach(this._getDescendantFormWidgets(),
function(a){a.name&&(d[a.name]||(d[a.name]=[])).push(a)});for(var l in d)if(d.hasOwnProperty(l)){var b=d[l],g=f.getObject(l,!1,c);void 0!==g&&(g=[].concat(g),"boolean"==typeof b[0].checked?a.forEach(b,function(b){b.set("value",-1!=a.indexOf(g,b._get("value")))}):b[0].multiple?b[0].set("value",g):a.forEach(b,function(a,b){a.set("value",g[b])}))}},getValues:function(){m.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var c=
{};a.forEach(this._getDescendantFormWidgets(),function(a){var d=a.name;if(d&&!a.disabled){var b=a.get("value");"boolean"==typeof a.checked?/Radio/.test(a.declaredClass)?!1!==b?f.setObject(d,b,c):(b=f.getObject(d,!1,c),void 0===b&&f.setObject(d,null,c)):(a=f.getObject(d,!1,c),a||(a=[],f.setObject(d,a,c)),!1!==b&&a.push(b)):(a=f.getObject(d,!1,c),"undefined"!=typeof a?f.isArray(a)?a.push(b):f.setObject(d,[a,b],c):f.setObject(d,b,c))}});return c},isValid:function(){return""==this.state},onValidStateChange:function(){},
_getState:function(){var c=a.map(this._descendants,function(a){return a.get("state")||""});return 0<=a.indexOf(c,"Error")?"Error":0<=a.indexOf(c,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(c){this._descendants=this._getDescendantFormWidgets();a.forEach(this._descendants,function(a){a._started||a.startup()});c||this._onChildChange()},_onChildChange:function(a){a&&"state"!=a&&"disabled"!=a||this._set("state",this._getState());a&&"value"!=a&&"disabled"!=a&&
"checked"!=a||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var a=this;this.own(d(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(c){c.target!=a.domNode&&
a._onChildChange(c.type.replace("attrmodified-",""))}));this.watch("state",function(a,c,b){this.onValidStateChange(""==b)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(a,h){return a("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=h._getTabNavigable(this.domNode);
this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q){var t=a("dijit.DialogUnderlay",[e,l],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",
dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){f.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(c(this.domNode,"keydown",h.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=n.getBox(this.ownerDocument);b.top=
c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new b(this.domNode);var a=n.get(this.ownerDocument);this._modalConnects=[g.on("resize",h.hitch(this,"layout")),c(a,"scroll",h.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();
this.inherited(arguments)},_onKeyDown:function(){}});t.show=function(a,b){var c=t._singleton;!c||c._destroyed?c=q._underlay=t._singleton=new t(a):a&&c.set(a);d.set(c.domNode,"zIndex",b);c.open||c.show()};t.hide=function(){var a=t._singleton;a&&!a._destroyed&&a.hide()};return t})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(a,h,m,f,d,c,n,e){e.add("config-bgIframe",(e("ie")||e("trident"))&&
!/IEMobile\/10\.0/.test(navigator.userAgent));var l=new function(){var b=[];this.pop=function(){var c;b.length?(c=b.pop(),c.style.display=""):(9>e("ie")?(c=m.dojoBlankHtmlUrl||a.toUrl("dojo/resources/blank.html")||'javascript:""',c=document.createElement("\x3ciframe src\x3d'"+c+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(c=f.create("iframe"),c.src='javascript:""',c.className="dijitBackgroundIframe",c.setAttribute("role",
"presentation"),d.set(c,"opacity",.1)),c.tabIndex=-1);return c};this.push=function(a){a.style.display="none";b.push(a)}};h.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(e("config-bgIframe")){var b=this.iframe=l.pop();a.appendChild(b);7>e("ie")||e("quirks")?(this.resize(a),this._conn=n(a,"resize",c.hitch(this,"resize",a))):d.set(b,{width:"100%",height:"100%"})}};c.extend(h.BackgroundIframe,{resize:function(a){this.iframe&&d.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+
"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),l.push(this.iframe),delete this.iframe)}});return h.BackgroundIframe})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(a,h,m,f,d){var c=new a,n;m(function(){var a=d.getBox();c._rlh=h(window,"resize",function(){var b=d.getBox();if(a.h!=b.h||a.w!=b.w)a=b,c.emit("resize")});if(8==f("ie")){var l=screen.deviceXDPI;
setInterval(function(){screen.deviceXDPI!=l&&(l=screen.deviceXDPI,c.emit("resize"))},500)}f("ios")&&(h(document,"focusin",function(a){n=a.target}),h(document,"focusout",function(a){n=null}))});c.getEffectiveBox=function(a){a=d.getBox(a);var c=n&&n.tagName&&n.tagName.toLowerCase();f("ios")&&n&&!n.readOnly&&("textarea"==c||"input"==c&&/^(color|email|number|password|search|tel|text|url)$/.test(n.type))&&(a.h*=0==orientation||180==orientation?.66:.4,c=n.getBoundingClientRect(),a.h=Math.max(a.h,c.top+
c.height));return a};return c})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r){return l("dijit.layout.ContentPane",[m,f,d],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:a._scopeName,
preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var k=
new c(a,b);return!k.href&&k._contentSetter&&k._contentSetter.parseDeferred&&!k._contentSetter.parseDeferred.isFulfilled()?k._contentSetter.parseDeferred.then(function(){return k}):k},create:function(a,b){if(!(a&&a.template||!b||"href"in a||"content"in a)){b=g.byId(b);for(var c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);a=h.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=v.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=c.substitute(this.loadingMessage,a);this.errorMessage=c.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&e.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!h.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){e.forEach(this.getChildren(),
function(a){a._started||a._destroyed||!h.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&e.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!h.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(b){a.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",b)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new b(h.hitch(this,"cancel"));this.onLoadDeferred.then(h.hitch(this,
"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(b){a.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",b)},_setContentAttr:function(a){this._set("href","");this.cancel();this.onLoadDeferred=new b(h.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(h.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new b(h.hitch(this,"cancel"));this.onLoadDeferred.then(h.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};h.isObject(this.ioArgs)&&h.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||w.get)(b),d;c.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(y){a._onError("Content",
y)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(u){console.error("Error "+this.widgetId+" running custom onLoad code: "+u.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(p){console.error("Error "+this.widgetId+" running custom onUnload code: "+
p.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;e.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(e.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||t.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){a=this.preprocessContent(a);
this.destroyDescendants();var c=this._contentSetter;c&&c instanceof n._ContentSetter||(c=this._contentSetter=new n._ContentSetter({node:this.containerNode,_onError:h.hitch(this,this._onError),onContentError:h.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(z){console.error("Fatal "+this.id+" could not change content due to "+z.message,z)}})}));var d=h.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,
parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),d=c.set(h.isObject(a)&&a.domNode?a.domNode:a,d),g=this;return r(d&&d.then?d:c.parseDeferred,function(){delete g._contentSetterParams;b||(g._started&&(g._startChildren(),g._scheduleLayout()),g._onLoadHandler(a))})},preprocessContent:function(a){return a},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,
!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(a,h,m,f){return h("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(a,
c){var d=this.containerNode;if(0<c){for(d=d.firstChild;0<c;)1==d.nodeType&&c--,d=d.nextSibling;d?c="before":(d=this.containerNode,c="last")}m.place(a.domNode,d,c);this._started&&!a._started&&a.startup()},removeChild:function(a){"number"==typeof a&&(a=this.getChildren()[a]);a&&(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(d,c){var f=this.getChildren();d=a.indexOf(f,d);return f[d+c]},getIndexOfChild:function(d){return a.indexOf(this.getChildren(),
d)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(a,h,m,f,d,c,n,e,l,b){return h("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);
this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(l.on("resize",c.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],b=!1;n("\x3e *",this.containerNode).some(function(c){var d=e.byNode(c);d&&d.resize?a.push(d):!/script|link|style/i.test(c.nodeName)&&c.offsetHeight&&(b=!0)});this._singleChild=1!=a.length||b?null:a[0];m.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,
b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,d){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();a&&f.setMarginBox(this.domNode,a);var g=this.containerNode;g===this.domNode?(d=d||{},c.mixin(d,a||{}),"h"in d&&"w"in d||(d=c.mixin(f.getMarginBox(g),d)),this._contentBox=b.marginBox2contentBox(g,d)):this._contentBox=f.getContentBox(g);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();
if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||f.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),b,c=0;b=a[c++];)b.resize&&b.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!m.contains(a,"dijitHidden")&&
b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(a,h,m,f,d){function c(a){return a.substring(0,1).toUpperCase()+a.substring(1)}function n(a,b){var c=a.resize?a.resize(b):m.setMarginBox(a.domNode,b);c?d.mixin(a,c):(d.mixin(a,m.getMarginBox(a.domNode)),
d.mixin(a,b))}var e={marginBox2contentBox:function(a,b){var c=f.getComputedStyle(a),d=m.getMarginExtents(a,c),e=m.getPadBorderExtents(a,c);return{l:f.toPixelValue(a,c.paddingLeft),t:f.toPixelValue(a,c.paddingTop),w:b.w-(d.w+e.w),h:b.h-(d.h+e.h)}},layoutChildren:function(e,b,g,f,m){b=d.mixin({},b);h.add(e,"dijitLayoutContainer");g=a.filter(g,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(a.filter(g,function(a){return"center"==a.region||"client"==a.layoutAlign}));a.forEach(g,
function(a){var d=a.domNode,g=a.region||a.layoutAlign;if(!g)throw Error("No region setting for "+a.id);var e=d.style;e.left=b.l+"px";e.top=b.t+"px";e.position="absolute";h.add(d,"dijitAlign"+c(g));d={};f&&f==a.id&&(d["top"==a.region||"bottom"==a.region?"h":"w"]=m);"leading"==g&&(g=a.isLeftToRight()?"left":"right");"trailing"==g&&(g=a.isLeftToRight()?"right":"left");"top"==g||"bottom"==g?(d.w=b.w,n(a,d),b.h-=a.h,"top"==g?b.t+=a.h:e.top=b.t+b.h+"px"):"left"==g||"right"==g?(d.h=b.h,n(a,d),b.w-=a.w,"left"==
g?b.l+=a.w:e.left=b.l+b.w+"px"):"client"!=g&&"center"!=g||n(a,b)})}};d.setObject("dijit.layout.utils",e);return e})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(a,h,m,f,d,c,n){var e=0,l={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:c.empty,_setNodeContent:function(a,d){c.empty(a);if(d)if("number"==typeof d&&(d=d.toString()),
"string"==typeof d&&(d=c.toDom(d,a.ownerDocument)),!d.nodeType&&h.isArrayLike(d))for(var b=d.length,g=0;g<d.length;g=b==d.length?g+1:0)c.place(d[g],a,"last");else c.place(d,a,"last");return a},_ContentSetter:f("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:a._scopeName,startup:!0,constructor:function(a,c){h.mixin(this,a||{});c=this.node=d.byId(this.node||c);this.id||(this.id=["Setter",c?c.id||c.tagName:"",e++].join("_"))},set:function(a,
c){void 0!==a&&(this.content=a);"number"==typeof a&&(a=a.toString());c&&this._mixin(c);this.onBegin();this.setContent();return(a=this.onEnd())&&a.then?a:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=l._setNodeContent(a,this.content)}catch(q){var c=this.onContentError(q);try{a.innerHTML=c}catch(t){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+t.message,t)}}this.node=a},empty:function(){this.parseDeferred&&
(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(m.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);c.empty(this.node)},onBegin:function(){var a=this.content;if(h.isString(a)&&(this.cleanContent&&(a=l._secureForInnerHtml(a)),this.extractContent)){var c=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);c&&(a=c[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&
this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=this.node;try{var c={};m.forEach(["dir","lang","textDir"],function(a){this[a]&&(c[a]=this[a])},this);var d=this;this.parseDeferred=
n.parse({rootNode:a,noStart:!this.startup,inherited:c,scope:this.parserScope}).then(function(a){return d.parseResults=a},function(a){d._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(t){this._onError("Content",t,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,c,d){a=this["on"+a+"Error"].call(this,c);d?console.error(d,c):a&&l._setNodeContent(this.node,a,!0)}}),set:function(a,c,d){void 0==c&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),
c="");"number"==typeof c&&(c=c.toString());return d?(new l._ContentSetter(h.mixin(d,{content:c,node:a}))).set():l._setNodeContent(a,c,!0)}};h.setObject("dojo.html",l);return l})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r){function p(a){return eval("("+a+")")}function u(a){var b=a._nameCaseMap,
c=a.prototype;if(!b||b._extendCnt<x){var b=a._nameCaseMap={},k;for(k in c)"_"!==k.charAt(0)&&(b[k.toLowerCase()]=k);b._extendCnt=x}return b}function k(b,c){c||(c=a);var k=c._dojoParserCtorMap||(c._dojoParserCtorMap={}),d=b.join();if(!k[d]){for(var g=[],e=0,l=b.length;e<l;e++){var f=b[e];g[g.length]=k[f]=k[f]||m.getObject(f)||~f.indexOf("/")&&c(f)}b=g.shift();k[d]=g.length?b.createSubclass?b.createSubclass(g):b.extend.apply(b,g):b}return k[d]}new Date("X");var x=0;l.after(m,"extend",function(){x++},
!0);var B={_clearCache:function(){x++;_ctorMap={}},_functionFromScript:function(a,b){var c="",k="",d=a.getAttribute(b+"args")||a.getAttribute("args");b=a.getAttribute("with");d=(d||"").split(/\s*,\s*/);b&&b.length&&f.forEach(b.split(/\s*,\s*/),function(a){c+="with("+a+"){";k+="}"});return new Function(d,c+a.innerHTML+k)},instantiate:function(a,b,c){b=b||{};c=c||{};var k=(c.scope||h._scopeName)+"Type",d="data-"+(c.scope||h._scopeName)+"-",g=d+"type",e=d+"mixins",l=[];f.forEach(a,function(a){var c=
k in b?b[k]:a.getAttribute(g)||a.getAttribute(k);if(c){var d=a.getAttribute(e),c=d?[c].concat(d.split(/\s*,\s*/)):[c];l.push({node:a,types:c})}});return this._instantiate(l,b,c)},_instantiate:function(a,c,d,g){function e(a){c._started||d.noStart||f.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}a=f.map(a,function(a){var b=a.ctor||k(a.types,d.contextRequire);if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,
a.node,c,d,a.scripts,a.inherited)},this);return g?b(a).then(e):e(a)},construct:function(a,b,c,k,d,n){function x(a){C&&m.setObject(C,a);for(A=0;A<Y.length;A++)l[Y[A].advice||"after"](a,Y[A].method,m.hitch(a,Y[A].func),!0);for(A=0;A<ba.length;A++)ba[A].call(a);for(A=0;A<V.length;A++)a.watch(V[A].prop,V[A].func);for(A=0;A<X.length;A++)v(a,X[A].event,X[A].func);return a}var q=a&&a.prototype;k=k||{};var r={};k.defaults&&m.mixin(r,k.defaults);n&&m.mixin(r,n);var B;t("dom-attributes-explicit")?B=b.attributes:
t("dom-attributes-specified-flag")?B=f.filter(b.attributes,function(a){return a.specified}):(n=(/^input$|^img$/i.test(b.nodeName)?b:b.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),B=f.map(n.split(/\s+/),function(a){var c=a.toLowerCase();return{name:a,value:"LI"==b.nodeName&&"value"==a||"enctype"==c?b.getAttribute(c):b.getAttributeNode(c).value}}));var y=k.scope||h._scopeName;n="data-"+y+"-";var z={};"dojo"!==y&&(z[n+"props"]=
"data-dojo-props",z[n+"type"]="data-dojo-type",z[n+"mixins"]="data-dojo-mixins",z[y+"type"]="dojotype",z[n+"id"]="data-dojo-id");for(var A=0,F,y=[],C,D;F=B[A++];){var L=F.name,P=L.toLowerCase();F=F.value;switch(z[P]||P){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":D=F;break;case "data-dojo-id":case "jsid":C=F;break;case "data-dojo-attach-point":case "dojoattachpoint":r.dojoAttachPoint=F;break;case "data-dojo-attach-event":case "dojoattachevent":r.dojoAttachEvent=
F;break;case "class":r["class"]=b.className;break;case "style":r.style=b.style&&b.style.cssText;break;default:if(L in q||(L=u(a)[P]||L),L in q)switch(typeof q[L]){case "string":r[L]=F;break;case "number":r[L]=F.length?Number(F):NaN;break;case "boolean":r[L]="false"!=F.toLowerCase();break;case "function":""===F||-1!=F.search(/[^\w\.]+/i)?r[L]=new Function(F):r[L]=m.getObject(F,!1)||new Function(F);y.push(L);break;default:P=q[L],r[L]=P&&"length"in P?F?F.split(/\s*,\s*/):[]:P instanceof Date?""==F?new Date(""):
"now"==F?new Date:g.fromISOString(F):P instanceof e?h.baseUrl+F:p(F)}else r[L]=F}}for(B=0;B<y.length;B++)z=y[B].toLowerCase(),b.removeAttribute(z),b[z]=null;if(D)try{D=p.call(k.propsThis,"{"+D+"}"),m.mixin(r,D)}catch(ca){throw Error(ca.toString()+" in data-dojo-props\x3d'"+D+"'");}m.mixin(r,c);d||(d=a&&(a._noScript||q._noScript)?[]:w("\x3e script[type^\x3d'dojo/']",b));var Y=[],ba=[],V=[],X=[];if(d)for(A=0;A<d.length;A++)z=d[A],b.removeChild(z),c=z.getAttribute(n+"event")||z.getAttribute("event"),
k=z.getAttribute(n+"prop"),D=z.getAttribute(n+"method"),y=z.getAttribute(n+"advice"),B=z.getAttribute("type"),z=this._functionFromScript(z,n),c?"dojo/connect"==B?Y.push({method:c,func:z}):"dojo/on"==B?X.push({event:c,func:z}):r[c]=z:"dojo/aspect"==B?Y.push({method:D,advice:y,func:z}):"dojo/watch"==B?V.push({prop:k,func:z}):ba.push(z);a=(d=a.markupFactory||q.markupFactory)?d(r,b,a):new a(r,b);return a.then?a.then(x):x(a)},scan:function(b,c){function d(a){if(!a.inherited){a.inherited={};var b=a.node,
c=d(a.parent),b={dir:b.getAttribute("dir")||c.dir,lang:b.getAttribute("lang")||c.lang,textDir:b.getAttribute(m)||c.textDir},k;for(k in b)b[k]&&(a.inherited[k]=b[k])}return a.inherited}var g=[],e=[],l={},p=(c.scope||h._scopeName)+"Type",n="data-"+(c.scope||h._scopeName)+"-",x=n+"type",m=n+"textdir",n=n+"mixins",u=b.firstChild,r=c.inherited;if(!r){var w=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&w(a.parentNode,b)},r={dir:w(b,"dir"),lang:w(b,"lang"),textDir:w(b,m)},t;for(t in r)r[t]||
delete r[t]}t={inherited:r};for(var v,B;;)if(u)if(1!=u.nodeType)u=u.nextSibling;else if(v&&"script"==u.nodeName.toLowerCase())(r=u.getAttribute("type"))&&/^dojo\/\w/i.test(r)&&v.push(u),u=u.nextSibling;else if(B)u=u.nextSibling;else if(r=u.getAttribute(x)||u.getAttribute(p),b=u.firstChild,r||b&&(3!=b.nodeType||b.nextSibling)){B=null;if(r){var y=u.getAttribute(n);v=y?[r].concat(y.split(/\s*,\s*/)):[r];try{B=k(v,c.contextRequire)}catch(Y){}B||f.forEach(v,function(a){~a.indexOf("/")&&!l[a]&&(l[a]=!0,
e[e.length]=a)});y=B&&!B.prototype._noScript?[]:null;t={types:v,ctor:B,parent:t,node:u,scripts:y};t.inherited=d(t);g.push(t)}else t={node:u,scripts:v,parent:t};v=y;B=u.stopParser||B&&B.prototype.stopParser&&!c.template;u=b}else u=u.nextSibling;else{if(!t||!t.node)break;u=t.node.nextSibling;B=!1;t=t.parent;v=t.scripts}var z=new q;e.length?(c.contextRequire||a)(e,function(){z.resolve(f.filter(g,function(a){if(!a.ctor)try{a.ctor=k(a.types,c.contextRequire)}catch(X){}for(var b=a.parent;b&&!b.types;)b=
b.parent;var d=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(d&&d.stopParser&&!c.template);a.instantiate=!b||b.instantiate&&b.instantiateChildren;return a.instantiate}))}):z.resolve(g);return z.promise},_require:function(b,c){b=p("{"+b.innerHTML+"}");var k=[],d=[],g=new q;c=c&&c.contextRequire||a;for(var e in b)k.push(e),d.push(b[e]);c(d,function(){for(var a=0;a<k.length;a++)m.setObject(k[a],arguments[a]);g.resolve(arguments)});return g.promise},_scanAmd:function(a,b){var c=new q,k=c.promise;c.resolve(!0);
var d=this;w("script[type\x3d'dojo/require']",a).forEach(function(a){k=k.then(function(){return d._require(a,b)});a.parentNode.removeChild(a)});return k},parse:function(a,b){!a||"string"==typeof a||"nodeType"in a||(b=a,a=b.rootNode);var k=a?c.byId(a):n.body();b=b||{};var d=b.template?{template:!0}:{},g=[],e=this;a=this._scanAmd(k,b).then(function(){return e.scan(k,b)}).then(function(a){return e._instantiate(a,d,b,!0)}).then(function(a){return g=g.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});m.mixin(g,a);return g}};h.parser=B;d.parseOnLoad&&r(100,B,"parse");return B})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(a,h){var m={};a.setObject("dojo.date.stamp",m);m.fromISOString=function(a,d){m._isoRegExp||(m._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var c=m._isoRegExp.exec(a);a=null;if(c){c.shift();c[1]&&c[1]--;c[6]&&(c[6]*=1E3);d&&(d=new Date(d),h.forEach(h.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(a){return d["get"+a]()}),function(a,b){c[b]=c[b]||a}));a=new Date(c[0]||1970,c[1]||0,c[2]||1,c[3]||0,c[4]||0,c[5]||0,c[6]||0);100>c[0]&&a.setFullYear(c[0]||1970);var f=0,e=c[7]&&c[7].charAt(0);"Z"!=e&&(f=60*(c[8]||0)+(Number(c[9])||0),"-"!=e&&(f*=-1));e&&(f-=a.getTimezoneOffset());f&&a.setTime(a.getTime()+6E4*f)}return a};m.toISOString=function(a,d){var c=function(a){return 10>a?"0"+a:a};d=d||{};var f=[],e=d.zulu?"getUTC":"get",l="";"time"!=d.selector&&(l=a[e+"FullYear"](),l=["0000".substr((l+
"").length)+l,c(a[e+"Month"]()+1),c(a[e+"Date"]())].join("-"));f.push(l);"date"!=d.selector&&(l=[c(a[e+"Hours"]()),c(a[e+"Minutes"]()),c(a[e+"Seconds"]())].join(":"),e=a[e+"Milliseconds"](),d.milliseconds&&(l+="."+(100>e?"0":"")+c(e)),d.zulu?l+="Z":"time"!=d.selector&&(a=a.getTimezoneOffset(),d=Math.abs(a),l+=(0<a?"-":"+")+c(Math.floor(d/60))+":"+c(d%60)),f.push(l));return f.join("T")};return m})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r){a._xhrObj=v._create;var p=a.config;a.objectToQuery=f.objectToQuery;a.queryToObject=f.queryToObject;a.fieldToObject=c.fieldToObject;a.formToObject=c.toObject;a.formToQuery=c.toQuery;a.formToJson=c.toJson;a._blockAsync=!1;h.add("native-xhr2-blob",function(){if(h("native-xhr2")){var a=new XMLHttpRequest;a.open("GET","/",!0);a.responseType="blob";var b=a.responseType;a.abort();return"blob"===b}});var u=a._contentHandlers=a.contentHandlers={text:function(a){return a.responseText},
json:function(a){return l.fromJson(a.responseText||null)},"json-comment-filtered":function(a){e.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");a=a.responseText;var b=a.indexOf("/*"),c=a.lastIndexOf("*/");if(-1==b||-1==c)throw Error("JSON was not comment filtered");
return l.fromJson(a.substring(b+2,c))},javascript:function(b){return a.eval(b.responseText)},xml:function(a){var b=a.responseXML;b&&h("dom-qsa2.1")&&!b.querySelectorAll&&h("dom-parser")&&(b=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(h("ie")&&(!b||!b.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];g.some(c,function(c){try{var k=new ActiveXObject(c);k.async=!1;k.loadXML(a.responseText);b=k}catch(H){return!1}return!0})}return b},
"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?u["json-comment-filtered"](a):u.json(a)}};h("native-xhr2")&&(u.arraybuffer=u.blob=u.document=function(a,b){return"blob"!==b.args.handleAs||h("native-xhr2-blob")?a.response:new Blob([a.response],{type:a.getResponseHeader("Content-Type")})});a._ioSetArgs=function(k,g,e,l){var x={args:k,url:k.url},h=null;if(k.form){var h=d.byId(k.form),q=h.getAttributeNode("action");x.url=x.url||(q?q.value:a.doc?a.doc.URL:
null);h=c.toObject(h)}q=[{}];h&&q.push(h);k.content&&q.push(k.content);k.preventCache&&q.push({"dojo.preventCache":(new Date).valueOf()});x.query=f.objectToQuery(b.mixin.apply(null,q));x.handleAs=k.handleAs||"text";var m=new n(function(a){a.canceled=!0;g&&g(a);var b=a.ioArgs.error;b||(b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b);return b});m.addCallback(e);var u=k.load;u&&b.isFunction(u)&&m.addCallback(function(a){return u.call(k,a,x)});var r=k.error;r&&b.isFunction(r)&&m.addErrback(function(a){return r.call(k,
a,x)});var t=k.handle;t&&b.isFunction(t)&&m.addBoth(function(a){return t.call(k,a,x)});m.addErrback(function(a){return l(a,m)});p.ioPublish&&a.publish&&!1!==x.args.ioPublish&&(m.addCallbacks(function(b){a.publish("/dojo/io/load",[m,b]);return b},function(b){a.publish("/dojo/io/error",[m,b]);return b}),m.addBoth(function(b){a.publish("/dojo/io/done",[m,b]);return b}));m.ioArgs=x;return m};var k=function(a){a=u[a.ioArgs.handleAs](a.ioArgs.xhr,a.ioArgs);return void 0===a?null:a},x=function(a,b){b.ioArgs.args.failOk||
console.error(a);return a},B=function(b){0>=y&&(y=0,p.ioPublish&&a.publish&&(!b||b&&!1!==b.ioArgs.args.ioPublish)&&a.publish("/dojo/io/stop"))},y=0;t.after(w,"_onAction",function(){--y});t.after(w,"_onInFlight",B);a._ioCancelAll=w.cancelAll;a._ioNotifyStart=function(b){p.ioPublish&&a.publish&&!1!==b.ioArgs.args.ioPublish&&(y||a.publish("/dojo/io/start"),y+=1,a.publish("/dojo/io/send",[b]))};a._ioWatch=function(a,c,k,d){a.ioArgs.options=a.ioArgs.args;b.mixin(a,{response:a.ioArgs,isValid:function(b){return c(a)},
isReady:function(b){return k(a)},handleResponse:function(b){return d(a)}});w(a);B(a)};a._ioAddQueryToUrl=function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"\x26")+a.query,a.query=null)};a.xhr=function(b,c,d){var g,e=a._ioSetArgs(c,function(a){g&&g.cancel()},k,x),l=e.ioArgs;"postData"in c?l.query=c.postData:"putData"in c?l.query=c.putData:"rawBody"in c?l.query=c.rawBody:(2<arguments.length&&!d||-1==="POST|PUT".indexOf(b.toUpperCase()))&&a._ioAddQueryToUrl(l);var f;h("native-xhr2")&&(f=
{arraybuffer:1,blob:1,document:1});f=h("native-xhr2")&&f[c.handleAs]?c.handleAs:"text";"blob"!==f||h("native-xhr2-blob")||(f="arraybuffer");f={method:b,handleAs:f,responseType:c.responseType,timeout:c.timeout,withCredentials:c.withCredentials,ioArgs:l};"undefined"!==typeof c.headers&&(f.headers=c.headers);"undefined"!==typeof c.contentType&&(f.headers||(f.headers={}),f.headers["Content-Type"]=c.contentType);"undefined"!==typeof l.query&&(f.data=l.query);"undefined"!==typeof c.sync&&(f.sync=c.sync);
a._ioNotifyStart(e);try{g=v(l.url,f,!0)}catch(M){return e.cancel(),e}e.ioArgs.xhr=g.response.xhr;g.then(function(){e.resolve(e)}).otherwise(function(a){l.error=a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);e.reject(a)});return e};a.xhrGet=function(b){return a.xhr("GET",b)};a.rawXhrPost=a.xhrPost=function(b){return a.xhr("POST",b,!0)};a.rawXhrPut=a.xhrPut=function(b){return a.xhr("PUT",b,!0)};a.xhrDelete=function(b){return a.xhr("DELETE",b)};a._isDocumentOk=
function(a){return r.checkStatus(a.status)};a._getText=function(b){var c;a.xhrGet({url:b,sync:!0,load:function(a){c=a}});return c};b.mixin(a.xhr,{_xhrObj:a._xhrObj,fieldToObject:c.fieldToObject,formToObject:c.toObject,objectToQuery:f.objectToQuery,formToQuery:c.toQuery,formToJson:c.toJson,queryToObject:f.queryToObject,contentHandlers:u,_ioSetArgs:a._ioSetArgs,_ioCancelAll:a._ioCancelAll,_ioNotifyStart:a._ioNotifyStart,_ioWatch:a._ioWatch,_ioAddQueryToUrl:a._ioAddQueryToUrl,_isDocumentOk:a._isDocumentOk,
_getText:a._getText,get:a.xhrGet,post:a.xhrPost,put:a.xhrPut,del:a.xhrDelete});return a.xhr})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(a,h,m,f){var d={fieldToObject:function(a){var c=null;if(a=h.byId(a)){var d=a.name,l=(a.type||"").toLowerCase();if(d&&l&&!a.disabled)if("radio"==l||"checkbox"==l)a.checked&&(c=a.value);else if(a.multiple)for(c=[],a=[a.firstChild];a.length;)for(d=a.pop();d;d=d.nextSibling)if(1==d.nodeType&&"option"==d.tagName.toLowerCase())d.selected&&
c.push(d.value);else{d.nextSibling&&a.push(d.nextSibling);d.firstChild&&a.push(d.firstChild);break}else c=a.value}return c},toObject:function(c){var f={};c=h.byId(c).elements;for(var e=0,l=c.length;e<l;++e){var b=c[e],g=b.name,q=(b.type||"").toLowerCase();if(g&&q&&0>"file|submit|image|reset|button".indexOf(q)&&!b.disabled){var m=f,w=g,b=d.fieldToObject(b);if(null!==b){var v=m[w];"string"==typeof v?m[w]=[v,b]:a.isArray(v)?v.push(b):m[w]=b}"image"==q&&(f[g+".x"]=f[g+".y"]=f[g].x=f[g].y=0)}}return f},
toQuery:function(a){return m.objectToQuery(d.toObject(a))},toJson:function(a,n){return f.stringify(d.toObject(a),null,n?4:0)}};return d})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../has!host-browser?../_base/window: ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(a,h,m,f,d,c){function n(){for(var a=+new Date,c=0,d;c<b.length&&(d=b[c]);c++){var f=d.response,n=f.options;d.isCanceled&&d.isCanceled()||d.isValid&&
!d.isValid(f)?(b.splice(c--,1),e._onAction&&e._onAction()):d.isReady&&d.isReady(f)?(b.splice(c--,1),d.handleResponse(f),e._onAction&&e._onAction()):d.startTime&&d.startTime+(n.timeout||0)<a&&(b.splice(c--,1),d.cancel(new h("Timeout exceeded",f)),e._onAction&&e._onAction())}e._onInFlight&&e._onInFlight(d);b.length||(clearInterval(l),l=null)}function e(a){a.response.options.timeout&&(a.startTime=+new Date);a.isFulfilled()||(b.push(a),l||(l=setInterval(n,50)),a.response.options.sync&&n())}var l=null,
b=[];e.cancelAll=function(){try{f.forEach(b,function(a){try{a.cancel(new m("All requests canceled."))}catch(q){}})}catch(g){}};d&&c&&d.doc.attachEvent&&c(d.global,"unload",function(){e.cancelAll()});return e})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),function(a,h,m,f,d,c,n,e,l){function b(a){return q(a)}function g(a){return void 0!==a.data?a.data:a.text}a.deepCopy=
function(b,c){for(var d in c){var g=b[d],e=c[d];g!==e&&(g&&"object"===typeof g&&e&&"object"===typeof e?a.deepCopy(g,e):b[d]=e)}return b};a.deepCreate=function(b,c){c=c||{};var d=n.delegate(b),g,e;for(g in b)(e=b[g])&&"object"===typeof e&&(d[g]=a.deepCreate(e,c[g]));return a.deepCopy(d,c)};var q=Object.freeze||function(a){return a};a.deferred=function(c,d,l,r,p,u){var k=new f(function(a){d&&d(k,c);return a&&(a instanceof h||a instanceof m)?a:new m("Request canceled",c)});k.response=c;k.isValid=l;k.isReady=
r;k.handleResponse=p;l=k.then(b).otherwise(function(a){a.response=c;throw a;});a.notify&&l.then(n.hitch(a.notify,"emit","load"),n.hitch(a.notify,"emit","error"));r=l.then(g);p=new e;for(var x in r)r.hasOwnProperty(x)&&(p[x]=r[x]);p.response=l;q(p);u&&k.then(function(a){u.call(k,a)},function(a){u.call(k,c,a)});k.promise=p;k.then=p.then;return k};a.addCommonMethods=function(a,b){c.forEach(b||["GET","POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(c,d){d=n.delegate(d||
{});d.method=b;return a(c,d)}})};a.parseArgs=function(a,b,c){var g=b.data,e=b.query;!g||c||"object"!==typeof g||l("native-xhr2")&&(g instanceof ArrayBuffer||g instanceof Blob)||(b.data=d.objectToQuery(g));e?("object"===typeof e&&(e=d.objectToQuery(e)),b.preventCache&&(e+=(e?"\x26":"")+"request.preventCache\x3d"+ +new Date)):b.preventCache&&(e="request.preventCache\x3d"+ +new Date);a&&e&&(a+=(~a.indexOf("?")?"\x26":"?")+e);return{url:a,options:b,getHeader:function(a){return null}}};a.checkStatus=function(a){a=
a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(a){return a("RequestError",function(a,m){this.response=m})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(a,h){return a("RequestTimeoutError",null,h,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(a,h,m,f,d){function c(b,c){var d=b.xhr;b.status=
b.xhr.status;try{b.text=d.responseText}catch(x){}"xml"===b.options.handleAs&&(b.data=d.responseXML);if(!c)try{m(b)}catch(x){c=x}var k;if(c)this.reject(c);else{try{m(b)}catch(x){k=x}f.checkStatus(d.status)?k?this.reject(k):this.resolve(b):(c=k?new a("Unable to load "+b.url+" status: "+d.status+" and an error in handleAs: transformation of response",b):new a("Unable to load "+b.url+" status: "+d.status,b),this.reject(c))}}function n(a){return this.xhr.getResponseHeader(a)}function e(m,p,u){var k=d("native-formdata")&&
p&&p.data&&p.data instanceof FormData,x=f.parseArgs(m,f.deepCreate(v,p),k);m=x.url;p=x.options;var r,y=f.deferred(x,t,b,g,c,function(){r&&r()}),z=x.xhr=e._create();if(!z)return y.cancel(new a("XHR was not created")),u?y:y.promise;x.getHeader=n;q&&(r=q(z,y,x));var A="undefined"===typeof p.data?null:p.data,D=!p.sync,F=p.method;try{z.open(F,m,D,p.user||w,p.password||w);p.withCredentials&&(z.withCredentials=p.withCredentials);d("native-response-type")&&p.handleAs in l&&(z.responseType=l[p.handleAs]);
var C=p.headers;m=k?!1:"application/x-www-form-urlencoded";if(C)for(var H in C)"content-type"===H.toLowerCase()?m=C[H]:C[H]&&z.setRequestHeader(H,C[H]);m&&!1!==m&&z.setRequestHeader("Content-Type",m);C&&"X-Requested-With"in C||z.setRequestHeader("X-Requested-With","XMLHttpRequest");f.notify&&f.notify.emit("send",x,y.promise.cancel);z.send(A)}catch(I){y.reject(I)}h(y);z=null;return u?y:y.promise}d.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});d.add("dojo-force-activex-xhr",
function(){return d("activex")&&"file:"===window.location.protocol});d.add("native-xhr2",function(){if(d("native-xhr")&&!d("dojo-force-activex-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});d.add("native-formdata",function(){return"undefined"!==typeof FormData});d.add("native-response-type",function(){return d("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});d.add("native-xhr2-blob",
function(){if(d("native-response-type")){var a=new XMLHttpRequest;a.open("GET","https://dojotoolkit.org/",!0);a.responseType="blob";var b=a.responseType;a.abort();return"blob"===b}});var l={blob:d("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"},b,g,q,t;d("native-xhr2")?(b=function(a){return!this.isFulfilled()},t=function(a,b){b.xhr.abort()},q=function(b,c,d){function k(a){c.handleResponse(d)}function g(b){b=new a("Unable to load "+d.url+" status: "+b.target.status,
d);c.handleResponse(d,b)}function e(a){a.lengthComputable?(d.loaded=a.loaded,d.total=a.total,c.progress(d)):3===d.xhr.readyState&&(d.loaded="loaded"in a?a.loaded:a.position,c.progress(d))}b.addEventListener("load",k,!1);b.addEventListener("error",g,!1);b.addEventListener("progress",e,!1);return function(){b.removeEventListener("load",k,!1);b.removeEventListener("error",g,!1);b.removeEventListener("progress",e,!1);b=null}}):(b=function(a){return a.xhr.readyState},g=function(a){return 4===a.xhr.readyState},
t=function(a,b){a=b.xhr;b=typeof a.abort;"function"!==b&&"object"!==b&&"unknown"!==b||a.abort()});var w,v={data:null,query:null,sync:!1,method:"GET"};e._create=function(){throw Error("XMLHTTP not available");};if(d("native-xhr")&&!d("dojo-force-activex-xhr"))e._create=function(){return new XMLHttpRequest};else if(d("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),e._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(r){try{new ActiveXObject("Microsoft.XMLHTTP"),e._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(p){}}f.addCommonMethods(e);
return e})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../has!dom?../selector/_loader"],function(a,h,m,f){function d(a){var c=b[a.options.handleAs];a.data=c?c(a):a.data||a.text;return a}f.add("activex","undefined"!==typeof ActiveXObject);f.add("dom-parser",function(a){return"DOMParser"in a});var c;if(f("activex")){var n=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],e;c=function(a){function b(a){try{var b=
new ActiveXObject(a);b.async=!1;b.loadXML(d);c=b;e=a}catch(p){return!1}return!0}var c=a.data,d=a.text;c&&f("dom-qsa2.1")&&!c.querySelectorAll&&f("dom-parser")&&(c=(new DOMParser).parseFromString(d,"application/xml"));c&&c.documentElement||e&&b(e)||m.some(n,b);return c}}var l=function(a){return f("native-xhr2-blob")||"blob"!==a.options.handleAs||"undefined"===typeof Blob?a.xhr.response:new Blob([a.xhr.response],{type:a.xhr.getResponseHeader("Content-Type")})},b={javascript:function(a){return h.eval(a.text||
"")},json:function(b){return a.parse(b.text||null)},xml:c,blob:l,arraybuffer:l,document:l};d.register=function(a,c){b[a]=c};return d})},"dijit/nls/loading":function(){define({root:{loadingState:"Loading...",errorState:"Sorry, an error occurred"},bs:!0,mk:!0,sr:!0,zh:!0,"zh-tw":!0,vi:!0,uk:!0,tr:!0,th:!0,sv:!0,sl:!0,sk:!0,ru:!0,ro:!0,pt:!0,"pt-pt":!0,pl:!0,nl:!0,nb:!0,lv:!0,lt:!0,ko:!0,kk:!0,ja:!0,it:!0,id:!0,hu:!0,hr:!0,hi:!0,he:!0,fr:!0,fi:!0,eu:!0,et:!0,es:!0,el:!0,de:!0,da:!0,cs:!0,ca:!0,bg:!0,
az:!0,ar:!0})},"dijit/nls/common":function(){define({root:{buttonOk:"OK",buttonCancel:"Cancel",buttonSave:"Save",itemClose:"Close"},bs:!0,mk:!0,sr:!0,zh:!0,"zh-tw":!0,vi:!0,uk:!0,tr:!0,th:!0,sv:!0,sl:!0,sk:!0,ru:!0,ro:!0,pt:!0,"pt-pt":!0,pl:!0,nl:!0,nb:!0,lv:!0,lt:!0,ko:!0,kk:!0,ja:!0,it:!0,id:!0,hu:!0,hr:!0,hi:!0,he:!0,fr:!0,fi:!0,eu:!0,et:!0,es:!0,el:!0,de:!0,da:!0,cs:!0,ca:!0,bg:!0,az:!0,ar:!0})},"esri/core/domUtils":function(){define(["dojo/on","dojo/dom-style","dojo/has"],function(a,h,m){var f=
{show:function(a){(a=f.getNode(a))&&(a.style.display="block")},getNode:function(a){return a&&a.domNode||a},hide:function(a){(a=f.getNode(a))&&(a.style.display="none")},toggle:function(a){(a=f.getNode(a))&&(a.style.display="none"===a.style.display?"block":"none")},documentBox:8>=m("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(d){if(d=this.getNode(d)){var c=0,f=0,e=0,l=0,b=0,g=0;return[a(d,"touchstart",
function(a){c=a.touches[0].screenX;f=a.touches[0].screenY;e=d.scrollWidth;l=d.scrollHeight;b=d.clientWidth;g=d.clientHeight}),a(d,"touchmove",function(a){a.preventDefault();var n=d.firstChild;n instanceof Text&&(n=d.childNodes[1]);var q=n._currentX||0,m=n._currentY||0,q=q+(a.touches[0].screenX-c);0<q?q=0:0>q&&Math.abs(q)+b>e&&(q=-1*(e-b));n._currentX=q;m+=a.touches[0].screenY-f;0<m?m=0:0>m&&Math.abs(m)+g>l&&(m=-1*(l-g));n._currentY=m;h.set(n,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+
q+"px, "+m+"px)"});c=a.touches[0].screenX;f=a.touches[0].screenY})]}}};return f})},"esri/identity/Credential":function(){define(["./IdentityManagerBase"],function(a){return a.Credential})},"esri/identity/IdentityManagerBase":function(){define("../core/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/Deferred dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/regexp ../kernel ../config ../core/lang ./ServerInfo ../core/urlUtils ../core/deferredUtils ../core/Accessor ../request ../core/Evented ./OAuthCredential ./OAuthInfo".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k,x,B){var y,z={},A=function(a){var b=(new c(a.owningSystemUrl)).host;a=(new c(a.server)).host;var k=/.+\.arcgis\.com$/i;return k.test(b)&&k.test(a)},D=function(a,b){return!!(A(a)&&b&&f.some(b,function(b){return b.test(a.server)}))};a=a(k,{declaredClass:"esri.identity.IdentityManagerBase",constructor:function(){this._portalConfig=m.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=
[];this._getOAuthHash()},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_adminSvcs:/\/admin\/services(\/|$)/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},
{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/gi,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer|SceneServer)).*/gi,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(a){var b=this.serverInfos;b?(a=f.filter(a,function(a){return!this.findServerInfo(a.server)},this),this.serverInfos=b.concat(a)):
this.serverInfos=a;f.forEach(a,function(a){if(a.owningSystemUrl&&this._portals.push(a.owningSystemUrl),a.hasPortal){this._portals.push(a.server);var b=q.request.corsEnabledServers,c=this._getOrigin(a.tokenServiceUrl);v.canUseXhr(a.server)||b.push(a.server.replace(/^https?:\/\//i,""));v.canUseXhr(c)||b.push(c.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(a){var b=this.oAuthInfos;b?(a=f.filter(a,function(a){return!this.findOAuthInfo(a.portalUrl)},this),this.oAuthInfos=b.concat(a)):
this.oAuthInfos=a},registerToken:function(a){a=m.mixin({},a);var b,c=this._sanitizeUrl(a.server),k=this.findServerInfo(c),d=this._isServerRsrc(c),g=!0;k||(k=new w,k.server=this._getServerInstanceRoot(c),d?k.hasServer=!0:(k.tokenServiceUrl=this._getTokenSvcUrl(c),k.hasPortal=!0),this.registerServers([k]));(b=this._findCredential(c))?(delete a.server,m.mixin(b,a),g=!1):(b=new y({userId:a.userId,server:k.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:d?"server":"portal"}),b.resources=[c],this.credentials.push(b));
b.emitTokenChange(!1);g||b.refreshServerTokens()},toJSON:function(){return t.fixJson({serverInfos:f.map(this.serverInfos,function(a){return a.toJSON()}),oAuthInfos:f.map(this.oAuthInfos,function(a){return a.toJSON()}),credentials:f.map(this.credentials,function(a){return a.toJSON()})})},initialize:function(a){if(a){m.isString(a)&&(a=JSON.parse(a));var b=a.serverInfos,c=a.oAuthInfos;a=a.credentials;if(b){var k=[];f.forEach(b,function(a){a.server&&a.tokenServiceUrl&&k.push(a.declaredClass?a:new w(a))});
k.length&&this.registerServers(k)}if(c){var d=[];f.forEach(c,function(a){a.appId&&d.push(a.declaredClass?a:new B(a))});d.length&&this.registerOAuthInfos(d)}a&&f.forEach(a,function(a){a.server&&a.token&&a.expires&&a.expires>(new Date).getTime()&&(a=a.declaredClass?a:new y(a),a.emitTokenChange(),this.credentials.push(a))},this)}},findServerInfo:function(a){var b;return a=this._sanitizeUrl(a),f.some(this.serverInfos,function(c){return this._hasSameServerInstance(c.server,a)&&(b=c),!!b},this),b},findOAuthInfo:function(a){var b;
return a=this._sanitizeUrl(a),f.some(this.oAuthInfos,function(c){return this._hasSameServerInstance(c.portalUrl,a)&&(b=c),!!b},this),b},findCredential:function(a,b){var c,k;return a=this._sanitizeUrl(a),k=this._isServerRsrc(a)?"server":"portal",b?f.some(this.credentials,function(d){return this._hasSameServerInstance(d.server,a)&&b===d.userId&&d.scope===k&&(c=d),!!c},this):f.some(this.credentials,function(b){return this._hasSameServerInstance(b.server,a)&&-1!==this._getIdenticalSvcIdx(a,b)&&b.scope===
k&&(c=b),!!c},this),c},getCredential:function(a,b){var c,k,d=!0;t.isDefined(b)&&(m.isObject(b)?(c=!!b.token,k=b.error,d=!1!==b.prompt):c=b);a=this._sanitizeUrl(a);var g,l=r.makeDeferredCancellingPending(),f=this._isAdminResource(a),p=c&&this._doPortalSignIn(a)?this._getEsriAuthCookie():null;if((c=c?this.findCredential(a):null)&&k&&498===k.code)c.destroy(),p&&p.token===b.token&&e("esri_auth",null,{expires:-1,path:"/",domain:document.domain});else if(p||c)return g=Error("You are currently signed in as: '"+
(p&&p.email||c&&c.userId)+"'. You do not have access to this resource: "+a),g.code="IdentityManagerBase.1",g.httpCode=k&&k.httpCode,g.messageCode=k?k.messageCode:null,g.subcode=k?k.subcode:null,g.details=k?k.details:null,g.log=!!h.isDebug,l.reject(g),l.promise;if(k=this._findCredential(a,b))return l.resolve(k),l.promise;if(k=this.findServerInfo(a))!k.hasServer&&this._isServerRsrc(a)&&(k._restInfoDfd=this._getTokenSvcUrl(a,!0),k.hasServer=!0);else{p=this._getTokenSvcUrl(a);if(!p)return g=Error("Unknown resource - could not find token service endpoint."),
g.code="IdentityManagerBase.2",g.log=!!h.isDebug,l.reject(g),l.promise;k=new w;k.server=this._getServerInstanceRoot(a);m.isString(p)?(k.tokenServiceUrl=p,k.hasPortal=!0):(k._restInfoDfd=p,k.hasServer=!0);this.registerServers([k])}return d&&k.hasPortal&&void 0===k._selfReq&&!this._findOAuthInfo(a)&&(k._selfReq={owningTenant:b&&b.owningTenant,selfDfd:this._getPortalSelf(k.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),a)}),this._enqueue(a,k,b,l,f)},getResourceName:function(a){return this._isRESTService(a)?
a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""},generateToken:function(a,b,k){var d,e,l,f,p,n,x,q,r=this._rePortalTokenSvc.test(a.tokenServiceUrl),w=new c(window.location.href.toLowerCase()),t=this._getEsriAuthCookie(),B=!b,y=a.shortLivedTokenValidity;b&&(q=g.id.tokenValidity||y||g.id.defaultTokenValidity,q>y&&(q=y));
k&&(d=k.isAdmin,e=k.serverUrl,l=k.token,n=k.ssl,a.customParameters=k.customParameters);d?f=a.adminTokenServiceUrl:(f=a.tokenServiceUrl,p=new c(f.toLowerCase()),t&&(x=t.auth_tier,x=x&&x.toLowerCase()),("web"===x||a.webTierAuth)&&k&&k.serverUrl&&!n&&"http"===w.scheme&&(v.hasSameOrigin(w.uri,f,!0)||"https"===p.scheme&&w.host===p.host&&"7080"===w.port&&"7443"===p.port)&&(f=f.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),B&&r&&(f=f.replace(/\/rest/i,"")));k=m.mixin({query:m.mixin({request:"getToken",
username:b&&b.username,password:b&&b.password,serverUrl:e,token:l,expiration:q,referer:d||r?window.location.host:null,client:d?"referer":null,f:"json"},a.customParameters),method:B?"auto":"post",disableIdentityLookup:!0,useProxy:this._useProxy(a,k),responseType:"json",callbackParamName:B?"callback":void 0},k&&k.ioArgs);r||(k.withCredentials=!1);return u(f,k).then(function(c){c=c.data;if(!c||!c.token)return c=Error("Unable to generate token"),c.code="IdentityManagerBase.3",c.log=!!h.isDebug,c;var k=
a.server;return z[k]||(z[k]={}),b&&(z[k][b.username]=b.password),c.validity=q,c})},isBusy:function(){return!!this._busy},checkSignInStatus:function(a){return this.getCredential(a,{prompt:!1}).then(function(a){return a.token?u(a.server+("portal"===a.scope?"/sharing/rest":"/rest/services"),{query:{f:"json",token:a.token},callbackParamName:"callback",disableIdentityLookup:!0}).then(function(){return a}).otherwise(function(b){if(498===b.code)throw a.destroy(),b=Error("User is not signed in."),b.code=
"IdentityManagerBase.6",b.log=!!h.isDebug,b;return a}):a})},setRedirectionHandler:function(a){this._redirectFunc=a},setProtocolErrorHandler:function(a){this._protocolFunc=a},signIn:function(){},oAuthSignIn:function(){},destroyCredentials:function(){if(this.credentials){var a=this.credentials.slice();f.forEach(a,function(a){a.destroy()})}this.emit("credentials-destroy")},_getOAuthHash:function(){var a=window.location.hash;if(a){"#"===a.charAt(0)&&(a=a.substring(1));var a=l.queryToObject(a),b=!1;a.access_token&&
a.expires_in&&a.state&&a.hasOwnProperty("username")?(a.state=JSON.parse(a.state),this._oAuthHash=a,b=!0):a.error&&a.error_description&&"access_denied"===a.error&&(b=!0);b&&(!n("ie")||8<n("ie"))&&(window.location.hash="")}},_findCredential:function(a,b){var c,k,d,g,e=-1,l=b&&b.token;b=b&&b.resource;var p=this._isServerRsrc(a)?"server":"portal",n=f.filter(this.credentials,function(b){return this._hasSameServerInstance(b.server,a)&&b.scope===p},this);if(a=b||a,n.length)if(1===n.length){if(c=n[0],g=this.findServerInfo(c.server),
k=g&&g.owningSystemUrl,d=k&&this.findCredential(k,c.userId),e=this._getIdenticalSvcIdx(a,c),!l)return-1===e&&c.resources.push(a),this._addResource(a,d),c;-1!==e&&(c.resources.splice(e,1),this._removeResource(a,d))}else{var x,h;if(f.some(n,function(b){return h=this._getIdenticalSvcIdx(a,b),-1!==h?(x=b,g=this.findServerInfo(x.server),k=g&&g.owningSystemUrl,d=k&&this.findCredential(k,x.userId),e=h,!0):!1},this),l)x&&(x.resources.splice(e,1),this._removeResource(a,d));else if(x)return this._addResource(a,
d),x}},_findOAuthInfo:function(a){var b=this.findOAuthInfo(a);return b||f.some(this.oAuthInfos,function(c){return this._isIdProvider(c.portalUrl,a)&&(b=c),!!b},this),b},_addResource:function(a,b){b&&-1===this._getIdenticalSvcIdx(a,b)&&b.resources.push(a)},_removeResource:function(a,b){var c=-1;b&&(c=this._getIdenticalSvcIdx(a,b),-1<c&&b.resources.splice(c,1))},_useProxy:function(a,b){return b&&b.isAdmin&&!v.hasSameOrigin(a.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&
10.1==a.currentVersion&&!v.hasSameOrigin(a.tokenServiceUrl,window.location.href)},_getOrigin:function(a){a=new c(a);return a.scheme+"://"+a.host+(t.isDefined(a.port)?":"+a.port:"")},_getServerInstanceRoot:function(a){var b=a.toLowerCase(),c=b.indexOf(this._agsRest);return-1===c&&this._isAdminResource(a)&&(c=b.indexOf("/admin")),-1===c&&(c=b.indexOf("/sharing")),-1===c&&"/"===b.substr(-1)&&(c=b.length-1),-1<c?a.substring(0,c):a},_hasSameServerInstance:function(a,b){return"/"===a.substr(-1)&&(a=a.slice(0,
-1)),a=a.toLowerCase(),b=this._getServerInstanceRoot(b).toLowerCase(),a=a.substr(a.indexOf(":")),b=b.substr(b.indexOf(":")),a===b},_sanitizeUrl:function(a){a=v.normalize(m.trim(a));var b=(q.request.proxyUrl||"").toLowerCase(),c=b?a.toLowerCase().indexOf(b+"?"):-1;return-1!==c&&(a=a.substring(c+b.length+1)),v.urlToObject(a).path},_isRESTService:function(a){return-1<a.indexOf(this._agsRest)},_isAdminResource:function(a){return this._agsAdmin.test(a)||this._adminSvcs.test(a)},_isServerRsrc:function(a){return this._isRESTService(a)||
this._isAdminResource(a)},_isIdenticalService:function(a,b){var c;this._isRESTService(a)&&this._isRESTService(b)?(a=this._getSuffix(a).toLowerCase(),b=this._getSuffix(b).toLowerCase(),(c=a===b,c)||(c=/(.*)\/(MapServer|FeatureServer).*/gi,c=a.replace(c,"$1")===b.replace(c,"$1"))):this._isAdminResource(a)&&this._isAdminResource(b)?c=!0:this._isServerRsrc(a)||this._isServerRsrc(b)||!this._isPortalDomain(a)||(c=!0);return c},_isPortalDomain:function(a){a=a.toLowerCase();var b=(new c(a)).authority,k=this._portalConfig,
d=-1!==b.indexOf(this._agolSuffix);(!d&&k&&(d=this._hasSameServerInstance(this._getServerInstanceRoot(k.restBaseUrl),a)),d)||(this._arcgisUrl||(k=m.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new c(k)).authority),this._arcgisUrl&&(d=this._arcgisUrl.toLowerCase()===b));return d||(d=f.some(this._portals,function(b){return this._hasSameServerInstance(b,a)},this)),d=d||this._agsPortal.test(a)},_isIdProvider:function(a,b){var c=-1,k=-1;f.forEach(this._gwDomains,function(d,g){-1===c&&d.regex.test(a)&&
(c=g);-1===k&&d.regex.test(b)&&(k=g)});var d=!1;if(-1<c&&-1<k&&(0===c||4===c?(0===k||4===k)&&(d=!0):1===c?(1===k||2===k)&&(d=!0):2===c?2===k&&(d=!0):3===c&&3===k&&(d=!0)),!d){var g=this.findServerInfo(b),e=g&&g.owningSystemUrl;e&&A(g)&&this._isPortalDomain(e)&&this._isIdProvider(a,e)&&(d=!0)}return d},_isPublic:function(a){return a=this._sanitizeUrl(a),f.some(this._publicUrls,function(b){return b.test(a)})},_getIdenticalSvcIdx:function(a,b){var c=-1;return f.some(b.resources,function(b,k){return this._isIdenticalService(a,
b)?(c=k,!0):!1},this),c},_getSuffix:function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(a){var b,k,d,g=this._isRESTService(a);if(g||this._isAdminResource(a))return d=a.toLowerCase().indexOf(g?this._agsRest:"/admin/"),b=a.substring(0,d)+"/admin/generateToken",a=a.substring(0,d)+"/rest/info",k=u(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){return a.data}),k.adminUrl_=b,k;if(this._isPortalDomain(a)){var e=
"";if(f.some(this._gwDomains,function(b){return b.regex.test(a)&&(e=b.tokenServiceUrl),!!e}),e||f.some(this._portals,function(b){return this._hasSameServerInstance(b,a)&&(e=b+this._gwTokenUrl),!!e},this),e||(d=a.toLowerCase().indexOf("/sharing"),-1!==d&&(e=a.substring(0,d)+this._gwTokenUrl)),e||(e=this._getOrigin(a)+this._gwTokenUrl),e)b=(new c(a)).port,/^http:\/\//i.test(a)&&"7080"===b&&(e=e.replace(/:7080/i,":7443")),e=e.replace(/http:/i,"https:");return e}return-1!==a.toLowerCase().indexOf("premium.arcgisonline.com")?
"https://premium.arcgisonline.com/server/tokens":void 0},_getPortalSelf:function(a,b){return"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(b)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),u(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback",crossOrigin:!1,disableIdentityLookup:!0}).then(function(a){return a.data})},_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var a;
if(e.isSupported()){var b,c=this._getAllCookies("esri_auth");for(b=0;b<c.length;b++){var k=JSON.parse(c[b]);if(k.portalApp){a=k;break}}}return a},_getAllCookies:function(a){var c=[],k=document.cookie.match(new RegExp("(?:^|; )"+b.escapeString(a)+"\x3d([^;]*)","g"));if(k)for(a=0;a<k.length;a++){var d=k[a],g=d.indexOf("\x3d");-1<g&&(d=d.substring(g+1),c.push(decodeURIComponent(d)))}return c},_doPortalSignIn:function(a){if(e.isSupported()){var b=this._getEsriAuthCookie(),c=this._portalConfig,k=window.location.href,
d=this.findServerInfo(a);if(this.useSignInPage&&(c||this._isPortalDomain(k)||b)&&(d?d.hasPortal||d.owningSystemUrl&&this._isPortalDomain(d.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(k,a)||c&&(this._hasSameServerInstance(this._getServerInstanceRoot(c.restBaseUrl),a)||this._isIdProvider(c.restBaseUrl,a))||v.hasSameOrigin(k,a,!0)))return!0}return!1},_checkProtocol:function(a,b,c,k){var d=!0;k=k?b.adminTokenServiceUrl:b.tokenServiceUrl;0!==m.trim(k).toLowerCase().indexOf("https:")||
0===window.location.href.toLowerCase().indexOf("https:")||q.request.useCors&&(v.canUseXhr(k)||v.canUseXhr(v.getProxyUrl(!0).path))||(d=this._protocolFunc?!!this._protocolFunc({resourceUrl:a,serverInfo:b}):!1)||(a=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),a.code="IdentityManagerBase.4",a.log=!!h.isDebug,c(a));return d},_enqueue:function(a,b,c,k,d,g){return k||(k=r.makeDeferredCancellingPending()),k.resUrl_=a,k.sinfo_=b,k.options_=c,k.admin_=d,k.refresh_=
g,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(k)):this._xoReqs.push(k):this._doSignIn(k),k.promise},_doSignIn:function(a){this._busy=a;var b=this,c=function(c){var k=a.options_&&a.options_.resource,d=a.resUrl_,g=a.refresh_,e=!1;-1===f.indexOf(b.credentials,c)&&(g&&-1!==f.indexOf(b.credentials,g)?(g.userId=c.userId,g.token=c.token,g.expires=c.expires,g.validity=
c.validity,g.ssl=c.ssl,g.creationTime=c.creationTime,e=!0,c=g):b.credentials.push(c));c.resources||(c.resources=[]);c.resources.push(k||d);c.scope=b._isServerRsrc(d)?"server":"portal";c.emitTokenChange();var k=b._soReqs,l={};b._soReqs=[];f.forEach(k,function(a){if(!this._isIdenticalService(d,a.resUrl_)){var b=this._getSuffix(a.resUrl_);l[b]||(l[b]=!0,c.resources.push(a.resUrl_))}},b);a.resolve(c);f.forEach(k,function(a){this._hasSameServerInstance(this._getServerInstanceRoot(d),a.resUrl_)?a.resolve(c):
this._soReqs.push(a)},b);b._busy=a.resUrl_=a.sinfo_=a.refresh_=null;e||b.emit("credential-create",{credential:c});b._soReqs.length?b._doSignIn(b._soReqs.shift()):b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},k=function(c){a.reject(c);b._busy=a.resUrl_=a.sinfo_=a.refresh_=null;b._soReqs.length?b._doSignIn(b._soReqs.shift()):b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},d=function(d,g,e,l){var f,p;f=a.sinfo_;var n=!a.options_||!1!==a.options_.prompt,q=f.hasPortal&&b._findOAuthInfo(a.resUrl_);
if(b._doPortalSignIn(a.resUrl_)){d=b._getEsriAuthCookie();q=b._portalConfig;if(d)return void c(new y({userId:d.email,server:f.server,token:d.token,expires:null}));if(n)return n="",d=window.location.href,n=b.signInPage?b.signInPage:q?q.baseUrl+q.signin:b._isIdProvider(d,a.resUrl_)?b._getOrigin(d)+"/home/signin.html":f.tokenServiceUrl.replace(b._rePortalTokenSvc,"")+"/home/signin.html",n=n.replace(/http:/i,"https:"),q&&!1===q.useSSL&&(n=n.replace(/https:/i,"http:")),void(0===d.toLowerCase().replace("https",
"http").indexOf(n.toLowerCase().replace("https","http"))?(p=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+a.resUrl_),p.code="IdentityManagerBase.5",p.log=!!h.isDebug,k(p)):b._redirectFunc?b._redirectFunc({signInPage:n,returnUrlParamName:"returnUrl",returnUrl:d,resourceUrl:a.resUrl_,serverInfo:f}):window.location=n+"?returnUrl\x3d"+window.escape(d));p=Error("User is not signed in.");p.code="IdentityManagerBase.6";p.log=!!h.isDebug;
k(p)}else d?c(new y({userId:d,server:f.server,token:e,expires:t.isDefined(l)?Number(l):null,ssl:!!g})):q?(d=q._oAuthCred,d||(g=new x(q,window.localStorage),e=new x(q,window.sessionStorage),g.isValid()&&e.isValid()?g.expires>e.expires?(d=g,e.destroy()):(d=e,g.destroy()):d=g.isValid()?g:e,q._oAuthCred=d),d.isValid()?c(new y({userId:d.userId,server:f.server,token:d.token,expires:d.expires,ssl:d.ssl,_oAuthCred:d})):b._oAuthHash&&b._oAuthHash.state.portalUrl===q.portalUrl?(p=b._oAuthHash,f=new y({userId:p.username,
server:f.server,token:p.access_token,expires:(new Date).getTime()+1E3*Number(p.expires_in),ssl:"true"===p.ssl,oAuthState:p.state,_oAuthCred:d}),d.storage=p.persist?window.localStorage:window.sessionStorage,d.token=f.token,d.expires=f.expires,d.userId=f.userId,d.ssl=f.ssl,d.save(),b._oAuthHash=null,c(f)):n?a._pendingDfd=b.oAuthSignIn(a.resUrl_,f,q,a.options_).then(c,k):(p=Error("User is not signed in."),p.code="IdentityManagerBase.6",p.log=!!h.isDebug,k(p))):n?b._checkProtocol(a.resUrl_,f,k,a.admin_)&&
(p=a.options_,a.admin_&&(p=p||{},p.isAdmin=!0),a._pendingDfd=b.signIn(a.resUrl_,f,p).then(c,k)):(p=Error("User is not signed in."),p.code="IdentityManagerBase.6",p.log=!!h.isDebug,k(p))},g=function(){var d,g,e,l,p=a.sinfo_,n=p.owningSystemUrl,x=a.options_;(x&&(d=x.token,g=x.error,e=x.prompt),l=b._findCredential(n,{token:d,resource:a.resUrl_}),!l&&A(p)&&f.some(b.credentials,function(a){return this._isIdProvider(n,a.server)&&(l=a),!!l},b),l)?(d=b.findCredential(a.resUrl_,l.userId))?c(d):D(p,b._legacyFed)?
(d=l.toJSON(),d.server=p.server,d.resources=null,c(new y(d))):(a._pendingDfd=b.generateToken(b.findServerInfo(l.server),null,{serverUrl:a.resUrl_,token:l.token,ssl:l.ssl})).then(function(b){c(new y({userId:l.userId,server:p.server,token:b.token,expires:t.isDefined(b.expires)?Number(b.expires):null,ssl:!!b.ssl,isAdmin:a.admin_,validity:b.validity}))},k):(b._busy=null,d&&(a.options_.token=null),(a._pendingDfd=b.getCredential(n.replace(/\/?$/,"/sharing"),{resource:a.resUrl_,owningTenant:p.owningTenant,
token:d,error:g,prompt:e})).then(function(c){b._enqueue(a.resUrl_,a.sinfo_,a.options_,a,a.admin_)},function(a){k(a)}))},e=a.sinfo_.owningSystemUrl,l=this._isServerRsrc(a.resUrl_),p=a.sinfo_._restInfoDfd;p?p.then(function(c){var k=a.sinfo_;k.adminTokenServiceUrl=k._restInfoDfd.adminUrl_;k._restInfoDfd=null;k.tokenServiceUrl=m.getObject("authInfo.tokenServicesUrl",!1,c)||m.getObject("authInfo.tokenServiceUrl",!1,c)||m.getObject("tokenServiceUrl",!1,c);k.shortLivedTokenValidity=m.getObject("authInfo.shortLivedTokenValidity",
!1,c);k.currentVersion=c.currentVersion;k.owningTenant=c.owningTenant;(c=k.owningSystemUrl=c.owningSystemUrl)&&b._portals.push(c);l&&c?g():d()},function(){a.sinfo_._restInfoDfd=null;var b=Error("Unknown resource - could not find token service endpoint.");b.code="IdentityManagerBase.2";b.log=!!h.isDebug;k(b)}):l&&e?g():a.sinfo_._selfReq?a.sinfo_._selfReq.selfDfd.then(function(c){var k,d,g,e,l={};return c&&(k=c.user&&c.user.username,l.username=k,l.allSSL=c.allSSL,d=c.supportsOAuth,g=c.currentVersion,
"multitenant"===c.portalMode&&(e=c.customBaseUrl)),a.sinfo_.webTierAuth=!!k,k&&b.normalizeWebTierAuth?b.generateToken(a.sinfo_,null,{ssl:l.allSSL}).always(function(a){return l.portalToken=a&&a.token,l.tokenExpiration=a&&a.expires,l}):!k&&d&&4.4<=parseFloat(g)&&!b._doPortalSignIn(a.resUrl_)?b._generateOAuthInfo({portalUrl:a.sinfo_.server,customBaseUrl:e,owningTenant:a.sinfo_._selfReq.owningTenant}).always(function(){return l}):l}).always(function(b){a.sinfo_._selfReq=null;b?d(b.username,b.allSSL,b.portalToken,
b.tokenExpiration):d()}):d()},_generateOAuthInfo:function(a){var b,c,k=this,g=a.portalUrl,e=a.customBaseUrl,l=a.owningTenant;if(a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){c=window.location.href;var f=c.indexOf("?");-1<f&&(c=c.slice(0,f));f=c.search(/\/(apps|home)\//);c=-1<f?c.slice(0,f):null}return a&&c?(this._hasTestedIfAppIsOnPortal=!0,b=u(c+"/sharing/rest",{query:{f:"json"},responseType:"json"}).then(function(){k.defaultOAuthInfo=new B({appId:"arcgisonline",
popup:!0,popupCallbackUrl:c+"/home/oauth-callback.html"})})):(b=new d,b.resolve(),b=b.promise),b.then(function(){return k.defaultOAuthInfo?(g=g.replace(/^http:/i,"https:"),u(g+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:l,client_id:k.defaultOAuthInfo.appId,redirect_uri:v.makeAbsolute(k.defaultOAuthInfo.popupCallbackUrl),f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){if(a.data.valid){var b=k.defaultOAuthInfo.clone();a.data.urlKey&&e?b.portalUrl="https://"+
a.data.urlKey+"."+e:b.portalUrl=g;k.oAuthInfos.push(b)}})):void 0})}});return y=p.createSubclass([k],{declaredClass:"esri.identity.Credential",constructor:function(a){a&&a._oAuthCred&&(this._oAuthCred=a._oAuthCred)},initialize:function(){this.resources=this.resources||[];t.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,properties:{creationTime:{},expires:{},isAdmin:{},oAuthState:{},resources:{},scope:{},server:{},ssl:{},token:{},tokenRefreshBuffer:2,userId:{},
validity:{}},refreshToken:function(){var a,b,c=this,k=this.resources&&this.resources[0],d=g.id.findServerInfo(this.server),e=d&&d.owningSystemUrl,l=!!e&&"server"===this.scope,p=l&&D(d,g.id._legacyFed),n=l&&g.id.findServerInfo(e),x=d.webTierAuth,h=x&&g.id.normalizeWebTierAuth,q=z[this.server],q=q&&q[this.userId],m={username:this.userId,password:q};if((!x||h)&&(l&&!n&&f.some(g.id.serverInfos,function(a){return g.id._isIdProvider(e,a.server)&&(n=a),!!n}),a=n&&g.id.findCredential(n.server,this.userId),
!l||a)){if(p)return void a.refreshToken();if(l)b={serverUrl:k,token:a&&a.token,ssl:a&&a.ssl};else if(h)m=null,b={ssl:this.ssl};else{if(!q){var u;return k&&(k=g.id._sanitizeUrl(k),this._enqueued=1,u=g.id._enqueue(k,d,null,null,this.isAdmin,this),u.then(function(){c._enqueued=0;c.refreshServerTokens()}).then(null,function(){c._enqueued=0})),u}this.isAdmin&&(b={isAdmin:!0})}return g.id.generateToken(l?n:d,l?null:m,b).then(function(a){c.token=a.token;c.expires=t.isDefined(a.expires)?Number(a.expires):
null;c.creationTime=(new Date).getTime();c.validity=a.validity;c.emitTokenChange();c.refreshServerTokens()}).then(null,function(){})}},refreshServerTokens:function(){"portal"===this.scope&&f.forEach(g.id.credentials,function(a){var b=g.id.findServerInfo(a.server),c=b&&b.owningSystemUrl;a!==this&&a.userId===this.userId&&c&&"server"===a.scope&&(g.id._hasSameServerInstance(this.server,c)||g.id._isIdProvider(c,this.server))&&(D(b,g.id._legacyFed)?(a.token=this.token,a.expires=this.expires,a.creationTime=
this.creationTime,a.validity=this.validity,a.emitTokenChange()):a.refreshToken())},this)},emitTokenChange:function(a){clearTimeout(this._refreshTimer);var b=this.server&&g.id.findServerInfo(this.server),c=(b=b&&b.owningSystemUrl)&&g.id.findServerInfo(b);!1!==a&&(!b||"portal"===this.scope||c&&c.webTierAuth&&!g.id.normalizeWebTierAuth)&&(t.isDefined(this.expires)||t.isDefined(this.validity))&&this._startRefreshTimer();this.emit("token-change")},destroy:function(){this.userId=this.server=this.token=
this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var a=f.indexOf(g.id.credentials,this);-1<a&&g.id.credentials.splice(a,1);this.emitTokenChange();this.emit("destroy")},toJSON:function(){var a=t.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),b=this.resources;return b&&0<b.length&&
(a.resources=b.slice()),a},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var a=6E4*this.tokenRefreshBuffer,b=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>b&&(b=0);this._refreshTimer=setTimeout(m.hitch(this,this.refreshToken),b>a?b-a:b)}}),a.Credential=y,a})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(a,h){a.cookie=function(a,f,d){var c=document.cookie,n;if(1==arguments.length)n=(n=c.match(new RegExp("(?:^|; )"+
h.escapeString(a)+"\x3d([^;]*)")))?decodeURIComponent(n[1]):void 0;else{d=d||{};c=d.expires;if("number"==typeof c){var e=new Date;e.setTime(e.getTime()+864E5*c);c=d.expires=e}c&&c.toUTCString&&(d.expires=c.toUTCString());f=encodeURIComponent(f);var c=a+"\x3d"+f,l;for(l in d)c+="; "+l,e=d[l],!0!==e&&(c+="\x3d"+e);document.cookie=c}return n};a.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),
navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return a.cookie})},"esri/identity/ServerInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/JSONSupport".split(" "),function(a,h,m,f,d,c){a=function(a){function c(c){c=a.call(this)||this;return c.adminTokenServiceUrl=null,c.currentVersion=null,c.hasPortal=null,c.hasServer=null,c.owningSystemUrl=null,
c.owningTenant=null,c.server=null,c.shortLivedTokenValidity=null,c.tokenServiceUrl=null,c.webTierAuth=null,c}return m(c,a),c}(d.declared(c));return f([d.property({json:{write:!0}})],a.prototype,"adminTokenServiceUrl",void 0),f([d.property({json:{write:!0}})],a.prototype,"currentVersion",void 0),f([d.property({json:{write:!0}})],a.prototype,"hasPortal",void 0),f([d.property({json:{write:!0}})],a.prototype,"hasServer",void 0),f([d.property({json:{write:!0}})],a.prototype,"owningSystemUrl",void 0),f([d.property({json:{write:!0}})],
a.prototype,"owningTenant",void 0),f([d.property({json:{write:!0}})],a.prototype,"server",void 0),f([d.property({json:{write:!0}})],a.prototype,"shortLivedTokenValidity",void 0),f([d.property({json:{write:!0}})],a.prototype,"tokenServiceUrl",void 0),f([d.property({json:{write:!0}})],a.prototype,"webTierAuth",void 0),a=f([d.subclass("esri.identity.ServerInfo")],a)})},"esri/identity/OAuthCredential":function(){define(["../core/declare"],function(a){return a(null,{declaredClass:"esri.identity.OAuthCredential",
oAuthInfo:null,storage:null,expires:null,ssl:null,token:null,userId:null,constructor:function(a,m){this.oAuthInfo=a;this.storage=m;this._init()},isValid:function(){var a=!1;if(this.oAuthInfo&&this.token&&this.userId){var m=(new Date).getTime();this.expires>m&&(this.expires-m)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(a=!0)}return a},save:function(){if(this.storage){var a=this._load(),m=this.oAuthInfo;if(m&&m.authNamespace&&m.portalUrl){var f=a[m.authNamespace];f||(f=a[m.authNamespace]={});f[m.portalUrl]=
{expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(a))}catch(d){}}}},destroy:function(){var a=this._load(),m=this.oAuthInfo;if(m&&m.authNamespace&&m.portalUrl&&this.storage){var f=a[m.authNamespace];if(f){delete f[m.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(a))}catch(d){}}}m&&(m._oAuthCred=null,this.oAuthInfo=null)},_init:function(){var a=this._load(),m=this.oAuthInfo;m&&m.authNamespace&&m.portalUrl&&
(a=a[m.authNamespace])&&(a=a[m.portalUrl],a&&(this.expires=a.expires,this.ssl=a.ssl,this.token=a.token,this.userId=a.userId))},_load:function(){var a={};if(this.storage){var m=this.storage.getItem("esriJSAPIOAuth");if(m)try{a=JSON.parse(m)}catch(f){}}return a}})})},"esri/identity/OAuthInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/JSONSupport".split(" "),function(a,h,m,f,d,c){a=n=function(a){function c(b){b=
a.call(this)||this;return b._oAuthCred=null,b.appId=null,b.authNamespace="/",b.expiration=20160,b.forceLogin=!1,b.locale=null,b.minTimeUntilExpiration=30,b.popup=!1,b.popupCallbackUrl="oauth-callback.html",b.popupWindowFeatures="height\x3d480,width\x3d800,location,resizable,scrollbars,status",b.portalUrl="https://www.arcgis.com",b}return m(c,a),c.prototype.clone=function(){return n.fromJSON(this.toJSON())},c}(d.declared(c));f([d.property({json:{write:!0}})],a.prototype,"appId",void 0);f([d.property({json:{write:!0}})],
a.prototype,"authNamespace",void 0);f([d.property({json:{write:!0}})],a.prototype,"expiration",void 0);f([d.property({json:{write:!0}})],a.prototype,"forceLogin",void 0);f([d.property({json:{write:!0}})],a.prototype,"locale",void 0);f([d.property({json:{write:!0}})],a.prototype,"minTimeUntilExpiration",void 0);f([d.property({json:{write:!0}})],a.prototype,"popup",void 0);f([d.property({json:{write:!0}})],a.prototype,"popupCallbackUrl",void 0);f([d.property({json:{write:!0}})],a.prototype,"popupWindowFeatures",
void 0);f([d.property({json:{write:!0}})],a.prototype,"portalUrl",void 0);a=n=f([d.subclass("esri.identity.OAuthInfo")],a);var n;return a})},"esri/identity/nls/identity":function(){define({root:{lblItem:"item",title:"Sign In",info:"Please sign in to access the item on {server} {resource}",oAuthInfo:"Please sign in to continue.",lblUser:"Username:",lblPwd:"Password:",lblOk:"OK",lblSigning:"Signing in...",lblCancel:"Cancel",errorMsg:"Invalid username/password. Please try again.",invalidUser:"The username or password you entered is incorrect.",
forbidden:"The username and password are valid, but you don't have access to this resource.",noAuthService:"Unable to access the authentication service."},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hr:1,hi:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),
function(a,h,m,f,d,c,n,e,l,b){f("dijit-legacy-requires")&&n(0,function(){a(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});n=h("dijit.form.Button"+(f("dojo-bidi")?"_NoBidi":""),[e,l],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:b,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);
this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=c.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&m.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){d.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);this.showLabel||
"title"in this.params||(this.titleNode.title=c.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});f("dojo-bidi")&&(n=h("dijit.form.Button",n,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return n})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(a,h,m,f,d,c,n,e){h("dijit-legacy-requires")&&f(0,function(){require(["dijit/form/_FormValueWidget"])});return a("dijit.form._FormWidget",[d,n,c,e],{setDisabled:function(a){m.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",a)},setValue:function(a){m.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0");this.set("value",a)},getValue:function(){m.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!h("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(a,h,m,f,d,c,n,e,l,b){return h("dijit.form._FormWidgetMixin",
null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(c){this._set("disabled",c);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?m.set(this.focusNode,"disabled",c):this.focusNode.setAttribute("aria-disabled",c?"true":"false");this.valueNode&&m.set(this.valueNode,"disabled",c);c?(this._set("hovering",!1),
this._set("active",!1),c="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",a.forEach(d.isArray(c)?c:[c],function(a){a=this[a];e("webkit")||b.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.own(n(this.focusNode,"focus",function(){g.remove();b.remove()}))[0],c=e("pointer-events")?
"pointerup":e("MSPointer")?"MSPointerUp":e("touch-events")?"touchend, mouseup":"mouseup",g=this.own(n(this.ownerDocumentBody,c,d.hitch(this,function(a){g.remove();b.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){l.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=f.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(g){}},
compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){void 0!=this._lastValueReported||null!==b&&this._onChangeActive||(this._resetValue=this._lastValueReported=a);this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);(this.intermediateChanges||b||void 0===b)&&this._pendingOnChange&&(this._lastValueReported=
a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],
function(a,h,m,f){var d=a("dijit.form._ButtonMixin"+(m("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(a){a.stopPropagation();a.preventDefault();this.disabled||this.valueNode.click(a);return!1},_onClick:function(a){if(this.disabled)return a.stopPropagation(),a.preventDefault(),!1;!1===this.onClick(a)&&a.preventDefault();var c=a.defaultPrevented;if(!c&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var d=this.domNode;d.parentNode;d=d.parentNode){var l=f.byNode(d);
if(l&&"function"==typeof l._onSubmit){l._onSubmit(a);a.preventDefault();c=!0;break}}return!c},postCreate:function(){this.inherited(arguments);h.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(a){this._set("label",a);(this.containerNode||this.focusNode).innerHTML=a;this.onLabelSet()},onLabelSet:function(){}});m("dojo-bidi")&&(d=a("dijit.form._ButtonMixin",d,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));
return d})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(a,h,m,f,d,c,n,e){return a("dijit.form.Form",[d,c,n,e],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(a){h.set(this.domNode,"encType",a);f("ie")&&(this.domNode.encoding=a);this._set("encType",a)},reset:function(a){var b={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:a?a.target:this.domNode,target:a?a.target:this.domNode};!1!==this.onReset(b)&&b.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(a){this.reset(a);a.stopPropagation();a.preventDefault();return!1},_onSubmit:function(a){var b=this.constructor.prototype;if(this.execute!=b.execute||this.onExecute!=b.onExecute)m.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(a)&&(a.stopPropagation(),a.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),function(a,h,m,f,d,c,n){var e=a("dijit.form.ValidationTextBox",d,{templateString:n,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",
regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(a,b){b!=e.prototype[a]&&(h.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+a+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",b))},_setRegExpGenAttr:function(a){this._deprecateRegExp("regExpGen",a);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(a){this._deprecateRegExp("regExp",a)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},
validator:function(a,b){return(new RegExp("^(?:"+this._computeRegexp(b)+")"+(this.required?"":"?")+"$")).test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||void 0!==this.parse(a,b))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){var a="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:
this.invalidMessage?this.invalidMessage:this.promptMessage,b="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:a;return this.required&&this._isEmpty(this.textbox.value)?b:a},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var b="",c=this.disabled||this.isValid(a);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),e=!c&&a&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||
a)&&d||e)&&(this._maskValidSubsetError||e&&!this._hasBeenBlurred&&a)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=a&&e,b=this.getErrorMessage(a)):"Incomplete"==this.state?(b=this.getPromptMessage(a),this._maskValidSubsetError=!this._hasBeenBlurred||a):d&&(b=this.getPromptMessage(a));this.set("message",b);return c},displayMessage:function(a){a&&this.focused?c.show(a,this.domNode,this.tooltipPosition,
!this.isLeftToRight()):c.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(a){this.constraints=m.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(a){!a.locale&&this.lang&&(a.locale=this.lang);this._set("constraints",a);this._refreshState()},_setPatternAttr:function(a){this._set("pattern",a);this._refreshState()},
_computeRegexp:function(a){var b=this.pattern;"function"==typeof b&&(b=b.call(this,a));if(b!=this._lastRegExp){var c="";this._lastRegExp=b;".*"!=b&&b.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=a;break;case ")":c+="|$)";break;default:c+="(?:"+a+"|$)"}});try{"".search(c)}catch(q){c=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+
c+")$"}return b},postMixInProperties:function(){this.inherited(arguments);this.messages=f.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setMessageAttr:function(a){this._set("message",a);this.displayMessage(a)},reset:function(){this._maskValidSubsetError=
!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){c.hide(this.domNode);this.inherited(arguments)}});return e})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),function(a,h,m,f,d,c,n,e,l,b,g){e=a("dijit.form.TextBox"+(n("dojo-bidi")?"_NoBidi":""),
[e,l],{templateString:b,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:n("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=
this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>n("ie")&&this.defer(function(){try{var a=m.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(v){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=h.create("span",{className:"dijitPlaceHolder dijitInputField"},
this.textbox,"after"),this.own(c(this._phspan,"mousedown",function(a){a.preventDefault()}),c(this._phspan,"touchend, pointerup, MSPointerUp",d.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},
_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){f.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){f.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),
this._updatePlaceHolder(),n("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});9>n("ie")&&(e.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},g._setSelectionRange=l._setSelectionRange=function(a,b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),
a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});n("dojo-bidi")&&(e=a("dijit.form.TextBox",e,{_setPlaceHolderAttr:function(a){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return e})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(a,h,m,f){return a("dijit.form._FormValueWidget",[m,f],{_layoutHackIE7:function(){if(7==h("ie"))for(var a=this.domNode,c=a.parentNode,
f=a.firstChild||a,e=f.style.filter,l=this;c&&0==c.clientHeight;)(function(){var a=l.connect(c,"onscroll",function(){l.disconnect(a);f.style.filter=(new Date).getMilliseconds();l.defer(function(){f.style.filter=e})})})(),c=c.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(a,h,m,f,d,c){return a("dijit.form._FormValueMixin",c,{readOnly:!1,_setReadOnlyAttr:function(a){h.set(this.focusNode,
"readOnly",a);this._set("readOnly",a)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(a,c){this._handleOnChange(a,c)},_handleOnChange:function(a,c){this._set("value",a);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),
function(a,h,m,f,d,c,n,e){var l=h("dijit.form._TextBoxMixin"+(f("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,c,d){var b;void 0!==a&&(b=this.filter(a),"string"!=typeof d&&(d=null===b||"number"==typeof b&&isNaN(b)?"":this.filter(this.format(b,this.constraints)),0!=this.compare(b,this.filter(this.parse(d,this.constraints)))&&
(d=null)));null==d||"number"==typeof d&&isNaN(d)||this.textbox.value==d||(this.textbox.value=d,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[b,c])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==
a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);
this.inherited(arguments);this.own(n(this.textbox,"keydown, keypress, paste, cut, compositionend",c.hitch(this,function(a){var b;if("keydown"==a.type&&229!=a.keyCode){b=a.keyCode;switch(b){case d.SHIFT:case d.ALT:case d.CTRL:case d.META:case d.CAPS_LOCK:case d.NUM_LOCK:case d.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&!a.altKey){switch(b){case d.NUMPAD_0:case d.NUMPAD_1:case d.NUMPAD_2:case d.NUMPAD_3:case d.NUMPAD_4:case d.NUMPAD_5:case d.NUMPAD_6:case d.NUMPAD_7:case d.NUMPAD_8:case d.NUMPAD_9:case d.NUMPAD_MULTIPLY:case d.NUMPAD_PLUS:case d.NUMPAD_ENTER:case d.NUMPAD_MINUS:case d.NUMPAD_PERIOD:case d.NUMPAD_DIVIDE:return}if(65<=
b&&90>=b||48<=b&&57>=b||b==d.SPACE)return;b=!1;for(var e in d)if(d[e]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(b=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==d.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}var l={faux:!0},h;for(h in a)/^(layer[XY]|returnValue|keyLocation)$/.test(h)||
(e=a[h],"function"!=typeof e&&"undefined"!=typeof e&&(l[h]=e));c.mixin(l,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){l._wasConsumed=!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});this._lastInputProducingEvent=l;!1===this.onInput(l)&&(l.preventDefault(),l.stopPropagation());if(!l._wasConsumed&&9>=f("ie"))switch(a.keyCode){case d.TAB:case d.ESCAPE:case d.DOWN_ARROW:case d.UP_ARROW:case d.LEFT_ARROW:case d.RIGHT_ARROW:break;default:a.keyCode==d.ENTER&&"textarea"!=
this.textbox.tagName.toLowerCase()||this.defer(function(){this.textbox.value!==this._lastInputEventValue&&n.emit(this.textbox,"input",{bubbles:!0})})}})),n(this.textbox,"input",c.hitch(this,"_onInput")),n(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=c.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,
function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=n.once(this.domNode,"mouseup, touchend",c.hitch(this,function(a){this._isTextSelected()||
l.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});f("dojo-bidi")&&(l=h("dijit.form._TextBoxMixin",l,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);
this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));l._setSelectionRange=e._setSelectionRange=function(a,c,d){a.setSelectionRange&&a.setSelectionRange(c,d)};l.selectInputText=e.selectInputText=function(a,c,d){a=m.byId(a);isNaN(c)&&(c=0);isNaN(d)&&(d=a.value?a.value.length:0);try{a.focus(),l._setSelectionRange(a,c,d)}catch(t){}};return l})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u){function k(){}var x=h("dijit._MasterTooltip",[w,v],{duration:q.defaultDuration,templateString:p,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new r(this.domNode);this.fadeIn=m.fadeIn({node:this.domNode,duration:this.duration,onEnd:e.hitch(this,"_onShow")});this.fadeOut=m.fadeOut({node:this.domNode,duration:this.duration,onEnd:e.hitch(this,"_onHide")})},show:function(a,b,c,d,g,l,f){if(!this.aroundNode||this.aroundNode!==
b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;g&&this.set("textDir",g);this.containerNode.align=d?"right":"left";var p=t.around(this.domNode,b,c&&c.length?c:B.defaultPosition,!d,e.hitch(this,"orient")),x=p.aroundNodePos;"M"==p.corner.charAt(0)&&"M"==p.aroundCorner.charAt(0)?(this.connectorNode.style.top=x.y+(x.h-this.connectorNode.offsetHeight>>1)-p.y+"px",this.connectorNode.style.left=""):"M"==p.corner.charAt(1)&&
"M"==p.aroundCorner.charAt(1)?this.connectorNode.style.left=x.x+(x.w-this.connectorNode.offsetWidth>>1)-p.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");n.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=l||k;this.onMouseLeave=f||k}},orient:function(a,b,k,d,e){this.connectorNode.style.top="";var l=d.h;d=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+k];this.domNode.style.width="auto";var f=c.position(this.domNode);if(g("ie")||g("trident"))f.w+=2;c.setMarginBox(this.domNode,{w:Math.min(Math.max(d,1),f.w)});"B"==k.charAt(0)&&"B"==b.charAt(0)?(a=c.position(a),b=this.connectorNode.offsetHeight,
a.h>l?(this.connectorNode.style.top=l-(e.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(e.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,f.w-d)},_onShow:function(){g("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=
null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=k},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});g("dojo-bidi")&&x.extend({_setAutoTextDir:function(b){this.applyTextDir(b);a.forEach(b.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});u.showTooltip=
function(b,c,k,d,g,e,l){k&&(k=a.map(k,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));B._masterTT||(u._masterTT=B._masterTT=new x);return B._masterTT.show(b,c,k,d,g,e,l)};u.hideTooltip=function(a){return B._masterTT&&B._masterTT.hide(a)};var B=h("dijit.Tooltip",w,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(c){a.forEach(this._connections||[],function(b){a.forEach(b,function(a){a.remove()})},this);this._connectIds=
a.filter(e.isArrayLike(c)?c:c?[c]:[],function(a){return f.byId(a,this.ownerDocument)},this);this._connections=a.map(this._connectIds,function(a){a=f.byId(a,this.ownerDocument);var c=this.selector,k=c?function(a){return b.selector(c,a)}:function(a){return a},d=this;return[b(a,k(l.enter),function(){d._onHover(this)}),b(a,k("focusin"),function(){d._onHover(this)}),b(a,k(l.leave),e.hitch(d,"_onUnHover")),b(a,k("focusout"),e.hitch(d,"set","state","DORMANT"))]},this);this._set("connectId",c)},addTarget:function(b){b=
b.id||b;-1==a.indexOf(this._connectIds,b)&&this.set("connectId",this._connectIds.concat(b))},removeTarget:function(b){b=a.indexOf(this._connectIds,b.id||b);0<=b&&(this._connectIds.splice(b,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);d.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var b=this.connectId;a.forEach(e.isArrayLike(b)?b:[b],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},
state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(B.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},
this.showDelay));break;case "SHOWING":var b=this.getContent(this._connectNode);if(!b){this.set("state","DORMANT");return}B.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,e.hitch(this,"set","state","SHOWING"),e.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&a!=this._connectNode&&
this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");a.forEach(this._connections||[],function(b){a.forEach(b,function(a){a.remove()})},this);this.inherited(arguments)}});B._MasterTooltip=x;B.show=
u.showTooltip;B.hide=u.hideTooltip;B.defaultPosition=["after-centered","before-centered"];return B})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(a,h,m,f,d,c,n){function e(b,g,e,l){var f=c.getEffectiveBox(b.ownerDocument);b.parentNode&&"body"==String(b.parentNode.tagName).toLowerCase()||d.body(b.ownerDocument).appendChild(b);var n=null;a.some(g,function(a){var c=a.corner,d=a.pos,g=0,p=
{w:{L:f.l+f.w-d.x,R:d.x-f.l,M:f.w}[c.charAt(1)],h:{T:f.t+f.h-d.y,B:d.y-f.t,M:f.h}[c.charAt(0)]},m=b.style;m.left=m.right="auto";e&&(g=e(b,a.aroundCorner,c,p,l),g="undefined"==typeof g?0:g);var q=b.style,u=q.display,r=q.visibility;"none"==q.display&&(q.visibility="hidden",q.display="");m=h.position(b);q.display=u;q.visibility=r;u={L:d.x,R:d.x-m.w,M:Math.max(f.l,Math.min(f.l+f.w,d.x+(m.w>>1))-m.w)}[c.charAt(1)];r={T:d.y,B:d.y-m.h,M:Math.max(f.t,Math.min(f.t+f.h,d.y+(m.h>>1))-m.h)}[c.charAt(0)];d=Math.max(f.l,
u);q=Math.max(f.t,r);u=Math.min(f.l+f.w,u+m.w)-d;r=Math.min(f.t+f.h,r+m.h)-q;g+=m.w-u+(m.h-r);if(null==n||g<n.overflow)n={corner:c,aroundCorner:a.aroundCorner,x:d,y:q,w:u,h:r,overflow:g,spaceAvailable:p};return!g});n.overflow&&e&&e(b,n.aroundCorner,n.corner,n.spaceAvailable,l);g=n.y;var q=n.x,p=d.body(b.ownerDocument);/relative|absolute/.test(m.get(p,"position"))&&(g-=m.get(p,"marginTop"),q-=m.get(p,"marginLeft"));p=b.style;p.top=g+"px";p.left=q+"px";p.right="auto";return n}var l={TL:"BR",TR:"BL",
BL:"TR",BR:"TL"};return n.place={at:function(b,c,d,f,n){d=a.map(d,function(a){var b={corner:a,aroundCorner:l[a],pos:{x:c.x,y:c.y}};f&&(b.pos.x+="L"==a.charAt(1)?f.x:-f.x,b.pos.y+="T"==a.charAt(0)?f.y:-f.y);return b});return e(b,d,n)},around:function(b,c,d,l,n){function g(a,b){F.push({aroundCorner:a,corner:b,pos:{x:{L:t,R:t+A,M:t+(A>>1)}[a.charAt(1)],y:{T:z,B:z+D,M:z+(D>>1)}[a.charAt(0)]}})}var q;if("string"==typeof c||"offsetWidth"in c||"ownerSVGElement"in c){if(q=h.position(c,!0),/^(above|below)/.test(d[0])){var p=
h.getBorderExtents(c),u=c.firstChild?h.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0},k=h.getBorderExtents(b),x=b.firstChild?h.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0};q.y+=Math.min(p.t+u.t,k.t+x.t);q.h-=Math.min(p.t+u.t,k.t+x.t)+Math.min(p.b+u.b,k.b+x.b)}}else q=c;if(c.parentNode)for(p="absolute"==m.getComputedStyle(c).position,c=c.parentNode;c&&1==c.nodeType&&"BODY"!=c.nodeName;){u=h.position(c,!0);k=m.getComputedStyle(c);/relative|absolute/.test(k.position)&&(p=!1);if(!p&&/hidden|auto|scroll/.test(k.overflow)){var x=
Math.min(q.y+q.h,u.y+u.h),w=Math.min(q.x+q.w,u.x+u.w);q.x=Math.max(q.x,u.x);q.y=Math.max(q.y,u.y);q.h=x-q.y;q.w=w-q.x}"absolute"==k.position&&(p=!0);c=c.parentNode}var t=q.x,z=q.y,A="w"in q?q.w:q.w=q.width,D="h"in q?q.h:(f.deprecated("place.around: dijit/place.__Rectangle: { x:"+t+", y:"+z+", height:"+q.height+", width:"+A+" } has been deprecated.  Please use { x:"+t+", y:"+z+", h:"+q.height+", w:"+A+" }","","2.0"),q.h=q.height),F=[];a.forEach(d,function(a){var b=l;switch(a){case "above-centered":g("TM",
"BM");break;case "below-centered":g("BM","TM");break;case "after-centered":b=!b;case "before-centered":g(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":g(b?"TL":"TR",b?"TR":"TL");g(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":g(b?"BL":"BR",b?"TL":"TR");g(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":g(b?"TL":"TR",b?"BL":"BR");g(b?"TR":"TL",b?"BR":"BL");break;default:g(a.aroundCorner,a.corner)}});b=e(b,F,n,{w:A,h:D});b.aroundNodePos=q;return b}}})},
"dijit/form/nls/validate":function(){define({root:{invalidMessage:"The value entered is not valid.",missingMessage:"This value is required.",rangeMessage:"This value is out of range."},bs:!0,mk:!0,sr:!0,zh:!0,"zh-tw":!0,vi:!0,uk:!0,tr:!0,th:!0,sv:!0,sl:!0,sk:!0,ru:!0,ro:!0,pt:!0,"pt-pt":!0,pl:!0,nl:!0,nb:!0,lv:!0,lt:!0,ko:!0,kk:!0,ja:!0,it:!0,id:!0,hu:!0,hr:!0,hi:!0,he:!0,fr:!0,fi:!0,eu:!0,et:!0,es:!0,el:!0,de:!0,da:!0,cs:!0,ca:!0,bg:!0,az:!0,ar:!0})},"esri/identity/OAuthSignInHandler":function(){define("./Credential ../core/domUtils ../core/lang ../core/urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/identity dojo/io-query dojo/sniff dijit/form/Button dojo/query".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(a){this._oAuthRedirectFunc=a},oAuthSignIn:function(a,c,d,l){var f=this._oAuthDfd=new e;f.resUrl_=a;f.sinfo_=c;f.oinfo_=d;var k=!l||!1!==l.oAuthPopupConfirmation;if(!d.popup||!k)return this._doOAuthSignIn(a,c,d),f.promise;this._nls||(this._nls=g);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());a=this.oAuthDialog;c=l&&l.error;l=l&&l.token;return h.hide(a.errMsg_),c&&403==c.code&&l&&(b.set(a.errMsg_,"innerHTML",this._nls.forbidden),h.show(a.errMsg_)),
a.show(),f.promise},setOAuthResponseHash:function(b){var c=this._oAuthDfd;if(this._oAuthDfd=null,c&&b)if(clearInterval(this._oAuthIntervalId),"#"===b.charAt(0)&&(b=b.substring(1)),b=q.queryToObject(b),b.error)b=Error("access_denied"===b.error?"ABORTED":"OAuth: "+b.error+" - "+b.error_description),b.code="IdentityManagerBase.2",b.log=!!n.isDebug,c.reject(b);else{var d=c.oinfo_._oAuthCred,g=new a({userId:b.username,server:c.sinfo_.server,token:b.access_token,expires:(new Date).getTime()+1E3*Number(b.expires_in),
ssl:"true"===b.ssl,_oAuthCred:d});d.storage=b.persist?window.localStorage:window.sessionStorage;d.token=g.token;d.expires=g.expires;d.userId=g.userId;d.ssl=g.ssl;d.save();c.resolve(g)}},_createOAuthDialog:function(){var a=this._nls,b=m.substitute(a,this._oAuthDialogContent),g=new d({title:a.title,content:b,"class":"esri-widget esriOAuthSignInDialog esriIdentityDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var a=g.esriIdMgr_._oAuthDfd;g.hide_();g.esriIdMgr_._doOAuthSignIn(a.resUrl_,
a.sinfo_,a.oinfo_)},cancel_:function(){var a=g.esriIdMgr_._oAuthDfd;g.esriIdMgr_._oAuthDfd=null;g.hide_();var b=Error("ABORTED");b.code="IdentityManager.2";b.log=!!n.isDebug;a.reject(b)},hide_:function(){h.hide(g.errMsg_);g.hide();d._DialogLevelManager.hide(g)}}),a=g.domNode;return g.btnSubmit_=c.byNode(l.query(".esriIdSubmit",a)[0]),g.btnCancel_=c.byNode(l.query(".esriIdCancel",a)[0]),g.errMsg_=l.query(".esriErrorMsg",a)[0],g.connect(g.btnSubmit_,"onClick",g.execute_),g.connect(g.btnCancel_,"onClick",
g.onCancel),g.connect(g,"onCancel",g.cancel_),g},_doOAuthSignIn:function(a,b,c){var d=this,g={client_id:c.appId,response_type:"token",state:JSON.stringify({portalUrl:c.portalUrl}),expiration:c.expiration,locale:c.locale,redirect_uri:c.popup?f.makeAbsolute(c.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};c.forceLogin&&(g.force_login=!0);var k=c.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",e=k+"?"+q.objectToQuery(g);if(c.popup){var l;(7===t("ie")?(l=window.open(c.popupCallbackUrl,
"esriJSAPIOAuth",c.popupWindowFeatures),l.location=e):l=window.open(e,"esriJSAPIOAuth",c.popupWindowFeatures),l)?(l.focus(),this._oAuthDfd.oAuthWin_=l,this._oAuthIntervalId=setInterval(function(){if(l.closed){clearInterval(d._oAuthIntervalId);var a=d._oAuthDfd;if(a){var b=Error("ABORTED");b.code="IdentityManager.2";b.log=!!n.isDebug;a.reject(b)}}},500)):(a=Error("ABORTED"),a.code="IdentityManager.2",a.log=!!n.isDebug,this._oAuthDfd.reject(a))}else this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:g,
authorizeUrl:k,resourceUrl:a,serverInfo:b,oAuthInfo:c}):window.location=e}}})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor ../core/kebabDictionary ../geometry/Extent ../geometry/support/webMercatorUtils ../geometry/SpatialReference dojo/_base/lang".split(" "),function(a,h,m,f,d,c,n,e,l,b,g){var q=n({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",
numViews:"num-views"});a=t=function(a){function c(b){b=a.call(this)||this;return b.disableExtraQuery=!1,b.extent=null,b.num=10,b.query=null,b.sortField=null,b.start=1,b}return m(c,a),Object.defineProperty(c.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(a){"asc"!==a&&"desc"!==a||this._set("sortOrder",a)},enumerable:!0,configurable:!0}),c.prototype.clone=function(){return new t({disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():
null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})},c.prototype.toRequestOptions=function(a,c){var d;if(this.extent){var k=l.project(this.extent,b.WGS84);k&&(d=k.xmin+","+k.ymin+","+k.xmax+","+k.ymax)}k=this.query;!this.disableExtraQuery&&a.extraQuery&&(k="("+k+")"+a.extraQuery);a={bbox:d,q:k,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(a.sortField=q.toJSON(this.sortField),a.sortOrder=this.sortOrder),{query:g.mixin(c,
a)}},c}(d.declared(c));f([d.property()],a.prototype,"disableExtraQuery",void 0);f([d.property({type:e})],a.prototype,"extent",void 0);f([d.property()],a.prototype,"num",void 0);f([d.property()],a.prototype,"query",void 0);f([d.property()],a.prototype,"sortField",void 0);f([d.property()],a.prototype,"sortOrder",null);f([d.property()],a.prototype,"start",void 0);a=t=f([d.subclass("esri.portal.PortalQueryParams")],a);var t;return a})},"esri/core/kebabDictionary":function(){define(["require","exports"],
function(a,h){return function(a,f){void 0===f&&(f={});var d=f.ignoreUnknown||!1,c={},n;for(n in a)c[a[n]]=n;var e=function(a){return c.hasOwnProperty(a)?c[a]:d?void 0:a},l=function(b){return a.hasOwnProperty(b)?a[b]:d?void 0:b};return{toJSON:e,fromJSON:l,read:function(a){return l(a)},write:function(a,c,d){a=e(a);void 0!==a&&(c[d]=a)}}}})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor".split(" "),
function(a,h,m,f,d,c){a=function(a){function c(c){c=a.call(this)||this;return c.nextQueryParams=null,c.queryParams=null,c.results=null,c.total=null,c}return m(c,a),c}(d.declared(c));return f([d.property()],a.prototype,"nextQueryParams",void 0),f([d.property()],a.prototype,"queryParams",void 0),f([d.property()],a.prototype,"results",void 0),f([d.property()],a.prototype,"total",void 0),a=f([d.subclass("esri.portal.PortalQueryResult")],a)})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Error ../core/JSONSupport ./PortalFolder ./PortalGroup ../core/promiseUtils ../core/requireUtils dojo/promise/all".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q){h=function(d){function f(){var a=d.call(this)||this;return a.access=null,a.created=null,a.culture=null,a.description=null,a.email=null,a.fullName=null,a.modified=null,a.orgId=null,a.portal=null,a.preferredView=null,a.privileges=null,a.region=null,a.role=null,a.roleId=null,a.units=null,a.username=null,a.userType=null,a}return m(f,d),Object.defineProperty(f.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+
"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"userContentUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/users/"+this.username:null},enumerable:!0,configurable:!0}),f.prototype.addItem=function(a){var b=this,c=a&&a.item,d=a&&a.data;a=a&&a.folder;var k=
{method:"post"};c&&(k.query=c._getPostQuery(),null!=d&&("string"==typeof d?k.query.text=d:"object"==typeof d&&(k.query.text=JSON.stringify(d))));d=this.userContentUrl;return a&&(d+="/"+a.id),this.portal._request(d+"/addItem",k).then(function(a){return c.id=a.id,c.portal=b.portal,c.loaded?c._reload():c.load()})},f.prototype.deleteItem=function(a){var b=this.userContentUrl;return a.ownerFolder&&(b+="/"+a.ownerFolder),this.portal._request(b+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=
null;a.portal=null})},f.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=e.fromJSON(b);return b.portal=a.portal,b}):[]})},f.prototype.fetchGroups=function(){var a=this;return this.portal._request(this.url).then(function(b){return b&&b.groups?b.groups.map(function(b){b=l.fromJSON(b);return b.portal=a.portal,b}):[]})},f.prototype.fetchItems=function(b){var c=this;b||(b={});var d=
this.userContentUrl;b.folder&&(d+="/"+b.folder.id);var e;return g.when(a,"./PortalItem").then(function(a){e=a;return c.portal._request(d,{query:{folders:!1,num:b.num||10,start:b.start||1}})}).then(function(a){var b;return a&&a.items?(b=a.items.map(function(a){a=e.fromJSON(a);return a.portal=c.portal,a.load(),a}),q(b).always(function(){return{items:b,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})},f.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;return b&&
a&&(b+="\x26w\x3d"+a),b},f.prototype.queryFavorites=function(a){return this.favGroupId?(this._favGroup||(this._favGroup=new l({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(a)):b.reject(new c("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))},f.prototype.toJSON=function(){throw new c("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");},f}(d.declared(n));return f([d.property()],h.prototype,"access",void 0),f([d.property({type:Date})],
h.prototype,"created",void 0),f([d.property()],h.prototype,"culture",void 0),f([d.property()],h.prototype,"description",void 0),f([d.property()],h.prototype,"email",void 0),f([d.property()],h.prototype,"favGroupId",void 0),f([d.property()],h.prototype,"fullName",void 0),f([d.property({type:Date})],h.prototype,"modified",void 0),f([d.property()],h.prototype,"orgId",void 0),f([d.property()],h.prototype,"portal",void 0),f([d.property()],h.prototype,"preferredView",void 0),f([d.property()],h.prototype,
"privileges",void 0),f([d.property()],h.prototype,"region",void 0),f([d.property()],h.prototype,"role",void 0),f([d.property()],h.prototype,"roleId",void 0),f([d.property()],h.prototype,"thumbnail",void 0),f([d.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],h.prototype,"thumbnailUrl",null),f([d.property()],h.prototype,"units",void 0),f([d.property({dependsOn:["portal.restUrl"],readOnly:!0})],h.prototype,"userContentUrl",null),f([d.property({dependsOn:["portal.restUrl"],
readOnly:!0})],h.prototype,"url",null),f([d.property()],h.prototype,"username",void 0),f([d.property()],h.prototype,"userType",void 0),h=f([d.subclass("esri.portal.PortalUser")],h)})},"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Error ../core/JSONSupport".split(" "),function(a,h,m,f,d,c,n){a=function(a){function d(b){b=a.call(this)||this;return b.created=null,b.id=null,
b.portal=null,b.title=null,b.username=null,b}return m(d,a),Object.defineProperty(d.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username+"/"+this.id:null},enumerable:!0,configurable:!0}),d.prototype.toJSON=function(){throw new c("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");},d}(d.declared(n));return f([d.property({type:Date})],a.prototype,"created",void 0),f([d.property()],a.prototype,"id",void 0),f([d.property()],
a.prototype,"portal",void 0),f([d.property()],a.prototype,"title",void 0),f([d.property({dependsOn:["portal.restUrl"],readOnly:!0})],a.prototype,"url",null),f([d.property()],a.prototype,"username",void 0),a=f([d.subclass("esri.portal.PortalFolder")],a)})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/accessorSupport/decorators ../core/Error ../core/JSONSupport ./PortalQueryParams".split(" "),
function(a,h,m,f,d,c,n,e,l){a=function(a){function b(b){b=a.call(this)||this;return b.access=null,b.created=null,b.description=null,b.id=null,b.isInvitationOnly=!1,b.modified=null,b.owner=null,b.portal=null,b.snippet=null,b.sortField=null,b.sortOrder=null,b.tags=null,b.title=null,b}return m(b,a),Object.defineProperty(b.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,
"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0}),b.prototype.fetchMembers=function(){return this.portal._request(this.url+"/users")},b.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;return b&&a&&(b+="\x26w\x3d"+a),b},b.prototype.toJSON=function(){throw new n("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");},b.prototype.queryItems=function(a){return a=a?a.clone():new l,a.query=
"group:"+this.id+(a.query?" "+a.query:""),this.portal.queryItems(a)},b}(c.declared(e));return f([c.property()],a.prototype,"access",void 0),f([c.property({type:Date})],a.prototype,"created",void 0),f([c.property()],a.prototype,"description",void 0),f([c.property()],a.prototype,"id",void 0),f([c.property()],a.prototype,"isInvitationOnly",void 0),f([c.property({type:Date})],a.prototype,"modified",void 0),f([c.property()],a.prototype,"owner",void 0),f([c.property()],a.prototype,"portal",void 0),f([c.property()],
a.prototype,"snippet",void 0),f([c.property()],a.prototype,"sortField",void 0),f([c.property()],a.prototype,"sortOrder",void 0),f([c.property()],a.prototype,"tags",void 0),f([c.property()],a.prototype,"thumbnail",void 0),f([c.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],a.prototype,"thumbnailUrl",null),f([c.property()],a.prototype,"title",void 0),f([c.property({dependsOn:["portal.restUrl"],readOnly:!0})],a.prototype,"url",null),f([d(0,c.cast(l))],a.prototype,"queryItems",
null),a=f([c.subclass("esri.portal.PortalGroup")],a)})},"esri/portal/PortalItem":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Error ../core/lang ../geometry/Extent ../core/JSONSupport ../core/Loadable ./Portal ./PortalRating ../core/promiseUtils".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q,t){h=w=function(b){function d(a){a=b.call(this)||this;return a.access=null,a.accessInformation=null,a.appProxies=
null,a.avgRating=null,a.created=null,a.culture=null,a.description=null,a.extent=null,a.id=null,a.itemControl=null,a.licenseInfo=null,a.modified=null,a.name=null,a.numComments=null,a.numRatings=null,a.numViews=null,a.owner=null,a.portal=null,a.size=null,a.snippet=null,a.tags=null,a.title=null,a.type=null,a.typeKeywords=null,a.url=null,a}return m(d,b),Object.defineProperty(d.prototype,"displayName",{get:function(){var a=this.type,b=this.typeKeywords||[],c=a;return"Feature Service"===a||"Feature Collection"===
a?c=-1<b.indexOf("Table")?"Table":-1<b.indexOf("Route Layer")?"Route Layer":-1<b.indexOf("Markup")?"Markup":"Feature Layer":"Image Service"===a?c=-1<b.indexOf("Elevation 3D Layer")?"Elevation Layer":"Imagery Layer":"Scene Service"===a?c="Scene Layer":"Scene Package"===a?c="Scene Layer Package":"Stream Service"===a?c="Feature Layer":"Geoprocessing Service"===a&&this.portal&&this.portal.isPortal?c=-1<b.indexOf("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===a?c="Locator":"Microsoft Powerpoint"===
a?c="Microsoft PowerPoint":"GeoJson"===a?c="GeoJSON":"Globe Service"===a?c="Globe Layer":"Vector Tile Service"===a?c="Tile Layer":"Map Service"===a?c=-1===b.indexOf("Spatiotemporal")&&(-1<b.indexOf("Hosted Service")||-1<b.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":a&&-1<a.toLowerCase().indexOf("add in")?c=a.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===a&&(c="Big Data File Share"),c},enumerable:!0,configurable:!0}),d.prototype.readExtent=function(a){return a&&a.length?new e(a[0][0],
a[0][1],a[1][0],a[1][1]):null},Object.defineProperty(d.prototype,"iconUrl",{get:function(){var b,c=this.type&&this.type.toLowerCase()||"",d=this.typeKeywords||[],g=!1,e=!1,l=!1,f=!1;return 0<c.indexOf("service")||"feature collection"===c||"kml"===c||"wms"===c||"wmts"===c||"wfs"===c?(g=-1<d.indexOf("Hosted Service"),"feature service"===c||"feature collection"===c||"kml"===c||"wfs"===c?(e=-1<d.indexOf("Table"),l=-1<d.indexOf("Route Layer"),f=-1<d.indexOf("Markup"),b=e?"table":l?"routelayer":f?"markup":
g?"featureshosted":"features"):b="map service"===c||"wms"===c||"wmts"===c?g||-1<d.indexOf("Tiled")||"wmts"===c?"maptiles":"mapimages":"scene service"===c?-1<d.indexOf("Line")?"sceneweblayerline":-1<d.indexOf("3DObject")?"sceneweblayermultipatch":-1<d.indexOf("Point")?"sceneweblayerpoint":-1<d.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<d.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<d.indexOf("Polygon")?"sceneweblayerpolygon":"sceneweblayer":"image service"===c?-1<d.indexOf("Elevation 3D Layer")?
"elevationlayer":"imagery":"stream service"===c?"streamlayer":"vector tile service"===c?"vectortile":"datastore catalog service"===c?"datastorecollection":"geocoding service"===c?"geocodeservice":"layers"):b="web map"===c||"cityengine web scene"===c?"maps":"web scene"===c?-1<d.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===c||"mobile application"===c||"application"===c||"operation view"===c||"desktop application"===c?"apps":"map document"===c||"map package"===
c||"published map"===c||"scene document"===c||"globe document"===c||"basemap package"===c||"mobile basemap package"===c||"mobile map package"===c||"project package"===c||"project template"===c||"pro map"===c||"layout"===c||"layer"===c&&-1<d.indexOf("ArcGIS Pro")||"explorer map"===c&&d.indexOf("Explorer Document")?"mapsgray":"service definition"===c||"csv"===c||"shapefile"===c||"cad drawing"===c||"geojson"===c||"360 vr experience"===c?"datafiles":"explorer add in"===c||"desktop add in"===c||"windows viewer add in"===
c||"windows viewer configuration"===c?"appsgray":"arcgis pro add in"===c||"arcgis pro configuration"===c?"addindesktop":"rule package"===c||"file geodatabase"===c||"csv collection"===c||"kml collection"===c||"windows mobile package"===c||"map template"===c||"desktop application template"===c||"arcpad package"===c||"code sample"===c||"form"===c||"document link"===c||"vector tile package"===c||"operations dashboard add in"===c||"rules package"===c||"image"===c||"workflow manager package"===c||"desktop style"===
c||"explorer map"===c&&-1<d.indexOf("Explorer Mapping Application")||-1<d.indexOf("Document")?"datafilesgray":"network analysis service"===c||"geoprocessing service"===c||"geodata service"===c||"geometry service"===c||"geoprocessing package"===c||"locator package"===c||"geoprocessing sample"===c||"workflow manager service"===c||"raster function template"===c?"toolsgray":"layer"===c||"layer package"===c||"explorer layer"===c?"layersgray":"scene package"===c?"scenepackage":"tile package"===c?"tilepackage":
"task file"===c?"taskfile":"report template"===c?"report-template":"statistical data collection"===c?"statisticaldatacollection":"insights workbook"===c?"workbook":"insights model"===c?"insightsmodel":"insights page"===c?"insightspage":"hub initiative"===c?"hubinitiative":"hubpage"===c?"hubpage":"hub site application"===c?"hubsite":"relational database connection"===c?"relationaldatabaseconnection":"big data file share"===c?"datastorecollection":"image collection"===c?"imagecollection":"style"===
c?"style":"dashboard"===c?"dashboard":"maps",b?a.toUrl("../images/portal/"+b+"16.png"):null},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"isLayer",{get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;WMTS;WMS".split(";").indexOf(this.type)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"itemUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/items/"+this.id:
null},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"thumbnailUrl",{get:function(){var a=this.itemUrl,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"userItemUrl",{get:function(){var a=this.get("portal.restUrl");if(!a)return null;var b=this.owner||this.get("portal.user.username");return b?a+"/content/users/"+(this.ownerFolder?b+"/"+this.ownerFolder:b)+"/items/"+this.id:null},
enumerable:!0,configurable:!0}),d.prototype.load=function(){var a=this;this.portal||(this.portal=g.getDefault());var b=this.portal.load().then(function(){return a.resourceInfo?a.resourceInfo:a.id&&a.itemUrl?a.portal._request(a.itemUrl):{}}).then(function(b){a.resourceInfo=b;a.read(b)});return this.addResolvingPromise(b),this},d.prototype.addRating=function(a){var b={method:"post",query:{}};return a instanceof q&&(a=a.rating),isNaN(a)||"number"!=typeof a||(b.query.rating=a),this.portal._request(this.itemUrl+
"/addRating",b).then(function(){return new q({rating:a,created:new Date})})},d.prototype.deleteRating=function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(function(){})},d.prototype.fetchData=function(a){return void 0===a&&(a="json"),this.portal._request(this.itemUrl+"/data",{responseType:a})},d.prototype.fetchRating=function(){return this.portal._request(this.itemUrl+"/rating").then(function(a){return null!=a.rating?(a.created=new Date(a.created),new q(a)):null})},
d.prototype.fetchRelatedItems=function(a){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:a},"PortalItem")},d.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;return b&&a&&(b+="\x26w\x3d"+a),b},d.prototype.update=function(a){var b=this;return this.id?this.load().then(function(){return b.portal._signIn()}).then(function(){var c=a&&a.data,d={method:"post"};d.query=b._getPostQuery();for(var g in d.query)null===d.query[g]&&(d.query[g]="");return d.query.clearEmptyFields=
!0,null!=c&&("string"==typeof c?d.query.text=c:"object"==typeof c&&(d.query.text=JSON.stringify(c))),b.portal._request(b.userItemUrl+"/update",d).then(function(){return b._reload()})}):t.reject(new c("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))},d.prototype.toJSON=function(){var a=this.extent,a={created:this.created&&this.created.getTime(),description:this.description,extent:a&&[[a.xmin,a.ymin],[a.xmax,a.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),
name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return n.fixJson(a)},d.fromJSON=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");return new w({resourceInfo:a})},d.prototype._reload=function(){var a=this;return this.portal._request(this.itemUrl,{query:{_ts:(new Date).getTime()}}).then(function(b){return a.resourceInfo=
b,a.read(b),a})},d.prototype._getPostQuery=function(){var a=this.toJSON(),b;for(b in a)"tags"===b&&null!==a[b]&&(a[b]=a[b].join(", ")),"typeKeywords"===b&&null!==a[b]&&(a[b]=a[b].join(", "));return a},d}(d.declared(l,b));f([d.property()],h.prototype,"access",void 0);f([d.property()],h.prototype,"accessInformation",void 0);f([d.property()],h.prototype,"appProxies",void 0);f([d.property()],h.prototype,"avgRating",void 0);f([d.property({type:Date})],h.prototype,"created",void 0);f([d.property()],h.prototype,
"culture",void 0);f([d.property()],h.prototype,"description",void 0);f([d.property({dependsOn:["type","typeKeywords"],readOnly:!0})],h.prototype,"displayName",null);f([d.property({type:e})],h.prototype,"extent",void 0);f([d.reader("extent")],h.prototype,"readExtent",null);f([d.property({dependsOn:["type","typeKeywords"],readOnly:!0})],h.prototype,"iconUrl",null);f([d.property()],h.prototype,"id",void 0);f([d.property({dependsOn:["type"],readOnly:!0})],h.prototype,"isLayer",null);f([d.property()],
h.prototype,"itemControl",void 0);f([d.property({dependsOn:["portal.restUrl","id"],readOnly:!0})],h.prototype,"itemUrl",null);f([d.property()],h.prototype,"licenseInfo",void 0);f([d.property({type:Date})],h.prototype,"modified",void 0);f([d.property()],h.prototype,"name",void 0);f([d.property()],h.prototype,"numComments",void 0);f([d.property()],h.prototype,"numRatings",void 0);f([d.property()],h.prototype,"numViews",void 0);f([d.property()],h.prototype,"owner",void 0);f([d.property()],h.prototype,
"ownerFolder",void 0);f([d.property({type:g})],h.prototype,"portal",void 0);f([d.property()],h.prototype,"resourceInfo",void 0);f([d.property()],h.prototype,"size",void 0);f([d.property()],h.prototype,"snippet",void 0);f([d.property()],h.prototype,"tags",void 0);f([d.property()],h.prototype,"thumbnail",void 0);f([d.property({dependsOn:["itemUrl","thumbnail","portal.credential.token"],readOnly:!0})],h.prototype,"thumbnailUrl",null);f([d.property()],h.prototype,"title",void 0);f([d.property()],h.prototype,
"type",void 0);f([d.property()],h.prototype,"typeKeywords",void 0);f([d.property()],h.prototype,"url",void 0);f([d.property({dependsOn:["portal.restUrl","portal.user.username","owner","ownerFolder","id"],readOnly:!0})],h.prototype,"userItemUrl",null);h=w=f([d.subclass("esri.portal.PortalItem")],h);var w;return h})},"esri/portal/PortalRating":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor".split(" "),
function(a,h,m,f,d,c){a=function(a){function c(c){c=a.call(this)||this;return c.created=null,c.rating=null,c}return m(c,a),c}(d.declared(c));return f([d.property()],a.prototype,"created",void 0),f([d.property()],a.prototype,"rating",void 0),a=f([d.subclass("esri.portal.PortalRating")],a)})},"esri/support/groundUtils":function(){define("require exports ../core/accessorSupport/ensureType ../core/Logger ../Ground ../layers/ElevationLayer".split(" "),function(a,h,m,f,d,c){Object.defineProperty(h,"__esModule",
{value:!0});var n=f.getLogger("esri.support.groundUtils");h.groundElevationLayers={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"}};h.ensureType=function(a){var e;"string"==typeof a?a in h.groundElevationLayers?(a=h.groundElevationLayers[a],a=new c({id:a.id,url:a.url}),e=new d({layers:[a]})):n.warn("Unable to find ground definition for: "+a+'. Try "world-elevation"'):e=m["default"](d,a);return e}})},"esri/layers/ElevationLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators dojo/_base/lang ../request ../core/Error ../core/promiseUtils ../core/requireUtils ./TiledLayer ./mixins/ArcGISMapService ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./support/rasterFormats/LercCodec".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r){h=function(d){function g(a){a=d.call(this)||this;return a.type="elevation",a.url=null,a.opacity=1,a.operationalLayerType="ArcGISTiledElevationServiceLayer",a}return m(g,d),g.prototype.normalizeCtorArgs=function(a,b){return"string"==typeof a?c.mixin({},{url:a},b):a},g.prototype.load=function(){var a=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(a){for(var b=0;b<a.typeKeywords.length;b++)if("elevation 3d layer"===
a.typeKeywords[b].toLowerCase())return!0;throw new e("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"});}}).always(function(){return a._fetchImageService()})),this},g.prototype.fetchTile=function(a,b,c,d){var k=this;return void 0===d&&(d=0),this.load().then(function(){return k._fetchTileAvailability(a,b,c)}).then(function(){var d=k.getTileUrl(a,b,c);return n(d,{responseType:"array-buffer",
failOk:!0})}).then(function(a){a=r.decode(a.data,{noDataValue:d,returnFileInfo:!0});return{values:a.pixelData,width:a.width,height:a.height,maxZError:a.fileInfo.maxZError,noDataValue:a.noDataValue}})},g.prototype.queryElevation=function(c,d){var k=this;return b.when(a,"./support/ElevationQuery").then(function(a){return(new a.ElevationQuery).query(k,c,d)})},g.prototype._fetchTileAvailability=function(a,b,c){return this.tilemapCache?this.tilemapCache.fetchAvailability(a,b,c):l.resolve("unknown")},g.prototype._fetchImageService=
function(){var a=this;return l.resolve().then(function(){if(a.resourceInfo)return a.resourceInfo;var b={query:c.mixin({f:"json"},a.parsedUrl.query),responseType:"json",callbackParamName:"callback"};return n(a.parsedUrl.path,b)}).then(function(b){b.ssl&&(a.url=a.url.replace(/^http:/i,"https:"));a.read(b.data,{origin:"service",url:a.parsedUrl})})},g}(d.declared(g,q,t,w,v));return f([d.shared({"3d":"../views/3d/layers/ElevationLayerView3D"})],h.prototype,"viewModulePaths",void 0),f([d.property()],h.prototype,
"resourceInfo",void 0),f([d.property({json:{read:!1},value:"elevation",readOnly:!0})],h.prototype,"type",void 0),f([d.property()],h.prototype,"url",void 0),f([d.property({json:{read:!1,write:!1}})],h.prototype,"opacity",void 0),f([d.property()],h.prototype,"operationalLayerType",void 0),h=f([d.subclass("esri.layers.ElevationLayer")],h)})},"esri/layers/TiledLayer":function(){define(["../request","./Layer","./support/TileInfo"],function(a,h,m){return h.createSubclass({properties:{attributionDataUrl:null,
tileInfo:m},viewModulePaths:{"2d":"../views/2d/layers/TiledLayerView2D","3d":"../views/3d/layers/TiledLayerView3D"},getTileUrl:function(a,d,c){},fetchTile:function(f,d,c,n){f=this.getTileUrl(f,d,c);n={responseType:"image",allowImageDataAccess:n&&n.allowImageDataAccess||!1};return"string"==typeof f?a(f,n).then(function(a){return a.data}):f.then(function(c){return a(c,{responseType:"image"})}).then(function(a){return a.data})}})})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ../../geometry/SpatialReference ../../geometry/Point ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/scaleUtils ./LOD".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v){var r=n({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});a=p=function(a){function c(b){b=a.call(this)||this;return b.dpi=96,b.format=null,b.origin=null,b.minScale=0,b.maxScale=0,b.size=null,b.spatialReference=null,b}return m(c,a),c.create=function(a){void 0===a&&(a={size:256,spatialReference:b.WebMercator});var c=
a.scales,d=a.size||256;a=a.spatialReference||b.WebMercator;var k=q.getInfo(a),k=k?new g(k.origin[0],k.origin[1],a):new g(0,0,a),e=1/(39.37*w.getUnitValueForSR(a)*96),l=[];if(c)for(var f=0;f<c.length;f++){var n=c[f],x=n*e;l.push({level:f,scale:n,resolution:x})}else for(c=256/d*5.91657527591555E8,l.push({level:0,scale:c,resolution:c*e}),f=1;24>f;f++)n=c/2,x=n*e,l.push({level:f,scale:n,resolution:x}),c=n;return new p({dpi:96,lods:l,origin:k,size:d,spatialReference:a})},Object.defineProperty(c.prototype,
"lods",{set:function(a){var b=this,c=0,d=0,k=[];this._levelToLOD={};a&&(c=-(1/0),d=1/0,a.forEach(function(a){k.push(a.scale);c=a.scale>c?a.scale:c;d=a.scale<d?a.scale:d;b._levelToLOD[a.level]=a}));this._set("scales",k);this._set("minScale",c);this._set("maxScale",d);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0}),c.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*
(b[Math.round(a-.5)]-b[c])},c.prototype.scaleToZoom=function(a){for(var b=this.scales,c=b.length-1,d=0;c>d;d++){var k=b[d],g=b[d+1];if(a>=k)break;if(g===a)return d+1;if(k>a&&a>g)return d+1-(a-g)/(k-g)}return d},c.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))},c.prototype.tileAt=function(a,b,c,d){var k=this.lodAt(a);if(!k)return null;d||(d={id:null,level:0,row:0,col:0,extent:[0,0,
0,0]});var g;if("number"==typeof b)g=b,b=c;else{if(b.spatialReference.equals(this.spatialReference))g=b.x,b=b.y;else{d=t.project(b,this.spatialReference);if(!d)return null;g=d.x;b=d.y}d=c}c=k.resolution*this.size[0];k=k.resolution*this.size[1];return d.level=a,d.row=Math.floor((this.origin.y-b)/k+.001),d.col=Math.floor((g-this.origin.x)/c+.001),this.updateTileInfo(d),d},c.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level),c=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+
"/"+a.row+"/"+a.col;a.extent||(a.extent=[0,0,0,0]);a.extent[0]=this.origin.x+a.col*c;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=a.extent[0]+c;a.extent[3]=a.extent[1]+b},c.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];return b&&-1!==b.parentLevel?(a.level=b.parentLevel,a.row=Math.floor(a.row/b.factor+.001),a.col=Math.floor(a.col/b.factor+.001),this.updateTileInfo(a),!0):!1},c.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null},c.prototype.clone=
function(){return p.fromJSON(this.toJSON())},c.prototype.toJSON=function(){return e.fixJson({rows:this.size[0],cols:this.size[1],dpi:this.dpi,format:r.toJSON(this.format),compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJSON(),spatialReference:this.spatialReference&&this.spatialReference.toJSON(),lods:this.lods&&this.lods.map(function(a){return a.toJSON()})})},c.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,c=0;c<
a.length;c++){var d=a[c];this._upsampleLevels[d.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/d.resolution:0};b=d}},c}(l.declared(c));f([l.property()],a.prototype,"compressionQuality",void 0);f([l.property()],a.prototype,"dpi",void 0);f([l.property({json:{read:r.fromJSON}})],a.prototype,"format",void 0);f([l.property({type:g,json:{read:function(a,b){return g.fromJSON(d.mixin({spatialReference:b.spatialReference},a))}}})],a.prototype,"origin",void 0);f([l.property({type:[v],value:null})],
a.prototype,"lods",null);f([l.property({readOnly:!0})],a.prototype,"minScale",void 0);f([l.property({readOnly:!0})],a.prototype,"maxScale",void 0);f([l.property({readOnly:!0})],a.prototype,"scales",void 0);f([l.property({cast:function(a){return Array.isArray(a)?a:"number"==typeof a?[a,a]:[256,256]},json:{read:{source:["rows","cols"],reader:function(a,b){return[b.cols,b.rows]}}}})],a.prototype,"size",void 0);f([l.property({type:b})],a.prototype,"spatialReference",void 0);a=p=f([l.subclass("esri.layers.support.TileInfo")],
a);var p;return a})},"esri/geometry/support/scaleUtils":function(){define(["../../config","../../core/lang","./WKIDUnitConversion","./WKIDUnitStrings"],function(a,h,m,f){var d=20015077/180,c={getVerticalUnitValueForSR:function(a){a=this.getUnitValueForSR(a);return 1E5<a?1:a},getVerticalUnitStringForSR:function(a){return 1E5<this.getUnitValueForSR(a)?"meter":(a=this.getUnitString(a))?a.toLowerCase().replace(/_/g,"-"):"meter"},getUnitValueForSR:function(a){return this.getUnitValue(a)||d},getUnitValue:function(a){var c,
d,b;(a&&("object"==typeof a?(c=a.wkid,d=a.wkt):"number"==typeof a?c=a:"string"==typeof a&&(d=a)),c)?b=m.values[m[c]]:d&&-1!==d.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(d))&&a[1]&&(b=parseFloat(a[1].split(",")[1]));return b},getUnitString:function(a){var c,d;return"object"==typeof a?c=a.wkid:"number"==typeof a&&(c=a),c&&(d=f.strings[m[c]]),d},getScale:function(f,e,l){var b,g,n;return 1<arguments.length&&h.isDefined(e)&&!e.declaredClass?(b=f,g=e,e=null,n=c.getUnitValue(l)):(b=e||f.extent,
g=f.width,n=c.getUnitValue(b&&b.spatialReference)),b&&g?b.width/g*(n||d)*39.37*a.screenDPI:0},getResolutionForScale:function(d,e){e=c.getUnitValueForSR(e);return d/(39.37*e*a.screenDPI)},getExtentForScale:function(a,d){var e=a.extent;a=a.width;d=c.getResolutionForScale(d,e.spatialReference);return e.clone().expand(d*a/e.width)}};return c})},"esri/geometry/support/WKIDUnitStrings":function(){define([],function(){return{strings:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" ")}})},
"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport".split(" "),function(a,h,m,f,d,c){a=n=function(a){function c(b){b=a.call(this,b)||this;return b.level=0,b.levelValue=null,b.resolution=0,b.scale=0,b}return m(c,a),c.prototype.clone=function(){return new n({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})},c}(d.declared(c));
f([d.property({json:{write:!0}})],a.prototype,"level",void 0);f([d.property({json:{write:!0}})],a.prototype,"levelValue",void 0);f([d.property({json:{write:!0}})],a.prototype,"resolution",void 0);f([d.property({json:{write:!0}})],a.prototype,"scale",void 0);a=n=f([d.subclass("esri.layers.support.LOD")],a);var n;return a})},"esri/layers/mixins/ArcGISMapService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ArcGISService ./ScaleRangeLayer ../../geometry/Extent ../../geometry/SpatialReference".split(" "),
function(a,h,m,f,d,c,n,e,l){a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.copyright=null,b.fullExtent=null,b.spatialReference=null,b.version=null,b}return m(b,a),b.prototype.readCapabilities=function(a,b){return a&&a.split(",").map(function(a){return a.trim()})},b.prototype.readCopyright=function(a,b){return b.copyrightText},b.prototype.readLegendEnabled=function(a,b){return b.showLegend},b.prototype.writeLegendEnabled=function(a,b){b.showLegend=!!a},b.prototype.readPopupEnabled=
function(a,b){return!b.disablePopup},b.prototype.readVersion=function(a,b){a=b.currentVersion;return a||(a=b.hasOwnProperty("capabilities")||b.hasOwnProperty("tables")?10:b.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),a},b}(d.declared(c,n));return f([d.property()],a.prototype,"capabilities",void 0),f([d.reader("service","capabilities")],a.prototype,"readCapabilities",null),f([d.property()],a.prototype,"copyright",void 0),f([d.reader("copyright",["copyrightText"])],a.prototype,"readCopyright",
null),f([d.property({type:e})],a.prototype,"fullExtent",void 0),f([d.property({json:{origins:{service:{read:!1},portalItem:{read:!1}}}})],a.prototype,"id",void 0),f([d.property()],a.prototype,"legendEnabled",void 0),f([d.reader("legendEnabled",["showLegend"])],a.prototype,"readLegendEnabled",null),f([d.writer("legendEnabled")],a.prototype,"writeLegendEnabled",null),f([d.reader("popupEnabled",["disablePopup"])],a.prototype,"readPopupEnabled",null),f([d.property({type:l})],a.prototype,"spatialReference",
void 0),f([d.property()],a.prototype,"version",void 0),f([d.reader("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],a.prototype,"readVersion",null),a=f([d.subclass("esri.layers.mixins.ArcGISMapService")],a)})},"esri/layers/mixins/ArcGISService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/MultiOriginJSONSupport ../support/arcgisLayerUrl".split(" "),
function(a,h,m,f,d,c,n){a=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}return m(c,a),Object.defineProperty(c.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var a=n.parse(this.url);if(a&&a.title)return a.title}return this._get("title")||""},set:function(a){this._set("title",a)},enumerable:!0,configurable:!0}),c}(d.declared(c));return f([d.property({dependsOn:["url"]})],a.prototype,"title",
null),f([d.property()],a.prototype,"url",void 0),a=f([d.subclass("esri.layers.mixins.ArcGISService")],a)})},"esri/core/MultiOriginJSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./accessorSupport/decorators ./Accessor ./accessorSupport/read ./accessorSupport/write ./accessorSupport/utils ./accessorSupport/MultiOriginStore ./accessorSupport/PropertyOrigin".split(" "),function(a,h,m,f,d,c,n,e,l,b,g){a=function(a){function c(){var c=a.call(this)||
this,d=l.getProperties(c),e=d.metadatas,f=d.store,n=new b["default"];return d.store=n,f.keys().forEach(function(a){n.set(a,f.get(a),g.OriginId.DEFAULTS)}),Object.keys(e).forEach(function(a){d.internalGet(a)&&n.set(a,d.internalGet(a),g.OriginId.DEFAULTS)}),c}return m(c,a),c.prototype.clear=function(a,b){return void 0===b&&(b="user"),l.getProperties(this).store.clear(a,g.nameToId(b))},c.prototype.read=function(a,b){return n["default"](this,a,b),this},c.prototype.write=function(a,b){return a=a||{},e["default"](this,
a,b),a},c.prototype.getAtOrigin=function(a,b){var c=l.getProperties(this).store,d=g.nameToId(b);if("string"==typeof a)return c.get(a,d);var e={};return a.forEach(function(a){e[a]=c.get(a,d)}),e},c.prototype.originOf=function(a){var b=l.getProperties(this).store;if("string"==typeof a)return g.idToName(b.originOf(a));a.forEach(function(a){g.idToName(b.originOf(a))})},c.prototype.revert=function(a,b){var c=l.getProperties(this).store,d=g.nameToId(b),e=l.getProperties(this);("string"==typeof a?"*"===
a?Object.keys(c.getAll(d)):[a]:a).forEach(function(a){e.propertyInvalidated(a);c.revert(a,d);e.propertyCommitted(a)})},c.prototype.removeOrigin=function(a){var b=l.getProperties(this).store;a=g.nameToId(a);var c=b.getAll(a),d;for(d in c)b.originOf(d)===a&&b.set(d,c[d],g.OriginId.USER)},c.prototype.updateOrigin=function(a,b){var c=l.getProperties(this).store;b=g.nameToId(b);var d=this.get(a);c.clear(a);c.set(a,d,b)},c}(d.declared(c));return a=f([d.subclass("esri.core.MultiOriginJSONSupport")],a)})},
"esri/core/accessorSupport/MultiOriginStore":function(){define(["require","exports","./PropertyOrigin"],function(a,h,m){Object.defineProperty(h,"__esModule",{value:!0});a=function(){function a(){this._propertyOriginMap={};this._originStores=Array(m.OriginId.NUM);this._values={}}return a.prototype.get=function(a,c){return(c=void 0===c?this._values:this._originStores[c])?c[a]:void 0},a.prototype.keys=function(){return Object.keys(this._values)},a.prototype.set=function(a,c,f){void 0===f&&(f=m.OriginId.USER);
var d=this._originStores[f];return(d||(d={},this._originStores[f]=d),d[a]=c,!(a in this._values)||this._propertyOriginMap[a]<=f)?(d=this._values[a],this._values[a]=c,this._propertyOriginMap[a]=f,d!==c):!1},a.prototype.clear=function(a,c){void 0===c&&(c=m.OriginId.USER);var d=this._originStores[c];if(d){var e=d[a];if(delete d[a],a in this._values&&this._propertyOriginMap[a]===c)for(delete this._values[a],--c;0<=c;c--)if((d=this._originStores[c])&&a in d){this._values[a]=d[a];this._propertyOriginMap[a]=
c;break}return e}},a.prototype.has=function(a,c){return(c=void 0===c?this._values:this._originStores[c])?a in c:!1},a.prototype.revert=function(a,c){for(;0<c&&!this.has(a,c);)--c;var d=this._originStores[c],d=d&&d[a],e=this._values[a];return this._values[a]=d,this._propertyOriginMap[a]=c,e!==d},a.prototype.originOf=function(a,c){return this._propertyOriginMap[a]||m.OriginId.DEFAULTS},a.prototype.getAll=function(a){return this._originStores[a]},a}();h["default"]=a})},"esri/layers/support/arcgisLayerUrl":function(){define(["require",
"exports","../../core/urlUtils"],function(a,h,m){function f(a){var c=m.urlToObject(a).path.match(h.match);if(!c)return null;a=c[1];var e=c[2],l=c[3],c=c[4],b=e.indexOf("/");return{title:d(-1!==b?e.slice(b+1):e),serverType:l,sublayer:null!=c&&""!==c?parseInt(c,10):null,url:{path:a}}}function d(a){return a=a.replace(/\s*[\/_]+\s*/g," "),a[0].toUpperCase()+a.slice(1)}Object.defineProperty(h,"__esModule",{value:!0});h.serverTypes="MapServer ImageServer FeatureServer SceneServer StreamServer VectorTileServer".split(" ");
h.match=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/("+h.serverTypes.join("|")+"))(?:\\/(?:layers\\/)?(\\d+))?","i");h.test=function(a){return!!h.match.test(a)};h.parse=f;h.cleanTitle=d;h.titleFromUrlAndName=function(a,n){var c=[];a&&(a=f(a))&&a.title&&c.push(a.title);n&&(n=d(n),c.push(n));if(2===c.length){if(-1!==c[0].toLowerCase().indexOf(c[1].toLowerCase()))return c[0];if(-1!==c[1].toLowerCase().indexOf(c[0].toLowerCase()))return c[1]}return c.join(" - ")};h.isHostedAgolService=
function(a){if(!a)return!1;a=a.toLowerCase();var c=-1!==a.indexOf(".arcgis.com/");a=-1!==a.indexOf("//services")||-1!==a.indexOf("//tiles")||-1!==a.indexOf("//features");return c&&a};h.isHostedSecuredProxyService=function(a,d){return d&&a&&-1!==a.toLowerCase().indexOf(d.toLowerCase())}})},"esri/layers/mixins/ScaleRangeLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/accessorSupport/write".split(" "),
function(a,h,m,f,d,c,n){a=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.minScale=0,b.maxScale=0,b}return m(c,a),c}(d.declared(c));return f([d.property({json:{write:{overridePolicy:function(a,c,b){return n.willPropertyWrite(this,"maxScale",{},b)?{ignoreOrigin:!0}:void 0}}}})],a.prototype,"minScale",void 0),f([d.property({json:{write:{overridePolicy:function(a,c,b){return n.willPropertyWrite(this,"minScale",{},b)?{ignoreOrigin:!0}:void 0}}}})],a.prototype,"maxScale",
void 0),a=f([d.subclass("esri.layers.mixins.ScaleRangeLayer")],a)})},"esri/layers/mixins/ArcGISCachedService":function(){define("dojo/_base/lang dojo/io-query ./ArcGISService ./ScaleRangeLayer ../support/TileInfo ../support/TilemapCache".split(" "),function(a,h,m,f,d,c){return m.createSubclass([f],{declaredClass:"esri.layers.mixins.ArcGISCachedService",properties:{minScale:{json:{origins:{service:{read:!1}}}},maxScale:{json:{origins:{service:{read:!1}}}},resampling:!0,supportsBlankTile:{value:!1,
readOnly:!0,dependsOn:["version"],get:function(){return 10.2<=this.version}},tileInfo:{value:null,type:d,json:{read:function(a,c){var e=c.minScale?c.minScale:+(1/0),b=c.maxScale?c.maxScale:-(1/0);return a?(a.lods=a.lods.filter(function(a){return a.scale<=e&&a.scale>=b}),d.fromJSON(a)):null}}},tilemapCache:{value:null,json:{read:{source:["capabilities"],reader:function(a,d){return d.capabilities&&-1<d.capabilities.indexOf("Tilemap")?new c({layer:this}):null}}}},refreshTimestamp:null,version:{}},refresh:function(){this.refreshTimestamp=
Date.now();this.inherited(arguments)},getTileUrl:function(c,d,l){var b=a.mixin({},this.parsedUrl.query,{token:this.token,blankTile:!this.tilemapCache&&this.resampling&&this.supportsBlankTile?!1:null,_ts:this.refreshTimestamp});c=this.parsedUrl.path+"/tile/"+c+"/"+d+"/"+l;return b=h.objectToQuery(b),c+=b?"?"+b:""}})})},"esri/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang dojo/io-query ../../request ../../core/Accessor ../../core/LRUMap ../../core/promiseUtils ../../core/watchUtils ../../core/Error ../../core/HandleRegistry ../../core/Logger ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r){var p=w.getLogger("esri.layers.support.TilemapCache");a=function(a){function k(){var b=null!==a&&a.apply(this,arguments)||this;return b._handles=new t,b._pendingTilemapRequests={},b._availableLevels={},b.levels=5,b.cacheByteSize=2097152,b.request=n,b}return m(k,a),k.prototype.normalizeCtorArgs=function(a){var b=this;return a=d.mixin({},a),this._constructOnly={},["cacheByteSize","layer","levels","request"].forEach(function(c){c in a&&("levels"===c&&2>=a[c]?
p.error("Minimum levels for Tilemap is 3, but got ",a[c]):b._constructOnly[c]=a[c],delete a[c])}),a},k.prototype.initialize=function(){var a=this,b;for(b in this._constructOnly)this._set(b,this._constructOnly[b]);this._constructOnly=null;this._tilemapCache=new l(this.cacheByteSize,{sizeOfFunction:function(a){return a.byteSize}});this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers"],function(){return a._initializeTilemapDefinition()}),g.init(this,"layer.tileInfo.lods",function(b){return a._initializeAvailableLevels(b)},
!0)]);this._initializeTilemapDefinition()},k.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)},Object.defineProperty(k.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0}),k.prototype.getTilemap=function(a,b,c){return this._tilemapFromCache(a,b,c,this._tmpTilemapDefinition)},k.prototype.fetchTilemap=function(a,c,d,k){var g=this;if(!this._availableLevels[a])return b.reject(new q("tilemap-cache:level-unavailable","Level "+a+
" is unavailable in the service"));var e=this._tmpTilemapDefinition;if(a=this._tilemapFromCache(a,c,d,e))return b.resolve(a);var l=r.tilemapDefinitionId(e);a=this._pendingTilemapRequests[l];return a||(a=r.Tilemap.fromDefinition(e,k).then(function(a){return g._tilemapCache.set(l,a),delete g._pendingTilemapRequests[l],a}).otherwise(function(a){return delete g._pendingTilemapRequests[l],b.reject(a)}),this._pendingTilemapRequests[l]=a),a},k.prototype.getAvailability=function(a,b,c){return this._availableLevels[a]?
(a=this.getTilemap(a,b,c))?a.getAvailability(b,c):"unknown":"unavailable"},k.prototype.getAvailabilityUpsample=function(a,b,c,d){d.level=a;d.row=b;d.col=c;a=this.layer.tileInfo;for(a.updateTileInfo(d);;){b=this.getAvailability(d.level,d.row,d.col);if("unavailable"!==b)return b;if(!a.upsampleTile(d))return"unavailable"}},k.prototype.fetchAvailability=function(a,c,d,k){return this._availableLevels[a]?this.fetchTilemap(a,c,d,k).always(function(k){return k instanceof r.Tilemap?(k=k.getAvailability(c,
d),"unavailable"===k?b.reject(new q("tile-map:tile-unavailable","Tile is not available",{level:a,row:c,col:d})):k):"unknown"}):b.reject(new q("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"))},k.prototype.fetchAvailabilityUpsample=function(a,c,d,k,g){var e=this;k.level=a;k.row=c;k.col=d;var l=this.layer.tileInfo;return l.updateTileInfo(k),this.fetchAvailability(a,c,d,g).otherwise(function(a){return l.upsampleTile(k)?e.fetchAvailabilityUpsample(k.level,k.row,k.col,k):
b.reject(a)})},k.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var a=this.layer.parsedUrl,b=a.query;b&&b.token||!this.layer.token||(b=d.mixin(b,{token:this.layer.token}));this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:a.path,query:b?c.objectToQuery(b):null,tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}},k.prototype._tilemapFromCache=function(a,b,c,d){a=this._getTilemapDefinition(a,b,
c,d);a=r.tilemapDefinitionId(a);return this._tilemapCache.get(a)},k.prototype._getTilemapDefinition=function(a,b,c,d){return d.level=a,d.row=b-b%this.size,d.col=c-c%this.size,d},k.prototype._initializeAvailableLevels=function(a){var b=this;this._availableLevels={};a&&a.forEach(function(a){return b._availableLevels[a.level]=!0})},k}(v.declared(e));return f([v.property({readOnly:!0})],a.prototype,"levels",void 0),f([v.property({readOnly:!0,dependsOn:["levels"]})],a.prototype,"size",null),f([v.property({readOnly:!0})],
a.prototype,"cacheByteSize",void 0),f([v.property({readOnly:!0})],a.prototype,"layer",void 0),f([v.property({readOnly:!0})],a.prototype,"request",void 0),a=f([v.subclass("esri.layers.support.TilemapCache")],a)})},"esri/core/LRUMap":function(){define(["require","exports"],function(a,h){return function(){function a(a,d){if(void 0===a&&(a=0),this.sizeOfFunction=function(){return 1},this._sizeOf=0,this._cache=new Map,this._queue=[],0>=a)throw Error("LRU cache size must be bigger than zero!");this._maxSize=
a;d&&(d.disposeFunction&&(this.disposeFunction=d.disposeFunction),d.sizeOfFunction&&(this.sizeOfFunction=d.sizeOfFunction))}return Object.defineProperty(a.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){return this._sizeOf},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"keys",{get:function(){return this._queue.slice()},enumerable:!0,configurable:!0}),a.prototype.clear=function(){var a=
this;this._queue.length=0;this.disposeFunction&&this._cache.forEach(function(d,c){a.disposeFunction(c,d)});this._cache.clear();this._sizeOf=0},a.prototype["delete"]=function(a){var d=this._cache.get(a);return this._cache["delete"](a)?(this._sizeOf-=this.sizeOfFunction(d),this.disposeFunction&&this.disposeFunction(a,d),this._queue.splice(this._queue.indexOf(a),1),!0):!1},a.prototype.forEach=function(a,d){this._cache.forEach(a,d)},a.prototype.get=function(a){var d=this._cache.get(a);if(void 0!==d)return this._queue.splice(this._queue.indexOf(a),
1),this._queue.unshift(a),d},a.prototype.has=function(a){return this._cache.has(a)},a.prototype.set=function(a,d){var c=this.get(a);return void 0!==c?this._sizeOf-=this.sizeOfFunction(c):this._queue.unshift(a),this._sizeOf+=this.sizeOfFunction(d),this._cache.set(a,d),this._collect(),this},a.prototype._collect=function(){for(;this._queue.length&&this._sizeOf>this._maxSize;){var a=this._queue.pop(),d=this._cache.get(a);this._cache["delete"](a)&&(this._sizeOf-=this.sizeOfFunction(d),this.disposeFunction&&
this.disposeFunction(a,d))}},a}()})},"esri/core/watchUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(a,h,m,f){function d(a,b,c,d,g){g=a.watch(b,function(b,k,g,e){d&&!d(b)||c.call(a,b,k,g,e)},g);var k=a.get(b);return d&&d(k)&&c.call(a,k,k,b,a),g}function c(a,b,c,g,e){function k(){l&&(l.remove(),l=null)}var l,n=!1,p=new m(k),h=new f;return h.cancel=p.cancel,h.isCanceled=p.isCanceled,h.isFulfilled=p.isFulfilled,h.isRejected=p.isRejected,h.isResolved=p.isResolved,
h.then=p.then,h.remove=k,Object.freeze(h),l=d(a,b,function(b,d,g,e){n=!0;k();c&&c.call(a,b,d,g,e);p.resolve({value:b,oldValue:d,propertyName:g,target:e})},g,e),n&&l.remove(),h}function n(a){return!!a}function e(a){return!a}function l(a){return!0===a}function b(a){return!1===a}function g(a){return void 0!==a}function q(a){return void 0===a}function t(a,b,c,d){return(Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b]).forEach(function(b){b=b.trim();var d=a.get(b);c.call(a,d,d,b,a)}),a.watch(b,c,
d)}Object.defineProperty(h,"__esModule",{value:!0});h.init=t;h.watch=function(a,b,c,d){return a.watch(b,c,d)};h.once=function(a,b,d,g){return c(a,b,d,null,g)};h.when=function(a,b,c,g){return d(a,b,c,n,g)};h.whenOnce=function(a,b,d,g){return c(a,b,d,n,g)};h.whenNot=function(a,b,c,g){return d(a,b,c,e,g)};h.whenNotOnce=function(a,b,d,g){return c(a,b,d,e,g)};h.whenTrue=function(a,b,c,g){return d(a,b,c,l,g)};h.whenTrueOnce=function(a,b,d,g){return c(a,b,d,l,g)};h.whenFalse=function(a,c,g,e){return d(a,
c,g,b,e)};h.whenFalseOnce=function(a,d,g,e){return c(a,d,g,b,e)};h.whenDefined=function(a,b,c,e){return d(a,b,c,g,e)};h.whenDefinedOnce=function(a,b,d,e){return c(a,b,d,g,e)};h.whenUndefined=function(a,b,c,g){return d(a,b,c,q,g)};h.whenUndefinedOnce=function(a,b,d,g){return c(a,b,d,q,g)};h.pausable=function(a,b,c,d){var g=!1;return{remove:a.watch(b,function(b,d,e,l){g||c.call(a,b,d,e,l)},d).remove,pause:function(){g=!0},resume:function(){g=!1}}};h.on=function(a,b,c,d,g,k,e){function l(){n&&(k&&k(f,
b,a,c),n.remove(),n=null,f=null)}var f=null,n=null,p=t(a,b,function(k){l();k&&k.on&&(f=k,n=k.on(c,d),g&&g(f,b,a,c))},e);return{remove:function(){p.remove();l()}}}})},"esri/layers/support/Tilemap":function(){define("require exports dojo/_base/lang ../../request ../../core/lang ../../core/Error".split(" "),function(a,h,m,f,d,c){function n(a){var c=a.service.tileServers,c=(c&&c.length?c[a.row%c.length]:a.service.url)+"/tilemap/"+a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height;a=a.service.query;
return a&&(c=c+"?"+a),c}Object.defineProperty(h,"__esModule",{value:!0});a=function(){function a(){this.location={left:0,top:0,width:0,height:0};this.byteSize=40}return a.prototype.getAvailability=function(a,b){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";a=(a-this.location.top)*this.location.width+(b-this.location.left);b=a>>3;var c=this._tileAvailabilityBitSet;return 0>b||b>c.length?"unknown":c[b]&1<<a%8?"available":"unavailable"},a.prototype._updateFromData=
function(a){for(var b=!0,c=!0,d=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),e=0,l=0;l<a.length;l++){var f=l%8;a[l]?(c=!1,d[e]|=1<<f):b=!1;7===f&&++e}this._isAllUnvailable=c;(this._isAllAvailable=b)||this._isAllUnvailable||(this._tileAvailabilityBitSet=d,this.byteSize+=d.length)},a.fromDefinition=function(d,b){var g=d.service.request||f,e=d.row,l=d.col,h=d.width,v=d.height,r={failOk:!0,callbackParamName:"callback"};return b=b?m.mixin(r,b):r,g(n(d),b).then(function(b){var d=
b.data;if(d.location&&(d.location.top!==e||d.location.left!==l||d.location.width!==h||d.location.height!==v))throw new c("tilemap:location-mismatch","Tilemap response for different location than requested",{response:d,definition:{top:e,left:l,width:h,height:v}});return a.fromJSON(b.data)})},a.fromJSON=function(c){a.validateJSON(c);var b=new a;return b.location=Object.freeze(d.clone(c.location)),b._updateFromData(c.data),Object.freeze(b)},a.validateJSON=function(a){if(!a||!a.location)throw new c("tilemap:missing-location",
"Location missing from tilemap response");if(!a.valid)throw new c("tilemap:invalid","Tilemap response was marked as invalid");if(!a.data)throw new c("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(a.data))throw new c("tilemap:data-mismatch","Data must be an array of numbers");if(a.data.length!==a.location.width*a.location.height)throw new c("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");},a}();h.Tilemap=a;h.tilemapDefinitionId=
function(a){return a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height};h.tilemapDefinitionUrl=n;h["default"]=a})},"esri/layers/mixins/OperationalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/MultiOriginJSONSupport ../../core/Error ../../core/urlUtils ../../core/accessorSupport/read".split(" "),function(a,h,m,f,d,c,n,e,l,b){a=function(a){function c(){var b=
null!==a&&a.apply(this,arguments)||this;return b.title="Layer",b}return m(c,a),c.prototype.writeListMode=function(a,b){a&&(b.listMode=a)},c.prototype.writeTitle=function(a,b){b.title=a||"Layer"},c.prototype.writeUrl=function(a,b){a&&l.isProtocolRelative(a)&&(a="https:"+a);b.url=a?l.normalize(a):a},c.prototype.writeOperationalLayerType=function(a,b){a&&(b.layerType=a)},c.prototype.readOpacity=function(a,b,c){return void 0===b.opacity||c&&"web-map"!==c.origin&&"web-scene"!==c.origin?c&&"service"!==
c.origin||!b.drawingInfo||void 0===b.drawingInfo.transparency?b.layerDefinition&&b.layerDefinition.drawingInfo&&void 0!==b.layerDefinition.drawingInfo.transparency?1-b.layerDefinition.drawingInfo.transparency/100:void 0:1-b.drawingInfo.transparency/100:b.opacity},c.prototype.readVisible=function(a,b){return!!b.visibility},c.prototype.read=function(a,c){var d=this,g=arguments;return c&&(c.layer=this),b.readLoadable(this,a,function(b){return d.inherited(g,[a,b])},c),this},c.prototype.write=function(a,
b){if(b&&b.origin){var c=b.origin+"/"+(b.layerContainerType||"operational-layers"),d=q[c];if(d&&!d[this.operationalLayerType])return b.messages&&b.messages.push(new e("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+c+"'",{layer:this})),null;if(!this.url&&!g[this.operationalLayerType])return b.messages&&b.messages.push(new e("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to a '"+
b.origin+"'",{layer:this})),null}return this.inherited(arguments,[a,b])},c}(d.declared(c,n));f([d.property({json:{write:{ignoreOrigin:!0}}})],a.prototype,"id",void 0);f([d.property()],a.prototype,"listMode",void 0);f([d.writer("listMode")],a.prototype,"writeListMode",null);f([d.property({json:{write:{ignoreOrigin:!0,allowNull:!0}}})],a.prototype,"title",void 0);f([d.writer("title")],a.prototype,"writeTitle",null);f([d.property({json:{write:{ignoreOrigin:!0}}})],a.prototype,"url",void 0);f([d.writer("url")],
a.prototype,"writeUrl",null);f([d.property({json:{write:{target:"layerType",ignoreOrigin:!0}}})],a.prototype,"operationalLayerType",void 0);f([d.writer("operationalLayerType")],a.prototype,"writeOperationalLayerType",null);f([d.property({json:{write:{ignoreOrigin:!0}}})],a.prototype,"opacity",void 0);f([d.reader("opacity",["opacity","layerDefinition.drawingInfo.transparency","drawingInfo.transparency"])],a.prototype,"readOpacity",null);f([d.property({json:{write:{target:"visibility",ignoreOrigin:!0}}})],
a.prototype,"visible",void 0);f([d.reader("visible",["visibility"])],a.prototype,"readVisible",null);a=f([d.subclass("esri.layers.mixins.OperationalLayer")],a);var g={GroupLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,ArcGISFeatureLayer:!0,CSV:!0,VectorTileLayer:!0},q={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,GroupLayer:!0,
IntegratedMeshLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,VectorTileLayer:!0},"web-scene/basemap":{ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0},"web-map/operational-layers":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,
ArcGSFeatureLayer:!0,CSV:!0,GeoRSS:!0,KML:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,bingLayer:!0}};return a})},"esri/layers/mixins/PortalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Error ../../core/Logger ../../core/requireUtils ../../core/promiseUtils ../../core/urlUtils ../../portal/PortalItem ../../portal/Portal".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t){var w=e.getLogger("esri.layers.Layer");h=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return m(d,c),Object.defineProperty(d.prototype,"portalItem",{set:function(a){a!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",a))},enumerable:!0,configurable:!0}),d.prototype.writePortalItem=function(a,b){a&&a.id&&(b.itemId=a.id)},d.prototype.loadFromPortal=function(c){var d=this;return this.portalItem&&this.portalItem.id?
l.when(a,"../../portal/support/layersLoader").then(function(a){return a.load({instance:d,supportedTypes:c.supportedTypes,validateItem:c.validateItem,supportsData:c.supportsData}).otherwise(function(a){throw w.warn("Failed to load layer ("+d.title+", "+d.id+") portal item ("+d.portalItem.id+")\n  "+a),a;})}):b.resolve()},d.prototype.read=function(a,b){return b&&(b.layer=this),this.inherited(arguments)},d.prototype.write=function(a,b){var c=b&&b.portal,d=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||
t.getDefault());return c&&d&&!g.hasSamePortal(d.restUrl,c.restUrl)?(b.messages&&b.messages.push(new n("layer:cross-portal","The layer '"+this.title+" ("+this.id+")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer",{layer:this})),null):this.inherited(arguments)},d}(d.declared(c));return f([d.property({type:q})],h.prototype,
"portalItem",null),f([d.writer("portalItem")],h.prototype,"writePortalItem",null),h=f([d.subclass("esri.layers.mixins.PortalLayer")],h)})},"esri/layers/support/rasterFormats/LercCodec":function(){define([],function(){var a={defaultNoDataValue:-3.4027999387901484E38,decode:function(m,f){var d;f=f||{};var c=f.inputOffset||0,n=f.encodedMaskData||null===f.encodedMaskData,e={},l=new Uint8Array(m,c,10);if(e.fileIdentifierString=String.fromCharCode.apply(null,l),"CntZImage"!=e.fileIdentifierString.trim())throw"Unexpected file identifier string: "+
e.fileIdentifierString;c+=10;l=new DataView(m,c,24);if(e.fileVersion=l.getInt32(0,!0),e.imageType=l.getInt32(4,!0),e.height=l.getUint32(8,!0),e.width=l.getUint32(12,!0),e.maxZError=l.getFloat64(16,!0),c+=24,!n)if(l=new DataView(m,c,16),e.mask={},e.mask.numBlocksY=l.getUint32(0,!0),e.mask.numBlocksX=l.getUint32(4,!0),e.mask.numBytes=l.getUint32(8,!0),e.mask.maxValue=l.getFloat32(12,!0),c+=16,0<e.mask.numBytes){var n=new Uint8Array(Math.ceil(e.width*e.height/8)),l=new DataView(m,c,e.mask.numBytes),
b=l.getInt16(0,!0),g=2,q=0;do{if(0<b)for(;b--;)n[q++]=l.getUint8(g++);else for(var t=l.getUint8(g++),b=-b;b--;)n[q++]=t;b=l.getInt16(g,!0);g+=2}while(g<e.mask.numBytes);if(-32768!==b||q<n.length)throw"Unexpected end of mask RLE encoding";e.mask.bitset=n;c+=e.mask.numBytes}else 0===(e.mask.numBytes|e.mask.numBlocksY|e.mask.maxValue)&&(n=new Uint8Array(Math.ceil(e.width*e.height/8)),e.mask.bitset=n);l=new DataView(m,c,16);e.pixels={};e.pixels.numBlocksY=l.getUint32(0,!0);e.pixels.numBlocksX=l.getUint32(4,
!0);e.pixels.numBytes=l.getUint32(8,!0);e.pixels.maxValue=l.getFloat32(12,!0);c+=16;n=e.pixels.numBlocksX;l=e.pixels.numBlocksY;n+=0<e.width%n?1:0;b=l+(0<e.height%l?1:0);e.pixels.blocks=Array(n*b);g=1E9;for(t=q=0;b>t;t++)for(var w=0;n>w;w++){var v=0,l=new DataView(m,c,Math.min(10,m.byteLength-c)),r={};e.pixels.blocks[q++]=r;var p=l.getUint8(0);if(v++,r.encoding=63&p,3<r.encoding)throw"Invalid block encoding ("+r.encoding+")";if(2!==r.encoding){if(0!==p&&2!==p){if(p>>=6,r.offsetType=p,2===p)r.offset=
l.getInt8(1),v++;else if(1===p)r.offset=l.getInt16(1,!0),v+=2;else{if(0!==p)throw"Invalid block offset type";r.offset=l.getFloat32(1,!0);v+=4}if(g=Math.min(r.offset,g),1===r.encoding)if(p=l.getUint8(v),v++,r.bitsPerPixel=63&p,p>>=6,r.numValidPixelsType=p,2===p)r.numValidPixels=l.getUint8(v),v++;else if(1===p)r.numValidPixels=l.getUint16(v,!0),v+=2;else{if(0!==p)throw"Invalid valid pixel count type";r.numValidPixels=l.getUint32(v,!0);v+=4}}if(c+=v,3!=r.encoding)if(0===r.encoding){l=(e.pixels.numBytes-
1)/4;if(l!==Math.floor(l))throw"uncompressed block has invalid length";v=new ArrayBuffer(4*l);p=new Uint8Array(v);p.set(new Uint8Array(m,c,4*l));v=new Float32Array(v);for(p=0;p<v.length;p++)g=Math.min(g,v[p]);r.rawData=v;c+=4*l}else 1===r.encoding&&(l=Math.ceil(r.numValidPixels*r.bitsPerPixel/8),v=new ArrayBuffer(4*Math.ceil(l/4)),p=new Uint8Array(v),p.set(new Uint8Array(m,c,l)),r.stuffedData=new Uint32Array(v),c+=l)}else c++,g=Math.min(g,0)}m=(e.pixels.minValue=g,e.eofOffset=c,e);var c=null!=f.noDataValue?
f.noDataValue:a.defaultNoDataValue,n=f.encodedMaskData,r=f.returnMask,l=0,b=m.pixels.numBlocksX,g=m.pixels.numBlocksY,q=Math.floor(m.width/b),t=Math.floor(m.height/g),w=2*m.maxZError,n=n||(m.mask?m.mask.bitset:null),u,e=new (f.pixelType||Float32Array)(m.width*m.height);r&&n&&(u=new Uint8Array(m.width*m.height));for(var k,x,r=new Float32Array(q*t),v=0;g>=v;v++)if(p=v!==g?t:m.height%g,0!==p)for(var B=0;b>=B;B++){var y=B!==b?q:m.width%b;if(0!==y){var z,A,D=v*m.width*t+B*q,F=m.width-y,C=m.pixels.blocks[l];
if(2>C.encoding){if(0===C.encoding)z=C.rawData;else{z=C.stuffedData;A=C.bitsPerPixel;k=C.numValidPixels;x=C.offset;var H=w,I=r,M=m.pixels.maxValue,Q=void 0,K=void 0,G=void 0,N=(1<<A)-1,S=0,J=0,W=Math.ceil((M-x)/H);z[z.length-1]<<=8*(4*z.length-Math.ceil(A*k/8));for(Q=0;k>Q;Q++)(0===J&&(G=z[S++],J=32),J>=A)?(K=G>>>J-A&N,J-=A):(J=A-J,K=(G&N)<<J&N,G=z[S++],J=32-J,K+=G>>>J),I[Q]=W>K?x+K*H:M;z=r}A=0}else d=2===C.encoding?0:C.offset;var L;if(n)for(x=0;p>x;x++){7&D&&(L=n[D>>3],L<<=7&D);for(k=0;y>k;k++)7&
D||(L=n[D>>3]),128&L?(u&&(u[D]=1),e[D++]=2>C.encoding?z[A++]:d):(u&&(u[D]=0),e[D++]=c),L<<=1;D+=F}else if(2>C.encoding)for(x=0;p>x;x++){for(k=0;y>k;k++)e[D++]=z[A++];D+=F}else for(x=0;p>x;x++){for(k=0;y>k;k++)e[D++]=d;D+=F}if(1===C.encoding&&A!==C.numValidPixels)throw"Block and Mask do not match";l++}}d=u;u={width:m.width,height:m.height,pixelData:e,minValue:m.pixels.minValue,maxValue:m.pixels.maxValue,noDataValue:c};d&&(u.maskData=d);f.returnEncodedMask&&m.mask&&(u.encodedMaskData=m.mask.bitset?
m.mask.bitset:null);if(f.returnFileInfo&&(u.fileInfo=h(m),f.computeUsedBitDepths)){f=u.fileInfo;d=m.pixels.numBlocksX*m.pixels.numBlocksY;L={};for(z=0;d>z;z++)A=m.pixels.blocks[z],0===A.encoding?L.float32=!0:1===A.encoding?L[A.bitsPerPixel]=!0:L[0]=!0;d=Object.keys(L);f.bitDepths=d}return u}},h=function(a){return{fileIdentifierString:a.fileIdentifierString,fileVersion:a.fileVersion,imageType:a.imageType,height:a.height,width:a.width,maxZError:a.maxZError,eofOffset:a.eofOffset,mask:a.mask?{numBlocksX:a.mask.numBlocksX,
numBlocksY:a.mask.numBlocksY,numBytes:a.mask.numBytes,maxValue:a.mask.maxValue}:null,pixels:{numBlocksX:a.pixels.numBlocksX,numBlocksY:a.pixels.numBlocksY,numBytes:a.pixels.numBytes,maxValue:a.pixels.maxValue,minValue:a.pixels.minValue,noDataValue:this.noDataValue}}};return a})},"esri/views/MapView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/promise/all ../core/accessorSupport/decorators ../core/HandleRegistry ../core/promiseUtils ./MapViewBase ./DOMContainer ../geometry/ScreenPoint ./ui/2d/DefaultUI2D ./2d/engine/Stage ./2d/layers/support/GraphicsView2D ./2d/input/MapViewInputManager ./2d/navigation/MapViewNavigation ./support/screenshotUtils".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p){a=function(a){function b(b){b=a.call(this,b)||this;return b._graphicsView=null,b._mapViewHandles=new n,b._stage=null,b.inputManager=new v({view:b}),b.navigation=null,b.ui=null,b.rendering=!1,b}return m(b,a),Object.defineProperty(b.prototype,"interacting",{get:function(){return this.navigation&&this.navigation.interacting||!1},enumerable:!0,configurable:!0}),b.prototype.hitTest=function(a,b){if(!this.ready)return null;var c;c=null!=a&&a.x?a:new g({x:a,y:b});
var k=this.toMap(c);a=[this._graphicsView];return a.push.apply(a,this.allLayerViews.toArray().reverse()),d(a.map(function(a){return a&&a.hitTest?a.hitTest(c.x,c.y):null})).then(function(a){return{screenPoint:c,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:k,graphic:a}})}})},b.prototype.takeScreenshot=function(a){return this.ready?(a=p.adjustScreenshotSettings(a,this),this._stage.takeScreenshot(a)):e.reject("Map view cannot be used before it is ready")},b.prototype.on=
function(a,b,c){var d=this.inputManager&&this.inputManager.viewEvents.register(a,b,c);return d?d:this.inherited(arguments)},b.prototype.destroyLayerViews=function(){this.inherited(arguments);this._stage&&(this._stage.destroy(),this._stage=null)},b.prototype._startup=function(){var a=this;this.inherited(arguments);var b=new t(this.surface),c=new w({view:this,graphics:this.graphics}),d=new r({view:this,animationManager:this.animationManager});this._stage=b;this._graphicsView=c;this._set("navigation",
d);this._mapViewHandles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!0===a.rendering}))}),this.watch("stationary",function(a){return b.stationary=a},!0),this.watch("state.viewpoint",function(c){return b.state=a.state},!0)]);b.state=this.state;this._updateStageChildren()},b.prototype._tearDown=function(){this._setup&&(this._graphicsView.destroy(),this._mapViewHandles.removeAll(),
this._stage.destroy(),this.navigation.destroy(),this._stage=null,this._graphicsView=null,this._set("navigation",null),this.inherited(arguments))},b.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(function(a){return null!=a.container}).forEach(function(b,c){a._stage.addChildAt(b.container,c)});this._stage.addChild(this._graphicsView.container)},b}(c.declared(l,b));return f([c.property({readOnly:!0})],a.prototype,"inputManager",void 0),
f([c.property({readOnly:!0})],a.prototype,"navigation",void 0),f([c.property({dependsOn:["navigation.interacting"],type:Boolean})],a.prototype,"interacting",null),f([c.property({type:q})],a.prototype,"ui",void 0),f([c.property({readOnly:!0})],a.prototype,"rendering",void 0),a=f([c.subclass("esri.views.MapView")],a)})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../core/accessorSupport/decorators ../core/HandleRegistry ../core/Logger ../core/promiseUtils ../Viewpoint ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/SpatialReference ../geometry/support/scaleUtils ../geometry/support/webMercatorUtils ./View ./ViewAnimation ./2d/FrameTask ./2d/PaddedViewState ./2d/MapViewConstraints ./2d/AnimationManager ./2d/viewpointUtils".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k,x,B,y,z){var A=e.getLogger("esri.views.MapView");a=function(a){function c(b){var c=a.call(this,b)||this;c._frameTask=new k(c);c._mapViewBaseHandles=new n;c._setup=!1;c.fullOpacity=1;c.interacting=!1;c.initialExtent=null;c.resizeAlign="center";c.type="2d";c.constraints=new B;c.padding={top:0,right:0,bottom:0,left:0};var d=function(){this._set("updating",this.layerViewManager.factory.working||this.allLayerViews.some(function(a){return!0===a.updating}))}.bind(c),
g=c._mapViewBaseHandles;return g.add([c.watch("viewpoint",function(a){return c._flipStationary()},!0),c.on("resize",function(a){return c._resizeHandler(a)}),c.watch("animationManager.animation",function(a){c.animation=a}),c.allLayerViews.on("change",function(){d();g.remove("layerViewsUpdating");g.add(c.allLayerViews.map(function(a){return a.watch("updating",d)}).toArray(),"layerViewsUpdating")})]),c.watch("ready",function(a){a?c._startup():c._tearDown()}),c}return m(c,a),c.prototype.destroy=function(){this.destroyed||
(this._set("ready",!1),this._mapViewBaseHandles.removeAll(),this.layerViewManager.empty(),this._frameTask.destroy(),this._tearDown(),this._gotoTask=this._mapViewBaseHandles=this._frameTask=null)},Object.defineProperty(c.prototype,"animation",{set:function(a){var b=this,c=this._get("animation");if(a!==c){if(c&&c.stop(),!a||a.isFulfilled())return void this._set("animation",null);this._set("animation",a);c=function(){a===b._get("animation")&&(b._set("animation",null),b._frameTask.requestFrame())};a.then(c,
c,function(a){b.state&&(b.state.viewpoint=a)})}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var a=this.content.center;return new g({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a){if(!this._normalizeInput(a))return void A.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference));
if(!this.ready)return this._set("center",a),void this.notifyChange("initialExtentRequired");var b=this.viewpoint;z.centerAt(b,b,a);this.viewpoint=b}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"constraints",{set:function(a){var b=this,c=this._get("constraints");c&&(this._mapViewBaseHandles.remove("constraints"),c.destroy());this._set("constraints",a);a&&(this.ready&&(a.view=this,this.state.viewpoint=a.fit(this.content.viewpoint)),this._mapViewBaseHandles.add(a.on("update",function(){b.ready&&
b.state&&(b.state.viewpoint=a.fit(b.content.viewpoint))}),"constraints"))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"extent",{get:function(){return this.ready?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);if(!b)return void A.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference));if(!b.width||!b.height)return void A.error("#extent",
"invalid extent size");if(!this.ready)return this._set("extent",b),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");a=this.viewpoint;z.setExtent(a,a,b,this.size,{constraints:this.constraints});this.viewpoint=a}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,c=this.scale,d=this.viewpoint,k=this.zoom;return this.get("map.initialViewProperties.viewpoint")?
!1:a?!1:!b||0===c&&-1===k?d?!1:!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){return this.ready?(this.state.padding=a,void this._set("padding",this.state.padding)):void this._set("padding",a)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rotation",{get:function(){return this.ready?this.content.rotation:this._get("rotation")},set:function(a){if(!isNaN(a)){if(!this.ready)return void this._set("rotation",
a);var b=this.viewpoint;z.rotateTo(b,b,a);this.viewpoint=b}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"scale",{get:function(){return this.ready?this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a)){if(!this.ready)return this._set("scale",a),this._set("zoom",-1),a=this._get("extent"),a&&(this._set("extent",null),this._set("center",a.center)),void this.notifyChange("initialExtentRequired");var b=this.viewpoint;z.scaleTo(b,b,a);this.viewpoint=b}},enumerable:!0,
configurable:!0}),Object.defineProperty(c.prototype,"stationary",{get:function(){return!(this.animation||this.interacting||this._get("resizing")||this._stationaryTimer)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"viewpoint",{get:function(){return this.ready?this.content.viewpoint.clone():this._get("viewpoint")},set:function(a){if(null!=a){var b=this._normalizeInput(a);if(!b)return void(!a.scale||isNaN(a.scale)?A.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?
A.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):A.error("#viewpoint","geometry not defined"));if(!this.ready)return this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");a=z.create();z.copy(a,b);this.constraints.constrain(a,this.content.viewpoint);this.state.viewpoint=
a;this._frameTask.requestFrame();this._set("viewpoint",a)}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"zoom",{get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&(b=this.viewpoint,z.scaleTo(b,
b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0}),c.prototype.goTo=function(a,b){if(!this.ready)return void A.error("#goTo()","MapView cannot be used before it is ready");b=d.mixin({animate:!0},b);a=z.createAsync(a,this);return this._gotoTask={},b.animate?this._gotoAnimated(a,b):this._gotoImmediate(a,b)},c.prototype.hitTest=function(a,b){return l.reject("Should be implemented by subclasses")},c.prototype.toMap=
function(a,b,c){if(!this.ready)return null;a&&null!=a.x&&(c=b,b=a.y,a=a.x);var d=[0,0];return this.state.toMap(d,[a,b]),c=c||new g,c.x=d[0],c.y=d[1],c.spatialReference=this.spatialReference,c},c.prototype.isTileInfoRequired=function(){return!0},c.prototype.toScreen=function(a,b,c,d){if(!this.ready)return null;a&&null!=a.x&&(d=b,b=a.y,a=a.x);d=c||d||new q;a=[a,b];return this.state.toScreen(a,a),d.x=a[0],d.y=a[1],d},c.prototype.pixelSizeAt=function(a,b){return this.ready?(a&&null!=a.x&&(b=a.y,a=a.x),
this.content.pixelSizeAt([a,b])):NaN},c.prototype.requestLayerViewUpdate=function(a){this.ready&&this._frameTask.requestLayerViewUpdate(a)},c.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null},c.prototype.isSpatialReferenceSupported=function(a,b){if(b||this._get("ready"))return!0;b=this._normalizeInput(this._get("center"),a);var c=this._normalizeInput(this._get("extent"),a),d=this._normalizeInput(this._get("viewpoint"),
a),k=this._userSpatialReference,g=null,e=null;(d=d&&d.targetGeometry)&&("extent"===d.type?g=d:"point"===d.type&&(e=d));d=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"),a);a=this._normalizeInput(this.initialExtent,a);a=c||g||d||a;return b||e||a&&a.center?!0:(k&&A.error("The view could not be initialized with the spatialReference "+k.wkid+".","Try specifying an extent or a center and scale"),!1)},c.prototype._gotoImmediate=function(a,b){var c=this,d=this._gotoTask;
return!this.animation||"running"!==this.animation.state&&"waiting-for-target"!==this.animation.state?this.animation=new u({target:a}):this.animation.target=a,a.then(function(a){d===c._gotoTask&&(c.viewpoint=c.animation.target=a,c.animation.finish())}),this.animation},c.prototype._gotoAnimated=function(a,b){var c=this;!this.animation||"running"!==this.animation.state&&"waiting-for-target"!==this.animation.state?this.animation=new u({target:a}):this.animation.target=a;var d=this.animation;return d.state=
"waiting-for-target",a.then(function(k){d.target===a&&c.animation===d&&(d.target=k,d.state="running",c.animationManager.animate(d,c.viewpoint,b),d.state===u.State.STOPPED&&d.stop())}).otherwise(function(){d.target===a&&c.animation===d&&(c.animation=null,d.finish())}),d},c.prototype._resizeHandler=function(a){var b=this.state;if(b){var c=this.content.viewpoint,d=this.content.size.concat();b.size=[a.width,a.height];z.resize(c,c,d,this.content.size,this.resizeAlign);c=this.constraints.constrain(c,null);
this.state.viewpoint=c}},c.prototype._startup=function(){if(!this._setup){this._setup=!0;var a=this.constraints,c=this._get("zoom"),d=this._get("scale"),k=this._normalizeInput(this._get("center")),g=this._normalizeInput(this._get("extent")),e=this._get("rotation"),l=this._normalizeInput(this._get("viewpoint"));a.view=this;a.effectiveLODs?-1!==c&&(d=a.zoomToScale(c)):c=-1;var f=null,n=null,p=0,c=l&&l.rotation,h=l&&l.targetGeometry;h&&("extent"===h.type?f=h:"point"===h.type&&(n=h,p=l.scale));l=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));
h=this._normalizeInput(this.initialExtent);g=g||f||l||h;k=k||n||g&&g.center;d=d||p||g&&v.getScale({width:this.size[0]},g);e=new b({targetGeometry:k,scale:d,rotation:e||c||0});a.fit(e);this._set("animationManager",new y);this._set("state",new x({padding:this._get("padding"),size:this.size,viewpoint:e}));this._set("content",this.state.content)}},c.prototype._tearDown=function(){this._setup&&(this._setup=!1,this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary")),
this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this._set("content",null),this.animation=null)},c.prototype._flipStationary=function(){var a=this;this._stationaryTimer&&clearTimeout(this._stationaryTimer);this._stationaryTimer=setTimeout(function(){a._stationaryTimer=null;a.notifyChange("stationary")},160);this.notifyChange("stationary")},c.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var c=a&&a.targetGeometry||
a;return b?c?b.equals(c.spatialReference)?a:r.canProject(c,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=r.project(c,b),a):r.project(c,b):null:null:a},c}(c.declared(p));return f([c.property()],a.prototype,"animation",null),f([c.property({readOnly:!0})],a.prototype,"animationManager",void 0),f([c.property({value:null,type:g,dependsOn:["content.center"]})],a.prototype,"center",null),f([c.property({type:B})],a.prototype,"constraints",null),f([c.property({readOnly:!0})],a.prototype,"content",
void 0),f([c.property({value:null,type:t,dependsOn:["content.extent"]})],a.prototype,"extent",null),f([c.property()],a.prototype,"fullOpacity",void 0),f([c.property({readOnly:!0})],a.prototype,"interacting",void 0),f([c.property({type:t})],a.prototype,"initialExtent",void 0),f([c.property({dependsOn:["map.initialViewProperties.viewpoint"]})],a.prototype,"initialExtentRequired",null),f([c.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return d.mixin({top:0,right:0,bottom:0,left:0},
a)}})],a.prototype,"padding",null),f([c.property()],a.prototype,"resizeAlign",void 0),f([c.property({value:0,type:Number,dependsOn:["content.rotation"]})],a.prototype,"rotation",null),f([c.property({value:0,type:Number,dependsOn:["content.scale"]})],a.prototype,"scale",null),f([c.property({type:w,dependsOn:["map.initialViewProperties.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],a.prototype,"spatialReference",void 0),f([c.property({readOnly:!0})],a.prototype,"state",void 0),f([c.property()],
a.prototype,"stationary",null),f([c.property({readOnly:!0})],a.prototype,"type",void 0),f([c.property({value:null,type:b,dependsOn:["content.viewpoint"]})],a.prototype,"viewpoint",null),f([c.property({value:-1,dependsOn:["content.scale"]})],a.prototype,"zoom",null),a=f([c.subclass("esri.views.MapViewBase")],a)})},"esri/Viewpoint":function(){define(["./core/JSONSupport","./Camera","./core/lang","./geometry/support/jsonUtils"],function(a,h,m,f){var d=a.createSubclass({declaredClass:"esri.Viewpoint",
properties:{rotation:{value:0,cast:function(a){return a%=360,0>a&&(a+=360),a}},scale:0,targetGeometry:{value:null,json:{read:function(a){return f.fromJSON(a)}}},camera:{value:null,type:h}},toJSON:function(){var a={scale:this.scale,rotation:this.rotation,targetGeometry:this.targetGeometry?this.targetGeometry.toJSON():void 0,camera:this.camera?this.camera.toJSON():void 0};return a.camera&&delete a.camera.fov,m.fixJson(a)},clone:function(){return new d({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?
this.targetGeometry.clone():null,camera:this.camera?this.camera.clone():null})}});return d})},"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/lang ./geometry/Point ./views/3d/support/mathUtils ./core/accessorSupport/decorators".split(" "),function(a,h,m,f,d,c,n,e,l){a=b=function(a){function d(b){b=a.call(this)||this;return b.position=null,b.heading=0,b.tilt=0,b.fov=55,b}return m(d,a),d.prototype.getDefaults=
function(a){return a.position?void 0:{position:new n([0,0,0])}},d.prototype.normalizeCtorArgs=function(a,b,c,d){return a&&"object"==typeof a&&("x"in a||Array.isArray(a))?(a={position:a},null!=b&&(a.heading=b),null!=c&&(a.tilt=c),null!=d&&(a.fov=d),a):a},d.prototype.equals=function(a){return a?this.tilt===a.tilt&&this.heading===a.heading&&this.fov===a.fov&&this.position.equals(a.position):!1},d.prototype.clone=function(){return new b({position:this.position.clone(),heading:this.heading,tilt:this.tilt,
fov:this.fov})},d.prototype.toJSON=function(){var a={position:this.position.toJSON(),heading:this.heading,tilt:this.tilt};return c.fixJson(a)},d}(l.declared(d));f([l.property({type:n})],a.prototype,"position",void 0);f([l.property(),l.cast(e.cyclicalDeg.normalize)],a.prototype,"heading",void 0);f([l.property(),l.cast(function(a){return e.clamp(a,-180,180)})],a.prototype,"tilt",void 0);f([l.property({json:{read:!1,write:!1}})],a.prototype,"fov",void 0);a=b=f([l.subclass("esri.Camera")],a);var b;return a})},
"esri/views/3d/support/mathUtils":function(){define(["require","exports","../lib/glMatrix"],function(a,h,m){function f(a){return Math.acos(1<a?1:-1>a?-1:a)}function d(a,b,c){return b>a?b:a>c?c:a}function c(a){for(var b in a){var c=a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(h,"__esModule",{value:!0});h.deg2rad=function(a){return a*Math.PI/180};h.rad2deg=function(a){return 180*a/Math.PI};h.asin=function(a){return Math.asin(1<a?1:-1>a?-1:a)};h.acos=f;h.log2=Math.log2||
function(a){return Math.log(a)/Math.LN2};h.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};h.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};h.lerp=function(a,b,c){return a+(b-a)*c};h.bilerp=function(a,b,c,d,e,l){a+=(b-a)*e;return a+(c+(d-c)*e-a)*l};h.slerp=function(a,b,c,d){void 0===d&&(d=a);var g=m.vec3d.length(a),l=m.vec3d.length(b),f=m.vec3d.dot(a,b)/g/l;.999999999999>f&&(m.vec3d.cross(a,b,n),m.mat4d.identity(e),m.mat4d.rotate(e,c*Math.acos(f),n),m.mat4d.multiplyVec3(e,
a,d));return m.vec3d.scale(d,((1-c)*g+c*l)/g),d};h.slerpOrLerp=function(a,b,c,d,l){var g=m.vec3d.length(a),f=m.vec3d.length(b);(m.vec3d.cross(a,b,n),m.vec3d.length(n)/g/f>l)?(b=Math.acos(m.vec3d.dot(a,b)/g/f),m.mat4d.identity(e),m.mat4d.rotate(e,c*b,n),m.mat4d.multiplyVec3(e,a,d),m.vec3d.scale(d,((1-c)*g+c*f)/g)):m.vec3d.lerp(a,b,c,d);return d};h.angle=function(a,c,d){a=m.vec3d.normalize(a,l);c=m.vec3d.normalize(c,b);var g=f(m.vec3d.dot(a,c));return d&&(a=m.vec3d.cross(a,c,n),0>m.vec3d.dot(a,d))?
-g:g};h.clamp=d;h.isFinite=Number.isFinite||function(a){return"number"==typeof a&&window.isFinite(a)};h.isNaN=Number.isNaN||function(a){return a!==a};h.makePiecewiseLinearFunction=function(a){var b=a.length;return function(c){var d=0;if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(;c>a[d][0];)d++;var g=a[d][0];c=(g-c)/(g-a[d-1][0]);return c*a[d-1][1]+(1-c)*a[d][1]}};h.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==
b[c])return!1;return!0};h.floatEqualRelative=function(a,b,c){if(void 0===c&&(c=1E-6),h.isNaN(a)||h.isNaN(b))return!1;if(a===b)return!0;var d=Math.abs(a-b),g=Math.abs(a),e=Math.abs(b);if(0===a||0===b||1E-12>g&&1E-12>e){if(d>.01*c)return!1}else if(d/(g+e)>c)return!1;return!0};h.floatEqualAbsolute=function(a,b,c){return(void 0===c&&(c=1E-6),h.isNaN(a)||h.isNaN(b))?!1:c>=(a>b?a-b:b-a)};a=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}return a.prototype.ndiff=function(a,b){return void 0===
b&&(b=0),Math.ceil((a-b)/this.range)*this.range+b},a.prototype._normalize=function(a,b,c,d){return void 0===d&&(d=0),c-=d,a>c?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b)),c+d},a.prototype.normalize=function(a,b){return this._normalize(this.min,this.max,a,b)},a.prototype.clamp=function(a,b){return void 0===b&&(b=0),d(a-b,this.min,this.max)+b},a.prototype.monotonic=function(a,b,c){return b>a?b:b+this.ndiff(a-b,c)},a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,
c)},a.prototype.center=function(a,b,c){return b=this.monotonic(a,b,c),this.normalize((a+b)/2,c)},a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a},a.prototype.contains=function(a,b,c){return b=this.minimalMonotonic(a,b),c=this.minimalMonotonic(a,c),c>a&&b>c},a}();h.Cyclical=a;h.cyclical2PI=c(new a(0,2*Math.PI));h.cyclicalPI=c(new a(-Math.PI,Math.PI));h.cyclicalDeg=c(new a(0,360));var n=m.vec3d.create(),e=m.mat4d.create(),l=m.vec3d.create(),b=m.vec3d.create()})},"esri/views/3d/lib/glMatrix":function(){define([],
function(){var a={};return function(a,m){m(a,!0);m(a,!1)}(a,function(a,m){var f={};!function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),b=new Int32Array(a.buffer);f.invsqrt=function(c){a[0]=c;b[0]=1597463007-(b[0]>>1);var d=a[0];return d*(1.5-.5*c*d*d)}}else f.invsqrt=function(a){return 1/Math.sqrt(a)}}();var d=Array;"undefined"!=typeof Float32Array&&(d=m?Float32Array:Array);var c={create:function(a){var b=new d(3);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0,b},
createFrom:function(a,b,c){var k=new d(3);return k[0]=a,k[1]=b,k[2]=c,k},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},set3:function(a,b,c,d){return d[0]=a,d[1]=b,d[2]=c,d},add:function(a,b,c){return c&&a!==c?(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c):(a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a)},subtract:function(a,b,c){return c&&a!==c?(c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c):(a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a)},multiply:function(a,b,c){return c&&a!==c?(c[0]=a[0]*b[0],c[1]=a[1]*
b[1],c[2]=a[2]*b[2],c):(a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a)},max:function(a,b,c){return c[0]=Math.max(a[0],b[0]),c[1]=Math.max(a[1],b[1]),c[2]=Math.max(a[2],b[2]),c},min:function(a,b,c){return c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b},scale:function(a,b,c){return c&&a!==c?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c):(a[0]*=b,a[1]*=b,a[2]*=b,a)},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1];
a=a[2];var k=Math.sqrt(c*c+d*d+a*a);return k?1===k?(b[0]=c,b[1]=d,b[2]=a,b):(k=1/k,b[0]=c*k,b[1]=d*k,b[2]=a*k,b):(b[0]=0,b[1]=0,b[2]=0,b)},cross:function(a,b,c){c||(c=a);var d=a[0],k=a[1];a=a[2];var g=b[0],e=b[1];b=b[2];return c[0]=k*b-a*e,c[1]=a*g-d*b,c[2]=d*e-k*g,c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var d=
a[0]-b[0],k=a[1]-b[1];a=a[2]-b[2];return(b=Math.sqrt(d*d+k*k+a*a))?(b=1/b,c[0]=d*b,c[1]=k*b,c[2]=a*b,c):(c[0]=0,c[1]=0,c[2]=0,c)},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d},dist:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+d*d+a*a)},dist2:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return c*c+d*d+a*a}},n=null,e=new d(4);c.unproject=function(a,b,c,d,g){g||(g=a);n||(n=v.create());var k=n;return e[0]=
2*(a[0]-d[0])/d[2]-1,e[1]=2*(a[1]-d[1])/d[3]-1,e[2]=2*a[2]-1,e[3]=1,v.multiply(c,b,k),v.inverse(k)?(v.multiplyVec4(k,e),0===e[3]?null:(g[0]=e[0]/e[3],g[1]=e[1]/e[3],g[2]=e[2]/e[3],g)):null};var l=c.createFrom(1,0,0),b=c.createFrom(0,1,0),g=c.createFrom(0,0,1);c.rotationTo=function(a,d,e){e||(e=r.create());var k=c.dot(a,d),f=c.create();if(1<=k)r.set(p,e);else if(-.999999>k)c.cross(l,a,f),1E-6>f.length&&c.cross(b,a,f),1E-6>f.length&&c.cross(g,a,f),c.normalize(f),r.fromAxisAngle(f,Math.PI,e);else{var k=
Math.sqrt(2*(1+k)),n=1/k;c.cross(a,d,f);e[0]=f[0]*n;e[1]=f[1]*n;e[2]=f[2]*n;e[3]=.5*k;r.normalize(e)}return 1<e[3]?e[3]=1:-1>e[3]&&(e[3]=-1),e};var h=c.create(),t=c.create();c.project=function(a,b,d,g){g||(g=a);c.direction(b,d,h);c.subtract(a,b,t);a=c.dot(h,t);c.scale(h,a,g);c.add(g,b,g)};c.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var w={create:function(a){var b=new d(9);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=
b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0,b},createFrom:function(a,b,c,g,e,l,f,n,p){var k=new d(9);return k[0]=a,k[1]=b,k[2]=c,k[3]=g,k[4]=e,k[5]=l,k[6]=f,k[7]=n,k[8]=p,k},determinant:function(a){var b=a[3],c=a[4],d=a[5],k=a[6],g=a[7],e=a[8];return a[0]*(e*c-d*g)+a[1]*(-e*b+d*k)+a[2]*(g*b-c*k)},inverse:function(a,b){var c,d=a[0],k=a[1],g=a[2],e=a[3],l=a[4],f=a[5],n=a[6],p=a[7];a=a[8];var h=a*l-f*p,x=-a*e+f*n,m=p*e-l*n,q=d*h+k*x+g*m;return q?(c=1/q,b||(b=w.create()),b[0]=h*c,b[1]=(-a*k+g*p)*c,b[2]=(f*k-g*l)*
c,b[3]=x*c,b[4]=(a*d-g*n)*c,b[5]=(-f*d+g*e)*c,b[6]=m*c,b[7]=(-p*d+k*n)*c,b[8]=(l*d-k*e)*c,b):null},multiply:function(a,b,c){c||(c=a);var d=a[0],k=a[1],g=a[2],e=a[3],l=a[4],f=a[5],n=a[6],p=a[7];a=a[8];var h=b[0],x=b[1],m=b[2],q=b[3],u=b[4],r=b[5],t=b[6],w=b[7];b=b[8];return c[0]=h*d+x*e+m*n,c[1]=h*k+x*l+m*p,c[2]=h*g+x*f+m*a,c[3]=q*d+u*e+r*n,c[4]=q*k+u*l+r*p,c[5]=q*g+u*f+r*a,c[6]=t*d+w*e+b*n,c[7]=t*k+w*l+b*p,c[8]=t*g+w*f+b*a,c},add:function(a,b,c){return c||(c=a),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=
a[2]+b[2],c[3]=a[3]+b[3],c[4]=a[4]+b[4],c[5]=a[5]+b[5],c[6]=a[6]+b[6],c[7]=a[7]+b[7],c[8]=a[8]+b[8],c},subtract:function(a,b,c){return c||(c=a),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],c[4]=a[4]-b[4],c[5]=a[5]-b[5],c[6]=a[6]-b[6],c[7]=a[7]-b[7],c[8]=a[8]-b[8],c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];return c[0]=d*a[0]+b*a[3]+a[6],c[1]=d*a[1]+b*a[4]+a[7],c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],k=b[1];b=b[2];return c[0]=d*a[0]+k*a[3]+b*a[6],c[1]=d*a[1]+
k*a[4]+b*a[7],c[2]=d*a[2]+k*a[5]+b*a[8],c},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},identity:function(a){return a||(a=w.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],d=a[5];return a[1]=a[3],a[2]=a[6],a[3]=b,a[5]=a[7],a[6]=c,a[7]=d,a}return b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8],b},toMat4:function(a,
b){return b||(b=v.create()),b[15]=1,b[14]=0,b[13]=0,b[12]=0,b[11]=0,b[10]=a[8],b[9]=a[7],b[8]=a[6],b[7]=0,b[6]=a[5],b[5]=a[4],b[4]=a[3],b[3]=0,b[2]=a[2],b[1]=a[1],b[0]=a[0],b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},v={create:function(a){var b=new d(16);return 4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],
b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]),b},createFrom:function(a,b,c,g,e,l,f,n,p,h,m,q,u,r,t,w){var k=new d(16);return k[0]=a,k[1]=b,k[2]=c,k[3]=g,k[4]=e,k[5]=l,k[6]=f,k[7]=n,k[8]=p,k[9]=h,k[10]=m,k[11]=q,k[12]=
u,k[13]=r,k[14]=t,k[15]=w,k},createFromMatrixRowMajor:function(a){var b=new d(16);return b[0]=a[0],b[4]=a[1],b[8]=a[2],b[12]=a[3],b[1]=a[4],b[5]=a[5],b[9]=a[6],b[13]=a[7],b[2]=a[8],b[6]=a[9],b[10]=a[10],b[14]=a[11],b[3]=a[12],b[7]=a[13],b[11]=a[14],b[15]=a[15],b},createFromMatrix:function(a){var b=new d(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},set:function(a,
b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},setRowMajor:function(a,b){return b[0]=a[0],b[4]=a[1],b[8]=a[2],b[12]=a[3],b[1]=a[4],b[5]=a[5],b[9]=a[6],b[13]=a[7],b[2]=a[8],b[6]=a[9],b[10]=a[10],b[14]=a[11],b[3]=a[12],b[7]=a[13],b[11]=a[14],b[15]=a[15],b},identity:function(a){return a||(a=v.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,
a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],d=a[3],k=a[6],g=a[7],e=a[11];return a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=b,a[6]=a[9],a[7]=a[13],a[8]=c,a[9]=k,a[11]=a[14],a[12]=d,a[13]=g,a[14]=e,a}return b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15],b},determinant:function(a){var b=a[0],c=a[1],d=a[2],k=a[3],g=
a[4],e=a[5],l=a[6],f=a[7],n=a[8],p=a[9],h=a[10],m=a[11],q=a[12],u=a[13],r=a[14];a=a[15];return q*p*l*k-n*u*l*k-q*e*h*k+g*u*h*k+n*e*r*k-g*p*r*k-q*p*d*f+n*u*d*f+q*c*h*f-b*u*h*f-n*c*r*f+b*p*r*f+q*e*d*m-g*u*d*m-q*c*l*m+b*u*l*m+g*c*r*m-b*e*r*m-n*e*d*a+g*p*d*a+n*c*l*a-b*p*l*a-g*c*h*a+b*e*h*a},inverse:function(a,b){b||(b=a);var c,d=a[0],k=a[1],g=a[2],e=a[3],l=a[4],f=a[5],n=a[6],p=a[7],h=a[8],m=a[9],q=a[10],x=a[11],u=a[12],r=a[13],t=a[14];a=a[15];var w=d*f-k*l,v=d*n-g*l,P=d*p-e*l,Y=k*n-g*f,ba=k*p-e*f,V=g*
p-e*n,X=h*r-m*u,ca=h*t-q*u,Z=h*a-x*u,ia=m*t-q*r,fa=m*a-x*r,ka=q*a-x*t,na=w*ka-v*fa+P*ia+Y*Z-ba*ca+V*X;return na?(c=1/na,b[0]=(f*ka-n*fa+p*ia)*c,b[1]=(-k*ka+g*fa-e*ia)*c,b[2]=(r*V-t*ba+a*Y)*c,b[3]=(-m*V+q*ba-x*Y)*c,b[4]=(-l*ka+n*Z-p*ca)*c,b[5]=(d*ka-g*Z+e*ca)*c,b[6]=(-u*V+t*P-a*v)*c,b[7]=(h*V-q*P+x*v)*c,b[8]=(l*fa-f*Z+p*X)*c,b[9]=(-d*fa+k*Z-e*X)*c,b[10]=(u*ba-r*P+a*w)*c,b[11]=(-h*ba+m*P-x*w)*c,b[12]=(-l*ia+f*ca-n*X)*c,b[13]=(d*ia-k*ca+g*X)*c,b[14]=(-u*Y+r*v-t*w)*c,b[15]=(h*Y-m*v+q*w)*c,b):null},toRotationMat:function(a,
b){return b||(b=v.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},toMat3:function(a,b){return b||(b=w.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[4],b[4]=a[5],b[5]=a[6],b[6]=a[8],b[7]=a[9],b[8]=a[10],b},toInverseMat3:function(a,b){var c,d=a[0],k=a[1],g=a[2],e=a[4],l=a[5],f=a[6],n=a[8],p=a[9];a=a[10];var h=a*l-f*p,m=-a*e+f*n,q=p*e-l*n,x=d*h+k*m+g*q;return x?(c=1/x,b||(b=w.create()),
b[0]=h*c,b[1]=(-a*k+g*p)*c,b[2]=(f*k-g*l)*c,b[3]=m*c,b[4]=(a*d-g*n)*c,b[5]=(-f*d+g*e)*c,b[6]=q*c,b[7]=(-p*d+k*n)*c,b[8]=(l*d-k*e)*c,b):null},multiply:function(a,b,c){c||(c=a);var d=a[0],k=a[1],g=a[2],e=a[3],l=a[4],f=a[5],n=a[6],p=a[7],h=a[8],m=a[9],q=a[10],x=a[11],u=a[12],r=a[13],t=a[14];a=a[15];var w=b[0],v=b[1],B=b[2],Y=b[3],ba=b[4],V=b[5],X=b[6],ca=b[7],Z=b[8],ia=b[9],fa=b[10],ka=b[11],na=b[12],ua=b[13],Da=b[14];b=b[15];return c[0]=w*d+v*l+B*h+Y*u,c[1]=w*k+v*f+B*m+Y*r,c[2]=w*g+v*n+B*q+Y*t,c[3]=
w*e+v*p+B*x+Y*a,c[4]=ba*d+V*l+X*h+ca*u,c[5]=ba*k+V*f+X*m+ca*r,c[6]=ba*g+V*n+X*q+ca*t,c[7]=ba*e+V*p+X*x+ca*a,c[8]=Z*d+ia*l+fa*h+ka*u,c[9]=Z*k+ia*f+fa*m+ka*r,c[10]=Z*g+ia*n+fa*q+ka*t,c[11]=Z*e+ia*p+fa*x+ka*a,c[12]=na*d+ua*l+Da*h+b*u,c[13]=na*k+ua*f+Da*m+b*r,c[14]=na*g+ua*n+Da*q+b*t,c[15]=na*e+ua*p+Da*x+b*a,c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],k=b[1];b=b[2];return c[0]=a[0]*d+a[4]*k+a[8]*b+a[12],c[1]=a[1]*d+a[5]*k+a[9]*b+a[13],c[2]=a[2]*d+a[6]*k+a[10]*b+a[14],c},multiplyVec4:function(a,
b,c){c||(c=b);var d=b[0],k=b[1],g=b[2];b=b[3];return c[0]=a[0]*d+a[4]*k+a[8]*g+a[12]*b,c[1]=a[1]*d+a[5]*k+a[9]*g+a[13]*b,c[2]=a[2]*d+a[6]*k+a[10]*g+a[14]*b,c[3]=a[3]*d+a[7]*k+a[11]*g+a[15]*b,c},translate:function(a,b,c){var d,k,g,e,l,f,n,p,h,m,q,x,u=b[0],r=b[1];b=b[2];return c&&a!==c?(d=a[0],k=a[1],g=a[2],e=a[3],l=a[4],f=a[5],n=a[6],p=a[7],h=a[8],m=a[9],q=a[10],x=a[11],c[0]=d,c[1]=k,c[2]=g,c[3]=e,c[4]=l,c[5]=f,c[6]=n,c[7]=p,c[8]=h,c[9]=m,c[10]=q,c[11]=x,c[12]=d*u+l*r+h*b+a[12],c[13]=k*u+f*r+m*b+a[13],
c[14]=g*u+n*r+q*b+a[14],c[15]=e*u+p*r+x*b+a[15],c):(a[12]=a[0]*u+a[4]*r+a[8]*b+a[12],a[13]=a[1]*u+a[5]*r+a[9]*b+a[13],a[14]=a[2]*u+a[6]*r+a[10]*b+a[14],a[15]=a[3]*u+a[7]*r+a[11]*b+a[15],a)},scale:function(a,b,c){var d=b[0],k=b[1];b=b[2];return c&&a!==c?(c[0]=a[0]*d,c[1]=a[1]*d,c[2]=a[2]*d,c[3]=a[3]*d,c[4]=a[4]*k,c[5]=a[5]*k,c[6]=a[6]*k,c[7]=a[7]*k,c[8]=a[8]*b,c[9]=a[9]*b,c[10]=a[10]*b,c[11]=a[11]*b,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c):(a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=k,a[5]*=k,
a[6]*=k,a[7]*=k,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a)},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,d){var k,g,e,l,f,n,p,h,m,q,u,x,r,t,w,v,B,y,ba,V,X,ca,Z,ia,fa=c[0],ka=c[1];c=c[2];var na=Math.sqrt(fa*fa+ka*ka+c*c);return na?(1!==na&&(na=1/na,fa*=na,ka*=na,c*=na),k=Math.sin(b),g=Math.cos(b),e=1-g,l=a[0],f=a[1],n=a[2],p=a[3],h=a[4],m=a[5],q=a[6],u=a[7],
x=a[8],r=a[9],t=a[10],w=a[11],v=fa*fa*e+g,B=ka*fa*e+c*k,y=c*fa*e-ka*k,ba=fa*ka*e-c*k,V=ka*ka*e+g,X=c*ka*e+fa*k,ca=fa*c*e+ka*k,Z=ka*c*e-fa*k,ia=c*c*e+g,d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a,d[0]=l*v+h*B+x*y,d[1]=f*v+m*B+r*y,d[2]=n*v+q*B+t*y,d[3]=p*v+u*B+w*y,d[4]=l*ba+h*V+x*X,d[5]=f*ba+m*V+r*X,d[6]=n*ba+q*V+t*X,d[7]=p*ba+u*V+w*X,d[8]=l*ca+h*Z+x*ia,d[9]=f*ca+m*Z+r*ia,d[10]=n*ca+q*Z+t*ia,d[11]=p*ca+u*Z+w*ia,d):null},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var k=
a[4],g=a[5],e=a[6],l=a[7],f=a[8],n=a[9],p=a[10],h=a[11];return c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[4]=k*b+f*d,c[5]=g*b+n*d,c[6]=e*b+p*d,c[7]=l*b+h*d,c[8]=k*-d+f*b,c[9]=g*-d+n*b,c[10]=e*-d+p*b,c[11]=l*-d+h*b,c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var k=a[0],g=a[1],e=a[2],l=a[3],f=a[8],n=a[9],p=a[10],h=a[11];return c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):
c=a,c[0]=k*b+f*-d,c[1]=g*b+n*-d,c[2]=e*b+p*-d,c[3]=l*b+h*-d,c[8]=k*d+f*b,c[9]=g*d+n*b,c[10]=e*d+p*b,c[11]=l*d+h*b,c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var k=a[0],g=a[1],e=a[2],l=a[3],f=a[4],n=a[5],p=a[6],h=a[7];return c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=k*b+f*d,c[1]=g*b+n*d,c[2]=e*b+p*d,c[3]=l*b+h*d,c[4]=k*-d+f*b,c[5]=g*-d+n*b,c[6]=e*-d+p*b,c[7]=l*-d+h*b,c},frustum:function(a,b,c,d,g,e,l){l||(l=v.create());
var k=b-a,f=d-c,n=e-g;return l[0]=2*g/k,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=2*g/f,l[6]=0,l[7]=0,l[8]=(b+a)/k,l[9]=(d+c)/f,l[10]=-(e+g)/n,l[11]=-1,l[12]=0,l[13]=0,l[14]=-(e*g*2)/n,l[15]=0,l},perspective:function(a,b,c,d,g){a=c*Math.tan(a*Math.PI/360);b*=a;return v.frustum(-b,b,-a,a,c,d,g)},ortho:function(a,b,c,d,g,e,l){l||(l=v.create());var k=b-a,f=d-c,n=e-g;return l[0]=2/k,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=2/f,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=-2/n,l[11]=0,l[12]=-(a+b)/k,l[13]=-(d+c)/f,l[14]=-(e+g)/n,
l[15]=1,l},lookAt:function(a,b,c,d){d||(d=v.create());var k,g,e,l,f,n,p,h,m,q,u=a[0],x=a[1];a=a[2];var r=c[0],t=c[1];c=c[2];var w=b[0],B=b[1];b=b[2];return u===w&&x===B&&a===b?v.identity(d):(p=u-w,h=x-B,m=a-b,q=1/Math.sqrt(p*p+h*h+m*m),p*=q,h*=q,m*=q,k=t*m-c*h,g=c*p-r*m,e=r*h-t*p,q=Math.sqrt(k*k+g*g+e*e),q?(q=1/q,k*=q,g*=q,e*=q):(k=0,g=0,e=0),l=h*e-m*g,f=m*k-p*e,n=p*g-h*k,q=Math.sqrt(l*l+f*f+n*n),q?(q=1/q,l*=q,f*=q,n*=q):(l=0,f=0,n=0),d[0]=k,d[1]=l,d[2]=p,d[3]=0,d[4]=g,d[5]=f,d[6]=h,d[7]=0,d[8]=e,
d[9]=n,d[10]=m,d[11]=0,d[12]=-(k*u+g*x+e*a),d[13]=-(l*u+f*x+n*a),d[14]=-(p*u+h*x+m*a),d[15]=1,d)},fromRotationTranslation:function(a,b,c){c||(c=v.create());var d=a[0],k=a[1],g=a[2],e=a[3],l=d+d,f=k+k,n=g+g;a=d*l;var p=d*f,d=d*n,h=k*f,k=k*n,g=g*n,l=e*l,f=e*f,e=e*n;return c[0]=1-(h+g),c[1]=p+e,c[2]=d-f,c[3]=0,c[4]=p-e,c[5]=1-(a+g),c[6]=k+l,c[7]=0,c[8]=d+f,c[9]=k-l,c[10]=1-(a+h),c[11]=0,c[12]=b[0],c[13]=b[1],c[14]=b[2],c[15]=1,c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+
", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},r={create:function(a){var b=new d(4);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0,b},createFrom:function(a,b,c,g){var k=new d(4);return k[0]=a,k[1]=b,k[2]=c,k[3]=g,k},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},identity:function(a){return a||(a=r.create()),a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}},p=r.identity();r.calculateW=function(a,
b){var c=a[0],d=a[1],k=a[2];return b&&a!==b?(b[0]=c,b[1]=d,b[2]=k,b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-k*k)),b):(a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-k*k)),a)};r.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};r.inverse=function(a,b){var c=a[0],d=a[1],k=a[2],g=a[3],c=(c=c*c+d*d+k*k+g*g)?1/c:0;return b&&a!==b?(b[0]=-a[0]*c,b[1]=-a[1]*c,b[2]=-a[2]*c,b[3]=a[3]*c,b):(a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a)};r.conjugate=function(a,b){return b&&a!==b?(b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],
b):(a[0]*=-1,a[1]*=-1,a[2]*=-1,a)};r.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};r.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],k=a[2];a=a[3];var g=Math.sqrt(c*c+d*d+k*k+a*a);return 0===g?(b[0]=0,b[1]=0,b[2]=0,b[3]=0,b):(g=1/g,b[0]=c*g,b[1]=d*g,b[2]=k*g,b[3]=a*g,b)};r.add=function(a,b,c){return c&&a!==c?(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c):(a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a)};r.multiply=function(a,b,c){c||(c=a);
var d=a[0],k=a[1],g=a[2];a=a[3];var e=b[0],l=b[1],f=b[2];b=b[3];return c[0]=d*b+a*e+k*f-g*l,c[1]=k*b+a*l+g*e-d*f,c[2]=g*b+a*f+d*l-k*e,c[3]=a*b-d*e-k*l-g*f,c};r.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],k=b[1],g=b[2];b=a[0];var e=a[1],l=a[2];a=a[3];var f=a*d+e*g-l*k,n=a*k+l*d-b*g,p=a*g+b*k-e*d,d=-b*d-e*k-l*g;return c[0]=f*a+d*-b+n*-l-p*-e,c[1]=n*a+d*-e+p*-b-f*-l,c[2]=p*a+d*-l+f*-e-n*-b,c};r.scale=function(a,b,c){return c&&a!==c?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c):(a[0]*=b,a[1]*=
b,a[2]*=b,a[3]*=b,a)};r.toMat3=function(a,b){b||(b=w.create());var c=a[0],d=a[1],k=a[2],g=a[3],e=c+c,l=d+d,f=k+k;a=c*e;var n=c*l,c=c*f,p=d*l,d=d*f,k=k*f,e=g*e,l=g*l,g=g*f;return b[0]=1-(p+k),b[1]=n+g,b[2]=c-l,b[3]=n-g,b[4]=1-(a+k),b[5]=d+e,b[6]=c+l,b[7]=d-e,b[8]=1-(a+p),b};r.toMat4=function(a,b){b||(b=v.create());var c=a[0],d=a[1],k=a[2],g=a[3],e=c+c,l=d+d,f=k+k;a=c*e;var n=c*l,c=c*f,p=d*l,d=d*f,k=k*f,e=g*e,l=g*l,g=g*f;return b[0]=1-(p+k),b[1]=n+g,b[2]=c-l,b[3]=0,b[4]=n-g,b[5]=1-(a+k),b[6]=d+e,b[7]=
0,b[8]=c+l,b[9]=d-e,b[10]=1-(a+p),b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};r.slerp=function(a,b,c,d){d||(d=a);var k,g,e,l,f=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];return 1<=Math.abs(f)?(d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d):(k=Math.acos(f),g=Math.sqrt(1-f*f),.001>Math.abs(g)?(d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d):(e=Math.sin((1-c)*k)/g,l=Math.sin(c*k)/g,d[0]=a[0]*e+b[0]*l,d[1]=a[1]*e+b[1]*l,d[2]=a[2]*e+b[2]*l,d[3]=a[3]*e+b[3]*l,d))};
r.fromRotationMatrix=function(a,b){b||(b=r.create());var c,d=a[0]+a[4]+a[8];if(0<d)c=Math.sqrt(d+1),b[3]=.5*c,c=.5/c,b[0]=(a[7]-a[5])*c,b[1]=(a[2]-a[6])*c,b[2]=(a[3]-a[1])*c;else{c=r.fromRotationMatrix.s_iNext=r.fromRotationMatrix.s_iNext||[1,2,0];d=0;a[4]>a[0]&&(d=1);a[8]>a[3*d+d]&&(d=2);var k=c[d],g=c[k];c=Math.sqrt(a[3*d+d]-a[3*k+k]-a[3*g+g]+1);b[d]=.5*c;c=.5/c;b[3]=(a[3*g+k]-a[3*k+g])*c;b[k]=(a[3*k+d]+a[3*d+k])*c;b[g]=(a[3*g+d]+a[3*d+g])*c}return b};w.toQuat4=r.fromRotationMatrix;(function(){var a=
w.create();r.fromAxes=function(b,c,d,k){return a[0]=c[0],a[3]=c[1],a[6]=c[2],a[1]=d[0],a[4]=d[1],a[7]=d[2],a[2]=b[0],a[5]=b[1],a[8]=b[2],r.fromRotationMatrix(a,k)}})();r.identity=function(a){return a||(a=r.create()),a[0]=0,a[1]=0,a[2]=0,a[3]=1,a};r.fromAngleAxis=function(a,b,c){c||(c=r.create());a*=.5;var d=Math.sin(a);return c[3]=Math.cos(a),c[0]=d*b[0],c[1]=d*b[1],c[2]=d*b[2],c};r.toAngleAxis=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=2*Math.acos(a[3]),c=f.invsqrt(c),b[0]=
a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};r.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var u={create:function(a){var b=new d(4);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0,b},createFrom:function(a,b,c,g){var k=new d(4);return k[0]=a,k[1]=b,k[2]=c,k[3]=g,k},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},identity:function(a){return a||(a=u.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},transpose:function(a,
b){return b&&a!==b?(b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3],b):(b=a[1],a[1]=a[2],a[2]=b,a)},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],k=a[2];a=a[3];var g=c*a-k*d;return g?(g=1/g,b[0]=a*g,b[1]=-d*g,b[2]=-k*g,b[3]=c*g,b):null},multiply:function(a,b,c){c||(c=a);var d=a[0],g=a[1],k=a[2];a=a[3];return c[0]=d*b[0]+g*b[2],c[1]=d*b[1]+g*b[3],c[2]=k*b[0]+a*b[2],c[3]=k*b[1]+a*b[3],c},rotate:function(a,b,c){c||(c=a);var d=a[0],g=a[1],k=a[2];a=a[3];var e=
Math.sin(b);b=Math.cos(b);return c[0]=d*b+g*e,c[1]=d*-e+g*b,c[2]=k*b+a*e,c[3]=k*-e+a*b,c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];return c[0]=d*a[0]+b*a[1],c[1]=d*a[2]+b*a[3],c},scale:function(a,b,c){c||(c=a);var d=a[1],g=a[2],k=a[3],e=b[0];b=b[1];return c[0]=a[0]*e,c[1]=d*b,c[2]=g*e,c[3]=k*b,c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};m=m?"":"d";a["glMath"+m]=f;a["vec2"+m]={create:function(a){var b=new d(2);return a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0),
b},createFrom:function(a,b){var c=new d(2);return c[0]=a,c[1]=b,c},add:function(a,b,c){return c||(c=b),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c},subtract:function(a,b,c){return c||(c=b),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c},multiply:function(a,b,c){return c||(c=b),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c},divide:function(a,b,c){return c||(c=b),c[0]=a[0]/b[0],c[1]=a[1]/b[1],c},scale:function(a,b,c){return c||(c=a),c[0]=a[0]*b,c[1]=a[1]*b,c},dist:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,
b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){return b[0]=a[0],b[1]=a[1],b},set2:function(a,b,c){return c[0]=a,c[1]=b,c},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];return 0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0,b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];return c?(c[0]=c[1]=0,c[2]=a,c):a},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*
b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];return(b=d*d+a*a)?(b=1/Math.sqrt(b),c[0]=d*b,c[1]=a*b,c):(c[0]=0,c[1]=0,c[2]=0,c)},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};a["vec3"+m]=c;a["vec4"+m]={create:function(a){var b=new d(4);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0),b},createFrom:function(a,b,c,g){var k=new d(4);return k[0]=a,
k[1]=b,k[2]=c,k[3]=g,k},add:function(a,b,c){return c||(c=b),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c},subtract:function(a,b,c){return c||(c=b),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],c},multiply:function(a,b,c){return c||(c=b),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c[2]=a[2]*b[2],c[3]=a[3]*b[3],c},divide:function(a,b,c){return c||(c=b),c[0]=a[0]/b[0],c[1]=a[1]/b[1],c[2]=a[2]/b[2],c[3]=a[3]/b[3],c},scale:function(a,b,c){return c||(c=a),c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*
b,c[3]=a[3]*b,c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},set4:function(a,b,c,d,g){return g[0]=a,g[1]=b,g[2]=c,g[3]=d,g},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d[3]=a[3]+c*(b[3]-a[3]),d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};
a["mat2"+m]=u;a["mat3"+m]=w;a["mat4"+m]=v;a["quat4"+m]=r}),a})},"esri/geometry/support/jsonUtils":function(){define(["../Point","../Polyline","../Polygon","../Multipoint","../Extent"],function(a,h,m,f,d){function c(c){return c&&c?void 0!==c.x&&void 0!==c.y?a.fromJSON(c):void 0!==c.paths?h.fromJSON(c):void 0!==c.rings?m.fromJSON(c):void 0!==c.points?f.fromJSON(c):void 0!==c.xmin&&void 0!==c.ymin&&void 0!==c.xmax&&void 0!==c.ymax?d.fromJSON(c):null:null}var n={esriGeometryPoint:a,esriGeometryPolyline:h,
esriGeometryPolygon:m,esriGeometryEnvelope:d,esriGeometryMultipoint:f};return{fromJSON:c,fromJson:function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(l){console.warn(l.stack)}return c(a)},getJsonType:function(c){return c instanceof a?"esriGeometryPoint":c instanceof h?"esriGeometryPolyline":c instanceof m?"esriGeometryPolygon":c instanceof d?"esriGeometryEnvelope":c instanceof f?"esriGeometryMultipoint":null},getGeometryType:function(a){return a&&n[a]||null}}})},"esri/geometry/Polyline":function(){define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/zmUtils".split(" "),
function(a,h,m,f,d,c,n){var e=f.createSubclass({declaredClass:"esri.geometry.Polyline",type:"polyline",getDefaults:function(a){return{paths:[]}},normalizeCtorArgs:function(a,b){var c,d,e=null,l=null;return a&&!Array.isArray(a)?(e=a.paths?a.paths:null,b||(a.spatialReference?b=a.spatialReference:a.paths||(b=a)),c=a.hasZ,d=a.hasM):e=a,e=e||[],b=b||m.WGS84,e.length&&e[0]&&null!=e[0][0]&&"number"==typeof e[0][0]&&(e=[e]),l=e[0]&&e[0][0],l&&(void 0===c&&void 0===d?(c=2<l.length,d=!1):void 0===c?c=!d&&3<
l.length:void 0===d&&(d=!c&&3<l.length)),{paths:e,spatialReference:b,hasZ:c,hasM:d}},_path:0,properties:{cache:{dependsOn:["hasM","hasZ","paths"]},extent:{dependsOn:["cache"],readOnly:!0,get:function(){function a(a){return function(b,c){return void 0===b?c:void 0===c?b:a(b,c)}}var b=this.paths,d=b.length;if(!d||!b[0].length)return null;var e,f,n,h,m,p,u,k,x,B,y,z,A,D,F,C,H,I,M,Q,K,G,N,S=u=b[0][0][0],J=k=b[0][0][1],W=a(Math.min),L=a(Math.max),P=this.spatialReference,Y=[],ba=this.hasZ,V=this.hasM,X=
ba?3:2;for(y=0;d>y;y++){e=b[y];C=H=e[0]&&e[0][0];I=M=e[0]&&e[0][1];A=e.length;G=N=Q=K=void 0;for(z=0;A>z;z++)f=e[z],n=f[0],h=f[1],S=W(S,n),J=W(J,h),u=L(u,n),k=L(k,h),C=W(C,n),I=W(I,h),H=L(H,n),M=L(M,h),ba&&2<f.length&&(m=f[2],D=W(D,m),x=L(x,m),Q=W(Q,m),K=L(K,m)),V&&f.length>X&&(p=f[X],F=W(F,m),B=L(B,m),G=W(G,p),N=L(N,p));Y.push(new c({xmin:C,ymin:I,zmin:Q,mmin:G,xmax:H,ymax:M,zmax:K,mmax:N,spatialReference:P?P.clone():null}))}b=new c({xmin:S,ymin:J,xmax:u,ymax:k,spatialReference:P?P.toJSON():null});
return ba&&(b.zmin=D,b.zmax=x),V&&(b.mmin=F,b.mmax=B),b.cache._partwise=1<Y.length?Y:null,b}},paths:null},addPath:function(a){return this.clearCache(),this._path=this.paths.length,this.paths[this._path]=[],a.forEach(this._addPoint,this),this},clone:function(){var c=new e;return c.spatialReference=this.spatialReference,c.paths=a.clone(this.paths),c.hasZ=this.hasZ,c.hasM=this.hasM,c},getPoint:function(a,b){if(this._validateInputs(a,b)){a=this.paths[a][b];b=this.hasZ;var c=this.hasM;return b&&c?new d(a[0],
a[1],a[2],a[3],this.spatialReference):b?new d(a[0],a[1],a[2],void 0,this.spatialReference):c?new d(a[0],a[1],void 0,a[2],this.spatialReference):new d(a[0],a[1],this.spatialReference)}},insertPoint:function(a,b,c){return this._validateInputs(a)&&h.isDefined(b)&&0<=b&&b<=this.paths[a].length?(this.clearCache(),n.updateSupportFromPoint(this,c),Array.isArray(c)||(c=c.toArray()),this.paths[a].splice(b,0,c),this):void 0},removePath:function(a){if(this._validateInputs(a,null)){this.clearCache();var b=this.paths.splice(a,
1)[0],c=b.length,e=this.spatialReference;for(a=0;c>a;a++)b[a]=new d(b[a],e);return b}},removePoint:function(a,b){return this._validateInputs(a,b)?(this.clearCache(),new d(this.paths[a].splice(b,1)[0],this.spatialReference)):void 0},setPoint:function(a,b,c){return this._validateInputs(a,b)?(this.clearCache(),n.updateSupportFromPoint(this,c),Array.isArray(c)||(c=c.toArray()),this.paths[a][b]=c,this):void 0},toJSON:function(){var a=this.spatialReference,a={paths:this.paths,spatialReference:a&&a.toJSON()};
return this.hasZ&&(a.hasZ=!0),this.hasM&&(a.hasM=!0),a},_initPathPointsToArray:function(a){for(var b=0;b<a.paths.length;b++)a.paths[b]=a.paths[b].map(function(b){return n.updateSupportFromPoint(a,b,!0),Array.isArray(b)||(a.spatialReference||(a.spatialReference=b.spatialReference),b=b.toArray()),b});return a},_addPoint:function(a){Array.isArray(a)?this.paths[this._path].push(a):this.paths[this._path].push(a.toArray());n.updateSupportFromPoint(this,a)},_insertPoints:function(a,b){this.clearCache();
this._path=b;this.paths[this._path]||(this.paths[this._path]=[]);a.forEach(this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.paths.length)?!1:null!==b&&void 0!==a&&(0>b||b>=this.paths[a].length)?!1:!0}});return e})},"esri/geometry/support/zmUtils":function(){define([],function(){return{updateSupportFromPoint:function(a,h,m){var f=a.hasZ,d=a.hasM;Array.isArray(h)?4!==h.length||d||f?3===h.length&&m&&!d?(f=!0,d=!1):3===h.length&&d&&f&&(d=!1,f=!1):(d=!0,f=
!0):(f=!f&&h.hasZ&&(!d||h.hasM),d=!d&&h.hasM&&(!f||h.hasZ));a.hasZ=f;a.hasM=d}}})},"esri/geometry/Polygon":function(){define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/coordsUtils ./support/mathUtils ./support/webMercatorUtils ./support/zmUtils".split(" "),function(a,h,m,f,d,c,n,e,l,b){var g=function(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}},q=g(Math.min),t=g(Math.max),w=f.createSubclass({declaredClass:"esri.geometry.Polygon",type:"polygon",
getDefaults:function(a){return{rings:[]}},normalizeCtorArgs:function(a,b){var c,d,g=null,e=null;return a&&!Array.isArray(a)?(g=a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),c=a.hasZ,d=a.hasM):g=a,g=g||[],b=b||m.WGS84,g.length&&g[0]&&null!=g[0][0]&&"number"==typeof g[0][0]&&(g=[g]),e=g[0]&&g[0][0],e&&(void 0===c&&void 0===d?(c=2<e.length,d=!1):void 0===c?c=!d&&3<e.length:void 0===d&&(d=!c&&3<e.length)),{rings:g,spatialReference:b,hasZ:c,hasM:d}},_ring:0,properties:{cache:{dependsOn:["hasM",
"hasZ","rings"]},centroid:{readOnly:!0,dependsOn:["cache"],get:function(a){var b=n.centroid([],this.rings,this.hasZ);return isNaN(b[0])||isNaN(b[1])||this.hasZ&&isNaN(b[2])?null:(a=a||new d,a.x=b[0],a.y=b[1],a.spatialReference=this.spatialReference,this.hasZ&&(a.z=b[2]),a)}},extent:{dependsOn:["cache"],readOnly:!0,get:function(){var a=this.rings,b=a.length;if(!b||!a[0].length)return null;var d,g,e,l,f,n,h,m,w,F,C,H,I,M,Q,K,G,N,S,J,W,L,P,Y=h=a[0][0][0],ba=m=a[0][0][1],V=this.spatialReference,X=[],
ca=this.hasZ,Z=this.hasM,ia=ca?3:2;for(C=0;b>C;C++){d=a[C];K=G=d[0]&&d[0][0];N=S=d[0]&&d[0][1];I=d.length;L=P=J=W=void 0;for(H=0;I>H;H++)g=d[H],e=g[0],l=g[1],Y=q(Y,e),ba=q(ba,l),h=t(h,e),m=t(m,l),K=q(K,e),N=q(N,l),G=t(G,e),S=t(S,l),ca&&2<g.length&&(f=g[2],M=q(M,f),w=t(w,f),J=q(J,f),W=t(W,f)),Z&&g.length>ia&&(n=g[ia],Q=q(M,n),F=t(w,n),L=q(J,n),P=t(W,n));X.push(new c({xmin:K,ymin:N,zmin:J,mmin:L,xmax:G,ymax:S,zmax:W,mmax:P,spatialReference:V}))}a=new c;return a.xmin=Y,a.ymin=ba,a.xmax=h,a.ymax=m,a.spatialReference=
V,ca&&(a.zmin=M,a.zmax=w),Z&&(a.mmin=Q,a.mmax=F),a.cache._partwise=1<X.length?X:null,a}},isSelfIntersecting:{dependsOn:["cache"],readOnly:!0,get:function(){var a,b,c,d,g,l,f,n,h,m=this.rings,q=m.length;for(d=0;q>d;d++){a=m[d];for(b=0;b<a.length-1;b++)for(l=[[a[b][0],a[b][1]],[a[b+1][0],a[b+1][1]]],c=d+1;q>c;c++)for(g=0;g<m[c].length-1;g++)if(f=[[m[c][g][0],m[c][g][1]],[m[c][g+1][0],m[c][g+1][1]]],n=e._getLineIntersection2(l,f),n&&!(n[0]===l[0][0]&&n[1]===l[0][1]||n[0]===f[0][0]&&n[1]===f[0][1]||n[0]===
l[1][0]&&n[1]===l[1][1]||n[0]===f[1][0]&&n[1]===f[1][1]))return!0;if(h=a.length,!(4>=h))for(b=0;h-3>b;b++)for(g=h-1,0===b&&(g=h-2),l=[[a[b][0],a[b][1]],[a[b+1][0],a[b+1][1]]],c=b+2;g>c;c++)if(f=[[a[c][0],a[c][1]],[a[c+1][0],a[c+1][1]]],n=e._getLineIntersection2(l,f),n&&!(n[0]===l[0][0]&&n[1]===l[0][1]||n[0]===f[0][0]&&n[1]===f[0][1]||n[0]===l[1][0]&&n[1]===l[1][1]||n[0]===f[1][0]&&n[1]===f[1][1]))return!0}return!1}},rings:null},addRing:function(a){if(a){this.clearCache();var b=this.rings,c=b.length;
if(Array.isArray(a[0]))b[c]=a.concat();else{var d=[];b[c]=d;b=0;for(c=a.length;c>b;b++)d[b]=a[b].toArray()}return this}},clone:function(){var b=new w;return b.spatialReference=this.spatialReference,b.rings=a.clone(this.rings),b.hasZ=this.hasZ,b.hasM=this.hasM,b},contains:function(a){return a?(l.canProject(a,this.spatialReference)&&(a=l.project(a,this.spatialReference)),n.contains(this.rings,n.fromGeom(a))):!1},isClockwise:function(a){var b,c,d,g,e=0,l=0,f=0,n=a.length,h=this.hasZ,m=this.hasM;for(b=
0;n>b;b++)c=a[b],d=a[(b+1)%n],Array.isArray(c)?(e+=c[0]*d[1]-d[0]*c[1],g=2,2<c.length&&2<d.length&&h&&(l+=c[0]*d[2]-d[0]*c[2],g=3),c.length>g&&d.length>g&&m&&(f+=c[0]*d[g]-d[0]*c[g])):(e+=c.x*d.y-d.x*c.y,c.hasZ&&d.hasZ&&(l+=c.x*d.z-d.x*c.z),c.hasM&&d.hasM&&(f+=c.x*d.m-d.x*c.m));return 0>=e&&0>=l&&0>=f},getPoint:function(a,b){if(this._validateInputs(a,b)){a=this.rings[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new d(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new d(a[0],a[1],void 0,a[2],
this.spatialReference):b&&c?new d(a[0],a[1],a[2],a[3],this.spatialReference):new d(a[0],a[1],this.spatialReference)}},insertPoint:function(a,c,d){return this._validateInputs(a)&&h.isDefined(c)&&0<=c&&c<=this.rings[a].length?(this.clearCache(),b.updateSupportFromPoint(this,d),Array.isArray(d)||(d=d.toArray()),this.rings[a].splice(c,0,d),this):void 0},removePoint:function(a,b){return this._validateInputs(a,b)?(this.clearCache(),new d(this.rings[a].splice(b,1)[0],this.spatialReference)):void 0},removeRing:function(a){if(this._validateInputs(a,
null)){this.clearCache();var b=this.rings.splice(a,1)[0],c=b.length,g=this.spatialReference;for(a=0;c>a;a++)b[a]=new d(b[a],g);return b}},setPoint:function(a,c,d){return this._validateInputs(a,c)?(this.clearCache(),b.updateSupportFromPoint(this,d),Array.isArray(d)||(d=d.toArray()),this.rings[a][c]=d,this):void 0},toJSON:function(){var a=this.spatialReference,a={rings:this.rings,spatialReference:a&&a.toJSON()};return this.hasZ&&(a.hasZ=!0),this.hasM&&(a.hasM=!0),a},_insertPoints:function(a,b){this.clearCache();
this._ring=b;this.rings[this._ring]||(this.rings[this._ring]=[]);a.forEach(this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.rings.length)?!1:null!==b&&void 0!==a&&(0>b||b>=this.rings[a].length)?!1:!0}});return w.createEllipse=function(a){var b,c,d=a.center.x,g=a.center.y,e=a.center.z,l=a.center.m,f=a.longAxis,n=a.shortAxis,h=a.numberOfPoints,m=a.map,q=[],t=2*Math.PI/h;for(a=0;h>a;a++)b=Math.cos(a*t),c=Math.sin(a*t),b=m.toMap({x:f*b+d,y:n*c+g}),null==e||
b.hasZ||(b.z=e),null==l||b.hasM||(b.m=l),q.push(b);return q.push(q[0]),new w({rings:[q],spatialReference:m.spatialReference})},w.createCircle=function(a){return w.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,map:a.map})},w.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,d=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(d=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],
[a.xmin,a.ymin]];if(c&&a.hasZ)for(var g=(a.zmax-a.zmin)/2,e=0;e<b.length;e++)b[e].push(g);if(d&&a.hasM)for(a=(a.mmax-a.mmin)/2,e=0;e<b.length;e++)b[e].push(a);return b}),spatialReference:a?a.toJSON():null};return c&&(b.hasZ=!0),d&&(b.hasM=!0),new w(b)},w})},"esri/geometry/support/coordsUtils":function(){define([],function(){var a=function(a,d,c){for(var f,e,l,b=c[0],g=c[1],h=0,m=0,w=d.length;w>m;m++)h++,h===w&&(h=0),c=d[m][0],f=d[h][0],e=d[m][1],l=d[h][1],(g>e&&l>=g||g>l&&e>=g)&&b>c+(g-e)/(l-e)*(f-
c)&&(a=!a);return a},h=function(a,d,c){for(var f,e,l,b,g,h,m,w,v,r=0,p=0,u=0,k=0,x=0,B=0,y=d.length-1;y>B;B++)f=d[B],e=f[0],l=f[1],b=f[2],g=d[B+1],h=g[0],m=g[1],w=g[2],v=e*m-h*l,k+=v,r+=(e+h)*v,p+=(l+m)*v,c&&2<f.length&&2<g.length&&(v=e*w-h*b,u+=(b+w)*v,x+=v);return 0<k&&(k*=-1),0<x&&(x*=-1),k?(a[0]=r,a[1]=p,a[2]=.5*k,c?(a[3]=u,a[4]=.5*x):a.length=3):a.length=0,a},m=function(a,d){for(var c,f,e,l=0,b=0,g=0,h=0,m=d?[0,0,0]:[0,0],w=d?[0,0,0]:[0,0],v=0,r=a.length;r-1>v;v++)if(c=a[v],f=a[v+1],c&&f){m[0]=
c[0];m[0]=c[1];w[0]=f[0];w[0]=f[1];d&&2<c.length&&2<f.length&&(m[2]=c[2],w[2]=f[2]);e=w[0]-m[0];var p=w[1]-m[1],u=0;if(e=(1<m.length&&1<w.length&&(u=m[2]-w[2]),Math.sqrt(e*e+p*p+u*u)))l+=e,u=c[0]+.5*(f[0]-c[0]),p=c[1]+.5*(f[1]-c[1]),c=2<c.length&&2<f.length?[u,p,c[2]+.5*(f[2]-c[2])]:[u,p],b+=e*c[0],g+=e*c[1],d&&2<c.length&&(h+=e*c[2])}return 0<l?d?[b/l,g/l,h/l]:[b/l,g/l]:a.length?a[0]:null};return{fromGeom:function(a){if(!a)return null;if(Array.isArray(a))return a;var d=a.hasZ,c=a.hasM;return"point"===
a.type?c&&d?[a.x,a.y,a.z,a.m]:d?[a.x,a.y,a.z]:c?[a.x,a.y,a.m]:[a.x,a.y]:"polygon"===a.type?a.rings.slice(0):"polyline"===a.type?a.path.slice(0):"multipoint"===a.type?a.points.slice(0):"extent"===a.type?(a=a.clone().normalize())?(d=c=!1,a.map(function(a){a.hasZ&&(d=!0);a.hasM&&(c=!0)}),a.map(function(a){var e=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(d&&a.hasZ)for(var l=.5*(a.zmax-a.zmin),b=0;b<e.length;b++)e[b].push(l);if(c&&a.hasM)for(a=.5*(a.mmax-a.mmin),
b=0;b<e.length;b++)e[b].push(a);return e})):null:null},contains:function(f,d){if(!f)return!1;if(!Array.isArray(f[0][0]))return a(!1,f,d);for(var c=!1,n=0,e=f.length;e>n;n++)c=a(c,f[n],d);return c},centroid:function(a,d,c){for(var f,e=[],l=0,b=d.length;b>l;l++)f=h([],d[l],c),f.length&&e.push(f);(e.sort(function(a,b){var d=a[2]-b[2];return 0===d&&c&&(d=a[4]-b[4]),d}),c?a.length=3:a.length=2,e.length)?(d=6*e[0][2],a[0]=e[0][0]/d,a[1]=e[0][1]/d,c&&(d=6*e[0][4],0!==d?a[2]=e[0][3]/d:a[2]=0)):(e=d[0]&&d[0].length?
m(d[0]):null)&&(a[0]=e[0],a[1]=e[1],c&&2<e.length&&(a[2]=e[2]));return a},isClockwise:function(a){for(var d=0,c=0,f=c+1,e=a.length;e>c;c++,f+=1%e)d+=a[c][0]*a[f][1]-a[f][0]*a[c][1];return 0>=.5*d}}})},"esri/geometry/Multipoint":function(){define("dojo/_base/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/zmUtils".split(" "),function(a,h,m,f,d,c){var n=m.createSubclass({declaredClass:"esri.geometry.Multipoint",type:"multipoint",getDefaults:function(a){return{points:[]}},normalizeCtorArgs:function(a,
c){var b,d,e=null,l=null;return a&&!Array.isArray(a)?a.wkid?c=a:(e=a.points||null,c=a.spatialReference||null,b=a.hasZ,d=a.hasM):e=a,e=e||[],c=c||h.WGS84,l=e[0],l&&(void 0===b&&void 0===d?(b=2<l.length,d=!1):void 0===b?b=3<l.length:void 0===d&&(d=3<l.length)),{points:e,spatialReference:c,hasZ:b,hasM:d}},properties:{cache:{dependsOn:["points","hasZ","hasM"]},extent:{dependsOn:["cache"],get:function(a){function c(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}if(!this.points.length)return null;
var b,g,e,f,n,h,m,p,u,k,x,B=a||new d,y=this.points,z=this.hasZ,A=this.hasM,D=y[0],F=c(Math.min),C=c(Math.max),H=a=D[0],I=e=D[1],M=z?3:2;k=0;for(x=y.length;x>k;k++)D=y[k],h=D[0],m=D[1],H=F(H,h),I=F(I,m),a=C(a,h),e=C(e,m),z&&2<D.length&&(p=D[2],b=F(b,p),f=C(f,p)),A&&D.length>M&&(u=D[M],g=F(g,u),n=C(n,u));return B.xmin=H,B.ymin=I,B.xmax=a,B.ymax=e,B.spatialReference=this.spatialReference,z?(B.zmin=b,B.zmax=f):(B.zmin=null,B.zmax=null),A?(B.mmin=g,B.mmax=n):(B.mmin=null,B.mmax=null),B}},points:null},
addPoint:function(a){return this.clearCache(),c.updateSupportFromPoint(this,a),Array.isArray(a)?this.points.push(a):this.points.push(a.toArray()),this},clone:function(){var c={points:a.clone(this.points),spatialReference:this.spatialReference};return this.hasZ&&(c.hasZ=!0),this.hasM&&(c.hasM=!0),new n(c)},getPoint:function(a){if(this._validateInputs(a)){var c,b;a=this.points[a];var d=2;return this.hasZ&&(c=a[2],d=3),this.hasM&&(b=a[d]),new f({x:a[0],y:a[1],z:c,m:b,spatialReference:this.spatialReference})}},
removePoint:function(a){return this._validateInputs(a)?(this.clearCache(),new f(this.points.splice(a,1)[0],this.spatialReference)):void 0},setPoint:function(a,d){return this._validateInputs(a)?(this.clearCache(),c.updateSupportFromPoint(d),this.points[a]=d.toArray(),this):void 0},toJSON:function(){var c=this.spatialReference,c={points:a.clone(this.points),spatialReference:c&&c.toJSON()};return this.hasZ&&(c.hasZ=!0),this.hasM&&(c.hasM=!0),c},_pointsToArrays:function(a){for(var d=0;d<a.points.length;d++){var b=
a.points[d];c.updateSupportFromPoint(a,b,!0);Array.isArray(b)||(a.spatialReference||(a.spatialReference=b.spatialReference),a.points[d]=b.toArray())}return a},_validateInputs:function(a){return null!=a&&0<=a&&a<this.points.length}});return n})},"esri/geometry/ScreenPoint":function(){define(["./Point"],function(a){return a.createSubclass({declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}})})},"esri/views/View":function(){define("dojo/_base/lang ../Graphic ../core/Accessor ../core/Collection ../core/CollectionFlattener ../core/Evented ../core/HandleRegistry ../core/Promise ../core/watchUtils ../core/promiseUtils ../core/Scheduler ../geometry/Extent ../geometry/HeightModelInfo ../geometry/SpatialReference ./BreakpointsOwner ./LayerViewManager ./BasemapView ./GroundView ./support/DefaultsFromMap".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k){return m.createSubclass([e,c,v],{declaredClass:"esri.views.View",properties:{allLayerViews:{readOnly:!0},basemapView:{},animation:{},resizing:{},interacting:{},graphics:{type:f.ofType(h)},groundView:{},defaultsFromMap:k,heightModelInfo:{type:t,dependsOn:["defaultsFromMap.heightModelInfo"]},initialExtent:{readOnly:!0,type:q,dependsOn:["defaultsFromMap.extent"]},initialExtentRequired:{},layerViews:{type:f},map:{},ready:{readOnly:!0,dependsOn:"map spatialReference width height initialExtentRequired initialExtent defaultsFromMap.isSpatialReferenceDone heightModelInfo defaultsFromMap.isHeightModelInfoDone map.loaded".split(" ")},
size:{readOnly:!0,dependsOn:["width","height"],get:function(){return[this.width,this.height]}},spatialReference:{type:w,dependsOn:["defaultsFromMap.spatialReference"]},stationary:{dependsOn:["animation","interacting","resizing"]},type:{},updating:{},padding:{},width:{},height:{}},constructor:function(a){this._viewHandles=new n;this._viewHandles.add(this.watch("ready",function(a,b){a?this._currentSpatialReference=this.spatialReference:this._currentSpatialReference=null;this.notifyChange("spatialReference");
!a&&b&&this.layerViewManager.empty()}.bind(this)));this.allLayerViews=new d({root:this,rootCollectionNames:["basemapView.baseLayerViews","groundView.layerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(a){return a.layerViews}});this.defaultsFromMap=new k({view:this})},getDefaults:function(){return a.mixin(this.inherited(arguments),{layerViews:[],graphics:[],padding:{left:0,top:0,right:0,bottom:0}})},initialize:function(){var a=this.validate().then(function(){return this._isValid=
!0,this.notifyChange("ready"),l.whenOnce(this,"ready")}.bind(this));this.addResolvingPromise(a);this.basemapView=new p({view:this});this.groundView=new u({view:this});this.layerViewManager=new r({view:this});this._resetInitialViewPropertiesFromContent()},destroy:function(){this.destroyed||(this.basemapView.destroy(),this.groundView.destroy(),this.destroyLayerViews(),this.defaultsFromMap.destroy(),this.defaultsFromMap=null,this._viewHandles.destroy(),this.map=null)},destroyLayerViews:function(){this.layerViewManager.destroy()},
_viewHandles:null,_isValid:!1,_readyCycleForced:!1,_userSpatialReference:null,_currentSpatialReference:null,_userHeightModelInfo:null,animation:null,basemapView:null,groundView:null,graphics:null,_graphicsSetter:function(a){this._graphicsView&&(this._graphicsView.graphics=a);this._set("graphics",a)},heightModelInfo:null,_heightModelInfoGetter:function(){return this.getHeightModelInfoWithOverride()},_heightModelInfoSetter:function(a){this.setHeightModelInfoOverride(a)},interacting:!1,layerViews:null,
map:null,_mapSetter:function(a){var b=this._get("map");a!==b&&(a&&a.load&&a.load(),this._forceReadyCycle(),this._resetInitialViewPropertiesFromContent(),this._set("map",a))},padding:null,_readyGetter:function(){return!!(this._isValid&&!this._readyCycleForced&&this.map&&0!==this.width&&0!==this.height&&this.spatialReference&&(!this.map.load||this.map.loaded)&&(this._currentSpatialReference||!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isSpatialReferenceDone)&&
(this.heightModelInfo||this.defaultsFromMap&&this.defaultsFromMap.isHeightModelInfoDone)&&this.defaultsFromMap&&this.defaultsFromMap.isTileInfoDone&&this.isSpatialReferenceSupported(this.spatialReference))},spatialReference:null,_spatialReferenceGetter:function(){return this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null},_spatialReferenceSetter:function(a){this._userSpatialReference=a;this._set("spatialReference",a)},stationary:!0,_stationaryGetter:function(){return!this.animation&&
!this.interacting&&!this.resizing},type:null,updating:!1,initialExtentRequired:!0,initialExtent:null,_initialExtentGetter:function(){return this.defaultsFromMap&&this.defaultsFromMap.extent},whenLayerView:function(a){return this.layerViewManager.whenLayerView(a)},getDefaultSpatialReference:function(){return this.get("defaultsFromMap.spatialReference")},getDefaultHeightModelInfo:function(){return this.get("defaultsFromMap.heightModelInfo")},getHeightModelInfoWithOverride:function(){return this._userHeightModelInfo||
this.getDefaultHeightModelInfo()||null},setHeightModelInfoOverride:function(a){this._userHeightModelInfo=a;this.notifyChange("heightModelInfo")},validate:function(){return b.resolve()},isSpatialReferenceSupported:function(){return!0},isHeightModelInfoRequired:function(){return!1},isTileInfoRequired:function(){return!1},_resetInitialViewPropertiesFromContent:function(){if(this.defaultsFromMap){var a=this.defaultsFromMap.start.bind(this.defaultsFromMap);this.defaultsFromMap.reset();this._currentSpatialReference=
null;this.notifyChange("spatialReference");this._viewHandles.remove("defaultsFromMap");this._viewHandles.add([l.watch(this,"spatialReference",a),l.watch(this,"initialExtentRequired",a),g.schedule(a)],"defaultsFromMap")}},_forceReadyCycle:function(){this.ready&&(this._readyCycleForced=!0,l.whenFalseOnce(this,"ready",function(){this._readyCycleForced=!1;this.notifyChange("ready")}.bind(this)),this.notifyChange("ready"))}})})},"esri/Graphic":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/accessorSupport/decorators dojo/_base/lang ./core/lang ./core/JSONSupport ./PopupTemplate ./geometry/support/jsonUtils ./symbols/support/jsonUtils".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g){var q=0;a=t=function(a){function b(b,c,d,g){b=a.call(this,b,c,d,g)||this;return b.layer=null,b.popupTemplate=null,Object.defineProperty(b,"uid",{value:q++}),b}return m(b,a),b.prototype.normalizeCtorArgs=function(a,b,c,d){return a&&!a.declaredClass?a:{geometry:a,symbol:b,attributes:c,popupTemplate:d}},Object.defineProperty(b.prototype,"attributes",{set:function(a){var b=this._get("attributes");b!==a&&(this._set("attributes",a),this._notifyLayer("attributes",b,a))},enumerable:!0,
configurable:!0}),Object.defineProperty(b.prototype,"geometry",{set:function(a){var b=this._get("geometry");b!==a&&(this._set("geometry",a),this._notifyLayer("geometry",b,a))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"symbol",{set:function(a){var b=this._get("symbol");b!==a&&(this._set("symbol",a),this._notifyLayer("symbol",b,a))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"visible",{set:function(a){var b=this._get("visible");b!==a&&(this._set("visible",
a),this._notifyLayer("visible",b,a))},enumerable:!0,configurable:!0}),b.prototype.getAttribute=function(a){return this.attributes&&this.attributes[a]},b.prototype.setAttribute=function(a,b){if(this.attributes){var c=this.getAttribute(a);this.attributes[a]=b;this._notifyLayer("attributes",c,b,a)}else this.attributes=(c={},c[a]=b,c),this._notifyLayer("attributes",void 0,b,a)},b.prototype.getEffectivePopupTemplate=function(){return this.popupTemplate||this.layer&&this.layer.popupTemplate},b.prototype.toJSON=
function(){return{geometry:this.geometry&&this.geometry.toJSON(),symbol:this.symbol&&this.symbol.toJSON(),attributes:c.mixin({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}},b.prototype.clone=function(){return new t({attributes:n.clone(this.attributes),geometry:this.geometry&&this.geometry.clone()||null,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),symbol:this.symbol&&this.symbol.clone()||null,visible:this.visible})},b.prototype._notifyLayer=function(a,
b,c,d){this.layer&&(a={graphic:this,property:a,oldValue:b,newValue:c},d&&(a.attributeName=d),this.layer.graphicChanged(a))},b}(d.declared(e));f([d.property({value:null})],a.prototype,"attributes",null);f([d.property({value:null,json:{read:b.fromJSON}})],a.prototype,"geometry",null);f([d.property()],a.prototype,"layer",void 0);f([d.property({type:l})],a.prototype,"popupTemplate",void 0);f([d.property({value:null,json:{read:g.read}})],a.prototype,"symbol",null);f([d.property({value:!0,set:function(a){}})],
a.prototype,"visible",null);a=t=f([d.subclass("esri.Graphic")],a);var t;return a})},"esri/PopupTemplate":function(){define(["./core/JSONSupport","./core/kebabDictionary","./core/Collection","./core/lang","./support/Action"],function(a,h,m,f,d){var c=h({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),n=h({shortDate:"short-date",shortDateLE:"short-date-le",longDate:"long-date",dayShortMonthYear:"day-short-month-year",longMonthDayYear:"long-month-day-year",shortDateLongTime:"short-date-long-time",
shortDateLELongTime:"short-date-le-long-time",shortDateShortTime:"short-date-short-time",shortDateLEShortTime:"short-date-le-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLongTime24:"short-date-long-time-24",shortDateLELongTime24:"short-date-le-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year"}),e=h({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"}),
l=a.createSubclass({properties:{actions:{type:m.ofType(d)},content:{value:null,json:{read:{source:["description","popupElements","mediaInfos","showAttachments"]}}},expressionInfos:{value:null},fieldInfos:{value:null},overwriteActions:{value:!1},title:{value:""},relatedRecordsInfo:{value:null}},declaredClass:"esri.PopupTemplate",actions:null,content:"",expressionInfos:null,fieldInfos:null,_fieldInfosReader:function(a){return this._readFieldInfos(a)},overwriteActions:!1,title:"",relatedRecordsInfo:null,
_relatedRecordsInfoReader:function(a){return a?f.clone(a):a},_dateFormatKebabDict:n,clone:function(){var a=this.actions;return a&&(a=f.clone(a.toArray())),new l({actions:a||[],content:Array.isArray(this.content)?f.clone(this.content):this.content,fieldInfos:this.fieldInfos?f.clone(this.fieldInfos):null,overwriteActions:this.overwriteActions,relatedRecordsInfo:this.relatedRecordsInfo?f.clone(this.relatedRecordsInfo):null,title:this.title})},toJSON:function(){var a={showAttachments:!1,title:this.title};
this.expressionInfos&&(a.expressionInfos=f.clone(this.expressionInfos));this.fieldInfos&&(a.fieldInfos=this._writeFieldInfos(f.clone(this.fieldInfos)));this.relatedRecordsInfo&&(a.relatedRecordsInfo=f.clone(this.relatedRecordsInfo));var c=this.content;return"string"==typeof c?a.description=c:Array.isArray(c)&&(a.popupElements=f.clone(c),a.popupElements.forEach(function(b){return"attachments"!==b.type||a.showAttachments?"media"!==b.type||a.mediaInfos?"text"!==b.type||a.description?"fields"!==b.type||
a.fieldInfos||(b.fieldInfos&&(a.fieldInfos=this._writeFieldInfos(f.clone(b.fieldInfos))),delete b.fieldInfos):(b.text&&(a.description=b.text),delete b.text):(b.mediaInfos&&(a.mediaInfos=f.clone(b.mediaInfos),a.mediaInfos.forEach(function(a){a.type=e.toJSON(a.type)})),delete b.mediaInfos):a.showAttachments=!0,b}.bind(this))),a},_contentReader:function(a,c){a=c.description;var b=[],d=c.popupElements;return d&&d.length?b=d.map(function(a){return"text"!==a.type||a.text?"media"===a.type&&(a.mediaInfos||
c.mediaInfos)&&(a.mediaInfos||(a.mediaInfos=c.mediaInfos),a.mediaInfos=this._readMediaInfos(a.mediaInfos)):a.text=c.description,a}.bind(this)):(c.description?b.push({type:"text",text:c.description}):b.push({type:"fields"}),c.mediaInfos&&c.mediaInfos.length&&b.push({type:"media",mediaInfos:this._readMediaInfos(c.mediaInfos)}),c.showAttachments&&b.push({type:"attachments",displayType:"list"})),b.length&&(a=b),a},_readFieldInfos:function(a){return a&&a.forEach(function(a){var b=a.format&&a.format.dateFormat,
d=a.stringFieldOption;b&&(a.format.dateFormat=n.fromJSON(b));d&&(a.stringFieldOption=c.fromJSON(d))}),a},_writeFieldInfos:function(a){return a.forEach(function(a){var b=a.format&&a.format.dateFormat,d=a.stringFieldOption;b&&(a.format.dateFormat=n.toJSON(b));d&&(a.stringFieldOption=c.toJSON(d));a.format||delete a.format}),a},_readMediaInfos:function(a){return a.forEach(function(a){a.type=e.fromJSON(a.type)}),a}});return l})},"esri/support/Action":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Identifiable ../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n){a=e=function(a){function b(b){b=a.call(this)||this;return b.className="",b.temporary=!1,b.image="",b.id="",b.title="",b.visible=!0,b}return m(b,a),b.prototype.clone=function(){return new e({className:this.className,image:this.image,id:this.id,title:this.title,visible:this.visible})},b}(n.declared(d,c));f([n.property()],a.prototype,"className",void 0);f([n.property()],a.prototype,"temporary",void 0);f([n.property()],a.prototype,"image",void 0);f([n.property()],a.prototype,"id",
void 0);f([n.property()],a.prototype,"title",void 0);f([n.property()],a.prototype,"visible",void 0);a=e=f([n.subclass("esri.support.Action")],a);var e;return a})},"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../Symbol3D ../SimpleLineSymbol ../SimpleMarkerSymbol ../PictureMarkerSymbol ../PictureFillSymbol ../SimpleFillSymbol ../TextSymbol ../PointSymbol3D ../LineSymbol3D ../PolygonSymbol3D ../MeshSymbol3D ../LabelSymbol3D ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k){Object.defineProperty(h,"__esModule",{value:!0});var x={esriSMS:n,esriPMS:e,esriTS:g,esriSLS:c,esriSFS:b,esriPFS:l,PointSymbol3D:q,LineSymbol3D:t,PolygonSymbol3D:w,MeshSymbol3D:v,LabelSymbol3D:r,styleSymbolReference:p};h.read=function(a,b,c){return(b=a?x[a.type]||null:null)?(b=new b,b.read(a,c),b):(c&&c.messages&&a&&c.messages.push(new f("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c})),null)};
h.write=function(a,b,c){if(!a)return null;if(!c||"web-scene"!==c.origin||a.isInstanceOf(d)||a.isInstanceOf(p))return a.write(b,c);var g=k.to3D(a);return g.symbol?g.symbol.write(b,c):(c.messages&&c.messages.push(new m("symbol:unsupported","Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:a,context:c,error:g.error})),null)};h.fromJSON=function(a,b){var c=a?x[a.type]||null:null;return c?c.fromJSON(a,b):null};
h.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new u}return c&&c.read(a,b),c}})},"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Logger ../core/collectionUtils ../core/Warning ../core/urlUtils ./Symbol ./Symbol3DLayer ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./LineSymbol3DLayer ./PathSymbol3DLayer ./FillSymbol3DLayer ./ExtrudeSymbol3DLayer ./TextSymbol3DLayer ./support/Thumbnail ./support/StyleOrigin ../portal/Portal ../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k,x,B,y){var z={icon:q,object:t,line:w,path:v,fill:r,extrude:p,text:u},A=d.ofType(g),D=c.getLogger("esri.symbols.Symbol3D");a=function(a){function b(b){b=a.call(this)||this;return b.styleOrigin=null,b.thumbnail=null,b.type=null,b._set("symbolLayers",b._createSymbolLayersCollection()),b}return m(b,a),Object.defineProperty(b.prototype,"symbolLayers",{set:function(a){var b=this._get("symbolLayers");b?(b.removeAll(),b.addMany(a)):(b=this._createSymbolLayersCollection(a),
this._set("symbolLayers",b))},enumerable:!0,configurable:!0}),b.prototype.readSymbolLayers=function(a,b,c){b=this._createSymbolLayersCollection();for(var d=0;d<a.length;d++){var k=a[d],l=g.typeJSONDictionary.read(k.type),f=z[l];f?(k=new f,k.read(a[d],c),b.add(k)):(D.warn("Unknown symbol layer type: "+l),c&&c.messages&&c.messages.push(new e("symbol-layer:unsupported","Symbol layers of type '"+(l||"unknown")+"' are not supported",{definition:k,context:c})))}return b},b.prototype.readStyleOrigin=function(a,
b,c){return a.styleUrl&&a.name?(b=l.read(a.styleUrl,c),new x({styleUrl:b,name:a.name})):a.styleName&&a.name?new x({portal:c&&c.portal||B.getDefault(),styleName:a.styleName,name:a.name}):void(c&&c.messages&&c.messages.push(new e("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:c,definition:a})))},b.prototype.writeStyleOrigin=function(a,b,c,d){a.styleUrl&&a.name?(c=l.write(a.styleUrl,d),b.styleOrigin={styleUrl:c,name:a.name}):
a.styleName&&a.name&&(a.portal&&d&&d.portal&&!l.hasSamePortal(a.portal.restUrl,d.portal.restUrl)?d&&d.messages&&d.messages.push(new e("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):b.styleOrigin={styleName:a.styleName,name:a.name})},b.prototype.normalizeCtorArgs=function(a){return a instanceof g?{symbolLayers:this._createSymbolLayersCollection([a])}:Array.isArray(a)?{symbolLayers:this._createSymbolLayersCollection(a)}:
a},b.prototype._createSymbolLayersCollection=function(a){var b=this;a=new A(a);return a.on("before-add",function(a){return b._onSymbolLayersBeforeAdd(a)}),a},b.prototype._onSymbolLayersBeforeAdd=function(a){0>this._allowedLayerTypes.indexOf(a.item.type)&&(D.error("Symbol layer of type '"+a.item.type+"' is not allowed for symbol of type '"+this.type+"'"),a.preventDefault())},b}(y.declared(b));return f([y.property({json:{write:!1}})],a.prototype,"color",void 0),f([y.property({type:A,json:{write:!0}}),
y.cast(n.castForReferenceSetter)],a.prototype,"symbolLayers",null),f([y.reader("symbolLayers")],a.prototype,"readSymbolLayers",null),f([y.property({type:x})],a.prototype,"styleOrigin",void 0),f([y.reader("styleOrigin")],a.prototype,"readStyleOrigin",null),f([y.writer("styleOrigin")],a.prototype,"writeStyleOrigin",null),f([y.property({type:k["default"],json:{read:!1}})],a.prototype,"thumbnail",void 0),f([y.property({type:String,readOnly:!0,json:{read:!1}})],a.prototype,"type",void 0),a=f([y.subclass("esri.symbols.Symbol3D")],
a)})},"esri/symbols/Symbol":function(){define(["../core/lang","../core/kebabDictionary","../core/JSONSupport","../Color"],function(a,h,m,f){var d=h({esriSMS:"simple-marker-symbol",esriPMS:"picture-marker-symbol",esriSLS:"simple-line-symbol",esriSFS:"simple-fill-symbol",esriPFS:"picture-fill-symbol",esriTS:"text-symbol",esriSHD:"shield-label-symbol",PointSymbol3D:"point-symbol-3d",LineSymbol3D:"line-symbol-3d",PolygonSymbol3D:"polygon-symbol-3d",MeshSymbol3D:"mesh-symbol-3d",LabelSymbol3D:"label-symbol-3d"}),
c=0;return m.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+c++},properties:{type:{type:String,value:null,json:{read:d.fromJSON,write:{ignoreOrigin:!0,writer:function(a,c){c.type=d.toJSON(this.type)}}}},color:{type:f,value:new f([0,0,0,1]),json:{read:function(c){return c&&a.isDefined(c[0])?[c[0],c[1],c[2],c[3]/255]:c},write:!0}}}})})},"esri/Color":function(){define(["./core/declare","dojo/colors"],function(a,h){var m=a([h],{declaredClass:"esri.Color",toJSON:function(){return[this.r,
this.g,this.b,1<this.a?this.a:Math.round(255*this.a)]},clone:function(){return new m(this.toRgba())}});m.toJSON=function(a){return a&&[a.r,a.g,a.b,1<a.a?a.a:Math.round(255*a.a)]};m.fromJSON=function(a){return a&&new m([a[0],a[1],a[2],a[3]/255])};m.toUnitRGB=function(a){return[a.r/255,a.g/255,a.b/255]};m.toUnitRGBA=function(a){return[a.r/255,a.g/255,a.b/255,null!=a.a?a.a:1]};var f="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(a=0;a<f.length;a++)m[f[a]]=h[f[a]];return m.named.rebeccapurple=
[102,51,153],m})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(a,h,m,f){var d={};h.setObject("dojo.colors",d);var c=function(a,c,b){0>b&&++b;1<b&&--b;var d=6*b;return 1>d?a+(c-a)*d:1>2*b?c:2>3*b?a+(c-a)*(2/3-b)*6:a};a.colorFromRgb=m.fromRgb=function(a,d){var b=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(b){a=b[2].split(/\s*,\s*/);var g=a.length,b=b[1];if("rgb"==b&&3==g||"rgba"==b&&4==g)return b=a[0],"%"==b.charAt(b.length-
1)?(b=f.map(a,function(a){return 2.56*parseFloat(a)}),4==g&&(b[3]=a[3]),m.fromArray(b,d)):m.fromArray(a,d);if("hsl"==b&&3==g||"hsla"==b&&4==g){var b=(parseFloat(a[0])%360+360)%360/360,e=parseFloat(a[1])/100,l=parseFloat(a[2])/100,e=.5>=l?l*(e+1):l+e-l*e,l=2*l-e,b=[256*c(l,e,b+1/3),256*c(l,e,b),256*c(l,e,b-1/3),1];4==g&&(b[3]=a[3]);return m.fromArray(b,d)}}return null};var n=function(a,c,b){a=Number(a);return isNaN(a)?b:a<c?c:a>b?b:a};m.prototype.sanitize=function(){this.r=Math.round(n(this.r,0,255));
this.g=Math.round(n(this.g,0,255));this.b=Math.round(n(this.b,0,255));this.a=n(this.a,0,1);return this};d.makeGrey=m.makeGrey=function(a,c){return m.fromArray([a,a,a,c])};h.mixin(m.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,
80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,
206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,
240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,
0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,
232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,
250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return m})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ./support/Symbol3DMaterial ./support/ElevationInfo ../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n,e,l){a=c({Icon:"icon",Object:"object",Line:"line",Path:"path",Fill:"fill",Extrude:"extrude",Text:"text"});d=function(a){function b(b){b=a.call(this)||this;return b.enabled=!0,b.material=null,b.type=null,b}return m(b,a),b.prototype.writeEnabled=function(a,b){a||(b.enabled=a)},b}(l.declared(d));f([l.property()],d.prototype,"enabled",void 0);f([l.writer("enabled")],d.prototype,"writeEnabled",null);f([l.property({type:e,json:{read:!1,write:!1}})],d.prototype,"elevationInfo",void 0);
f([l.property({type:n["default"],json:{write:!0}})],d.prototype,"material",void 0);f([l.property({type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:a.write}}})],d.prototype,"type",void 0);d=f([l.subclass("esri.symbols.Symbol3DLayer")],d);(d||(d={})).typeJSONDictionary=a;return d})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ./materialUtils ../../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n){Object.defineProperty(h,"__esModule",{value:!0});a=e=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return m(b,a),b.prototype.clone=function(){return new e({color:this.color?this.color.clone():null,colorMixMode:this.colorMixMode})},b}(n.declared(d));f([n.property(c.colorAndTransparencyProperty)],a.prototype,"color",void 0);f([n.property({type:String,json:{read:!0,write:!0}})],a.prototype,"colorMixMode",void 0);a=e=f([n.subclass("esri.symbols.support.Symbol3DMaterial")],
a);h.Symbol3DMaterial=a;h["default"]=a;var e})},"esri/symbols/support/materialUtils":function(){define(["require","exports","../../Color","../../core/screenUtils"],function(a,h,m,f){function d(a){return Math.max(0,Math.min(Math.round(100*(1-a)),100))}function c(a){return Math.max(0,Math.min(1-a/100,1))}function n(a,d){a=null!=d.transparency?c(d.transparency):1;return(d=d.color)&&Array.isArray(d)?new m([d[0]||0,d[1]||0,d[2]||0,a]):void 0}function e(a,c){c.color=[l(a.r),l(a.g),l(a.b)];a=d(a.a);0!==
a&&(c.transparency=a)}function l(a){return Math.max(0,Math.min(Math.round(a),255))}Object.defineProperty(h,"__esModule",{value:!0});h.opacityToTransparency=d;h.transparencyToOpacity=c;h.readColorAndTransparency=n;h.writeColorAndTransparency=e;h.colorAndTransparencyProperty={type:m,json:{read:{source:["color","transparency"],reader:n},write:{writer:e}}};h.screenSizeProperty={type:Number,cast:f.toPt,json:{write:!0}}})},"esri/core/screenUtils":function(){define(["require","exports"],function(a,h){function m(a){return a?
72*a/h.DPI:0}Object.defineProperty(h,"__esModule",{value:!0});var f=/^(\d+(\.\d+)?)\s*((px)|(pt))?$/i;h.DPI=96;h.pt2px=function(a){return a?a/72*h.DPI:0};h.px2pt=m;h.toPt=function(a){if("string"==typeof a){if(f.test(a)){a=a.match(f);var c=Number(a[1]);return"px"===(a[3]&&a[3].toLowerCase())?m(c):c}return console.warn("screenUtils.toPt: input not recognized!"),null}return a}})},"esri/symbols/support/ElevationInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport ../../core/kebabDictionary".split(" "),
function(a,h,m,f,d,c,n){a=n({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"});h=e=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return m(b,a),b.prototype.clone=function(){return new e({value:this.value})},b}(d.declared(c));f([d.property({type:Number,json:{write:!0}})],h.prototype,"value",void 0);h=e=f([d.subclass("esri.layers.support.FeatureExpression")],h);c=l=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}return m(b,a),b.prototype.write=function(a,b){return this.offset||this.mode||this.featureExpression?this.inherited(arguments):null},b.prototype.clone=function(){return new l({mode:this.mode,offset:this.offset,featureExpression:this.featureExpression?this.featureExpression.clone():void 0})},b}(d.declared(c));f([d.property({type:h,json:{write:!0}})],c.prototype,"featureExpression",void 0);f([d.property({type:String,json:{read:a.read,write:a.write}})],c.prototype,"mode",
void 0);f([d.property({type:Number,json:{write:!0}})],c.prototype,"offset",void 0);c=l=f([d.subclass("esri.layers.support.ElevationInfo")],c);var e,l;return c})},"esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/urlUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/Symbol3DOutline ./support/Symbol3DMaterial ./support/Symbol3DResource ./support/materialUtils".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q){a=d({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right"},{ignoreUnknown:!0});g=t=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return m(b,a),b.prototype.readHref=function(a,b,d){return a?c.read(a,d):b.dataURI},b.prototype.writeHref=function(a,b,d,g){a&&(c.isDataProtocol(a)?b.dataURI=a:b.href=c.write(a,g))},b.prototype.clone=function(){return new t({href:this.href,
primitive:this.primitive})},b}(n.declared(g["default"]));f([n.property({json:{write:!0,read:{source:["href","dataURI"]}}})],g.prototype,"href",void 0);f([n.reader("href")],g.prototype,"readHref",null);f([n.writer("href")],g.prototype,"writeHref",null);g=t=f([n.subclass("esri.symbols.support.IconSymbol3DLayerResource")],g);e=w=function(a){function b(b){b=a.call(this)||this;return b.material=null,b.resource=null,b.type="icon",b.size=void 0,b.anchor=void 0,b.outline=void 0,b}return m(b,a),b.prototype.clone=
function(){return new w({anchor:this.anchor,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:this.resource&&this.resource.clone(),size:this.size})},b}(n.declared(e));f([n.property({type:b["default"]})],e.prototype,"material",void 0);f([n.property({type:g,json:{write:!0}})],e.prototype,"resource",void 0);f([n.property()],e.prototype,"type",void 0);f([n.property(q.screenSizeProperty)],
e.prototype,"size",void 0);f([n.property({type:String,json:{read:a.read,write:a.write}})],e.prototype,"anchor",void 0);f([n.property({type:l["default"],json:{write:!0}})],e.prototype,"outline",void 0);e=w=f([n.subclass("esri.symbols.IconSymbol3DLayer")],e);var t,w;return e})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../Color ./materialUtils ../../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n,e){Object.defineProperty(h,"__esModule",{value:!0});a=l=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.color=new c([0,0,0,1]),b.size=1,b}return m(b,a),b.prototype.clone=function(){return new l({color:this.color?this.color.clone():null,size:this.size})},b}(e.declared(d));f([e.property(n.colorAndTransparencyProperty)],a.prototype,"color",void 0);f([e.property(n.screenSizeProperty)],a.prototype,"size",void 0);a=l=f([e.subclass("esri.symbols.support.Symbol3DOutline")],
a);h.Symbol3DOutline=a;h["default"]=a;var l})},"esri/symbols/support/Symbol3DResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/urlUtils ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators".split(" "),function(a,h,m,f,d,c,n,e){Object.defineProperty(h,"__esModule",{value:!0});var l=n({invertedCone:"inverted-cone"});a=b=function(a){function c(){return null!==a&&a.apply(this,arguments)||
this}return m(c,a),c.prototype.readHref=function(a,b,c){return d.read(a,c)},c.prototype.writeHref=function(a,b,c,g){a&&(b.href=d.write(a,g))},c.prototype.readPrimitive=function(a){return l.fromJSON(a)},c.prototype.writePrimitive=function(a,b){b.primitive=l.toJSON(a)},c.prototype.clone=function(){return new b({href:this.href,primitive:this.primitive})},c}(e.declared(c));f([e.property({json:{write:!0}})],a.prototype,"href",void 0);f([e.reader("href")],a.prototype,"readHref",null);f([e.writer("href")],
a.prototype,"writeHref",null);f([e.property({json:{write:!0}})],a.prototype,"primitive",void 0);f([e.reader("primitive")],a.prototype,"readPrimitive",null);f([e.writer("primitive")],a.prototype,"writePrimitive",null);a=b=f([e.subclass("esri.symbols.support.Symbol3DResource")],a);h.Symbol3DResource=a;h["default"]=a;var b})},"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ./Symbol3DLayer ./support/Symbol3DMaterial ./support/Symbol3DResource ../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n,e,l){a=d({center:"center",bottom:"bottom",origin:"origin"},{ignoreUnknown:!0});c=b=function(a){function c(b){b=a.call(this)||this;return b.material=null,b.resource=null,b.type="object",b.width=void 0,b.height=void 0,b.depth=void 0,b.anchor=void 0,b.heading=void 0,b.tilt=void 0,b.roll=void 0,b}return m(c,a),c.prototype.clone=function(){return new b({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,depth:this.depth,enabled:this.enabled,elevationInfo:this.elevationInfo&&
this.elevationInfo.clone(),height:this.height,material:this.material&&this.material.clone(),resource:this.resource&&this.resource.clone(),width:this.width})},Object.defineProperty(c.prototype,"isPrimitive",{get:function(){return!this.resource||"string"!=typeof this.resource.href},enumerable:!0,configurable:!0}),c}(l.declared(c));f([l.property({type:n["default"]})],c.prototype,"material",void 0);f([l.property({type:e["default"],json:{write:!0}})],c.prototype,"resource",void 0);f([l.property()],c.prototype,
"type",void 0);f([l.property({json:{write:!0}})],c.prototype,"width",void 0);f([l.property({json:{write:!0}})],c.prototype,"height",void 0);f([l.property({json:{write:!0}})],c.prototype,"depth",void 0);f([l.property({type:String,json:{read:a.read,write:a.write}})],c.prototype,"anchor",void 0);f([l.property({json:{write:!0}})],c.prototype,"heading",void 0);f([l.property({json:{write:!0}})],c.prototype,"tilt",void 0);f([l.property({json:{write:!0}})],c.prototype,"roll",void 0);f([l.property({readOnly:!0,
dependsOn:["resource","resource.href"]})],c.prototype,"isPrimitive",null);c=b=f([l.subclass("esri.symbols.ObjectSymbol3DLayer")],c);var b;return c})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ./support/materialUtils ../core/accessorSupport/decorators".split(" "),function(a,h,m,f,d,c,n){a=e=function(a){function b(b){b=a.call(this)||this;return b.material=null,b.type="line",b.size=1,b}return m(b,
a),b.prototype.clone=function(){return new e({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})},b}(n.declared(d));f([n.property()],a.prototype,"material",void 0);f([n.property()],a.prototype,"type",void 0);f([n.property(c.screenSizeProperty)],a.prototype,"size",void 0);a=e=f([n.subclass("esri.symbols.LineSymbol3DLayer")],a);var e;return a})},"esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c){a=n=function(a){function c(b){b=a.call(this)||this;return b.material=null,b.type="path",b.size=void 0,b}return m(c,a),c.prototype.readSize=function(a,c){return a||c.width||0},c.prototype.clone=function(){return new n({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})},c}(c.declared(d));f([c.property()],a.prototype,"material",void 0);f([c.property()],a.prototype,"type",void 0);f([c.property({json:{write:!0}})],
a.prototype,"size",void 0);f([c.reader("size",["size","width"])],a.prototype,"readSize",null);a=n=f([c.subclass("esri.symbols.PathSymbol3DLayer")],a);var n;return a})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ./support/Symbol3DOutline ../core/accessorSupport/decorators".split(" "),function(a,h,m,f,d,c,n){a=e=function(a){function b(b){b=a.call(this)||this;return b.type="fill",b.material=
null,b.outline=null,b}return m(b,a),b.prototype.clone=function(){return new e({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone()})},b}(n.declared(d));f([n.property()],a.prototype,"type",void 0);f([n.property()],a.prototype,"material",void 0);f([n.property({type:c["default"],json:{write:!0}})],a.prototype,"outline",void 0);a=e=f([n.subclass("esri.symbols.FillSymbol3DLayer")],a);
var e;return a})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ../core/accessorSupport/decorators".split(" "),function(a,h,m,f,d,c){a=n=function(a){function c(b){b=a.call(this)||this;return b.type="extrude",b.size=void 0,b.material=null,b}return m(c,a),c.prototype.clone=function(){return new n({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&
this.material.clone(),size:this.size})},c}(c.declared(d));f([c.property()],a.prototype,"type",void 0);f([c.property({json:{write:!0}})],a.prototype,"size",void 0);f([c.property()],a.prototype,"material",void 0);a=n=f([c.subclass("esri.symbols.ExtrudeSymbol3DLayer")],a);var n;return a})},"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3DLayer ./support/Symbol3DHalo ./support/materialUtils ../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n,e,l){a=b=function(a){function c(b){b=a.call(this)||this;return b.font=null,b.halo=null,b.material=null,b.size=void 0,b.text=void 0,b.type="text",b}return m(c,a),c.prototype.writeFont=function(a,b){a&&(b.font=d.clone(a))},c.prototype.clone=function(){return new b({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),font:this.font&&d.clone(this.font),halo:this.halo&&d.clone(this.halo),material:this.material&&this.material.clone(),size:this.size,text:this.text})},
c}(l.declared(c));f([l.property()],a.prototype,"font",void 0);f([l.writer("font")],a.prototype,"writeFont",null);f([l.property({type:n["default"],json:{write:!0}})],a.prototype,"halo",void 0);f([l.property()],a.prototype,"material",void 0);f([l.property(e.screenSizeProperty)],a.prototype,"size",void 0);f([l.property({json:{write:!0}})],a.prototype,"text",void 0);f([l.property()],a.prototype,"type",void 0);a=b=f([l.subclass("esri.symbols.TextSymbol3DLayer")],a);var b;return a})},"esri/symbols/support/Symbol3DHalo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ./materialUtils ../../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n,e,l){Object.defineProperty(h,"__esModule",{value:!0});a=b=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.color=new d([0,0,0,1]),b.size=0,b}return m(c,a),c.prototype.clone=function(){return new b({color:n.clone(this.color),size:this.size})},c}(l.declared(c));f([l.property(e.colorAndTransparencyProperty)],a.prototype,"color",void 0);f([l.property(e.screenSizeProperty)],a.prototype,"size",void 0);a=b=f([l.subclass("esri.symbols.support.Symbol3DHalo")],
a);h.Symbol3DHalo=a;h["default"]=a;var b})},"esri/symbols/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor".split(" "),function(a,h,m,f,d,c){Object.defineProperty(h,"__esModule",{value:!0});a=n=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}return m(c,a),c.prototype.clone=function(){return new n({url:this.url})},c}(d.declared(c));f([d.property({type:String})],
a.prototype,"url",void 0);a=n=f([d.subclass("esri.symbols.support.Thumbnail")],a);h.Thumbnail=a;h["default"]=a;var n})},"esri/symbols/support/StyleOrigin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../portal/Portal".split(" "),function(a,h,m,f,d,c,n){a=e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.portal=null,b}return m(b,a),b.prototype.clone=
function(){return new e({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})},b}(d.declared(c));f([d.property({type:String})],a.prototype,"name",void 0);f([d.property({type:String})],a.prototype,"styleUrl",void 0);f([d.property({type:String})],a.prototype,"styleName",void 0);f([d.property({type:n})],a.prototype,"portal",void 0);a=e=f([d.subclass("esri.symbols.support.StyleOrigin")],a);var e;return a})},"esri/symbols/SimpleLineSymbol":function(){define(["../core/declare",
"dojo/_base/lang","../core/lang","../core/screenUtils","./LineSymbol"],function(a,h,m,f,d){var c={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",
JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},n={color:[0,0,0,1],style:c.STYLE_SOLID,width:.75,cap:c.CAP_BUTT,join:c.JOIN_MITER,miterLimit:7.5},e=a(d,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line-symbol",style:{value:c.STYLE_SOLID,json:{read:function(a,b){return m.valueOf(this._jsonStyles,a)||void 0},write:function(a,b){b.style=this._jsonStyles[a]}}},cap:{value:c.CAP_BUTT,json:{read:!1,write:!1}},join:{value:c.JOIN_MITER,json:{read:!1,write:!1}},miterLimit:{value:7.5,cast:f.toPt,
json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return h.mixin(this.inherited(arguments),n)},
normalizeCtorArgs:function(a,b,c,d,e,n){if(a&&"string"!=typeof a)return a;var g={};return null!=a&&(g.style=a),null!=b&&(g.color=b),null!=c&&(g.width=f.toPt(c)),null!=d&&(g.cap=d),null!=e&&(g.join=e),null!=n&&(g.miterLimit=f.toPt(n)),g},clone:function(){return new e({color:m.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});return h.mixin(e,c),e.defaultProps=n,e})},"esri/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils",
"./Symbol"],function(a,h,m){return a(m,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line-symbol",width:{value:.75,cast:h.toPt,json:{write:!0}}}})})},"esri/symbols/SimpleMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(a,h,m,f,d,c){var n={style:"circle",color:[255,255,255,.25],outline:new c,size:12,angle:0,xoffset:0,yoffset:0},e=a(d,{declaredClass:"esri.symbols.SimpleMarkerSymbol",
properties:{color:{json:{write:function(a,b){a&&"x"!==this.style&&"cross"!==this.style&&(b.color=a.toJSON())}}},type:"simple-marker-symbol",size:{value:12},style:{type:String,value:"circle",json:{read:function(a){return m.valueOf(this._styles,a)},write:function(a,b){b.style=this._styles[a]}}},path:{type:String,value:null,set:function(a){this.style="path";this._set("path",a)},json:{write:!0}},outline:{type:c,json:{write:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",
x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},getDefaults:function(){return h.mixin(this.inherited(arguments),n)},normalizeCtorArgs:function(a,b,c,d){if(a&&"string"!=typeof a)return a;var g={};return a&&(g.style=a),null!=b&&(g.size=f.toPt(b)),c&&(g.outline=c),d&&(g.color=d),g},clone:function(){return new e({angle:this.angle,color:m.clone(this.color),outline:this.outline&&this.outline.clone(),size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},_setDim:function(a,
b,c){this._targetWidth=f.toPt(a);this._targetHeight=f.toPt(b);this._spikeSize=f.toPt(c)}});return h.mixin(e,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"}),e.defaultProps=n,e})},"esri/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(a,h,m){return a(m,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(a){return a&&
-1*a},write:function(a,d){d.angle=a&&-1*a}}},type:{},xoffset:{value:0,cast:h.toPt,json:{write:!0}},yoffset:{value:0,cast:h.toPt,json:{write:!0}},size:{value:9,cast:function(a){return"auto"===a?a:h.toPt(a)},json:{write:!0}}}})})},"esri/symbols/PictureMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./support/urlUtils".split(" "),function(a,h,m,f,d,c){var n={width:12,height:12,angle:0,xoffset:0,yoffset:0},e=a(d,{declaredClass:"esri.symbols.PictureMarkerSymbol",
properties:{color:{json:{write:!1}},type:"picture-marker-symbol",url:c.urlPropertyDefinition,source:c.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(a,b){return b.size||a}},write:!0},cast:f.toPt},width:{json:{read:{source:["width","size"],reader:function(a,b){return b.size||a}},write:!0},cast:f.toPt},size:{json:{write:!1}}},getDefaults:function(){return h.mixin(this.inherited(arguments),n)},normalizeCtorArgs:function(a,b,c){if(a&&"string"!=typeof a&&null==a.imageData)return a;
var d={};return a&&(d.url=a),null!=b&&(d.width=f.toPt(b)),null!=c&&(d.height=f.toPt(c)),d},clone:function(){var a=new e({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return a._set("source",m.clone(this.source)),a}});return e.defaultProps=n,e})},"esri/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(a,h,m){function f(a,c,b){return c.imageData?m.makeData({mediaType:c.contentType||"image/png",
isBase64:!0,data:c.imageData}):d(c.url,b)}function d(a,c){return!c||"service"!==c.origin&&"portal-item"!==c.origin||!c.layer||"feature"!==c.layer.type&&"stream"!==c.layer.type||m.isAbsolute(a)||!c.layer.parsedUrl?m.read(a,c):m.join(c.layer.parsedUrl.path,"images",a)}function c(a,c,b,d){m.isDataProtocol(a)?(a=m.dataComponents(a),c.contentType=a.mediaType,c.imageData=a.data,b&&b.imageData===c.imageData&&b.url&&(c.url=n(b.url,d))):c.url=n(a,d)}function n(a,c){return m.write(a,c)}Object.defineProperty(h,
"__esModule",{value:!0});h.readImageDataOrUrl=f;h.read=d;h.writeImageDataAndUrl=c;h.write=n;h.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:f},write:{writer:function(a,d,b,g){c(a,d,this.source,g)}}}};h.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(a,c,b){a={};return c.imageData&&(a.imageData=c.imageData),c.contentType&&(a.contentType=c.contentType),c.url&&(a.url=d(c.url,b)),a}}}}})},"esri/symbols/PictureFillSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./FillSymbol ./support/urlUtils".split(" "),
function(a,h,m,f,d,c){var n={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,height:12},e=a(d,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill-symbol",url:c.urlPropertyDefinition,xscale:{value:1,json:{write:!0}},yscale:{value:1,json:{write:!0}},width:{value:12,cast:f.toPt,json:{write:!0}},height:{value:12,cast:f.toPt,json:{write:!0}},xoffset:{value:0,cast:f.toPt,json:{write:!0}},yoffset:{value:0,cast:f.toPt,json:{write:!0}},source:c.sourcePropertyDefinition},getDefaults:function(){return h.mixin(this.inherited(arguments),
n)},normalizeCtorArgs:function(a,b,c,d){if(a&&"string"!=typeof a&&null==a.imageData)return a;var g={};return a&&(g.url=a),b&&(g.outline=b),null!=c&&(g.width=f.toPt(c)),null!=d&&(g.height=f.toPt(d)),g},clone:function(){var a=new e({color:m.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return a._set("source",m.clone(this.source)),a}});return e.defaultProps=
n,e})},"esri/symbols/FillSymbol":function(){define(["../core/declare","./Symbol","./SimpleLineSymbol"],function(a,h,m){return a(h,{declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:m,json:{write:!0}},type:null}})})},"esri/symbols/SimpleFillSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/lang","./FillSymbol","./SimpleLineSymbol"],function(a,h,m,f,d){var c={style:"solid",outline:new d,color:[0,0,0,.25]},n=a(f,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},
type:"simple-fill-symbol",style:{value:"solid",type:String,json:{read:function(a){return m.valueOf(this._styles,a)||void 0},write:function(a,c){c.style=this._styles[a]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return h.mixin(this.inherited(arguments),c)},normalizeCtorArgs:function(a,
c,b){if(a&&"string"!=typeof a)return a;var d={};return a&&(d.style=a),c&&(d.outline=c),b&&(d.color=b),d},clone:function(){return new n({color:m.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});return h.mixin(n,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"}),n.defaultProps=c,
n})},"esri/symbols/TextSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),function(a,h,m,f,d,c,n){var e={x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},l=a(c,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:d,json:{write:!0}},borderLineColor:{type:d,json:{write:!0}},borderLineSize:{type:Number,json:{write:!0}},color:{},font:{type:n,
json:{write:!0}},horizontalAlignment:{value:"center",json:{write:!0}},kerning:{value:!0,json:{write:!0}},haloColor:{type:d,json:{write:!0}},haloSize:{type:Number,cast:f.toPt,json:{write:!0}},rightToLeft:{json:{write:!0}},rotated:{value:!1,json:{write:!0}},text:{type:String,json:{write:!0}},type:"text-symbol",verticalAlignment:{type:String,json:{write:!0}},xoffset:{value:0,type:Number,cast:f.toPt,json:{write:!0}},yoffset:{value:0,type:Number,cast:f.toPt,json:{write:!0}},angle:{type:Number,value:0,
json:{read:function(a){return a&&-1*a},write:function(a,c){c.angle=a&&-1*a}}},width:{json:{write:!0}}},getDefaults:function(){return h.mixin(this.inherited(arguments),e)},normalizeCtorArgs:function(a,c,d){if(a&&"string"!=typeof a)return a;var b={};return a&&(b.text=a),c&&(b.font=c),d&&(b.color=d),b},clone:function(){return new l({angle:this.angle,backgroundColor:m.clone(this.backgroundColor),borderLineColor:m.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:m.clone(this.color),
font:this.font&&this.font.clone(),haloColor:m.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});return h.mixin(l,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"}),
l.defaultProps=e,l})},"esri/symbols/Font":function(){define(["dojo/_base/lang","../core/JSONSupport","../core/lang","../core/screenUtils"],function(a,h,m,f){var d={style:"normal",variant:"normal",weight:"normal",size:9,family:"serif",decoration:"none"},c=h.createSubclass({declaredClass:"esri.symbols.Font",properties:{decoration:{},family:{},size:{cast:f.toPt},style:{},variant:{},weight:{}},getDefaults:function(){return d},normalizeCtorArgs:function(a,c,d,b,g){if(a&&"string"!=typeof a)return a;var e=
{};return null!=a&&(e.size=f.toPt(a)),null!=c&&(e.style=c),null!=d&&(e.variant=d),null!=b&&(e.weight=b),g&&(e.family=g),e},toJSON:function(){return m.fixJson({size:this.size,style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family})},clone:function(){return new c({decoration:this.decoration,family:this.family,size:this.size,style:this.style,variant:this.variant,weight:this.weight})}});return c.defaultProps=d,a.mixin(c,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",
STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"}),c})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ./support/Symbol3DVerticalOffset ./callouts/calloutUtils ../core/accessorSupport/decorators".split(" "),function(a,h,m,f,d,c,n,e,l){a=b=function(a){function c(b){b=a.call(this)||
this;return b.verticalOffset=null,b.callout=null,b.type="point-symbol-3d",b}return m(c,a),c.prototype.supportsCallout=function(){if(1!==(this.symbolLayers?this.symbolLayers.length:0))return!1;switch(this.symbolLayers.getItemAt(0).type){case "icon":case "text":case "object":return!0}return!1},c.prototype.hasVisibleCallout=function(){return e.hasVisibleCallout(this)},c.prototype.hasVisibleVerticalOffset=function(){return e.hasVisibleVerticalOffset(this)},c.prototype.clone=function(){return new b({verticalOffset:d.clone(this.verticalOffset),
callout:d.clone(this.callout),styleOrigin:d.clone(this.styleOrigin),symbolLayers:d.clone(this.symbolLayers),thumbnail:d.clone(this.thumbnail)})},c}(l.declared(c));f([l.property({type:n["default"],json:{write:!0}})],a.prototype,"verticalOffset",void 0);f([l.property(e.calloutProperty)],a.prototype,"callout",void 0);f([l.property()],a.prototype,"type",void 0);f([l.shared(["icon","object","text"])],a.prototype,"_allowedLayerTypes",void 0);a=b=f([l.subclass("esri.symbols.PointSymbol3D")],a);var b;return a})},
"esri/symbols/support/Symbol3DVerticalOffset":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(a,h,m,f,d,c,n){Object.defineProperty(h,"__esModule",{value:!0});a=e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.screenLength=0,b.minWorldLength=0,b}return m(b,a),b.prototype.writeMinWorldLength=function(a,b,c){a&&
(b[c]=a)},b.prototype.clone=function(){return new e({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})},b}(c.declared(d));f([c.property(n.screenSizeProperty)],a.prototype,"screenLength",void 0);f([c.property({type:Number,json:{write:!0}})],a.prototype,"minWorldLength",void 0);f([c.writer("minWorldLength")],a.prototype,"writeMinWorldLength",null);f([c.property({type:Number,json:{write:!0}})],a.prototype,"maxWorldLength",void 0);a=e=f([c.subclass("esri.symbols.support.Symbol3DVerticalOffset")],
a);h.Symbol3DVerticalOffset=a;h["default"]=a;var e})},"esri/symbols/callouts/calloutUtils":function(){define("require exports ../../core/Logger ../../core/accessorSupport/ensureType ./Callout3D ./LineCallout3D".split(" "),function(a,h,m,f,d,c){function n(a){return a?(a=a.verticalOffset)?0>=a.screenLength||0>=a.maxWorldLength?!1:!0:!1:!1}function e(a,e){if(void 0===e&&(e=null),!f.requiresType(d,a))return a;switch(a.type){case "line":case null:case void 0:return f.ensureType(c,a)}return b.error("calloutUtils#cast",
"Trying to assign invalid value type to property of type esri/symbols/callouts/Callout3D"),e}function l(a,b,d){if(!a)return a;switch(a.type){case "line":return b=new c,b.read(a,d),b}}Object.defineProperty(h,"__esModule",{value:!0});var b=m.getLogger("esri.symbols.Callout3D");h.hasVisibleVerticalOffset=n;h.hasVisibleCallout=function(a){if(!a||!a.supportsCallout||!a.supportsCallout())return!1;var b=a.callout;return b&&b.visible&&n(a)?!0:!1};h.isCalloutSupport=function(a){return"point-symbol-3d"===a.type||
"label-symbol-3d"===a.type};h.cast=e;h.read=l;h.calloutProperty={type:d,cast:function(a){return e(a,this.callout)},json:{read:l,write:!0}}})},"esri/symbols/callouts/Callout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(a,h,m,f,d,c,n){a=function(a){function c(b){b=a.call(this)||this;return b.visible=!0,b}return m(c,a),c.prototype.normalizeCtorArgs=
function(a){return a&&a.type?(a=d.mixin({},a),delete a.type,a):a},c.prototype.clone=function(){},c}(n.declared(c));return f([n.property({type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],a.prototype,"type",void 0),f([n.property({readOnly:!0})],a.prototype,"visible",void 0),a=f([n.subclass("esri.symbols.callouts.Callout3D")],a)})},"esri/symbols/callouts/LineCallout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ./Callout3D ../support/materialUtils ./LineCallout3DBorder".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g){a=q=function(a){function b(b){b=a.call(this)||this;return b.type="line",b.color=new d([0,0,0,1]),b.size=n.px2pt(1),b.border=null,b}return m(b,a),Object.defineProperty(b.prototype,"visible",{get:function(){return 0<this.size&&0<this.color.a},enumerable:!0,configurable:!0}),b.prototype.clone=function(){return new q({color:c.clone(this.color),size:this.size,border:c.clone(this.border)})},b}(e.declared(l));f([e.property({type:String})],a.prototype,"type",void 0);f([e.property(b.colorAndTransparencyProperty)],
a.prototype,"color",void 0);f([e.property(b.screenSizeProperty)],a.prototype,"size",void 0);f([e.property({type:g["default"],json:{write:!0}})],a.prototype,"border",void 0);f([e.property({dependsOn:["size","color"],readOnly:!0})],a.prototype,"visible",null);a=q=f([e.subclass("esri.symbols.callouts.LineCallout3D")],a);var q;return a})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(a,h,m,f,d,c,n,e,l){Object.defineProperty(h,"__esModule",{value:!0});a=b=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.color=new d("white"),b}return m(c,a),c.prototype.clone=function(){return new b({color:n.clone(this.color)})},c}(e.declared(c));f([e.property(l.colorAndTransparencyProperty)],a.prototype,"color",void 0);a=b=f([e.subclass("esri.symbols.support.LineCallout3DBorder")],a);h.LineCallout3DBorder=a;h["default"]=a;var b})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n){a=e=function(a){function b(b){b=a.call(this)||this;return b.type="line-symbol-3d",b}return m(b,a),b.prototype.clone=function(){return new e({styleOrigin:d.clone(this.styleOrigin),symbolLayers:d.clone(this.symbolLayers),thumbnail:d.clone(this.thumbnail)})},b}(n.declared(c));f([n.property()],a.prototype,"type",void 0);f([n.shared(["line","path","text"])],a.prototype,"_allowedLayerTypes",void 0);a=e=f([n.subclass("esri.symbols.LineSymbol3D")],a);var e;return a})},"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n){a=e=function(a){function b(b){b=a.call(this)||this;return b.type="polygon-symbol-3d",b}return m(b,a),b.prototype.clone=function(){return new e({styleOrigin:d.clone(this.styleOrigin),symbolLayers:d.clone(this.symbolLayers),thumbnail:d.clone(this.thumbnail)})},b.fromJSON=function(a){var b=new e;if(b.read(a),2===b.symbolLayers.length&&"fill"===b.symbolLayers.getItemAt(0).type&&"line"===b.symbolLayers.getItemAt(1).type){var c=b.symbolLayers.getItemAt(0),d=b.symbolLayers.getItemAt(1);
!d.enabled||a.symbolLayers&&a.symbolLayers[1]&&!1===a.symbolLayers[1].enable||(c.outline={size:d.size,color:d.material.color});b.symbolLayers.removeAt(1)}return b},b}(n.declared(c));f([n.property()],a.prototype,"type",void 0);f([n.shared("extrude fill line icon object text".split(" "))],a.prototype,"_allowedLayerTypes",void 0);a=e=f([n.subclass("esri.symbols.PolygonSymbol3D")],a);var e;return a})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n){a=e=function(a){function b(b){b=a.call(this)||this;return b.type="mesh-symbol-3d",b}return m(b,a),b.prototype.clone=function(){return new e({styleOrigin:d.clone(this.styleOrigin),symbolLayers:d.clone(this.symbolLayers),thumbnail:d.clone(this.thumbnail)})},b}(n.declared(c));f([n.property()],a.prototype,"type",void 0);f([n.shared(["fill"])],a.prototype,"_allowedLayerTypes",void 0);a=e=f([n.subclass("esri.symbols.MeshSymbol3D")],a);var e;return a})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ./support/Symbol3DVerticalOffset ./callouts/calloutUtils ../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n,e,l){a=b=function(a){function c(b){b=a.call(this)||this;return b.verticalOffset=null,b.callout=null,b.type="label-symbol-3d",b}return m(c,a),c.prototype.supportsCallout=function(){return!0},c.prototype.hasVisibleCallout=function(){return e.hasVisibleCallout(this)},c.prototype.hasVisibleVerticalOffset=function(){return e.hasVisibleVerticalOffset(this)},c.prototype.clone=function(){return new b({styleOrigin:d.clone(this.styleOrigin),symbolLayers:d.clone(this.symbolLayers),thumbnail:d.clone(this.thumbnail),
callout:d.clone(this.callout),verticalOffset:d.clone(this.verticalOffset)})},c}(l.declared(c));f([l.property({type:n["default"],json:{write:!0}})],a.prototype,"verticalOffset",void 0);f([l.property(e.calloutProperty)],a.prototype,"callout",void 0);f([l.property()],a.prototype,"type",void 0);f([l.shared(["text"])],a.prototype,"_allowedLayerTypes",void 0);a=b=f([l.subclass("esri.symbols.LabelSymbol3D")],a);var b;return a})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/urlUtils ../core/Logger ../core/requireUtils ./Symbol ../portal/Portal".split(" "),
function(a,h,m,f,d,c,n,e,l,b){var g=n.getLogger("esri.symbols.WebStyleSymbol");h=q=function(b){function d(a){a=b.call(this,a)||this;return a.styleName=null,a.portal=null,a.styleUrl=null,a.name=null,a.type="web-style-symbol",a}return m(d,b),d.prototype._readStyleUrl=function(a,b,d){return c.read(a,d)},d.prototype._writeStyleUrl=function(a,b,d,g){b.styleUrl=c.write(a,g)},d.prototype._writeType=function(a,b,c,d){b.type="styleSymbolReference"},d.prototype.read=function(a,b){return this.portal=b?b.portal:
void 0,this.inherited(arguments,[a,b]),this},d.prototype.clone=function(){return new q({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})},d.prototype.fetchSymbol=function(){var b=this;return e.when(a,"./support/symbolUtils").then(function(a){a=a.fetchStyleSymbol(b,{portal:b.portal});return a.otherwise(function(a){g.error("#fetchSymbol()","Failed to create symbol from style",a)}),a})},d}(d.declared(l));f([d.property({json:{write:!1}})],h.prototype,"color",void 0);
f([d.property({type:String,json:{write:!0}})],h.prototype,"styleName",void 0);f([d.property({type:b,json:{write:!1}})],h.prototype,"portal",void 0);f([d.property({type:String,json:{write:!0}})],h.prototype,"styleUrl",void 0);f([d.reader("styleUrl")],h.prototype,"_readStyleUrl",null);f([d.writer("styleUrl")],h.prototype,"_writeStyleUrl",null);f([d.property({type:String,json:{write:!0}})],h.prototype,"name",void 0);f([d.property({type:String,readOnly:!0,json:{read:!1}})],h.prototype,"type",void 0);
f([d.writer("type")],h.prototype,"_writeType",null);h=q=f([d.subclass("esri.symbols.WebStyleSymbol")],h);var q;return h})},"esri/symbols/support/symbolConversion":function(){define("require exports dojo/_base/lang ../../core/lang ../../core/Error ../Font ../SimpleLineSymbol ../SimpleMarkerSymbol ../PictureMarkerSymbol ../SimpleFillSymbol ../TextSymbol ../WebStyleSymbol ../Symbol3D ../LineSymbol3D ../PointSymbol3D ../PolygonSymbol3D ../LabelSymbol3D ../LineSymbol3DLayer ../IconSymbol3DLayer ../FillSymbol3DLayer ../TextSymbol3DLayer ../../Color".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k,x,B,y){function z(a){var b,c,d,g=a.color?a.color.clone():new y([255,255,255]);a instanceof l?(a.color&&0===a.color.r&&0===a.color.g&&0===a.color.b&&(g=new y([255,255,255])),b={href:a.url},c=a.width<=a.height?a.height:a.width):(b=a.style,b={primitive:b in A?A[b]:"circle"},c=a.size,a.outline&&a.outline.color&&0<a.outline.width&&(d={size:a.outline.width,color:a.outline.color.clone()}));return new v(new k({size:c,screenOffset:[a.xoffset,a.yoffset],resource:b,
material:{color:g},outline:d}))}Object.defineProperty(h,"__esModule",{value:!0});var A={};A[e.STYLE_CIRCLE]="circle";A[e.STYLE_CROSS]="cross";A[e.STYLE_DIAMOND]="kite";A[e.STYLE_SQUARE]="square";A[e.STYLE_X]="x";h.to3D=function(a,k,h,A){if(void 0===k&&(k=!1),void 0===h&&(h=!1),void 0===A&&(A=!0),!a)return{symbol:null};if(a instanceof t||a instanceof q)A=a.clone();else if(a instanceof n)A=new w(new u({size:a.width||1,material:{color:a.color?a.color.clone():[255,255,255]}}));else if(a instanceof e)A=
z(a);else if(a instanceof l)A=z(a);else if(a instanceof b)A=new x({material:{color:a.color?a.color.clone():[255,255,255]}}),A=(a.outline&&a.outline.color&&(A.outline={size:a.outline.width||0,color:a.outline.color}),new r(A));else{if(!(a instanceof g))return{error:new d("symbol-conversion:unsupported-2d-symbol","Unsupported 2D symbol of tyoe '"+(a.type||a.declaredClass)+"'",{symbol:a})};var y;switch(a.verticalAlignment){case "top":y="top";break;case "middle":y="center";break;case "bottom":y="bottom";
break;default:y="center"}switch(a.horizontalAlignment){case "left":y+="Left";break;case "center":y+="Center";break;case "right":y+="Right";break;default:y+="Center"}var D=m.clone(c.defaultProps);a.font&&m.mixin(D,a.font);var F;F=a.haloColor;var C=a.haloSize;F=F&&0<C?{color:f.clone(F),size:C}:null;A=new (A?p:v)(new B({size:D.size,font:{family:D.family,weight:D.weight,style:D.style},halo:F,material:{color:a.color.clone()},placement:y,screenOffset:[a.xoffset,a.yoffset],text:a.text}))}if(k&&(A.id=a.id),
h&&A.isInstanceOf(t))for(a=0;a<A.symbolLayers.length;++a)A.symbolLayers.getItemAt(a)._ignoreDrivers=!0;return{symbol:A}}})},"esri/geometry/HeightModelInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators ./support/scaleUtils".split(" "),function(a,h,m,f,d,c,n,e){a=c({gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"});c=c({meter:"meter",
foot:"foot",foot_us:"foot-us",foot_clarke:"foot-clarke",yard_clarke:"yard-clarke",link_clarke:"link-clarke",yard_sears:"yard-sears",foot_sears:"foot-sears",chain_sears:"chain-sears",chain_benoit_1895_b:"chain-benoit-1895-b",yard_indian:"yard-indian",yard_indian_1937:"yard-indian-1937",foot_gold_coast:"foot-gold-coast",chain_sears_1922_truncated:"chain-sears-1922-truncated","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d=l=function(a){function b(){var b=null!==a&&a.apply(this,
arguments)||this;return b.ellipsoid=null,b}return m(b,a),b.prototype.clone=function(){return new l({heightModel:this.heightModel,heightUnit:this.heightUnit,ellipsoid:this.ellipsoid})},b.deriveUnitFromSR=function(a,b){a=a.clone();return a.heightUnit=e.getVerticalUnitStringForSR(b),a},b.fromJSON=function(a){if(!a)return null;var b=new l;return b.read(a),b},b}(n.declared(d));f([n.property({json:{read:a.read,write:a.write}})],d.prototype,"heightModel",void 0);f([n.property({json:{read:c.read,write:c.write}})],
d.prototype,"heightUnit",void 0);f([n.property({json:{write:!0}})],d.prototype,"ellipsoid",void 0);d=l=f([n.subclass("esri.HeightModelInfo")],d);var l;return d})},"esri/views/BreakpointsOwner":function(){define("../core/Accessor ../core/ArrayPool ../core/HandleRegistry ../core/watchUtils dojo/_base/lang dojo/dom-class".split(" "),function(a,h,m,f,d,c){var n={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;var c=this.values;return b<=a.xsmall?c.xsmall:b<=a.small?c.small:b<=
a.medium?c.medium:b<=a.large?c.large:c.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",
large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var c=this.values;return b<=a.xsmall?c.xsmall:b<=a.small?c.small:b<=a.medium?c.medium:
b<=a.large?c.large:c.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",
large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},
valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},e={xsmall:544,small:768,medium:992,large:1200};return a.createSubclass({properties:{breakpoints:{},orientation:{},widthBreakpoint:{},heightBreakpoint:{}},constructor:function(){this._breakpointsHandles=new m},getDefaults:function(){return d.mixin(this.inherited(arguments),{breakpoints:e})},initialize:function(){this._breakpointsHandles.add(f.init(this,"size",this._updateClassNames))},destroy:function(){this.destroyed||
(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=this.view=null)},_breakpointsHandles:null,_breakpointsSetter:function(a){var b=this._get("breakpoints");if(a!==b){var c;(b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<b.large)||(c=JSON.stringify(e,null,2),console.warn("provided breakpoints are not valid, using defaults:"+c));a=b?a:e;this._set("breakpoints",d.mixin({},a))}},_updateClassNames:function(){if(this.container){var a,b,c,d=h.acquire(),e=h.acquire(),
f=!1;for(a in n)b=this[a],c=n[a].getValue({viewSize:this.size,breakpoints:this.breakpoints}),b!==c&&(f=!0,this[a]=c,e.push(n[a].valueToClassName[b]),d.push(n[a].valueToClassName[c]));f&&(this._applyClassNameChanges(d,e),h.release(d),h.release(e))}},_applyClassNameChanges:function(a,b){var d=this.container;d&&(c.remove(d,b),c.add(d,a))},_removeActiveClassNames:function(){var a,b=this.container;if(b)for(a in n)c.remove(b,n[a].valueToClassName[this[a]])}})})},"esri/views/LayerViewManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor ../core/Error ../core/HandleRegistry ../core/Scheduler ../core/promiseUtils ../core/watchUtils ./LayerViewFactory".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q){a=function(a){function c(){var b=a.call(this)||this;return b._promisesMap=new Map,b._layerViewsMap=new Map,b._handles=new e,b.factory=new q,b.ready=!1,b.layersToLayerViews=function(){var a=new Map;return a.set("view.map.basemap.baseLayers","view.basemapView.baseLayerViews"),a.set("view.map.ground.layers","view.groundView.layerViews"),a.set("view.map.layers","view.layerViews"),a.set("view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"),a}(),b._doWork=
b._doWork.bind(b),b.refresh=b.refresh.bind(b),b._handles.add(g.init(b,"view.ready",function(a){return b.ready=a})),b._handles.add(b.watch(["view.map.basemap","view.map.ground","view.map.layers","ready"],b.refresh),"watcher"),b}return m(c,a),c.prototype.destroy=function(){this._handles&&(this.empty(),this.view=null,this.factory.destroy(),this.factory=null,this._handles.destroy(),this._handles=null,this._promisesMap=null,this._layerViewsMap=null,this._map=null)},c.prototype.empty=function(){this._layerViewsMap.forEach(this._disposeLayerView,
this);this._promisesMap.forEach(function(a){return a.cancel()});this._layerViewsMap.clear();this._promisesMap.clear();this._refreshCollections()},c.prototype.refresh=function(){var a=this._handles;a.remove("refresh");a.add(l.schedule(this._doWork),"refresh")},c.prototype.whenLayerView=function(a){return this.refresh(),this._doWork(),this._promisesMap.has(a)?this._promisesMap.get(a):b.reject(new n("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:a}))},c.prototype._doWork=
function(){var a=this,b=this._handles,c=this.get("view.map");if(this._map!==c&&(this.empty(),this._map=c),b.has("refresh")){b.remove("refresh");b.remove("collection-change");this.factory.paused=!this.ready;var d=this._map&&this._map.allLayers;d&&(d.forEach(this._createLayerView,this),this._refreshCollections(),this._promisesMap.forEach(function(b,c){d.includes(c)||a._disposeLayerView(a._layerViewsMap.get(c),c)}),b.add(d.on("change",this.refresh),"collection-change"))}},c.prototype._refreshCollections=
function(){var a=this;this.layersToLayerViews.forEach(function(b,c){a._populateLayerViewsOwners(a.get(c),a.get(b),a.view)})},c.prototype._populateLayerViewsOwners=function(a,b,c){var d=this;if(!a||!b)return void(b&&b.removeAll());var g=0;a.forEach(function(a){var k=d._layerViewsMap.get(a);k&&(k.layer=a,k.parent=c,b.getItemAt(g)!==k&&b.splice(g,0,k),a.layers&&d._populateLayerViewsOwners(a.layers,k.layerViews,k),g+=1)});g<b.length&&b.splice(g,b.length)},c.prototype._createLayerView=function(a){var c=
this,d=this.view,g=this.factory,k=this._layerViewsMap,e=this._promisesMap;if(k.has(a))return void a.load();e.has(a)||(g=g.create(d,a).then(function(g){if(!c._map||!c._map.allLayers.some(function(b){return a===b}))throw new n("view:no-layerview-for-layer","The layer has been removed from the map",{layer:a});return k.set(a,g),c._refreshCollections(),a.emit("layerview-create",{view:d,layerView:g}),d.emit("layerview-create",{layer:a,layerView:g}),b.resolve(g)}),e.set(a,g),g.always(this.refresh))},c.prototype._disposeLayerView=
function(a,b){if(this._promisesMap.has(b)&&(this._promisesMap.get(b).cancel(),this._promisesMap["delete"](b),a)){b=a.layer;var c=a.view;this.factory.dispose(a);a.layer=a.parent=a.view=null;this._layerViewsMap["delete"](b);b.emit("layerview-destroy",{view:c,layerView:a});c.emit("layerview-destroy",{layer:b,layerView:a})}},c}(d.declared(c));return f([d.property()],a.prototype,"ready",void 0),f([d.property()],a.prototype,"view",void 0),a=f([d.subclass("esri.views.LayerViewManager")],a)})},"esri/views/LayerViewFactory":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators dojo/Deferred dojo/when ../core/Accessor ../core/Collection ../core/Error ../core/watchUtils".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g){a=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;return b.creationRequests=new l,b.paused=!0,b}return m(d,a),d.prototype.initialize=function(){var a=this;g.whenFalse(this,"paused",function(){a.creationRequests.toArray().forEach(a._processRequest,a)},!0)},d.prototype.destroy=function(){this.creationRequests.drain(function(a){return a.deferred.cancel(void 0)})},Object.defineProperty(d.prototype,"working",{get:function(){return 0<this.creationRequests.length},
enumerable:!0,configurable:!0}),d.prototype.create=function(a,d){var g=this.getLayerViewPromise(d);if(g)return g;var e=this.creationRequests,f={deferred:new c(function(){var a=new b("cancelled:layerview-create","layerview creation cancelled",{layer:d});return e.remove(f),f.creationPromise&&f.creationPromise.cancel(a),a}),view:a,layer:d,started:!1,creationPromise:null};return e.push(f),this.paused||this._processRequest(f),f.deferred.promise},d.prototype.dispose=function(a){a.layer.destroyLayerView(a)},
d.prototype.getLayerViewPromise=function(a){var b=this.creationRequests&&this.creationRequests.find(function(b){return b.layer===a});return b&&b.deferred.promise},d.prototype._processRequest=function(a){var c=this;if(!a.started){a.started=!0;var d=a.deferred,g=a.layer,e=a.view;g.load().then(function(b){return d.isCanceled()?void 0:(a.creationPromise=b.createLayerView(e),a.creationPromise)}).then(function(b){return d.isCanceled()?b:a.creationPromise=n(b)}).otherwise(function(a){d.isCanceled()||d.reject(new b("layerview:create-error",
"layerview creation failed",{layer:g,error:a}))}).then(function(b){return c.creationRequests&&c.creationRequests.remove(a),d.isFulfilled()?b&&c.dispose(b):d.resolve(b),b})}},d}(d.declared(e));return f([d.property()],a.prototype,"creationRequests",void 0),f([d.property()],a.prototype,"paused",void 0),f([d.property()],a.prototype,"view",void 0),f([d.property({dependsOn:["paused","creationRequests.length"],readOnly:!0})],a.prototype,"working",null),a=f([d.subclass("esri.views.LayerViewFactory")],a)})},
"esri/views/BasemapView":function(){define(["../core/Accessor","../core/Collection","../core/watchUtils"],function(a,h,m){return a.createSubclass({declaredClass:"esri.views.BasemapView",properties:{view:{},baseLayerViews:{type:h},referenceLayerViews:{type:h}},constructor:function(){this._loadingHdl=m.init(this,"view.map.basemap",this._loadBasemap)},getDefaults:function(){return{baseLayerViews:[],referenceLayerViews:[]}},destroy:function(){this.view=null;this._loadingHdl&&(this._loadingHdl.remove(),
this._loadingHdl=null)},_suspendedGetter:function(){return this.view?this.view.suspended:!0},_loadBasemap:function(a){a&&a.load()}})})},"esri/views/GroundView":function(){define(["../core/Accessor","../core/Collection"],function(a,h){return a.createSubclass({declaredClass:"esri.views.GroundView",properties:{view:{},layerViews:{type:h},suspended:{get:function(){return this.view?this.view.suspended:!0}}},getDefaults:function(){return{layerViews:[]}},destroy:function(){this.view=null}})})},"esri/views/support/DefaultsFromMap":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators dojo/_base/lang ../../core/lang ../../core/watchUtils ../../core/Accessor ../../core/HandleRegistry ../../geometry/HeightModelInfo".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g){function q(a){switch(a.type){case "elevation":case "integrated-mesh":case "point-cloud":case "scene":return!0;default:return void 0!==a.hasZ}}a=t=function(a){function d(c){c=a.call(this)||this;return c.isSpatialReferenceDone=!1,c.isHeightModelInfoDone=!1,c.isTileInfoDone=!1,c.spatialReference=null,c.extent=null,c.heightModelInfo=null,c.mapCollectionPaths=t.DefaultMapCollectionPaths.slice(),c.tileInfo=null,c._handles=new b,c._waitTask=null,c._isStarted=!1,c}return m(d,
a),d.prototype.normalizeCtorArgs=function(a){return a=c.mixin({},a),this._set("view",a.view),delete a.view,a},d.prototype.initialize=function(){var a=this;this.watch("mapCollectionPaths",function(){a._isStarted&&(a.reset(),a.start())})},d.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null,this._isStarted=!1);this._cancelLoading()},d.prototype.reset=function(){this._handles.removeAll();this._isStarted=!1;this._set("isSpatialReferenceDone",!1);this._set("isHeightModelInfoDone",
!1);this._set("isTileInfoDone",!1);this._set("spatialReference",null);this._set("extent",null);this._set("heightModelInfo",null);this._set("tileInfo",null)},d.prototype.start=function(){this._handles.removeAll();this._isStarted=!0;for(var a=this._updateLayerChange.bind(this),b=0,c=this.mapCollectionPaths;b<c.length;b++)this._handles.add(e.on(this.view,"map."+c[b],"change",a,a,a))},d.prototype.supportedSpatialReferenceForLayer=function(a){return a.spatialReference&&this.view.isSpatialReferenceSupported(a.spatialReference,
a)?a.spatialReference:void 0},d.prototype._ownerNameFromCollectionName=function(a){var b=a.lastIndexOf(".");return-1===b?"view":"view."+a.slice(0,b)},d.prototype._ensureLoadedOwnersFromCollectionName=function(a){var b;a=this._ownerNameFromCollectionName(a).split(".");for(var c=0;c<a.length&&(b=this.get(a.slice(0,c+1).join(".")),b);c++)if(b.load&&!b.isFulfilled())return{owner:null,loading:b.load()};return{owner:b}},d.prototype._cancelLoading=function(){this._waitTask=null},d.prototype._updateWhen=
function(a){var b=this,c=!0,d=!1,g=a.always(function(){c?d=!0:g===b._waitTask&&b._update()});return c=!1,d||(this._waitTask=g),d},d.prototype._updateLayerChange=function(){this.isSpatialReferenceDone&&!this.spatialReference&&this._set("isSpatialReferenceDone",!1);this._update()},d.prototype._update=function(){var a=this;if(this._cancelLoading(),!this.isSpatialReferenceDone){var b=this._processMapCollections(function(b){return a._processSpatialReferenceSource(b)});b||this._set("isSpatialReferenceDone",
!0);this.isSpatialReferenceDone&&!this.spatialReference&&this.defaultSpatialReference&&this._set("spatialReference",this.defaultSpatialReference)}null==this.heightModelInfo&&(b=!1,this.view.isHeightModelInfoRequired()&&(b=this._processMapCollections(function(b){return a._processHeightModelInfoSource(b)},function(a){return null!=a.layers||q(a)||void 0!==a.heightModelInfo})),b||this._set("isHeightModelInfoDone",!0));null==this.tileInfo&&(b=!1,this.view.isTileInfoRequired()&&(b=this._deriveTileInfo()),
b||this._set("isTileInfoDone",!0))},d.prototype._processMapCollections=function(a,b){for(var c=0,d=this.mapCollectionPaths;c<d.length;c++){var g="map."+d[c],e=this._ensureLoadedOwnersFromCollectionName(g);if(e.loading&&!this._updateWhen(e.loading))return!0;e=e.owner;if(!(!e||e.isRejected&&e.isRejected())&&(g=this.view.get(g))&&this._processMapCollection(g,a,b))return!0}return!1},d.prototype._processMapCollection=function(a,b,c){for(var d=0;d<a.length;d++){var g=a.getItemAt(d),e=null!=c&&!c(g);if(!e&&
g.load&&!g.isFulfilled()&&!this._updateWhen(g.load())||!e&&(!g.load||g.isResolved())&&(b(g)||g.layers&&this._processMapCollection(g.layers,b)))return!0}return!1},d.prototype._processSpatialReferenceSource=function(a){var b=a.fullExtent;a=this.supportedSpatialReferenceForLayer(a);return!a&&this.extent||!b||this._set("extent",b),a?(this._set("spatialReference",a),this._set("isSpatialReferenceDone",!0),!0):!1},d.prototype._processHeightModelInfoSource=function(a){return(a=a.heightModelInfo?a.heightModelInfo:
(null!=a.hasZ?a.hasZ:q(a))?n.clone(w):null)?(this._set("heightModelInfo",a),this._set("isHeightModelInfoDone",!0),!0):!1},d.prototype._deriveTileInfo=function(){if(!this.isSpatialReferenceDone)return!0;var a=this.get("view.map");if(!a)return!0;var b=a.basemap,c=b&&b.get("baseLayers.0"),a=a.get("layers.0"),d=!1,g=null;return b?b.loaded?c?c.loaded?g=c.tileInfo:(this._updateWhen(c.load()),d=!0):a?a.loaded?g=a.tileInfo:(this._updateWhen(a.load()),d=!0):d=!0:(this._updateWhen(b.load()),d=!0):a&&(a.loaded?
g=a.tileInfo:(this._updateWhen(a.load()),d=!0)),g&&!g.spatialReference.equals(this.spatialReference)&&(g=null),d||this._set("tileInfo",g),d},d}(d.declared(l));a.DefaultMapCollectionPaths=["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"];f([d.property({readOnly:!0})],a.prototype,"isSpatialReferenceDone",void 0);f([d.property({readOnly:!0})],a.prototype,"isHeightModelInfoDone",void 0);f([d.property({readOnly:!0})],a.prototype,"isTileInfoDone",void 0);f([d.property({readOnly:!0})],
a.prototype,"view",void 0);f([d.property({readOnly:!0})],a.prototype,"spatialReference",void 0);f([d.property({readOnly:!0})],a.prototype,"extent",void 0);f([d.property({readOnly:!0})],a.prototype,"heightModelInfo",void 0);f([d.property()],a.prototype,"mapCollectionPaths",void 0);f([d.property()],a.prototype,"defaultSpatialReference",void 0);f([d.property({readOnly:!0})],a.prototype,"tileInfo",void 0);a=t=f([d.subclass("esri.views.support.DefaultsFromMap")],a);var t,w=new g({heightModel:"gravity-related-height"});
return a})},"esri/views/ViewAnimation":function(){define("../core/declare dojo/Deferred ../core/Accessor ../core/Promise ../core/Scheduler ../core/Error".split(" "),function(a,h,m,f,d,c){var n={RUNNING:"running",FINISHED:"finished",STOPPED:"stopped"};a=a([m,f],{declaredClass:"esri.views.ViewAnimation",properties:{state:{value:null},target:{value:null}},constructor:function(){this._dfd=new h;this.addResolvingPromise(this._dfd.promise)},initialize:function(){this.state=n.RUNNING},stop:function(){this.state!==
n.STOPPED&&this.state!==n.FINISHED&&(this.state=n.STOPPED,d.schedule(this._dfd.reject.bind(this._dfd,new c("ViewAnimation stopped"))))},finish:function(){this.state!==n.STOPPED&&this.state!==n.FINISHED&&(this.state=n.FINISHED,d.schedule(this._dfd.resolve))}});return a.State=n,a})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/Scheduler","./FrameBudget"],function(a,h,m,f){return function(){function a(a){var c=this;this.view=a;this._frameTaskHandle=null;this._budget=new f(6);
this.budget=6;this.updateEnabled=this.stationary=!0;this.prepare=function(){c._updateParameters.state=c.view.state;c._updateParameters.stationary=c.view.stationary;c._updateParameters.devicePixelRatio=window.devicePixelRatio;c._budget.reset(c.budget)};this.update=function(){if(c.updateEnabled){for(var a=c._budget,d=c.view,b=d.allLayerViews.toArray().filter(function(a){return a.isFulfilled()&&null==a.layerViews}),g=b.length,f=d.state,n=0;n<b.length;n++)if(d=b[n],d.attached){var h=c._layerViewsState[d.uid];
null!=h&&(c.stationary||d.moving)||(d.moving=!0,d.moveStart());h!==f.id&&d.viewChange();c.stationary&&d.moving&&(d.moving=!1,d.moveEnd());c._layerViewsState[d.uid]=f.id}f=c._layerViewsTrash;for(n=0;n<f.length;n++)d=f[n],c._detachLayerView(d);for(n=f.length=0;g>n;n++)d=b[n],d.isFulfilled()&&!d.attached&&c._attachLayerView(d);b=c._layerViewsToUpdate;g=b.slice();d=c._updateParameters;for(c._layerViewsToUpdate.length=0;!a.done&&0<g.length;)g.shift().processUpdate(d);0<g.length&&b.unshift.apply(b,g);0===
b.length&&0===f.length&&c._frameTaskHandle.pause()}};a.watch("ready",function(a){a?c.start():c.stop()})}return a.prototype.destroy=function(){this.stop()},a.prototype.start=function(){var a=this;this._updateParameters={budget:this._budget,state:this.view.state,devicePixelRatio:window.devicePixelRatio,stationary:!0};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._layerViewsState={};this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(c){Array.prototype.push.apply(a._layerViewsTrash,
c.removed);a.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(c){a.stationary=c;a.requestFrame()});this._frameTaskHandle=m.addFrameTask(this)},a.prototype.stop=function(){var a=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(c){return a._detachLayerView(c)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=
this._layerViewsTrash=this._layerViewsToUpdate=this._layerViewsState=null,this.stationary=!0)},a.prototype.requestLayerViewUpdate=function(a){this._layerViewsToUpdate.push(a);this.requestFrame()},a.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.isPaused()&&this._frameTaskHandle.resume()},a.prototype._attachLayerView=function(a){a.attached||(a.attached=!0,a.moving=!1,a.attach())},a.prototype._detachLayerView=function(a){a.attached&&(a.detach(),a.attached=!1,a.moving=
!1)},a}()})},"esri/views/2d/FrameBudget":function(){define(["require","exports","../../core/now"],function(a,h,m){return function(){function a(a){void 0===a&&(a=Number.MAX_VALUE);this._budget=this._begin=0;this.enabled=!0;this.reset(a)}return a.now=function(){return m()},Object.defineProperty(a.prototype,"done",{get:function(){return this.enabled&&this.elapsed>=this._budget},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"elapsed",{get:function(){return m()-this._begin},enumerable:!0,
configurable:!0}),Object.defineProperty(a.prototype,"remaining",{get:function(){return Math.max(this._budget-this.elapsed,0)},enumerable:!0,configurable:!0}),a.prototype.reset=function(a){void 0===a&&(a=Number.MAX_VALUE);this._begin=m();this._budget=this.enabled?a:Number.MAX_VALUE},a}()})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./viewpointUtils ./ViewState ./libs/gl-matrix/vec2 ./libs/gl-matrix/mat2d ./libs/gl-matrix/common ../../core/Accessor".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g){var q=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.left=0,b.top=0,b.right=0,b.bottom=0,b}return m(b,a),b}(d.declared(g)),q=f([d.subclass("esri.views.2d.PaddedViewState.Padding")],q);a=function(a){function d(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;return b.content=new n,b.padding=new q,b.size=e.fromValues(0,0),b}return m(d,a),Object.defineProperty(d.prototype,"clipRect",{get:function(){var a=
this.worldScreenWidth;if(!a)return null;var c=b.toRadian(this.rotation),d=this.width*Math.abs(Math.cos(c))+this.height*Math.abs(Math.sin(c));if(a>d)return null;var g=e.clone(this.screenCenter),k=l.fromTranslation(l.create(),g);return l.rotate(k,k,c),e.negate(g,g),l.translate(k,k,g),e.transformMat2d(g,this.paddedScreenCenter,k),{top:-Math.round(d),left:Math.round(g[0]-.5*a),right:Math.round(g[0]+.5*a),bottom:+Math.round(d)}},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"padding",
{set:function(a){this._set("padding",a||new q);this._updateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"size",{set:function(a){this._set("size",a);this._updateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"paddedScreenCenter",{get:function(){var a=this.content.size,b=this.padding,a=e.scale(e.create(),a,.5);return a[0]+=b.left,a[1]+=b.top,a},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"viewpoint",{set:function(a){var b=
a.clone();this.content.viewpoint=a;c.addPadding(b,a,this._get("size"),this._get("padding"));this._set("viewpoint",c.addPadding(b.clone(),a,this._get("size"),this._get("padding")))},enumerable:!0,configurable:!0}),d.prototype._updateContent=function(){var a=e.create(),b=this._get("size"),c=this._get("padding");if(b&&c){var d=this.content;e.set(a,c.left+c.right,c.top+c.bottom);e.subtract(a,b,a);d.size=a;(a=d.viewpoint)&&(this.viewpoint=a)}},d}(d.declared(n));return f([d.shared({transform:{dependsOn:["padding"]}})],
a.prototype,"properties",void 0),f([d.property({dependsOn:["worldScreenWidth","rotation","paddedScreenCenter","screenCenter"],readOnly:!0})],a.prototype,"clipRect",null),f([d.property()],a.prototype,"content",void 0),f([d.property({type:q})],a.prototype,"padding",null),f([d.property()],a.prototype,"size",null),f([d.property({dependsOn:["size","padding"],readOnly:!0})],a.prototype,"paddedScreenCenter",null),f([d.property()],a.prototype,"viewpoint",null),a=f([d.subclass("esri.views.2d.PaddedViewState")],
a)})},"esri/views/2d/viewpointUtils":function(){define("require exports ./libs/gl-matrix/common ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2 ../../Viewpoint ../../core/promiseUtils ../../core/Error ../../geometry/SpatialReference ../../geometry/Geometry ../../geometry/Point ../../geometry/Extent ../../geometry/support/webMercatorUtils ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q,
t,w,v,r){function p(a,b,c,g){g&&c&&!g.equals(c)&&t.canProject(g,c)&&g.isWebMercator?g.isWebMercator?(c=b[1],a=(89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(m.toRadian(c)),d.set(a,m.toRadian(b[0])*G,.5*G*Math.log((1+c)/(1-c))))):(c=m.toDegree(b[0]/G),a=d.set(a,c-360*Math.floor((c+180)/360),m.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/G))))):a=d.copy(a,b);return a}function u(a){return a.wkid?a:a.spatialReference||l.WGS84}function k(a,b){return b.type?d.set(a,b.x,b.y):d.copy(a,b)}
function x(a,b){return Math.max(a.width/b[0],a.height/b[1])*H(a.spatialReference)}function B(a,c,d){var e;if(!a)return null;if(Array.isArray(a)&&2===a.length&&"number"==typeof a[0]&&"number"==typeof a[1])return new g(a);if(a.reduce)return a.reduce(function(a,b){return B(b,c,a)},d);if(a instanceof b?e=a:a.geometry&&(e=a.geometry),!e)return null;var k;if(k="point"===e.type?new q({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference}):e.extent,!k)return null;a=t.canProject(k,c);if(!k.spatialReference.equals(c)&&
a)k=t.project(k,c);else if(!a)return null;return d=d?d.union(k):k.clone()}function y(a,e){if(!a)return new c({targetGeometry:new g,scale:0,rotation:0});var f=e.spatialReference,l=e.size,n=e.viewpoint,h=e.constraints,m=null;"esri.Viewpoint"===a.declaredClass?m=a:a.viewpoint?m=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(m=a.target);var q=null;m&&m.targetGeometry?q=m.targetGeometry:a instanceof b?q=a:(a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target")))&&
(q=B(a.center,f)||B(a.extent,f)||B(a.target,f)||B(a,f));!q&&n&&n.targetGeometry?q=n.targetGeometry:!q&&e.extent&&(q=e.extent);var w=u(q);if(f||(f=u(e.spatialReference||e.extent||q)),!r.canProject(q,f)&&w&&!w.equals(f))return null;var t=k(d.create(),q.center?q.center:q),f=new g(p(t,t,w,f),f),w=null,w=m&&m.targetGeometry&&"point"===m.targetGeometry.type?m.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&h&&h.effectiveLODs?h.zoomToScale(a.zoom):Array.isArray(q)||
"point"===q.type||"extent"===q.type&&0===q.width&&0===q.height?e.extent?x(e.extent,l):n.scale:x(q.extent,l);e=0;return m?e=m.rotation:a.hasOwnProperty("rotation")?e=a.rotation:n&&(e=n.rotation),h&&(h.rotationEnabled||(e=0),h.snapToZoom&&(w=h.snapScale(w)),0!==h.effectiveMinScale&&(w=Math.min(h.effectiveMinScale,w)),0!==h.effectiveMaxScale&&(w=Math.max(h.effectiveMaxScale,w))),new c({targetGeometry:f,scale:w,rotation:e})}function z(a,b){var c=a.targetGeometry,d=b.targetGeometry;return c.x=d.x,c.y=
d.y,c.spatialReference=d.spatialReference,a.scale=b.scale,a.rotation=b.rotation,a}function A(a,b,c){return c?d.set(a,.5*(b[0]-c.right+c.left),.5*(b[1]-c.bottom+c.top)):d.scale(a,b,.5)}function D(a,b,c,d){return h.getTransform(a,b,c,d),f.invert(a,a)}function F(a,b,c){var g=m.toRadian(b.rotation)||0;b=Math.abs(Math.cos(g));g=Math.abs(Math.sin(g));return d.set(a,Math.round(c[1]*g+c[0]*b),Math.round(c[1]*b+c[0]*g))}function C(a){return a.scale*(1/((w.getUnitValueForSR(a.targetGeometry.spatialReference)||
K)*Q*96))}function H(a){return(w.getUnitValueForSR(a)||K)*Q*96}function I(a){return a.isWrappable?(a=v.getInfo(a),a.valid[1]-a.valid[0]):0}function M(a,b){return Math.round(I(a)/b)}Object.defineProperty(h,"__esModule",{value:!0});var Q=39.37,K=6370997*Math.PI/180,G=6378137,N=180/Math.PI;h.create=y;h.copy=z;h.getAnchor=A;h.getExtent=function(){var a=d.create();return function(b,c,d){var g=c.targetGeometry;k(a,g);c=.5*C(c);return b.xmin=a[0]-c*d[0],b.ymin=a[1]-c*d[1],b.xmax=a[0]+c*d[0],b.ymax=a[1]+
c*d[1],b.spatialReference=g.spatialReference,b}}();h.setExtent=function(a,b,c,d,g){return h.centerAt(a,b,c.center),a.scale=x(c,d),g&&g.constraints&&g.constraints.constrain(a),a};h.getOuterExtent=function(){var a=d.create(),b=d.create();return function(c,d,g){k(a,d.targetGeometry);F(b,d,g);g=.5*C(d);return c.set({xmin:a[0]-g*b[0],ymin:a[1]-g*b[1],xmax:a[0]+g*b[0],ymax:a[1]+g*b[1],spatialReference:d.targetGeometry.spatialReference}),c}}();h.getClippedExtent=function(){var a=d.create(),b=d.create();
return function(c,d,g){var e=C(d),f=d.targetGeometry.spatialReference,l=M(f,e);k(a,d.targetGeometry);F(b,d,g);f.isWrappable&&b[0]>l&&(b[0]=l);d=.5*e;return c.set({xmin:a[0]-d*b[0],ymin:a[1]-d*b[1],xmax:a[0]+d*b[0],ymax:a[1]+d*b[1],spatialReference:f}),c}}();h.getOuterSize=F;h.getPaddingScreenTranslation=function(){var a=d.create();return function(b,c,g){return d.sub(b,d.scale(b,c,.5),A(a,c,g))}}();var S=function(){var a=f.create(),b=d.create();return function(c,g,e,k){var l=C(g);g=m.toRadian(g.rotation)||
0;return d.set(b,l,l),f.fromScaling(a,b),f.rotate(a,a,g),f.translate(a,a,h.getPaddingScreenTranslation(b,e,k)),f.translate(a,a,[0,k.top-k.bottom]),d.set(c,a[4],a[5])}}();h.getResolution=C;h.getResolutionToScaleFactor=H;h.getMatrix=function(){var a=d.create(),b=d.create(),c=d.create();return function(g,e,k,l,n,h){return d.negate(a,e),d.scale(b,k,.5*h),d.set(c,1/l*h,-1/l*h),f.identity(g),f.translate(g,g,b),n&&f.rotate(g,g,n),f.scale(g,g,c),f.translate(g,g,a),g}}();h.getTransform=function(){var a=d.create();
return function(b,c,d,g){var e=C(c),f=m.toRadian(c.rotation)||0;return k(a,c.targetGeometry),h.getMatrix(b,a,d,e,f,g)}}();h.getTransformNoRotation=function(){var a=d.create();return function(b,c,d,g){var e=C(c);return k(a,c.targetGeometry),h.getMatrix(b,a,d,e,0,g)}}();h.getWorldWidth=I;h.getWorldScreenWidth=M;h.createAsync=function(a,b){if(a=y(a,b))return n.resolve(a);a=new e("viewpointUtils-createAsync:different-spatialReference","Target spatialReference cannot be projected and is different from out spatialReference");
return n.reject(a)};h.angleBetween=function(){var a=d.create(),b=d.create(),c=d.create();return function(g,e,k){d.subtract(a,g,e);d.normalize(a,a);d.subtract(b,g,k);d.normalize(b,b);d.cross(c,a,b);g=Math.acos(d.dot(a,b)/(d.length(a)*d.length(b)))*N;return 0>c[2]&&(g=-g),isNaN(g)&&(g=0),g}}();h.addPadding=function(){var a=d.create();return function(b,c,d,g){var e=b.targetGeometry;return z(b,c),S(a,c,d,g),e.x+=a[0],e.y+=a[1],b}}();h.removePadding=function(){var a=d.create();return function(b,c,d,g){var e=
b.targetGeometry;return z(b,c),S(a,c,d,g),e.x-=a[0],e.y-=a[1],b}}();h.centerAt=function(){var a=d.create();return function(b,c,d){z(b,c);c=b.targetGeometry;var g=u(d),e=u(c);return k(a,d),p(a,a,g,e),c.x=a[0],c.y=a[1],b}}();h.pixelSizeAt=function(a,b,c){return C(b)};h.resize=function(){var a=d.create();return function(b,c,g,e,k){k||(k="center");d.sub(a,g,e);d.scale(a,a,.5);g=a[0];e=a[1];switch(k){case "center":d.set(a,0,0);break;case "left":d.set(a,-g,0);break;case "top":d.set(a,0,e);break;case "right":d.set(a,
g,0);break;case "bottom":d.set(a,0,-e);break;case "top-left":d.set(a,-g,e);break;case "bottom-left":d.set(a,-g,-e);break;case "top-right":d.set(a,g,e);break;case "bottom-right":d.set(a,g,-e)}return h.translateBy(b,c,a),b}}();h.rotateBy=function(a,b,c){return z(a,b),a.rotation+=c,a};h.rotateTo=function(a,b,c){return z(a,b),a.rotation=c,a};h.scaleBy=function(){var a=d.create();return function(b,c,g,e,k){return z(b,c),0!==g&&(h.toMap(a,e,c,k),b.scale=c.scale*g,h.toScreen(a,a,b,k),h.translateBy(b,b,d.set(a,
a[0]-e[0],e[1]-a[1]))),b}}();h.scaleTo=function(a,b,c){return z(a,b),a.scale=c,a};h.scaleAndRotateBy=function(){var a=d.create();return function(b,c,g,e,k,f){return z(b,c),0!==g&&(h.toMap(a,k,c,f),b.scale=c.scale*g,b.rotation+=e,h.toScreen(a,a,b,f),h.translateBy(b,b,d.set(a,a[0]-k[0],k[1]-a[1]))),b}}();h.padAndScaleAndRotateBy=function(){var a=d.create(),b=d.create();return function(c,g,e,k,f,l,n){return h.getPaddingScreenTranslation(b,l,n),d.add(a,f,b),k?h.scaleAndRotateBy(c,g,e,k,a,l):h.scaleBy(c,
g,e,a,l)}}();h.toMap=function(){var a=f.create();return function(b,c,g,e){return d.transformMat2d(b,c,D(a,g,e,1))}}();h.toScreen=function(){var a=f.create();return function(b,c,g,e){return d.transformMat2d(b,c,h.getTransform(a,g,e,1))}}();h.translateBy=function(){var a=d.create(),b=f.create();return function(c,g,e){z(c,g);var k=C(g),l=c.targetGeometry;return f.fromRotation(b,m.toRadian(g.rotation)||0),f.scale(b,b,d.fromValues(k,k)),d.transformMat2d(a,e,b),l.x+=a[0],l.y+=a[1],c}}()})},"esri/views/2d/libs/gl-matrix/common":function(){define([],
function(){if(!a)var a=1E-6;if(!h)var h="undefined"!=typeof Float32Array?Float32Array:Array;if(!m)var m=Math.random;var f={GLMAT_EPSILON:a,GLMAT_ARRAY_TYPE:h,GLMAT_RANDOM:m,setMatrixArrayType:function(a){f.GLMAT_ARRAY_TYPE=a}},d=Math.PI/180,c=180/Math.PI;return f.toRadian=function(a){return a*d},f.toDegree=function(a){return a*c},f.setMatrixArrayType(Array),f})},"esri/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],function(a){var h=a.GLMAT_ARRAY_TYPE;a={};return a.create=function(){var a=
new h(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},a.clone=function(a){var f=new h(6);return f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],f[4]=a[4],f[5]=a[5],f},a.copy=function(a,f){return a[0]=f[0],a[1]=f[1],a[2]=f[2],a[3]=f[3],a[4]=f[4],a[5]=f[5],a},a.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},a.invert=function(a,f){var d=f[0],c=f[1],n=f[2],e=f[3],l=f[4];f=f[5];var b=d*e-c*n;return b?(b=1/b,a[0]=e*b,a[1]=-c*b,a[2]=-n*b,a[3]=d*b,a[4]=(n*f-e*l)*b,a[5]=(c*l-d*f)*
b,a):null},a.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},a.multiply=function(a,f,d){var c=f[0],n=f[1],e=f[2],l=f[3],b=f[4];f=f[5];var g=d[0],h=d[1],m=d[2],w=d[3],v=d[4];d=d[5];return a[0]=c*g+e*h,a[1]=n*g+l*h,a[2]=c*m+e*w,a[3]=n*m+l*w,a[4]=c*v+e*d+b,a[5]=n*v+l*d+f,a},a.mul=a.multiply,a.rotate=function(a,f,d){var c=f[0],n=f[1],e=f[2],l=f[3],b=f[4];f=f[5];var g=Math.sin(d);d=Math.cos(d);return a[0]=c*d+e*g,a[1]=n*d+l*g,a[2]=c*-g+e*d,a[3]=n*-g+l*d,a[4]=b,a[5]=f,a},a.scale=function(a,f,d){var c=
f[1],n=f[2],e=f[3],l=f[4],b=f[5],g=d[0];d=d[1];return a[0]=f[0]*g,a[1]=c*g,a[2]=n*d,a[3]=e*d,a[4]=l,a[5]=b,a},a.translate=function(a,f,d){var c=f[0],n=f[1],e=f[2],l=f[3],b=f[4];f=f[5];var g=d[0];d=d[1];return a[0]=c,a[1]=n,a[2]=e,a[3]=l,a[4]=c*g+e*d+b,a[5]=n*g+l*d+f,a},a.fromRotation=function(a,f){var d=Math.sin(f);f=Math.cos(f);return a[0]=f,a[1]=d,a[2]=-d,a[3]=f,a[4]=0,a[5]=0,a},a.fromScaling=function(a,f){return a[0]=f[0],a[1]=0,a[2]=0,a[3]=f[1],a[4]=0,a[5]=0,a},a.fromTranslation=function(a,f){return a[0]=
1,a[1]=0,a[2]=0,a[3]=1,a[4]=f[0],a[5]=f[1],a},a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},a})},"esri/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(a){var h=a.GLMAT_ARRAY_TYPE,m=a.GLMAT_RANDOM,f={};return f.create=function(){var a=new h(2);return a[0]=0,a[1]=0,a},f.clone=function(a){var c=
new h(2);return c[0]=a[0],c[1]=a[1],c},f.fromValues=function(a,c){var d=new h(2);return d[0]=a,d[1]=c,d},f.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a},f.set=function(a,c,f){return a[0]=c,a[1]=f,a},f.add=function(a,c,f){return a[0]=c[0]+f[0],a[1]=c[1]+f[1],a},f.subtract=function(a,c,f){return a[0]=c[0]-f[0],a[1]=c[1]-f[1],a},f.sub=f.subtract,f.multiply=function(a,c,f){return a[0]=c[0]*f[0],a[1]=c[1]*f[1],a},f.mul=f.multiply,f.divide=function(a,c,f){return a[0]=c[0]/f[0],a[1]=c[1]/f[1],a},f.div=
f.divide,f.min=function(a,c,f){return a[0]=Math.min(c[0],f[0]),a[1]=Math.min(c[1],f[1]),a},f.max=function(a,c,f){return a[0]=Math.max(c[0],f[0]),a[1]=Math.max(c[1],f[1]),a},f.scale=function(a,c,f){return a[0]=c[0]*f,a[1]=c[1]*f,a},f.scaleAndAdd=function(a,c,f,e){return a[0]=c[0]+f[0]*e,a[1]=c[1]+f[1]*e,a},f.distance=function(a,c){var d=c[0]-a[0];a=c[1]-a[1];return Math.sqrt(d*d+a*a)},f.dist=f.distance,f.squaredDistance=function(a,c){var d=c[0]-a[0];a=c[1]-a[1];return d*d+a*a},f.sqrDist=f.squaredDistance,
f.length=function(a){var c=a[0];a=a[1];return Math.sqrt(c*c+a*a)},f.len=f.length,f.squaredLength=function(a){var c=a[0];a=a[1];return c*c+a*a},f.sqrLen=f.squaredLength,f.negate=function(a,c){return a[0]=-c[0],a[1]=-c[1],a},f.inverse=function(a,c){return a[0]=1/c[0],a[1]=1/c[1],a},f.normalize=function(a,c){var d=c[0],e=c[1],d=d*d+e*e;return 0<d&&(d=1/Math.sqrt(d),a[0]=c[0]*d,a[1]=c[1]*d),a},f.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]},f.cross=function(a,c,f){c=c[0]*f[1]-c[1]*f[0];return a[0]=a[1]=
0,a[2]=c,a},f.lerp=function(a,c,f,e){var d=c[0];c=c[1];return a[0]=d+e*(f[0]-d),a[1]=c+e*(f[1]-c),a},f.random=function(a,c){c=c||1;var d=2*m()*Math.PI;return a[0]=Math.cos(d)*c,a[1]=Math.sin(d)*c,a},f.transformMat2=function(a,c,f){var d=c[0];c=c[1];return a[0]=f[0]*d+f[2]*c,a[1]=f[1]*d+f[3]*c,a},f.transformMat2d=function(a,c,f){var d=c[0];c=c[1];return a[0]=f[0]*d+f[2]*c+f[4],a[1]=f[1]*d+f[3]*c+f[5],a},f.transformMat3=function(a,c,f){var d=c[0];c=c[1];return a[0]=f[0]*d+f[3]*c+f[6],a[1]=f[1]*d+f[4]*
c+f[7],a},f.transformMat4=function(a,c,f){var d=c[0];c=c[1];return a[0]=f[0]*d+f[4]*c+f[12],a[1]=f[1]*d+f[5]*c+f[13],a},f.forEach=function(){var a=f.create();return function(c,d,e,f,b,g){d||(d=2);e||(e=0);for(f=f?Math.min(f*d+e,c.length):c.length;f>e;e+=d)a[0]=c[e],a[1]=c[e+1],b(a,a,g),c[e]=a[0],c[e+1]=a[1];return c}}(),f.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},f})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../geometry/Extent ./viewpointUtils ./libs/gl-matrix/vec2 ./libs/gl-matrix/mat2d".split(" "),
function(a,h,m,f,d,c,n,e,l,b){a=g=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.pixelRatio=1,b.size=[0,0],b}return m(c,a),Object.defineProperty(c.prototype,"center",{get:function(){var a=this.viewpoint.targetGeometry;return l.set(l.create(),a.x,a.y)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"extent",{get:function(){return e.getExtent(new n,this.viewpoint,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"height",
{get:function(){return this.size?this.size[1]:0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"id",{get:function(){return this._get("id")+1},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"inverseTransform",{get:function(){return b.invert(b.create(),this.transform)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"latitude",{get:function(){return this.viewpoint.targetGeometry.latitude},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,
"longitude",{get:function(){return this.viewpoint.targetGeometry.longitude},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"resolution",{get:function(){return e.getResolution(this.viewpoint)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rotation",{get:function(){return this.viewpoint.rotation},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"scale",{get:function(){return this.viewpoint.scale},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,
"screenCenter",{get:function(){return l.scale(l.create(),this.size,.5)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"spatialReference",{get:function(){return this.viewpoint.targetGeometry.spatialReference},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"transform",{get:function(){return e.getTransform(b.create(),this.viewpoint,this.size,this.pixelRatio)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"transformNoRotation",{get:function(){return e.getTransformNoRotation(b.create(),
this.viewpoint,this.size,this.pixelRatio)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"clippedExtent",{get:function(){return e.getClippedExtent(new n,this.viewpoint,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"width",{get:function(){return this.size?this.size[0]:0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"worldScreenWidth",{get:function(){return e.getWorldScreenWidth(this.spatialReference,this.resolution)},enumerable:!0,
configurable:!0}),Object.defineProperty(c.prototype,"worldWidth",{get:function(){return e.getWorldWidth(this.spatialReference)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"wrappable",{get:function(){return!!this.spatialReference&&this.spatialReference.isWrappable},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"x",{get:function(){return this.center[0]},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"y",{get:function(){return this.center[1]},
enumerable:!0,configurable:!0}),c.prototype.copy=function(a){return this.viewpoint&&this.size?(this._set("viewpoint",e.copy(this.viewpoint,a.viewpoint)),this._set("size",l.copy(this.size,a.size))):(this.viewpoint=a.viewpoint.clone(),l.copy(this.size,a.size)),this._set("pixelRatio",a.pixelRatio),this},c.prototype.clone=function(){return new g({viewpoint:this.viewpoint.clone(),size:l.clone(this.size)})},c.prototype.toMap=function(a,b){return l.transformMat2d(a,b,this.inverseTransform)},c.prototype.toScreen=
function(a,b){return l.transformMat2d(a,b,this.transform)},c.prototype.pixelSizeAt=function(a){return e.pixelSizeAt(a,this.viewpoint,this.size)},c}(d.declared(c));f([d.property({dependsOn:["viewpoint"]})],a.prototype,"center",null);f([d.property({readOnly:!0,dependsOn:["viewpoint","size"]})],a.prototype,"extent",null);f([d.property({readOnly:!0,dependsOn:["size"]})],a.prototype,"height",null);f([d.property({value:0,readOnly:!0,dependsOn:["transform"]})],a.prototype,"id",null);f([d.property({readOnly:!0,
dependsOn:["transform"]})],a.prototype,"inverseTransform",null);f([d.property({readOnly:!0,dependsOn:["viewpoint"]})],a.prototype,"latitude",null);f([d.property({readOnly:!0,dependsOn:["viewpoint"]})],a.prototype,"longitude",null);f([d.property()],a.prototype,"pixelRatio",void 0);f([d.property({readOnly:!0,dependsOn:["viewpoint"]})],a.prototype,"resolution",null);f([d.property({readOnly:!0,dependsOn:["viewpoint"]})],a.prototype,"rotation",null);f([d.property({readOnly:!0,dependsOn:["viewpoint"]})],
a.prototype,"scale",null);f([d.property({readOnly:!0,dependsOn:["size"]})],a.prototype,"screenCenter",null);f([d.property()],a.prototype,"size",void 0);f([d.property({readOnly:!0,dependsOn:["viewpoint"]})],a.prototype,"spatialReference",null);f([d.property({readOnly:!0,dependsOn:["viewpoint","size","pixelRatio"]})],a.prototype,"transform",null);f([d.property({readOnly:!0,dependsOn:["viewpoint","size","pixelRatio"]})],a.prototype,"transformNoRotation",null);f([d.property()],a.prototype,"viewpoint",
void 0);f([d.property({readOnly:!0,dependsOn:["viewpoint","size"]})],a.prototype,"clippedExtent",null);f([d.property({readOnly:!0,dependsOn:["size"]})],a.prototype,"width",null);f([d.property({readOnly:!0,dependsOn:["worldWidth","resolution"]})],a.prototype,"worldScreenWidth",null);f([d.property({readOnly:!0,dependsOn:["spatialReference"]})],a.prototype,"worldWidth",null);f([d.property({readOnly:!0,dependsOn:["spatialReference"]})],a.prototype,"wrappable",null);f([d.property({readOnly:!0,dependsOn:["center"]})],
a.prototype,"x",null);f([d.property({readOnly:!0,dependsOn:["center"]})],a.prototype,"y",null);a=g=f([d.subclass("esri.views.2d.ViewState")],a);var g;return a})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Evented ../../layers/support/LOD ./constraints/ZoomConstraint ./constraints/RotationConstraint".split(" "),function(a,h,m,
f,d,c,n,e,l,b){a=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.enabled=!0,b.lods=null,b.minScale=0,b.maxScale=0,b.minZoom=-1,b.maxZoom=-1,b.rotationEnabled=!0,b.snapToZoom=!0,b}return m(c,a),c.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)},c.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)},Object.defineProperty(c.prototype,"_rotation",{get:function(){return new b({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"_zoom",{get:function(){return new l({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0}),c.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b},c.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||b>=a},c.prototype.constrain=function(a,b){return this.enabled?(this._zoom.constrain(a,b),this._rotation.constrain(a,b),a):a},c.prototype.fit=function(a){return this.enabled&&this.snapToZoom?(this._zoom.fit(a),a):a},c.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)},c.prototype.scaleToZoom=function(a){return this._zoom.scaleToZoom(a)},
c.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)},c.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)},c.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)},c}(d.declared(c,n));return f([d.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],a.prototype,"effectiveLODs",void 0),f([d.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],a.prototype,"effectiveMinScale",void 0),f([d.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],
a.prototype,"effectiveMaxScale",void 0),f([d.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],a.prototype,"effectiveMinZoom",void 0),f([d.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],a.prototype,"effectiveMaxZoom",void 0),f([d.property()],a.prototype,"enabled",void 0),f([d.property({type:[e]})],a.prototype,"lods",void 0),f([d.property()],a.prototype,"minScale",void 0),f([d.property()],a.prototype,"maxScale",void 0),f([d.property()],a.prototype,"minZoom",void 0),f([d.property()],
a.prototype,"maxZoom",void 0),f([d.property()],a.prototype,"rotationEnabled",void 0),f([d.property()],a.prototype,"snapToZoom",void 0),f([d.property()],a.prototype,"view",void 0),f([d.property({type:b,dependsOn:["rotationEnabled"]})],a.prototype,"_rotation",null),f([d.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],a.prototype,"_defaultLODs",null),f([d.property({readOnly:!0,type:l,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],
a.prototype,"_zoom",null),a=f([d.subclass("esri.views.2d.MapViewConstraints")],a)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../layers/support/LOD".split(" "),function(a,h,m,f,d,c,n){a=e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b._lodByScale={},b._scales=[],b.effectiveLODs=
null,b.effectiveMinZoom=-1,b.effectiveMaxZoom=-1,b.effectiveMinScale=0,b.effectiveMaxScale=0,b.enabled=!0,b.lods=null,b.minZoom=-1,b.maxZoom=-1,b.minScale=0,b.maxScale=0,b.snapToZoom=!0,b}return m(b,a),b.prototype.initialize=function(){var a=this,b=this.lods,c=this.minScale,d=this.maxScale,e=this.minZoom,f=this.maxZoom,l=-1,h=-1,k=!1,n=!1;if(0!==c&&0!==d&&d>c&&(y=[d,c],c=y[0],d=y[1]),!b||!b.length)return this._set("effectiveMinScale",c),void this._set("effectiveMaxScale",d);b=b.map(function(a){return a.clone()});
b.sort(function(a,b){return b.scale-a.scale});b.forEach(function(a,b){return a.level=b});for(var m,y=0,z=b;y<z.length;y++){var A=z[y];!k&&0<c&&c>=A.scale&&(l=A.level,k=!0);!n&&0<d&&d>=A.scale&&(h=m?m.level:-1,n=!0);m=A}-1===e&&(e=0===c?0:l);-1===f&&(f=0===d?b.length-1:h);e=Math.max(e,0);e=Math.min(e,b.length-1);f=Math.max(f,0);f=Math.min(f,b.length-1);e>f&&(D=[f,e],e=D[0],f=D[1]);c=b[e].scale;d=b[f].scale;b.splice(0,e);b.splice(f-e+1,b.length);b.forEach(function(b,c){a._lodByScale[b.scale]=b;a._scales[c]=
b.scale});this._set("effectiveLODs",b);this._set("effectiveMinZoom",e);this._set("effectiveMaxZoom",f);this._set("effectiveMinScale",c);this._set("effectiveMaxScale",d);var y,D},b.prototype.constrain=function(a,b){if(!this.enabled||b&&a.scale===b.scale)return a;var c=this.effectiveMinScale,d=this.effectiveMaxScale,g=a.targetGeometry,e=b&&b.targetGeometry,f=0!==c&&a.scale>c;if(0!==d&&a.scale<d||f)c=f?c:d,e&&(b=(c-b.scale)/(a.scale-b.scale),g.x=e.x+(g.x-e.x)*b,g.y=e.y+(g.y-e.y)*b),a.scale=c;return this.snapToZoom&&
this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale)),a},b.prototype.fit=function(a){if(!this.effectiveLODs)return this.constrain(a,null);var b=a.scale,c=Math.round(this.scaleToZoom(b));return.95<Math.abs(c-Math.round(c))?a.scale=this.snapToPreviousScale(b):a.scale=this.zoomToScale(Math.round(c)),a},b.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var c=Math.round(a);
return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])},b.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b,c,d=this._scales,g=0,e=d.length-1;for(g;e>g;g++){if(b=d[g],c=d[g+1],a>=b)return g+this.effectiveMinZoom;if(c===a)return g+1+this.effectiveMinZoom;if(b>a&&a>c)return g+1-(a-c)/(b-c)+this.effectiveMinZoom}return g},b.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))},b.prototype.snapToNextScale=function(a,
b){if(void 0===b&&(b=.5),!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)},b.prototype.snapToPreviousScale=function(a,b){if(void 0===b&&(b=2),!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)},b.prototype.clone=function(){return new e({enabled:this.enabled,lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})},b.prototype._getClosestScale=function(a){return this._lodByScale[a]?
this._lodByScale[a].scale:(a=this._scales.reduce(function(b,c,d,g){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]),this._lodByScale[a].scale)},b}(d.declared(c));f([d.property({readOnly:!0})],a.prototype,"effectiveLODs",void 0);f([d.property({readOnly:!0})],a.prototype,"effectiveMinZoom",void 0);f([d.property({readOnly:!0})],a.prototype,"effectiveMaxZoom",void 0);f([d.property({readOnly:!0})],a.prototype,"effectiveMinScale",void 0);f([d.property({readOnly:!0})],a.prototype,"effectiveMaxScale",
void 0);f([d.property()],a.prototype,"enabled",void 0);f([d.property({type:[n]})],a.prototype,"lods",void 0);f([d.property()],a.prototype,"minZoom",void 0);f([d.property()],a.prototype,"maxZoom",void 0);f([d.property()],a.prototype,"minScale",void 0);f([d.property()],a.prototype,"maxScale",void 0);f([d.property()],a.prototype,"snapToZoom",void 0);a=e=f([d.subclass("esri.views.2d.constraints.ZoomConstraint")],a);var e;return a})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor".split(" "),
function(a,h,m,f,d,c){a=n=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.enabled=!0,b.rotationEnabled=!0,b}return m(c,a),c.prototype.constrain=function(a,c){return this.enabled?(this.rotationEnabled||(a.rotation=0),a):a},c.prototype.clone=function(){return new n({enabled:this.enabled,rotationEnabled:this.rotationEnabled})},c}(d.declared(c));f([d.property()],a.prototype,"enabled",void 0);f([d.property()],a.prototype,"rotationEnabled",void 0);a=n=f([d.subclass("esri.views.2d.constraints.RotationConstraint")],
a);var n;return a})},"esri/views/2d/AnimationManager":function(){define("../../core/Accessor ../../core/Scheduler ../../core/now ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(a,h,m,f,d,c){var n=function(a,c,b,g){var e=a.targetGeometry,f=c.targetGeometry;g?"string"==typeof g&&(g=d.parse(g)||d.ease):g=d.ease;this.easing=g;this.duration=b;this.sCenterX=e.x;this.sCenterY=e.y;this.sScale=a.scale;this.sRotation=a.rotation;this.tCenterX=f.x;this.tCenterY=f.y;this.tScale=c.scale;this.tRotation=
c.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};n.prototype.applyRatio=function(a,c){var b,d,e,f,l=this.easing(c);1<=c?(b=this.tCenterX,d=this.tCenterY,e=this.tRotation,f=this.tScale):(b=this.sCenterX+l*this.dCenterX,d=this.sCenterY+l*this.dCenterY,e=this.sRotation+l*this.dRotation,f=this.sScale+
l*this.dScale);a.targetGeometry.x=b;a.targetGeometry.y=d;a.scale=f;a.rotation=e};return a.createSubclass({constructor:function(){this._updateTask=h.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},getDefaults:function(){return{viewpoint:c.create()}},properties:{animation:null,duration:{value:200},transition:{value:null},easing:{value:d.ease},viewpoint:null},animate:function(a,d,b){this.stop();return c.copy(this.viewpoint,d),this.transition=new n(this.viewpoint,a.target,
b&&b.duration||this.duration,b&&b.easing||this.easing),a.always(function(){this.animation===a&&this._updateTask&&(this._updateTask.pause(),this.animation=null,this.updateFunction=null)}.bind(this)),this._startTime=m(),this._updateTask.resume(),this.animation=a,a},animateContinous:function(a,c){this.stop();this.updateFunction=c;this.viewpoint=a;var b=new f({target:a.clone()});return b.always(function(){this.animation===b&&this._updateTask&&(this._updateTask.pause(),this.animation=null,this.updateFunction=
null)}.bind(this)),this._startTime=m(),this._updateTask.resume(),this.animation=b,b},stop:function(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)},_postRender:function(a){var c=this.animation;if(!c||c.state===f.STOPPED)return void this._updateTask.pause();this.updateFunction?this.updateFunction(this.viewpoint,a.deltaTime):(a=(m()-this._startTime)/this.transition.duration,c=1<=a,this.transition.applyRatio(this.viewpoint,a),c&&this.animation.finish());this.animation._dfd.progress(this.viewpoint)}})})},
"esri/views/2d/unitBezier":function(){define([],function(){var a=function(a,f,d,c){function h(a,c){var d,g,f,k,h;c=null==c?1E-6:c;f=a;for(h=0;8>h;h++){if(k=((b*f+l)*f+e)*f-a,Math.abs(k)<c)return f;if(g=(3*b*f+2*l)*f+e,1E-6>Math.abs(g))break;f-=k/g}if(d=0,g=1,f=a,d>f)return d;if(f>g)return g;for(;g>d&&!(k=((b*f+l)*f+e)*f,Math.abs(k-a)<c);)a>k?d=f:g=f,f=.5*(g-d)+d;return f}var e=3*a,l=3*(d-a)-e,b=1-e-l,g=3*f,m=3*(c-f)-g,t=1-g-m;return function(a,b){a=h(a,b);return((t*a+m)*a+g)*a}},h=/^cubic-bezier\((.*)\)/;
return a.parse=function(m){var f=a[m]||null;!f&&(m=h.exec(m))&&(m=m[1].split(",").map(function(a){return parseFloat(a.trim())}),4!==m.length||m.some(function(a){return isNaN(a)})||(f=a.apply(a,m)));return f},a.ease=a(.25,.1,.25,1),a.linear=a(0,0,1,1),a.easeIn=a["ease-in"]=a(.42,0,1,1),a.easeOut=a["ease-out"]=a(0,0,.58,1),a.easeInOut=a["ease-in-out"]=a(.42,0,.58,1),a})},"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang dojo/on dojo/dom dojo/dom-construct ../core/Accessor ../core/HandleRegistry ../core/Scheduler ../core/watchUtils ../widgets/Popup ./PopupManager ./ui/DefaultUI ../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r){var p=[0,0];a=function(a){function k(){var c=a.call(this)||this;return c.height=0,c.position=null,c.resizing=!1,c.root=null,c.surface=null,c.suspended=!0,c.width=0,Object.defineProperty(c,"_measureInfo",{enumerable:!1,writable:!1,value:{task:null,freq:16,time:750}}),c._domHandles=new b,c.watch("interacting",function(a){var b=c.surface;b&&b.setAttribute("data-interacting",a.toString())}),c}return m(k,a),k.prototype.getDefaults=function(){return d.mixin(this.inherited(arguments),
{popup:{},ui:{}})},k.prototype.initialize=function(){var a=this,b=this._measureInfo,d=null;q.init(this,"container",function(e,k,f,l){if(null!=e||null!=k)d&&(d.remove(),d=null,b.freq=16,b.time=750),b.task&&(b.task.remove(),b.task=null),e?(d=c(window,"resize",function(){b.freq=16;b.time=750}),b.task=g.addFrameTask({prepare:function(b){var c=a._measureInfo;(c.time+=b.deltaTime,c.time<c.freq)||(c.time=0,a._measure()?(c.freq=16,a._set("resizing",!0)):(c.freq=Math.min(750,2*c.freq),512<=c.freq&&a._set("resizing",
!1)))}})):a._set("resizing",!1),a._measure(),e=a.root,k=a.surface,f=a.width,l=a.height,e&&k&&f&&l&&(e.style.width=k.style.width=f+"px",e.style.height=k.style.height=l+"px")})},k.prototype.destroy=function(){this.ui.destroy();this.popup&&this.popup.destroy();this.container=null},Object.defineProperty(k.prototype,"container",{set:function(a){var b=this._get("container");if(b!==a){if(b&&(b.classList.remove("esri-view"),this.popupManager.destroy(),this.popupManager=null,e.destroy(this.root),this._set("root",
null)),a){a.classList.add("esri-view");b=document.createElement("div");b.className="esri-view-root";a.insertBefore(b,a.firstChild);this._set("root",b);var c=document.createElement("div");c.className="esri-view-surface";n.setSelectable(c,!1);b.appendChild(c);this._set("surface",c);this._forceReadyCycle();this.popupManager=new w({enabled:!0,view:this})}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null);this._set("container",
a)}},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"popup",{set:function(a){var b=this._get("popup");a!==b&&(this._domHandles.remove("view-popup"),b&&b.destroy(),a&&(a.viewModel.view=this,a._started||a.startup(),this._domHandles.add([q.init(this,"root",function(b,c){var d=a.domNode;n.isDescendant(d.parentNode,c)&&d.parentNode.removeChild(d);b&&!d.parentNode&&a.placeAt(b)})],"view-popup")),this._set("popup",a))},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,
"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"ui",{set:function(a){var b=this._get("ui");a!==b&&(this._domHandles.remove("ui"),b&&b.destroy(),a&&(a.view=this,this._domHandles.add([q.init(this,"root",function(b){a.container=b?e.create("div",null,b):null})],"ui")),this._set("ui",a))},enumerable:!0,configurable:!0}),k.prototype.pageToContainer=function(a,b,c){var d=this.position;return a-=d[0],b-=d[1],c?(c[0]=a,c[1]=b):c=[a,
b],c},k.prototype.containerToPage=function(a,b,c){var d=this.position;return a+=d[0],b+=d[1],c?(c[0]=a,c[1]=b):c=[a,b],c},k.prototype._measure=function(){var a=this.container,b=a?a.clientWidth:0,c=a?a.clientHeight:0;if(0===b||0===c||"hidden"===window.getComputedStyle(a).visibility)return this._set("suspended",!0),!1;var d=this.root,g=this.surface,e=this.width,k=this.height,f=this.position;if(b===e&&c===k)return this._set("suspended",!1),!1;d&&g&&(d.style.width=g.style.width=b+"px",d.style.height=
g.style.height=c+"px");this._set("width",b);this._set("height",c);this._set("suspended",!1);d=(a.ownerDocument||window.document).defaultView;a=a.getBoundingClientRect();a=(p[0]=a.left+d.pageXOffset,p[1]=a.top+d.pageYOffset,p);return f&&a[0]===f[0]&&a[1]===f[1]||this._set("position",a.slice()),this.emit("resize",{oldWidth:e,oldHeight:k,width:b,height:c}),!0},k}(r.declared(l));return f([r.property({value:null,cast:function(a){return n.byId(a)}})],a.prototype,"container",null),f([r.property({readOnly:!0})],
a.prototype,"height",void 0),f([r.property({type:t})],a.prototype,"popup",null),f([r.property({readOnly:!0})],a.prototype,"position",void 0),f([r.property({readOnly:!0})],a.prototype,"resizing",void 0),f([r.property({readOnly:!0})],a.prototype,"root",void 0),f([r.property({value:null,dependsOn:["width","height"],readOnly:!0})],a.prototype,"size",null),f([r.property({readOnly:!0})],a.prototype,"surface",void 0),f([r.property({readOnly:!0})],a.prototype,"suspended",void 0),f([r.property({type:v})],
a.prototype,"ui",null),f([r.property({readOnly:!0})],a.prototype,"width",void 0),a=f([r.subclass("esri.views.DOMContainer")],a)})},"esri/widgets/Popup":function(){define("./support/viewModelWiring ./Widgette ./Popup/PopupViewModel ../core/HandleRegistry ../core/watchUtils ../views/2d/viewpointUtils dijit/a11yclick dijit/_TemplatedMixin dojo/keys dojo/on dojo/query dojo/Deferred dojo/i18n!./Popup/nls/Popup dojo/text!./Popup/templates/Popup.html ../core/lang dojo/_base/lang dojo/dom-class dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style ./Popup/PopupRenderer ./Popup/PopupRendererViewModel ./Spinner require".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k,x,B,y,z,A,D){var F=D.toUrl("./Popup/images/default-action.svg"),C={hidden:"esri-hidden",invisible:"esri-invisible",iconText:"esri-icon-font-fallback-text",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",
iconPaginationMenu:"esri-icon-layer-list",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-rotating esri-icon-loading-indicator",iconZoom:"esri-icon-zoom-in-magnifying-glass",base:"esri-popup",container:"esri-popup__position-container",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",shadow:"esri-popup--shadow",showDock:"esri-popup--dock-button-visible",showContent:"esri-popup--content-visible",showFooter:"esri-popup--footer-visible",showTitle:"esri-popup--title-visible",
showPagination:"esri-popup--pagination-visible",hasPopupRenderer:"esri-popup--has-popup-renderer",hasPromiseFeatures:"esri-popup--has-promise-features",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",
canDockToLeft:"esri-popup--can-dock-to-left",canDockToRight:"esri-popup--can-dock-to-right",canDockToTop:"esri-popup--can-dock-to-top",canDockToBottom:"esri-popup--can-dock-to-bottom",hasPaginationMenuOpen:"esri-popup--feature-menu-open",alignTop:"esri-popup--top-aligned",alignBottom:"esri-popup--bottom-aligned",alignLeftTop:"esri-popup--left-top-aligned",alignLeftBottom:"esri-popup--left-bottom-aligned",alignRightTop:"esri-popup--right-top-aligned",alignRightBottom:"esri-popup--right-bottom-aligned",
hasPendingPromises:"esri-popup--has-pending-promises",isPendingPromisesResult:"esri-popup--is-pending-promises-result",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",button:"esri-popup__button",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",actions:"esri-popup__actions",action:"esri-popup__action",
actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",pagination:"esri-popup__pagination",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",
paginationText:"esri-popup__pagination-page-text",paginationDocked:"esri-popup__pagination-docked",paginationDockedButtons:"esri-popup__pagination-docked-buttons",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",
featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title"},H={auto:"auto",topLeft:"top-left",topCenter:"top-center",topRight:"top-right",bottomLeft:"bottom-left",bottomCenter:"bottom-center",bottomRight:"bottom-right"},I={buttonEnabled:!0,position:H.auto,breakpoint:{width:544}},M={popupRenderer:"popup-renderer",acions:"actions",actionsChange:"actions-change",paginationTitles:"pagination-titles",view:"view"};return h.createSubclass([e],{declaredClass:"esri.widgets.Popup",
baseClass:C.base,templateString:w,constructor:function(){this._handleRegistry=new f;this._contentStorage=k.create("div");this._repositionTimeoutHandle=0},postCreate:function(){var c=this;this.inherited(arguments);var g=this.viewModel;this.own(d.init(g,"visible",function(a){p.remove(this._containerNode,C.hasPaginationMenuOpen);p.toggle(this.domNode,C.invisible,!a);this._togglePopupLocationRepositioning(a);this._toggleContentVisibility(a);this._autoAlign();this.reposition()}.bind(this)),d.watch(this,
"viewModel.view",function(a,b){a&&b&&(this.close(),this.clear())}.bind(this)),d.watch(this,"viewModel.view.ready",function(a,b){a?this._wireUpView(this.viewModel.view):b&&(this.close(),this.clear())}.bind(this)),d.init(g,"pendingPromisesCount,featureCount,promises,location",function(){var a=this.viewModel;this._displayPendingFeaturesStatus(a.pendingPromisesCount,a.featureCount,a.promises,a.location)}.bind(this)),d.init(g,"features",this._updateFeatures.bind(this)),d.init(g,"selectedFeatureIndex,selectedFeature",
function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateActions(a.actions,a.features,a.selectedFeature);this._updatePageText(a.features,a.selectedFeatureIndex);this._createPaginationNodes(a.features,a.selectedFeatureIndex);this._bodyContentNode.scrollTop=0}.bind(this)),d.init(g,"title",function(a){this._updateTitle(a);this.reposition()}.bind(this)),d.watch(this,"viewModel.waitingForResult, _popupRenderer.viewModel.waitingForContent",function(){this._repositionTimeoutHandle||
(this._repositionTimeoutHandle=setTimeout(function(){this._repositionTimeoutHandle=0;this._autoAlign();this.reposition()}.bind(this),50))}.bind(this)),d.init(g,"actions",function(a){var b=this.viewModel;this._updateActions(a,b.features,b.selectedFeature);this._actionChangeListener(a)}.bind(this)),d.init(g,"content",function(a){this._updateContent(a);this.reposition()}.bind(this)),d.init(g,"location",function(a){this._togglePopupLocationRepositioning(this.visible);this._autoAlign();this.reposition()}.bind(this)),
b(this._dockNode,n,this._toggleDock.bind(this)),b(this._closeNode,n,this.close.bind(this)),b(this._previousNode,n,g.previous.bind(g)),b(this._previousDockedNode,n,g.previous.bind(g)),b(this._nextNode,n,g.next.bind(g)),b(this._nextDockedNode,n,g.next.bind(g)),b(this._pageMenuNode,n,this._togglePageMenu.bind(this)),b(this._pageMenuDockedNode,n,this._togglePageMenu.bind(this)),b(this._pageMenuInfoNode,n,this._togglePageMenu.bind(this)),b(this._paginationNode,b.selector("li",n),function(){c._selectFeature(this)}),
b(this._paginationNode,b.selector("li","keyup"),function(a){c._keyupFeature(a,this)}),b(this._actionsNode,b.selector("[data-action-index]",n),function(){c._actionEvent(this)}),b(g,"trigger-action",function(a){a.action&&"zoom-to"===a.action.id&&this.viewModel.zoomToLocation()}.bind(this)));a.setUpEventDelegates(this,"trigger-action")},destroy:function(){this._destroyPopupRendererVMs();this._destroySpinner();this._destroyPopupRenderer();this._handleRegistry.destroy();this._handleRegistry=null;this._repositionTimeoutHandle&&
(clearTimeout(this._repositionTimeoutHandle),this._repositionTimeoutHandle=0);this._repositionTimeoutHandle=0},properties:{_popupRenderer:{readOnly:!0,value:null},actions:{aliasOf:"viewModel.actions"},alignment:{value:"top",set:function(a){this._set("alignment",a);this.reposition()}},autoPanEnabled:!0,autoAlignmentEnabled:!1,content:{aliasOf:"viewModel.content"},closeOnViewChangeEnabled:!1,currentDockPosition:{readOnly:!0,value:null},dockOptions:{value:I,set:function(a){var b=r.clone(I),c=this.viewModel.get("view.breakpoints"),
d={};c&&(d.width=c.xsmall,d.height=c.xsmall);a=r.mixin({},b,a);b=r.mixin({},b.breakpoint,d);!0===a.breakpoint?a.breakpoint=b:"object"===typeof a.breakpoint&&(a.breakpoint=r.mixin({},b,a.breakpoint));this._set("dockOptions",a);this._toggleDockButton(a)}},dockEnabled:{value:!1,set:function(a){this._set("dockEnabled",a);this._togglePopupDocking(a);this._togglePopupLocationRepositioning(this.visible);this._autoAlign();this.reposition()}},featureCount:{aliasOf:"viewModel.featureCount"},features:{aliasOf:"viewModel.features"},
highlightEnabled:{aliasOf:"viewModel.highlightEnabled"},location:{aliasOf:"viewModel.location"},paginationEnabled:{value:!0,set:function(a){var b=this.viewModel;this._set("paginationEnabled",a);this._updatePagination(b.features,b.selectedFeatureIndex);this._updateFooterVisibility(b.features,b.actions);this.reposition()}},promises:{aliasOf:"viewModel.promises"},selectedFeature:{aliasOf:"viewModel.selectedFeature"},selectedFeatureIndex:{aliasOf:"viewModel.selectedFeatureIndex"},spinnerEnabled:{value:!0,
set:function(a){this._set("spinnerEnabled",a);this._createSpinner(a,this.viewModel.view)}},title:{aliasOf:"viewModel.title"},view:{aliasOf:"viewModel.view"},viewModel:{type:m},visible:{aliasOf:"viewModel.visible"}},_css:C,_i18n:t,_hideActionsTextNum:3,_animationDelay:10,_pointerOffset:16,_popupRendererVMs:[],clear:a.createMethodDelegate("clear"),close:function(){this.set("visible",!1)},next:a.createMethodDelegate("next"),previous:a.createMethodDelegate("previous"),reposition:function(){this._positionPopup();
return this._moveIntoView()},open:function(a){var b=r.mixin({updateLocationEnabled:!1},a);this.viewModel.set(b);a&&a.promises?this.set("visible",!1):this.set("visible",!0)},triggerAction:a.createMethodDelegate("triggerAction"),_actionChangeListener:function(a){this._handleRegistry.remove(M.actionsChange);a&&this._handleRegistry.add([a.on("change",function(){var a=this.viewModel;this._updateActions(a.actions,a.features,a.selectedFeature)}.bind(this))],M.actionsChange)},_actionEvent:function(a){var b=
this.viewModel;if(a=u.get(a,"data-action-index"))a=parseInt(a,10),b.triggerAction(a)},_addContent:function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateContent(a.content);this._updateTitle(a.title);this._updatePageText(a.features,a.selectedFeatureIndex)},_updateActions:function(a,b,c){this._updateActionButtons(a,c);this._updateFooterVisibility(b,a);this.reposition()},_contentIsPopupRenderer:function(){var a=this.get("viewModel.content"),b=this.get("_popupRenderer.domNode");
return!(!a||!b||a!==b)},_updateActionButtons:function(a,b){this._handleRegistry.remove(M.actions);if(this._actionsNode){var c=document.createDocumentFragment(),g=a.length;g&&a.forEach(function(a,e){"zoom-to"===a.id&&(a.title=this._i18n.zoom,a.className=C.iconZoom);var f=a.title,l=a.className,h=a.image;h||l||(h=F);var n=b&&b.attributes;n&&(f=f?v.substitute(n,f):"",l=l?v.substitute(n,l):null,h=h?v.substitute(n,h):null);var m=k.create("div",{tabindex:"0",title:f},c);u.set(m,"data-action-index",e);p.add(m,
[C.button,C.action]);var q=k.create("span",{"aria-hidden":!0},m);p.add(q,C.icon);l&&p.add(q,l);h&&(p.add(q,C.actionImage),B.set(q,"background-image","url("+h+")"));e={className:C.actionText,textContent:f};g>=this._hideActionsTextNum&&(e.className=C.iconText);var r=k.create("span",e,m);this._handleRegistry.add([d.init(a,"visible",function(a){p.toggle(m,C.hidden,!a)}),d.init(a,"className",function(a,b){n&&(a=v.substitute(n,a),b=v.substitute(n,b));p.remove(q,b);p.add(q,a)}),d.init(a,"image",function(a){n&&
(a=v.substitute(n,a));p.toggle(q,C.actionImage,!!a);B.set(q,"background-image",a?"url("+a+")":"")}),d.init(a,"title",function(a){n&&(a=v.substitute(n,a));a=a||"";u.set(m,"title",a);u.set(r,"textContent",a)})],M.actions)},this);k.place(c,this._actionsNode,"only")}},_getLocationScreenPoint:function(){var a=this.viewModel,b;if(a.location&&this.visible){var c=a.location;c&&a.get("view.ready")&&(b=a.view.toScreen(c))}return b},_calculatePosition:function(a,b,c){var d=this.alignment,g,e=this._pointerOffset,
k=null,f=null,l=null,h=null;if(a&&b&&c){g=b.h;if("top"===d||"bottom"===d)g+=e;b=b.w;if("left-top"===d||"left-bottom"===d||"right-top"===d||"right-bottom"===d)b+=e,g+=e;var n=b/2,p=a.y,m=a.x,q=c.height-p,u=c.width-m,r=b;switch(d){case "bottom":k=p+e;f=m-n;r=n;break;case "left-top":l=q+e;h=u+e;break;case "left-bottom":k=p+e;h=u+e;break;case "right-top":l=q+e;f=m+e;break;case "right-bottom":k=p+e;f=m+e;break;default:l=q+e,f=m-n,r=n}c=c.padding;c=this.dockEnabled?{left:c.left?c.left+"px":"",top:c.top?
c.top+"px":"",right:c.right?c.right+"px":"",bottom:c.bottom?c.bottom+"px":""}:{top:null!==k?k+"px":"auto",left:null!==f?f+"px":"auto",bottom:null!==l?l+"px":"auto",right:null!==h?h+"px":"auto"};return{height:g,width:b,box:{top:null!==k?k:a.y-g,left:null!==f?f:a.x-r,bottom:null!==l?l:a.y+g,right:null!==h?h:a.x+r},style:c}}},_createPopupRendererVMs:function(a){this._destroyPopupRendererVMs();a&&1<a.length&&a.forEach(function(a,b){a=new z({contentEnabled:!1,graphic:a});this._popupRendererVMs.push(a)},
this)},_destroyPopupRendererVMs:function(){this._handleRegistry.remove(M.paginationTitles);this._popupRendererVMs.forEach(function(a){a.destroy()});this._popupRendererVMs.length=0},_createPaginationNodes:function(a,b){this._handleRegistry.remove(M.paginationTitles);if(a){var c=a.length;this._paginationNode&&u.set(this._paginationNode,"innerHTML","");1<c&&(c=v.substitute({total:c},this._i18n.selectedFeatures),u.set(this._pageMenuInfoNode,"textContent",c),a.forEach(function(a,c){a=this._i18n.untitled;
var g=k.create("li",{role:"menuitem",className:C.featureMenuItem},this._paginationNode);c===b?(u.set(g,"aria-label",t.selectedFeature),p.add(g,C.featureMenuSelected)):u.set(g,"data-feature-index",c);var e=k.create("span",{className:C.featureMenuTitle,innerHTML:a},g);if(a=this._popupRendererVMs[c])a=d.init(a,"title",function(a){u.set(e,"innerHTML",a)}),this._handleRegistry.add(a,M.paginationTitles);c===b&&k.create("span",{className:C.iconCheckMark},e)},this))}},_createSpinner:function(a,b){this._destroySpinner();
a&&b&&(this._spinner=new A({container:document.createElement("div"),view:b}),k.place(this._spinner.container,b.root))},_updateContent:function(a){a&&a.nodeName?(k.place(a,this._contentStorage),k.place(a,this._bodyContentNode,"only")):"string"===typeof a&&(this._destroyPopupRenderer(),u.set(this._bodyContentNode,"innerHTML",a));this._bodyContentNode.scrollTop=0;p.toggle(this._containerNode,C.hasPopupRenderer,this._contentIsPopupRenderer());p.toggle(this._containerNode,C.showContent,!!a);p.remove(this._containerNode,
C.hasPaginationMenuOpen);this._autoAlign()},_destroyPopupRenderer:function(){this._popupRenderer&&!this._popupRenderer._destroyed&&(this._handleRegistry.remove(M.popupRenderer),this._popupRenderer.destroy(),this._set("_popupRenderer",null))},_destroySpinner:function(){this._spinner&&(this._spinner.destroy(),this._spinner=null)},_setDockEnabledForViewSize:function(a){a.breakpoint&&this.set("dockEnabled",this._shouldDockAtCurrentViewSize(a))},_togglePopupDocking:function(a){p.remove(this._containerNode,
C.hasPaginationMenuOpen);p.toggle(this._containerNode,C.isDocked,!!a);u.set(this._dockNode,"title",a?this._i18n.undock:this._i18n.dock);this._updateDockPosition(this.dockOptions)},_dockingThresholdCrossed:function(a,b,c){var d=a[0];a=a[1];var g=b[0];b=b[1];var e=c.width;c=c.height;return d<=e&&g>e||d>e&&g<=e||a<=c&&b>c||a>c&&b<=c},_determineDockPosition:function(a){var b=this.viewModel,c=b.view,d=c&&c.padding,d=c&&c.width-d.left-d.right;return(b=c&&b.get("view.breakpoints"))&&d<=b.xsmall?a.bottomCenter:
this.isLeftToRight()?a.topRight:a.topLeft},_updateDockPosition:function(a){p.remove(this._containerNode,[C.isDockedTopLeft,C.isDockedTopCenter,C.isDockedTopRight,C.isDockedBottomLeft,C.isDockedBottomCenter,C.isDockedBottomRight,C.canDockToTop,C.canDockToBottom,C.canDockToLeft,C.canDockToRight]);var b,c,d;b=a.position;b=b===H.auto?this._determineDockPosition(H):"function"===typeof b?b.call(this):b;switch(b){case H.topLeft:c=C.isDockedTopLeft;d=C.canDockToLeft;break;case H.topCenter:c=C.isDockedTopCenter;
d=C.canDockToTop;break;case H.bottomLeft:c=C.isDockedBottomLeft;d=C.canDockToLeft;break;case H.bottomCenter:c=C.isDockedBottomCenter;d=C.canDockToBottom;break;case H.bottomRight:c=C.isDockedBottomRight;d=C.canDockToRight;break;default:c=C.isDockedTopRight,d=C.canDockToRight}p.toggle(this._containerNode,d,!!a.buttonEnabled);this.dockEnabled?(p.add(this._containerNode,c),this._set("currentDockPosition",b)):this._set("currentDockPosition",null);this._popupRenderer&&this._popupRenderer.resize();this.reposition()},
_toggleDockButton:function(a){var b=this._containerNode;p.toggle(b,C.showDock,!!a.buttonEnabled);p.toggle(b,C.isDocked,!!this.dockEnabled);this._updateDockPosition(a)},_updateFooterVisibility:function(a,b){a=this._isPaginationEnabled(a)||b&&b.length;p.toggle(this._containerNode,C.showFooter,!!a)},_isPaginationEnabled:function(a){return this.paginationEnabled&&a&&1<a.length},_updatePagination:function(a,b){this._updatePageText(a,b);this._createPaginationNodes(a,b);p.toggle(this._containerNode,C.showPagination,
this._isPaginationEnabled(a))},_displayPendingFeaturesStatus:function(a,b,c,d){var g=0<a&&0===b;c=c&&c.length;a&&c&&a===c&&this.set("visible",!1);p.toggle(this._containerNode,C.hasPendingPromises,!!a);p.toggle(this._containerNode,C.isPendingPromisesResult,!!g);p.toggle(this._containerNode,C.hasPromiseFeatures,!!b);g?this._spinner&&this._spinner.show({location:d}):(this._spinner&&this._spinner.hide(),c&&b&&!this.visible?this.set("visible",!0):c&&!b&&this.visible&&this.set("visible",!1))},_moveIntoView:function(){var a=
new q;setTimeout(a.resolve.bind(this),this._animationDelay);return a.then(function(){if(!this._destroyed){var a=this.viewModel,b=this.get("viewModel.view");if(a&&b&&b.stationary){var d=this._getLocationScreenPoint();if(d){var g=this._sizePopup(),g=this._calculatePosition(d,g,b),e=b.width,k=b.height,f=b.padding,l=b.ui.padding;if(this.autoPanEnabled&&!this.autoAlignmentEnabled){if(d.y<f.top||d.y>k-f.bottom||d.x<f.left||d.x>e-f.right)return a.centerAtLocation();if(!this.dockEnabled&&g&&g.width<b.width&&
g.height<b.height){var h=d=0;g.box.top<f.top?h=-g.box.top+l.top+f.top:g.box.bottom>k-f.bottom&&(h=-(g.box.bottom-k+f.bottom)-l.bottom);g.box.left<f.left?d=g.box.left-l.left-f.left:g.box.right>e-f.right&&(d=g.box.right-e+f.right+l.right);if(d||h)return g=c.translateBy(c.create(),b.viewpoint,[d,h]),b.goTo(g,a.animationOptions)}}}}}}.bind(this))},_isScreenPointWithinView:function(a,b){return b&&a&&-1<a.x&&-1<a.y&&a.x<=b.width&&a.y<=b.height},_autoAlign:function(){if(this.autoAlignmentEnabled&&this.visible){var a=
this.get("viewModel.view"),b=this._getLocationScreenPoint();if(this._isScreenPointWithinView(b,a)){var c=this._sizePopup(),d=this._pointerOffset,g=c.h+d,c=(c.w+d)/2,e,k,f,l,d=a.padding;b.x-c<0+d.left&&(k=!0);b.x+c>a.width-d.right&&(e=!0);b.y-g<0+d.top&&(f=!0);b.y+g>a.height-d.bottom&&(l=!0);k?this._set("alignment",f?"right-bottom":"right-top"):e?this._set("alignment",f?"left-bottom":"left-top"):f?this._set("alignment",l?"top":"bottom"):this._set("alignment","top")}}},_positionPopup:function(){var a=
this.viewModel.view;if(a){p.remove(this._containerNode,[C.alignTop,C.alignBottom,C.alignLeftTop,C.alignLeftBottom,C.alignRightTop,C.alignRightBottom]);this._triggerOffset();var b;switch(this.alignment){case "bottom":b=C.alignBottom;break;case "right-top":b=C.alignRightTop;break;case "right-bottom":b=C.alignRightBottom;break;case "left-top":b=C.alignLeftTop;break;case "left-bottom":b=C.alignLeftBottom;break;default:b=C.alignTop}p.add(this._containerNode,b);b=this._getLocationScreenPoint();var c=this._sizePopup();
(a=(a=this._calculatePosition(b,c,a))&&a.style)&&B.set(this._containerNode,a)}},_removeContent:function(){this._destroyPopupRenderer();u.set(this._bodyContentNode,"innerHTML","");u.set(this._titleNode,"innerHTML","");u.set(this._pageTextNode,"innerHTML","");u.set(this._pageTextDockedNode,"innerHTML","");p.remove(this._containerNode,[C.showTitle,C.showContent])},_keyupFeature:function(a,b){var c=a.keyCode;if(c===l.UP_ARROW||c===l.DOWN_ARROW){a.stopPropagation();a.preventDefault();a=g("li",this._paginationNode);
var d=a.length;b=a.indexOf(b);var e;c===l.UP_ARROW?e=b-1:c===l.DOWN_ARROW&&(e=b+1);0>e?e=d-1:e>=d&&(e=0);a[e].focus()}},_selectFeature:function(a){var b=this.viewModel,c=-1;(a=u.get(a,"data-feature-index"))&&(c=parseInt(a,10));-1!==c&&(b.selectedFeatureIndex=c);p.remove(this._containerNode,C.hasPaginationMenuOpen);this._pageMenuNode.focus()},_updateSelectedFeature:function(a){var c=this.viewModel,g,e="",f="";if(a){if(g=a.layer)e=g.id||"",f=g.title||"";if(!this._popupRenderer||this._popupRenderer&&
this._popupRenderer._destroyed){this._handleRegistry.remove(M.popupRenderer);this._set("_popupRenderer",new y({container:k.create("div")}));g=d.init(this._popupRenderer.viewModel,"title",function(a){c.title=a});var l=d.init(this._popupRenderer.viewModel,"content",function(a){c.content=this._popupRenderer.domNode}.bind(this)),h=b(this._popupRenderer,"resize",this.reposition.bind(this));this._handleRegistry.add([g,l,h],M.popupRenderer)}this._popupRenderer.graphic=a}this._toggleFeatureUpdatedClass();
u.set(this._containerNode,"data-layer-title",f);u.set(this._containerNode,"data-layer-id",e);this.reposition()},_updateFeatures:function(a){var b=this.viewModel;this._createPopupRendererVMs(a);this._updatePagination(a,b.selectedFeatureIndex);this._updateFooterVisibility(a,b.actions);this.reposition()},_shouldDockAtCurrentViewSize:function(a){var b=this.viewModel;a=a.breakpoint;return b.view&&(a.hasOwnProperty("width")&&b.view.ui.width<=a.width||a.hasOwnProperty("height")&&b.view.ui.height<=a.height)},
_sizePopup:function(){return x.getContentBox(this._containerNode)},_updateTitle:function(a){a=a||"";u.set(this._titleNode,"innerHTML",a);p.toggle(this._containerNode,C.showTitle,!!a);p.remove(this._containerNode,C.hasPaginationMenuOpen)},_toggleDock:function(){this.set("dockEnabled",!this.dockEnabled)},_togglePageMenu:function(){p.toggle(this._containerNode,C.hasPaginationMenuOpen);var a=p.contains(this._containerNode,C.hasPaginationMenuOpen);u.set(this._pageMenuSectionNode,"aria-hidden",!a);var b=
g("li",this._paginationNode),c=b[0];b.forEach(function(b){u.set(b,"tabIndex",a?"0":"")});a?c&&c.focus():this._pageMenuNode.focus()},_updatePageText:function(a,b){var c="";this._isPaginationEnabled(a)&&(c=v.substitute({index:b+1,total:a.length},this._i18n.pageText));this._pageTextNode&&u.set(this._pageTextNode,{textContent:c});this._pageTextDockedNode&&u.set(this._pageTextDockedNode,{textContent:c})},_triggerOffset:function(){this._containerNode.offsetWidth=this._containerNode.offsetWidth},_toggleFeatureUpdatedClass:function(){p.remove(this._containerNode,
C.hasFeatureUpdated);this._triggerOffset();p.add(this._containerNode,C.hasFeatureUpdated)},_viewPointChanged:function(){this.closeOnViewChangeEnabled?this.close():this._positionPopup()},_wireUpView:function(a){this._handleRegistry.remove(M.view);this._viewPointEvent=null;if(a){var c="viewpoint";"3d"===a.type&&(c="camera");this._viewPointEvent=d.pausable(a,c,this._viewPointChanged.bind(this));this._handleRegistry.add([a.watch("padding",this.reposition.bind(this)),a.watch("size",this._updateDockEnabledForViewSize.bind(this)),
b(a,"resize",this.reposition.bind(this)),this._viewPointEvent],M.view);this._togglePopupLocationRepositioning(this.visible);this._createSpinner(this.spinnerEnabled,a);this._setDockEnabledForViewSize(this.dockOptions);this._toggleDockButton(this.dockOptions);this.reposition()}},_updateDockEnabledForViewSize:function(a,b){var c=this.get("viewModel.view.padding"),d=c.left+c.right,g=c.top+c.bottom,c=[],e=[];c[0]=a[0]-d;c[1]=a[1]-g;e[0]=b[0]-d;e[1]=b[1]-g;a=this.dockOptions;this._dockingThresholdCrossed(c,
e,a.breakpoint)&&this._setDockEnabledForViewSize(a);this._updateDockPosition(a)},_togglePopupLocationRepositioning:function(a){var b=this.viewModel;this._viewPointEvent&&(a&&b.location&&!this.dockEnabled?this._viewPointEvent.resume():this._viewPointEvent.pause())},_toggleContentVisibility:function(a){a?this._addContent():this._removeContent()}})})},"esri/widgets/support/viewModelWiring":function(){define(["../../core/watchUtils"],function(a){function h(a,f){return Array.isArray(f)||(f=[f]),f.map(function(d){return a.viewModel.on(d,
function(c){a.emit(d,c)})})}return{createGetterDelegate:function(a){var f="viewModel."+a;return function(){return this.get(f)}},createSetterDelegate:function(a){return function(f){var d=this.get("viewModel");d&&d.set(a,f)}},createMethodDelegate:function(a){var f="viewModel."+a;return function(){var a=this.get(f);return a?a.apply(this.viewModel,arguments):void 0}},setUpEventDelegates:function(m,f){var d=h(m,f),c=a.init(m,"viewModel",function(a,c){d.forEach(function(a){a.remove()});d.length=0;a&&(d=
h(m,f));m.own.apply(m,d)});m.own(c)}}})},"esri/widgets/Widgette":function(){define("../core/Accessor ../core/declare ../core/accessorSupport/metadata dijit/_WidgetBase dijit/Destroyable dijit/registry dojo/_base/lang dojo/_base/window dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/on".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q,t){function w(a){return function(b){this._set(a,b)}}function v(a,b){return function(c){r.call(this,a,b,c);this._set(a,c)}}function r(a,b,c){(Array.isArray(b)?b:[b]).forEach(function(b){var d=
this[b.node||b||"domNode"];switch(b.type||"attribute"){case "attribute":n.isFunction(c)&&(c=c.bind(this));b=b.attribute?b.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;d.tagName?g.set(d,b,c):d.set(b,c);break;case "innerText":d.innerHTML="";d.appendChild(this.ownerDocument.createTextNode(c));break;case "innerHTML":d.innerHTML=c;break;case "class":b=this._get(a),q.replace(d,c,b)}},this)}function p(a,b,c){l.around(a,b,function(b){return function(){c(a)||b.apply(a)}})}h.before(function(a,b){if(b.declaredClass===
u||h.hasMixin(a,u)){var c=m.getPropertiesMetadata(b);Object.keys(c).forEach(function(a){var b=c[a],d=b.set;a="function"==typeof d?d:null===d?w(b.name):"string"==typeof d||"object"==typeof d?v(a,d):void 0;b.set=a})}});var u="esri.widgets._WidgetBase";return a.createSubclass([d],{declaredClass:u,postscript:function(a){var b,d=this.__accessor__;a=d.ctorArgs||a;if(b=this.getDefaults?a?this.getDefaults(a):this.getDefaults({}):null,b&&Object.getOwnPropertyNames(b).forEach(function(a){d.set(a,b[a])},this),
this.postMixInProperties(),this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document),this.ownerDocumentBody=e.body(this.ownerDocument),c.add(this),this.buildRendering(),d.initialize(),a&&(this.set(a),d.ctorArgs=null),d.initialize(),this.initialize(),this.postCreate(),this.domNode){var k;(a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),k=!0);g.set(this.domNode,{widgetId:this.id,id:this.id});k&&(this.srcNodeRef=null)}this._created=
!0;this.notifyChange("container");p(this,"startup",function(a){return a._started});p(this,"destroy",function(a){return a._beingDestroyed||a._destroyed});this.autoStart&&this.startup()},getDefaults:function(a){var b={};b.id=a.id?a.id:a.srcNodeRef&&a.srcNodeRef.id||c.getUniqueId(this.declaredClass.replace(/\./g,"_"));delete a.id;return a.srcNodeRef&&(b.srcNodeRef=a.srcNodeRef,delete a.srcNodeRef),n.mixin(this.inherited(arguments),b)},normalizeCtorArgs:function(a,c){a=a||{};c=a.container||a.srcNodeRef||
c;return c&&(a.srcNodeRef=b.byId(c)),a},destroy:function(){this._customWidgetBaseDestroy()},postMixInProperties:f.prototype.postMixInProperties,buildRendering:f.prototype.buildRendering,postCreate:f.prototype.postCreate,startup:f.prototype.startup,_beingDestroyed:!1,_destroyed:!1,_created:!1,properties:{autoStart:!0,"class":{value:"",set:{node:"domNode",type:"class"}},domNode:{value:null},focused:!1,id:{value:""},srcNodeRef:{value:null},style:{value:null,set:f.prototype._setStyleAttr},widgetId:{}},
destroyDescendants:f.prototype.destroyDescendants,destroyRecursive:f.prototype.destroyRecursive,destroyRendering:f.prototype.destroyRendering,emit:f.prototype.emit,on:function(a,b){return this.own(t(this.domNode,a,b))[0]},toString:f.prototype.toString,getChildren:f.prototype.getChildren,getParent:f.prototype.getParent,isLeftToRight:f.prototype.isLeftToRight,placeAt:f.prototype.placeAt,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()},dojoAttachEvent:"",
dojoAttachPoint:"",_customWidgetBaseDestroy:function(a){function b(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.domNode&&c.findWidgets(this.domNode,this.containerNode).forEach(b);this.destroyRendering(a);c.remove(this.id);this._destroyed=!0}}).createSubclass({declaredClass:"esri.widgets.Widgette",getDefaults:function(){return n.mixin(this.inherited(arguments),{viewModel:{}})},buildRendering:function(){this.inherited(arguments);q.add(this.domNode,
"esri-widget")},destroy:function(){this.viewModel.destroy&&this.viewModel.destroy();this.viewModel=null},properties:{container:{get:function(){return this._created?this.domNode:this._get("container")},set:function(a){var c=this._get("container");this._created||c||!a||this._set("container",b.byId(a))}},viewModel:{value:null},visible:{value:!0,set:function(a){this._set("visible",a);q.toggle(this.domNode,"esri-hidden",!a)}}}})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/HandleRegistry ../../core/promiseUtils ../../core/watchUtils ../../geometry/support/webMercatorUtils ../../geometry/Point ../../support/Action dojo/fx/easing dojo/_base/lang".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q){function t(a,b){return b.allLayerViews.find(function(b){return b.layer===a})}var w={id:"zoom-to"};return a.createSubclass([f],{declaredClass:"esri.widgets.Popup.PopupViewModel",properties:{actions:{type:h.ofType(b)},animationOptions:{},content:{},featureCount:{readOnly:!0},features:{},location:{type:l},pendingPromisesCount:{readOnly:!0},promises:{},selectedFeature:{readOnly:!0},selectedFeatureIndex:{},state:{dependsOn:["view.ready"],readOnly:!0},title:{},updateLocationEnabled:{},
view:{},visible:{},waitingForResult:{dependsOn:["pendingPromisesCount","featureCount"],readOnly:!0},zoomFactor:{},zoomScale:{readOnly:!0}},_handles:null,constructor:function(){this._handles=new d},getDefaults:function(a){return q.mixin(this.inherited(arguments),{actions:[w],animationOptions:{duration:300,easing:g.quadInOut},promises:[]})},initialize:function(){this._handles.add([n.init(this,"view.scale",this._scaleWatcher),n.whenFalse(this,"visible",this._visibleWatcher)])},destroy:function(){this._handles.destroy();
this.view=this._handles=null},actions:[w],animationOptions:{duration:300,easing:g.quadInOut},content:null,featureCount:0,features:null,_featuresSetter:function(a){this._set("features",a);this._updateFeatureCount(a);this.pendingPromisesCount||(this.selectedFeatureIndex=-1,a.length&&(this.selectedFeatureIndex=0))},highlightEnabled:!0,_highlightEnabledSetter:function(a){this._set("highlightEnabled",a);this._highlightFeature(this.selectedFeature,this.view)},location:null,_locationSetter:function(a){var b=
this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&b&&(a=e.geographicToWebMercator(a));this._set("location",a)},pendingPromisesCount:0,waitingForResult:!1,_waitingForResultGetter:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},promises:[],_promisesSetter:function(a){var b=this._get("promises");b&&b.forEach(function(a){a.cancel()});this.features=[];this._set("pendingPromisesCount",0);this._set("promises",a);a&&a.length&&(this._set("pendingPromisesCount",
a.length),a=a.slice(0),a.forEach(function(a){a.always(function(b){a.isCanceled()||(this._set("pendingPromisesCount",this.pendingPromisesCount-1),this._updateFeatures(a,b))}.bind(this))},this))},selectedFeature:null,selectedFeatureIndex:-1,_selectedFeatureIndexSetter:function(a){(isNaN(a)||-1>a)&&(a=-1);var b=null,c=this.features;c&&c.length&&(a=(a+c.length)%c.length,b=c[a]);this._set("selectedFeature",b);this._set("selectedFeatureIndex",a);this._selectedFeatureChange(b,this.updateLocationEnabled)},
state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},title:null,updateLocationEnabled:!1,_updateLocationEnabledSetter:function(a){this._selectedFeatureChange(this.selectedFeature,a);this._set("updateLocationEnabled",a)},view:null,visible:!1,zoomFactor:4,_zoomFactorSetter:function(a){var b=this.view;b&&null!=b.scale&&this._setZoomScale(b.scale,a);this._set("zoomFactor",a)},zoomScale:0,centerAtLocation:function(){return this.location&&this.view?this.view.goTo({target:this.location,
scale:this.view.scale},this.animationOptions):c.reject(new m(this.declaredClass+"::Cannot center at location without a location and view."))},clear:function(){this.set({promises:[],features:[],content:null,title:null,location:null})},triggerAction:function(a){(a=this.actions.getItemAt(a))&&this.emit("trigger-action",{action:a})},next:function(){return this.selectedFeatureIndex+=1,this},previous:function(){return--this.selectedFeatureIndex,this},zoomToLocation:function(){var a=this.view,b=this.location,
d=this.zoomScale;if(!b||!a)return c.reject(new m(this.declaredClass+"::Cannot zoom to location without a location and view."));var g,e=this.selectedFeature,f=e&&e.geometry,l=e&&"3d"===a.type;return f||l?(g={target:e},f&&"point"===f.type&&this._isScreenSize(e)&&(g.scale=d,this.location=f)):g={target:b,scale:d},a.goTo(g,this.animationOptions)},_isScreenSize:function(a){if("3d"!==this.view.type||"esri.Graphic"!==a.declaredClass)return!0;var b=!0,c=this.view.getViewForGraphic(a);return c&&c.whenGraphicBounds&&
c.whenGraphicBounds(a).then(function(a){b=!a||a[0]===a[3]&&a[1]===a[4]&&a[2]===a[5]}),b},_getSelectedFeatureActions:function(){this._originalActions&&(this.actions=this._originalActions,this._originalActions=null);var a=this.actions.filter(function(a){return!a.temporary},this),b=a,c=this.selectedFeature.getEffectivePopupTemplate();if(c&&c.actions){for(var d=c.actions,g=0;g<d.length;g++)d.getItemAt(g).temporary=!0;c.overwriteActions?(this._originalActions=a,b=d):b=a.concat(d)}this.actions=b},_scaleWatcher:function(a){null!=
a&&this._setZoomScale(a,this.zoomFactor)},_getPointFromGeometry:function(a){switch(a&&a.type){case "point":return a;case "extent":return a.center;case "polygon":return a.centroid;case "multipoint":case "polyline":return a.extent.center;default:return null}},_visibleWatcher:function(a){this._handles.remove("highlight")},_highlightFeature:function(a,b){if(this._handles.remove("highlight"),a&&b&&this.highlightEnabled){var c=a.layer,d=b.type;c&&"3d"===d&&(b=t(c,b))&&"function"==typeof b.highlight&&(c=
c.objectIdField,d=a.attributes,a=b.highlight(d&&d[c]||a),this._handles.add(a,"highlight"))}},_selectedFeatureChange:function(a,b){this._highlightFeature(a,this.view);a&&(b&&(this.location=this._getPointFromGeometry(this.selectedFeature.geometry)),this._getSelectedFeatureActions())},_updateFeatureCount:function(a){var b=0;a&&a.length&&(b=a.length);this._set("featureCount",b)},_setZoomScale:function(a,b){this._set("zoomScale",a/b)},_updateFeatures:function(a,b){a&&this.promises&&!(!this._validatePromise(a)||
b instanceof m||b instanceof Error)&&b&&b.length&&(a={},this.features&&this.features.length?(b=b.filter(function(a){return-1===this.features.indexOf(a)},this),a.features=this.features.concat(b)):(a.features=b,a.selectedFeatureIndex=0),this.set(a))},_validatePromise:function(a){return-1<this.promises.indexOf(a)}})})},"dojo/fx/easing":function(){define(["../_base/lang"],function(a){var h={linear:function(a){return a},quadIn:function(a){return Math.pow(a,2)},quadOut:function(a){return a*(a-2)*-1},quadInOut:function(a){a*=
2;return 1>a?Math.pow(a,2)/2:-1*(--a*(a-2)-1)/2},cubicIn:function(a){return Math.pow(a,3)},cubicOut:function(a){return Math.pow(a-1,3)+1},cubicInOut:function(a){a*=2;return 1>a?Math.pow(a,3)/2:(Math.pow(a-2,3)+2)/2},quartIn:function(a){return Math.pow(a,4)},quartOut:function(a){return-1*(Math.pow(a-1,4)-1)},quartInOut:function(a){a*=2;return 1>a?Math.pow(a,4)/2:-.5*(Math.pow(a-2,4)-2)},quintIn:function(a){return Math.pow(a,5)},quintOut:function(a){return Math.pow(a-1,5)+1},quintInOut:function(a){a*=
2;return 1>a?Math.pow(a,5)/2:(Math.pow(a-2,5)+2)/2},sineIn:function(a){return-1*Math.cos(Math.PI/2*a)+1},sineOut:function(a){return Math.sin(Math.PI/2*a)},sineInOut:function(a){return-1*(Math.cos(Math.PI*a)-1)/2},expoIn:function(a){return 0==a?0:Math.pow(2,10*(a-1))},expoOut:function(a){return 1==a?1:-1*Math.pow(2,-10*a)+1},expoInOut:function(a){if(0==a)return 0;if(1==a)return 1;a*=2;if(1>a)return Math.pow(2,10*(a-1))/2;--a;return(-1*Math.pow(2,-10*a)+2)/2},circIn:function(a){return-1*(Math.sqrt(1-
Math.pow(a,2))-1)},circOut:function(a){return Math.sqrt(1-Math.pow(a-1,2))},circInOut:function(a){a*=2;return 1>a?-.5*(Math.sqrt(1-Math.pow(a,2))-1):.5*(Math.sqrt(1-Math.pow(a-2,2))+1)},backIn:function(a){return Math.pow(a,2)*(2.70158*a-1.70158)},backOut:function(a){--a;return Math.pow(a,2)*(2.70158*a+1.70158)+1},backInOut:function(a){a*=2;if(1>a)return Math.pow(a,2)*(3.5949095*a-2.5949095)/2;a-=2;return(Math.pow(a,2)*(3.5949095*a+2.5949095)+2)/2},elasticIn:function(a){if(0==a||1==a)return a;--a;
return-1*Math.pow(2,10*a)*Math.sin(2*(a-.075)*Math.PI/.3)},elasticOut:function(a){return 0==a||1==a?a:Math.pow(2,-10*a)*Math.sin(2*(a-.075)*Math.PI/.3)+1},elasticInOut:function(a){if(0==a)return 0;a*=2;if(2==a)return 1;var f=.3*1.5,d=f/4;if(1>a)return--a,-.5*Math.pow(2,10*a)*Math.sin(2*(a-d)*Math.PI/f);--a;return.5*Math.pow(2,-10*a)*Math.sin(2*(a-d)*Math.PI/f)+1},bounceIn:function(a){return 1-h.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*Math.pow(a,2):a<2/2.75?7.5625*Math.pow(a-1.5/
2.75,2)+.75:a<2.5/2.75?7.5625*Math.pow(a-2.25/2.75,2)+.9375:7.5625*Math.pow(a-2.625/2.75,2)+.984375},bounceInOut:function(a){return.5>a?h.bounceIn(2*a)/2:h.bounceOut(2*a-1)/2+.5}};a.setObject("dojo.fx.easing",h);return h})},"esri/widgets/Popup/nls/Popup":function(){define({root:{zoom:"Zoom to",next:"Next feature",previous:"Previous feature",close:"Close",dock:"Dock",undock:"Undock",menu:"Menu",untitled:"Untitled",pageText:"{index} of {total}",noFeaturesFound:"No features found",selectedFeature:"Selected feature",
selectedFeatures:"{total} results",loading:"Loading"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/widgets/Popup/PopupRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/widget ../Widget ./PopupRendererViewModel ../../core/requireUtils dojo/i18n!./nls/PopupRenderer".split(" "),
function(a,h,m,f,d,c,n,e,l,b){function g(a,b){return void 0===b?t+"__"+a:t+"__"+a+"-"+b}var q=/^\s*(https?:\/\/[^\s]+)\s*$/i,t="esri-popup-renderer";h=function(d){function f(a){a=d.call(this)||this;return a._chartMap=new Map,a._activeMediaMap=new Map,a._chartRequirePromise=null,a._chartResizeTimer=null,a.graphic=null,a.title=null,a.viewModel=new e,a}return m(f,d),f.prototype.destroy=function(){clearTimeout(this._chartResizeTimer);this._chartResizeTimer=null;this._activeMediaMap.clear();this._activeMediaMap=
null;this._cancelChartModules();this._destroyCharts()},f.prototype.resize=function(){this._resizeCharts();this.emit("resize")},f.prototype.render=function(){var a=c.tsx("div",{key:g("loading-container"),"class":"esri-popup-renderer__loading-container"},c.tsx("span",{"class":c.join("esri-icon-loading-indicator esri-rotating","esri-popup-renderer__loading-spinner")})),a=this.viewModel.waitingForContent?a:this._renderContent();return c.tsx("div",{"class":"esri-popup-renderer"},c.tsx("div",{"class":"esri-popup-renderer__size-container"},
c.tsx("div",{"class":"esri-popup-renderer__main-container"},a)))},f.prototype.goToMedia=function(a,b){this._activeMediaMap.set(a,b);this.scheduleRender()},f.prototype.nextMedia=function(a){this._pageContentElementMedia(a,"next")},f.prototype.previousMedia=function(a){this._pageContentElementMedia(a,"previous")},f.prototype._cancelChartModules=function(){this._chartRequirePromise&&this._chartRequirePromise.cancel()},f.prototype._destroyChart=function(a){var b=this._chartMap.get(a);b&&(b.chart.destroy(),
b.tooltip.destroy());this._chartMap["delete"](a)},f.prototype._destroyCharts=function(){this._chartMap.forEach(function(a){a.chart.destroy();a.tooltip.destroy()});this._chartMap.clear()},f.prototype._resizeCharts=function(){this._chartMap.forEach(function(a){a=a.chart;var b=a.node;b&&b.offsetWidth&&b.offsetHeight&&a.resize()})},f.prototype._renderContent=function(){this._destroyCharts();var a=this.viewModel.content;if("string"==typeof a){var b=document.createElement("div");return b.innerHTML=a,c.tsx("div",
{key:g("content"),bind:b,afterCreate:this._attachToNode})}return a&&a.isInstanceOf&&a.isInstanceOf(n)?c.tsx("div",{key:g("content")},a.render()):a instanceof HTMLElement?c.tsx("div",{key:g("content"),bind:a,afterCreate:this._attachToNode}):a&&"function"==typeof a.postMixInProperties&&"function"==typeof a.buildRendering&&"function"==typeof a.postCreate&&"function"==typeof a.startup?c.tsx("div",{key:g("content"),bind:a.domNode,afterCreate:this._attachToNode}):Array.isArray(a)?a.length?c.tsx("div",{key:g("content")},
a.map(this._renderContentElement,this)):null:void 0},f.prototype._renderContentElement=function(a,b){var c=this.viewModel.contentTypes;switch(a.type){case c.attachments:return this._renderAttachments(a,b);case c.fields:return this._renderFields(a,b);case c.media:return this._renderMedia(a,b);case c.text:return this._renderText(a,b);default:return null}},f.prototype._renderAttachmentInfo=function(a,d){return c.tsx("li",{"class":"esri-popup-renderer__attachments-item",key:g("attachment",d)},c.tsx("a",
{"class":"esri-popup-renderer__attachments-item-link",href:a.url,target:"_blank"},c.tsx("span",{"class":c.join("esri-icon-download","esri-popup-renderer__attachments-item-icon")}),c.tsx("span",{"class":"esri-popup-renderer__attachments-item-title"},a.name||b.noTitle)))},f.prototype._renderAttachments=function(a,d){return(a=a.attachmentInfos)&&a.length?c.tsx("div",{key:g("attachments-element"),"class":c.join("esri-popup-renderer__attachments","esri-popup-renderer__content-element")},c.tsx("div",{"class":"esri-popup-renderer__attachments-title"},
b.attach),c.tsx("ul",{"class":"esri-popup-renderer__attachments-items"},a.map(this._renderAttachmentInfo))):null},f.prototype._renderFieldInfo=function(a,d){var e=this.viewModel,k=e.formattedAttributes.content[d]||e.formattedAttributes.global,f=a.fieldName,e=a.label||f,k=null==k[f]?"":k[f];a=!(!a.format||!a.format.dateFormat);f='\x3ca target\x3d"_blank" href\x3d"$1" title\x3d"'+e+'"\x3e'+b.view+"\x3c/a\x3e";k=k&&"string"==typeof k?k.replace(q,f):k;a=(l={},l["esri-popup-renderer__field-data--date"]=
a,l);return c.tsx("tr",{key:g("fields-element-info-row",d)},c.tsx("th",{key:g("fields-element-info-row-header",d),"class":"esri-popup-renderer__field-header"},e),c.tsx("td",{key:g("fields-element-info-row-data",d),"class":"esri-popup-renderer__field-data",classes:a,innerHTML:k}));var l},f.prototype._renderFields=function(a,d){var e=this;return(a=a.fieldInfos)?c.tsx("div",{key:g("fields-element",d),"class":c.join("esri-popup-renderer__fields","esri-popup-renderer__content-element")},c.tsx("table",
{summary:b.fieldsSummary,key:g("fields-element-table",d)},c.tsx("tbody",{key:g("fields-element-table-body",d)},a.map(function(a){return e._renderFieldInfo(a,d)})))):null},f.prototype._shouldOpenInNewTab=function(a){void 0===a&&(a="");return!/^(?:mailto:|tel:)/.test(a.trim().toLowerCase())},f.prototype._renderMediaInfoType=function(a,b){var d=a.value,e=a.title,e=void 0===e?"":e,f=a.type,l=d.sourceURL,d=d.linkURL,h=this._shouldOpenInNewTab(d)?"_self":"_blank";return"image"===f?(a=c.tsx("img",{alt:e,
src:l}),(b=d?c.tsx("a",{title:e,href:d,target:h},a):null)?b:a):-1!==f.indexOf("chart")?c.tsx("div",{key:g("chart",b),bind:this,"data-media-info":a,"data-content-element-index":b,"class":"esri-popup-renderer__media-chart",afterCreate:this._getChartDependencies,afterUpdate:this._getChartDependencies}):void 0},f.prototype._getChartDependencies=function(b){var c=this,d=b["data-media-info"],g=b["data-content-element-index"],e=d.value,f=e.theme||"Claro",h=d.type,d=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],
n=f;"string"==typeof f&&(n=f.replace(/\./g,"/"),-1===n.indexOf("/")&&(n="dojox/charting/themes/"+n));d.push(n);this._cancelChartModules();this._chartRequirePromise=l.when(a,d).then(function(a){c._renderChart(b,g,h,e,a[0],a[1],a[2]);clearTimeout(c._chartResizeTimer);c._chartResizeTimer=setTimeout(function(){return c.resize()},0);c._chartRequirePromise=null})},f.prototype._renderChart=function(a,b,c,d,g,e,f){a=new g(a,{margins:{l:4,t:4,r:4,b:4}});switch(f&&a.setTheme(f),c){case "pie-chart":a.addPlot("default",
{type:"Pie",labels:!1});a.addSeries("Series A",d.fields);break;case "line-chart":a.addPlot("default",{type:"Markers"});a.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});d.fields.forEach(function(a,b){a.x=b+1});a.addSeries("Series A",d.fields);break;case "column-chart":a.addPlot("default",{type:"Columns",gap:3});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});a.addSeries("Series A",d.fields);break;
case "bar-chart":a.addPlot("default",{type:"Bars",gap:3}),a.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),a.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),a.addSeries("Series A",d.fields)}c=new e(a);a.render();this._chartMap.set(b,{chart:a,tooltip:c})},f.prototype._renderMediaInfo=function(a,b){this._destroyChart(b);var d=this._renderMediaInfoType(a,b),e=a.title?c.tsx("div",{key:g("media-title",b),"class":"esri-popup-renderer__media-item-title",
innerHTML:a.title}):null;a=a.caption?c.tsx("div",{key:g("media-caption",b),"class":"esri-popup-renderer__media-item-caption",innerHTML:a.caption}):null;return c.tsx("div",{key:g("media-container",b),"class":"esri-popup-renderer__media-item-container",bind:this,afterCreate:this.resize,afterUpdate:this.resize},c.tsx("div",{key:g("media-itme-container",b),"class":"esri-popup-renderer__media-item"},d),e,a)},f.prototype._renderMediaStatsItem=function(a,b,d){d="chart"===d?c.join("esri-popup-renderer__media-chart-icon",
"esri-icon-chart"):c.join("esri-popup-renderer__media-image-icon","esri-icon-media");return c.tsx("li",{"class":"esri-popup-renderer__media-image-summary"},c.tsx("span",{"class":"esri-popup-renderer__media-count","aria-label":a},"("+b+")"),c.tsx("span",{"aria-hidden":"true","class":d}))},f.prototype._renderMediaPageButton=function(a,d){var e=(a="previous"===a)?b.previous:b.next,k=a?c.join("esri-popup-renderer__button","esri-popup-renderer__media-previous"):c.join("esri-popup-renderer__button","esri-popup-renderer__media-next"),
f=a?c.join("esri-popup-renderer__icon","esri-popup-renderer__media-previous-icon","esri-icon-left-triangle-arrow"):c.join("esri-popup-renderer__icon","esri-popup-renderer__media-next-icon","esri-icon-right-triangle-arrow"),l=a?c.join("esri-popup-renderer__icon","esri-popup-renderer__media-previous-icon--rtl","esri-icon-right-triangle-arrow"):c.join("esri-popup-renderer__icon","esri-popup-renderer__media-next-icon--rtl","esri-icon-left-triangle-arrow"),h=a?this._previousClick:this._nextClick;return c.tsx("div",
{key:g(a?"previous":"next",d),title:e,tabIndex:0,role:"button","class":k,"data-content-element-index":d,bind:this,onclick:h},c.tsx("span",{"aria-hidden":"true","class":f}),c.tsx("span",{"aria-hidden":"true","class":l}),c.tsx("span",{"class":"esri-icon-font-fallback-text"},e))},f.prototype._renderMedia=function(a,d){a=a.mediaInfos;var e=this._getMediaStats(a),k=e.total,f=(l={},l["esri-popup-renderer--media-pagination-visible"]=1<e.total,l),l=this._renderMediaStatsItem(b.numImages,e.images,"image"),
e=this._renderMediaStatsItem(b.numCharts,e.charts,"chart"),h=this._renderMediaPageButton("previous",d),n=this._renderMediaPageButton("next",d),p=this._activeMediaMap.get(d);return isNaN(p)&&(this._activeMediaMap.set(d,0),p=0),k?c.tsx("div",{key:g("media-element",d),"class":c.join("esri-popup-renderer__media","esri-popup-renderer__content-element"),classes:f},c.tsx("ul",{"class":"esri-popup-renderer__media-summary"},l,e),c.tsx("div",{key:g("media-element-container",d),"class":"esri-popup-renderer__media-container"},
h,this._renderMediaInfo(a[p],d),n)):null;var l},f.prototype._renderText=function(a,b){return a.text?c.tsx("div",{key:g("text-element",b),innerHTML:a.text,"class":c.join("esri-popup-renderer__text","esri-popup-renderer__content-element")}):null},f.prototype._attachToNode=function(a){a.appendChild(this)},f.prototype._getMediaStats=function(a){var b=0,c=0;return a.forEach(function(a){a=a.type;"image"===a?b++:-1!==a.indexOf("chart")&&c++}),{total:c+b,images:b,charts:c}},f.prototype._pageContentElementMedia=
function(a,b){var c=this.viewModel.content;(c=(c=c&&c[a])&&c.mediaInfos)&&c.length&&(b="previous"===b?-1:1,b=(this._activeMediaMap.get(a)+b+c.length)%c.length,this._activeMediaMap.set(a,b),this.scheduleRender())},f.prototype._previousClick=function(a){this.previousMedia(a.currentTarget["data-content-element-index"])},f.prototype._nextClick=function(a){this.nextMedia(a.currentTarget["data-content-element-index"])},f}(d.declared(n));return f([d.aliasOf("viewModel.graphic")],h.prototype,"graphic",void 0),
f([d.aliasOf("viewModel.title")],h.prototype,"title",void 0),f([d.property({type:e}),c.renderable(["viewModel.waitingForContent","viewModel.content"])],h.prototype,"viewModel",void 0),f([c.accessibleHandler()],h.prototype,"_previousClick",null),f([c.accessibleHandler()],h.prototype,"_nextClick",null),h=f([d.subclass("esri.widgets.Popup.PopupRenderer")],h)})},"esri/widgets/support/widget":function(){define(["require","exports","./decorators","./jsxFactory","./widgetUtils"],function(a,h,m,f,d){function c(a){for(var c in a)h.hasOwnProperty(c)||
(h[c]=a[c])}Object.defineProperty(h,"__esModule",{value:!0});c(m);c(f);c(d)})},"esri/widgets/support/decorators":function(){define("require exports ./decorators/accessibleHandler ./decorators/renderable ./decorators/triggerWithSpaceOrEnter ./decorators/vmEvent ./decorators/vmMethod ./decorators/vmProperty".split(" "),function(a,h,m,f,d,c,n,e){function l(a){for(var b in a)h.hasOwnProperty(b)||(h[b]=a[b])}Object.defineProperty(h,"__esModule",{value:!0});l(m);l(f);l(d);l(c);l(n);l(e)})},"esri/widgets/support/decorators/accessibleHandler":function(){define(["require",
"exports","dojo/keys"],function(a,h,m){function f(a){return function(c){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];e=c.type;return c instanceof KeyboardEvent||"keyup"===e||"keydown"===e||"keypress"===e?void((c.keyCode===m.ENTER||c.keyCode===m.SPACE)&&(c.preventDefault(),c.target.click())):void a.call.apply(a,[this,c].concat(d))}}Object.defineProperty(h,"__esModule",{value:!0});h.accessibleHandler=function(){return function(a,c){return{value:f(a[c])}}}})},"esri/widgets/support/decorators/renderable":function(){define(["require",
"exports","./propUtils"],function(a,h,m){Object.defineProperty(h,"__esModule",{value:!0});h.renderable=function(a){var d="string"==typeof a?m.splitProps(a):a;return function(a,f){a._renderableProps||(a._renderableProps=[]);a=a._renderableProps;return d?void a.push.apply(a,m.normalizePropNames(d,f)):void a.push(f)}}})},"esri/widgets/support/decorators/propUtils":function(){define(["require","exports"],function(a,h){Object.defineProperty(h,"__esModule",{value:!0});h.splitProps=function(a){return a.split(",").map(function(a){return a.trim()})};
h.normalizePropNames=function(a,f){return a.map(function(a){return 0===a.indexOf(f)?a:f+"."+a})}})},"esri/widgets/support/decorators/triggerWithSpaceOrEnter":function(){define(["require","exports","../../../core/Logger","./accessibleHandler"],function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});h.triggerWithSpaceOrEnter=function(){return m.getLogger("esri.widgets.support.decorators.triggerWithSpaceOrEnter").warn("@triggerWithSpaceOrEnter is deprecated, use @accessibleHandler instead."),
f.accessibleHandler.apply(this,arguments)}})},"esri/widgets/support/decorators/vmEvent":function(){define(["require","exports","./propUtils"],function(a,h,m){Object.defineProperty(h,"__esModule",{value:!0});h.vmEvent=function(a){return function(d){d._delegatedEventNames||(d._delegatedEventNames=[]);var c=Array.isArray(a)?a:m.splitProps(a);d._delegatedEventNames=d._delegatedEventNames.concat(c)}}})},"esri/widgets/support/decorators/vmMethod":function(){define(["require","exports","../../../core/accessorSupport/get"],
function(a,h,m){Object.defineProperty(h,"__esModule",{value:!0});h.vmMethod=function(){return console.warn("@vmMethod is deprecated, use @aliasOf instead"),function(a,d,c){var f,e="viewModel."+d;c.value=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(b=m["default"](this,e))?(f||(f=e.split(".").slice(0,-1).join(".")),b=b.bind(m["default"](this,f)),b.call.apply(b,[this].concat(a))):void 0}}}})},"esri/widgets/support/decorators/vmProperty":function(){define(["require","exports",
"../../../core/accessorSupport/decorators"],function(a,h,m){Object.defineProperty(h,"__esModule",{value:!0});h.vmProperty=function(a){var d=this;return console.warn("@vmProperty is deprecated, use @aliasOf instead"),function(c,f){m.property.call(d,{aliasOf:"viewModel."+(a||f)}).call(d,c,f)}}})},"esri/widgets/support/jsxFactory":function(){define(["require","exports","../libs/maquette/maquette"],function(a,h,m){Object.defineProperty(h,"__esModule",{value:!0});h.tsx=m.h})},"esri/widgets/libs/maquette/maquette":function(){!function(a,
h){"function"==typeof define&&define.amd?define(["exports"],h):h("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:a.maquette={})}(this,function(a){var h,m,f=[],d=function(a,b){var c={};return Object.keys(a).forEach(function(b){c[b]=a[b]}),b&&Object.keys(b).forEach(function(a){c[a]=b[a]}),c},c=function(a,b){return a.vnodeSelector!==b.vnodeSelector?!1:a.properties&&b.properties?a.properties.key!==b.properties.key?!1:a.properties.bind===b.properties.bind:!a.properties&&!b.properties},
n=function(a){return{vnodeSelector:"",properties:void 0,children:void 0,text:a.toString(),domNode:null}},e=function(a,b,c){for(var d=0,g=b.length;g>d;d++){var k=b[d];Array.isArray(k)?e(a,k,c):null!==k&&void 0!==k&&(k.hasOwnProperty("vnodeSelector")||(k=n(k)),c.push(k))}},l=function(){throw Error("Provide a transitions object to the projectionOptions to do animations");},b={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(a,b,c){a.style[b]=c},transitions:{enter:l,exit:l}},g=function(a){if("string"!=
typeof a)throw Error("Style values must be strings");},q=function(a,b,c){if(b)for(var d=c.eventHandlerInterceptor,e=Object.keys(b),k=e.length,f=function(k){k=e[k];var f=b[k];if("className"===k)throw Error('Property "className" is not supported, use "class".');if("class"===k)f.split(/\s+/).forEach(function(b){return a.classList.add(b)});else if("classes"===k){var l=Object.keys(f),h=l.length;for(k=0;h>k;k++){var n=l[k];f[n]&&a.classList.add(n)}}else if("styles"===k)for(l=Object.keys(f),h=l.length,k=
0;h>k;k++){var n=l[k],p=f[n];p&&(g(p),c.styleApplyer(a,n,p))}else"key"!==k&&null!==f&&void 0!==f&&(l=typeof f,"function"===l?0===k.lastIndexOf("on",0)&&(d&&(f=d(k,f,a,b)),"oninput"===k&&!function(){var a=f;f=function(b){b.target["oninput-value"]=b.target.value;a.apply(this,[b])}}(),a[k]=f):"string"===l&&"value"!==k&&"innerHTML"!==k?"http://www.w3.org/2000/svg"===c.namespace&&"href"===k?a.setAttributeNS("http://www.w3.org/1999/xlink",k,f):a.setAttribute(k,f):a[k]=f)},l=0;k>l;l++)f(l)},t=function(a,
b){var c=a.domNode;if(a.properties){var d=a.properties.exitAnimation;if(d){c.style.pointerEvents="none";var g=function(){c.parentNode&&c.parentNode.removeChild(c)};return"function"==typeof d?void d(c,g,a.properties):void b.exit(a.domNode,a.properties,d,g)}}c.parentNode&&c.parentNode.removeChild(c)},w=function(a,b,d,g){var e=a[b];if(""!==e.vnodeSelector){var k=e.properties;if(!(k&&(void 0===k.key?k.bind:k.key)))for(k=0;k<a.length;k++)if(k!==b&&c(a[k],e))throw"added"===g?Error(d.vnodeSelector+" had a "+
e.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable."):Error(d.vnodeSelector+" had a "+e.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.");}},v=function(a,b,c){var d=b.children;if(d)for(var g=0;g<d.length;g++)h(d[g],a,void 0,c);b.text&&(a.textContent=b.text);q(a,b.properties,c);b.properties&&b.properties.afterCreate&&b.properties.afterCreate.apply(b.properties.bind||
b.properties,[a,c,b.vnodeSelector,b.properties,b.children])};h=function(a,b,c,g){var e,k,f,l,h,n=0,p=a.vnodeSelector;if(""===p)e=a.domNode=document.createTextNode(a.text),void 0!==c?b.insertBefore(e,c):b.appendChild(e);else{for(k=0;k<=p.length;++k)f=p.charAt(k),(k===p.length||"."===f||"#"===f)&&(l=p.charAt(n-1),h=p.slice(n,k),"."===l?e.classList.add(h):"#"===l?e.id=h:("svg"===h&&(g=d(g,{namespace:"http://www.w3.org/2000/svg"})),void 0!==g.namespace?e=a.domNode=document.createElementNS(g.namespace,
h):(e=a.domNode=document.createElement(h),"input"===h&&a.properties&&void 0!==a.properties.type&&e.setAttribute("type",a.properties.type)),void 0!==c?b.insertBefore(e,c):b.appendChild(e)),n=k+1);v(e,a,g)}};m=function(a,b,e){var k=a.domNode,l=!1;if(a===b)return!1;var n=!1;if(""===b.vnodeSelector){if(b.text!==a.text)return a=document.createTextNode(b.text),k.parentNode.replaceChild(a,k),b.domNode=a,l=!0}else{0===b.vnodeSelector.lastIndexOf("svg",0)&&(e=d(e,{namespace:"http://www.w3.org/2000/svg"}));
a.text!==b.text&&(n=!0,void 0===b.text?k.removeChild(k.firstChild):k.textContent=b.text);var p;p=a.children;var q=b.children,u=e;if(p===q)p=!1;else{p=p||f;for(var q=q||f,r,v=p.length,H=q.length,I=u.transitions,M=r=0,Q=!1;H>M;){var K=v>r?p[r]:void 0,G=q[M];if(void 0!==K&&c(K,G))Q=m(K,G,u)||Q,r++;else{b:{var K=p,N=G;if(""!==N.vnodeSelector)for(var S=r+1;S<K.length;S++)if(c(K[S],N)){K=S;break b}K=-1}if(0<=K){for(;K>r;r++)t(p[r],I),w(p,r,b,"removed");Q=m(p[K],G,u)||Q;r=K+1}else h(G,k,v>r?p[r].domNode:
void 0,u),K=I,G.properties&&(N=G.properties.enterAnimation)&&("function"==typeof N?N(G.domNode,G.properties):K.enter(G.domNode,G.properties,N)),w(q,M,b,"added")}M++}if(v>r)for(;v>r;r++)t(p[r],I),w(p,r,b,"removed");p=Q}n=p||n;p=a.properties;q=b.properties;u=e;if(q){Q=!1;v=Object.keys(q);H=v.length;for(I=0;H>I;I++)if(G=v[I],M=q[G],r=p[G],"class"===G){if(r!==M)throw Error('"class" property may not be updated. Use the "classes" property for conditional css classes.');}else if("classes"===G)for(K=k.classList,
N=Object.keys(M),S=N.length,G=0;S>G;G++){var J=N[G],W=!!M[J];W!==!!r[J]&&(Q=!0,W?K.add(J):K.remove(J))}else if("styles"===G)for(K=Object.keys(M),N=K.length,G=0;N>G;G++)S=K[G],J=M[S],J!==r[S]&&(Q=!0,J?(g(J),u.styleApplyer(k,S,J)):u.styleApplyer(k,S,""));else if(M||"string"!=typeof r||(M=""),"value"===G)K=k[G],K!==M&&(k["oninput-value"]?K===k["oninput-value"]:M!==r)&&(k[G]=M,k["oninput-value"]=void 0),M!==r&&(Q=!0);else if(M!==r){Q=typeof M;if("function"===Q)throw Error("Functions may not be updated on subsequent renders (property: "+
G+"). Hint: declare event handler functions outside the render() function.");"string"===Q&&"innerHTML"!==G?"http://www.w3.org/2000/svg"===u.namespace&&"href"===G?k.setAttributeNS("http://www.w3.org/1999/xlink",G,M):"role"===G&&""===M?k.removeAttribute(G):k.setAttribute(G,M):k[G]!==M&&(k[G]=M);Q=!0}p=Q}else p=void 0;n=p||n;b.properties&&b.properties.afterUpdate&&b.properties.afterUpdate.apply(b.properties.bind||b.properties,[k,e,b.vnodeSelector,b.properties,b.children])}return n&&b.properties&&b.properties.updateAnimation&&
b.properties.updateAnimation(k,b.properties,a.properties),b.domNode=a.domNode,l};var r=function(a,b){return{update:function(c){if(a.vnodeSelector!==c.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");m(a,c,b);a=c},domNode:a.domNode}};a.h=function(a){var b=arguments[1];if("string"!=typeof a)throw Error();var c=1;!b||b.hasOwnProperty("vnodeSelector")||Array.isArray(b)||"object"!=typeof b?b=void 0:c=
2;var d,g,f=arguments.length;if(f===c+1){var l=arguments[c];"string"==typeof l?d=l:void 0!==l&&null!==l&&1===l.length&&"string"==typeof l[0]&&(d=l[0])}if(void 0===d)for(g=[];f>c;c++)l=arguments[c],null===l||void 0===l||(Array.isArray(l)?e(a,l,g):l.hasOwnProperty("vnodeSelector")?g.push(l):g.push(n(l)));return{vnodeSelector:a,properties:b,children:g,text:""===d?void 0:d,domNode:null}};a.dom={create:function(a,c){return c=d(b,c),h(a,document.createElement("div"),void 0,c),r(a,c)},append:function(a,
c,g){return g=d(b,g),h(c,a,void 0,g),r(c,g)},insertBefore:function(a,c,g){return g=d(b,g),h(c,a.parentNode,a,g),r(c,g)},merge:function(a,c,g){return g=d(b,g),c.domNode=a,v(a,c,g),r(c,g)},replace:function(a,c,g){return g=d(b,g),h(c,a.parentNode,a,g),a.parentNode.removeChild(a),r(c,g)}};a.createCache=function(){var a,b;return{invalidate:function(){a=b=void 0},result:function(c,d){if(a)for(var g=0;g<c.length;g++)a[g]!==c[g]&&(b=void 0);return b||(b=d(),a=c),b}}};a.createMapping=function(a,b,c){var d=
[],g=[];return{results:g,map:function(e){for(var k=e.map(a),f=g.slice(),l=0,h=0;h<e.length;h++){var n=e[h],p=k[h];if(p===d[l])g[h]=f[l],c(n,f[l],h),l++;else{for(var m=!1,q=1;q<d.length+1;q++){var u=(l+q)%d.length;if(d[u]===p){g[h]=f[u];c(e[h],f[u],h);l=u+1;m=!0;break}}m||(g[h]=b(n,h))}}g.length=e.length;d=k}}};a.createProjector=function(c){var g,e=d(b,c);e.eventHandlerInterceptor=function(a,b,c,d){return function(){return g.scheduleRender(),b.apply(d.bind||this,arguments)}};var f,l=!0,h=!1,n=[],p=
[],m=function(){if(f=void 0,l){l=!1;for(var a=0;a<n.length;a++){var b=p[a]();n[a].update(b)}l=!0}};return g={renderNow:m,scheduleRender:function(){f||h||(f=requestAnimationFrame(m))},stop:function(){f&&(cancelAnimationFrame(f),f=void 0);h=!0},resume:function(){h=!1;l=!0;g.scheduleRender()},append:function(b,c){n.push(a.dom.append(b,c(),e));p.push(c)},insertBefore:function(b,c){n.push(a.dom.insertBefore(b,c(),e));p.push(c)},merge:function(b,c){n.push(a.dom.merge(b,c(),e));p.push(c)},replace:function(b,
c){n.push(a.dom.replace(b,c(),e));p.push(c)},detach:function(a){for(var b=0;b<p.length;b++)if(p[b]===a)return p.splice(b,1),n.splice(b,1)[0];throw Error("renderMaquetteFunction was not found");}}}})},"esri/widgets/support/widgetUtils":function(){define(["require","exports","../../core/Logger"],function(a,h,m){function f(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return a.join(" ")}Object.defineProperty(h,"__esModule",{value:!0});h.classes=function(){return m.getLogger("esri.widgets.support.widgetUtils").warn("classes is deprecated, use join instead."),
f.apply(this,arguments)};h.join=f;h.isRtl=function(){return"rtl"===document.head.dir}})},"esri/widgets/Widget":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor ../core/Evented ../core/HandleRegistry ../core/Logger ../core/watchUtils dojo/_base/lang dojo/dom ./libs/maquette/maquette ../core/Collection".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q,t,w){var v=l.getLogger("esri.widgets.Widget"),
r=0;a=function(a){function c(b,c){b=a.call(this)||this;return b._attached=!1,b.className="",b.destroyed=!1,b.domNode=null,b.visible=!0,b._projector=t.createProjector({}),b._handles=new e,b.render=b.render.bind(b),b}return m(c,a),c.prototype.normalizeCtorArgs=function(a,b){a=g.mixin({},a);return b&&(a.container=b),a},c.prototype.initialize=function(){var a=this;this._handles.add(this._renderableProps.map(function(c){return b.init(a,c,function(a,b){var d=this;if(w.isCollection(b)&&this._handles.remove(this.declaredClass+
":"+c+"-collection-change-event-listener"),w.isCollection(a))a=a.on("change",function(){return d.scheduleRender()}),this._handles.add(a,this.declaredClass+":"+c+"-collection-change-event-listener");this.scheduleRender()})}));this._delegatedEventNames.length&&this._handles.add(b.init(this,"viewModel",function(){a._get("viewModel")&&a._handles.remove("delegated-events");a._delegatedEventNames.map(function(b){return a.viewModel.on(b,function(c){a.emit(b,c)})})}),"delegated-events");this.postInitialize();
this._handles.add(b.whenOnce(this,"container",function(b){return a._attach(b)}))},c.prototype.postInitialize=function(){},c.prototype.destroy=function(){this.destroyed||(this.viewModel&&this.viewModel.destroy(),this._detach(this.container),this._handles.destroy(),this._set("destroyed",!0))},c.prototype.startup=function(){v.warn("Widget.startup() is deprecated and no longer needed")},Object.defineProperty(c.prototype,"container",{set:function(a){this._get("container")||this._set("container",a)},enumerable:!0,
configurable:!0}),c.prototype.castContainer=function(a){return q.byId(a)},Object.defineProperty(c.prototype,"id",{get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+r++},set:function(a){a&&this._set("id",a)},enumerable:!0,configurable:!0}),c.prototype.scheduleRender=function(){this._projector.scheduleRender()},c.prototype.on=function(a,b){var c=this.inherited(arguments);return this._handles.add(c),c},c.prototype.own=function(a){1<arguments.length&&
(a=Array.prototype.slice.call(arguments));this._handles.add(a)},c.prototype.renderNow=function(){this._projector.renderNow()},c.prototype._attach=function(a){a&&(this._projector.merge(a,this.render),this._attached=!0)},c.prototype._detach=function(a){a&&this._attached&&(this._projector.detach(this.render),a.parentNode&&a.parentNode.removeChild(a),this._attached=!1)},c}(d.declared(c,n));return f([d.shared([])],a.prototype,"_renderableProps",void 0),f([d.shared([])],a.prototype,"_delegatedEventNames",
void 0),f([d.property({value:null})],a.prototype,"container",null),f([d.cast("container")],a.prototype,"castContainer",null),f([d.property({readOnly:!0})],a.prototype,"destroyed",void 0),f([d.property({aliasOf:"container"})],a.prototype,"domNode",void 0),f([d.property({dependsOn:["container"]})],a.prototype,"id",null),f([d.property()],a.prototype,"viewModel",void 0),f([d.property()],a.prototype,"visible",void 0),a=f([d.subclass("esri.widgets.Widget")],a)})},"esri/widgets/Popup/PopupRendererViewModel":function(){define("../Widget ../../core/Accessor ../../core/Error ../../core/HandleRegistry ../../core/lang ../../core/urlUtils ../../core/promiseUtils ../../core/watchUtils ../../request ../../tasks/support/StatisticDefinition ../../tasks/support/Query ../../tasks/QueryTask ../../renderers/support/arcadeUtils dojo/_base/lang dojo/promise/all dojo/i18n!dojo/cldr/nls/number dojox/html/entities".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p){var u=/\'/g,k=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,x=/^\s*expression\//i,B=/(\{([^\{\r\n]+)\})/g,y={attachments:"attachments",fields:"fields",media:"media",text:"text"},z={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",
"short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
"short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};return h.createSubclass({declaredClass:"esri.widgets.Popup.PopupRendererViewModel",
properties:{content:{readOnly:!0},contentEnabled:!0,contentTypes:{readOnly:!0},formattedAttributes:{readOnly:!0},graphic:{},title:{readOnly:!0},waitingForContent:{readOnly:!0}},constructor:function(){this._handles=new f},initialize:function(){this._handles.add([e.init(this,"graphic",function(a){this._updateGraphic(a,this.contentEnabled)}.bind(this)),e.init(this,"contentEnabled",function(a){this._updateGraphic(this.graphic,a)}.bind(this))])},destroy:function(){this._handles.destroy();this._handles=
null;this._clearRelatedInfo();this._cancelPromises();this.graphic=null;this._set("title",null);this._set("content",null);this._set("waitingForContent",null)},content:null,contentEnabled:!0,contentTypes:y,formattedAttributes:null,graphic:null,title:"",waitingForContent:!1,_handles:null,_contentPromise:null,_contentElementPromises:null,_relatedRecordsPromise:null,_relatedRecordsQueryPromises:[],_relatedRecordsLayerPromises:[],_relatedLayersInfo:null,_relatedInfo:null,_dateFormats:z,_addValuesToHref:function(a,
b,c,g){return b=this._trimString(b),d.substitute((b?0!==b.indexOf("${"):1)?g:c,a)},_cancelPromises:function(){this._contentElementPromises&&(this._contentElementPromises.forEach(function(a){a.cancel()},this),this._contentElementPromises=null);this._contentPromise&&(this._contentPromise.cancel(),this._contentPromise=null);this._relatedRecordsQueryPromises.forEach(function(a){a.cancel()});this._relatedRecordsQueryPromises.length=0;this._relatedRecordsLayerPromises.length&&(this._relatedRecordsLayerPromises.forEach(function(a){a.cancel()}),
this._relatedRecordsLayerPromises.length=0);this._relatedRecordsPromise&&(this._relatedRecordsPromise.cancel(),this._relatedRecordsPromise=null)},_clearRelatedInfo:function(){this._relatedInfo=this._relatedLayersInfo=null},_compileContent:function(b,c){var d=b.content;if(d&&(d.nodeName||d&&d&&"function"==typeof d.postMixInProperties&&"function"==typeof d.buildRendering&&"function"==typeof d.postCreate&&"function"==typeof d.startup||d&&d.isInstanceOf&&d.isInstanceOf(a)))return d;if("string"==typeof d)return this._compileText(b,
{type:y.text,text:d}).text;if(Array.isArray(d))return d.map(function(a,d){d=(d=c&&c[d])&&d.value;switch(a.type){case y.attachments:return this._proxyAttachments(a,d);case y.fields:return this._compileFields(b,a);case y.media:return this._compileMedia(b,a);case y.text:return this._compileText(b,a)}},this);if(d)try{throw new m(this.declaredClass+"::invalid content type.");}catch(C){console.warn(C.stack)}},_compileFields:function(a,b){b=w.clone(b);var c=(a=a.template)&&a.expressionInfos;a=a&&w.clone(a.fieldInfos);
var d=[];return(b.fieldInfos||a).forEach(function(a){var b=a.fieldName.toLowerCase();if(a.hasOwnProperty("visible")?a.visible:1)b=this._isExpressionField(b)?this._getExpressionInfo(c,b):null,a.label=b?b.title:a.label,d.push(a)},this),b.fieldInfos=d,b},_compileMedia:function(a,b){var c,g;b=w.clone(b);var e=b.mediaInfos,k=a.attributes,f=a.layer,l=this.formattedAttributes.global,h=a.substOptions;return e&&(c=[],e.forEach(function(b){g=0;var e=b.value;switch(b.type){case "image":var n=e.sourceURL,n=n&&
this._trimString(d.substitute(k,this._fixTokens(n,f)));g=!!n;break;case "pie-chart":case "line-chart":case "column-chart":case "bar-chart":var p,n=e.normalizeField;e.fields=e.fields.map(function(a){return p=this._getLayerFieldInfo(f,a),p?p.name:a},this);n&&(p=this._getLayerFieldInfo(f,n),e.normalizeField=p?p.name:n);g=e.fields.some(function(a){return d.isDefined(k[a])||-1!==a.indexOf("relationships/")&&this._relatedInfo},this);break;default:return}if(g){b=w.clone(b);var e=b.value,n=b.title?this._processFieldsInLinks(this._fixTokens(b.title,
f),k):"",m=b.caption?this._processFieldsInLinks(this._fixTokens(b.caption,f),k):"";if(b.title=n?this._trimString(d.substitute(l,n,h)):"",b.caption=m?this._trimString(d.substitute(l,m,h)):"","image"===b.type)e.sourceURL=d.substitute(k,this._fixTokens(e.sourceURL,f)),e.linkURL&&(e.linkURL=this._trimString(d.substitute(k,this._fixTokens(e.linkURL,f))));else{var q,u=(n=a.template)&&n.fieldInfos;e.fields.forEach(function(a,b){if(-1!==a.indexOf("relationships/"))a=this._getRelatedChartInfos(f,u,a,e,k,h),
Array.isArray(a)?e.fields=a:e.fields[b]=a;else{var c=k[a],c=void 0===c?null:c;q=k[e.normalizeField]||0;c&&q&&(c/=q);var d=u&&this._getFieldInfo(u,a);e.fields[b]={y:c,tooltip:(d&&d.label||a)+":"+this._formatValue(c,{fieldInfos:u,fieldName:a,layer:f,substOptions:h,preventPlacesFormatting:!!q})}}},this)}c.push(b)}},this)),b.mediaInfos=c,b},_compileText:function(a,b){if((b=w.clone(b))&&b.text){var c=a.attributes,g=this.formattedAttributes.global,e=a.substOptions;a=this._processFieldsInLinks(this._fixTokens(b.text,
a.layer),c);b.text=this._trimString(d.substitute(g,a,e))}return b},_compileTitle:function(a){var b="",c=a.title,g=a.layer,e=a.attributes,k=a.substOptions,f=this.formattedAttributes.global;c&&("function"==typeof c&&(c=c.call(null,{graphic:a.graphic})),"string"==typeof c)&&-1===c.indexOf("{relationships/")&&(a=this._processFieldsInLinks(this._fixTokens(c,g),e),b=this._trimString(d.substitute(f,a,k)));return b},_getExpressionInfo:function(a,b){if(this._isExpressionField(b)){b=b.replace(x,"");b=b.toLowerCase();
var c;return a.some(function(a){return a.name.toLowerCase()===b&&(c=a),!!c}),c}},_createGraphicInfo:function(a,b){var c=a.getEffectivePopupTemplate(),d=c&&c.title,g=c&&c.content,e=a.layer,k=e&&e._getDateOpts&&e._getDateOpts().properties,f=w.clone(a.attributes)||{};return{graphic:a,template:c,title:d,content:g,contentEnabled:b,layer:e,attributes:f,properties:k,substOptions:{dateFormat:{properties:k,formatter:"DateFormat"+z["short-date-short-time"]}}}},_fixTokens:function(a,b){return a.replace(B,function(a,
c,d){return(a=this._getLayerFieldInfo(b,d))?"{"+a.name+"}":c}.bind(this))},_encodeAttributes:function(a){var b=w.clone(a)||{};return Object.keys(b).forEach(function(a){var c=b[a];"string"==typeof c&&(c=encodeURIComponent(c).replace(u,"\x26apos;"),b[a]=c)}),b},_formatAttributesToFieldInfos:function(a,b,c,d,g){a.forEach(function(e){var k=e.fieldName,f=this._getLayerFieldInfo(b,k);f&&(k=e.fieldName=f.name);if(g[k]=this._formatValue(g[k],{fieldInfos:a,fieldName:k,layer:b,substOptions:c}),d&&e.format&&
e.format.dateFormat)e=d.indexOf(k),-1<e&&d.splice(e,1)},this)},_formatAttributes:function(a,b,c,g,e,k,f,l){var h=w.clone(e);if(f&&f.forEach(function(a){var b="expression/"+a.name;a=l[a.name];a=t.executeFunction(a&&a.compiledFunc,t.createExecContext(k));"string"==typeof a&&(a=p.encode(a));h[b]=a}),this._relatedInfo&&Object.keys(this._relatedInfo).forEach(function(a){var b=this._relatedInfo[a];a=this._relatedLayersInfo[a];b&&(b.relatedFeatures.forEach(this._relatedFeaturesAttributes.bind(this,a,e,h)),
b.relatedStatsFeatures.forEach(this._relatedStatsAttributes.bind(this,a,e,h)))},this),a&&this._formatAttributesToFieldInfos(a,b,c,g,h),b){var n=b.typeIdField;Object.keys(e).forEach(function(a){if(-1===a.indexOf("relationships/")){var c=e[a];if(d.isDefined(c)){var g=this._getDomainName(b,k,a,c);d.isDefined(g)?h[a]=g:a===n&&(c=this._getTypeName(b,k,c),d.isDefined(c)&&(h[a]=c))}}},this)}return h},_formatValue:function(a,b){var c=b.fieldInfos,g=b.fieldName,e=b.substOptions,c=c&&this._getFieldInfo(c,g),
k=w.clone(c),c=b.preventPlacesFormatting;(b=this._getLayerFieldInfo(b.layer,g))&&"date"===b.type&&(b=k.format||{},b.dateFormat=b.dateFormat||"short-date-short-time",k.format=b);b=k&&k.format;g="number"==typeof a&&e.dateFormat.properties&&-1===e.dateFormat.properties.indexOf(g)&&(!b||!b.dateFormat);if(!d.isDefined(a)||!k||!d.isDefined(b))return g?this._forceLTR(a):a;var f="",l=[],k=b.hasOwnProperty("places")||b.hasOwnProperty("digitSeparator"),h=b.hasOwnProperty("digitSeparator")?b.digitSeparator:
!0;if(k)f="NumberFormat",d.isDefined(b.places)&&(!c||0<b.places)&&(l.push("places: "+Number(b.places)),f+="("+l.join(",")+")");else{if(!b.dateFormat)return g?this._forceLTR(a):a;f="DateFormat"+z[b.dateFormat]||z["short-date-short-time"]}a=d.substitute({myKey:a},"{myKey:"+f+"}",e)||"";return k&&!h&&r.group&&(a=a.replace(new RegExp("\\"+r.group,"g"),"")),g?this._forceLTR(a):a},_forceLTR:function(a){return"\x26lrm;"+a},_getDomainName:function(a,b,c,d){return(a=a.getDomain&&a.getDomain(c,{feature:b}))&&
a.codedValues?a.getName(d):null},_getFieldInfo:function(a,b){var c;b=b.toLowerCase();for(var d=0;d<a.length;d++){var g=a[d];if(g.fieldName&&g.fieldName.toLowerCase()===b){c=g;break}}return c},_getLayerFieldInfo:function(a,b){return b&&a&&a.getField?a.getField(b):null},_getTypeName:function(a,b){return(a=a.getType&&a.getType(b))&&a.name},_processFieldsInLinks:function(a,b){var c=this._encodeAttributes(b);return a&&(a=a.replace(k,function(a,d){return this._addValuesToHref(a,d,b,c)}.bind(this))),a},
_proxyAttachments:function(a,b){a=w.clone(a);b&&!(b instanceof m)&&b.attachmentInfos&&b.attachmentInfos.length&&(b=b.attachmentInfos.map(function(a){return a.url=c.addProxy(a.url),a},this),a.attachmentInfos=b);return a},_queryAttachments:function(a){var b=a.layer;if(!b)return n.resolve();"scene"===b.type&&b.companionFeatureLayer&&(b=b.companionFeatureLayer);var c=a.attributes;a=b&&b.objectIdField;c=c&&a&&c[a];return a&&b.get("capabilities.data.supportsAttachment")&&c?this._queryAttachmentInfos(b,
c):void 0},_queryAttachmentInfos:function(a,b){var c=a.url+"/"+a.layerId+"/"+b+"/attachments",d=a.token||"";return l(c,{query:{f:"json",token:d},callbackParamName:"callback"}).then(function(a){a=a.data;return a.attachmentInfos.forEach(function(a){a.url=c+"/"+a.id;d&&(a.url+="?token\x3d"+d);a.objectId=b}),a})},_queryContentElements:function(a){var b=a.content;if(!Array.isArray(b))return n.resolve();var c=[],d={};return b.forEach(function(b,g){b.type===y.attachments&&(b=this._queryAttachments(a))&&
(d[g]=b,c.push(b))},this),this._contentElementPromises=c,0===c.length?n.resolve():n.eachAlways(d).always(function(a){return this._contentElementPromises=null,a}.bind(this))},_trimString:function(a){return(a||"").trim()},_getContent:function(a){var b=a.template,b=b&&b.content;return"function"==typeof b&&(b=b.call(null,{graphic:a.graphic})),b&&"function"==typeof b.then?b:n.resolve(b)},_updateContent:function(a){if(!a.contentEnabled)return n.resolve();var b=this._getContent(a).then(function(b){return a.content=
b,this._queryContentElements(a)}.bind(this)).then(function(b){this._set("content",this._compileContent(a,b))}.bind(this)).otherwise(function(a){}.bind(this)).then(function(){this._contentPromise=null}.bind(this));return this._contentPromise=b,b},_isExpressionField:function(a){return x.test(a)},_compileExpressions:function(a){if(a){var b={};return a.forEach(function(a){b[a.name]={compiledFunc:t.createFunction(a.expression)}}),b}},_createFormattedAttributes:function(a){var b=a.graphic,c=a.attributes,
d=a.layer,g=a.template,e=g&&g.fieldInfos,k=g&&g.expressionInfos,f=this._compileExpressions(k),l=a.substOptions,h=a.properties,n={global:this._formatAttributes(e,d,l,h,c,b,k,f),content:[]};a=g&&g.content;return Array.isArray(a)&&a.forEach(function(a,g){a.type===y.fields&&a.fieldInfos&&(n.content[g]=this._formatAttributes(a.fieldInfos,d,l,h,c,b,k,f))},this),n},_queryGraphicInfo:function(a,b){var c=this._createGraphicInfo(a,b);return this._checkForRelatedRecords(c).then(function(){return this._set("formattedAttributes",
this._createFormattedAttributes(c)),this._set("title",this._compileTitle(c)),this._updateContent(c)}.bind(this))},_updateGraphic:function(a,b){this._handles&&(this._clearRelatedInfo(),this._cancelPromises(),this._set("title",""),this._set("content",null),this._set("formattedAttributes",null),this._set("waitingForContent",!1),a)&&(this._set("waitingForContent",!0),this._relatedRecordsPromise=this._queryGraphicInfo(a,b).always(function(){this._relatedRecordsPromise=null;this._relatedRecordsLayerPromises.length=
0;this._relatedRecordsQueryPromises.length=0;this._set("waitingForContent",!1)}.bind(this)))},_getAllFieldInfos:function(a){var b=[],c=a.template,d=c&&c.fieldInfos;a=a.contentEnabled;if(d&&(b=b.concat(d)),a)c=c&&c.content,Array.isArray(c)&&c.forEach(function(a){b=b.concat(a&&a.fieldInfos)},this);return b},_checkForRelatedRecords:function(a){var b=this._getAllFieldInfos(a).filter(function(a){return a&&a.fieldName&&-1!==a.fieldName.indexOf("relationships/")},this);return a.layer&&b&&0<b.length?this._getRelatedRecords({graphic:a.graphic,
fieldsInfo:b}):n.resolve()},_relatedFeaturesAttributes:function(a,b,c,d){Object.keys(d.attributes).forEach(function(g){if("esriRelCardinalityOneToOne"===a.relation.cardinality){var e=this._toRelatedFieldName([a.relation.id,g]);b[e]=c[e]=d.attributes[g]}},this)},_relatedStatsAttributes:function(a,b,c,d){Object.keys(d.attributes).forEach(function(g){var e=this._toRelatedFieldName([a.relation.id,g]);b[e]=c[e]=d.attributes[g]},this)},_getRelatedChartInfos:function(a,b,c,d,g,e){var k,f,l,h,n,p,m;return k=
[],m=this._fromRelatedFieldName(c),n=m[0],f=this._relatedInfo[n],p=this._relatedLayersInfo[n],f&&f.relatedFeatures.forEach(function(f){var n,p=f.attributes;Object.keys(p).forEach(function(f){f===m[1]&&((n={},h=p[f],d.normalizeField&&(l=-1!==d.normalizeField.indexOf("relationships/")?p[this._fromRelatedFieldName(d.normalizeField)[1]]:g[d.normalizeField]),h&&l&&(h/=l),d.tooltipField)?-1!==d.tooltipField.indexOf("relationships/")?(f=this._fromRelatedFieldName(d.tooltipField)[1],f=p[f],n.tooltip=f+": "+
this._formatValue(h,{fieldInfos:b,fieldName:f,layer:a,substOptions:e,preventPlacesFormatting:!!l})):((f=this._getLayerFieldInfo(a,c))&&(c=f.name),n.tooltip=c+": "+this._formatValue(h,{fieldInfos:b,fieldName:d.tooltipField,layer:a,substOptions:e,preventPlacesFormatting:!!l})):n.tooltip=h,n.y=h,k.push(n))},this)},this),"esriRelCardinalityOneToMany"===p.relation.cardinality||"esriRelCardinalityManyToMany"===p.relation.cardinality?k:k[0]},_getRelatedRecords:function(a){var b=a.graphic;return this._relatedLayersInfo?
this._queryRelatedLayers(b).then(function(a){return this._setRelatedRecords(a),a}.bind(this)):this._getRelatedLayersInfo(a).then(function(a){return Object.keys(a).forEach(function(b){a[b]&&(this._relatedLayersInfo[b].relatedLayerInfo=a[b].data)},this),this._queryRelatedLayers(b).then(function(a){return this._setRelatedRecords(a),a}.bind(this))}.bind(this))},_getRelatedLayersInfo:function(a){var c,d=a.fieldsInfo,g={};return c=a.graphic.layer,this._relatedLayersInfo||(this._relatedLayersInfo={}),d.forEach(function(a){var d,
g,e,k,f;if(d=this._fromRelatedFieldName(a.fieldName),g=d[0],e=d[1],g)this._relatedLayersInfo[g]||((d=c&&c.relationships)&&d.some(function(a){return a.id==g?(f=a,!0):void 0}),f&&(this._relatedLayersInfo[g]={relation:f,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[g]&&(this._relatedLayersInfo[g].relatedFields.push(e),a.statisticType&&(k=new b({statisticType:a.statisticType,onStatisticField:e,outStatisticFieldName:e}),this._relatedLayersInfo[g].outStatistics.push(k)))},this),Object.keys(this._relatedLayersInfo).forEach(function(a){var b,
d;this._relatedLayersInfo[a]&&(b=this._relatedLayersInfo[a].relation,d=c.url+"/"+b.relatedTableId,this._relatedLayersInfo[a].relatedLayerUrl=d,g[a]=l(d,{query:{f:"json"},callbackParamName:"callback"}))},this),Object.keys(g).forEach(function(a){this._relatedRecordsLayerPromises.push(g[a])},this),v(g)},_queryRelatedLayers:function(a){var b={};return Object.keys(this._relatedLayersInfo).forEach(function(c){b[c]=this._queryRelatedLayer({graphic:a,relatedInfo:this._relatedLayersInfo[c]})},this),v(b)},
_queryRelatedLayer:function(a){var b,c,d,e,k,f,l,h,n,p,m,u,w,t;return b=a.graphic,c=b.layer,d=c.layerId,u=a.relatedInfo,e=u.relatedLayerInfo,w=u.relatedLayerUrl,t=u.relation,e&&e.relationships&&e.relationships.some(function(a){return a.relatedTableId===parseInt(d,10)?(k=a,!0):void 0}),k&&(e.fields.some(function(a){if(a.name===k.keyField)return f=-1!==["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"].indexOf(a.type)?"number":"string",!0}),p="string"===
f?k.keyField+"\x3d'"+b.attributes[t.keyField]+"'":k.keyField+"\x3d"+b.attributes[t.keyField],l=new g({where:p,outFields:u.relatedFields}),u.outStatistics&&0<u.outStatistics.length&&e.supportsStatistics&&(m=new g({where:l.where,outFields:l.outFields,outStatistics:u.outStatistics})),h=new q({url:w}),n=[h.execute(l)],m&&n.push(h.execute(m))),this._relatedRecordsQueryPromises=this._relatedRecordsQueryPromises.concat(n),v(n)},_setRelatedRecords:function(a){this._relatedInfo=[];Object.keys(a).forEach(function(b){if(a[b]){var c=
a[b];this._relatedInfo[b]={relatedFeatures:c[0].features};d.isDefined(c[1])&&(this._relatedInfo[b].relatedStatsFeatures=c[1].features)}},this)},_fromRelatedFieldName:function(a){return-1!==a.indexOf("relationships/")?a.split("/").slice(1):[]},_toRelatedFieldName:function(a){return a&&0<a.length?"relationships/"+a[0]+"/"+a[1]:""}})})},"esri/tasks/support/StatisticDefinition":function(){define(["../../core/Accessor"],function(a){return a.createSubclass({declaredClass:"esri.tasks.support.StatisticDefinition",
properties:{maxPointCount:null,maxRecordCount:null,maxVertexCount:null,onStatisticField:null,outStatisticFieldName:null,statisticType:null},toJSON:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}})})},"esri/tasks/support/Query":function(){define(["../../core/Accessor","../../core/kebabDictionary","../../core/lang",
"../../geometry/support/jsonUtils","dojo/_base/array"],function(a,h,m,f,d){var c=h({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),n=h({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",
esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),e=h({upperLeft:"upper-left",lowerLeft:"lower-left"});return a.createSubclass({declaredClass:"esri.tasks.support.Query",properties:{spatialRelationship:"intersects",text:null,where:"",geometry:null,geometryPrecision:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnDistinctValues:!1,returnJSON:!1,maxAllowableOffset:null,multipatchOption:null,num:null,start:null,
orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:"meters",resultOffset:null,resultRecordCount:null,quantizationParameters:null,sqlFormat:null},toJSON:function(a){var b={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:c.toJSON(this.spatialRelationship),maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision,returnZ:this.returnZ,returnM:this.returnM,
sqlFormat:this.sqlFormat},g=a&&a.geometry||this.geometry,l=this.objectIds,h=this.outFields,w=this.outSpatialReference,v=this.groupByFieldsForStatistics,r=this.orderByFields,p=this.outStatistics;a=this.distance;if(g&&(b.geometry=g,b.geometryType=f.getJsonType(g),b.inSR=g.spatialReference.wkid||JSON.stringify(g.spatialReference.toJSON())),l&&(b.objectIds=l.join(",")),h&&(b.outFields=h.join(",")),this.returnDistinctValues&&(b.returnDistinctValues=!0),v&&(b.groupByFieldsForStatistics=v.join(",")),r&&
(b.orderByFields=r.join(",")),p){var u=[];d.forEach(p,function(a){u.push(a.toJSON())});b.outStatistics=JSON.stringify(u)}w?b.outSR=w.wkid||JSON.stringify(w.toJSON()):g&&(b.outSR=g.spatialReference.wkid||JSON.stringify(g.spatialReference.toJSON()));g=this.timeExtent;b.time=g?g.toJSON().join(","):null;g=this.relationParam;if(g&&b.spatialRel===c.toJSON("relation")&&(b.relationParam=g),a&&(b.distance=this.distance,b.units=n.toJSON(this.units)),this.hasOwnProperty("start")&&(b.resultOffset=this.start,
b.resultRecordCount=10,""===b.where&&(b.where="1\x3d1")),this.hasOwnProperty("num")&&(b.resultRecordCount=this.num),b.pixelSize=this.pixelSize?JSON.stringify(this.pixelSize.toJSON()):null,b.multipatchOption=this.multipatchOption,this.quantizationParameters)a=m.clone(this.quantizationParameters),a.originPosition&&(a.originPosition=e.toJSON(a.originPosition)),b.quantizationParameters=JSON.stringify(a);return b._ts=this._ts,b}})})},"esri/tasks/QueryTask":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/accessorSupport/decorators dojo/_base/lang ../request ./Task ./support/FeatureSet ./support/Query ../geometry/Extent ../geometry/support/normalizeUtils".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t){a=function(a){function c(b){b=a.call(this,b)||this;return b.gdbVersion=null,b.source=null,b}return m(c,a),c.prototype.execute=function(a,b){var c=this;return t.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(function(d){d=c._encode(n.mixin({},c.parsedUrl.query,{f:"json"},a.toJSON({geometry:d&&d[0]})));if(c.source){var g={source:c.source.toJSON()};d.layer=JSON.stringify(g)}c.gdbVersion&&(d.gdbVersion=c.gdbVersion);d={query:d,callbackParamName:"callback"};
return(c.requestOptions||b)&&(d=n.mixin({},c.requestOptions,b,d)),e(c.parsedUrl.path+"/query",d)}).then(function(b){return a.returnJSON?b.data:c._handleExecuteResponse(b)})},c.prototype.executeRelationshipQuery=function(a,b){a=this._encode(n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);a={query:a,callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/queryRelatedRecords",
a).then(this._handleExecuteRelationshipQueryResponse)},c.prototype.executeForIds=function(a,b){var c=this;return t.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(function(d){d=c._encode(n.mixin({},c.parsedUrl.query,{f:"json",returnIdsOnly:!0},a.toJSON({geometry:d&&d[0]})));if(c.source){var g={source:c.source.toJSON()};d.layer=JSON.stringify(g)}c.gdbVersion&&(d.gdbVersion=c.gdbVersion);d={query:d,callbackParamName:"callback"};return(c.requestOptions||b)&&(d=n.mixin({},c.requestOptions,b,
d)),e(c.parsedUrl.path+"/query",d)}).then(this._handleExecuteForIdsResponse)},c.prototype.executeForCount=function(a,b){var c=this;return t.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(function(d){d=c._encode(n.mixin({},c.parsedUrl.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},a.toJSON({geometry:d&&d[0]})));if(c.source){var g={source:c.source.toJSON()};d.layer=JSON.stringify(g)}c.gdbVersion&&(d.gdbVersion=c.gdbVersion);d={query:d,callbackParamName:"callback"};return(c.requestOptions||
b)&&(d=n.mixin({},c.requestOptions,b,d)),e(c.parsedUrl.path+"/query",d)}).then(this._handleExecuteForCountResponse)},c.prototype.executeForExtent=function(a,b){var c=this;return t.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(function(d){d=c._encode(n.mixin({},c.parsedUrl.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},a.toJSON({geometry:d&&d[0]})));if(c.source){var g={source:c.source.toJSON()};d.layer=JSON.stringify(g)}c.gdbVersion&&(d.gdbVersion=c.gdbVersion);d={query:d,callbackParamName:"callback"};
return(c.requestOptions||b)&&(d=n.mixin({},c.requestOptions,b,d)),e(c.parsedUrl.path+"/query",d)}).then(this._handleExecuteForExtentResponse)},c.prototype._handleExecuteResponse=function(a){return b.fromJSON(a.data)},c.prototype._handleExecuteRelationshipQueryResponse=function(a){a=a.data;var c=a.geometryType,d=a.spatialReference,g={};return a.relatedRecordGroups.forEach(function(a){var e=b.fromJSON({geometryType:c,spatialReference:d,features:a.relatedRecords});if(null!=a.objectId)g[a.objectId]=e;
else for(var k in a)a.hasOwnProperty(k)&&"relatedRecords"!==k&&(g[a[k]]=e)}),g},c.prototype._handleExecuteForIdsResponse=function(a){return a.data.objectIds},c.prototype._handleExecuteForCountResponse=function(a){a=a.data;var b=a.features,c=a.objectIds;if(c)a=c.length;else{if(b)throw Error("Unable to perform query. Please check your parameters.");a=a.count}return a},c.prototype._handleExecuteForExtentResponse=function(a){a=a.data;if(a.hasOwnProperty("extent"))a.extent=q.fromJSON(a.extent);else{if(a.features)throw Error("Layer does not support extent calculation.");
if(a.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");}return a},c}(c.declared(l));return f([c.property()],a.prototype,"gdbVersion",void 0),f([c.property()],a.prototype,"source",void 0),f([d(0,c.cast(g))],a.prototype,"execute",null),f([d(0,c.cast(g))],a.prototype,"executeForIds",null),f([d(0,c.cast(g))],a.prototype,"executeForCount",null),f([d(0,c.cast(g))],a.prototype,"executeForExtent",null),a=f([c.subclass("esri.tasks.QueryTask")],a)})},"esri/tasks/Task":function(){define(["dojo/_base/lang",
"../core/Accessor","../core/urlUtils"],function(a,h,m){return h.createSubclass({declaredClass:"esri.tasks.Task",normalizeCtorArgs:function(f,d){if("string"!=typeof f)return f;var c={};return f&&(c.url=f),d&&a.mixin(c,d),c},properties:{normalization:{value:!0},parsedUrl:{value:null,readOnly:!0,dependsOn:["url"],get:function(){return this._parseUrl(this.url)}},requestOptions:{value:null},url:{value:null,type:String}},_parseUrl:function(a){return a?m.urlToObject(a):null},_useSSL:function(){var a=this.parsedUrl,
d=/^http:/i;this.url&&this.set("url",this.url.replace(d,"https:"));a&&a.path&&(a.path=a.path.replace(d,"https:"))},_encode:function(f,d,c){var h,e,l,b,g,m={};for(l in f)if("declaredClass"!==l&&(h=f[l],e=typeof h,null!==h&&void 0!==h&&"function"!==e))if(a.isArray(h))for(m[l]=[],g=h.length,b=0;g>b;b++)m[l][b]=this._encode(h[b]);else"object"===e?h.toJSON&&(b=h.toJSON(c&&c[l]),"esri.tasks.support.FeatureSet"===h.declaredClass&&b.spatialReference&&(b.sr=b.spatialReference,delete b.spatialReference),m[l]=
d?b:JSON.stringify(b)):m[l]=h;return m}})})},"esri/tasks/support/FeatureSet":function(){define("../../core/kebabDictionary ../../core/JSONSupport ../../core/lang ../../Graphic ../../layers/support/Field ../../geometry/SpatialReference ../../geometry/support/graphicsUtils ../../geometry/support/jsonUtils dojo/_base/lang".split(" "),function(a,h,m,f,d,c,n,e,l){a=a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"});
return h.createSubclass({declaredClass:"esri.tasks.support.FeatureSet",getDefaults:function(){return l.mixin(this.inherited(arguments),{features:[]})},properties:{displayFieldName:null,exceededTransferLimit:null,features:{value:null,json:{read:function(a,d){var b,g=c.fromJSON(d.spatialReference);return b=a.map(function(a){var b=f.fromJSON(a);a=a.geometry&&a.geometry.spatialReference;return b.geometry&&!a&&(b.geometry.spatialReference=g),b}),d.transform&&this._hydrate(d.transform,d.geometryType,b),
b}}},fields:{value:null,type:[d]},geometryType:{value:null,json:{read:a.fromJSON}},spatialReference:{type:c}},toJSON:function(a){var b={hasZ:this.hasZ,hasM:this.hasM};return this.displayFieldName&&(b.displayFieldName=this.displayFieldName),this.fields&&(b.fields=this.fields.map(function(a){return a.toJSON()})),this.spatialReference?b.spatialReference=this.spatialReference.toJSON():this.features[0]&&this.features[0].geometry&&(b.spatialReference=this.features[0].geometry.spatialReference.toJSON()),
this.features[0]&&(this.features[0].geometry&&(b.geometryType=e.getJsonType(this.features[0].geometry)),b.features=n._encodeGraphics(this.features,a)),b.exceededTransferLimit=this.exceededTransferLimit,b.transform=this.transform,m.fixJson(b)},quantize:function(a){var b,c,d=a.translate[0],e=a.translate[1],f=a.scale[0],l=a.scale[1],h=this.features,n=function(a,b,c){var d,g,e,k,f,l,h,n=[];d=0;for(g=a.length;g>d;d++)e=a[d],0<d?(l=b(e[0]),h=c(e[1]),(l!==k||h!==f)&&(n.push([l-k,h-f]),k=l,f=h)):(k=b(e[0]),
f=c(e[1]),n.push([k,f]));return 0<n.length?n:null},k=function(a,b,c){return"point"===a?function(a){return a.x=b(a.x),a.y=c(a.y),a}:"polyline"===a||"polygon"===a?function(a){var d,g,e,k,f;e=a.rings||a.paths;f=[];d=0;for(g=e.length;g>d;d++)k=e[d],(k=n(k,b,c))&&f.push(k);return 0<f.length?(a.rings?a.rings=f:a.paths=f,a):null}:"multipoint"===a?function(a){var d;return d=n(a.points,b,c),0<d.length?(a.points=d,a):null}:"extent"===a?function(a){return a}:void 0}(this.geometryType,function(a){return Math.round((a-
d)/f)},function(a){return Math.round((e-a)/l)});b=0;for(c=h.length;c>b;b++)k(h[b].geometry)||(h.splice(b,1),b--,c--);return this.transform=a,this},_hydrate:function(a,c,d){if(a){var b=a.translate[0],g=a.translate[1],e=a.scale[0],f=a.scale[1],l=function(a,b,c){return"esriGeometryPoint"===a?function(a){a.x=b(a.x);a.y=c(a.y)}:"esriGeometryPolyline"===a||"esriGeometryPolygon"===a?function(a){var d,g,e,k,f,l,h,n=a.rings||a.paths;a=0;for(d=n.length;d>a;a++)for(k=n[a],g=0,e=k.length;e>g;g++)f=k[g],0<g?(l+=
f[0],h+=f[1]):(l=f[0],h=f[1]),f[0]=b(l),f[1]=c(h)}:"esriGeometryEnvelope"===a?function(a){a.xmin=b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)}:"esriGeometryMultipoint"===a?function(a){var d,g,e,k,f=a.points;a=0;for(d=f.length;d>a;a++)g=f[a],0<a?(e+=g[0],k+=g[1]):(e=g[0],k=g[1]),g[0]=b(e),g[1]=c(k)}:void 0}(c,function(a){return a*e+b},function(a){return g-a*f});a=0;for(c=d.length;c>a;a++)d[a].geometry&&l(d[a].geometry)}}})})},"esri/layers/support/Field":function(){define(["../../core/kebabDictionary",
"../../core/JSONSupport","./CodedValueDomain","./RangeDomain"],function(a,h,m,f){var d=a({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"}),c=h.createSubclass({declaredClass:"esri.layers.support.Field",
properties:{alias:null,domain:{value:null,json:{read:function(a,c){c=a&&a.type;return"range"===c?new f(a):"codedValue"===c?new m(a):null}}},editable:!1,length:-1,name:null,nullable:!0,type:{json:{read:d.fromJSON}}},clone:function(){return c.fromJSON(this.toJSON())},toJSON:function(){return{alias:this.alias,domain:this.domain&&this.domain.toJSON(),editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:d.toJSON(this.type)}}});return c})},"esri/layers/support/CodedValueDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain ../../core/lang".split(" "),
function(a,h,m,f,d,c,n){a=function(a){function c(b){b=a.call(this,b)||this;return b.codedValues=null,b.type="coded-value",b}return m(c,a),c.prototype.writeCodedValues=function(a,c){var b=null;a&&(b=a.map(function(a){return n.fixJson(n.clone(a))}));c.codedValues=b},c.prototype.getName=function(a){var b=null;if(this.codedValues){var c=String(a);this.codedValues.some(function(a){return String(a.code)===c&&(b=a.name),!!b})}return b},c}(d.declared(c));return f([d.property({json:{write:!0}})],a.prototype,
"codedValues",void 0),f([d.writer("codedValues")],a.prototype,"writeCodedValues",null),f([d.property()],a.prototype,"type",void 0),a=f([d.subclass("esri.layers.support.CodedValueDomain")],a)})},"esri/layers/support/Domain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport ../../core/kebabDictionary".split(" "),function(a,h,m,f,d,c,n){var e=n({codedValue:"coded-value"});a=function(a){function b(b){b=
a.call(this,b)||this;return b.name=null,b.type=null,b}return m(b,a),b.prototype.writeType=function(a,b){b.type=e.toJSON(a)},b}(d.declared(c));return f([d.property({json:{write:!0}})],a.prototype,"name",void 0),f([d.property({json:{read:e.fromJSON,write:!0}})],a.prototype,"type",void 0),f([d.writer("type")],a.prototype,"writeType",null),a=f([d.subclass("esri.layers.support.Domain")],a)})},"esri/layers/support/RangeDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(a,h,m,f,d,c){a=function(a){function c(c){c=a.call(this,c)||this;return c.maxValue=null,c.minValue=null,c.type="range",c}return m(c,a),c}(d.declared(c));return f([d.property({json:{read:{source:"range",reader:function(a,c){return c.range&&c.range[1]}},write:{target:"range",writer:function(a,c,d){c[d]=[this.minValue,a]}}}})],a.prototype,"maxValue",void 0),f([d.property({json:{read:{source:"range",reader:function(a,c){return c.range&&c.range[0]}},write:{target:"range",writer:function(a,c,d){c[d]=
[a,this.maxValue]}}}})],a.prototype,"minValue",void 0),f([d.property()],a.prototype,"type",void 0),a=f([d.subclass("esri.layers.support.RangeDomain")],a)})},"esri/geometry/support/graphicsUtils":function(){define(["require","exports","dojo/_base/array","../Extent"],function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});h.graphicsExtent=function(a){var c=a[0].geometry,d=c.extent,e=c;null===d&&(d=new f(e.x,e.y,e.x,e.y,c.spatialReference));for(var l=1;l<a.length;l++){var e=c=a[l].geometry,
b=c.extent;null===b&&(b=new f(e.x,e.y,e.x,e.y,c.spatialReference));d=d.clone().union(b)}return 0>d.width&&0>d.height?null:d};h.getGeometries=function(a){return m.map(a,function(a){return a.geometry})};h._encodeGraphics=function(a,c){var d=[];return m.forEach(a,function(a,f){a=a.toJSON();var b={};if(a.geometry){var g=c&&c[f];b.geometry=g&&g.toJSON()||a.geometry}a.attributes&&(b.attributes=a.attributes);d[f]=b}),d}})},"esri/geometry/support/normalizeUtils":function(){define("dojo/_base/array dojo/Deferred ../../config ../../tasks/GeometryService ../Polyline ../Polygon ./webMercatorUtils ./spatialReferenceUtils ./jsonUtils".split(" "),
function(a,h,m,f,d,c,n,e,l){function b(a,b){return Math.ceil((a-b)/(2*b))}function g(a,b){var c,d,g,e=a.paths||a.rings,k=e.length;for(c=0;k>c;c++)for(g=e[c].length,d=0;g>d;d++){var f=a.getPoint(c,d);a.setPoint(c,d,f.clone().offset(b,0))}return a}function q(b,g){if(!(b instanceof d||b instanceof c))throw console.error("straightLineDensify: the input geometry is neither polyline nor polygon"),Error("straightLineDensify: the input geometry is neither polyline nor polygon");var e,f=b instanceof d,k=[];
return a.forEach(f?b.paths:b.rings,function(a){k.push(e=[]);e.push([a[0][0],a[0][1]]);var b,c,d,f,l,h,n,p,m,q,u,w;for(l=0;l<a.length-1;l++){if(b=a[l][0],c=a[l][1],d=a[l+1][0],f=a[l+1][1],n=Math.sqrt((d-b)*(d-b)+(f-c)*(f-c)),p=(f-c)/n,m=(d-b)/n,q=n/g,1<q){for(h=1;q-1>=h;h++)w=h*g,u=m*w+b,w=p*w+c,e.push([u,w]);h=(n+Math.floor(q-1)*g)/2;u=m*h+b;w=p*h+c;e.push([u,w])}e.push([d,f])}}),f?new d({paths:k,spatialReference:b.spatialReference}):new c({rings:k,spatialReference:b.spatialReference})}function t(a,
b,c){b&&(a=q(a,1E6),a=n.webMercatorToGeographic(a,!0));return c&&(a=g(a,c)),a}function w(a,c,d){var g,e=a.x||a[0];return e>c?(g=b(e,c),a.x?a=a.clone().offset(-2*g*c,0):a[0]=e+-2*g*c):d>e&&(g=b(e,d),a.x?a=a.clone().offset(-2*g*d,0):a[0]=e+-2*g*d),a}function v(c,d){var g=-1;return a.forEach(d.cutIndexes,function(e,f){var k=d.geometries[f];a.forEach(k.rings||k.paths,function(c,d){a.some(c,function(a){if(180>a[0])return!0;var g,e=0,f=c.length;for(a=0;f>a;a++)g=c[a][0],e=g>e?g:e;e=Number(e.toFixed(9));
g=-360*b(e,180);e=c.length;for(a=0;e>a;a++)f=k.getPoint(d,a),k.setPoint(d,a,f.clone().offset(g,0));return!0})});e===g?k.rings?a.forEach(k.rings,function(a){c[e]=c[e].addRing(a)}):a.forEach(k.paths,function(a){c[e]=c[e].addPath(a)}):(g=e,c[e]=k)}),c}function r(a){for(var b=[],c=0,d=0,g=Math.min,e=Math.max,f=0;f<a.length;f++){for(var l=a[f],h=null,n=0;n<l.length;n++)h=l[n],b.push(h),0===n?(c=h[0],d=c):(c=g(c,h[0]),d=e(d,h[0]));h&&b.push([(c+d)/2,0])}return b}var p;return{_straightLineDensify:q,normalizeCentralMeridian:function(q,
k){var u=new h;k||(k=(p||(p=new f({url:m.geometryServiceUrl})),p));var r,y,z,A,D,F,C,H,I=[],M=[],Q=0;a.forEach(q,function(f){if(!f||(r||(r=f.spatialReference,y=e.getInfo(r),z=r.isWebMercator,A=z?2.0037508342788905E7:180,D=z?-2.0037508342788905E7:-180,F=z?102100:4326,C=new d({paths:[[[A,D],[A,A]]],spatialReference:{wkid:F}}),H=new d({paths:[[[D,D],[D,A]]],spatialReference:{wkid:F}})),!y))return void I.push(f);var k=l.fromJSON(f.toJSON()),h=f.extent;"point"===f.type?I.push(w(k,A,D)):"multipoint"===
f.type?(k.points=a.map(k.points,function(a){return w(a,A,D)}),I.push(k)):"extent"===f.type?(k=h.clone()._normalize(null,null,y),I.push(k.rings?new c(k):k)):h?(f=2*b(h.xmin,D)*A,k=0===f?k:g(k,f),h=h.clone().offset(f,0),h.intersects(C)&&h.xmax!==A?(Q=h.xmax>Q?h.xmax:Q,k=t(k,z),M.push(k),I.push("cut")):h.intersects(H)&&h.xmin!==D?(Q=2*h.xmax*A>Q?2*h.xmax*A:Q,k=t(k,z,360),M.push(k),I.push("cut")):I.push(k)):I.push(k)});for(var K=new d,G=b(Q,A),N=-90,S=G;0<G;){var J=-180+360*G;K.addPath([[J,N],[J,-1*N]]);
N*=-1;G--}return 0<M.length&&0<S?k?k.cut(M,K).then(function(b){M=v(M,b);var c=[];a.forEach(I,function(a,b){"cut"===a&&(a=M.shift(),q[b].rings&&1<q[b].rings.length&&a.rings.length>=q[b].rings.length?(I[b]="simplify",c.push(a)):I[b]=!0===z?n.geographicToWebMercator(a):a)});0<c.length?k.simplify(c).then(function(b){a.forEach(I,function(a,c){"simplify"===a&&(I[c]=!0===z?n.geographicToWebMercator(b.shift()):b.shift())});u.resolve(I)}).otherwise(function(a){u.reject(a)}):u.resolve(I)}).otherwise(function(a){u.reject(a)}):
u.reject(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(a.forEach(I,function(a,b){"cut"===a&&(a=M.shift(),I[b]=!0===z?n.geographicToWebMercator(a):a)}),u.resolve(I)),u.promise},getDenormalizedExtent:function(a){if(!a)return null;var b=a.extent;if(!b)return null;var c=a.spatialReference&&e.getInfo(a.spatialReference);if(!c)return b;var d=c.valid[0],c=c.valid[1],g=b.width,f=b.xmax,l=b.xmin;if("extent"===a.type||0===g||c>=g||g>2*c||d>f||l>c)return b;var h;switch(a.type){case "polygon":if(!(1<
a.rings.length))return b;h=r(a.rings);break;case "polyline":if(!(1<a.paths.length))return b;h=r(a.paths);break;case "multipoint":h=a.points}a=Math.min;for(var d=Math.max,n=b.clone(),p=0;p<h.length;p++){var m=h[p][0];0>m?(m+=c,l=d(m,l)):(m-=c,f=a(m,f))}return n.xmin=f,n.xmax=l,n.width<g?(n.xmin-=c,n.xmax-=c,n):b}}})},"esri/tasks/GeometryService":function(){define("../core/kebabDictionary ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters dojo/_base/lang".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g){var q=a({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),t=h.ensureType(b);a=l.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(a,b){a={query:g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,
b,d){var f=a[0].spatialReference;a={query:g.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(f.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)}),callbackParamName:"callback"};return(this.requestOptions||d)&&(a=g.mixin({},this.requestOptions,d,a)),e(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new c({spatialReference:f,rings:a.rings})})})},
buffer:function(a,b){var d=g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),f=a.outSpatialReference||a.geometries[0].spatialReference;a={query:d,callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new c({spatialReference:f,rings:a.rings})})})},cut:function(a,b,c){var d=a[0].spatialReference,f=a.map(function(a){return a.toJSON()});a={query:g.mixin({},
this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),target:JSON.stringify({geometryType:n.getJsonType(a[0]),geometries:f}),cutter:JSON.stringify(b.toJSON())}),callbackParamName:"callback"};return(this.requestOptions||c)&&(a=g.mixin({},this.requestOptions,c,a)),e(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return n.fromJSON(a).set("spatialReference",d)})}})},convexHull:function(a,b){var c=a[0].spatialReference;
a={query:g.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/convexHull",a).then(function(a){return n.fromJSON(a.data.geometry).set("spatialReference",c)})},densify:function(a,b){var c=g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};
return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/densify",a).then(function(a){return(a.data.geometries||[]).map(function(a){return n.fromJSON(a).set("spatialReference",d)})})},difference:function(a,b,c){var d=a[0].spatialReference;a={query:g.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:n.getJsonType(b),geometry:b.toJSON()})}),callbackParamName:"callback"};
return(this.requestOptions||c)&&(a=g.mixin({},this.requestOptions,c,a)),e(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return n.fromJSON(a).set("spatialReference",d)})})},distance:function(a,b){a={query:g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},fromGeoCoordinateString:function(a,
b){var c={};g.isObject(a.sr)?c.sr=a.sr.wkid||JSON.stringify(a.sr.toJSON()):c.sr=a.sr;c.strings=JSON.stringify(a.strings);c.conversionType=q.toJSON(a.conversionType||"mgrs");c.conversionMode=a.conversionMode;a={query:g.mixin({},this.parsedUrl.query,{f:"json"},c),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/fromGeoCoordinateString",a).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var c=g.mixin({},
this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/generalize",a).then(function(a){return(a.data.geometries||[]).map(function(a){return n.fromJSON(a).set("spatialReference",d)})})},intersect:function(a,b,c){var d=a[0].spatialReference;a={query:g.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:n.getJsonType(b),geometry:b.toJSON()})}),callbackParamName:"callback"};return(this.requestOptions||c)&&(a=g.mixin({},this.requestOptions,c,a)),e(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return n.fromJSON(a).set("spatialReference",d)})})},lengths:function(a,b){a={query:g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,
b,a)),e(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},labelPoints:function(a,b){var c=a.map(function(a){return a.toJSON()}),d=a[0].spatialReference;a={query:g.mixin({},this.parsedUrl.query,{f:"json",sr:d.wkid?d.wkid:JSON.stringify(d.toJSON()),polygons:JSON.stringify(c)}),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/labelPoints",a).then(function(a){return(a.data.labelPoints||[]).map(function(a){return n.fromJSON(a).set("spatialReference",
d)})})},offset:function(a,b){var c=g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return n.fromJSON(a).set("spatialReference",d)})})},project:function(a,b){a=t(a);var c=g.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),d=a.outSpatialReference,
f=n.getJsonType(a.geometries[0]),k=this._decodeGeometries;a={query:c,callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/project",a).then(function(a){return k(a.data,f,d)})},relation:function(a,b){a={query:g.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/relation",a).then(this._handleRelationResponse)},
reshape:function(a,b,c){var d=a.spatialReference;a={query:g.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),target:JSON.stringify({geometryType:n.getJsonType(a),geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())}),callbackParamName:"callback"};return(this.requestOptions||c)&&(a=g.mixin({},this.requestOptions,c,a)),e(this.parsedUrl.path+"/reshape",a).then(function(a){return n.fromJSON(a.data.geometry).set("spatialReference",d)})},simplify:function(a,b){var c=a[0].spatialReference,
d=g.mixin({},this.parsedUrl.query,{f:"json",sr:c.wkid?c.wkid:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),f=n.getJsonType(a[0]),k=this._decodeGeometries;a={query:d,callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/simplify",a).then(function(a){return k(a.data,f,c)})},toGeoCoordinateString:function(a,b){var c={};g.isObject(a.sr)?c.sr=a.sr.wkid||JSON.stringify(a.sr.toJSON()):c.sr=a.sr;c.coordinates=
JSON.stringify(a.coordinates);c.conversionType=q.toJSON(a.conversionType||"mgrs");c.conversionMode=a.conversionMode;c.numOfDigits=a.numOfDigits;c.rounding=a.rounding;c.addSpaces=a.addSpaces;a={query:g.mixin({},this.parsedUrl.query,{f:"json"},c),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/toGeoCoordinateString",a).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,b){var c=g.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON()),f=a.sr;a={query:c,callbackParamName:"callback"};return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new d({spatialReference:f,paths:a.paths})})})},union:function(a,b){var c=a[0].spatialReference;a={query:g.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),callbackParamName:"callback"};
return(this.requestOptions||b)&&(a=g.mixin({},this.requestOptions,b,a)),e(this.parsedUrl.path+"/union",a).then(function(a){return n.fromJSON(a.data.geometry).set("spatialReference",c)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return a=a.data,a&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b,c=[],d=a.length;
for(b=0;d>b;b++)c.push(a[b].toJSON());return{geometryType:n.getJsonType(a[0]),geometries:c}},_decodeGeometries:function(a,b,c){var d=n.getGeometryType(b);a=a.geometries;var e=[],f={spatialReference:c.toJSON()},l=g.mixin;return a.forEach(function(a,b){e[b]=new d(l(a,f))}),e},_toProjectGeometry:function(a){var b=a.spatialReference.toJSON();return a instanceof m?new c({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new d({paths:[[].concat(a.points)],
spatialReference:b})},_fromProjectedGeometry:function(a,b,c){return"extent"===b?(a=a.rings[0],new m(a[0][0],a[0][1],a[2][0],a[2][1],c)):new f({points:a.paths[0],spatialReference:c.toJSON()})}});return g.mixin(a,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,
UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,
UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,
UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",
UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"}),a})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/lang ../../geometry/support/jsonUtils ../../core/JSONSupport ../../core/Logger".split(" "),function(a,h,m,f,d,c,n,e,l){var b=l.getLogger("esri.tasks.support.ProjectParameters");
a=function(a){function d(b){b=a.call(this)||this;return b.geometries=null,b.outSpatialReference=null,b.transformation=null,b.transformForward=null,b}return m(d,a),Object.defineProperty(d.prototype,"outSR",{get:function(){return b.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead."),this.outSpatialReference},set:function(a){b.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");this.outSpatialReference=a},enumerable:!0,configurable:!0}),d.prototype.toJSON=
function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],d={};return d.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),d.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON()),d.geometries=JSON.stringify({geometryType:n.getJsonType(b),geometries:a}),this.transformation&&(d.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),c.isDefined(this.transformForward)&&(d.transformForward=this.transformForward),
d},d}(d.declared(e));return f([d.property()],a.prototype,"geometries",void 0),f([d.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0),f([d.property({json:{read:!1}})],a.prototype,"outSR",null),f([d.property()],a.prototype,"transformation",void 0),f([d.property()],a.prototype,"transformForward",void 0),a=f([d.subclass("esri.tasks.support.ProjectParameters")],a)})},"esri/renderers/support/arcadeUtils":function(){define(["require","exports","dojo/_base/lang","../../arcade/arcade",
"../../arcade/Dictionary"],function(a,h,m,f,d){function c(a){var b;try{b=a?f.parseScript(a):null}catch(g){b=null}return b}Object.defineProperty(h,"__esModule",{value:!0});var n=/^\$feature\./i,e={vars:{$feature:"any",$view:"any"}};h.createSyntaxTree=c;h.createFunction=function(a,b){b=b||m.clone(e);var d;a="string"==typeof a?c(a):a;try{d=a?f.compileScript(a,b):null}catch(q){d=null}return d};h.createExecContext=function(a,b){return{vars:{$feature:f.constructFeature(a),$view:b&&b.view},spatialReference:b&&
b.sr}};h.evalSyntaxTree=function(a,b){var c;try{c=f.executeScript(a,b,b.spatialReference)}catch(q){c=null}return c};h.executeFunction=function(a,b){var c;try{c=a?a(b,b.spatialReference):null}catch(q){c=null}return c};h.extractFieldNames=function(a){if(!a)return[];a="string"==typeof a?c(a):a;var b=[];return f.extractFieldLiterals(a).forEach(function(a){n.test(a)&&(a=a.replace(n,""),b.push(a))}),b.sort(),b.filter(function(a,c){return 0===c||b[c-1]!==a})};h.dependsOnView=function(a){return f.referencesMember(a,
"$view")};h.getViewInfo=function(a){return a&&a.viewingMode&&null!=a.scale&&a.spatialReference?{view:new d({viewingMode:a.viewingMode,scale:a.scale}),sr:a.spatialReference}:void 0}})},"esri/arcade/arcade":function(){define("require exports ./arcadeRuntime ./parser ./Feature ./arcadeCompiler dojo/has".split(" "),function(a,h,m,f,d,c,n){Object.defineProperty(h,"__esModule",{value:!0});h.compileScript=function(a,d){return n("csp-restrictions")?function(b,c){return m.executeScript(a,b,c)}:c.compileScript(a,
d)};h.constructFeature=function(a){return d.fromFeature(a)};h.parseScript=function(a){return f.parseScript(a)};h.validateScript=function(a,c){return f.validateScript(a,c,"simple")};h.scriptCheck=function(a,c,b){return f.scriptCheck(a,c,b,"full")};h.parseAndExecuteScript=function(a,c,b){return m.executeScript(f.parseScript(a),c,b)};h.executeScript=function(a,c,b){return m.executeScript(a,c,b)};h.referencesMember=function(a,c){return m.referencesMember(a,c)};h.referencesFunction=function(a,c){return m.referencesFunction(a,
c)};h.extractFieldLiterals=function(a,c){return void 0===c&&(c=!1),f.extractFieldLiterals(a,c)}})},"esri/arcade/arcadeRuntime":function(){define("require exports ../geometry/Polygon ../Graphic ../geometry/Polyline ../geometry/Point ../geometry/Extent ../geometry/Multipoint ../geometry/SpatialReference ./languageUtils ./treeAnalysis ./Dictionary ./Feature ./FunctionWrapper ./functions/date ./functions/string ./functions/maths ./functions/geometry ./functions/stats ./ImmutablePathArray ./ImmutablePointArray ../geometry/Geometry".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k,x,B,y){function z(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(D(a,b.arguments[d]));return c}function A(a,b,c){try{return c(a,b,z(a,b))}catch(fa){throw fa;}}function D(a,c){try{switch(c.type){case "EmptyStatement":return b.voidOperation;case "VariableDeclarator":var d=null===c.init?null:D(a,c.init);d===b.voidOperation&&(d=null);var e=c.id.name.toLowerCase();return null!==a.localScope?a.localScope[e]={value:d,valueset:!0,node:c.init}:a.globalScope[e]=
{value:d,valueset:!0,node:c.init},b.voidOperation;case "VariableDeclaration":for(var f=0;f<c.declarations.length;f++)D(a,c.declarations[f]);return b.voidOperation;case "BlockStatement":var k;a:{for(var l=b.voidOperation,f=0;f<c.body.length;f++)if(l=D(a,c.body[f]),l instanceof b.ReturnResult||l===b.breakResult||l===b.continueResult){k=l;break a}k=l}return k;case "FunctionDeclaration":var h=c.id.name.toLowerCase();return a.globalScope[h]={valueset:!0,node:null,value:new w(c,a)},b.voidOperation;case "ReturnStatement":var n;
if(null===c.argument)n=new b.ReturnResult(b.voidOperation);else{var p=D(a,c.argument);n=new b.ReturnResult(p)}return n;case "IfStatement":var m;if("AssignmentExpression"===c.test.type||"UpdateExpression"===c.test.type)throw Error(g.nodeErrorMessage(c.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var u=D(a,c.test);if(!0===u)m=D(a,c.consequent);else if(!1===u)m=null!==c.alternate?D(a,c.alternate):b.voidOperation;else throw Error(g.nodeErrorMessage(c,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
return m;case "ExpressionStatement":var r;if("AssignmentExpression"===c.expression.type||"UpdateExpression"===c.expression.type)r=D(a,c.expression);else{var x=D(a,c.expression);r=x===b.voidOperation?b.voidOperation:new b.ImplicitResult(x)}return r;case "AssignmentExpression":var v;var Z=D(a,c.right),f=null,y="";if("MemberExpression"===c.left.type){if(f=D(a,c.left.object),y=!0===c.left.computed?D(a,c.left.property):c.left.property.name,b.isArray(f)){if(!b.isNumber(y))throw Error("Invalid Parameter");
if(0>y&&(y=f.length+y),0>y||y>f.length)throw Error("Assignment outside of array bounds");if(y===f.length&&"\x3d"!==c.operator)throw Error("Invalid Parameter");f[y]=C(Z,c.operator,f[y],c)}else{if(f instanceof q){if(!1===b.isString(y))throw Error("Dictionary accessor must be a string");}else{if(!(f instanceof t))throw b.isImmutableArray(f)?Error("Array is Immutable"):Error("Invalid Parameter");if(!1===b.isString(y))throw Error("Feature accessor must be a string");}if(!0===f.hasField(y))f.setField(y,
C(Z,c.operator,f.field(y),c));else{if("\x3d"!==c.operator)throw Error("Invalid Parameter");f.setField(y,C(Z,c.operator,null,c))}}v=b.voidOperation}else if(f=c.left.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[f])v=(a.localScope[f]={value:C(Z,c.operator,a.localScope[f].value,c),valueset:!0,node:c.right},b.voidOperation);else if(void 0!==a.globalScope[f])v=(a.globalScope[f]={value:C(Z,c.operator,a.globalScope[f].value,c),valueset:!0,node:c.right},b.voidOperation);else throw Error("Variable not recognised");
return v;case "UpdateExpression":var A,f=null;v="";if("MemberExpression"===c.argument.type){if(f=D(a,c.argument.object),v=!0===c.argument.computed?D(a,c.argument.property):c.argument.property.name,b.isArray(f)){if(!b.isNumber(v))throw Error("Invalid Parameter");if(0>v&&(v=f.length+v),0>v||v>=f.length)throw Error("Assignment outside of array bounds");A=b.toNumber(f[v]);f[v]="++"===c.operator?A+1:A-1}else{if(f instanceof q){if(!1===b.isString(v))throw Error("Dictionary accessor must be a string");}else{if(!(f instanceof
t))throw b.isImmutableArray(f)?Error("Array is Immutable"):Error("Invalid Parameter");if(!1===b.isString(v))throw Error("Feature accessor must be a string");}if(!0!==f.hasField(v))throw Error("Invalid Parameter");A=b.toNumber(f.field(v));f.setField(v,"++"===c.operator?A+1:A-1)}y=!1===c.prefix?A:"++"===c.operator?A+1:A-1}else if(f=c.argument.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[f])y=(A=b.toNumber(a.localScope[f].value),a.localScope[f]={value:"++"===c.operator?A+1:A-1,valueset:!0,
node:c},!1===c.prefix?A:"++"===c.operator?A+1:A-1);else if(void 0!==a.globalScope[f])y=(A=b.toNumber(a.globalScope[f].value),a.globalScope[f]={value:"++"===c.operator?A+1:A-1,valueset:!0,node:c},!1===c.prefix?A:"++"===c.operator?A+1:A-1);else throw Error("Variable not recognised");return y;case "BreakStatement":return b.breakResult;case "ContinueStatement":return b.continueResult;case "ForStatement":null!==c.init&&D(a,c.init);f={testResult:!0,lastAction:b.voidOperation};do a:{v=a;Z=c;y=f;if(null!==
Z.test){if(y.testResult=D(v,Z.test),!1===y.testResult)break a;if(!0!==y.testResult)throw Error(g.nodeErrorMessage(Z,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}y.lastAction=D(v,Z.body);y.lastAction===b.breakResult?y.testResult=!1:y.lastAction instanceof b.ReturnResult?y.testResult=!1:null!==Z.update&&D(v,Z.update)}while(!0===f.testResult);return f.lastAction instanceof b.ReturnResult?f.lastAction:b.voidOperation;case "ForInStatement":return F(a,c);case "Identifier":var B;var z;try{var ca=c.name.toLowerCase();
if(null!==a.localScope&&void 0!==a.localScope[ca])B=(z=a.localScope[ca],!0===z.valueset?z.value:(z.value=D(a,z.node),z.valueset=!0,z.value));else if(void 0!==a.globalScope[ca])B=(z=a.globalScope[ca],!0===z.valueset?z.value:(z.value=D(a,z.node),z.valueset=!0,z.value));else throw Error(g.nodeErrorMessage(c,"RUNTIME","VARIABLENOTFOUND"));}catch(Ea){throw Ea;}return B;case "MemberExpression":return I(a,c);case "Literal":return c.value;case "ThisExpression":throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));
case "CallExpression":return G(a,c);case "UnaryExpression":return M(a,c);case "BinaryExpression":return Q(a,c);case "LogicalExpression":return K(a,c);case "ConditionalExpression":throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(f=[],v=0;v<c.elements.length;v++){var H=D(a,c.elements[v]);if(b.isFunctionParameter(H))throw Error(g.nodeErrorMessage(c,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));H===b.voidOperation?f.push(null):f.push(H)}}catch(Ea){throw Ea;}return f;case "ObjectExpression":f=
{};for(v=0;v<c.properties.length;v++){var W=D(a,c.properties[v]);if(b.isFunctionParameter(W.value))throw Error("Illegal Argument");if(!1===b.isString(W.key))throw Error("Illegal Argument");W.value===b.voidOperation?f[W.key.toString()]=null:f[W.key.toString()]=W.value}var L=new q(f);return L.immutable=!1,L;case "Property":return{key:"Identifier"===c.key.type?c.key.name:D(a,c.key),value:D(a,c.value)};case "Array":throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));default:throw Error(g.nodeErrorMessage(c,
"RUNTIME","UNREOGNISED"));}}catch(Ea){throw Ea;}}function F(a,c){var d=D(a,c.right);"VariableDeclaration"===c.left.type&&D(a,c.left);var e=null,f="VariableDeclaration"===c.left.type?c.left.declarations[0].id.name:c.left.name;if(null!==a.localScope&&void 0!==a.localScope[f]&&(e=a.localScope[f]),null===e&&void 0!==a.globalScope[f]&&(e=a.globalScope[f]),null===e)throw Error(g.nodeErrorMessage(c,"RUNTIME","VARIABLENOTDECLARED"));if(b.isArray(d)||b.isString(d)){for(var d=d.length,k=0;d>k;k++){e.value=
k;f=D(a,c.body);if(f===b.breakResult)break;if(f instanceof b.ReturnResult)return f}return b.voidOperation}if(b.isImmutableArray(d)){for(k=0;k<d.length();k++){e.value=k;f=D(a,c.body);if(f===b.breakResult)break;if(f instanceof b.ReturnResult)return f}return b.voidOperation}if(!(d instanceof q||d instanceof t))return b.voidOperation;d=d.keys();for(k=0;k<d.length;k++){e.value=d[k];f=D(a,c.body);if(f===b.breakResult)break;if(f instanceof b.ReturnResult)return f}}function C(a,c,d,e){switch(c){case "\x3d":return a===
b.voidOperation?null:a;case "/\x3d":return b.toNumber(d)/b.toNumber(a);case "*\x3d":return b.toNumber(d)*b.toNumber(a);case "-\x3d":return b.toNumber(d)-b.toNumber(a);case "+\x3d":return b.isString(d)||b.isString(a)?b.toString(d)+b.toString(a):b.toNumber(d)+b.toNumber(a);case "%\x3d":return b.toNumber(d)%b.toNumber(a);default:throw Error(g.nodeErrorMessage(e,"RUNTIME","OPERATORNOTRECOGNISED"));}}function H(a,c,d,e){switch(c=c.toLowerCase()){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=
a.hasM,void 0===a?!1:a;case "spatialreference":return c=a.spatialReference._arcadeCacheId,void 0===c&&(d=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(d=!1),d&&(V++,a.spatialReference._arcadeCacheId=V,c=V)),a=new q({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==c&&(a._arcadeCacheId="SPREF"+c.toString()),a}switch(a.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[c],void 0!==a?a:null;
case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=b.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(V++,c=V,b.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new x(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==a[c]?a[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=
b.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(V++,c=V,b.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new x(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=b.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(V++,c=V,b.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new B(a.points,a.spatialReference,
!0===a.hasZ,!0===a.hasM,c,1);case "type":return"Multipoint"}}throw Error(g.nodeErrorMessage(e,"RUNTIME","PROPERTYNOTFOUND"));}function I(a,c){try{var d=D(a,c.object);if(null===d)throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTFOUND"));if(!1===c.computed){if(d instanceof q||d instanceof t)return d.field(c.property.name);if(d instanceof y)return H(d,c.property.name,a,c);throw Error(g.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}var e=D(a,c.property);if(d instanceof q||d instanceof t){if(b.isString(e))return d.field(e);
throw Error(g.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}if(d instanceof y){if(b.isString(e))return H(d,e,a,c);throw Error(g.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}if(b.isArray(d)){if(b.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){if(0>e&&(e=d.length+e),e>=d.length||0>e)throw Error(g.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d[e]}throw Error(g.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}if(b.isString(d)){if(b.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){if(0>e&&(e=d.length+e),
e>=d.length||0>e)throw Error(g.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d[e]}throw Error(g.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}if(b.isImmutableArray(d)&&b.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){if(0>e&&(e=d.length()+e),e>=d.length()||0>e)throw Error(g.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d.get(e)}throw Error(g.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}catch(ka){throw ka;}}function M(a,c){try{var d=D(a,c.argument);if(b.isBoolean(d)){if("!"===c.operator)return!d;
if("-"===c.operator)return-1*b.toNumber(d);if("+"===c.operator)return 1*b.toNumber(d);throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===c.operator)return-1*b.toNumber(d);if("+"===c.operator)return 1*b.toNumber(d);throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(fa){throw fa;}}function Q(a,c){try{var d=[D(a,c.left),D(a,c.right)],e=d[0],f=d[1];switch(c.operator){case "\x3d\x3d":return b.equalityTest(e,f);case "\x3d":return b.equalityTest(e,
f);case "!\x3d":return!b.equalityTest(e,f);case "\x3c":return b.greaterThanLessThan(e,f,c.operator);case "\x3e":return b.greaterThanLessThan(e,f,c.operator);case "\x3c\x3d":return b.greaterThanLessThan(e,f,c.operator);case "\x3e\x3d":return b.greaterThanLessThan(e,f,c.operator);case "+":return b.isString(e)||b.isString(f)?b.toString(e)+b.toString(f):b.toNumber(e)+b.toNumber(f);case "-":return b.toNumber(e)-b.toNumber(f);case "*":return b.toNumber(e)*b.toNumber(f);case "/":return b.toNumber(e)/b.toNumber(f);
case "%":return b.toNumber(e)%b.toNumber(f);default:throw Error(g.nodeErrorMessage(c,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(na){throw na;}}function K(a,c){try{if("AssignmentExpression"===c.left.type||"UpdateExpression"===c.left.type)throw Error(g.nodeErrorMessage(c.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===c.right.type||"UpdateExpression"===c.right.type)throw Error(g.nodeErrorMessage(c.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var d=D(a,c.left);
if(!b.isBoolean(d))throw Error(g.nodeErrorMessage(c,"RUNTIME","ONLYBOOLEAN"));switch(c.operator){case "||":if(!0===d)return d;var e=D(a,c.right);if(b.isBoolean(e))return e;throw Error(g.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===d)return d;e=D(a,c.right);if(b.isBoolean(e))return e;throw Error(g.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));default:throw Error(g.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));}}catch(ka){throw ka;}}function G(a,c){try{if("Identifier"!==c.callee.type)throw Error(g.nodeErrorMessage(c,
"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[c.callee.name.toLowerCase()]){var d=a.localScope[c.callee.name.toLowerCase()];if(d.value instanceof b.NativeFunction)return d.value.fn(a,c);if(d.value instanceof w)return P(a,c,d.value.definition);throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[c.callee.name.toLowerCase()]){d=a.globalScope[c.callee.name.toLowerCase()];if(d.value instanceof b.NativeFunction)return d.value.fn(a,c);if(d.value instanceof
w)return P(a,c,d.value.definition);throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTAFUNCTION"));}throw Error(g.nodeErrorMessage(c,"RUNTIME","NOTFOUND"));}catch(fa){throw fa;}}function N(a){return null==a?"":b.isArray(a)?"Array":b.isImmutableArray(a)?"Array":b.isDate(a)?"Date":b.isString(a)?"String":b.isBoolean(a)?"Boolean":b.isNumber(a)?"Number":a instanceof q?"Dictionary":a instanceof t?"Feature":a instanceof c?"Point":a instanceof m?"Polygon":a instanceof d?"Polyline":a instanceof e?"Multipoint":
a instanceof n?"Extent":b.isFunctionParameter(a)?"Function":a===b.voidOperation?"":"number"==typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function S(a,c,d,g){try{var e=D(a,c.arguments[d]);if(b.equalityTest(e,g))return D(a,c.arguments[d+1]);var f=c.arguments.length-d;return 1===f?D(a,c.arguments[d]):2===f?null:3===f?D(a,c.arguments[d+2]):S(a,c,d+2,g)}catch(ua){throw ua;}}function J(a,c,d,g){try{if(!0===g)return D(a,c.arguments[d+1]);if(3===c.arguments.length-d)return D(a,c.arguments[d+2]);var e=
D(a,c.arguments[d+2]);if(!1===b.isBoolean(e))throw Error("WHEN needs boolean test conditions");return J(a,c,d+2,e)}catch(na){throw na;}}function W(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)b=[];else if(1===c)b=[a[0]];else{var g=W(a.slice(0,d),b);a=W(a.slice(d,c),b);for(c=[];0<g.length||0<a.length;)0<g.length&&0<a.length?(d=b(g[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(g[0]),g=g.slice(1)):(c.push(a[0]),a=a.slice(1))):0<g.length?(c.push(g[0]),g=g.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));b=
c}return b}function L(a,c,d){try{var g=a.body;if(d.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var e=0;e<d.length;e++)c.localScope[a.params[e].name.toLowerCase()]={d:null,value:d[e],valueset:!0,node:null};var f=D(c,g);if(f instanceof b.ReturnResult)return f.value;if(f===b.breakResult)throw Error("Cannot Break from a Function");if(f===b.continueResult)throw Error("Cannot Continue from a Function");return f instanceof b.ImplicitResult?f.value:f}catch(ua){throw ua;
}}function P(a,b,c){return A(a,b,function(b,d,g){b={spatialReference:a.spatialReference,applicationCache:void 0===a.applicationCache?null:a.applicationCache,globalScope:a.globalScope,depthCounter:a.depthCounter+1,console:a.console,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return L(c,b,g)})}function Y(a){return function(){var b={applicationCache:void 0===a.context.applicationCache?null:a.context.applicationCache,spatialReference:a.context.spatialReference,console:a.context.console,
localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return L(a.definition,b,arguments)}}function ba(a){}Object.defineProperty(h,"__esModule",{value:!0});var V=0,X={};v.registerFunctions(X,A);r.registerFunctions(X,A);p.registerFunctions(X,A);u.registerFunctions(X,A);k.registerFunctions(X,A);X["typeof"]=function(a,c){return A(a,c,function(a,c,d){b.pcCheck(d,1,1);a=N(d[0]);if("Unrecognised Type"===
a)throw Error("Unrecognised Type");return a})};X.iif=function(a,c){try{b.pcCheck(null===c.arguments?[]:c.arguments,3,3);var d=D(a,c.arguments[0]);if(!1===b.isBoolean(d))throw Error("IF Function must have a boolean test condition");return!0===d?D(a,c.arguments[1]):D(a,c.arguments[2])}catch(fa){throw fa;}};X.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return D(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");
var c=D(a,b.arguments[0]);return S(a,b,1,c)}catch(fa){throw fa;}};X.when=function(a,c){try{if(3>c.arguments.length)throw Error("Missing Parameters");if(0===c.arguments.length%2)throw Error("Must have a default value result.");var d=D(a,c.arguments[0]);if(!1===b.isBoolean(d))throw Error("WHEN needs boolean test conditions");return J(a,c,0,d)}catch(fa){throw fa;}};X.top=function(a,c){return A(a,c,function(a,c,d){if(b.pcCheck(d,2,2),b.isArray(d[0]))return b.toNumber(d[1])>=d[0].length?d[0].slice(0):
d[0].slice(0,b.toNumber(d[1]));if(b.isImmutableArray(d[0]))return b.toNumber(d[1])>=d[0].length()?d[0].slice(0):d[0].slice(0,b.toNumber(d[1]));throw Error("Top cannot accept this parameter type");})};X.first=function(a,c){return A(a,c,function(a,c,d){return b.pcCheck(d,1,1),b.isArray(d[0])?0===d[0].length?null:d[0][0]:b.isImmutableArray(d[0])?0===d[0].length()?null:d[0].get(0):null})};X.sort=function(a,c){return A(a,c,function(a,c,d){b.pcCheck(d,1,2);a=d[0];if(b.isImmutableArray(a)&&(a=a.toArray()),
!1===b.isArray(a))throw Error("Illegal Argument");if(1<d.length){if(!1===b.isFunctionParameter(d[1]))throw Error("Illegal Argument");var g=Y(d[1]);return a=W(a,function(a,b){return g(a,b)})}if(0===a.length)return[];d={};for(c=0;c<a.length;c++){var e=N(a[c]);""!==e&&(d[e]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return a.slice(0);c=0;var e="",f;for(f in d)c++,e=f;return a=1<c||"String"===
e?W(a,function(a,c){if(null===a||void 0===a||a===b.voidOperation)return null===c||void 0===c||c===b.voidOperation?0:1;if(null===c||void 0===c||c===b.voidOperation)return-1;a=b.toString(a);c=b.toString(c);return c>a?-1:a===c?0:1}):"Number"===e?W(a,function(a,b){return a-b}):"Boolean"===e?W(a,function(a,b){return a===b?0:b?-1:1}):"Date"===e?W(a,function(a,b){return b-a}):a.slice(0)})};h.functionHelper={fixSpatialReference:b.fixSpatialReference,parseArguments:z,standardFunction:A};h.executeScript=function(a,
c,d){d||(d=new l(102100));var g=c.vars,e=c.customfunctions,k={};g||(g={});e||(e={});var h=new q({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});h.immutable=!1;k.textformatting={value:h,valueset:!0,node:null};k.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};k.pi={value:Math.PI,valueset:!0,node:null};for(var n in X)k[n]={value:new b.NativeFunction(X[n]),valueset:!0,node:null};for(n in e)k[n]={value:new b.NativeFunction(e[n]),"native":!0,
valueset:!0,node:null};for(n in g)g[n]instanceof f?k[n]={value:new t(g[n]),valueset:!0,node:null}:k[n]={value:g[n],valueset:!0,node:null};a=D({spatialReference:d,globalScope:k,localScope:null,console:c.console?c.console:ba,depthCounter:1,applicationCache:void 0===c.applicationCache?null:c.applicationCache},a.body[0].body);if(a instanceof b.ReturnResult&&(a=a.value),a instanceof b.ImplicitResult&&(a=a.value),a===b.voidOperation&&(a=null),a===b.breakResult)throw Error("Cannot return BREAK");if(a===
b.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof w)throw Error("Cannot return FUNCTION");if(a instanceof b.NativeFunction)throw Error("Cannot return FUNCTION");return a};h.extractFieldLiterals=function(a,b){return void 0===b&&(b=!1),g.findFieldLiterals(a,b)};h.validateScript=function(a,b){return g.validateScript(a,b,"simple")};h.referencesMember=function(a,b){return g.referencesMember(a,b)};h.referencesFunction=function(a,b){return g.referencesFunction(a,b)}})},"esri/arcade/languageUtils":function(){define("require exports ../geometry/Geometry ../moment dojo/number ./ImmutableArray ../kernel ./ImmutablePointArray ./ImmutablePathArray dojo/_base/array ../geometry/Point ../geometry/Polyline ../geometry/Polygon ../geometry/Extent ../geometry/Multipoint ./FunctionWrapper".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r){function p(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function u(a){return a instanceof S||a instanceof r||a instanceof J}function k(a){return"string"==typeof a||a instanceof String}function x(a){return"boolean"==typeof a}function B(a){return"number"==typeof a}function y(a){return a instanceof Array}function z(a){return a instanceof Date}function A(a,b){return!1===isNaN(a)?void 0===b||
null===b||""===b?a.toString():(b=p(b,"\u2030",""),b=p(b,"\u00a4",""),d.format(a,{pattern:b})):a.toString()}function D(a,b){a=f(a);return void 0===b||null===b||""===b?a.format():a.format(F(b))}function F(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function C(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return b>a;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return b>=a}return!1}function H(a,b){if(a===b||null===a&&b===h.voidOperation||null===b&&a===h.voidOperation)return!0;
if(z(a)&&z(b))return a.getTime()===b.getTime();if(a instanceof l||a instanceof e)return a.equalityTest(b);if(a instanceof g&&b instanceof g){var c=void 0,d=void 0;if(h.isVersion4?(c=a.cache._arcadeCacheId,d=b.cache._arcadeCacheId):(c=a.getCacheValue("_arcadeCacheId"),d=b.getCacheValue("_arcadeCacheId")),void 0!==c&&null!==c)return c===d}return void 0!==a&&void 0!==b&&null!==a&&null!==b&&"object"==typeof a&&"object"==typeof b&&(a._arcadeCacheId===b._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==
a._arcadeCacheId||a._underlyingGraphic===b._underlyingGraphic&&void 0!==a._underlyingGraphic&&null!==a._underlyingGraphic)?!0:!1}function I(a,b){if(k(a))return a;if(null===a)return"";if(B(a))return A(a,b);if(x(a))return a.toString();if(z(a))return D(a,b);if(a instanceof m)return JSON.stringify(a.toJSON());if(y(a)){b=[];for(var d=0;d<a.length;d++)b[d]=Q(a[d]);return"["+b.join(",")+"]"}if(a instanceof c){b=[];for(d=0;d<a.length();d++)b[d]=Q(a.get(d));return"["+b.join(",")+"]"}return null!==a&&"object"==
typeof a&&void 0!==a.castToText?a.castToText():u(a)?"object, Function":(a===h.voidOperation,"")}function M(a,b){if(k(a))return a;if(null===a)return"";if(B(a))return A(a,b);if(x(a))return a.toString();if(z(a))return D(a,b);if(a instanceof m)return JSON.stringify(a.toJSON());if(y(a)){b=[];for(var d=0;d<a.length;d++)b[d]=Q(a[d]);return"["+b.join(",")+"]"}if(a instanceof c){b=[];for(d=0;d<a.length();d++)b[d]=Q(a.get(d));return"["+b.join(",")+"]"}return null!==a&&"object"==typeof a&&void 0!==a.castToText?
a.castToText():u(a)?"object, Function":(a===h.voidOperation,"")}function Q(a){return null===a?"null":x(a)||B(a)||k(a)?JSON.stringify(a):a instanceof m||a instanceof c||a instanceof Array?M(a):a instanceof Date?JSON.stringify(D(a,"")):null!==a&&"object"==typeof a&&void 0!==a.castToText?a.castToText():"null"}function K(a,b){return B(a)?a:null===a?0:""===a?0:z(a)?NaN:x(a)?a?1:0:y(a)?NaN:""===a?NaN:void 0===a?NaN:void 0!==b&&k(a)?(b=p(b,"\u2030",""),b=p(b,"\u00a4",""),d.parse(a,{pattern:b})):a===h.voidOperation?
0:Number(a)}function G(a,c){var d;return b.some(c.fields,function(b){return b.name===a&&(d=b.domain),!!d}),d}Object.defineProperty(h,"__esModule",{value:!0});a=function(){return function(a){this.value=a}}();var N=function(){return function(a){this.value=a}}(),S=function(){return function(a){this.fn=a}}(),J=function(){return function(a){this.fn=a}}();h.NativeFunction=S;h.ImplicitResult=N;h.ReturnResult=a;h.SizzleFunction=J;h.isVersion4=0===n.version.indexOf("4.");h.voidOperation={type:"VOID"};h.breakResult=
{type:"BREAK"};h.continueResult={type:"CONTINUE"};h.multiReplace=p;h.isFunctionParameter=u;h.isSimpleType=function(a){return k(a)?!0:B(a)?!0:z(a)?!0:x(a)?!0:null===a?!0:a===h.voidOperation?!0:"number"==typeof a?!0:!1};h.defaultUndefined=function(a,b){return void 0===a?b:a};h.isString=k;h.isBoolean=x;h.isNumber=B;h.isArray=y;h.isFeatureCursor=function(a){return a&&void 0!==a.isFeatureCursor};h.isImmutableArray=function(a){return a instanceof c};h.isDate=z;h.pcCheck=function(a,b,c){if(a.length<b||a.length>
c)throw Error("Function called with wrong number of Parameters");};h.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:3&c|8).toString(16)})};h.formatNumber=A;h.formatDate=D;h.standardiseDateFormat=F;h.greaterThanLessThan=function(a,b,c){if(null===a){if(null===b||b===h.voidOperation)return C(null,null,c);if(B(b))return C(0,b,c);if(k(b)||x(b))return C(0,K(b),
c);if(z(b))return C(0,b.getTime(),c)}if(a===h.voidOperation){if(null===b||b===h.voidOperation)return C(null,null,c);if(B(b))return C(0,b,c);if(k(b)||x(b))return C(0,K(b),c);if(z(b))return C(0,b.getTime(),c)}else if(B(a)){if(B(b))return C(a,b,c);if(x(b))return C(a,K(b),c);if(null===b||b===h.voidOperation)return C(a,0,c);if(k(b))return C(a,K(b),c);if(z(b))return C(a,b.getTime(),c)}else if(k(a)){if(k(b))return C(I(a),I(b),c);if(z(b))return C(K(a),b.getTime(),c);if(B(b))return C(K(a),b,c);if(null===b||
b===h.voidOperation)return C(K(a),0,c);if(x(b))return C(K(a),K(b),c)}else if(z(a)){if(z(b))return C(a,b,c);if(null===b||b===h.voidOperation)return C(a.getTime(),0,c);if(B(b))return C(a.getTime(),b,c);if(x(b)||k(b))return C(a.getTime(),K(b),c)}else if(x(a)){if(x(b))return C(a,b,c);if(B(b))return C(K(a),K(b),c);if(z(b))return C(K(a),b.getTime(),c);if(null===b||b===h.voidOperation)return C(K(a),0,c);if(k(b))return C(K(a),K(b),c)}return!H(a,b)||"\x3c\x3d"!==c&&"\x3e\x3d"!==c?!1:!0};h.equalityTest=H;h.toString=
I;h.toNumberArray=function(a){var b=[];if(!1===y(a))return null;if(a instanceof c){for(var d=0;d<a.length();d++)b[d]=K(a.get(d));return b}for(d=0;d<a.length;d++)b[d]=K(a[d]);return b};h.toStringExplicit=M;h.toNumber=K;h.toDate=function(a,b){return z(a)?a:k(a)&&(a=f(a,[void 0===b||null===b||""===b?f.ISO_8601:b]),a.isValid())?a.toDate():null};h.toDateM=function(a,b){return z(a)?f(a):k(a)&&(a=f(a,[void 0===b||null===b||""===b?f.ISO_8601:b]),a.isValid())?a:null};h.toBoolean=function(a){return x(a)?a:
k(a)?(a=a.toLowerCase(),"true"===a?!0:!1):B(a)?0===a?!1:isNaN(a)?!1:!0:!1};h.fixSpatialReference=function(a,b){return null===a||void 0===a?null:((null===a.spatialReference||void 0===a.spatialReference)&&(a.spatialReference=b),a)};h.fixNullGeometry=function(a){return null===a?null:a instanceof g?"NaN"===a.x||null===a.x||isNaN(a.x)?null:a:a instanceof t?0===a.rings.length?null:a:a instanceof q?0===a.paths.length?null:a:a instanceof v?0===a.points.length?null:a:a instanceof w?"NaN"===a.xmin||null===
a.xmin||isNaN(a.xmin)?null:a:null};h.getDomainValue=function(a,b){if(!a||!a.domain)return null;var c=null;b="string"===a.field.type||"esriFieldTypeString"===a.field.type?I(b):K(b);for(var d=0;d<a.domain.codedValues.length;d++){var g=a.domain.codedValues[d];g.code===b&&(c=g)}return null===c?null:c.name};h.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=I(b);for(var d=0;d<a.domain.codedValues.length;d++){var g=a.domain.codedValues[d];g.name===b&&(c=g)}return null===c?null:c.code};
h.getDomain=function(a,c,d,g){if((void 0===d&&(d=null),!c)||!c.fields)return null;for(var e=null,f=0;f<c.fields.length;f++){var k=c.fields[f];k.name.toLowerCase()===a.toString().toLowerCase()&&(e=k)}if(null===e)return null;var l,h;return g||(g=d&&c.typeIdField&&d._field(c.typeIdField)),null!=g&&b.some(c.types,function(a){return a.id===g?(l=a.domains&&a.domains[e.name],l&&"inherited"===l.type&&(l=G(e.name,c),h=!0),!0):!1}),h||l||(l=G(a,c)),{field:e,domain:l}}})},"esri/moment":function(){define(["require",
"exports","./plugins/moment!"],function(a,h,m){return m})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});var d={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-nz":1,es:1,"es-do":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,
pl:1,pt:1,"pt-br":1,ro:1,ru:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1};h.load=function(a,h,e){a=m.locale;var c=a in d;if(!c){var b=a.split("-");1<b.length&&b[0]in d&&(a=b[0],c=!0)}c?h(["moment/locale/"+a],function(){e(f)}):e(f)}})},"moment/moment":function(){(function(a,h){"object"===typeof exports&&"undefined"!==typeof module?module.exports=h():"function"===typeof define&&define.amd?define(h):a.moment=h()})(this,function(){function a(){return Sb.apply(null,arguments)}function h(a){return a instanceof
Array||"[object Array]"===Object.prototype.toString.call(a)}function m(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function f(a){return void 0===a}function d(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}function c(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function n(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function e(a,b){return Object.prototype.hasOwnProperty.call(a,
b)}function l(a,b){for(var c in b)e(b,c)&&(a[c]=b[c]);e(b,"toString")&&(a.toString=b.toString);e(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function b(a,b,c,d){return Ka(a,b,c,d,!0).utc()}function g(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function q(a){if(null==a._isValid){var b=g(a),c=ec.call(b.parsedDateParts,
function(a){return null!=a}),c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function t(a){var c=b(NaN);null!=a?l(g(c),a):g(c).userInvalidated=!0;return c}function w(a,b){var c,d,e;f(b._isAMomentObject)||(a._isAMomentObject=
b._isAMomentObject);f(b._i)||(a._i=b._i);f(b._f)||(a._f=b._f);f(b._l)||(a._l=b._l);f(b._strict)||(a._strict=b._strict);f(b._tzm)||(a._tzm=b._tzm);f(b._isUTC)||(a._isUTC=b._isUTC);f(b._offset)||(a._offset=b._offset);f(b._pf)||(a._pf=g(b));f(b._locale)||(a._locale=b._locale);if(0<Fb.length)for(c=0;c<Fb.length;c++)d=Fb[c],e=b[d],f(e)||(a[d]=e);return a}function v(b){w(this,b);this._d=new Date(null!=b._d?b._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Gb&&(Gb=!0,a.updateOffset(this),
Gb=!1)}function r(a){return a instanceof v||null!=a&&null!=a._isAMomentObject}function p(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function u(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=p(a));return b}function k(a,b,c){var d=Math.min(a.length,b.length),g=Math.abs(a.length-b.length),e=0,f;for(f=0;f<d;f++)(c&&a[f]!==b[f]||!c&&u(a[f])!==u(b[f]))&&e++;return e+g}function x(b){!1===a.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function B(b,
c){var d=!0;return l(function(){null!=a.deprecationHandler&&a.deprecationHandler(null,b);if(d){for(var g=[],e,f=0;f<arguments.length;f++){e="";if("object"===typeof arguments[f]){e+="\n["+f+"] ";for(var k in arguments[0])e+=k+": "+arguments[0][k]+", ";e=e.slice(0,-2)}else e=arguments[f];g.push(e)}x(b+"\nArguments: "+Array.prototype.slice.call(g).join("")+"\n"+Error().stack);d=!1}return c.apply(this,arguments)},c)}function y(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c);Tb[b]||(x(c),Tb[b]=
!0)}function z(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function A(a,b){var c=l({},a),d;for(d in b)e(b,d)&&(m(a[d])&&m(b[d])?(c[d]={},l(c[d],a[d]),l(c[d],b[d])):null!=b[d]?c[d]=b[d]:delete c[d]);for(d in a)e(a,d)&&!e(b,d)&&m(a[d])&&(c[d]=l({},c[d]));return c}function D(a){null!=a&&this.set(a)}function F(a,b){var c=a.toLowerCase();ob[c]=ob[c+"s"]=ob[b]=a}function C(a){return"string"===typeof a?ob[a]||ob[a.toLowerCase()]:void 0}function H(a){var b={},
c,d;for(d in a)e(a,d)&&(c=C(d))&&(b[c]=a[d]);return b}function I(a){var b=[],c;for(c in a)b.push({unit:c,priority:Ca[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function M(b,c){return function(d){if(null!=d){if(this.isValid())this._d["set"+(this._isUTC?"UTC":"")+b](d);a.updateOffset(this,c);return this}return Q(this,b)}}function Q(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function K(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,
b-d.length)).toString().substr(1)+d}function G(a,b,c,d){var g=d;"string"===typeof d&&(g=function(){return this[d]()});a&&(mb[a]=g);b&&(mb[b[0]]=function(){return K(g.apply(this,arguments),b[1],b[2])});c&&(mb[c]=function(){return this.localeData().ordinal(g.apply(this,arguments),a)})}function N(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function S(a){var b=a.match(Ub),c,d;c=0;for(d=b.length;c<d;c++)b[c]=mb[b[c]]?mb[b[c]]:N(b[c]);return function(c){var g="",e;for(e=0;e<
d;e++)g+=z(b[e])?b[e].call(c,a):b[e];return g}}function J(a,b){if(!a.isValid())return a.localeData().invalidDate();b=W(b,a.localeData());Hb[b]=Hb[b]||S(b);return Hb[b](a)}function W(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(wb.lastIndex=0;0<=d&&wb.test(a);)a=a.replace(wb,c),wb.lastIndex=0,--d;return a}function L(a,b,c){Ib[a]=z(b)?b:function(a,d){return a&&c?c:b}}function P(a,b){return e(Ib,a)?Ib[a](b._strict,b._locale):new RegExp(Y(a))}function Y(a){return ba(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,
function(a,b,c,d,g){return b||c||d||g}))}function ba(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function V(a,b){var c,g=b;"string"===typeof a&&(a=[a]);d(b)&&(g=function(a,c){c[b]=u(a)});for(c=0;c<a.length;c++)Jb[a[c]]=g}function X(a,b){V(a,function(a,c,d,g){d._w=d._w||{};b(a,d._w,d,g)})}function ca(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()}function Z(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=u(b);else if(b=a.localeData().monthsParse(b),
!d(b))return a;c=Math.min(a.date(),ca(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function ia(b){return null!=b?(Z(this,b),a.updateOffset(this,!0),this):Q(this,"Month")}function fa(){function a(a,b){return b.length-a.length}var c=[],d=[],g=[],e,f;for(e=0;12>e;e++)f=b([2E3,e]),c.push(this.monthsShort(f,"")),d.push(this.months(f,"")),g.push(this.months(f,"")),g.push(this.monthsShort(f,""));c.sort(a);d.sort(a);g.sort(a);for(e=0;12>e;e++)c[e]=ba(c[e]),d[e]=ba(d[e]);for(e=0;24>e;e++)g[e]=
ba(g[e]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+g.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+d.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+c.join("|")+")","i")}function ka(a){return 0===a%4&&0!==a%100||0===a%400}function na(a,b,c,d,g,e,f){b=new Date(a,b,c,d,g,e,f);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function ua(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);
return b}function Da(a,b,c){c=7+b-c;return-((7+ua(a,0,c).getUTCDay()-b)%7)+c-1}function za(a,b,c,d,g){c=(7+c-d)%7;d=Da(a,d,g);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(ka(b)?366:365)+d):d>(ka(a)?366:365)?(b=a+1,a=d-(ka(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function Fa(a,b,c){var d=Da(a.year(),b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+pa(a,b,c)):d>pa(a.year(),b,c)?(b=d-pa(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function pa(a,b,c){var d=Da(a,b,c);b=
Da(a+1,b,c);return((ka(a)?366:365)-d+b)/7}function kb(a,c,d){var g,e;a=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],g=0;7>g;++g)e=b([2E3,1]).day(g),this._minWeekdaysParse[g]=this.weekdaysMin(e,"").toLocaleLowerCase(),this._shortWeekdaysParse[g]=this.weekdaysShort(e,"").toLocaleLowerCase(),this._weekdaysParse[g]=this.weekdays(e,"").toLocaleLowerCase();if(d)c="dddd"===c?Ba.call(this._weekdaysParse,a):"ddd"===c?Ba.call(this._shortWeekdaysParse,
a):Ba.call(this._minWeekdaysParse,a);else if("dddd"===c){c=Ba.call(this._weekdaysParse,a);if(-1!==c)return c;c=Ba.call(this._shortWeekdaysParse,a);if(-1!==c)return c;c=Ba.call(this._minWeekdaysParse,a)}else if("ddd"===c){c=Ba.call(this._shortWeekdaysParse,a);if(-1!==c)return c;c=Ba.call(this._weekdaysParse,a);if(-1!==c)return c;c=Ba.call(this._minWeekdaysParse,a)}else{c=Ba.call(this._minWeekdaysParse,a);if(-1!==c)return c;c=Ba.call(this._weekdaysParse,a);if(-1!==c)return c;c=Ba.call(this._shortWeekdaysParse,
a)}return-1!==c?c:null}function Ia(){function a(a,b){return b.length-a.length}var c=[],d=[],g=[],e=[],f,k,l,h;for(f=0;7>f;f++)k=b([2E3,1]).day(f),l=this.weekdaysMin(k,""),h=this.weekdaysShort(k,""),k=this.weekdays(k,""),c.push(l),d.push(h),g.push(k),e.push(l),e.push(h),e.push(k);c.sort(a);d.sort(a);g.sort(a);e.sort(a);for(f=0;7>f;f++)d[f]=ba(d[f]),g[f]=ba(g[f]),e[f]=ba(e[f]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+e.join("|")+")","i");this._weekdaysStrictRegex=
new RegExp("^("+g.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+d.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+c.join("|")+")","i")}function va(){return this.hours()%12||12}function wa(a,b){G(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Ja(a,b){return b._meridiemParse}function Ua(a){return a?a.toLowerCase().replace("_","-"):a}function bb(a){var b=null;if(!ta[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=
xb._abbr,require("./locale/"+a),ya(b)}catch(Pc){}return ta[a]}function ya(a,b){a&&(a=f(b)?Ga(a):Na(a,b))&&(xb=a);return xb._abbr}function Na(a,b){if(null!==b){var c=Vb;b.abbr=a;if(null!=ta[a])y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=ta[a]._config;else if(null!=b.parentLocale)if(null!=
ta[b.parentLocale])c=ta[b.parentLocale]._config;else return pb[b.parentLocale]||(pb[b.parentLocale]=[]),pb[b.parentLocale].push({name:a,config:b}),null;ta[a]=new D(A(c,b));pb[a]&&pb[a].forEach(function(a){Na(a.name,a.config)});ya(a);return ta[a]}delete ta[a];return null}function Ga(a){var b;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return xb;if(!h(a)){if(b=bb(a))return b;a=[a]}a:{b=0;for(var c,d,g,e;b<a.length;){e=Ua(a[b]).split("-");c=e.length;for(d=(d=Ua(a[b+1]))?d.split("-"):null;0<
c;){if(g=bb(e.slice(0,c).join("-"))){a=g;break a}if(d&&d.length>=c&&k(e,d,!0)>=c-1)break;c--}b++}a=null}return a}function Ha(a){var b;(b=a._a)&&-2===g(a).overflow&&(b=0>b[Xa]||11<b[Xa]?Xa:1>b[Sa]||b[Sa]>ca(b[Pa],b[Xa])?Sa:0>b[xa]||24<b[xa]||24===b[xa]&&(0!==b[Qa]||0!==b[Ya]||0!==b[ib])?xa:0>b[Qa]||59<b[Qa]?Qa:0>b[Ya]||59<b[Ya]?Ya:0>b[ib]||999<b[ib]?ib:-1,g(a)._overflowDayOfYear&&(b<Pa||b>Sa)&&(b=Sa),g(a)._overflowWeeks&&-1===b&&(b=fc),g(a)._overflowWeekday&&-1===b&&(b=gc),g(a).overflow=b);return a}
function Ra(a){var b,c;b=a._i;var d=hc.exec(b)||ic.exec(b),e,f,k,l;if(d){g(a).iso=!0;b=0;for(c=yb.length;b<c;b++)if(yb[b][1].exec(d[1])){f=yb[b][0];e=!1!==yb[b][2];break}if(null==f)a._isValid=!1;else{if(d[3]){b=0;for(c=Kb.length;b<c;b++)if(Kb[b][1].exec(d[3])){k=(d[2]||" ")+Kb[b][0];break}if(null==k){a._isValid=!1;return}}if(e||null==k){if(d[4])if(jc.exec(d[4]))l="Z";else{a._isValid=!1;return}a._f=f+(k||"")+(l||"");Aa(a)}else a._isValid=!1}}else a._isValid=!1}function $a(a){var b,c,d,e,f={" GMT":" +0000",
" EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},k;b=a._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,"");if(b=kc.exec(b)){c=b[1]?"ddd"+(5===b[1].length?", ":" "):"";d="D MMM "+(10<b[2].length?"YYYY ":"YY ");e="HH:mm"+(b[4]?":ss":"");if(b[1]){var l="Sun Mon Tue Wed Thu Fri Sat".split(" ")[(new Date(b[2])).getDay()];if(b[1].substr(0,3)!==l){g(a).weekdayMismatch=!0;a._isValid=!1;return}}switch(b[5].length){case 2:0===
k?f=" +0000":(k="YXWVUTSRQPONZABCDEFGHIKLM".indexOf(b[5][1].toUpperCase())-12,f=(0>k?" -":" +")+(""+k).replace(/^-?/,"0").match(/..$/)[0]+"00");break;case 4:f=f[b[5]];break;default:f=f[" GMT"]}b[5]=f;a._i=b.splice(1).join("");a._f=c+d+e+" ZZ";Aa(a);g(a).rfc2822=!0}else a._isValid=!1}function Ea(b){var c=lc.exec(b._i);null!==c?b._d=new Date(+c[1]):(Ra(b),!1===b._isValid&&(delete b._isValid,$a(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b))))}function Oa(a,b,c){return null!=a?a:
null!=b?b:c}function T(b){var c,d=[],e;if(!b._d){e=new Date(a.now());e=b._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()];if(b._w&&null==b._a[Sa]&&null==b._a[Xa]){var f,k,l,h,n,p;f=b._w;if(null!=f.GG||null!=f.W||null!=f.E){if(n=1,p=4,k=Oa(f.GG,b._a[Pa],Fa(da(),1,4).year),l=Oa(f.W,1),h=Oa(f.E,1),1>h||7<h)c=!0}else if(n=b._locale._week.dow,p=b._locale._week.doy,l=Fa(da(),n,p),k=Oa(f.gg,b._a[Pa],l.year),l=Oa(f.w,l.week),null!=f.d){if(h=f.d,0>h||6<
h)c=!0}else if(null!=f.e){if(h=f.e+n,0>f.e||6<f.e)c=!0}else h=n;1>l||l>pa(k,n,p)?g(b)._overflowWeeks=!0:null!=c?g(b)._overflowWeekday=!0:(c=za(k,l,h,n,p),b._a[Pa]=c.year,b._dayOfYear=c.dayOfYear)}if(null!=b._dayOfYear){c=Oa(b._a[Pa],e[Pa]);if(b._dayOfYear>(ka(c)?366:365)||0===b._dayOfYear)g(b)._overflowDayOfYear=!0;c=ua(c,0,b._dayOfYear);b._a[Xa]=c.getUTCMonth();b._a[Sa]=c.getUTCDate()}for(c=0;3>c&&null==b._a[c];++c)b._a[c]=d[c]=e[c];for(;7>c;c++)b._a[c]=d[c]=null==b._a[c]?2===c?1:0:b._a[c];24===
b._a[xa]&&0===b._a[Qa]&&0===b._a[Ya]&&0===b._a[ib]&&(b._nextDay=!0,b._a[xa]=0);b._d=(b._useUTC?ua:na).apply(null,d);null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm);b._nextDay&&(b._a[xa]=24)}}function Aa(b){if(b._f===a.ISO_8601)Ra(b);else if(b._f===a.RFC_2822)$a(b);else{b._a=[];g(b).empty=!0;var c=""+b._i,d,f,k,l,h,n=c.length,p=0;k=W(b._f,b._locale).match(Ub)||[];for(d=0;d<k.length;d++){l=k[d];if(f=(c.match(P(l,b))||[])[0])h=c.substr(0,c.indexOf(f)),0<h.length&&g(b).unusedInput.push(h),
c=c.slice(c.indexOf(f)+f.length),p+=f.length;if(mb[l]){if(f?g(b).empty=!1:g(b).unusedTokens.push(l),h=b,null!=f&&e(Jb,l))Jb[l](f,h._a,h,l)}else b._strict&&!f&&g(b).unusedTokens.push(l)}g(b).charsLeftOver=n-p;0<c.length&&g(b).unusedInput.push(c);12>=b._a[xa]&&!0===g(b).bigHour&&0<b._a[xa]&&(g(b).bigHour=void 0);g(b).parsedDateParts=b._a.slice(0);g(b).meridiem=b._meridiem;c=b._a;d=xa;n=b._locale;k=b._a[xa];p=b._meridiem;null!=p&&(null!=n.meridiemHour?k=n.meridiemHour(k,p):null!=n.isPM&&((n=n.isPM(p))&&
12>k&&(k+=12),n||12!==k||(k=0)));c[d]=k;T(b);Ha(b)}}function sa(a){if(!a._d){var b=H(a._i);a._a=n([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});T(a)}}function ha(a){var b=a._i,d=a._f;a._locale=a._locale||Ga(a._l);if(null===b||void 0===d&&""===b)return t({nullInput:!0});"string"===typeof b&&(a._i=b=a._locale.preparse(b));if(r(b))return new v(Ha(b));if(c(b))a._d=b;else if(h(d)){var e,f,k;if(0===a._f.length)g(a).invalidFormat=!0,a._d=new Date(NaN);
else{for(b=0;b<a._f.length;b++)if(d=0,e=w({},a),null!=a._useUTC&&(e._useUTC=a._useUTC),e._f=a._f[b],Aa(e),q(e)&&(d+=g(e).charsLeftOver,d+=10*g(e).unusedTokens.length,g(e).score=d,null==k||d<k))k=d,f=e;l(a,f||e)}}else d?Aa(a):Ma(a);q(a)||(a._d=null);return a}function Ma(b){var e=b._i;f(e)?b._d=new Date(a.now()):c(e)?b._d=new Date(e.valueOf()):"string"===typeof e?Ea(b):h(e)?(b._a=n(e.slice(0),function(a){return parseInt(a,10)}),T(b)):m(e)?sa(b):d(e)?b._d=new Date(e):a.createFromInputFallback(b)}function Ka(a,
b,c,d,e){var g={};if(!0===c||!1===c)d=c,c=void 0;var f;if(f=m(a))a:{f=a;for(var k in f){f=!1;break a}f=!0}if(f||h(a)&&0===a.length)a=void 0;g._isAMomentObject=!0;g._useUTC=g._isUTC=e;g._l=c;g._i=a;g._f=b;g._strict=d;a=new v(Ha(ha(g)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function da(a,b,c,d){return Ka(a,b,c,d,!1)}function cb(a,b){var c,d;1===b.length&&h(b[0])&&(b=b[0]);if(!b.length)return da();c=b[0];for(d=1;d<b.length;++d)if(!b[d].isValid()||b[d][a](c))c=b[d];return c}function R(a){for(var b in a)if(-1===
qb.indexOf(b)||null!=a[b]&&isNaN(a[b]))return!1;b=!1;for(var c=0;c<qb.length;++c)if(a[qb[c]]){if(b)return!1;parseFloat(a[qb[c]])!==u(a[qb[c]])&&(b=!0)}return!0}function la(a){a=H(a);var b=a.year||0,c=a.quarter||0,d=a.month||0,e=a.week||0,g=a.day||0,f=a.hour||0,k=a.minute||0,l=a.second||0,h=a.millisecond||0;this._isValid=R(a);this._milliseconds=+h+1E3*l+6E4*k+36E5*f;this._days=+g+7*e;this._months=+d+3*c+12*b;this._data={};this._locale=Ga();this._bubble()}function E(a){return a instanceof la}function ga(a){return 0>
a?-1*Math.round(-1*a):Math.round(a)}function ja(a,b){G(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+K(~~(a/60),2)+b+K(~~a%60,2)})}function ma(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(mc)||["-",0,0];b=+(60*a[1])+u(a[2]);return 0===b?0:"+"===a[0]?b:-b}function aa(b,d){return d._isUTC?(d=d.clone(),b=(r(b)||c(b)?b.valueOf():da(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+b),a.updateOffset(d,!1),d):da(b).local()}function ea(){return this.isValid()?
this._isUTC&&0===this._offset:!1}function O(a,b){var c=a,g=null;E(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:d(a)?(c={},b?c[b]=a:c.milliseconds=a):(g=nc.exec(a))?(c="-"===g[1]?-1:1,c={y:0,d:u(g[Sa])*c,h:u(g[xa])*c,m:u(g[Qa])*c,s:u(g[Ya])*c,ms:u(ga(1E3*g[ib]))*c}):(g=oc.exec(a))?(c="-"===g[1]?-1:1,c={y:Wa(g[2],c),M:Wa(g[3],c),w:Wa(g[4],c),d:Wa(g[5],c),h:Wa(g[6],c),m:Wa(g[7],c),s:Wa(g[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(g=da(c.from),c=da(c.to),g.isValid()&&c.isValid()?
(c=aa(c,g),g.isBefore(c)?c=nb(g,c):(c=nb(c,g),c.milliseconds=-c.milliseconds,c.months=-c.months),g=c):g={milliseconds:0,months:0},c={},c.ms=g.milliseconds,c.M=g.months);c=new la(c);E(a)&&e(a,"_locale")&&(c._locale=a._locale);return c}function Wa(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function nb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,
"M");return c}function lb(a,b){return function(c,d){var g;null===d||isNaN(+d)||(y(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),g=c,c=d,d=g);c=O("string"===typeof c?+c:c,d);ub(this,c,a);return this}}function ub(b,c,d,g){var e=c._milliseconds,f=ga(c._days);c=ga(c._months);if(b.isValid()){g=null==g?!0:g;e&&b._d.setTime(b._d.valueOf()+e*d);if(f&&(e=Q(b,"Date")+f*d,b.isValid()))b._d["set"+
(b._isUTC?"UTC":"")+"Date"](e);c&&Z(b,Q(b,"Month")+c*d);g&&a.updateOffset(b,f||c)}}function Va(a){if(void 0===a)return this._locale._abbr;a=Ga(a);null!=a&&(this._locale=a);return this}function sb(){return this._locale}function db(a,b){G(0,[a,a.length],0,b)}function vb(a,b,c,d,g){var e;if(null==a)return Fa(this,d,g).year;e=pa(a,d,g);b>e&&(b=e);a=za(a,b,c,d,g);a=ua(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function Ob(a,b){b[ib]=
u(1E3*("0."+a))}function jb(a){return a}function gb(a,c,d,g){var e=Ga();c=b().set(g,c);return e[d](c,a)}function Pb(a,b,c){d(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return gb(a,b,c,"month");var g=[];for(b=0;12>b;b++)g[b]=gb(a,b,c,"month");return g}function Eb(a,b,c,g){"boolean"!==typeof a&&(c=b=a,a=!1);d(b)&&(c=b,b=void 0);b=b||"";var e=Ga();a=a?e._week.dow:0;if(null!=c)return gb(b,(c+a)%7,g,"day");e=[];for(c=0;7>c;c++)e[c]=gb(b,(c+a)%7,g,"day");return e}function Qb(a,b,c,d){b=O(b,c);a._milliseconds+=
d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Rb(a){return 0>a?Math.floor(a):Math.ceil(a)}function ab(a){return function(){return this.as(a)}}function hb(a){return function(){return this.isValid()?this._data[a]:NaN}}function dc(a,b,c,d,g){return g.relativeTime(b||1,!!c,a,d)}function tb(){if(!this.isValid())return this.localeData().invalidDate();var a=Lb(this._milliseconds)/1E3,b=Lb(this._days),c=Lb(this._months),d,g;d=p(a/60);g=p(d/60);a%=60;d%=60;var e=p(c/
12),c=c%12,f=this.asSeconds();return f?(0>f?"-":"")+"P"+(e?e+"Y":"")+(c?c+"M":"")+(b?b+"D":"")+(g||d||a?"T":"")+(g?g+"H":"")+(d?d+"M":"")+(a?a+"S":""):"P0D"}var Sb,ec=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1},Fb=a.momentProperties=[],Gb=!1,Tb={};a.suppressDeprecationWarnings=!1;a.deprecationHandler=null;var pc=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)e(a,b)&&c.push(b);
return c},ob={},Ca={},Ub=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,wb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hb={},mb={},Wb=/\d/,La=/\d\d/,Xb=/\d{3}/,Mb=/\d{4}/,zb=/[+-]?\d{6}/,ra=/\d\d?/,Yb=/\d\d\d\d?/,Zb=/\d\d\d\d\d\d?/,Ab=/\d{1,3}/,Nb=/\d{1,4}/,Bb=/[+-]?\d{1,6}/,qc=/\d+/,Cb=/[+-]?\d+/,rc=/Z|[+-]\d\d:?\d\d/gi,Db=/Z|[+-]\d\d(?::?\d\d)?/gi,rb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,
Ib={},Jb={},Pa=0,Xa=1,Sa=2,xa=3,Qa=4,Ya=5,ib=6,fc=7,gc=8,Ba=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};G("M",["MM",2],"Mo",function(){return this.month()+1});G("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});G("MMMM",0,0,function(a){return this.localeData().months(this,a)});F("month","M");Ca.month=8;L("M",ra);L("MM",ra,La);L("MMM",function(a,b){return b.monthsShortRegex(a)});L("MMMM",function(a,
b){return b.monthsRegex(a)});V(["M","MM"],function(a,b){b[Xa]=u(a)-1});V(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[Xa]=d:g(c).invalidMonth=a});var $b=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;G("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});G(0,["YY",2],0,function(){return this.year()%100});G(0,["YYYY",4],0,"year");G(0,["YYYYY",5],0,"year");G(0,["YYYYYY",6,!0],0,"year");F("year","y");Ca.year=1;L("Y",Cb);L("YY",ra,La);L("YYYY",Nb,Mb);L("YYYYY",Bb,zb);
L("YYYYYY",Bb,zb);V(["YYYYY","YYYYYY"],Pa);V("YYYY",function(b,c){c[Pa]=2===b.length?a.parseTwoDigitYear(b):u(b)});V("YY",function(b,c){c[Pa]=a.parseTwoDigitYear(b)});V("Y",function(a,b){b[Pa]=parseInt(a,10)});a.parseTwoDigitYear=function(a){return u(a)+(68<u(a)?1900:2E3)};var ac=M("FullYear",!0);G("w",["ww",2],"wo","week");G("W",["WW",2],"Wo","isoWeek");F("week","w");F("isoWeek","W");Ca.week=5;Ca.isoWeek=5;L("w",ra);L("ww",ra,La);L("W",ra);L("WW",ra,La);X(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,
1)]=u(a)});G("d",0,"do","day");G("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});G("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});G("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});G("e",0,0,"weekday");G("E",0,0,"isoWeekday");F("day","d");F("weekday","e");F("isoWeekday","E");Ca.day=11;Ca.weekday=11;Ca.isoWeekday=11;L("d",ra);L("e",ra);L("E",ra);L("dd",function(a,b){return b.weekdaysMinRegex(a)});L("ddd",function(a,b){return b.weekdaysShortRegex(a)});
L("dddd",function(a,b){return b.weekdaysRegex(a)});X(["dd","ddd","dddd"],function(a,b,c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:g(c).invalidWeekday=a});X(["d","e","E"],function(a,b,c,d){b[d]=u(a)});G("H",["HH",2],0,"hour");G("h",["hh",2],0,va);G("k",["kk",2],0,function(){return this.hours()||24});G("hmm",0,0,function(){return""+va.apply(this)+K(this.minutes(),2)});G("hmmss",0,0,function(){return""+va.apply(this)+K(this.minutes(),2)+K(this.seconds(),2)});G("Hmm",0,0,function(){return""+
this.hours()+K(this.minutes(),2)});G("Hmmss",0,0,function(){return""+this.hours()+K(this.minutes(),2)+K(this.seconds(),2)});wa("a",!0);wa("A",!1);F("hour","h");Ca.hour=13;L("a",Ja);L("A",Ja);L("H",ra);L("h",ra);L("k",ra);L("HH",ra,La);L("hh",ra,La);L("kk",ra,La);L("hmm",Yb);L("hmmss",Zb);L("Hmm",Yb);L("Hmmss",Zb);V(["H","HH"],xa);V(["k","kk"],function(a,b,c){a=u(a);b[xa]=24===a?0:a});V(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});V(["h","hh"],function(a,b,c){b[xa]=u(a);g(c).bigHour=
!0});V("hmm",function(a,b,c){var d=a.length-2;b[xa]=u(a.substr(0,d));b[Qa]=u(a.substr(d));g(c).bigHour=!0});V("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[xa]=u(a.substr(0,d));b[Qa]=u(a.substr(d,2));b[Ya]=u(a.substr(e));g(c).bigHour=!0});V("Hmm",function(a,b,c){c=a.length-2;b[xa]=u(a.substr(0,c));b[Qa]=u(a.substr(c))});V("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[xa]=u(a.substr(0,c));b[Qa]=u(a.substr(c,2));b[Ya]=u(a.substr(d))});var sc=M("Hours",!0),Vb={calendar:{sameDay:"[Today at] LT",
nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",
MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),meridiemParse:/[ap]\.?m?\.?/i},ta={},pb={},xb,hc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
ic=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jc=/Z|[+-]\d\d(?::?\d\d)?/,yb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Kb=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],lc=/^\/?Date\((\-?\d+)/i,kc=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;a.createFromInputFallback=
B("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});a.ISO_8601=function(){};a.RFC_2822=function(){};var tc=B("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",
function(){var a=da.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:t()}),uc=B("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=da.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:t()}),qb="year quarter month week day hour minute second millisecond".split(" ");ja("Z",":");ja("ZZ","");L("Z",Db);L("ZZ",Db);V(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=ma(Db,a)});var mc=/([\+\-]|\d\d)/gi;
a.updateOffset=function(){};var nc=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,oc=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;O.fn=la.prototype;O.invalid=function(){return O(NaN)};var vc=lb(1,"add"),wc=lb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var bc=B("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",
function(a){return void 0===a?this.localeData():this.locale(a)});G(0,["gg",2],0,function(){return this.weekYear()%100});G(0,["GG",2],0,function(){return this.isoWeekYear()%100});db("gggg","weekYear");db("ggggg","weekYear");db("GGGG","isoWeekYear");db("GGGGG","isoWeekYear");F("weekYear","gg");F("isoWeekYear","GG");Ca.weekYear=1;Ca.isoWeekYear=1;L("G",Cb);L("g",Cb);L("GG",ra,La);L("gg",ra,La);L("GGGG",Nb,Mb);L("gggg",Nb,Mb);L("GGGGG",Bb,zb);L("ggggg",Bb,zb);X(["gggg","ggggg","GGGG","GGGGG"],function(a,
b,c,d){b[d.substr(0,2)]=u(a)});X(["gg","GG"],function(b,c,d,g){c[g]=a.parseTwoDigitYear(b)});G("Q",0,"Qo","quarter");F("quarter","Q");Ca.quarter=7;L("Q",Wb);V("Q",function(a,b){b[Xa]=3*(u(a)-1)});G("D",["DD",2],"Do","date");F("date","D");Ca.date=9;L("D",ra);L("DD",ra,La);L("Do",function(a,b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});V(["D","DD"],Sa);V("Do",function(a,b){b[Sa]=u(a.match(ra)[0],10)});var cc=M("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear");
F("dayOfYear","DDD");Ca.dayOfYear=4;L("DDD",Ab);L("DDDD",Xb);V(["DDD","DDDD"],function(a,b,c){c._dayOfYear=u(a)});G("m",["mm",2],0,"minute");F("minute","m");Ca.minute=14;L("m",ra);L("mm",ra,La);V(["m","mm"],Qa);var xc=M("Minutes",!1);G("s",["ss",2],0,"second");F("second","s");Ca.second=15;L("s",ra);L("ss",ra,La);V(["s","ss"],Ya);var yc=M("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)});G(0,["SS",2],0,function(){return~~(this.millisecond()/10)});G(0,["SSS",3],0,"millisecond");
G(0,["SSSS",4],0,function(){return 10*this.millisecond()});G(0,["SSSSS",5],0,function(){return 100*this.millisecond()});G(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});G(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});G(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});G(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});F("millisecond","ms");Ca.millisecond=16;L("S",Ab,Wb);L("SS",Ab,La);L("SSS",Ab,Xb);var eb;for(eb="SSSS";9>=eb.length;eb+="S")L(eb,
qc);for(eb="S";9>=eb.length;eb+="S")V(eb,Ob);var zc=M("Milliseconds",!1);G("z",0,0,"zoneAbbr");G("zz",0,0,"zoneName");var U=v.prototype;U.add=vc;U.calendar=function(b,c){b=b||da();var d=aa(b,this).startOf("day"),d=a.calendarFormat(this,d)||"sameElse";c=c&&(z(c[d])?c[d].call(this,b):c[d]);return this.format(c||this.localeData().calendar(d,this,da(b)))};U.clone=function(){return new v(this)};U.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=aa(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-
this.utcOffset());b=C(b);if("year"===b||"month"===b||"quarter"===b){d=12*(a.year()-this.year())+(a.month()-this.month());var g=this.clone().add(d,"months"),e;0>a-g?(e=this.clone().add(d-1,"months"),a=(a-g)/(g-e)):(e=this.clone().add(d+1,"months"),a=(a-g)/(e-g));a=-(d+a)||0;"quarter"===b?a/=3:"year"===b&&(a/=12)}else a=this-a,a="second"===b?a/1E3:"minute"===b?a/6E4:"hour"===b?a/36E5:"day"===b?(a-d)/864E5:"week"===b?(a-d)/6048E5:a;return c?a:p(a)};U.endOf=function(a){a=C(a);if(void 0===a||"millisecond"===
a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};U.format=function(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);b=J(this,b);return this.localeData().postformat(b)};U.from=function(a,b){return this.isValid()&&(r(a)&&a.isValid()||da(a).isValid())?O({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};U.fromNow=function(a){return this.from(da(),a)};U.to=function(a,b){return this.isValid()&&(r(a)&&
a.isValid()||da(a).isValid())?O({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};U.toNow=function(a){return this.to(da(),a)};U.get=function(a){a=C(a);return z(this[a])?this[a]():this};U.invalidAt=function(){return g(this).overflow};U.isAfter=function(a,b){a=r(a)?a:da(a);if(!this.isValid()||!a.isValid())return!1;b=C(f(b)?"millisecond":b);return"millisecond"===b?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};U.isBefore=function(a,b){a=
r(a)?a:da(a);if(!this.isValid()||!a.isValid())return!1;b=C(f(b)?"millisecond":b);return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};U.isBetween=function(a,b,c,d){d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))};U.isSame=function(a,b){a=r(a)?a:da(a);if(!this.isValid()||!a.isValid())return!1;b=C(b||"millisecond");if("millisecond"===b)return this.valueOf()===a.valueOf();a=a.valueOf();return this.clone().startOf(b).valueOf()<=
a&&a<=this.clone().endOf(b).valueOf()};U.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};U.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};U.isValid=function(){return q(this)};U.lang=bc;U.locale=Va;U.localeData=sb;U.max=uc;U.min=tc;U.parsingFlags=function(){return l({},g(this))};U.set=function(a,b){if("object"===typeof a){a=H(a);b=I(a);for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=C(a),z(this[a]))return this[a](b);return this};
U.startOf=function(a){a=C(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};U.subtract=wc;U.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),
this.millisecond()]};U.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};U.toDate=function(){return new Date(this.valueOf())};U.toISOString=function(){if(!this.isValid())return null;var a=this.clone().utc();return 0>a.year()||9999<a.year()?J(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):z(Date.prototype.toISOString)?this.toDate().toISOString():J(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")};
U.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var a="["+a+'("]',c=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+(b+'[")]'))};U.toJSON=function(){return this.isValid()?this.toISOString():null};U.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};U.unix=function(){return Math.floor(this.valueOf()/
1E3)};U.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};U.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};U.year=ac;U.isLeapYear=function(){return ka(this.year())};U.weekYear=function(a){return vb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};U.isoWeekYear=function(a){return vb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};U.quarter=U.quarters=function(a){return null==
a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};U.month=ia;U.daysInMonth=function(){return ca(this.year(),this.month())};U.week=U.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};U.isoWeek=U.isoWeeks=function(a){var b=Fa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};U.weeksInYear=function(){var a=this.localeData()._week;return pa(this.year(),a.dow,a.doy)};U.isoWeeksInYear=function(){return pa(this.year(),1,4)};U.date=cc;U.day=
U.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};U.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};U.isoWeekday=function(a){if(!this.isValid())return null!=a?this:
NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};U.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};U.hour=U.hours=sc;U.minute=U.minutes=xc;U.second=U.seconds=yc;U.millisecond=U.milliseconds=zc;U.utcOffset=function(b,c,d){var g=this._offset||0,e;if(!this.isValid())return null!=b?this:NaN;if(null!=
b){if("string"===typeof b){if(b=ma(Db,b),null===b)return this}else 16>Math.abs(b)&&!d&&(b*=60);!this._isUTC&&c&&(e=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=b;this._isUTC=!0;null!=e&&this.add(e,"m");g!==b&&(!c||this._changeInProgress?ub(this,O(b-g,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?g:15*-Math.round(this._d.getTimezoneOffset()/15)};U.utc=function(a){return this.utcOffset(0,
a)};U.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};U.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var a=ma(rc,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this};U.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?da(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};U.isDST=function(){return this.utcOffset()>
this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};U.isLocal=function(){return this.isValid()?!this._isUTC:!1};U.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};U.isUtc=ea;U.isUTC=ea;U.zoneAbbr=function(){return this._isUTC?"UTC":""};U.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};U.dates=B("dates accessor is deprecated. Use date instead.",cc);U.months=B("months accessor is deprecated. Use month instead",ia);U.years=B("years accessor is deprecated. Use year instead",
ac);U.zone=B("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});U.isDSTShifted=B("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!f(this._isDSTShifted))return this._isDSTShifted;var a={};w(a,this);a=ha(a);if(a._a){var c=a._isUTC?b(a._a):da(a._a);this._isDSTShifted=this.isValid()&&
0<k(a._a,c.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var qa=D.prototype;qa.calendar=function(a,b,c){a=this._calendar[a]||this._calendar.sameElse;return z(a)?a.call(b,c):a};qa.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};qa.invalidDate=function(){return this._invalidDate};qa.ordinal=function(a){return this._ordinal.replace("%d",
a)};qa.preparse=jb;qa.postformat=jb;qa.relativeTime=function(a,b,c,d){var g=this._relativeTime[c];return z(g)?g(a,b,c,d):g.replace(/%d/i,a)};qa.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return z(a)?a(b):a.replace(/%s/i,b)};qa.set=function(a){var b,c;for(c in a)b=a[c],z(b)?this[c]=b:this["_"+c]=b;this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};qa.months=function(a,b){return a?
h(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||$b).test(b)?"format":"standalone"][a.month()]:h(this._months)?this._months:this._months.standalone};qa.monthsShort=function(a,b){return a?h(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[$b.test(b)?"format":"standalone"][a.month()]:h(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};qa.monthsParse=function(a,c,d){var g,e;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=
[],this._longMonthsParse=[],this._shortMonthsParse=[],g=0;12>g;++g)e=b([2E3,g]),this._shortMonthsParse[g]=this.monthsShort(e,"").toLocaleLowerCase(),this._longMonthsParse[g]=this.months(e,"").toLocaleLowerCase();if(d)c="MMM"===c?Ba.call(this._shortMonthsParse,a):Ba.call(this._longMonthsParse,a);else if("MMM"===c){c=Ba.call(this._shortMonthsParse,a);if(-1!==c)break a;c=Ba.call(this._longMonthsParse,a)}else{c=Ba.call(this._longMonthsParse,a);if(-1!==c)break a;c=Ba.call(this._shortMonthsParse,a)}c=-1!==
c?c:null}return c}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(g=0;12>g;g++)if(e=b([2E3,g]),d&&!this._longMonthsParse[g]&&(this._longMonthsParse[g]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[g]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),d||this._monthsParse[g]||(e="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[g]=new RegExp(e.replace(".",""),"i")),d&&"MMMM"===c&&this._longMonthsParse[g].test(a)||
d&&"MMM"===c&&this._shortMonthsParse[g].test(a)||!d&&this._monthsParse[g].test(a))return g};qa.monthsRegex=function(a){if(this._monthsParseExact)return e(this,"_monthsRegex")||fa.call(this),a?this._monthsStrictRegex:this._monthsRegex;e(this,"_monthsRegex")||(this._monthsRegex=rb);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};qa.monthsShortRegex=function(a){if(this._monthsParseExact)return e(this,"_monthsRegex")||fa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;
e(this,"_monthsShortRegex")||(this._monthsShortRegex=rb);return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};qa.week=function(a){return Fa(a,this._week.dow,this._week.doy).week};qa.firstDayOfYear=function(){return this._week.doy};qa.firstDayOfWeek=function(){return this._week.dow};qa.weekdays=function(a,b){return a?h(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:h(this._weekdays)?this._weekdays:
this._weekdays.standalone};qa.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin};qa.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};qa.weekdaysParse=function(a,c,d){var g,e;if(this._weekdaysParseExact)return kb.call(this,a,c,d);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(g=0;7>g;g++)if(e=b([2E3,1]).day(g),d&&!this._fullWeekdaysParse[g]&&(this._fullWeekdaysParse[g]=
new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[g]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[g]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[g]||(e="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[g]=new RegExp(e.replace(".",""),"i")),d&&"dddd"===c&&this._fullWeekdaysParse[g].test(a)||d&&"ddd"===c&&this._shortWeekdaysParse[g].test(a)||
d&&"dd"===c&&this._minWeekdaysParse[g].test(a)||!d&&this._weekdaysParse[g].test(a))return g};qa.weekdaysRegex=function(a){if(this._weekdaysParseExact)return e(this,"_weekdaysRegex")||Ia.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;e(this,"_weekdaysRegex")||(this._weekdaysRegex=rb);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};qa.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return e(this,"_weekdaysRegex")||Ia.call(this),a?this._weekdaysShortStrictRegex:
this._weekdaysShortRegex;e(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=rb);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};qa.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return e(this,"_weekdaysRegex")||Ia.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;e(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=rb);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};qa.isPM=
function(a){return"p"===(a+"").toLowerCase().charAt(0)};qa.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};ya("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===u(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});a.lang=B("moment.lang is deprecated. Use moment.locale instead.",ya);a.langData=B("moment.langData is deprecated. Use moment.localeData instead.",Ga);var Za=Math.abs,Ac=ab("ms"),Bc=ab("s"),Cc=ab("m"),Dc=ab("h"),Ec=ab("d"),
Fc=ab("w"),Gc=ab("M"),Hc=ab("y"),Ic=hb("milliseconds"),Jc=hb("seconds"),Kc=hb("minutes"),Lc=hb("hours"),Mc=hb("days"),Nc=hb("months"),Oc=hb("years"),fb=Math.round,Ta={ss:44,s:45,m:45,h:22,d:26,M:11},Lb=Math.abs,oa=la.prototype;oa.isValid=function(){return this._isValid};oa.abs=function(){var a=this._data;this._milliseconds=Za(this._milliseconds);this._days=Za(this._days);this._months=Za(this._months);a.milliseconds=Za(a.milliseconds);a.seconds=Za(a.seconds);a.minutes=Za(a.minutes);a.hours=Za(a.hours);
a.months=Za(a.months);a.years=Za(a.years);return this};oa.add=function(a,b){return Qb(this,a,b,1)};oa.subtract=function(a,b){return Qb(this,a,b,-1)};oa.as=function(a){if(!this.isValid())return NaN;var b,c=this._milliseconds;a=C(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*
b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*b)+c;default:throw Error("Unknown unit "+a);}};oa.asMilliseconds=Ac;oa.asSeconds=Bc;oa.asMinutes=Cc;oa.asHours=Dc;oa.asDays=Ec;oa.asWeeks=Fc;oa.asMonths=Gc;oa.asYears=Hc;oa.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*u(this._months/12):NaN};oa._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&
0>=b&&0>=c||(a+=864E5*Rb(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=p(a/1E3);d.seconds=a%60;a=p(a/60);d.minutes=a%60;a=p(a/60);d.hours=a%24;b+=p(a/24);a=p(4800*b/146097);c+=a;b-=Rb(146097*a/4800);a=p(c/12);d.days=b;d.months=c%12;d.years=a;return this};oa.get=function(a){a=C(a);return this.isValid()?this[a+"s"]():NaN};oa.milliseconds=Ic;oa.seconds=Jc;oa.minutes=Kc;oa.hours=Lc;oa.days=Mc;oa.weeks=function(){return p(this.days()/7)};oa.months=Nc;oa.years=Oc;oa.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();
var b=this.localeData(),c;c=!a;var d=O(this).abs(),g=fb(d.as("s")),e=fb(d.as("m")),f=fb(d.as("h")),k=fb(d.as("d")),l=fb(d.as("M")),d=fb(d.as("y")),g=g<=Ta.ss&&["s",g]||g<Ta.s&&["ss",g]||1>=e&&["m"]||e<Ta.m&&["mm",e]||1>=f&&["h"]||f<Ta.h&&["hh",f]||1>=k&&["d"]||k<Ta.d&&["dd",k]||1>=l&&["M"]||l<Ta.M&&["MM",l]||1>=d&&["y"]||["yy",d];g[2]=c;g[3]=0<+this;g[4]=b;c=dc.apply(null,g);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};oa.toISOString=tb;oa.toString=tb;oa.toJSON=tb;oa.locale=Va;oa.localeData=
sb;oa.toIsoString=B("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",tb);oa.lang=bc;G("X",0,0,"unix");G("x",0,0,"valueOf");L("x",Cb);L("X",/[+-]?\d+(\.\d{1,3})?/);V("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});V("x",function(a,b,c){c._d=new Date(u(a))});a.version="2.18.1";Sb=da;a.fn=U;a.min=function(){var a=[].slice.call(arguments,0);return cb("isBefore",a)};a.max=function(){var a=[].slice.call(arguments,0);return cb("isAfter",a)};a.now=function(){return Date.now?
Date.now():+new Date};a.utc=b;a.unix=function(a){return da(1E3*a)};a.months=function(a,b){return Pb(a,b,"months")};a.isDate=c;a.locale=ya;a.invalid=t;a.duration=O;a.isMoment=r;a.weekdays=function(a,b,c){return Eb(a,b,c,"weekdays")};a.parseZone=function(){return da.apply(null,arguments).parseZone()};a.localeData=Ga;a.isDuration=E;a.monthsShort=function(a,b){return Pb(a,b,"monthsShort")};a.weekdaysMin=function(a,b,c){return Eb(a,b,c,"weekdaysMin")};a.defineLocale=Na;a.updateLocale=function(a,b){if(null!=
b){var c=Vb;null!=ta[a]&&(c=ta[a]._config);b=A(c,b);b=new D(b);b.parentLocale=ta[a];ta[a]=b;ya(a)}else null!=ta[a]&&(null!=ta[a].parentLocale?ta[a]=ta[a].parentLocale:null!=ta[a]&&delete ta[a]);return ta[a]};a.locales=function(){return pc(ta)};a.weekdaysShort=function(a,b,c){return Eb(a,b,c,"weekdaysShort")};a.normalizeUnits=C;a.relativeTimeRounding=function(a){return void 0===a?fb:"function"===typeof a?(fb=a,!0):!1};a.relativeTimeThreshold=function(a,b){if(void 0===Ta[a])return!1;if(void 0===b)return Ta[a];
Ta[a]=b;"s"===a&&(Ta.ss=b-1);return!0};a.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};a.prototype=U;return a})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(a,h){return function(){function a(a){void 0===a&&(a=[]);this._elements=a}return a.prototype.length=function(){return this._elements.length},a.prototype.get=function(a){return this._elements[a]},a.prototype.toArray=
function(){for(var a=[],d=0;d<this.length();d++)a.push(this.get(d));return a},a}()})},"esri/arcade/ImmutablePointArray":function(){define("require exports ../core/tsSupport/extendsHelper ./ImmutableArray ../geometry/Point ../kernel".split(" "),function(a,h,m,f,d,c){var n=0===c.version.indexOf("4.");return function(a){function c(b,c,d,e,f,l){b=a.call(this,b)||this;return b._lazyPt=[],b._hasZ=!1,b._hasM=!1,b._spRef=c,b._hasZ=d,b._hasM=e,b._cacheId=f,b._partId=l,b}return m(c,a),c.prototype.get=function(a){if(void 0===
this._lazyPt[a]){var b=this._elements[a];if(void 0===b)return;var c=this._hasZ,e=this._hasM,f=null,f=c&&!e?new d(b[0],b[1],b[2],void 0,this._spRef):e&&c?new d(b[0],b[1],void 0,b[2],this._spRef):c&&e?new d(b[0],b[1],b[2],b[3],this._spRef):new d(b[0],b[1],this._spRef);n?f.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString():f.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString());this._lazyPt[a]=f}return this._lazyPt[a]},
c.prototype.equalityTest=function(a){return a===this?!0:null===a?!1:0==a instanceof c?!1:a.getUniqueHash()===this.getUniqueHash()},c.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()},c}(f)})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(a,h,m,f,d){return function(a){function c(c,d,b,g,f){c=a.call(this,c)||this;return c._lazyPath=[],c._hasZ=
!1,c._hasM=!1,c._hasZ=b,c._hasM=g,c._spRef=d,c._cacheId=f,c}return m(c,a),c.prototype.get=function(a){if(void 0===this._lazyPath[a]){var c=this._elements[a];if(void 0===c)return;this._lazyPath[a]=new d(c,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]},c.prototype.equalityTest=function(a){return a===this?!0:null===a?!1:0==a instanceof c?!1:a.getUniqueHash()===this.getUniqueHash()},c.prototype.getUniqueHash=function(){return this._cacheId.toString()},c}(f)})},"esri/arcade/FunctionWrapper":function(){define(["require",
"exports"],function(a,h){return function(){return function(a,f){this.context=this.definition=null;this.definition=a;this.context=f}}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(a,h){function m(a,b,c,d){return void 0!==a.fmin&&(a.min=a.fmin),void 0!==a.fmax&&(a.max=a.fmax),"0"!==a.min&&c.length<Number(a.min)?-2:"*"!==a.max&&c.length>Number(a.max)?-2:1}function f(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var d=c.localScope[a.toLowerCase()];
if("FormulaFunction"===d.type||"any"===d.type)return void 0===d.signature&&(d.signature={min:"0",max:"*"}),m(d.signature,a,b,c)}return void 0!==c.globalScope[a.toLowerCase()]&&(d=c.globalScope[a.toLowerCase()],"FormulaFunction"===d.type||"any"===d.type)?(void 0===d.signature&&(d.signature={min:"0",max:"*"}),m(d.signature,a,b,c)):-1}function d(a,b){void 0===b&&(b=!0);var c=t(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?
t(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?t(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?d(a.init,!1):"";case "VariableDeclaration":for(var g=0;g<a.declarations.length;g++)if(c=d(a.declarations[g],b),""!==c)return c;return"";case "ForInStatement":if(c=d(a.left,b),""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return t(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return t(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==
a.left.type)return t(a,"SYNTAX","LEFTNOTVAR");return c=d(a.right,b),""!==c?c:(c=d(a.body,b),""!==c?c:"");case "ForStatement":return null!==a.test&&(c=d(a.test,b),""!==c)?c:null!==a.init&&(c=d(a.init,b),""!==c)?c:null!==a.update&&(c=d(a.update,b),""!==c)?c:null!==a.body&&(c=d(a.body,b),""!==c)?c:"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":return c=d(a.test,b),""!==c?c:null!==a.consequent&&(c=d(a.consequent,!1),""!==c)?c:null!==
a.alternate&&(c=d(a.alternate,!1),""!==c)?c:"";case "BlockStatement":for(var e=[],g=0;g<a.body.length;g++)"EmptyStatement"!==a.body[g].type&&e.push(a.body[g]);a.body=e;for(g=0;g<a.body.length;g++)if(c=d(a.body[g],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?t(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?t(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):d(a.body,!1);case "ReturnStatement":return null!==a.argument?d(a.argument,b):"";case "UpdateExpression":return"Identifier"!==
a.argument.type&&"MemberExpression"!==a.argument.type?t(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):d(a.argument,b);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return t(a,"SYNTAX","ASSIGNMENTTOVARSONLY");if(c=d(a.left,b),""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return t(a,"SYNTAX","OPERATORNOTRECOGNISED")}return d(a.right,!1);case "ExpressionStatement":return d(a.expression,!1);
case "Identifier":c="";break;case "MemberExpression":return c=d(a.object,b),""!==c?c:!0===a.computed?d(a.property,b):"";case "Literal":return"";case "ThisExpression":return t(a,"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==a.callee.type)return t(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(g=0;g<a.arguments.length;g++)if(c=d(a.arguments[g],b),""!==c)return c;return"";case "UnaryExpression":c=d(a.argument,b);break;case "BinaryExpression":if(c=d(a.left,b),""!==c)break;if(c=d(a.right,
b),""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return t(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":if(c=d(a.left,b),""!==c)break;if(c=d(a.right),""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return t(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return t(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c=
"";for(g=0;g<a.elements.length&&(c=d(a.elements[g],b),""===c);g++);break;case "Array":return t(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":c="";for(g=0;g<a.properties.length;g++){if(c="",null!==a.properties[g].key&&("Literal"!==a.properties[g].key.type&&"Identifier"!==a.properties[g].key.type&&(c=t(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[g].key.type))e=a.properties[g].key.value,"string"==typeof e||e instanceof String||(c=t(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"));
if(""===c&&(c=d(a.properties[g],b)),""!==c)break}break;case "Property":return"Literal"!==a.key.type&&"Identifier"!==a.key.type?t(a,"SYNTAX","ONLYLITERAL"):"Identifier"!==a.key.type&&(c=d(a.key,b),""!==c)?c:c=d(a.value,b)}return c}catch(y){throw y;}}function c(a,d){var e=t(a,"SYNTAX","UNREOGNISED"),l=null,h="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return t(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");null!==d.localScope?void 0!==d.localScope[a.id.name.toLowerCase()]&&
a.id.name.toLowerCase():void 0!==d.globalScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase();var n=null===a.init?"":c(a.init,d);return""!==n?n:(null===d.localScope?d.globalScope[a.id.name.toLowerCase()]={type:"any"}:d.localScope[a.id.name.toLowerCase()]={type:"any"},"");case "FunctionDeclaration":return l=b(a.id.name.toLowerCase(),a,d),h=g(a,d),""!==h?h:null!==d.localScope?t(a,"SYNTAX","GLOBALFUNCTIONSONLY"):(l.isnative=!1,d.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[l]},
"");case "VariableDeclaration":for(var e="",m=0;m<a.declarations.length&&(e=c(a.declarations[m],d),""===e);m++);break;case "IfStatement":return e=c(a.test,d),""!==e?e:"AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type?t(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):null!==a.consequent&&(e=c(a.consequent,d),""!==e)?e:null!==a.alternate&&(e=c(a.alternate,d),""!==e)?e:"";case "EmptyStatement":return"";case "BlockStatement":for(m=0;m<a.body.length;m++)if(e=c(a.body[m],d),""!==
e)return e;return"";case "ReturnStatement":return null!==a.argument?c(a.argument,d):"";case "ForInStatement":if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return t(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return t(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return t(a,"SYNTAX","LEFTNOTVAR");return e=c(a.left,d),""!==e?e:(e=c(a.right,d),""!==e?e:(e=c(a.body,d),""!==e?e:""));case "ForStatement":return null!==a.init&&(e=c(a.init,d),
""!==e)?e:null!==a.test&&(e=c(a.test,d),""!==e)?e:null!==a.body&&(e=c(a.body,d),""!==e)?e:null!==a.update&&(e=c(a.update,d),""!==e)?e:"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return t(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var p=!1;return"MemberExpression"===a.argument.type?c(a.argument,d):(null!==d.localScope&&void 0!==d.localScope[a.argument.name.toLowerCase()]&&(p=!0),void 0!==
d.globalScope[a.argument.name.toLowerCase()]&&(p=!0),!1===p?"Identifier "+a.argument.name+" has not been declared.":"");case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return t(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var q=c(a.right,d);return""!==q?q:(p=!1,"MemberExpression"===a.left.type?(q=c(a.left,d),""!==q?q:""):(null!==d.localScope&&void 0!==d.localScope[a.left.name.toLowerCase()]&&(p=!0),void 0!==d.globalScope[a.left.name.toLowerCase()]&&(p=!0),!1===p?
"Identifier "+a.left.name+" has not been declared.":""));case "ExpressionStatement":return c(a.expression,d);case "Identifier":var u=a.name.toLowerCase();if(null!==d.localScope&&void 0!==d.localScope[u])return"";e=void 0!==d.globalScope[u]?"":t(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":return e=c(a.object,d),""!==e?e:!0===a.computed?c(a.property,d):"";case "Literal":return"";case "ThisExpression":e=t(a,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==a.callee.type)return t(a,
"SYNTAX","ONLYNODESSUPPORTED");e="";for(m=0;m<a.arguments.length;m++)if(e=c(a.arguments[m],d),""!==e)return e;var w=f(a.callee.name,a.arguments,d);-1===w&&(e=t(a,"SYNTAX","NOTFOUND"));-2===w&&(e=t(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":e=c(a.argument,d);break;case "BinaryExpression":return e=c(a.left,d),""!==e?e:(e=c(a.right,d),""!==e?e:"");case "LogicalExpression":return e=c(a.left,d),""!==e?e:"AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type?t(a.left,"SYNTAX",
"CANNOT_USE_ASSIGNMENT_IN_CONDITION"):(e=c(a.right,d),""!==e?e:"AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type?t(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"");case "ConditionalExpression":return t(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":e="";for(m=0;m<a.elements.length&&(e=c(a.elements[m],d),""===e);m++);break;case "ObjectExpression":e="";for(m=0;m<a.properties.length;m++){if(e="",null!==a.properties[m].key&&("Literal"!==a.properties[m].key.type&&"Identifier"!==
a.properties[m].key.type&&(e=t(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[m].key.type)){var r=a.properties[m].key.value;"string"==typeof r||r instanceof String||(e=t(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}if(""===e&&(e=c(a.properties[m],d)),""!==e)break}break;case "Property":return"Literal"!==a.key.type&&"Identifier"!==a.key.type?t(a,"SYNTAX","ONLYLITERAL"):"Identifier"!==a.key.type&&(e=c(a.key,d),""!==e)?e:e=c(a.value,d);case "Array":return t(a,"SYNTAX","NOTSUPPORTED")}return e}catch(I){throw I;
}}function n(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?n(a.init,b):c;case "FunctionDeclaration":return n(a.body,b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(n(a.declarations[d],b))return!0;return c;case "IfStatement":return n(a.test,b)?!0:null!==a.consequent&&n(a.consequent,b)?!0:null!==a.alternate&&n(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(n(a.body[d],b))return!0;return c;
case "ReturnStatement":return null!==a.argument?n(a.argument,b):c;case "UpdateExpression":return n(a.argument,b);case "AssignmentExpression":return c=n(a.right,b),c?c:n(a.left,b);case "ExpressionStatement":return n(a.expression,b);case "ForInStatement":return(c=n(a.left,b))?c:(c=n(a.right,b))?c:(c=n(a.body,b),c);case "ForStatement":return null!==a.init&&(c=n(a.init,b))?c:null!==a.test&&(c=n(a.test,b))?c:null!==a.body&&(c=n(a.body,b))?c:(null!==a.update&&(c=n(a.update,b)),c);case "BreakStatement":return c;
case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return b.toLowerCase()===a.name.toLowerCase();case "MemberExpression":return(c=n(a.object,b))?c:(!0===a.computed&&(c=n(a.property,b)),c);case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(d=0;d<a.arguments.length;d++)n(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)n(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return n(a.argument,b);case "BinaryExpression":return(c=
n(a.left,b))?c:c=n(a.right,b);case "LogicalExpression":return(c=n(a.left,b))?c:c=n(a.right,b);case "ObjectExpression":for(d=0;d<a.properties.length;d++)n(a.properties[d],b)&&(c=!0);return c;case "Property":return c=n(a.value,b);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(B){throw B;}}function e(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?e(a.init,b):c;case "FunctionDeclaration":return e(a.body,b);case "VariableDeclaration":for(var d=
0;d<a.declarations.length;d++)if(e(a.declarations[d],b))return!0;return c;case "IfStatement":return e(a.test,b)?!0:null!==a.consequent&&e(a.consequent,b)?!0:null!==a.alternate&&e(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(e(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?e(a.argument,b):c;case "UpdateExpression":return e(a.argument,b);case "AssignmentExpression":return e(a.left,b)?!0:e(a.right,b);case "ExpressionStatement":return e(a.expression,
b);case "ForInStatement":return(c=e(a.left,b))?c:(c=e(a.right,b))?c:(c=e(a.body,b),c);case "ForStatement":return null!==a.init&&(c=e(a.init,b))?c:null!==a.test&&(c=e(a.test,b))?c:null!==a.body&&(c=e(a.body,b))?c:(null!==a.update&&(c=e(a.update,b)),c);case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":return(c=e(a.object,b))?c:(!0===a.computed&&(c=e(a.property,b)),c);case "Literal":return c;case "ThisExpression":return c;
case "CallExpression":if(a.callee.name.toLowerCase()===b.toLowerCase())return!0;for(d=0;d<a.arguments.length;d++)e(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)e(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return e(a.argument,b);case "BinaryExpression":return(c=e(a.left,b))?c:c=e(a.right,b);case "LogicalExpression":return(c=e(a.left,b))?c:c=e(a.right,b);case "ConditionalExpression":return c;case "ObjectExpression":for(d=0;d<a.properties.length;d++)e(a.properties[d],
b)&&(c=!0);return c;case "Property":return c=e(a.value,b);case "Array":return c;default:return c}}catch(B){throw B;}}function l(a,b){var c,d=[];try{switch(a.type){case "VariableDeclarator":return null!==a.init?l(a.init,b):d;case "FunctionDeclaration":return l(a.body,b);case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)c=l(a.declarations[e],b),d=d.concat(c);return d;case "ForInStatement":return c=l(a.left,b),d=d.concat(c),c=l(a.right,b),d=d.concat(c),c=l(a.body,b),d=d.concat(c);case "ForStatement":return null!==
a.init&&(c=l(a.init,b),d=d.concat(c)),null!==a.test&&(c=l(a.test,b),d=d.concat(c)),null!==a.body&&(c=l(a.body,b),d=d.concat(c)),null!==a.update&&(c=l(a.update,b),d=d.concat(c)),d;case "IfStatement":return c=l(a.test,b),d=d.concat(c),null!==a.consequent&&(c=l(a.consequent,b),d=d.concat(c)),null!==a.alternate&&(c=l(a.alternate,b),d=d.concat(c)),d;case "EmptyStatement":return d;case "BlockStatement":for(e=0;e<a.body.length;e++)c=l(a.body[e],b),d=d.concat(c);return d;case "ReturnStatement":return null!==
a.argument?l(a.argument,b):d;case "UpdateExpression":return l(a.argument,b);case "AssignmentExpression":return d=l(a.left,b),d=d.concat(l(a.right,b));case "ExpressionStatement":return l(a.expression,b);case "BreakStatement":return d;case "ContinueStatement":return d;case "Compound":return d;case "Identifier":return d;case "MemberExpression":if("Identifier"!==a.object.type)return d;if(!1===a.computed)d.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&
"string"==typeof a.property.value&&d.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(y){}return d;case "Literal":return d;case "ThisExpression":return d;case "CallExpression":for(e=0;e<a.arguments.length;e++)c=l(a.arguments[e],b),d=d.concat(c);return d;case "ArrayExpression":for(e=0;e<a.elements.length;e++)c=l(a.elements[e],b),d=d.concat(c);return d;case "UnaryExpression":return l(a.argument,b);case "ObjectExpression":for(e=0;e<a.properties.length;e++)c=l(a.properties[e],
b),d=d.concat(c);return d;case "Property":return l(a.value,b);case "BinaryExpression":return c=l(a.left,b),d=d.concat(c),c=l(a.right,b),d=d.concat(c);case "LogicalExpression":return c=l(a.left,b),d=d.concat(c),c=l(a.right,b),d=d.concat(c);case "ConditionalExpression":return d;case "Array":return d;default:return d}}catch(y){throw y;}}function b(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var d=0;d<b.params.length;d++)c.push("any");return{name:a,"return":"any",params:c}}function g(a,b){b=
{globalScope:b.globalScope,localScope:{}};for(var d=0;d<a.params.length;d++)b.localScope[a.params[d].name.toLowerCase()]={type:"any"};return c(a.body,b)}function q(a,b,c,d){var e={};void 0!==a&&null!==a||(a={});void 0!==c&&null!==c||(c={});e.infinity={type:"any"};e.textformatting={type:"any"};e.pi={type:"any"};for(var g in b)("simple"!==d||"simple"===d&&"a"===b[g].av)&&(e[g]={type:"FormulaFunction",signature:b[g]});for(b=0;b<c.length;b++)g=c[b],e[g.name]={type:"FormulaFunction",signature:g};for(g in a)e[g]=
a[g],e[g].type="any";return e}function t(a,b,c){var d="";switch(b){case "SYNTAX":d="Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":d+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":d+=" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+="Cannot find member property. ";d+=
!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?a.property.name:"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":d+="Property names must be literals or identifiers"}break;case "Literal":break;case "ThisExpression":d+="THIS construct is not supported.";
case "CallExpression":switch(c){case "WRONGSIGNATURE":d+="Function signature does not match: ";d+=a.callee.name;break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+=a.callee.name;break;case "NOTAFUNCTION":d+="Not a Function: ";d+=a.callee.name;break;case "NOTFOUND":d+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";
break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":d+="Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":d+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}case "ConditionalExpression":d+=
"Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=" Cannot Put Function inside Array."}break;case "Array":d+="Expression contains unrecognised array structure.";break;default:d+="Expression contains unrecognised code structures."}}catch(B){throw B;}return d}function w(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:t(a,b,c)}}function v(a,b,c,d,e){void 0===e&&(e=!0);b={globalScope:b.globalScope,localScope:{}};for(e=
0;e<a.params.length;e++)b.localScope[a.params[e].name.toLowerCase()]={type:"any"};r(a.body,b,c,d,!1)}function r(a,c,d,e,g){if(void 0===g&&(g=!0),null===a)throw Error("Unnexpexted Expression Syntax");t(a,"SYNTAX","UNREOGNISED");var l=null;try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?void e.push(w(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR")):("Identifier"!==a.id.type?e.push(w(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(null!==c.localScope?void 0!==
c.localScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase():void 0!==c.globalScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase(),null===c.localScope?c.globalScope[a.id.name.toLowerCase()]={type:"any"}:c.localScope[a.id.name.toLowerCase()]={type:"any"}),void(null===a.init?"":r(a.init,c,d,e,g)));case "FunctionDeclaration":return!1===g&&e.push(w(a,"SYNTAX","GLOBALFUNCTIONSONLY")),"Identifier"!==a.id.type&&e.push(w(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER")),l=b("",a,c),v(a,c,d,e,g),null!==c.localScope&&
e.push(w(a,"SYNTAX","GLOBALFUNCTIONSONLY")),l.isnative=!1,void("Identifier"===a.id.type&&(c.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[l]}));case "VariableDeclaration":for(var k=0;k<a.declarations.length;k++)r(a.declarations[k],c,d,e,g);break;case "IfStatement":return null!==a.test&&(r(a.test,c,d,e,g),("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)&&e.push(w(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"))),null!==a.consequent&&r(a.consequent,
c,d,e,g),void(null!==a.alternate&&r(a.alternate,c,d,e,g));case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(k=0;k<a.body.length;k++)r(a.body[k],c,d,e,g);break;case "ReturnStatement":return void(null!==a.argument&&r(a.argument,c,d,e,g));case "ForInStatement":return"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&e.push(w(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&e.push(w(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&e.push(w(a,
"SYNTAX","LEFTNOTVAR")),r(a.left,c,d,e,g),r(a.right,c,d,e,g),void r(a.body,c,d,e,g);case "ForStatement":return null!==a.init&&r(a.init,c,d,e,g),null!==a.test&&r(a.test,c,d,e,g),null!==a.body&&r(a.body,c,d,e,g),void(null!==a.update&&r(a.update,c,d,e,g));case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?e.push(w(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(l=!1,!1===d&&(null!==
c.localScope&&void 0!==c.localScope[a.argument.name.toLowerCase()]&&(l=!0),void 0!==c.globalScope[a.argument.name.toLowerCase()]&&(l=!0),!1===l&&e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&r(a.argument,c,d,e,g));break;case "AssignmentExpression":switch("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&e.push(w(a,"SYNTAX","ASSIGNMENTTOVARSONLY")),
a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:e.push(w(a,"SYNTAX","OPERATORNOTRECOGNISED"))}r(a.right,c,d,e,g);l=!1;return"Identifier"===a.left.type&&(null!==c.localScope&&void 0!==c.localScope[a.left.name.toLowerCase()]&&(l=!0),void 0!==c.globalScope[a.left.name.toLowerCase()]&&(l=!0),!1===d&&!1===l&&e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."})),
void("MemberExpression"===a.left.type&&r(a.left,c,d,e,g));case "ExpressionStatement":return void r(a.expression,c,d,e,g);case "Identifier":var h=a.name.toLowerCase();if(null!==c.localScope&&void 0!==c.localScope[h])break;if(void 0!==c.globalScope[h])break;!1===d&&e.push(w(a,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":return r(a.object,c,d,e,g),void(!0===a.computed&&r(a.property,c,d,e,g));case "Literal":return"";case "ThisExpression":e.push(w(a,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==
a.callee.type&&e.push(w(a,"SYNTAX","ONLYNODESSUPPORTED"));for(k=0;k<a.arguments.length;k++)r(a.arguments[k],c,d,e,g);var n=f(a.callee.name,a.arguments,c);return!1===d&&-1===n&&e.push(w(a,"SYNTAX","NOTFOUND")),void(-2===n&&e.push(w(a,"SYNTAX","WRONGSIGNATURE")));case "UnaryExpression":return void r(a.argument,c,d,e,g);case "BinaryExpression":switch(r(a.left,c,d,e,g),r(a.right,c,d,e,g),a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:e.push(w(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;default:e.push(w(a,"SYNTAX","OPERATORNOTRECOGNISED"))}return r(a.left,c,d,e,g),("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)&&e.push(w(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")),r(a.right,c,d,e,g),void(("AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type)&&e.push(w(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));
case "ConditionalExpression":e.push(w(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(k=0;k<a.elements.length;k++)r(a.elements[k],c,d,e,g);break;case "Array":e.push(w(a,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(k=0;k<a.properties.length;k++)r(a.properties[k],c,d,e,g);break;case "Property":return"Literal"!==a.key.type&&"Identifier"!==a.key.type&&e.push(w(a,"SYNTAX","ONLYLITERAL")),"Literal"===a.key.type&&r(a.key,c,d,e,g),void r(a.value,c,d,e,g);default:e.push(w(a,"SYNTAX",
"UNRECOGNISED"))}}catch(F){e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}Object.defineProperty(h,"__esModule",{value:!0});h.functionDecls={concatenate:{min:"0",max:"*",av:"a"},split:{min:"2",max:"4",av:"a"},guid:{min:"0",max:"1",av:"a"},today:{min:"0",max:"0",av:"a"},now:{min:"0",max:"0",av:"a"},timestamp:{min:"0",max:"0",av:"a"},day:{min:"1",max:"1",av:"a"},month:{min:"1",max:"1",av:"a"},year:{min:"1",max:"1",av:"a"},hour:{min:"1",
max:"1",av:"a"},second:{min:"1",max:"1",av:"a"},millisecond:{min:"1",max:"1",av:"a"},minute:{min:"1",max:"1",av:"a"},weekday:{min:"1",max:"1",av:"a"},toutc:{min:"1",max:"1",av:"a"},tolocal:{min:"1",max:"1",av:"a"},date:{min:"0",max:"7",av:"a"},datediff:{min:"2",max:"3",av:"a"},dateadd:{min:"2",max:"3",av:"a"},trim:{min:"1",max:"1",av:"a"},text:{min:"1",max:"2",av:"a"},left:{min:"2",max:"2",av:"a"},right:{min:"2",max:"2",av:"a"},mid:{min:"2",max:"3",av:"a"},upper:{min:"1",max:"1",av:"a"},proper:{min:"1",
max:"2",av:"a"},lower:{min:"1",max:"1",av:"a"},find:{min:"2",max:"3",av:"a"},iif:{min:"3",max:"3",av:"a"},decode:{min:"2",max:"*",av:"a"},when:{min:"2",max:"*",av:"a"},defaultvalue:{min:"2",max:"2",av:"a"},isempty:{min:"1",max:"1",av:"a"},maplayer:{min:"2",max:"3",av:"f"},domaincode:{min:"3",max:"4",av:"a"},domainname:{min:"2",max:"4",av:"a"},polygon:{min:"1",max:"1",av:"a"},point:{min:"1",max:"1",av:"a"},polyline:{min:"1",max:"1",av:"a"},extent:{min:"1",max:"1",av:"a"},multipoint:{min:"1",max:"1",
av:"a"},geometry:{min:"1",max:"1",av:"a"},featurelayer:{min:"1",max:"3",av:"f"},featurecollection:{min:"1",max:"1",av:"f"},buffer:{min:"2",max:"4",av:"f"},area:{min:"1",max:"2",av:"f"},sumarea:{min:"1",max:"2",av:"f"},length:{min:"1",max:"2",av:"f"},sumlength:{min:"1",max:"2",av:"f"},count:{min:"0",max:"*",av:"a"},filter:{min:"2",max:"2",av:"f"},envelopeintersects:{min:"2",max:"2",av:"f"},intersects:{min:"2",max:"2",av:"f"},contains:{min:"2",max:"2",av:"f"},overlaps:{min:"2",max:"2",av:"f"},within:{min:"2",
max:"2",av:"f"},touches:{min:"2",max:"2",av:"f"},crosses:{min:"2",max:"2",av:"f"},union:{min:"1",max:"2",av:"f",fmin:1},difference:{min:"2",max:"2",av:"f",fmin:2,fmax:3},intersection:{min:"2",max:"2",av:"f",fmin:2,fmax:3},symmetricdifference:{min:"2",max:"2",av:"f",fmin:2,fmax:3},number:{min:"1",max:"2",av:"a"},acos:{min:"1",max:"1",av:"a"},asin:{min:"1",max:"1",av:"a"},atan:{min:"1",max:"1",av:"a"},atan2:{min:"2",max:"2",av:"a"},ceil:{min:"1",max:"2",av:"a"},floor:{min:"1",max:"2",av:"a"},round:{min:"1",
max:"2",av:"a"},cos:{min:"1",max:"1",av:"a"},exp:{min:"1",max:"1",av:"a"},log:{min:"1",max:"1",av:"a"},min:{min:"0",max:"*",av:"a"},console:{min:"0",max:"*",av:"a"},max:{min:"0",max:"*",av:"a"},pow:{min:"2",max:"2",av:"a"},random:{min:"0",max:"0",av:"a"},sqrt:{min:"1",max:"1",av:"a"},sin:{min:"1",max:"1",av:"a"},tan:{min:"1",max:"1",av:"a"},abs:{min:"1",max:"1",av:"a"},isnan:{min:"1",max:"1",av:"a"},stdev:{min:"0",max:"*",av:"a"},average:{min:"0",max:"*",av:"a"},mean:{min:"0",max:"*",av:"a"},sum:{min:"0",
max:"*",av:"a"},variance:{min:"0",max:"*",av:"a"},distinct:{min:"0",max:"*",av:"a"},addfield:{min:"3",max:"3",av:"f"},removefield:{min:"2",max:"2",av:"f"},aggregate:{min:"3",max:"3",av:"f"},dissolve:{min:"2",max:"3",av:"f"},changeshape:{min:"2",max:"4",av:"f"},first:{min:"1",max:"1",av:"a"},top:{min:"2",max:"2",av:"a"},orderby:{min:"2",max:"2",av:"f"},"boolean":{min:"1",max:"1",av:"a"},dictionary:{min:"0",max:"*",av:"a"},servicearea:{min:"2",max:"*",av:"f"},equals:{min:"2",max:"2",av:"a"},"typeof":{min:"1",
max:"1",av:"a"},reverse:{min:"1",max:"1",av:"a"},replace:{min:"3",max:"4",av:"a"},sort:{min:"1",max:"2",av:"a"},feature:{min:"1",max:"*",av:"a"},haskey:{min:"2",max:"2",av:"a"},indexof:{min:"2",max:"2",av:"a"},centroid:{min:"1",max:"1",av:"f"},multiparttosinglepart:{min:"1",max:"1",av:"f"}};h.checkFunctionSignature=m;h.findFunction=f;h.validateLanguageNode=d;h.testValidityOfExpression=c;h.referencesMemberImpl=n;h.referencesMember=function(a,b){return!0===n(a.body[0].body,b.toLowerCase())?!0:!1};h.referencesFunctionImpl=
e;h.referencesFunction=function(a,b){return!0===e(a.body[0].body,b)?!0:!1};h.findFieldLiteralsImpl=l;h.findFieldLiterals=function(a,b){return l(a.body[0].body,b)};h.extractFunctionDeclaration=b;h.validateFunction=g;h.constructGlobalScope=q;h.validateScript=function(a,b,d){void 0===d&&(d="full");b={globalScope:q(b.vars,h.functionDecls,b.customFunctions,d),localScope:null};return c(a.body[0].body,b)};h.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":
d(a.body[0].body)};h.nodeErrorMessage=t;h.makeError=w;h.extractAllIssuesInFunction=v;h.extractAllIssues=r;h.checkScript=function(a,b,c,d){void 0===d&&(d="full");var e=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];null!==b&&void 0!==b||(b={vars:{},customFunctions:[]});b={globalScope:q(b.vars,h.functionDecls,b.customFunctions,d),localScope:null};try{r(a.body[0].body,b,c,e)}catch(y){}return e}})},"esri/arcade/Dictionary":function(){define(["require",
"exports","./languageUtils","../geometry/Geometry","./ImmutableArray"],function(a,h,m,f,d){return function(){function a(c){this.attributes=null;this.plain=!1;this.immutable=!0;c instanceof a?this.attributes=c.attributes:void 0===c?this.attributes={}:null===c?this.attributes={}:this.attributes=c}return a.prototype.field=function(a){var c=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var d in this.attributes)if(d.toLowerCase()===c)return this.attributes[d];throw Error("Field not Found");
},a.prototype.setField=function(a,c){if(this.immutable)throw Error("Dictionary is Immutable");var d=a.toLowerCase();if(void 0!==this.attributes[a])return void(this.attributes[a]=c);for(var b in this.attributes)if(b.toLowerCase()===d)return void(this.attributes[b]=c);this.attributes[a]=c},a.prototype.hasField=function(a){var c=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var d in this.attributes)if(d.toLowerCase()===c)return!0;return!1},a.prototype.keys=function(){var a=[],c;for(c in this.attributes)a.push(c);
return a=a.sort()},a.prototype.castToText=function(){var a="",c;for(c in this.attributes){""!==a&&(a+=",");var l=this.attributes[c];null==l?l="null":m.isBoolean(l)||m.isNumber(l)||m.isString(l)?a+=JSON.stringify(c)+":"+JSON.stringify(l):l instanceof f?a+=JSON.stringify(c)+":"+m.toStringExplicit(l):l instanceof d?a+=JSON.stringify(c)+":"+m.toStringExplicit(l):l instanceof Array?a+=JSON.stringify(c)+":"+m.toStringExplicit(l):l instanceof Date?a+=JSON.stringify(c)+":"+JSON.stringify(l):null!==l&&"object"==
typeof l&&void 0!==l.castToText&&(a+=JSON.stringify(c)+":"+l.castToText())}return"{"+a+"}"},a}()})},"esri/arcade/Feature":function(){define("require exports dojo/_base/lang ../geometry/Geometry ../Graphic ../geometry/support/jsonUtils ./Dictionary ./languageUtils ./ImmutableArray ../geometry/Point".split(" "),function(a,h,m,f,d,c,n,e,l,b){return function(){function a(b,e,g){(this.geometry=null,this.attributes=null,this._layer=null,this._datesfixed=!0,this.immutable=!0,b instanceof a)?(this.attributes=
b.attributes,this.geometry=b.geometry,b._layer&&(this._layer=b._layer)):b instanceof d?(this.geometry=b.geometry,void 0===b.attributes?this.attributes={}:null===b.attributes?this.attributes={}:this.attributes=b.attributes,b._layer?(this._layer=b._layer,this._datesfixed=!1):b.layer&&(this._layer=b.layer,this._datesfixed=!1)):b instanceof n?(this.attributes=b.field("attributes"),null!==this.attributes&&(this.attributes instanceof n?this.attributes=this.attributes.attributes:this.attributes=null),this.geometry=
b.field("geometry"),null!==this.geometry&&(this.geometry instanceof n?this.geometry=a.parseGeometryFromDictionary(this.geometry):this.geometry instanceof f||(this.geometry=null))):(e instanceof f||null===e?(this.geometry=e,void 0===b?this.attributes={}:null===b?this.attributes={}:this.attributes=b):"string"==typeof b?(b=JSON.parse(b),null!==b.geometry&&void 0!==b.geometry&&(this.geometry=c.fromJSON(b.geometry)),void 0===b.attributes?this.attributes={}:null===b.attributes?this.attributes={}:this.attributes=
b.attributes):(void 0===b?this.attributes={}:null===b&&(this.attributes={}),this.geometry=null),void 0!==g&&(this._layer=g))}return a.prototype.castToText=function(){var a="",b;for(b in this.attributes){""!==a&&(a+=",");var c=this.attributes[b];null==c?c="null":e.isBoolean(c)||e.isNumber(c)||e.isString(c)?a+=JSON.stringify(b)+":"+JSON.stringify(c):c instanceof f?a+=JSON.stringify(b)+":"+e.toStringExplicit(c):c instanceof l?a+=JSON.stringify(b)+":"+e.toStringExplicit(c):c instanceof Array?a+=JSON.stringify(b)+
":"+e.toStringExplicit(c):c instanceof Date?a+=JSON.stringify(b)+":"+JSON.stringify(c):null!==c&&"object"==typeof c&&void 0!==c.castToText&&(a+=JSON.stringify(b)+":"+c.castToText())}return'{"geometry":'+(null===this.geometry?"null":e.toStringExplicit(this.geometry))+',"attributes":{'+a+"}}"},a.prototype._fixDates=function(){for(var a=[],b=0;b<this._layer.fields.length;b++){var c=this._layer.fields[b];"date"!==c.type&&"esriFieldTypeDate"!==c.type||a.push(c.name)}0<a.length&&this._fixDateFields(a);
this._datesfixed=!0},a.prototype._fixDateFields=function(a){this.attributes=m.mixin({},this.attributes);for(var b=0;b<a.length;b++){var c=this.attributes[a[b]];if(null!==c)if(void 0===c)for(var d in this.attributes){if(d.toLowerCase()===a[b]){c=this.attributes[d];null!==c&&(c instanceof Date||(this.attributes[d]=new Date(c)));break}}else c instanceof Date||(this.attributes[a[b]]=new Date(c))}},a.prototype.field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];
if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");},a.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(var b=0;b<this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===a)return!0;return!1},a.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===
b)return this.attributes[c];return null},a.prototype.setField=function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===e.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");var c=a.toLowerCase();if(void 0!==this.attributes[a])return void(this.attributes[a]=b);for(var d in this.attributes)if(d.toLowerCase()===c)return void(this.attributes[d]=b);this.attributes[a]=b},a.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===
b)return!0;return this._hasFieldDefinition(b)?!0:!1},a.prototype.keys=function(){var a=[],b={},c;for(c in this.attributes)a.push(c),b[c.toLowerCase()]=1;if(null!==this._layer)for(c=0;c<this._layer.fields.length;c++){var d=this._layer.fields[c];1!==b[d.name.toLowerCase()]&&a.push(d.name)}return a=a.sort()},a.fromFeature=function(b){return new a(b)},a.parseGeometryFromDictionary=function(b){b=a.convertDictionaryToJson(b,!0);return void 0!==b.spatialreference&&(b.spatialReference=b.spatialreference,
delete b.spatialreference),void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasM)),void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM)),void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM)),c.fromJSON(b)},a.fixPathArrays=function(a,b,c){var d=[];if(a instanceof Array)for(var e=0;e<a.length;e++)d.push(this.fixPointArrays(a[e],b,c));else if(a instanceof l)for(e=0;e<a.length();e++)d.push(this.fixPointArrays(a.get(e),b,c));
return d},a.fixPointArrays=function(a,c,d){var e=[];if(a instanceof Array)for(var g=0;g<a.length;g++){var f=a[g];f instanceof b?c&&d?e.push([f.x,f.y,f.z,f.m]):c?e.push([f.x,f.y,f.z]):d?e.push([f.x,f.y,f.m]):e.push([f.x,f.y]):e.push(f)}else if(a instanceof l)for(g=0;g<a.length();g++)f=a.get(g),f instanceof b?c&&d?e.push([f.x,f.y,f.z,f.m]):c?e.push([f.x,f.y,f.z]):d?e.push([f.x,f.y,f.m]):e.push([f.x,f.y]):e.push(f);return e},a.convertDictionaryToJson=function(b,c){void 0===c&&(c=!1);var d={},e;for(e in b.attributes){var g=
b.attributes[e];g instanceof n&&(g=a.convertDictionaryToJson(g));c?d[e.toLowerCase()]=g:d[e]=g}return d},a.parseAttributesFromDictionary=function(a){var b={},c;for(c in a.attributes){var d=a.attributes[c];if(!e.isSimpleType(d))throw Error("Illegal Argument");b[c]=d}return b},a.fromJson=function(b){var d=null;null!==b.geometry&&void 0!==b.geometry&&(d=c.fromJSON(b.geometry));var g={};if(null!==b.attributes&&void 0!==b.attributes)for(var f in b.attributes){var l=b.attributes[f];if(!(e.isString(l)||
e.isNumber(l)||e.isBoolean(l)||e.isDate(l)))throw Error("Illegal Argument");g[f]=l}return new a(g,d)},a.prototype.domainValueLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;c=e.getDomain(a,this._layer,this,c);if(void 0===b)try{b=this.field(a)}catch(v){return null}return e.getDomainValue(c,b)},a.prototype.domainCodeLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;a=e.getDomain(a,this._layer,this,c);return e.getDomainCode(a,b)},a}()})},"esri/arcade/functions/date":function(){define(["require",
"exports","../../moment","../languageUtils"],function(a,h,m,f){function d(a){return null===a?a:isNaN(a.getTime())?null:a}Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(a,h){a.today=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,0,0);a=new Date;return a.setHours(0,0,0,0),a})};a.now=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,0,0);return new Date})};a.timestamp=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),
a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.toutc=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,1,1);a=f.toDate(d[0]);return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.tolocal=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,1,1);a=f.toDate(d[0]);return null===a?null:m.utc([a.getFullYear(),a.getMonth(),a.getDate(),
a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};a.day=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,1,1);a=f.toDate(d[0]);return null===a?NaN:a.getDate()})};a.month=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,1,1);a=f.toDate(d[0]);return null===a?NaN:a.getMonth()})};a.year=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,1,1);a=f.toDate(d[0]);return null===a?NaN:a.getFullYear()})};a.hour=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,
1,1);a=f.toDate(d[0]);return null===a?NaN:a.getHours()})};a.second=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,1,1);a=f.toDate(d[0]);return null===a?NaN:a.getSeconds()})};a.millisecond=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,1,1);a=f.toDate(d[0]);return null===a?NaN:a.getMilliseconds()})};a.minute=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,1,1);a=f.toDate(d[0]);return null===a?NaN:a.getMinutes()})};a.weekday=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,
1,1);a=f.toDate(d[0]);return null===a?NaN:a.getDay()})};a.date=function(a,c){return h(a,c,function(a,c,e){if(f.pcCheck(e,0,7),3===e.length)return d(new Date(f.toNumber(e[0]),f.toNumber(e[1]),f.toNumber(e[2]),0,0,0,0));if(4===e.length)return d(new Date(f.toNumber(e[0]),f.toNumber(e[1]),f.toNumber(e[2]),f.toNumber(e[3]),0,0,0));if(5===e.length)return d(new Date(f.toNumber(e[0]),f.toNumber(e[1]),f.toNumber(e[2]),f.toNumber(e[3]),f.toNumber(e[4]),0,0));if(6===e.length)return d(new Date(f.toNumber(e[0]),
f.toNumber(e[1]),f.toNumber(e[2]),f.toNumber(e[3]),f.toNumber(e[4]),f.toNumber(e[5]),0));if(7===e.length)return d(new Date(f.toNumber(e[0]),f.toNumber(e[1]),f.toNumber(e[2]),f.toNumber(e[3]),f.toNumber(e[4]),f.toNumber(e[5]),f.toNumber(e[6])));if(2===e.length){a=f.toString(e[1]);if(""===a)return null;a=f.standardiseDateFormat(a);e=m(f.toString(e[0]),a,!0);return!0===e.isValid()?e.toDate():null}if(1===e.length){if(f.isString(e[0])&&""===e[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;
a=f.toNumber(e[0]);return!1===isNaN(a)?d(new Date(a)):f.toDate(e[0])}return 0===e.length?new Date:void 0})};a.datediff=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,2,3);a=f.toDateM(d[0]);c=f.toDateM(d[1]);if(null===a||null===c)return NaN;switch(f.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(c,"days",!0);case "months":case "month":return a.diff(c,"months",!0);case "minutes":case "minute":case "m":return"M"===d[2]?a.diff(c,"months",!0):a.diff(c,"minutes",!0);
case "seconds":case "second":case "s":return a.diff(c,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(c);case "hours":case "hour":case "h":return a.diff(c,"hours",!0);case "years":case "year":case "y":return a.diff(c,"years",!0);default:return a.diff(c)}})};a.dateadd=function(a,c){return h(a,c,function(a,c,d){f.pcCheck(d,2,3);a=f.toDateM(d[0]);if(null===a)return null;c="milliseconds";switch(f.toString(d[2]).toLowerCase()){case "days":case "day":case "d":c="days";break;
case "months":case "month":c="months";break;case "minutes":case "minute":case "m":c="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":c="seconds";break;case "milliseconds":case "millisecond":case "ms":c="milliseconds";break;case "hours":case "hour":case "h":c="hours";break;case "years":case "year":case "y":c="years"}return a.add(f.toNumber(d[1]),c),a.toDate()})}}})},"esri/arcade/functions/string":function(){define(["require","exports","../languageUtils","../Feature"],function(a,
h,m,f){Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(a,c){a.trim=function(a,d){return c(a,d,function(a,b,c){return m.pcCheck(c,1,1),m.toString(c[0]).trim()})};a.upper=function(a,d){return c(a,d,function(a,b,c){return m.pcCheck(c,1,1),m.toString(c[0]).toUpperCase()})};a.proper=function(a,d){return c(a,d,function(a,b,c){m.pcCheck(c,1,2);a=1;2===c.length&&"firstword"===m.toString(c[1]).toLowerCase()&&(a=2);b=/\s/;c=m.toString(c[0]);for(var d="",e=!0,g=0;g<c.length;g++){var f=
c[g];b.test(f)?1===a&&(e=!0):f.toUpperCase()!==f.toLowerCase()&&(e?(f=f.toUpperCase(),e=!1):f=f.toLowerCase());d+=f}return d})};a.lower=function(a,d){return c(a,d,function(a,b,c){return m.pcCheck(c,1,1),m.toString(c[0]).toLowerCase()})};a.guid=function(a,d){return c(a,d,function(a,b,c){if(m.pcCheck(c,0,1),0<c.length)switch(m.toString(c[0]).toLowerCase()){case "digits":return m.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return m.generateUUID();
case "digits-hyphen-parentheses":return"("+m.generateUUID()+")"}return"{"+m.generateUUID()+"}"})};a.console=function(a,d){return c(a,d,function(c,b,d){return 0===d.length||(1===d.length?a.console(m.toString(d[0])):a.console(m.toString(d))),m.voidOperation})};a.mid=function(a,d){return c(a,d,function(a,b,c){m.pcCheck(c,2,3);a=m.toNumber(c[1]);if(isNaN(a))return"";if(0>a&&(a=0),2===c.length)return m.toString(c[0]).substr(a);b=m.toNumber(c[2]);return isNaN(b)?"":(0>b&&(b=0),m.toString(c[0]).substr(a,
b))})};a.find=function(a,d){return c(a,d,function(a,b,c){m.pcCheck(c,2,3);a=0;if(2<c.length){if(a=m.toNumber(m.defaultUndefined(c[2],0)),isNaN(a))return-1;0>a&&(a=0)}return m.toString(c[1]).indexOf(m.toString(c[0]),a)})};a.left=function(a,d){return c(a,d,function(a,b,c){m.pcCheck(c,2,2);a=m.toNumber(c[1]);return isNaN(a)?"":(0>a&&(a=0),m.toString(c[0]).substr(0,a))})};a.right=function(a,d){return c(a,d,function(a,b,c){m.pcCheck(c,2,2);a=m.toNumber(c[1]);return isNaN(a)?"":(0>a&&(a=0),m.toString(c[0]).substr(-1*
a,a))})};a.split=function(a,d){return c(a,d,function(a,b,c){m.pcCheck(c,2,4);var d;a=m.toNumber(m.defaultUndefined(c[2],-1));b=m.toBoolean(m.defaultUndefined(c[3],!1));if(-1===a||null===a||!0===b?d=m.toString(c[0]).split(m.toString(c[1])):(isNaN(a)&&(a=-1),-1>a&&(a=-1),d=m.toString(c[0]).split(m.toString(c[1]),a)),!1===b)return d;c=[];for(b=0;b<d.length&&!(-1!==a&&c.length>=a);b++)""!==d[b]&&void 0!==d[b]&&c.push(d[b]);return c})};a.text=function(a,d){return c(a,d,function(a,b,c){return m.pcCheck(c,
1,2),m.toStringExplicit(c[0],c[1])})};a.concatenate=function(a,d){return c(a,d,function(a,b,c){a=[];if(1>c.length)return"";if(m.isArray(c[0])){b=m.defaultUndefined(c[2],"");for(var d=0;d<c[0].length;d++)a[d]=m.toStringExplicit(c[0][d],b);return 1<c.length?a.join(c[1]):a.join("")}if(m.isImmutableArray(c[0])){b=m.defaultUndefined(c[2],"");for(d=0;d<c[0].length();d++)a[d]=m.toStringExplicit(c[0].get(d),b);return 1<c.length?a.join(c[1]):a.join("")}for(d=0;d<c.length;d++)a[d]=m.toStringExplicit(c[d]);
return a.join("")})};a.reverse=function(a,d){return c(a,d,function(a,b,c){if(m.pcCheck(c,1,1),m.isArray(c[0]))return a=c[0].slice(0),a.reverse(),a;if(m.isImmutableArray(c[0]))return a=c[0].toArray().slice(0),a.reverse(),a;throw Error("Invalid Parameter");})};a.replace=function(a,d){return c(a,d,function(a,b,c){m.pcCheck(c,3,4);a=m.toString(c[0]);b=m.toString(c[1]);var d=m.toString(c[2]);return(4===c.length?m.toBoolean(c[3]):1)?m.multiReplace(a,b,d):a.replace(b,d)})};a.domainname=function(a,d){return c(a,
d,function(a,b,c){if(m.pcCheck(c,2,4),c[0]instanceof f)return c[0].domainValueLookup(m.toString(c[1]),c[2],void 0===c[3]?void 0:m.toNumber(c[3]));throw Error("Invalid Parameter");})};a.domaincode=function(a,d){return c(a,d,function(a,b,c){if(m.pcCheck(c,3,4),c[0]instanceof f)return c[0].domainCodeLookup(m.toString(c[1]),c[2],void 0===c[3]?void 0:m.toNumber(c[3]));throw Error("Invalid Parameter");})}}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","dojo/number"],
function(a,h,m,f){function d(a,d,e){return"undefined"==typeof e||0===+e?Math[a](d):(d=+d,e=+e,isNaN(d)||"number"!=typeof e||0!==e%1?NaN:(d=d.toString().split("e"),d=Math[a](+(d[0]+"e"+(d[1]?+d[1]-e:-e))),d=d.toString().split("e"),+(d[0]+"e"+(d[1]?+d[1]+e:e))))}Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(a,h){a.number=function(a,c){return h(a,c,function(a,c,d){m.pcCheck(d,1,2);a=d[0];return m.isNumber(a)?a:null===a?0:m.isDate(a)||m.isBoolean(a)?Number(a):m.isArray(a)?
NaN:""===a||void 0===a?Number(a):m.isString(a)?void 0!==d[1]?(d=m.multiReplace(d[1],"\u2030",""),d=m.multiReplace(d,"\u00a4",""),f.parse(a,{pattern:d})):Number(a.trim()):Number(a)})};a.abs=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,1,1),Math.abs(m.toNumber(d[0]))})};a.acos=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,1,1),Math.acos(m.toNumber(d[0]))})};a.asin=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,1,1),Math.asin(m.toNumber(d[0]))})};a.atan=
function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,1,1),Math.atan(m.toNumber(d[0]))})};a.atan2=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,2,2),Math.atan2(m.toNumber(d[0]),m.toNumber(d[1]))})};a.ceil=function(a,c){return h(a,c,function(a,c,e){return(m.pcCheck(e,1,2),2===e.length)?(a=m.toNumber(e[1]),isNaN(a)&&(a=0),d("ceil",m.toNumber(e[0]),-1*a)):Math.ceil(m.toNumber(e[0]))})};a.round=function(a,c){return h(a,c,function(a,c,e){return(m.pcCheck(e,1,2),2===e.length)?(a=
m.toNumber(e[1]),isNaN(a)&&(a=0),d("round",m.toNumber(e[0]),-1*a)):Math.round(m.toNumber(e[0]))})};a.floor=function(a,c){return h(a,c,function(a,c,e){return(m.pcCheck(e,1,2),2===e.length)?(a=m.toNumber(e[1]),isNaN(a)&&(a=0),d("floor",m.toNumber(e[0]),-1*a)):Math.floor(m.toNumber(e[0]))})};a.cos=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,1,1),Math.cos(m.toNumber(d[0]))})};a.isnan=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,1,1),"number"==typeof d[0]&&isNaN(d[0])})};
a.exp=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,1,1),Math.exp(m.toNumber(d[0]))})};a.log=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,1,1),Math.log(m.toNumber(d[0]))})};a.pow=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,2,2),Math.pow(m.toNumber(d[0]),m.toNumber(d[1]))})};a.random=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,0,0),Math.random()})};a.sin=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,1,1),Math.sin(m.toNumber(d[0]))})};
a.sqrt=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,1,1),Math.sqrt(m.toNumber(d[0]))})};a.tan=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,1,1),Math.tan(m.toNumber(d[0]))})};a.defaultvalue=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,2,2),null===d[0]?d[1]:""===d[0]?d[1]:void 0===d[0]?d[1]:d[0]})};a.isempty=function(a,c){return h(a,c,function(a,c,d){return m.pcCheck(d,1,1),null===d[0]?!0:""===d[0]?!0:void 0===d[0]?!0:!1})};a["boolean"]=function(a,
c){return h(a,c,function(a,c,d){m.pcCheck(d,1,1);return m.toBoolean(d[0])})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../../geometry/Geometry ../../geometry/Polygon ../../geometry/Polyline ../../geometry/Point ../../geometry/Extent ../../geometry/Multipoint ../../geometry/support/jsonUtils ../languageUtils ../Dictionary ../Feature".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q){Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(a,h){a.polygon=
function(a,c){return h(a,c,function(c,d,e){b.pcCheck(e,1,1);c=null;if(e[0]instanceof g){if(c=b.fixSpatialReference(q.parseGeometryFromDictionary(e[0]),a.spatialReference),0==c instanceof f)throw Error("Illegal Parameter");}else c=e[0]instanceof f?l.fromJSON(e[0].toJSON()):b.fixSpatialReference(new f(JSON.parse(e[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return b.fixNullGeometry(c)})};a.polyline=function(a,c){return h(a,c,function(c,e,f){b.pcCheck(f,1,1);c=null;if(f[0]instanceof g){if(c=b.fixSpatialReference(q.parseGeometryFromDictionary(f[0]),a.spatialReference),0==c instanceof d)throw Error("Illegal Parameter");}else c=f[0]instanceof d?l.fromJSON(f[0].toJSON()):b.fixSpatialReference(new d(JSON.parse(f[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return b.fixNullGeometry(c)})};a.point=function(a,d){return h(a,d,function(d,e,f){b.pcCheck(f,1,1);d=null;if(f[0]instanceof g){if(d=b.fixSpatialReference(q.parseGeometryFromDictionary(f[0]),a.spatialReference),0==d instanceof c)throw Error("Illegal Parameter");}else d=f[0]instanceof c?l.fromJSON(f[0].toJSON()):b.fixSpatialReference(new c(JSON.parse(f[0])),a.spatialReference);if(null!==d&&!1===d.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return b.fixNullGeometry(d)})};a.multipoint=function(a,c){return h(a,c,function(c,d,f){b.pcCheck(f,1,1);c=null;if(f[0]instanceof g){if(c=b.fixSpatialReference(q.parseGeometryFromDictionary(f[0]),a.spatialReference),0==c instanceof e)throw Error("Illegal Parameter");}else c=f[0]instanceof e?l.fromJSON(f[0].toJSON()):b.fixSpatialReference(new e(JSON.parse(f[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return b.fixNullGeometry(c)})};a.extent=function(a,m){return h(a,m,function(h,m,k){b.pcCheck(k,1,1);h=null;k[0]instanceof g?h=b.fixSpatialReference(q.parseGeometryFromDictionary(k[0]),a.spatialReference):k[0]instanceof c?(h={xmin:k[0].x,ymin:k[0].y,xmax:k[0].x,ymax:k[0].y,spatialReference:k[0].spatialReference.toJSON()},k[0].hasZ?(h.zmin=k[0].z,h.zmax=k[0].z):k[0].hasM&&(h.mmin=k[0].m,h.mmax=k[0].m),h=l.fromJSON(h)):h=k[0]instanceof f?l.fromJSON(k[0].extent.toJSON()):k[0]instanceof d?l.fromJSON(k[0].extent.toJSON()):
k[0]instanceof e?l.fromJSON(k[0].extent.toJSON()):k[0]instanceof n?l.fromJSON(k[0].toJSON()):b.fixSpatialReference(new n(JSON.parse(k[0])),a.spatialReference);if(null!==h&&!1===h.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return b.fixNullGeometry(h)})};a.geometry=function(a,c){return h(a,c,function(c,d,e){b.pcCheck(e,1,1);c=null;if(c=e[0]instanceof q?b.fixSpatialReference(e[0].geometry,
a.spatialReference):e[0]instanceof g?b.fixSpatialReference(q.parseGeometryFromDictionary(e[0]),a.spatialReference):b.fixSpatialReference(l.fromJSON(JSON.parse(e[0])),a.spatialReference),null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return b.fixNullGeometry(c)})};a.feature=function(a,c){return h(a,c,function(c,d,e){if(0===e.length)throw Error("Missing Parameters");c=null;if(1===
e.length)if(b.isString(e[0]))c=q.fromJson(JSON.parse(e[0]));else if(e[0]instanceof q)c=new q(e[0]);else if(e[0]instanceof m)c=new q(null,e[0]);else{if(!(e[0]instanceof g))throw Error("Illegal Argument");c=e[0].hasField("geometry")?e[0].field("geometry"):null;d=e[0].hasField("attributes")?e[0].field("attributes"):null;null!==c&&c instanceof g&&(c=q.parseGeometryFromDictionary(c));null!==d&&(d=q.parseAttributesFromDictionary(d));c=new q(d,c)}else{if(2===e.length){d=c=null;if(null!==e[0])if(e[0]instanceof
m)c=e[0];else{if(!(c instanceof g))throw Error("Illegal Argument");c=q.parseGeometryFromDictionary(e[0])}if(null!==e[1]){if(!(e[1]instanceof g))throw Error("Illegal Argument");d=q.parseAttributesFromDictionary(e[1])}}else{c=null;d={};if(null!==e[0])if(e[0]instanceof m)c=e[0];else{if(!(c instanceof g))throw Error("Illegal Argument");c=q.parseGeometryFromDictionary(e[0])}for(var f=1;f<e.length;f+=2){var k=b.toString(e[f]),l=e[f+1];if(!(null===l||void 0===l||b.isString(l)||isNaN(l)||b.isDate(l)||b.isNumber(l)||
b.isBoolean(l)))throw Error("Illegal Argument");if(b.isFunctionParameter(l)||!1===b.isSimpleType(l))throw Error("Illegal Argument");l===b.voidOperation?d[k]=null:d[k]=l}}c=new q(d,c)}return c.geometry=b.fixSpatialReference(c.geometry,a.spatialReference),c.immutable=!1,c})};a.dictionary=function(a,c){return h(a,c,function(a,c,d){if(0===d.length)throw Error("Missing Parameters");if(0!==d.length%2)throw Error("Missing Parameters");a={};for(c=0;c<d.length;c+=2){var e=b.toString(d[c]),f=d[c+1];if(!(null===
f||void 0===f||b.isString(f)||isNaN(f)||b.isDate(f)||b.isNumber(f)||b.isBoolean(f)||b.isArray(f)||b.isImmutableArray(f)))throw Error("Illegal Argument");if(b.isFunctionParameter(f))throw Error("Illegal Argument");f===b.voidOperation?a[e]=null:a[e]=f}d=new g(a);return d.immutable=!1,d})};a.haskey=function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,2,2);a=b.toString(d[1]);if(d[0]instanceof q||d[0]instanceof g)return d[0].hasField(a);throw Error("Illegal Argument");})};a.indexof=function(a,c){return h(a,
c,function(a,c,d){b.pcCheck(d,2,2);a=d[1];if(b.isArray(d[0])){for(c=0;c<d[0].length;c++)if(b.equalityTest(a,d[0][c]))return c;return-1}if(b.isImmutableArray(d[0])){var e=d[0].length();for(c=0;e>c;c++)if(b.equalityTest(a,d[0].get(c)))return c;return-1}throw Error("Illegal Argument");})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(a,h,m,f){function d(a,d,e,l){if(1===l.length){if(m.isArray(l[0]))return f.calculateStat(a,l[0],-1);
if(m.isImmutableArray(l[0]))return f.calculateStat(a,l[0].toArray(),-1)}return f.calculateStat(a,l,-1)}Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(a,f){a.stdev=function(a,c){return f(a,c,function(a,c,e){return d("stdev",a,c,e)})};a.variance=function(a,c){return f(a,c,function(a,c,e){return d("variance",a,c,e)})};a.average=function(a,c){return f(a,c,function(a,c,e){return d("mean",a,c,e)})};a.mean=function(a,c){return f(a,c,function(a,c,e){return d("mean",a,c,e)})};
a.sum=function(a,c){return f(a,c,function(a,c,e){return d("sum",a,c,e)})};a.min=function(a,c){return f(a,c,function(a,c,e){return d("min",a,c,e)})};a.max=function(a,c){return f(a,c,function(a,c,e){return d("max",a,c,e)})};a.distinct=function(a,c){return f(a,c,function(a,c,e){return d("distinct",a,c,e)})};a.count=function(a,c){return f(a,c,function(a,c,d){if(m.pcCheck(d,1,1),m.isArray(d[0])||m.isString(d[0]))return d[0].length;if(m.isImmutableArray(d[0]))return d[0].length();throw Error("Invalid Parameters for Count");
})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(a,h,m){function f(a){for(var c=0,d=0;d<a.length;d++)c+=a[d];return c/a.length}function d(a){for(var c=f(a),d=0,l=0;l<a.length;l++)d+=Math.pow(c-a[l],2);return d/a.length}Object.defineProperty(h,"__esModule",{value:!0});h.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";
case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};h.calculateStat=function(a,h,e){switch(void 0===e&&(e=1E3),a.toLowerCase()){case "distinct":a:{a=e;e=[];for(var c={},b=[],g=0;g<h.length;g++){if(void 0!==h[g]&&null!==h[g]&&h[g]!==m.voidOperation){var n=h[g];if(m.isNumber(n)||m.isString(n))void 0===c[n]&&(e.push(n),c[n]=1);else{for(var t=!1,w=0;w<b.length;w++)!0===m.equalityTest(b[w],n)&&(t=!0);!1===t&&(b.push(n),e.push(n))}}if(e.length>=
a&&-1!==a){h=e;break a}}h=e}return h;case "avg":case "mean":return f(m.toNumberArray(h));case "min":return Math.min.apply(Math,m.toNumberArray(h));case "sum":h=m.toNumberArray(h);for(e=a=0;e<h.length;e++)a+=h[e];return a;case "max":return Math.max.apply(Math,m.toNumberArray(h));case "stdev":case "stddev":return Math.sqrt(d(m.toNumberArray(h)));case "var":case "variance":return d(m.toNumberArray(h));case "count":return h.length}return 0}})},"esri/arcade/parser":function(){define(["require","exports",
"./treeAnalysis","./lib/esprima"],function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});h.parseScript=function(a){a=f.parse("function _() { "+a+"\n}");if(null===a.body||void 0===a.body)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if("BlockStatement"!==a.body[0].body.type)throw Error("Invalid formula content.");var c=m.validateLanguage(a);if(""!==c)throw Error(c);return a};h.scriptCheck=
function(a,c,h,e){var d=[];try{var b=f.parse("function _() { "+a+"\n}",{tolerant:!0,loc:!0}),g=b.errors;if(0<g.length)for(var n=0;n<g.length;n++)d.push({line:g[n].lineNumber,character:g[n].column,reason:g[n].description});var t=m.checkScript(b,c,h,e);for(c=0;c<t.length;c++)d.push(t[c])}catch(w){try{"Unexpected token }"===w.description&&(w.index=("function _() { "+a+"\n}").length-1)?d.push({line:w.lineNumber,character:w.column,reason:"Unexpected end of script"}):d.push({line:w.lineNumber,character:w.column,
reason:w.description})}catch(v){}}return d};h.extractFieldLiterals=function(a,c){return void 0===c&&(c=!1),m.findFieldLiterals(a,c)};h.validateScript=function(a,c,f){return void 0===f&&(f="full"),m.validateScript(a,c,f)};h.referencesMember=function(a,c){return m.referencesMember(a,c)};h.referencesFunction=function(a,c){return m.referencesFunction(a,c)}})},"esri/arcade/lib/esprima":function(){!function(a,h){"function"==typeof define&&define.amd?define(["exports"],h):h("undefined"!=typeof exports?exports:
a.esprima={})}(this,function(a){function h(a,b){if(!a)throw Error("ASSERT: "+b);}function m(a){return 48<=a&&57>=a}function f(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function d(a){return 0<="01234567".indexOf(a)}function c(a){return 10===a||13===a||8232===a||8233===a}function n(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&cb.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function e(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||
128<=a&&cb.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function l(a){switch(a=a.toLowerCase(),a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function b(a,b,c,d,e){var g;h("number"==typeof c,"Comment must have valid position");ea.lastCommentStart>=c||(ea.lastCommentStart=c,g={type:a,value:b},O.range&&(g.range=[c,
d]),O.loc&&(g.loc=e),O.comments.push(g),O.attachComment&&(O.leadingComments.push(g),O.trailingComments.push(g)))}function g(a){var d,e,g,f;d=E-a;for(e={start:{line:ga,column:E-ja-a}};ma>E;)if(g=R.charCodeAt(E),++E,c(g))return O.comments&&(f=R.slice(d+a,E-1),e.end={line:ga,column:E-ja-1},b("Line",f,d,E-1,e)),13===g&&10===R.charCodeAt(E)&&++E,++ga,void(ja=E);O.comments&&(f=R.slice(d+a,E),e.end={line:ga,column:E-ja},b("Line",f,d,E,e))}function q(){var a,d;for(d=0===E;ma>E;)if(a=R.charCodeAt(E),32===
a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++E;else if(c(a))++E,13===a&&10===R.charCodeAt(E)&&++E,++ga,ja=E,d=!0;else if(47===a)if(a=R.charCodeAt(E+1),47===a)++E,++E,g(2),d=!0;else{if(42!==a)break;++E;++E;a:{var e=void 0,f=void 0,k=void 0,l=void 0;for(O.comments&&(e=E-2,f={start:{line:ga,column:E-ja-2}});ma>E;)if(k=R.charCodeAt(E),c(k))13===k&&10===R.charCodeAt(E+1)&&++E,++ga,++E,ja=E,E>=ma&&N();
else{if(42===k&&47===R.charCodeAt(E+1)){++E;++E;O.comments&&(l=R.slice(e+2,E-2),f.end={line:ga,column:E-ja},b("Block",l,e,E,f));break a}++E}N()}}else if(d&&45===a){if(45!==R.charCodeAt(E+1)||62!==R.charCodeAt(E+2))break;E+=3;g(3)}else{if(60!==a)break;if("!--"!==R.slice(E+1,E+4))break;++E;++E;++E;++E;g(4)}}function t(a){var b,c,d=0;b="u"===a?4:2;for(a=0;b>a;++a){if(!(ma>E&&f(R[E])))return"";c=R[E++];d=16*d+"0123456789abcdef".indexOf(c.toLowerCase())}return String.fromCharCode(d)}function w(){var a,
b;a=R.charCodeAt(E++);b=String.fromCharCode(a);for(92===a&&(117!==R.charCodeAt(E)&&N(),++E,a=t("u"),a&&"\\"!==a&&n(a.charCodeAt(0))||N(),b=a);ma>E&&(a=R.charCodeAt(E),e(a));)++E,b+=String.fromCharCode(a),92===a&&(b=b.substr(0,b.length-1),117!==R.charCodeAt(E)&&N(),++E,a=t("u"),a&&"\\"!==a&&e(a.charCodeAt(0))||N(),b+=a);return b}function v(){var a,b,c,d,e=E,g=R.charCodeAt(E),f=R[E];switch(g){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++E,
O.tokenize&&(40===g?O.openParenToken=O.tokens.length:123===g&&(O.openCurlyToken=O.tokens.length)),{type:T.Punctuator,value:String.fromCharCode(g),lineNumber:ga,lineStart:ja,start:e,end:E};default:if(a=R.charCodeAt(E+1),61===a)switch(g){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return E+=2,{type:T.Punctuator,value:String.fromCharCode(g)+String.fromCharCode(a),lineNumber:ga,lineStart:ja,start:e,end:E};case 33:case 61:return E+=2,61===R.charCodeAt(E)&&++E,{type:T.Punctuator,
value:R.slice(e,E),lineNumber:ga,lineStart:ja,start:e,end:E}}}return d=R.substr(E,4),"\x3e\x3e\x3e\x3d"===d?(E+=4,{type:T.Punctuator,value:d,lineNumber:ga,lineStart:ja,start:e,end:E}):(c=d.substr(0,3),"\x3e\x3e\x3e"===c||"\x3c\x3c\x3d"===c||"\x3e\x3e\x3d"===c?(E+=3,{type:T.Punctuator,value:c,lineNumber:ga,lineStart:ja,start:e,end:E}):(b=c.substr(0,2),f===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(f)||"\x3d\x3e"===b?(E+=2,{type:T.Punctuator,value:b,lineNumber:ga,lineStart:ja,start:e,end:E}):0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(f)?
(++E,{type:T.Punctuator,value:f,lineNumber:ga,lineStart:ja,start:e,end:E}):void N()))}function r(){var a,b,c;if(c=R[E],h(m(c.charCodeAt(0))||"."===c,"Numeric literal must start with a decimal digit or a decimal point"),b=E,a="","."!==c){if(a=R[E++],c=R[E],"0"===a){if("x"===c||"X"===c){++E;for(var e="";ma>E&&f(R[E]);)e+=R[E++];return 0===e.length&&N(),n(R.charCodeAt(E))&&N(),{type:T.NumericLiteral,value:parseInt("0x"+e,16),lineNumber:ga,lineStart:ja,start:b,end:E}}if("b"===c||"B"===c){++E;for(a="";ma>
E&&(e=R[E],"0"===e||"1"===e);)a+=R[E++];return 0===a.length&&N(),ma>E&&(e=R.charCodeAt(E),(n(e)||m(e))&&N()),{type:T.NumericLiteral,value:parseInt(a,2),lineNumber:ga,lineStart:ja,start:b,end:E}}if("o"===c||"O"===c||d(c)){var g,k;for(d(c)?(k=!0,g="0"+R[E++]):(k=!1,++E,g="");ma>E&&d(R[E]);)g+=R[E++];return k||0!==g.length||N(),(n(R.charCodeAt(E))||m(R.charCodeAt(E)))&&N(),{type:T.NumericLiteral,value:parseInt(g,8),octal:k,lineNumber:ga,lineStart:ja,start:b,end:E}}c&&m(c.charCodeAt(0))&&N()}for(;m(R.charCodeAt(E));)a+=
R[E++];c=R[E]}if("."===c){for(a+=R[E++];m(R.charCodeAt(E));)a+=R[E++];c=R[E]}if("e"===c||"E"===c)if(a+=R[E++],c=R[E],("+"===c||"-"===c)&&(a+=R[E++]),m(R.charCodeAt(E)))for(;m(R.charCodeAt(E));)a+=R[E++];else N();return n(R.charCodeAt(E))&&N(),{type:T.NumericLiteral,value:parseFloat(a),lineNumber:ga,lineStart:ja,start:b,end:E}}function p(){aa=null;q();Q("Regular Expression language structures not supported")}function u(){q();p()}function k(){var a,b;if(a=O.tokens[O.tokens.length-1],!a)return u();if("Punctuator"===
a.type){if("]"===a.value)return v();if(")"===a.value)return b=O.tokens[O.openParenToken-1],!b||"Keyword"!==b.type||"if"!==b.value.toLowerCase()&&"while"!==b.value.toLowerCase()&&"for"!==b.value.toLowerCase()&&"with"!==b.value.toLowerCase()?v():u();if("}"===a.value){if(O.tokens[O.openCurlyToken-3]&&"Keyword"===O.tokens[O.openCurlyToken-3].type){if(b=O.tokens[O.openCurlyToken-4],!b)return v()}else{if(!O.tokens[O.openCurlyToken-4]||"Keyword"!==O.tokens[O.openCurlyToken-4].type)return v();if(b=O.tokens[O.openCurlyToken-
5],!b)return u()}return 0<=sa.indexOf(b.value)?v():u()}return u()}return"Keyword"===a.type&&"this"!==a.value?u():v()}function x(){var a;q();var b;if(E>=ma)b={type:T.EOF,lineNumber:ga,lineStart:ja,start:E,end:E};else if(a=R.charCodeAt(E),n(a)){var g,p;b=E;var u;if(92===R.charCodeAt(E))u=w();else a:{var x;for(u=E++;ma>E;){if(x=R.charCodeAt(E),92===x){u=(E=u,w());break a}if(!e(x))break;++E}u=R.slice(u,E)}b=(g=u,p=1===g.length?T.Identifier:l(g)?T.Keyword:"null"===g.toLowerCase()?T.NullLiteral:"true"===
g.toLowerCase()||"false"===g.toLowerCase()?T.BooleanLiteral:T.Identifier,{type:p,value:g,lineNumber:ga,lineStart:ja,start:b,end:E})}else if(40===a||41===a||59===a)b=v();else if(39===a||34===a){var Z,y,A="",z=!1;x=ga;a=ja;g=R[E];h("'"===g||'"'===g,"String literal must starts with a quote");p=E;for(++E;ma>E;){if(b=R[E++],b===g){g="";break}if("\\"===b)if(b=R[E++],b&&c(b.charCodeAt(0)))++ga,"\r"===b&&"\n"===R[E]&&++E,ja=E;else switch(b){case "u":case "x":if("{"===R[E]){++E;Z=A;var D,B=D=void 0,A=y=void 0;
D=R[E];B=0;for("}"===D&&N();ma>E&&(D=R[E++],f(D));)B=16*B+"0123456789abcdef".indexOf(D.toLowerCase());D=((1114111<B||"}"!==D)&&N(),65535>=B?String.fromCharCode(B):(y=(B-65536>>10)+55296,A=(B-65536&1023)+56320,String.fromCharCode(y,A)));A=Z+D}else y=E,(Z=t(b))?A+=Z:(E=y,A+=b);break;case "n":A+="\n";break;case "r":A+="\r";break;case "t":A+="\t";break;case "b":A+="\b";break;case "f":A+="\f";break;case "v":A+="\x0B";break;default:d(b)?(u="01234567".indexOf(b),0!==u&&(z=!0),ma>E&&d(R[E])&&(z=!0,u=8*u+
"01234567".indexOf(R[E++]),0<="0123".indexOf(b)&&ma>E&&d(R[E])&&(u=8*u+"01234567".indexOf(R[E++]))),A+=String.fromCharCode(u)):A+=b}else{if(c(b.charCodeAt(0)))break;A+=b}}b=(""!==g&&N(),{type:T.StringLiteral,value:A,octal:z,startLineNumber:x,startLineStart:a,lineNumber:ga,lineStart:ja,start:p,end:E})}else b=46===a?m(R.charCodeAt(E+1))?r():v():m(a)?r():O.tokenize&&47===a?k():v();return b}function B(){var a,b,c,d;return q(),a={start:{line:ga,column:E-ja}},b=x(),a.end={line:ga,column:E-ja},b.type!==
T.EOF&&(c=R.slice(b.start,b.end),d={type:Aa[b.type],value:c,range:[b.start,b.end],loc:a},b.regex&&(d.regex={pattern:b.regex.pattern,flags:b.regex.flags}),O.tokens.push(d)),b}function y(){var a;return a=aa,E=a.end,ga=a.lineNumber,ja=a.lineStart,aa="undefined"!=typeof O.tokens?B():x(),E=a.end,ga=a.lineNumber,ja=a.lineStart,a}function z(){var a,b,c;a=E;b=ga;c=ja;aa="undefined"!=typeof O.tokens?B():x();E=a;ga=b;ja=c}function A(){this.line=ga;this.column=E-ja}function D(){this.start=new A;this.end=null}
function F(a){a.type===T.StringLiteral?this.start={line:a.startLineNumber,column:a.start-a.startLineStart}:this.start={line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function C(){E=aa.start;aa.type===T.StringLiteral?(ga=aa.startLineNumber,ja=aa.startLineStart):(ga=aa.lineNumber,ja=aa.lineStart);O.range&&(this.range=[E,0]);O.loc&&(this.loc=new D)}function H(a){O.range&&(this.range=[a.start,0]);O.loc&&(this.loc=new F(a))}function I(){var a,b,c,d;return a=E,b=ga,c=ja,q(),d=ga!==b,E=a,ga=
b,ja=c,d}function M(a,b,c){var d=Error("Line "+a+": "+c);return d.index=b,d.lineNumber=a,d.column=b-ja+1,d.description=c,d}function Q(a){var b,c;throw b=Array.prototype.slice.call(arguments,1),c=a.replace(/%(\d)/g,function(a,c){return h(c<b.length,"Message reference must be in range"),b[c]}),M(ga,E,c);}function K(a){var b,c,d;if(b=Array.prototype.slice.call(arguments,1),c=a.replace(/%(\d)/g,function(a,c){return h(c<b.length,"Message reference must be in range"),b[c]}),d=M(ga,E,c),!O.errors)throw d;
O.errors.push(d)}function G(a,b){var c=da.UnexpectedToken;a&&(c=b?b:a.type===T.EOF?da.UnexpectedEOS:a.type===T.Identifier?da.UnexpectedIdentifier:a.type===T.NumericLiteral?da.UnexpectedNumber:a.type===T.StringLiteral?da.UnexpectedString:da.UnexpectedToken);return c=c.replace("%0",a?a.value:"ILLEGAL"),a&&"number"==typeof a.lineNumber?M(a.lineNumber,a.start,c):M(ga,E,c)}function N(a,b){throw G(a,b);}function S(a,b){a=G(a,b);if(!O.errors)throw a;O.errors.push(a)}function J(a){var b=y();b.type===T.Punctuator&&
b.value===a||N(b)}function W(){var a;O.errors?(a=aa,a.type===T.Punctuator&&","===a.value?y():a.type===T.Punctuator&&";"===a.value?(y(),S(a)):S(a,da.UnexpectedToken)):J(",")}function L(a){var b=y();b.type===T.Keyword&&b.value.toLowerCase()===a.toLowerCase()||N(b)}function P(a){return aa.type===T.Punctuator&&aa.value===a}function Y(a){return aa.type===T.Keyword&&aa.value.toLowerCase()===a.toLowerCase()}function ba(){var a;return 59===R.charCodeAt(E)||P(";")?void y():(a=ga,q(),void(ga===a&&(aa.type===
T.EOF||P("}")||N(aa))))}function V(a){return a.type===ha.Identifier||a.type===ha.MemberExpression}function X(a,b){var c,d;b=new C;return c=la,d=Na(),la=c,b.finishFunctionExpression(null,a,[],d)}function ca(){var a,b,c;return a=la,la=!0,b=Ra(),c=X(b.params),la=a,c}function Z(){var a,b=new C;return a=y(),a.type===T.StringLiteral||a.type===T.NumericLiteral?(la&&a.octal&&S(a,da.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function ia(){var a,b,c,d,e,g=new C;if(a=aa,a.type===T.Identifier)return c=
Z(),"get"!==a.value||P(":")||P("(")?"set"!==a.value||P(":")||P("(")?P(":")?(y(),d=va(),g.finishProperty("init",c,d,!1,!1)):P("(")?(d=ca(),g.finishProperty("init",c,d,!0,!1)):(d=c,g.finishProperty("init",c,d,!1,!0)):(b=Z(),J("("),a=aa,a.type!==T.Identifier?(J(")"),S(a),d=X([])):(e=[Ja()],J(")"),d=X(e,a)),g.finishProperty("set",b,d,!1,!1)):(b=Z(),J("("),J(")"),d=X([]),g.finishProperty("get",b,d,!1,!1));if(a.type===T.EOF||a.type===T.Punctuator)N(a);else{if(b=Z(),P(":"))return y(),d=va(),g.finishProperty("init",
b,d,!1,!1);if(P("("))return d=ca(),g.finishProperty("init",b,d,!0,!1);N(y())}}function fa(a){var b,c,d=[],e={},g=String,f=new C;for(!0!==a&&J("{");!P("}");)a=ia(),b=a.key.type===ha.Identifier?a.key.name:g(a.key.value),c="init"===a.kind?Ka.Data:"get"===a.kind?Ka.Get:Ka.Set,b="$"+b,Object.prototype.hasOwnProperty.call(e,b)?(e[b]===Ka.Data?la&&c===Ka.Data?K(da.StrictDuplicateProperty):c!==Ka.Data&&K(da.AccessorDataProperty):c===Ka.Data?K(da.AccessorDataProperty):e[b]&c&&K(da.AccessorGetSet),e[b]|=c):
e[b]=c,d.push(a),P("}")||W();return J("}"),f.finishObjectExpression(d)}function ka(){var a,b,c,d;if(P("("))return J("("),P(")")?(y(),Ma.ArrowParameterPlaceHolder):(++ea.parenthesisCount,d=wa(),J(")"),d);if(P("[")){var e=[],g=new C;for(J("[");!P("]");)P(",")?(y(),e.push(null)):(e.push(va()),P("]")||J(","));return y(),g.finishArrayExpression(e)}if(P("{"))return fa();if(a=aa.type,d=new C,a===T.Identifier)c=d.finishIdentifier(y().value);else if(a===T.StringLiteral||a===T.NumericLiteral)la&&aa.octal&&
S(aa,da.StrictOctalLiteral),c=d.finishLiteral(y());else if(a===T.Keyword){if(Y("function")){var f,k,l,h;a=null;b=[];c=[];d=new C;return L("function"),P("(")||(a=Ja()),k=Ra(g),b=k.params,c=k.defaults,e=k.stricted,g=k.firstRestricted,k.message&&(f=k.message),h=la,l=Na(),la&&g&&N(g,f),la&&e&&S(e,f),la=h,d.finishFunctionExpression(a,b,c,l)}Y("this")?(y(),c=d.finishThisExpression()):N(y())}else a===T.BooleanLiteral?(b=y(),b.value="true"===b.value.toLowerCase(),c=d.finishLiteral(b)):a===T.NullLiteral?(b=
y(),b.value=null,c=d.finishLiteral(b)):P("/")||P("/\x3d")?(c="undefined"!=typeof O.tokens?d.finishLiteral(u()):d.finishLiteral(p()),z()):N(y());return c}function na(){var a=[];if(J("("),!P(")"))for(;ma>E&&(a.push(va()),!P(")"));)W();return J(")"),a}function ua(){var a,b=new C;return a=y(),a.type===T.Identifier||a.type===T.Keyword||a.type===T.BooleanLiteral||a.type===T.NullLiteral||N(a),b.finishIdentifier(a.value)}function Da(){var a;return J("["),a=wa(),J("]"),a}function za(){var a,b,c=new C;L("new");
var d,e,g;h(ea.allowIn,"callee of new expression always allow in keyword.");g=aa;for(d=Y("new")?za():ka();;)if(P("["))e=Da(),d=(new H(g)).finishMemberExpression("[",d,e);else{if(!P("."))break;e=(J("."),ua());d=(new H(g)).finishMemberExpression(".",d,e)}return a=d,b=P("(")?na():[],c.finishNewExpression(a,b)}function Fa(){var a,b,c=aa,d,e,g,f=ea.allowIn;g=aa;ea.allowIn=!0;for(d=Y("new")?za():ka();;)if(P("."))e=(J("."),ua()),d=(new H(g)).finishMemberExpression(".",d,e);else if(P("("))e=na(),d=(new H(g)).finishCallExpression(d,
e);else{if(!P("["))break;e=Da();d=(new H(g)).finishMemberExpression("[",d,e)}return a=(ea.allowIn=f,d),aa.type===T.Punctuator&&(!P("++")&&!P("--")||I()||(V(a)||K(da.InvalidLHSInAssignment),b=y(),a=(new H(c)).finishPostfixExpression(b.value,a))),a}function pa(){var a,b,c;return aa.type!==T.Punctuator&&aa.type!==T.Keyword?b=Fa():P("++")||P("--")?(c=aa,a=y(),b=pa(),V(b)||K(da.InvalidLHSInAssignment),b=(new H(c)).finishUnaryExpression(a.value,b)):P("+")||P("-")||P("~")||P("!")?(c=aa,a=y(),b=pa(),b=(new H(c)).finishUnaryExpression(a.value,
b)):Y("delete")||Y("void")||Y("typeof")?(c=aa,a=y(),b=pa(),b=(new H(c)).finishUnaryExpression(a.value,b),la&&"delete"===b.operator&&b.argument.type===ha.Identifier&&K(da.StrictDelete)):b=Fa(),b}function kb(a,b){var c=0;if(a.type!==T.Punctuator&&a.type!==T.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=
7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function Ia(a){var b,c,d,e,g,f,k,l;e=[];g=[];f=0;k={paramSet:{}};b=0;for(c=a.length;c>b;b+=1)if(d=a[b],d.type===ha.Identifier)e.push(d),g.push(null),Ga(k,d,d.name);else{if(d.type!==ha.AssignmentExpression)return null;e.push(d.left);g.push(d.right);++f;Ga(k,d.left,d.left.name)}return k.message===da.StrictParamDupe&&(l=la?k.stricted:k.firstRestricted,
N(l,k.message)),0===f&&(g=[]),{params:e,defaults:g,rest:null,stricted:k.stricted,firstRestricted:k.firstRestricted,message:k.message}}function va(){var a,b,c,d,e,g;a=ea.parenthesisCount;b=g=aa;var f,k,l,h;c=aa;var n;var m,p,q,t,r;if((n=aa,m=pa(),m!==Ma.ArrowParameterPlaceHolder)&&(p=aa,q=kb(p,ea.allowIn),0!==q)){p.prec=q;y();n=[n,aa];r=pa();for(t=[m,p,r];0<(q=kb(aa,ea.allowIn));){for(;2<t.length&&q<=t[t.length-2].prec;)r=t.pop(),p=t.pop().value,m=t.pop(),n.pop(),m=(new H(n[n.length-1])).finishBinaryExpression(p,
m,r),t.push(m);p=y();p.prec=q;t.push(p);n.push(aa);m=pa();t.push(m)}q=t.length-1;m=t[q];for(n.pop();1<q;)m=(new H(n.pop())).finishBinaryExpression(t[q-1].value,t[q-2],m),q-=2}n=m;c=(f=n,f===Ma.ArrowParameterPlaceHolder?f:(P("?")&&(y(),k=ea.allowIn,ea.allowIn=!0,l=va(),ea.allowIn=k,J(":"),h=va(),f=(new H(c)).finishConditionalExpression(f,l,h)),f));if(c!==Ma.ArrowParameterPlaceHolder&&!P("\x3d\x3e")||ea.parenthesisCount!==a&&ea.parenthesisCount!==a+1||(c.type===ha.Identifier?e=Ia([c]):c.type===ha.AssignmentExpression?
e=Ia([c]):c.type===ha.SequenceExpression?e=Ia(c.expressions):c===Ma.ArrowParameterPlaceHolder&&(e=Ia([])),!e)){var w;g=((aa.type!==T.Punctuator?!1:(w=aa.value,"\x3d"===w||"*\x3d"===w||"/\x3d"===w||"%\x3d"===w||"+\x3d"===w||"-\x3d"===w||"\x3c\x3c\x3d"===w||"\x3e\x3e\x3d"===w||"\x3e\x3e\x3e\x3d"===w||"\x26\x3d"===w||"^\x3d"===w||"|\x3d"===w))&&(V(c)||K(da.InvalidLHSInAssignment),b=y(),d=va(),c=(new H(g)).finishAssignmentExpression(b.value,c,d)),c)}else{b=e;d=new H(g);var u,v;g=(J("\x3d\x3e"),u=la,v=
P("{")?Na():va(),la&&b.firstRestricted&&N(b.firstRestricted,b.message),la&&b.stricted&&S(b.stricted,b.message),la=u,d.finishArrowFunctionExpression(b.params,b.defaults,v,v.type!==ha.BlockStatement))}return g}function wa(){var a,b=aa;if(a=va(),P(",")){for(a=[a];ma>E&&P(",");)y(),a.push(va());a=(new H(b)).finishSequenceExpression(a)}return a}function Ja(){var a,b=new C;return a=y(),a.type!==T.Identifier&&N(a),b.finishIdentifier(a.value)}function Ua(a){var b,c=null,d=new C;return b=Ja(),"const"===a?
(J("\x3d"),c=va()):P("\x3d")&&(y(),c=va()),d.finishVariableDeclarator(b,c)}function bb(a){var b=[];do{if(b.push(Ua(a)),!P(","))break;y()}while(ma>E);return b}function ya(a){var b,c,d,e,g=aa.type;if(g===T.EOF&&N(aa),g===T.Punctuator&&"{"===aa.value){if(a){J("{");var f,k,l,h,m;f=aa;f=(k=E,l=ga,h=ja,y(),m=P(":"),aa=f,E=k,ga=l,ja=h,m);if(aa.type!==T.Identifier&&aa.type!==T.StringLiteral||!f){f=new C;for(var p=[];ma>E&&!P("}")&&(e=Ea(),"undefined"!=typeof e);)p.push(e);f=(J("}"),f.finishBlockStatement(p))}else f=
fa(!0);return f}return fa()}if(e=new C,g===T.Punctuator)switch(aa.value){case ";":return f=new C,J(";"),f.finishEmptyStatement();case "(":return f=wa(),ba(),e.finishExpressionStatement(f)}else if(g===T.Keyword)switch(aa.value.toLowerCase()){case "break":var q;f=null;return L("break"),59===R.charCodeAt(E)?(y(),ea.inIteration||ea.inSwitch||Q(da.IllegalBreak),e.finishBreakStatement(null)):I()?(ea.inIteration||ea.inSwitch||Q(da.IllegalBreak),e.finishBreakStatement(null)):(aa.type===T.Identifier&&(f=Ja(),
q="$"+f.name,Object.prototype.hasOwnProperty.call(ea.labelSet,q)||Q(da.UnknownLabel,f.name)),ba(),null!==f||ea.inIteration||ea.inSwitch||Q(da.IllegalBreak),e.finishBreakStatement(f));case "continue":var t;f=null;return L("continue"),59===R.charCodeAt(E)?(y(),ea.inIteration||Q(da.IllegalContinue),e.finishContinueStatement(null)):I()?(ea.inIteration||Q(da.IllegalContinue),e.finishContinueStatement(null)):(aa.type===T.Identifier&&(f=Ja(),t="$"+f.name,Object.prototype.hasOwnProperty.call(ea.labelSet,
t)||Q(da.UnknownLabel,f.name)),ba(),null!==f||ea.inIteration||Q(da.IllegalContinue),e.finishContinueStatement(f));case "for":var r,w;h=ea.allowIn;m=k=l=null;L("for");J("(");if(P(";"))y();else{if(Y("var")){ea.allowIn=!1;var u,v;m=new C;m=(u=y(),v=bb(),m.finishVariableDeclaration(v,u.value));ea.allowIn=h;1===m.declarations.length&&Y("in")&&(y(),f=m,p=wa(),m=null)}else ea.allowIn=!1,m=wa(),ea.allowIn=h,Y("in")&&(V(m)||K(da.InvalidLHSInForIn),y(),f=m,p=wa(),m=null);"undefined"==typeof f&&J(";")}return"undefined"==
typeof f&&(P(";")||(k=wa()),J(";"),P(")")||(l=wa())),J(")"),w=ea.inIteration,ea.inIteration=!0,r=ya(!0),ea.inIteration=w,"undefined"==typeof f?e.finishForStatement(m,k,l,r):e.finishForInStatement(f,p,r);case "function":return $a(e);case "if":var x,Z,A;return L("if"),J("("),x=wa(),J(")"),Z=ya(!0),Y("else")?(y(),A=ya(!0)):A=null,e.finishIfStatement(x,Z,A);case "return":return f=null,L("return"),ea.inFunctionBody||K(da.IllegalReturn),32===R.charCodeAt(E)&&n(R.charCodeAt(E+1))?(f=wa(),ba(),e.finishReturnStatement(f)):
I()?e.finishReturnStatement(null):(P(";")||P("}")||aa.type===T.EOF||(f=wa()),ba(),e.finishReturnStatement(f));case "var":var z;return L("var"),z=bb(),ba(),e.finishVariableDeclaration(z,"var")}return b=wa(),b.type===ha.Identifier&&P(":")?(y(),d="$"+b.name,Object.prototype.hasOwnProperty.call(ea.labelSet,d)&&Q(da.Redeclaration,"Label",b.name),ea.labelSet[d]=!0,c=ya(!1),delete ea.labelSet[d],e.finishLabeledStatement(b,c)):(ba(),e.finishExpressionStatement(b))}function Na(){var a,b,c,d,e,g,f=[],k=new C;
for(J("{");ma>E&&aa.type===T.StringLiteral&&(b=aa,a=Ea(),f.push(a),a.expression.type===ha.Literal);)c=R.slice(b.start+1,b.end-1),"use strict"===c?(la=!0,d&&S(d,da.StrictOctalLiteral)):!d&&b.octal&&(d=b);b=ea.labelSet;c=ea.inIteration;d=ea.inSwitch;e=ea.inFunctionBody;g=ea.parenthesizedCount;ea.labelSet={};ea.inIteration=!1;ea.inSwitch=!1;ea.inFunctionBody=!0;for(ea.parenthesizedCount=0;ma>E&&!P("}")&&(a=Ea(),"undefined"!=typeof a);)f.push(a);return J("}"),ea.labelSet=b,ea.inIteration=c,ea.inSwitch=
d,ea.inFunctionBody=e,ea.parenthesizedCount=g,k.finishBlockStatement(f)}function Ga(a,b,c){c="$"+c;la?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=da.StrictParamDupe):a.firstRestricted||Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=da.StrictParamDupe);a.paramSet[c]=!0}function Ha(a){var b,c,d;return b=aa,c=Ja(),Ga(a,b,b.value),P("\x3d")&&(y(),d=va(),++a.defaultCount),a.params.push(c),a.defaults.push(d),!P(")")}function Ra(a){if(a=
{params:[],defaultCount:0,defaults:[],firstRestricted:a},J("("),!P(")"))for(a.paramSet={};ma>E&&Ha(a);)J(",");return J(")"),0===a.defaultCount&&(a.defaults=[]),{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function $a(){var a,b,c,d,e,g,f,k=[],l=[],h=new C;return L("function"),a=Ja(),d=Ra(e),k=d.params,l=d.defaults,c=d.stricted,e=d.firstRestricted,d.message&&(g=d.message),f=la,b=Na(),la&&e&&N(e,g),la&&c&&S(c,g),la=f,h.finishFunctionDeclaration(a,
k,l,b)}function Ea(){return aa.type===T.Keyword?"function"===aa.value.toLowerCase()?$a():ya(!1):aa.type!==T.EOF?ya(!1):void 0}function Oa(){var a,b,c,d=[];for(a=0;a<O.tokens.length;++a)b=O.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),O.range&&(c.range=b.range),O.loc&&(c.loc=b.loc),d.push(c);O.tokens=d}var T,Aa,sa,ha,Ma,Ka,da,cb,R,la,E,ga,ja,ma,aa,ea,O;T={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,
StringLiteral:8,RegularExpression:9};Aa={};Aa[T.BooleanLiteral]="Boolean";Aa[T.EOF]="\x3cend\x3e";Aa[T.Identifier]="Identifier";Aa[T.Keyword]="Keyword";Aa[T.NullLiteral]="Null";Aa[T.NumericLiteral]="Numeric";Aa[T.Punctuator]="Punctuator";Aa[T.StringLiteral]="String";Aa[T.RegularExpression]="RegularExpression";sa="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
ha={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Ma={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
Ka={Data:1,Get:2,Set:4};da={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};cb={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
H.prototype=C.prototype={processComment:function(){var a,b,c,d,e,g=O.bottomRightStack,f=g[g.length-1];if(!(this.type===ha.Program&&0<this.body.length)){if(0<O.trailingComments.length){c=[];for(d=O.trailingComments.length-1;0<=d;--d)e=O.trailingComments[d],e.range[0]>=this.range[1]&&(c.unshift(e),O.trailingComments.splice(d,1));O.trailingComments=[]}else f&&f.trailingComments&&f.trailingComments[0].range[0]>=this.range[1]&&(c=f.trailingComments,delete f.trailingComments);if(f)for(;f&&f.range[0]>=this.range[0];)a=
f,f=g.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<O.leadingComments.length)for(b=[],d=O.leadingComments.length-1;0<=d;--d)e=O.leadingComments[d],e.range[1]<=this.range[0]&&(b.unshift(e),O.leadingComments.splice(d,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);g.push(this)}},finish:function(){O.range&&(this.range[1]=E);O.loc&&(this.loc.end=
new A,O.source&&(this.loc.source=O.source));O.attachComment&&this.processComment()},finishArrayExpression:function(a){return this.type=ha.ArrayExpression,this.elements=a,this.finish(),this},finishAssignmentExpression:function(a,b,c){return this.type=ha.AssignmentExpression,this.operator=a,this.left=b,this.right=c,this.finish(),this},finishBinaryExpression:function(a,b,c){return this.type="||"===a||"\x26\x26"===a?ha.LogicalExpression:ha.BinaryExpression,this.operator=a,this.left=b,this.right=c,this.finish(),
this},finishBlockStatement:function(a){return this.type=ha.BlockStatement,this.body=a,this.finish(),this},finishBreakStatement:function(a){return this.type=ha.BreakStatement,this.label=a,this.finish(),this},finishCallExpression:function(a,b){return this.type=ha.CallExpression,this.callee=a,this.arguments=b,this.finish(),this},finishConditionalExpression:function(a,b,c){return this.type=ha.ConditionalExpression,this.test=a,this.consequent=b,this.alternate=c,this.finish(),this},finishContinueStatement:function(a){return this.type=
ha.ContinueStatement,this.label=a,this.finish(),this},finishEmptyStatement:function(){return this.type=ha.EmptyStatement,this.finish(),this},finishExpressionStatement:function(a){return this.type=ha.ExpressionStatement,this.expression=a,this.finish(),this},finishForStatement:function(a,b,c,d){return this.type=ha.ForStatement,this.init=a,this.test=b,this.update=c,this.body=d,this.finish(),this},finishForInStatement:function(a,b,c){return this.type=ha.ForInStatement,this.left=a,this.right=b,this.body=
c,this.each=!1,this.finish(),this},finishFunctionDeclaration:function(a,b,c,d){return this.type=ha.FunctionDeclaration,this.id=a,this.params=b,this.defaults=c,this.body=d,this.rest=null,this.generator=!1,this.expression=!1,this.finish(),this},finishFunctionExpression:function(a,b,c,d){return this.type=ha.FunctionExpression,this.id=a,this.params=b,this.defaults=c,this.body=d,this.rest=null,this.generator=!1,this.expression=!1,this.finish(),this},finishIdentifier:function(a){return this.type=ha.Identifier,
this.name=a,this.finish(),this},finishIfStatement:function(a,b,c){return this.type=ha.IfStatement,this.test=a,this.consequent=b,this.alternate=c,this.finish(),this},finishLiteral:function(a){return this.type=ha.Literal,this.value=a.value,this.raw=R.slice(a.start,a.end),a.regex&&(this.regex=a.regex),this.finish(),this},finishMemberExpression:function(a,b,c){return this.type=ha.MemberExpression,this.computed="["===a,this.object=b,this.property=c,this.finish(),this},finishObjectExpression:function(a){return this.type=
ha.ObjectExpression,this.properties=a,this.finish(),this},finishPostfixExpression:function(a,b){return this.type=ha.UpdateExpression,this.operator=a,this.argument=b,this.prefix=!1,this.finish(),this},finishProgram:function(a){return this.type=ha.Program,this.body=a,this.finish(),this},finishProperty:function(a,b,c,d,e){return this.type=ha.Property,this.key=b,this.value=c,this.kind=a,this.method=d,this.shorthand=e,this.finish(),this},finishReturnStatement:function(a){return this.type=ha.ReturnStatement,
this.argument=a,this.finish(),this},finishUnaryExpression:function(a,b){return this.type="++"===a||"--"===a?ha.UpdateExpression:ha.UnaryExpression,this.operator=a,this.argument=b,this.prefix=!0,this.finish(),this},finishVariableDeclaration:function(a,b){return this.type=ha.VariableDeclaration,this.declarations=a,this.kind=b,this.finish(),this},finishVariableDeclarator:function(a,b){return this.type=ha.VariableDeclarator,this.id=a,this.init=b,this.finish(),this}};a.version="2.0.0-dev";a.tokenize=function(a,
b){var c,d;c=String;"string"==typeof a||a instanceof String||(a=c(a));R=a;E=0;ga=0<R.length?1:0;ja=0;ma=R.length;aa=null;ea={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};O={};b=b||{};b.tokens=!0;O.tokens=[];O.tokenize=!0;O.openParenToken=-1;O.openCurlyToken=-1;O.range="boolean"==typeof b.range&&b.range;O.loc="boolean"==typeof b.loc&&b.loc;"boolean"==typeof b.comment&&b.comment&&(O.comments=[]);"boolean"==typeof b.tolerant&&b.tolerant&&(O.errors=[]);try{if(z(),
aa.type===T.EOF)return O.tokens;for(y();aa.type!==T.EOF;)try{y()}catch(Va){if(O.errors){O.errors.push(Va);break}throw Va;}Oa();d=O.tokens;"undefined"!=typeof O.comments&&(d.comments=O.comments);"undefined"!=typeof O.errors&&(d.errors=O.errors)}catch(Va){throw Va;}finally{O={}}return d};a.parse=function(a,b){var c,d;d=String;"string"==typeof a||a instanceof String||(a=d(a));R=a;E=0;ga=0<R.length?1:0;ja=0;ma=R.length;aa=null;ea={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,
inSwitch:!1,lastCommentStart:-1};O={};"undefined"!=typeof b&&(O.range="boolean"==typeof b.range&&b.range,O.loc="boolean"==typeof b.loc&&b.loc,O.attachComment="boolean"==typeof b.attachComment&&b.attachComment,O.loc&&null!==b.source&&void 0!==b.source&&(O.source=d(b.source)),"boolean"==typeof b.tokens&&b.tokens&&(O.tokens=[]),"boolean"==typeof b.comment&&b.comment&&(O.comments=[]),"boolean"==typeof b.tolerant&&b.tolerant&&(O.errors=[]),O.attachComment&&(O.range=!0,O.comments=[],O.bottomRightStack=
[],O.trailingComments=[],O.leadingComments=[]));try{var e;q();z();e=new C;la=!1;var g,f,k,l;for(a=[];ma>E&&(f=aa,f.type===T.StringLiteral)&&(g=Ea(),a.push(g),g.expression.type===ha.Literal);)k=R.slice(f.start+1,f.end-1),"use strict"===k?(la=!0,l&&S(l,da.StrictOctalLiteral)):!l&&f.octal&&(l=f);for(;ma>E&&(g=Ea(),"undefined"!=typeof g);)a.push(g);c=e.finishProgram(a);"undefined"!=typeof O.comments&&(c.comments=O.comments);"undefined"!=typeof O.tokens&&(Oa(),c.tokens=O.tokens);"undefined"!=typeof O.errors&&
(c.errors=O.errors)}catch(jb){throw jb;}finally{O={}}return c};a.Syntax=function(){var a,b={};"function"==typeof Object.create&&(b=Object.create(null));for(a in ha)ha.hasOwnProperty(a)&&(b[a]=ha[a]);return"function"==typeof Object.freeze&&Object.freeze(b),b}()})},"esri/arcade/arcadeCompiler":function(){define("require exports ../geometry/Polygon ../Graphic ../geometry/Polyline ../geometry/Point ../geometry/Extent ../geometry/Multipoint ../geometry/SpatialReference ./languageUtils ./treeAnalysis ./Dictionary ./Feature ./functions/date ./functions/string ./functions/maths ./functions/geometry ./functions/stats ./ImmutablePathArray ./ImmutablePointArray ../geometry/Geometry".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k,x,B){function y(a,b,c){try{return c(a,null,b)}catch(fa){throw fa;}}function z(a,b){try{switch(b.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return H(a,b);case "VariableDeclaration":for(var c=[],d=0;d<b.declarations.length;d++)c.push(z(a,b.declarations[d]));return c.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return C(a,b);case "FunctionDeclaration":var e=b.id.name.toLowerCase(),f={applicationCache:void 0===
a.applicationCache?null:a.applicationCache,spatialReference:a.spatialReference,console:a.console,symbols:a.symbols,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<f.depthCounter)throw Error("Exceeded maximum function depth");for(var c="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; var lscope \x3d [];\n ",k=0;k<b.params.length;k++){var l=b.params[k].name.toLowerCase(),h=S(l,a);f.localScope._SymbolsMap[l]=
h;c+="lscope['"+h+"']\x3darguments["+k.toString()+"];\n"}(c+=C(f,b.body)+"\n return lastStatement; }, runtimeCtx))",c+="\n lastStatement \x3d lc.voidOperation; \n",void 0!==a.globalScope[e])?d="gscope['"+e+"']\x3d"+c:void 0!==a.globalScope._SymbolsMap[e]?d="gscope['"+a.globalScope._SymbolsMap[e]+"']\x3d"+c:(h=S(e,a),d=(a.globalScope._SymbolsMap[e]=h,"gscope['"+h+"']\x3d"+c));return d;case "ReturnStatement":var n;n=null===b.argument?"return lc.voidOperation;":"return "+z(a,b.argument)+";";return n;
case "IfStatement":if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(g.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var m=z(a,b.test),p=J(a),q="var "+p+" \x3d "+m+";\n if ("+p+" \x3d\x3d\x3d true) {\n"+F(a,b.consequent)+"\n }\n";return q+=null!==b.alternate?"else if ("+p+"\x3d\x3d\x3dfalse)   { \n"+F(a,b.alternate)+"}\n":"else if ("+p+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n",q+="else { lang.error({type: '"+
b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":return"AssignmentExpression"===b.expression.type?"lastStatement \x3d lc.voidOperation; "+z(a,b.expression)+" \n ":"lastStatement \x3d "+z(a,b.expression)+";";case "AssignmentExpression":return D(a,b);case "UpdateExpression":return A(a,b);case "BreakStatement":return"break;";case "ContinueStatement":return"continue;";case "ForStatement":c="lastStatement \x3d lc.voidOperation; \n";null!==b.init&&(c+=z(a,b.init));
var t=J(a),r=J(a);return c+="var "+t+" \x3d true;",c+="\n do { ",null!==b.update&&(c+=" if ("+t+"\x3d\x3d\x3dfalse) {\n "+z(a,b.update)+"  \n}\n "+t+"\x3dfalse; \n"),null!==b.test&&(c+="var "+r+" \x3d "+z(a,b.test)+";",c+="if ("+r+"\x3d\x3d\x3dfalse) { break; } else if ("+r+"!\x3d\x3dtrue) { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n"),c+=z(a,b.body),null!==b.update&&(c+="\n "+z(a,b.update)),c+="\n"+t+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation;";
case "ForInStatement":var w=J(a),u=J(a),v=J(a),x="var "+w+" \x3d "+z(a,b.right)+";\n";"VariableDeclaration"===b.left.type&&(x+=z(a,b.left));var y="VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name,y=y.toLowerCase(),c="";return null!==a.localScope&&(void 0!==a.localScope[y]?c="lscope['"+y+"']":void 0!==a.localScope._SymbolsMap[y]&&(c="lscope['"+a.localScope._SymbolsMap[y]+"']")),""===c&&(void 0!==a.globalScope[y]?c="gscope['"+y+"']":void 0!==a.globalScope._SymbolsMap[y]&&
(c="gscope['"+a.globalScope._SymbolsMap[y]+"']")),x+="if ("+w+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ",x+="else if (lc.isArray("+w+") || lc.isString("+w+")) {",x+="var "+u+"\x3d"+w+".length; \n",x+="for(var "+v+"\x3d0; "+v+"\x3c"+u+"; "+v+"++) {\n",x+=c+"\x3d"+v+";\n",x+=z(a,b.body),x+="\n}\n",x+=" lastStatement \x3d lc.voidOperation; \n",x+=" \n}\n",x+="else if (lc.isImmutableArray("+w+")) {",x+="var "+u+"\x3d"+w+".length(); \n",x+="for(var "+v+"\x3d0; "+v+"\x3c"+u+"; "+v+
"++) {\n",x+=c+"\x3d"+v+";\n",x+=z(a,b.body),x+="\n}\n",x+=" lastStatement \x3d lc.voidOperation; \n",x+=" \n}\n",x+="else if (( "+w+" instanceof lang.Dictionary) || ( "+w+" instanceof lang.Feature)) {",x+="var "+u+"\x3d"+w+".keys(); \n",x+="for(var "+v+"\x3d0; "+v+"\x3c"+u+".length; "+v+"++) {\n",x+=c+"\x3d"+u+"["+v+"];\n",x+=z(a,b.body),x+="\n}\n",x+=" lastStatement \x3d lc.voidOperation; \n",x+=" \n}\n",x+="else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return M(a,b);case "MemberExpression":var Z;
try{c=void 0,Z=(c=!0===b.computed?z(a,b.property):"'"+b.property.name+"'","lang.member("+z(a,b.object)+","+c+")")}catch(sa){throw sa;}return Z;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "ThisExpression":throw Error(g.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==b.callee.type)throw Error(g.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));var B=b.callee.name.toLowerCase(),d="";if(null!==a.localScope&&(void 0!==
a.localScope[B]?d="lscope['"+B+"']":void 0!==a.localScope._SymbolsMap[B]&&(d="lscope['"+a.localScope._SymbolsMap[B]+"']")),""===d&&(void 0!==a.globalScope[B]?d="gscope['"+B+"']":void 0!==a.globalScope._SymbolsMap[B]&&(d="gscope['"+a.globalScope._SymbolsMap[B]+"']")),""!==d){e="[";for(f=0;f<b.arguments.length;f++)0<f&&(e+=", "),e+=z(a,b.arguments[f]);c=(e+="]","lang.callfunc("+d+","+e+",runtimeCtx)")}else throw Error(g.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(sa){throw sa;}return c;case "UnaryExpression":var ca;
try{ca="lang.unary("+z(a,b.argument)+",'"+b.operator+"')"}catch(sa){throw sa;}return ca;case "BinaryExpression":var I;try{I="lang.binary("+z(a,b.left)+","+z(a,b.right)+",'"+b.operator+"')"}catch(sa){throw sa;}return I;case "LogicalExpression":var G;try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(g.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(g.nodeErrorMessage(b.right,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===b.operator||"||"===b.operator)G="(lang.logicalCheck("+z(a,b.left)+") "+b.operator+" lang.logicalCheck("+z(a,b.right)+"))";else throw Error(g.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}catch(sa){throw sa;}return G;case "ConditionalExpression":throw Error(g.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{c=[];for(d=0;d<b.elements.length;d++)"Literal"===b.elements[d].type?c.push(z(a,b.elements[d])):
c.push("lang.aCheck("+z(a,b.elements[d])+",'ArrayExpression')");k="["+c.join(",")+"]"}catch(sa){throw sa;}return k;case "ObjectExpression":c="lang.dictionary([";for(d=0;d<b.properties.length;d++){var K=b.properties[d],Q="Identifier"===K.key.type?"'"+K.key.name+"'":z(a,K.key),N=z(a,K.value);0<d&&(c+=",");c+="lang.strCheck("+Q+",'ObjectExpression'),lang.aCheck("+N+", 'ObjectExpression')"}return c+="])";case "Property":throw Error("Should not get here");case "Array":throw Error(g.nodeErrorMessage(b,
"RUNTIME","NOTSUPPORTED"));default:throw Error(g.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(sa){throw sa;}}function A(a,b){var c=null,d="";if("MemberExpression"===b.argument.type)return c=z(a,b.argument.object),d=!0===b.argument.computed?z(a,b.argument.property):"'"+b.argument.property.name+"'","lang.memberupdate("+c+","+d+",'"+b.operator+"',"+b.prefix+")";if(c=b.argument.name.toLowerCase(),null!==a.localScope){if(void 0!==a.localScope[c])return"lang.update(lscope, '"+c+"','"+b.operator+
"',"+b.prefix+")";if(void 0!==a.localScope._SymbolsMap[c])return"lang.update(lscope, '"+a.localScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[c])return"lang.update(gscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")";throw Error("Variable not recognised");}function D(a,b){var c=z(a,b.right),d=null,e="";if("MemberExpression"===b.left.type)return d=
z(a,b.left.object),e=!0===b.left.computed?z(a,b.left.property):"'"+b.left.property.name+"'","lang.assignmember("+d+","+e+",'"+b.operator+"',"+c+");";if(d=b.left.name.toLowerCase(),null!==a.localScope){if(void 0!==a.localScope[d])return"lscope['"+d+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+d+"']); ";if(void 0!==a.localScope._SymbolsMap[d])return"lscope['"+a.localScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[d]+"']); "}if(void 0!==a.globalScope[d])return"gscope['"+
d+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+d+"']); ";if(void 0!==a.globalScope._SymbolsMap[d])return"gscope['"+a.globalScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+a.globalScope._SymbolsMap[d]+"']); ";throw Error("Variable not recognised");}function F(a,b){return"BlockStatement"===b.type?z(a,b):"ReturnStatement"===b.type?z(a,b):"BreakStatement"===b.type?z(a,b):"ContinueStatement"===b.type?z(a,b):"UpdateExpression"===b.type?"lastStatement \x3d "+z(a,b)+";":
"ExpressionStatement"===b.type?z(a,b):"ObjectExpression"===b.type?"lastStatement \x3d "+z(a,b)+";":z(a,b)}function C(a,b){for(var c="",d=0;d<b.body.length;d++)c+="ReturnStatement"===b.body[d].type?z(a,b.body[d])+" \n":"BreakStatement"===b.body[d].type?z(a,b.body[d])+" \n":"ContinueStatement"===b.body[d].type?z(a,b.body[d])+" \n":"UpdateExpression"===b.body[d].type?"lastStatement \x3d "+z(a,b.body[d])+"; \n":"ObjectExpression"===b.body[d].type?"lastStatement \x3d "+z(a,b.body[d])+"; \n":z(a,b.body[d])+
" \n";return c}function H(a,c){var d=null===c.init?null:z(a,c.init);d===b.voidOperation&&(d=null);c=c.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+c+"']\x3d"+d+";";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+a.localScope._SymbolsMap[c]+"']\x3d"+d+";";var e=S(c,a);return a.localScope._SymbolsMap[c]=e,"lscope['"+e+"']\x3d"+d+";"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']\x3d"+d+";";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+
a.globalScope._SymbolsMap[c]+"']\x3d"+d+";";e=S(c,a);return a.globalScope._SymbolsMap[c]=e,"gscope['"+e+"']\x3d"+d+";"}function I(a,c,d){switch(c=c.toLowerCase()){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return c=a.spatialReference._arcadeCacheId,void 0===c&&(d=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(d=!1),d&&(P++,a.spatialReference._arcadeCacheId=P,c=P)),a=new q({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),
void 0!==c&&(a._arcadeCacheId="SPREF"+c.toString()),a}switch(a.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[c],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=b.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(P++,c=P,b.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new k(a.rings,a.spatialReference,
!0===a.hasZ,!0===a.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==a[c]?a[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=b.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(P++,c=P,b.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new k(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=
b.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(P++,c=P,b.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new x(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,c,1);case "type":return"Multipoint"}}throw Error(g.nodeErrorMessage(d,"RUNTIME","PROPERTYNOTFOUND"));}function M(a,b){try{var c=b.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+c+"']";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+
a.localScope._SymbolsMap[c]+"']"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']";throw Error(g.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(fa){throw fa;}}function Q(a){return null===a?"":b.isArray(a)?"Array":b.isImmutableArray(a)?"Array":b.isDate(a)?"Date":b.isString(a)?"String":b.isBoolean(a)?"Boolean":b.isNumber(a)?"Number":a instanceof q?"Dictionary":a instanceof t?"Feature":a instanceof
c?"Point":a instanceof m?"Polygon":a instanceof d?"Polyline":a instanceof e?"Multipoint":a instanceof n?"Extent":b.isFunctionParameter(a)?"Function":a===b.voidOperation?"":"number"==typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function K(a,c,d,e){try{if(b.equalityTest(c[d],e))return c[d+1];var g=c.length-d;return 1===g?c[d]:2===g?null:3===g?c[d+2]:K(a,c,d+2,e)}catch(na){throw na;}}function G(a,c,d,e){try{if(!0===e)return c[d+1];if(3===c.length-d)return c[d+2];var g=c[d+2];if(!1===b.isBoolean(g))throw Error("WHEN needs boolean test conditions");
return G(a,c,d+2,g)}catch(na){throw na;}}function N(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)b=[];else if(1===c)b=[a[0]];else{var e=N(a.slice(0,d),b);a=N(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));b=c}return b}function S(a,b){return b.symbols.symbolCounter++,"_T"+b.symbols.symbolCounter.toString()}
function J(a){return a.symbols.symbolCounter++,"_Tvar"+a.symbols.symbolCounter.toString()}function W(a,b,c){var d={};a||(a={});c||(c={});d._SymbolsMap={};d.textformatting=1;d.infinity=1;d.pi=1;for(var e in b)d[e]=1;for(e in c)d[e]=1;for(e in a)d[e]=1;return d}function L(a){}Object.defineProperty(h,"__esModule",{value:!0});var P=0,Y={};w.registerFunctions(Y,y);v.registerFunctions(Y,y);r.registerFunctions(Y,y);p.registerFunctions(Y,y);u.registerFunctions(Y,y);Y["typeof"]=function(a,c){return y(a,c,
function(a,c,d){b.pcCheck(d,1,1);a=Q(d[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};Y.iif=function(a,c){try{return y(a,c,function(a,c,d){if(b.pcCheck(d,3,3),!1===b.isBoolean(d[0]))throw Error("IF Function must have a boolean test condition");return d[0]?d[1]:d[2]})}catch(ia){throw ia;}};Y.decode=function(a,b){try{return y(a,b,function(b,c,d){if(2>d.length)throw Error("Missing Parameters");if(2===d.length)return d[1];if(0===(d.length-1)%2)throw Error("Must have a default value result.");
return K(a,d,1,d[0])})}catch(ia){throw ia;}};Y.when=function(a,c){try{return y(a,c,function(c,d,e){if(3>e.length)throw Error("Missing Parameters");if(0===e.length%2)throw Error("Must have a default value result.");c=e[0];if(!1===b.isBoolean(c))throw Error("WHEN needs boolean test conditions");return G(a,e,0,c)})}catch(ia){throw ia;}};Y.top=function(a,c){return y(a,c,function(a,c,d){if(b.pcCheck(d,2,2),b.isArray(d[0]))return b.toNumber(d[1])>=d[0].length?d[0].slice(0):d[0].slice(0,b.toNumber(d[1]));
if(b.isImmutableArray(d[0]))return b.toNumber(d[1])>=d[0].length()?d[0].slice(0):d[0].slice(0,b.toNumber(d[1]));throw Error("Top cannot accept this parameter type");})};Y.first=function(a,c){return y(a,c,function(a,c,d){return b.pcCheck(d,1,1),b.isArray(d[0])?0===d[0].length?null:d[0][0]:b.isImmutableArray(d[0])?0===d[0].length()?null:d[0].get(0):null})};Y.sort=function(a,c){return y(a,c,function(a,c,d){b.pcCheck(d,1,2);c=d[0];if(b.isImmutableArray(c)&&(c=c.toArray()),!1===b.isArray(c))throw Error("Illegal Argument");
if(1<d.length){if(!1===b.isFunctionParameter(d[1]))throw Error("Illegal Argument");return c=N(c,function(b,c){return X.callfunc(d[1],[b,c],a)})}if(0===c.length)return[];for(var e={},g=0;g<c.length;g++){var f=Q(c[g]);""!==f&&(e[f]=!0)}if(!0===e.Array||!0===e.Dictionary||!0===e.Feature||!0===e.Point||!0===e.Polygon||!0===e.Polyline||!0===e.Multipoint||!0===e.Extent||!0===e.Function)return c.slice(0);var g=0,f="",k;for(k in e)g++,f=k;return c=1<g||"String"===f?N(c,function(a,c){if(null===a||void 0===
a||a===b.voidOperation)return null===c||void 0===c||c===b.voidOperation?0:1;if(null===c||void 0===c||c===b.voidOperation)return-1;a=b.toString(a);c=b.toString(c);return c>a?-1:a===c?0:1}):"Number"===f?N(c,function(a,b){return a-b}):"Boolean"===f?N(c,function(a,b){return a===b?0:b?-1:1}):"Date"===f?N(c,function(a,b){return b-a}):c.slice(0)})};for(var ba in Y)Y[ba]=new b.NativeFunction(Y[ba]);var V=function(){};V.prototype=Y;h.functionHelper={fixSpatialReference:b.fixSpatialReference,parseArguments:function(a,
b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(z(a,b.arguments[d]));return c},standardFunction:y};h.executeScript=function(a,b,c){return a(b,c)};h.extractFieldLiterals=function(a,b){return void 0===b&&(b=!1),g.findFieldLiterals(a,b)};h.validateScript=function(a,b){return g.validateScript(a,b,"simple")};h.referencesMember=function(a,b){return g.referencesMember(a,b)};h.referencesFunction=function(a,b){return g.referencesFunction(a,b)};var X={error:function(a,b,c){throw Error(g.nodeErrorMessage(a,
b,c));},functionDepthchecker:function(a,b){return function(){if(b.depthCounte++,64<b.depthCounter)throw Error("Exceeded maximum function depth");var c=a.apply(this,arguments);return b.depthCounte--,c}},aCheck:function(a,c){if(b.isFunctionParameter(a))throw Error(g.nodeErrorMessage({type:c},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===b.voidOperation?null:a},Dictionary:q,Feature:t,dictionary:function(a){for(var c={},d=0;d<a.length;d+=2){if(b.isFunctionParameter(a[d+1]))throw Error("Illegal Argument");
if(!1===b.isString(a[d]))throw Error("Illegal Argument");a[d+1]===b.voidOperation?c[a[d].toString()]=null:c[a[d].toString()]=a[d+1]}a=new q(c);return a.immutable=!1,a},strCheck:function(a,c){if(!1===b.isString(a))throw Error("Illegal Argument");return a},unary:function(a,c){if(b.isBoolean(a)){if("!"===c)return!a;if("-"===c)return-1*b.toNumber(a);if("+"===c)return 1*b.toNumber(a);throw Error(g.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===c)return-1*b.toNumber(a);
if("+"===c)return 1*b.toNumber(a);throw Error(g.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===b.isBoolean(a))throw Error(g.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));return a},logical:function(a,c,d){if(!b.isBoolean(a)||!b.isBoolean(c))throw Error(g.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));switch(d){case "||":return a||c;case "\x26\x26":return a&&c;default:throw Error(g.nodeErrorMessage("LogicalExpression",
"RUNTIME","ONLYORORAND"));}},binary:function(a,c,d){switch(d){case "\x3d\x3d":return b.equalityTest(a,c);case "\x3d":return b.equalityTest(a,c);case "!\x3d":return!b.equalityTest(a,c);case "\x3c":return b.greaterThanLessThan(a,c,d);case "\x3e":return b.greaterThanLessThan(a,c,d);case "\x3c\x3d":return b.greaterThanLessThan(a,c,d);case "\x3e\x3d":return b.greaterThanLessThan(a,c,d);case "+":return b.isString(a)||b.isString(c)?b.toString(a)+b.toString(c):b.toNumber(a)+b.toNumber(c);case "-":return b.toNumber(a)-
b.toNumber(c);case "*":return b.toNumber(a)*b.toNumber(c);case "/":return b.toNumber(a)/b.toNumber(c);case "%":return b.toNumber(a)%b.toNumber(c);default:throw Error(g.nodeErrorMessage({type:"BinaryExpression"},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(a,c,d){switch(c){case "\x3d":return a===b.voidOperation?null:a;case "/\x3d":return b.toNumber(d)/b.toNumber(a);case "*\x3d":return b.toNumber(d)*b.toNumber(a);case "-\x3d":return b.toNumber(d)-b.toNumber(a);case "+\x3d":return b.isString(d)||
b.isString(a)?b.toString(d)+b.toString(a):b.toNumber(d)+b.toNumber(a);case "%\x3d":return b.toNumber(d)%b.toNumber(a);default:throw Error(g.nodeErrorMessage("AssignmentExpression","RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,c,d,e){var g=b.toNumber(a[c]);return a[c]="++"===d?g+1:g-1,!1===e?g:"++"===d?g+1:g-1},memberupdate:function(a,c,d,e){var g;if(b.isArray(a)){if(!b.isNumber(c))throw Error("Invalid Parameter");if(0>c&&(c=a.length+c),0>c||c>=a.length)throw Error("Assignment outside of array bounds");
g=b.toNumber(a[c]);a[c]="++"===d?g+1:g-1}else{if(a instanceof q){if(!1===b.isString(c))throw Error("Dictionary accessor must be a string");}else{if(!(a instanceof t))throw b.isImmutableArray(a)?Error("Array is Immutable"):Error("Invalid Parameter");if(!1===b.isString(c))throw Error("Feature accessor must be a string");}if(!0!==a.hasField(c))throw Error("Invalid Parameter");g=b.toNumber(a.field(c));a.setField(c,"++"===d?g+1:g-1)}return!1===e?g:"++"===d?g+1:g-1},assignmember:function(a,c,d,e){if(b.isArray(a)){if(!b.isNumber(c))throw Error("Invalid Parameter");
if(0>c&&(c=a.length+c),0>c||c>a.length)throw Error("Assignment outside of array bounds");if(c===a.length&&"\x3d"!==d)throw Error("Invalid Parameter");a[c]=this.assign(e,d,a[c])}else{if(a instanceof q){if(!1===b.isString(c))throw Error("Dictionary accessor must be a string");}else{if(!(a instanceof t))throw b.isImmutableArray(a)?Error("Array is Immutable"):Error("Invalid Parameter");if(!1===b.isString(c))throw Error("Feature accessor must be a string");}if(!0===a.hasField(c))a.setField(c,this.assign(e,
d,a.field(c)));else{if("\x3d"!==d)throw Error("Invalid Parameter");a.setField(c,this.assign(e,d,null))}}},member:function(a,c){if(null===a)throw Error(g.nodeErrorMessage("MemberExpression","RUNTIME","NOTFOUND"));if(a instanceof q||a instanceof t){if(b.isString(c))return a.field(c);throw Error(g.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));}if(a instanceof B){if(b.isString(c))return I(a,c,"MemberExpression");throw Error(g.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));
}if(b.isArray(a)){if(b.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){if(0>c&&(c=a.length+c),c>=a.length||0>c)throw Error(g.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[c]}throw Error(g.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));}if(b.isString(a)){if(b.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){if(0>c&&(c=a.length+c),c>=a.length||0>c)throw Error(g.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[c]}throw Error(g.nodeErrorMessage("MemberExpression",
"RUNTIME","INVALIDTYPE"));}if(b.isImmutableArray(a)&&b.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){if(0>c&&(c=a.length()+c),c>=a.length()||0>c)throw Error(g.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a.get(c)}throw Error(g.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));},callfunc:function(a,c,d){return a instanceof b.NativeFunction?a.fn(d,c):a instanceof b.SizzleFunction?a.fn.apply(this,c):a.apply(this,c)}};h.compileScript=function(a,c){void 0===c&&(c=null);
null===c&&(c={vars:{},customfunctions:{}});c={globalScope:W(c.vars,Y,c.customfunctions),localScope:null,console:L,symbols:{symbolCounter:0}};a=z(c,a.body[0].body);""===a&&(a="lc.voidOperation;");c={lc:b,lang:X,postProcess:function(a){if(a instanceof b.ReturnResult&&(a=a.value),a instanceof b.ImplicitResult&&(a=a.value),a===b.voidOperation&&(a=null),a===b.breakResult)throw Error("Cannot return BREAK");if(a===b.continueResult)throw Error("Cannot return CONTINUE");if(b.isFunctionParameter(a))throw Error("Cannot return FUNCTION");
return a},prepare:function(a,b){b||(b=new l(102100));var c=a.vars,d=a.customfunctions,e=new V;c||(c={});d||(d={});var g=new q({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});g.immutable=!1;e._SymbolsMap={textformatting:1,infinity:1,pi:1};e.textformatting=g;e.infinity=Number.POSITIVE_INFINITY;e.pi=Math.PI;for(var k in d)e[k]=d[k],e._SymbolsMap[k]=1;for(k in c)e._SymbolsMap[k]=1,c[k]instanceof f?e[k]=new t(c[k]):e[k]=c[k];return{spatialReference:b,globalScope:e,
localScope:null,console:a.console?a.console:L,symbols:{symbolCounter:0},depthCounter:1,applicationCache:void 0===a.applicationCache?null:a.applicationCache}}};return(new Function("context","spatialReference","var runtimeCtx\x3dthis.prepare(context, spatialReference);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+a+"\n return lastStatement; } \n return this.postProcess(mainBody());")).bind(c)}})},
"dojox/html/entities":function(){define(["dojo/_base/lang"],function(a){var h=a.getObject("dojox.html.entities",!0),m=function(a,c){var d,e;if(c._encCache&&c._encCache.regexp&&c._encCache.mapper&&c.length==c._encCache.length)d=c._encCache.mapper,e=c._encCache.regexp;else{d={};e=["["];var f;for(f=0;f<c.length;f++)d[c[f][0]]="\x26"+c[f][1]+";",e.push(c[f][0]);e.push("]");e=new RegExp(e.join(""),"g");c._encCache={mapper:d,regexp:e,length:c.length}}return a=a.replace(e,function(a){return d[a]})},f=function(a,
c){var d,e;if(c._decCache&&c._decCache.regexp&&c._decCache.mapper&&c.length==c._decCache.length)d=c._decCache.mapper,e=c._decCache.regexp;else{d={};e=["("];var f;for(f=0;f<c.length;f++){var b="\x26"+c[f][1]+";";f&&e.push("|");d[b]=c[f][0];e.push(b)}e.push(")");e=new RegExp(e.join(""),"g");c._decCache={mapper:d,regexp:e,length:c.length}}return a=a.replace(e,function(a){return d[a]})};h.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];h.latin=[["\u00a1","iexcl"],["\u00a2",
"cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],
["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],
["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1",
"ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],
["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],
["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],
["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],
["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665",
"hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039",
"lsaquo"],["\u203a","rsaquo"]];h.encode=function(a,c){a&&(c?a=m(a,c):(a=m(a,h.html),a=m(a,h.latin)));return a};h.decode=function(a,c){a&&(c?a=f(a,c):(a=f(a,h.html),a=f(a,h.latin)));return a};return h})},"esri/widgets/Popup/nls/PopupRenderer":function(){define({root:{attach:"Attachments",fields:"Fields",fieldsSummary:"List of attributes and values",media:"Media",next:"Next",numCharts:"Number of charts",numImages:"Number of images",noTitle:"Untitled",previous:"Previous",view:"View"},ar:1,bs:1,cs:1,
da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,hr:1,he:1,hi:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/widgets/Spinner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./support/widget ../core/accessorSupport/decorators ./Widget ../core/promiseUtils ../core/watchUtils ./support/AnchorElementViewModel".split(" "),function(a,h,m,f,d,c,n,e,l,b){a=function(a){function c(c){c=
a.call(this)||this;return c._animationDelay=500,c._animationPromise=null,c.location=null,c.view=null,c.visible=!1,c.viewModel=new b,c}return m(c,a),c.prototype.postInitialize=function(){var a=this;this.own([l.watch(this,"visible",function(b){return a._visibleChange(b)})])},c.prototype.destroy=function(){this._cancelAnimationPromise()},c.prototype.show=function(a){var b=this,c=a.location;a=a.promise;c&&(this.viewModel.location=c);this.visible=!0;a&&a.always(function(){return b.hide()})},c.prototype.hide=
function(){this.visible=!1},c.prototype.render=function(){var a=this.visible,b=!!this.viewModel.screenLocation,a=(c={},c["esri-spinner--start"]=a&&b,c["esri-spinner--finish"]=!a&&b,c),c=this._getPositionStyles();return d.tsx("div",{"class":"esri-spinner",classes:a,styles:c});var c},c.prototype._cancelAnimationPromise=function(){this._animationPromise&&(this._animationPromise.cancel(),this._animationPromise=null)},c.prototype._visibleChange=function(a){var b=this;return a?void(this.viewModel.screenLocationEnabled=
!0):(this._cancelAnimationPromise(),void(this._animationPromise=e.after(this._animationDelay).then(function(){b.viewModel.screenLocationEnabled=!1;b._animationPromise=null})))},c.prototype._getPositionStyles=function(){var a=this.viewModel.screenLocation;return a?{left:a.x+"px",top:a.y+"px"}:{}},c}(c.declared(n));return f([c.aliasOf("viewModel.location")],a.prototype,"location",void 0),f([c.aliasOf("viewModel.view")],a.prototype,"view",void 0),f([c.property(),d.renderable()],a.prototype,"visible",
void 0),f([c.property({type:b}),d.renderable(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],a.prototype,"viewModel",void 0),a=f([c.subclass("esri.widgets.Spinner")],a)})},"esri/widgets/support/AnchorElementViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ../../core/Accessor ../../core/Evented ../../core/HandleRegistry ../../core/watchUtils".split(" "),
function(a,h,m,f,d,c,n,e,l,b){a=function(a){function d(){var c=a.call(this)||this;return c._handles=new l,c.location=null,c.screenLocation=null,c.screenLocationEnabled=!1,c.view=null,c._handles.add([b.watch(c,"screenLocationEnabled,location",function(){return c._updateScreenPointAndHandle()}),b.watch(c,"view, view.ready",function(){return c._wireUpView()})]),c}return m(d,a),d.prototype.destroy=function(){this.view=null;this._handles.destroy();this._viewpointHandle=this._handles=null},d.prototype._wireUpView=
function(){var a=this;this._handles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var b=this.view,b=c.pausable(b,"3d"===b.type?"camera":"viewpoint",function(){return a._viewpointChange()});this._handles.add(b,"view");this._viewpointHandle=b;this._toggleWatchingViewpoint()}},d.prototype._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")},d.prototype._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()},
d.prototype._toggleWatchingViewpoint=function(){var a=this._viewpointHandle,b=this.location,c=this.screenLocationEnabled;a&&(b&&c?a.resume():a.pause())},d.prototype._setScreenLocation=function(){var a=this.location,b=this.view,c=this.screenLocationEnabled,d=this.get("view.ready"),a=c&&a&&d?b.toScreen(a.x,a.y,a.z):null;this._set("screenLocation",a)},d}(d.declared(n,e));return f([d.property()],a.prototype,"location",void 0),f([d.property({readOnly:!0})],a.prototype,"screenLocation",void 0),f([d.property()],
a.prototype,"screenLocationEnabled",void 0),f([d.property()],a.prototype,"view",void 0),a=f([d.subclass("esri.widgets.support.AnchorElementViewModel")],a)})},"esri/views/PopupManager":function(){define("require ../core/promiseUtils dojo/_base/array dojo/on dojo/Deferred dojo/promise/all ../layers/support/layerUtils ../geometry/support/scaleUtils ../geometry/Extent ../tasks/support/Query ../layers/GroupLayer ../core/Accessor".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q){var t;return q.createSubclass({declaredClass:"esri.views.PopupManager",
properties:{map:{dependsOn:["view.map"],readOnly:!0}},constructor:function(){this._featureLayersCache={}},destroy:function(){this._featureLayersCache={};this.view=null},_clickHandle:null,_featureLayersCache:null,enabled:!1,_enabledSetter:function(a){this._clickHandle&&(a?this._clickHandle.resume():this._clickHandle.pause());this._set("enabled",a)},_mapGetter:function(){return this.get("view.map")||null},view:null,_viewSetter:function(a){this._clickHandle&&(this._clickHandle.remove(),this._clickHandle=
null);a&&(this._clickHandle=f.pausable(a,"click",this._clickHandler.bind(this)),this.enabled||this._clickHandle.pause());this._set("view",a)},getMapLayer:function(a){var b;if(a&&(b=a.findLayerById())&&(a=b.id,this._featureLayersCache[a])){var c=a.lastIndexOf("_");-1<c&&(a=a.substring(0,c),b=this.map.findLayerById(a))}return b},_closePopup:function(){var a=this.get("view.popup");a&&(a.clear(),a.close())},_showPopup:function(a,c){function f(a){return k.allLayerViews.find(function(b){return b.layer===
a})}function n(a){if(null==a)return!1;var b=f(a);return null==b?!1:a.loaded&&!b.suspended&&(a.popupEnabled&&a.popupTemplate||"graphics"===a.type||b.getPopupData)}function q(a){return(a=f(a))&&a.hasDraped}var k=this.view,t=k.popup,w=this,v=[],z="3d"===k.type;if(m.forEach(this.map.layers.toArray(),function(a){a.isInstanceOf(g)?m.forEach(a.layers.toArray(),function(a){!n(a)||z&&!q(a)||v.push(a)}):!n(a)||z&&!q(a)||v.push(a)}),0<k.graphics.length&&v.push(k.graphics),!c||c.popupTemplate||n(c.layer)||(c=
null),!v.length&&!c)return void w._closePopup();var A=[],D=!!c,F=w._calculateClickTolerance(v),C=a.mapPoint;if(!C)return void w._closePopup();var H=1;k.state&&(H=k.state.resolution);var I=k.basemapTerrain;I&&I.overlayManager&&(H=I.overlayManager.overlayPixelSizeInMapUnits(C));F*=H;I&&!I.spatialReference.equals(k.spatialReference)&&(F*=e.getUnitValueForSR(I.spatialReference)/e.getUnitValueForSR(k.spatialReference));var I=C.clone().offset(-F,-F),C=C.clone().offset(F,F),M=new l(Math.min(I.x,C.x),Math.min(I.y,
C.y),Math.max(I.x,C.x),Math.max(I.y,C.y),k.spatialReference),C=function(d){var e;if("imagery"===d.type){e=new b;e.geometry=a.mapPoint;var g=f(d),k={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0};k.layerView=g;e=d.queryVisibleRasters(e,k).then(function(a){return D=D||0<a.length,a})}else if("csv"===d.type||!w._featureLayersCache[d.id]&&"function"!=typeof d.queryFeatures){if("map-image"===d.type)return g=f(d),g.getPopupData(M);var l,n=[];"esri.core.Collection\x3cesri.Graphic\x3e"===
d.declaredClass?(k=d,l=!0):"graphics"===d.type?(k=d.graphics,l=!0):(g=f(d),k=g&&g.loadedGraphics,l=!1);k&&(n=k.filter(function(a){return a&&(!l||a.popupTemplate)&&a.visible&&M.intersects(a.geometry)}).toArray());0<n.length&&(D=!0,e="scene"===d.type?w._fetchSceneAttributes(d,n):h.resolve(n))}else g=d.createQuery(),g.geometry=M,e=d.queryFeatures(g).then(function(a){a=a.features;if(c&&c.layer===d&&d.objectIdField){var b=d.objectIdField,e=c.attributes[b];a=a.filter(function(a){return a.attributes[b]!==
e})}return D=D||0<a.length,a});return e};if(z&&!c||!z)var A=v.map(C).filter(function(a){return!!a}),Q=function(a){return a.reduce(function(a,b){return a.concat(b.items?Q(b.items):b)},[])},A=Q(A);c&&(c.layer&&"scene"===c.layer.type?A.unshift(this._fetchSceneAttributes(c.layer,[c])):c.getEffectivePopupTemplate()&&(C=new d,A.unshift(C.resolve([c]))));return m.some(A,function(a){return!a.isFulfilled()})||D?void(A.length&&t.open({promises:A,location:a.mapPoint})):void w._closePopup()},_fetchSceneAttributes:function(a,
b){return this.view.whenLayerView(a).then(function(c){var d=this._getOutFields(a.popupTemplate),e=b.map(function(a){return c.whenGraphicAttributes(a,d).otherwise(function(){return a})});return h.eachAlways(e)}.bind(this)).then(function(a){return a.map(function(a){return a.value})})},_getSubLayerFeatureLayers:function(b,e){var g=e||new d,l=[];e=b.length;var h=Math.floor(this.view.extent.width/this.view.width),k=this.view.scale,q=!1,w=this,v=0;a:for(;e>v;v++){var z=b[v],A=z.dynamicLayerInfos||z.layerInfos;
if(A){var D=null;z._params&&(z._params.layers||z._params.dynamicLayers)&&(D=z.visibleLayers);for(var D=n._getVisibleLayers(A,D),F=n._getLayersForScale(k,A),C=A.length,H=0;C>H;H++){var I=A[H],M=I.id,Q=z.popupTemplates[M];if(!I.subLayerIds&&Q&&Q.popupTemplate&&-1<m.indexOf(D,M)&&-1<m.indexOf(F,M)){if(!t){q=!0;break a}var K=z.id+"_"+M,G=this._featureLayersCache[K];G&&G.loadError||(G||((G=Q.layerUrl)||(G=I.source?this._getLayerUrl(z.url,"/dynamicLayer"):this._getLayerUrl(z.url,M)),G=new t(G,{id:K,drawMode:!1,
mode:t.MODE_SELECTION,outFields:this._getOutFields(Q.popupTemplate),resourceInfo:Q.resourceInfo,source:I.source}),this._featureLayersCache[K]=G),G.setDefinitionExpression(z.layerDefinitions&&z.layerDefinitions[M]),G.setGDBVersion(z.gdbVersion),G.popupTemplate=Q.popupTemplate,G.setMaxAllowableOffset(h),G.setUseMapTime(!!z.useMapTime),z.layerDrawingOptions&&z.layerDrawingOptions[M]&&z.layerDrawingOptions[M].renderer&&G.setRenderer(z.layerDrawingOptions[M].renderer),l.push(G))}}}}if(q){var N=new d;a(["../layers/FeatureLayer"],
function(a){t=a;N.resolve()});N.then(function(){w._getSubLayerFeatureLayers(b,g)})}else{var S=[];m.forEach(l,function(a){if(!a.loaded){var b=new d;f.once(a,"load, error",function(){b.resolve()});S.push(b.promise)}});S.length?c(S).then(function(){l=m.filter(l,function(a){return!a.loadError&&a.isVisibleAtScale(k)});g.resolve(l)}):(l=m.filter(l,function(a){return a.isVisibleAtScale(k)}),g.resolve(l))}return g.promise},_getLayerUrl:function(a,b){var c=a.indexOf("?");return-1===c?a+"/"+b:a.substring(0,
c)+"/"+b+a.substring(c)},_getOutFields:function(a){var b;return"esri.PopupTemplate"===a.declaredClass&&a.fieldInfos?(b=[],m.forEach(a.fieldInfos,function(a){var c=a.fieldName&&a.fieldName.toLowerCase();c&&"shape"!==c&&0!==c.indexOf("relationships/")&&b.push(a.fieldName)})):b=["*"],b},_calculateClickTolerance:function(a){var b=6;return m.forEach(a,function(a){if(a=a.renderer)"simple"===a.type?((a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset))),a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))):
"uniqueValue"!==a.type&&"classBreaks"!==a.type||m.forEach(a.uniqueValueInfos||a.classBreakInfos,function(a){(a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset)));a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))})}),b},_clickHandler:function(a){function b(a){return c.allLayerViews.find(function(b){return b.layer===a})}var c=this.view,d=c.popup,e=c.map,f=a.screenPoint,l=this;if(0===a.button&&d&&c.ready){var h="3d"===c.type,n=e.allLayers.some(function(a){if(a.isInstanceOf(g))a=!1;else{var c;
null==a?c=!1:(c=b(a),c=null==c?!1:a.loaded&&!c.suspended&&(a.popupEnabled&&a.popupTemplate||"graphics"===a.type||c.getPopupData));!(c=!c)&&(c=h)&&(a=b(a),c=!(a&&a.hasDraped));a=c?!1:!0}return a});return null!=f?void this.view.hitTest(f.x,f.y).then(function(b){n||0<b.results.length?l._showPopup(a,0<b.results.length?b.results[0].graphic:null):l._closePopup()}):void l._showPopup(a)}}})})},"esri/layers/support/layerUtils":function(){define(["dojo/_base/array"],function(a){return{_serializeLayerDefinitions:function(h){var m=
[],f=!1,d=/[:;]/;if(h&&(a.forEach(h,function(a,c){a&&(m.push([c,a]),!f&&d.test(a)&&(f=!0))}),0<m.length)){var c;return f?(c={},a.forEach(m,function(a){c[a[0]]=a[1]}),c=JSON.stringify(c)):(c=[],a.forEach(m,function(a){c.push(a[0]+":"+a[1])}),c=c.join(";")),c}return null},_serializeTimeOptions:function(h,m){if(h){var f=[];return a.forEach(h,function(d,c){d&&(d=d.toJSON(),m&&-1!==a.indexOf(m,c)&&(d.useTime=!1),f.push('"'+c+'":'+JSON.stringify(d)))}),f.length?"{"+f.join(",")+"}":void 0}},_getVisibleLayers:function(h,
m){var f,d,c=[];if(!h)return c;if(m)for(c=m.concat(),d=0;d<h.length;d++)m=h[d],f=a.indexOf(h,m.id),m.subLayerIds&&-1<f&&(c.splice(f,1),c=c.concat(m.subLayerIds));else c=this._getDefaultVisibleLayers(h);return c},_getDefaultVisibleLayers:function(h){var m,f=[];if(!h)return f;for(m=0;m<h.length;m++)0<=h[m].parentLayerId&&-1===a.indexOf(f,h[m].parentLayerId)&&a.some(h,function(a){return a.id===h[m].parentLayerId})||h[m].defaultVisibility&&f.push(h[m].id);return f},_getLayersForScale:function(h,m){var f=
[];if(0<h&&m){var d;for(d=0;d<m.length;d++)if(!(0<=m[d].parentLayerId&&-1===a.indexOf(f,m[d].parentLayerId)&&a.some(m,function(a){return a.id===m[d].parentLayerId}))&&0<=m[d].id){var c=!0,n=m[d].maxScale,e=m[d].minScale;(0<n||0<e)&&(0<n&&0<e?c=h>=n&&e>=h:0<n?c=h>=n:0<e&&(c=e>=h));c&&f.push(m[d].id)}}return f}}})},"esri/layers/GroupLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Layer ../core/MultiOriginJSONSupport ./mixins/PortalLayer ./mixins/OperationalLayer ../support/LayersMixin ../core/accessorSupport/utils ../core/accessorSupport/decorators".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g){a=function(a){function c(b){b=a.call(this)||this;return b._visibilityHandles={},b.fullExtent=void 0,b.operationalLayerType="GroupLayer",b.spatialReference=void 0,b.type="group",b._visibilityWatcher=b._visibilityWatcher.bind(b),b}return m(c,a),c.prototype.initialize=function(){this._enforceVisibility(this.visibilityMode,this.visible);this.watch("visible",this._visibleWatcher.bind(this),!0)},c.prototype._writeLayers=function(a,b,c,d){var e=[];return a?(a.forEach(function(a){a.write&&
(a=a.write(null,d))&&a.layerType&&e.push(a)}),void(b.layers=e)):e},Object.defineProperty(c.prototype,"visibilityMode",{set:function(a){var b=this._get("visibilityMode")!==a;this._set("visibilityMode",a);b&&this._enforceVisibility(a,this.visible)},enumerable:!0,configurable:!0}),c.prototype.load=function(){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]})),this},c.prototype.layerAdded=function(a,b){a.visible&&"exclusive"===
this.visibilityMode?this._turnOffOtherLayers(a):"inherited"===this.visibilityMode&&(a.visible=this.visible);this._visibilityHandles[a.uid]=a.watch("visible",this._visibilityWatcher,!0)},c.prototype.layerRemoved=function(a,b){(b=this._visibilityHandles[a.uid])&&(b.remove(),delete this._visibilityHandles[a.uid]);this._enforceVisibility(this.visibilityMode,this.visible)},c.prototype._turnOffOtherLayers=function(a){this.layers.forEach(function(b){b!==a&&(b.visible=!1)})},c.prototype._enforceVisibility=
function(a,c){if(b.getProperties(this).initialized){var d=this.layers,e=d.find(function(a){return a.visible});switch(a){case "exclusive":d.length&&!e&&(e=d.getItemAt(0),e.visible=!0);this._turnOffOtherLayers(e);break;case "inherited":d.forEach(function(a){a.visible=c})}}},c.prototype._visibleWatcher=function(a){"inherited"===this.visibilityMode&&this.layers.forEach(function(b){b.visible=a})},c.prototype._visibilityWatcher=function(a,b,c,d){switch(this.visibilityMode){case "exclusive":a?this._turnOffOtherLayers(d):
this._isAnyLayerVisible()||(d.visible=!0);break;case "inherited":d.visible=this.visible}},c.prototype._isAnyLayerVisible=function(){return this.layers.some(function(a){return a.visible})},c}(g.declared(d,l,c,e,n));return f([g.shared({"2d":"../views/layers/GroupLayerView","3d":"../views/layers/GroupLayerView"})],a.prototype,"viewModulePaths",void 0),f([g.property()],a.prototype,"fullExtent",void 0),f([g.property({json:{read:!1,write:{ignoreOrigin:!0}}})],a.prototype,"layers",void 0),f([g.writer("layers")],
a.prototype,"_writeLayers",null),f([g.property()],a.prototype,"operationalLayerType",void 0),f([g.property({json:{write:!1}})],a.prototype,"portalItem",void 0),f([g.property()],a.prototype,"spatialReference",void 0),f([g.property({json:{read:!1},readOnly:!0,value:"group"})],a.prototype,"type",void 0),f([g.property({json:{read:!1,write:!1}})],a.prototype,"url",void 0),f([g.property({value:"independent",json:{write:!0}})],a.prototype,"visibilityMode",null),a=f([g.subclass("esri.layers.GroupLayer")],
a)})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ./UI ./Component ../../widgets/Attribution ../../widgets/Compass ../../widgets/Zoom ../../widgets/NavigationToggle dojo/dom-geometry".split(" "),function(a,h,m,f,d,c,n,e,l,b,g,q,t){a=function(a){function d(b){b=a.call(this)||this;return b._defaultPositionLookup=null,b.components=[],b}return m(d,
a),d.prototype.initialize=function(){this._handles.add([c.init(this,"components",this._componentsWatcher.bind(this)),c.init(this,"view",this._updateViewAwareWidgets.bind(this))])},d.prototype._findComponentPosition=function(a){if(!this._defaultPositionLookup){var b=t.isBodyLtr();this._defaultPositionLookup={attribution:"manual",compass:b?"top-left":"top-right","navigation-toggle":b?"top-left":"top-right",zoom:b?"top-left":"top-right"}}return this._defaultPositionLookup[a]},d.prototype._removeComponents=
function(a){var b=this;a.forEach(function(a){(a=b.find(a))&&(b.remove(a),a.destroy())})},d.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b.find(c))&&c.widget)&&void 0!==c.view&&c.set("view",a)})},d.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a)},d.prototype._addComponents=function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),b._findComponentPosition(a))})},
d.prototype._createComponent=function(a){var b=this._createWidget(a);return b?new e({id:a,node:b}):void 0},d.prototype._createWidget=function(a){return"attribution"===a?this._createAttribution():"compass"===a?this._createCompass():"navigation-toggle"===a?this._createNavigationToggle():"zoom"===a?this._createZoom():void 0},d.prototype._createAttribution=function(){return new l({view:this.view})},d.prototype._createCompass=function(){return new b({view:this.view})},d.prototype._createNavigationToggle=
function(){return new q({view:this.view})},d.prototype._createZoom=function(){return new g({view:this.view})},d}(d.declared(n));return f([d.property()],a.prototype,"components",void 0),a=f([d.subclass("esri.views.ui.DefaultUI")],a)})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Component ../../core/Accessor ../../core/HandleRegistry ../../core/watchUtils dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t){function w(a){return"object"!=typeof a||a&&a.isInstanceOf&&a.isInstanceOf(c)||!("component"in a||"index"in a||"position"in a)?null:a}var v={left:0,top:0,bottom:0,right:0},r={bottom:30,top:15,right:15,left:15};a=function(a){function d(){var b=a.call(this)||this;return b._cornerNameToContainerLookup={},b._positionNameToContainerLookup={},b._components=[],b._handles=new e,b.padding=r,b.view=null,b._initContainers(),b}return m(d,a),d.prototype.initialize=function(){this._handles.add([l.init(this,
"view.padding, container",this._applyViewPadding.bind(this)),l.init(this,"padding",this._applyUIPadding.bind(this))])},d.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy()},Object.defineProperty(d.prototype,"container",{set:function(a){var b=this._get("container");a!==b&&(a&&(g.add(a,"esri-ui"),this._attachContainers(a)),b&&(g.remove(b,"esri-ui"),t.set(b,{top:"",bottom:"",left:"",right:""}),q.empty(b)),
this._set("container",a))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0}),d.prototype.castPadding=function(a){return"number"==typeof a?{bottom:a,top:a,right:a,left:a}:b.mixin({},r,a)},Object.defineProperty(d.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();
return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0}),d.prototype.add=function(a,b){var d,e=this;if(Array.isArray(a))return void a.forEach(function(a){return e.add(a,b)});var g=w(a);g&&(d=g.index,b=g.position,a=g.component);b&&"object"==typeof b&&(d=b.index,b=b.position);!a||b&&!this._isValidPosition(b)||(!!a&&a.isInstanceOf&&a.isInstanceOf(c)||(a=new c({node:a})),this._place({component:a,position:b,index:d}),this._components.push(a))},d.prototype.remove=function(a){if(a){if(Array.isArray(a))return a.map(this.remove,
this);if(a=this.find(a)){var b=this._components.indexOf(a);return a.node.parentNode&&a.node.parentNode.removeChild(a.node),this._components.splice(b,1)[0]}}},d.prototype.empty=function(a){var b=this;return Array.isArray(a)?a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)}):(a=a||"manual","manual"===a)?Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!g.contains(a,"esri-ui-corner")}).map(function(a){return b.remove(a)}):this._isValidPosition(a)?
Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,this):void 0},d.prototype.move=function(a,b){var c=this;if(Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)}),a){var d,e=w(a)||w(b);(e&&(d=e.index,b=e.position,a=e.component||a),!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}},d.prototype.find=function(a){return a?a&&a.isInstanceOf&&a.isInstanceOf(c)?this._findByComponent(a):"string"==typeof a?this._findById(a):
this._findByNode(a.domNode||a):null},d.prototype._getViewPadding=function(){return this.get("view.padding")||v},d.prototype._attachContainers=function(a){q.place(this._manualContainer,a);q.place(this._innerContainer,a)},d.prototype._initContainers=function(){var a=q.create("div",{className:"esri-ui-inner-container esri-ui-corner-container"}),c=q.create("div",{className:"esri-ui-inner-container esri-ui-manual-container"}),d=q.create("div",{className:"esri-ui-top-left esri-ui-corner"},a),e=q.create("div",
{className:"esri-ui-top-right esri-ui-corner"},a),g=q.create("div",{className:"esri-ui-bottom-left esri-ui-corner"},a),f=q.create("div",{className:"esri-ui-bottom-right esri-ui-corner"},a);this._innerContainer=a;this._manualContainer=c;this._cornerNameToContainerLookup={"top-left":d,"top-right":e,"bottom-left":g,"bottom-right":f};this._positionNameToContainerLookup=b.mixin({manual:c},this._cornerNameToContainerLookup)},d.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]},
d.prototype._place=function(a){var b,c=a.component,d=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];return-1<d?(b=Array.prototype.slice.call(a.children),0===d?void this._placeComponent(c,a,"first"):d>=b.length?void this._placeComponent(c,a,"last"):void this._placeComponent(c,b[d],"before")):void this._placeComponent(c,a,"last")},d.prototype._placeComponent=function(a,b,c){var d=a.widget;d&&!d._started&&"function"==typeof d.postMixInProperties&&"function"==typeof d.buildRendering&&
"function"==typeof d.postCreate&&"function"==typeof d.startup&&a.widget.startup();q.place(a.node,b,c)},d.prototype._applyViewPadding=function(){var a=this.container;a&&t.set(a,this._toPxPosition(this._getViewPadding()))},d.prototype._applyUIPadding=function(){this._innerContainer&&t.set(this._innerContainer,this._toPxPosition(this.padding))},d.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}},
d.prototype._toPxUnit=function(a){return 0===a?0:a+"px"},d.prototype._findByComponent=function(a){var b,c=null;return this._components.some(function(d){return b=d===a,b&&(c=d),b}),c},d.prototype._findById=function(a){var b,c=null;return this._components.some(function(d){return b=d.id===a,b&&(c=d),b}),c},d.prototype._findByNode=function(a){var b,c=null;return this._components.some(function(d){return b=d.node===a,b&&(c=d),b}),c},d}(d.declared(n));return f([d.property()],a.prototype,"container",null),
f([d.property()],a.prototype,"height",null),f([d.property()],a.prototype,"padding",void 0),f([d.cast("padding")],a.prototype,"castPadding",null),f([d.property()],a.prototype,"view",void 0),f([d.property()],a.prototype,"width",null),a=f([d.subclass("esri.views.ui.UI")],a)})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor dojo/dom dojo/dom-class".split(" "),
function(a,h,m,f,d,c,n,e){a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.widget=null,b}return m(b,a),b.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null},Object.defineProperty(b.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(a){this._set("id",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"node",{set:function(a){var b=this._get("node");a!==b&&(a&&e.add(a,"esri-component"),
b&&e.remove(b,"esri-component"),this._set("node",a))},enumerable:!0,configurable:!0}),b.prototype.castNode=function(a){return a?"string"==typeof a||a&&"nodeType"in a?(this._set("widget",null),n.byId(a)):(a&&"function"==typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div")),this._set("widget",a),a.domNode):(this._set("widget",null),null)},b}(d.declared(c));return f([d.property()],a.prototype,"id",null),f([d.property()],a.prototype,"node",null),f([d.cast("node")],a.prototype,"castNode",
null),f([d.property({readOnly:!0})],a.prototype,"widget",void 0),a=f([d.subclass("esri.views.ui.Component")],a)})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Attribution/AttributionViewModel".split(" "),function(a,h,m,f,d,c,n,e){a=function(a){function b(b){b=a.call(this)||this;return b._isOpen=!1,b._attributionTextOverflowed=!1,b._prevSourceNodeHeight=
0,b.view=null,b.viewModel=new e,b}return m(b,a),b.prototype.render=function(){var a=(b={},b["esri-attribution--open"]=this._isOpen,b);return c.tsx("div",{bind:this,"class":"esri-attribution esri-widget",classes:a,onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),c.tsx("div",{"class":"esri-attribution__powered-by"},"Powered by ",c.tsx("a",{target:"_blank",href:"http://www.esri.com/","class":"esri-attribution__link"},"Esri")));var b},b.prototype._renderSourcesNode=function(){var a=
this._isOpen,b=this._isInteractive(),d=b?0:-1,e=this.get("viewModel.attributionText"),a=(f={},f["esri-attribution__sources--open"]=a,f["esri-interactive"]=b,f);return c.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,"class":"esri-attribution__sources",classes:a,innerHTML:e,role:b?"button":void 0,tabIndex:d});var f},b.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth},b.prototype._afterSourcesNodeUpdate=function(a){var b=
!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;if(this._attributionTextOverflowed=a,d&&(b=!0),this._isOpen)a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0);b&&this.scheduleRender()},b.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)},b.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed},b}(d.declared(n));return f([d.aliasOf("viewModel.view")],
a.prototype,"view",void 0),f([d.property({type:e}),c.renderable(["attributionText","state","view.size"])],a.prototype,"viewModel",void 0),f([c.accessibleHandler()],a.prototype,"_toggleState",null),a=f([d.subclass("esri.widgets.Attribution")],a)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../geometry/support/webMercatorUtils ../../core/HandleRegistry ../../core/Accessor ../../core/lang ../../core/watchUtils ../../geometry/Extent".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g){a=function(a){function d(b){b=a.call(this,b)||this;return b._handles=new n,b._pendingAttributionItemsByLayerId={},b._attributionDataByLayerId={},b.itemDelimiter=" | ",b.items=[],b.view=null,b._updateAttributionItems=b._updateAttributionItems.bind(b),b}return m(d,a),d.prototype.initialize=function(){this._handles.add(b.init(this,"view",this._viewWatcher))},d.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null},Object.defineProperty(d.prototype,
"attributionText",{get:function(){return this.items.join(this.itemDelimiter)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0}),d.prototype._viewWatcher=function(a){var c=this,d=this._handles;d&&d.remove();a&&(d.add([a.allLayerViews.on("change",function(a){c._addLayerViews(a.added);0<a.removed.length&&(a.removed.forEach(function(a){d.remove(a.uid)}),c._updateAttributionItems())}),
b.init(a,"stationary",this._updateAttributionItems)]),this._addLayerViews(a.allLayerViews))},d.prototype._addLayerViews=function(a){var c=this;a.forEach(function(a){c._handles.has(a.uid)||c._handles.add(b.init(a,"suspended",c._updateAttributionItems),a.uid)})},d.prototype._updateAttributionItems=function(){var a=this,b=[];this._getActiveLayerViews().forEach(function(c){var d=c.layer;if(!d.hasAttributionData)return c=d.get("copyright"),void(a._isUnique(b,c)&&b.push(c));if(d&&d.tileInfo){var e=a._attributionDataByLayerId;
if(e[d.uid])return c=a._getDynamicAttribution(e[d.uid],a.view,d),void(a._isUnique(b,c)&&b.push(c));var g=a._pendingAttributionItemsByLayerId;a._inProgress(g[d.uid])||(g[d.uid]=d.fetchAttributionData().then(function(b){b=a._createContributionIndex(b,a._isBingLayer(d));delete g[d.uid];e[d.uid]=b;a._updateAttributionItems()}))}});this._itemsChanged(this.items,b)&&this._set("items",b)},d.prototype._itemsChanged=function(a,b){return a.length!==b.length||a.some(function(a,c){return a!==b[c]})},d.prototype._inProgress=
function(a){return a&&!a.isFulfilled()},d.prototype._getActiveLayerViews=function(){return this.get("view.allLayerViews").filter(function(a){return!a.suspended&&a.get("layer.attributionVisible")})},d.prototype._isUnique=function(a,b){return b&&-1===a.indexOf(b)},d.prototype._isBingLayer=function(a){return-1!==a.declaredClass.toLowerCase().indexOf("vetiledlayer")},d.prototype._createContributionIndex=function(a,b){a=a.contributors;var d={};return a?(a.forEach(function(a,e){var f=a.coverageAreas;f&&
f.forEach(function(f){var k=f.bbox,h=f.zoomMin-(b&&f.zoomMin?1:0),n=f.zoomMax-(b&&f.zoomMax?1:0);a={extent:c.geographicToWebMercator(new g({xmin:k[1],ymin:k[0],xmax:k[3],ymax:k[2]})),attribution:a.attribution||"",score:l.isDefined(f.score)?f.score:100,id:e};for(f=h;n>=f;f++)d[f]=d[f]||[],d[f].push(a)})}),d.maxKey=Math.max.apply(null,Object.keys(d)),d):d},d.prototype._getDynamicAttribution=function(a,b,c){var d=b.extent;b=c.tileInfo.scaleToZoom(b.scale);if(b=Math.min(a.maxKey,Math.round(b)),!d||!l.isDefined(b)||
-1>=b)return"";a=a[b];var e=d.center.clone().normalize(),g={};return a.filter(function(a){var b=!g[a.id]&&a.extent.contains(e);return b&&(g[a.id]=!0),b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", ")},d}(d.declared(e));return f([d.property({dependsOn:["items","itemDelimiter"],readOnly:!0})],a.prototype,"attributionText",null),f([d.property()],a.prototype,"itemDelimiter",void 0),f([d.property({readOnly:!0})],a.prototype,"items",
void 0),f([d.property({dependsOn:["view.ready"],readOnly:!0})],a.prototype,"state",null),f([d.property()],a.prototype,"view",void 0),a=f([d.subclass("esri.widgets.Attribution.AttributionViewModel")],a)})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Compass/CompassViewModel dojo/i18n!./Compass/nls/Compass".split(" "),function(a,h,m,f,d,c,n,e,l){a=function(a){function b(b){b=
a.call(this)||this;return b.view=null,b.viewModel=new e,b}return m(b,a),b.prototype.reset=function(){},b.prototype.render=function(){var a=this.viewModel.orientation,b=this.viewModel.state,d="disabled"===b,e="compass"===("rotation"===b?"rotation":"compass"),b=(g={},g["esri-disabled"]=d,g["esri-interactive"]=!d,g),g=(f={},f["esri-icon-compass"]=e,f["esri-icon-dial"]=!e,f);return c.tsx("div",{bind:this,"class":"esri-compass esri-widget-button esri-widget",classes:b,onclick:this._reset,onkeydown:this._reset,
role:"button",tabIndex:d?-1:0},c.tsx("span",{"aria-hidden":"true","class":"esri-compass__icon",classes:g,styles:this._toRotationTransform(a),title:l.reset}),c.tsx("span",{"class":"esri-icon-font-fallback-text"},l.reset));var g,f},b.prototype._reset=function(){this.reset()},b.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+a.z+"deg)"}},b}(d.declared(n));return f([d.aliasOf("viewModel.view")],a.prototype,"view",void 0),f([d.property({type:e}),c.renderable(["viewModel.orientation",
"viewModel.state"])],a.prototype,"viewModel",void 0),f([d.aliasOf("viewModel.reset")],a.prototype,"reset",null),f([c.accessibleHandler()],a.prototype,"_reset",null),a=f([d.subclass("esri.widgets.Compass")],a)})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/HandleRegistry ../../core/Accessor ../../core/watchUtils".split(" "),function(a,h,m,f,d,
c,n,e){a=function(a){function b(b){b=a.call(this,b)||this;return b._handles=new c,b.orientation={x:0,y:0,z:0},b.view=null,b._updateForCamera=b._updateForCamera.bind(b),b._updateForRotation=b._updateForRotation.bind(b),b._updateRotationWatcher=b._updateRotationWatcher.bind(b),b}return m(b,a),b.prototype.initialize=function(){this._handles.add(e.init(this,"view",this._updateRotationWatcher))},b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null},Object.defineProperty(b.prototype,
"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return a&&(a.isWebMercator||4326===a.wkid)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0}),b.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.view.goTo(a)}},b.prototype._updateForRotation=function(a){void 0!==
a&&null!==a&&(this.orientation={z:a})},b.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})},b.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(e.init(this,"view.rotation",this._updateForRotation)):this._handles.add(e.init(this,"view.camera",this._updateForCamera)))},b}(d.declared(n));return f([d.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],a.prototype,
"canShowNorth",null),f([d.property()],a.prototype,"orientation",void 0),f([d.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],a.prototype,"state",null),f([d.property()],a.prototype,"view",void 0),a=f([d.subclass("esri.widgets.CompassViewModel")],a)})},"esri/widgets/Compass/nls/Compass":function(){define({root:{reset:"Reset compass orientation"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,
sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel dojo/i18n!./Zoom/nls/Zoom".split(" "),function(a,h,m,f,d,c,n,e,l,b){a=function(a){function d(b){b=a.call(this)||this;return b.layout="vertical",b.view=null,b.viewModel=new l,b}return m(d,a),d.prototype.postInitialize=
function(){this._zoomInButton=new e({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus",title:b.zoomIn});this._zoomOutButton=new e({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus",title:b.zoomOut})},d.prototype.render=function(){var a=this.viewModel,b=(d={},d["esri-zoom--horizontal"]="horizontal"===this.layout,d);return this._zoomInButton.enabled="ready"===a.state&&a.canZoomIn,this._zoomOutButton.enabled="ready"===a.state&&a.canZoomOut,c.tsx("div",{"class":"esri-zoom esri-widget",
classes:b},this._zoomInButton.render(),this._zoomOutButton.render());var d},d.prototype.zoomIn=function(){},d.prototype.zoomOut=function(){},d}(d.declared(n));return f([d.property(),c.renderable()],a.prototype,"layout",void 0),f([d.aliasOf("viewModel.view"),c.renderable()],a.prototype,"view",void 0),f([d.property({type:l}),c.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],a.prototype,"viewModel",void 0),f([d.aliasOf("viewModel.zoomIn")],a.prototype,"zoomIn",null),f([d.aliasOf("viewModel.zoomOut")],
a.prototype,"zoomOut",null),a=f([d.subclass("esri.widgets.Zoom")],a)})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/widget ../Widget".split(" "),function(a,h,m,f,d,c,n){a=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;return b.enabled=!0,b.iconClass="",b.title="",b}return m(d,a),d.prototype.render=function(){var a=this.enabled?
0:-1,d=(e={},e["esri-disabled"]=!this.enabled,e["esri-interactive"]=this.enabled,e),e=(f={},f[this.iconClass]=!!this.iconClass,f);return c.tsx("div",{bind:this,"class":"esri-widget-button esri-widget",classes:d,onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:a,title:this.title},c.tsx("span",{"aria-hidden":"true",role:"presentation","class":"esri-icon",classes:e}),c.tsx("span",{"class":"esri-icon-font-fallback-text"},this.title));var e,f},d.prototype._triggerAction=
function(){this.action.call(this)},d}(d.declared(n));return f([d.property()],a.prototype,"action",void 0),f([d.property(),c.renderable()],a.prototype,"enabled",void 0),f([d.property(),c.renderable()],a.prototype,"iconClass",void 0),f([d.property(),c.renderable()],a.prototype,"title",void 0),f([c.accessibleHandler()],a.prototype,"_triggerAction",null),a=f([d.subclass("esri.widgets.IconButton")],a)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor".split(" "),
function(a,h,m,f,d,c){a=function(a){function c(c){c=a.call(this,c)||this;return c.view=null,c.zoomIn=c.zoomIn.bind(c),c.zoomOut=c.zoomOut.bind(c),c}return m(c,a),c.prototype.destroy=function(){this.view=null},Object.defineProperty(c.prototype,"canZoomIn",{get:function(){if("2d"!==this.get("view.type"))return!0;var a=this.get("view.scale"),b=this.get("view.constraints.effectiveMaxScale");return 0===b||a>b},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"canZoomOut",{get:function(){if("2d"!==
this.get("view.type"))return!0;var a=this.get("view.scale"),b=this.get("view.constraints.effectiveMinScale");return 0===b||b>a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0}),c.prototype.zoomIn=function(){this.canZoomIn&&this._zoomToFactor(.5)},c.prototype.zoomOut=function(){this.canZoomOut&&this._zoomToFactor(2)},c.prototype._zoomToFactor=function(a){"ready"===this.state&&
this.view.goTo({scale:this.get("view.scale")*a})},c}(d.declared(c));return f([d.property({dependsOn:["view.ready","view.scale"],readOnly:!0})],a.prototype,"canZoomIn",null),f([d.property({dependsOn:["view.ready","view.scale"],readOnly:!0})],a.prototype,"canZoomOut",null),f([d.property({dependsOn:["view.ready"],readOnly:!0})],a.prototype,"state",null),f([d.property()],a.prototype,"view",void 0),a=f([d.subclass("esri.widgets.Zoom.ZoomViewModel")],a)})},"esri/widgets/Zoom/nls/Zoom":function(){define({root:{zoomIn:"Zoom In",
zoomOut:"Zoom Out"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./NavigationToggle/NavigationToggleViewModel dojo/i18n!./NavigationToggle/nls/NavigationToggle".split(" "),
function(a,h,m,f,d,c,n,e,l){a=function(a){function b(b){b=a.call(this)||this;return b.view=null,b.viewModel=new e,b}return m(b,a),Object.defineProperty(b.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0}),b.prototype.toggle=function(){},b.prototype.render=function(){var a="disabled"===this.get("viewModel.state"),b="pan"===this.get("viewModel.navigationMode"),d=(e={},e["esri-disabled"]=a,e),e=(g={},g["esri-navigation-toggle__button--active"]=
b,g),b=(f={},f["esri-navigation-toggle__button--active"]=!b,f);return c.tsx("div",{bind:this,"class":"esri-navigation-toggle esri-widget",classes:d,onclick:this._toggle,onkeydown:this._toggle,tabIndex:a?-1:0,title:l.toggle},c.tsx("div",{"class":c.join("esri-navigation-toggle__button esri-widget-button","esri-navigation-toggle__button--pan"),classes:e},c.tsx("span",{"class":"esri-icon-pan"})),c.tsx("div",{"class":c.join("esri-navigation-toggle__button esri-widget-button","esri-navigation-toggle__button--rotate"),
classes:b},c.tsx("span",{"class":"esri-icon-rotate"})));var e,g,f},b.prototype._toggle=function(){this.toggle()},b}(d.declared(n));return f([d.property({value:"vertical"}),c.renderable()],a.prototype,"layout",null),f([d.aliasOf("viewModel.view"),c.renderable()],a.prototype,"view",void 0),f([d.property({type:e}),c.renderable(["viewModel.state","viewModel.navigationMode"])],a.prototype,"viewModel",void 0),f([d.aliasOf("viewModel.toggle")],a.prototype,"toggle",null),f([c.accessibleHandler()],a.prototype,
"_toggle",null),a=f([d.subclass("esri.widgets.NavigationToggle")],a)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ../../core/Accessor ../../core/HandleRegistry".split(" "),function(a,h,m,f,d,c,n,e){a=function(a){function b(b){b=a.call(this,b)||this;return b._handles=new e,b.navigationMode="pan",b.view=null,b.toggle=
b.toggle.bind(b),b}return m(b,a),b.prototype.initialize=function(){this._handles.add(c.when(this,"view.inputManager",this._setNavigationMode.bind(this)))},b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null},Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0}),b.prototype.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?
"pan":"rotate",this._setNavigationMode())},b.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"},b}(d.declared(n));return f([d.property({dependsOn:["view.ready"],readOnly:!0})],a.prototype,"state",null),f([d.property()],a.prototype,"navigationMode",void 0),f([d.property()],a.prototype,"view",void 0),a=f([d.subclass("esri.widgets.NavigationToggleViewModel")],a)})},"esri/widgets/NavigationToggle/nls/NavigationToggle":function(){define({root:{toggle:"Toggle to pan or rotate in 3D"},
ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI dojo/_base/lang".split(" "),function(a,h,m,f,d,c,n){a=function(a){function c(){return a.call(this)||
this}return m(c,a),c.prototype.getDefaults=function(){return n.mixin(this.inherited(arguments),{components:["attribution","zoom"]})},c}(d.declared(c));return a=f([d.subclass("esri.views.ui.2d.DefaultUI2D")],a)})},"esri/views/2d/engine/Stage":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/promiseUtils ../../../core/Scheduler ../FrameBudget ./DOMContainer ./StageGL ./Container".split(" "),function(a,h,m,f,d,c,n,e,l){function b(a){if(a instanceof e)return a;if(a instanceof
l){var c=0;for(a=a.children;c<a.length;c++){var d=b(a[c]);if(d)return d}}return null}return function(a){function e(b){var e=a.call(this)||this;return e.element=b,e._budget=new c,e._renderParameters={budget:e._budget,state:e.state,devicePixelRatio:window.devicePixelRatio,stationary:!1},e._renderRequested=!1,e._taskHandle=d.addFrameTask({render:function(){return e.renderFrame()}}),e._stationary=!0,e.attached=!0,e._taskHandle.pause(),e}return m(e,a),e.prototype.destroy=function(){this.removeAllChildren();
this.renderFrame();this._taskHandle.remove();this._taskHandle=null},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(a){this._state=a;this.requestRender()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stationary",{get:function(){return this._stationary},set:function(a){this._stationary!==a&&(this._stationary=a,this.requestRender())},enumerable:!0,configurable:!0}),e.prototype.start=function(){this._taskHandle.resume()},e.prototype.stop=
function(){this._taskHandle.isPaused()||this._taskHandle.pause()},e.prototype.requestRender=function(){this._renderRequested=!0;this._taskHandle&&this._taskHandle.isPaused()&&this._taskHandle.resume()},e.prototype.takeScreenshot=function(a){var c=b(this);return c?c.takeScreenshot(a):f.reject("Could not find an object capable of capturing screenshot!")},e.prototype.renderFrame=function(){this._renderRequested&&(this._renderRequested=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=
this.stationary,this._renderParameters.devicePixelRatio=window.devicePixelRatio,this.processRender(this._renderParameters));this._renderRequested||this._taskHandle.pause()},e}(n)})},"esri/views/2d/engine/DOMContainer":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Container"],function(a,h,m,f){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}return m(c,a),c.prototype.createElement=function(){var a=document.createElement("div");return a.setAttribute("class",
"esri-display-object"),a},c.prototype.setElement=function(a){this.element=a},c.prototype.doRender=function(c){var d=this.element.style;return this.visible?(d.display="block",d.opacity=""+this.opacity,a.prototype.doRender.call(this,c),void 0):void(d.display="none")},c.prototype.prepareChildrenRenderParameters=function(a){return a},c.prototype.attachChild=function(a,c){var d=a.element;return d||(d=a.createElement(),a.setElement(d)),a.attach(c)},c.prototype.detachChild=function(a,c){a.detach(c);this.element.removeChild(a.element);
a.setElement(null)},c.prototype.renderChildren=function(c){for(var d=this.children,f=this.element.childNodes,b=0,g=d.length,h=0;g>h;h++)if(d[h].attached){var n=d[h].element;f[b]!==n&&(null!=f[b+1]?this.element.insertBefore(n,f[b]):this.element.appendChild(n));b+=1}a.prototype.renderChildren.call(this,c)},c}(f)})},"esri/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(a,h,m,f){var d;!function(a){a[a.BEFORE=0]="BEFORE";
a[a.ATTACHING=1]="ATTACHING";a[a.DETACHING=2]="DETACHING";a[a.RENDERING=3]="RENDERING";a[a.AFTER=4]="AFTER";a[a.DONE=5]="DONE"}(d||(d={}));return function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;return c._childrenSet=new Set,c._childrenToAttach=[],c._childrenToDetach=[],c._renderPhase=d.DONE,c.children=[],c}return m(c,a),Object.defineProperty(c.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),c.prototype.detach=function(a){var c=
this.children;a=this.prepareChildrenRenderParameters(a);for(var b=c.length,d=0;b>d;d++){var e=c[d];e.attached&&(this.detachChild(e,a),e.attached=!1,e.parent=null)}},c.prototype.doRender=function(a){var c=this.prepareChildrenRenderParameters(a);this._renderPhase=d.BEFORE;this.beforeRenderChildren(a,c);this._renderPhase=d.ATTACHING;this.attachChildren(c)||this.requestRender();this._renderPhase=d.DETACHING;for(var b=this._childrenToDetach;0<b.length;){var e=b.shift();this.detachChild(e,c);e.attached=
!1;e.parent=null}this._renderPhase=d.RENDERING;this.renderChildren(c);this._renderPhase=d.AFTER;this.afterRenderChildren(a,c);this._renderPhase=d.DONE},c.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)},c.prototype.addChildAt=function(a,c){if((void 0===c&&(c=this.numChildren),!a)||this.contains(a))return a;var b=a.parent;b&&b!==this&&b.removeChild(a);c>=this.numChildren?this.children.push(a):this.children.splice(c,0,a);this._childrenSet.add(a);c=this._childrenToDetach.indexOf(a);
return-1<c&&this._childrenToDetach.splice(c,1),this._childrenToAttach.push(a),this._renderPhase>=d.RENDERING&&this.requestRender(),a},c.prototype.contains=function(a){return this._childrenSet.has(a)},c.prototype.getChildIndex=function(a){return this.children.indexOf(a)},c.prototype.getChildAt=function(a){return 0>a||a>this.children.length?null:this.children[a]},c.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)},c.prototype.removeChild=function(a){return this.contains(a)?
this.removeChildAt(this.getChildIndex(a)):a},c.prototype.removeChildAt=function(a){if(0>a||a>=this.children.length)return null;a=this.children.splice(a,1)[0];this._childrenSet["delete"](a);if(a.attached)this._childrenToDetach.push(a),this._renderPhase>=d.RENDERING&&this.requestRender();else{var c=this._childrenToAttach.indexOf(a);-1<c&&this._childrenToAttach.splice(c,1)}return a},c.prototype.requestChildRender=function(a){a&&a.parent===this&&this._renderPhase>=d.RENDERING&&this.requestRender()},c.prototype.setChildIndex=
function(a,c){var b=this.getChildIndex(a);-1<b&&(this.children.splice(b,1),this.children.splice(c,0,a),this._renderPhase>=d.RENDERING&&this.requestRender())},c.prototype.sortChildren=function(a){return this._renderPhase>d.RENDERING&&this.requestRender(),this.children.sort(a)},c.prototype.attachChildren=function(a){var c=this._childrenToAttach;if(0===c.length)return!0;for(var b=0===c.length;!b;)b=c.shift(),this.attachChild(b,a)&&(b.attached=!0,b.parent=this),b=0===c.length;return 0===c.length},c.prototype.renderChildren=
function(a){for(var c=this.children,b=c.length,d=0;b>d;d++){var e=c[d];e.attached&&this.renderChild(e,a)}},c.prototype.beforeRenderChildren=function(a,c){},c.prototype.attachChild=function(a,c){return a.attach(c)},c.prototype.detachChild=function(a,c){a.detach(c)},c.prototype.renderChild=function(a,c){a.processRender(c)},c.prototype.afterRenderChildren=function(a,c){},c}(f)})},"esri/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Evented"],
function(a,h,m,f){return function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;return c._renderRequestedCalled=!1,c._attached=!1,c._opacity=1,c.renderRequested=!1,c._visible=!0,c}return m(c,a),Object.defineProperty(c.prototype,"attached",{get:function(){return this._attached},set:function(a){this._attached!==a&&(this._attached=a,a?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,
"opacity",{get:function(){return this._opacity},set:function(a){this._opacity!==a&&(this._opacity=a,this.requestRender())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible!==a&&(this._visible=a,this.requestRender())},enumerable:!0,configurable:!0}),c.prototype.attach=function(a){return!0},c.prototype.detach=function(a){},c.prototype.processRender=function(a){this._renderRequestedCalled=!1;this.doRender(a);
this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")},c.prototype.requestRender=function(){var a=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);a!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")},c.prototype.dispose=function(){},c}(f.Evented)})},"esri/views/2d/engine/Evented":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"dojo/aspect","dojo/on"],function(a,h,m,f,d){Object.defineProperty(h,"__esModule",{value:!0});a=function(){function a(){}return a.prototype.on=function(a,c){return f.after(this,"on"+a,c,!0)},a.prototype.once=function(a,c){return d.once(this,a,c)},a.prototype.emit=function(a){d.emit(this,a,this)},a.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)},a}();h.Evented=a;h.EventedMixin=function(a){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}
return m(c,a),c.prototype.on=function(a,b){return f.after(this,"on"+a,b,!0)},c.prototype.once=function(a,b){return d.once(this,a,b)},c.prototype.emit=function(a,b){d.emit(this,a,b)},c.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)},c}(a)}})},"esri/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper ../libs/gl-matrix/common ../libs/gl-matrix/vec2 ../libs/gl-matrix/mat2d ./webgl/BitBlitRenderer ../../support/screenshotUtils ../../../core/promiseUtils ./Container ../../webgl/RenderingContext ../../webgl/FramebufferObject ../../webgl/webgl-utils ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject ./webgl/glShaderSnippets".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p){function u(a){return{budget:a.budget,state:a.state,devicePixelRatio:a.devicePixelRatio,stationary:a.stationary}}var k={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b._clipData=new Float32Array(8),b._upperLeft=d.create(),b._upperRight=d.create(),b._lowerLeft=d.create(),b._lowerRight=d.create(),b._mat2=c.create(),b._clipRendererInitialized=!1,b}return m(b,a),b.prototype.createElement=
function(){var a=document.createElement("canvas");return a.setAttribute("class","esri-display-object"),a},b.prototype.setElement=function(a){this.element=a},b.prototype.attach=function(b){this._resizeCanvas(b);var c=t.setupWebGL(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0});return this._renderingContext=new g(c[0]),this.attached=!0,this._cachedRenderParams=u(b),a.prototype.attach.call(this,b)},b.prototype.detach=function(b){a.prototype.detach.call(this,b);this._renderingContext&&(this._renderingContext.dispose(),
this._renderingContext=null);this._cachedRenderParams=null},b.prototype.beforeRenderChildren=function(a,b){var e=a.state;if(!(e.spatialReference&&(e.spatialReference._isWrappable?e.spatialReference._isWrappable():e.spatialReference.isWrappable)))return void(this._clipFrame=!1);var g=e.width;b=e.height;var k=e.rotation,h=this._renderingContext,g=Math.round(g*a.devicePixelRatio);b=Math.round(b*a.devicePixelRatio);var l=f.toRadian(k),n=Math.abs(Math.cos(l)),m=Math.abs(Math.sin(l)),p=Math.round(e.worldScreenWidth);
if(p>=Math.round(g*n+b*m))return void(this._clipFrame=!1);this._clipFBO&&this._clipFBO.width===g&&this._clipFBO.height===b||(this._clipFBO=new q(h,{colorTarget:0,depthStencilTarget:3,width:g,height:b}));var t=.5*g,u=.5*b,e=1/g,r=1/b;a=.5*p*a.devicePixelRatio;var w=.5*(g*m+b*n),g=this._upperLeft,n=this._upperRight,m=this._lowerLeft,p=this._lowerRight;d.set(g,-a,-w);d.set(n,a,-w);d.set(m,-a,w);d.set(p,a,w);c.identity(this._mat2);c.translate(this._mat2,this._mat2,[t,u]);0!==k&&c.rotate(this._mat2,this._mat2,
l);d.transformMat2d(g,g,this._mat2);d.transformMat2d(n,n,this._mat2);d.transformMat2d(m,m,this._mat2);d.transformMat2d(p,p,this._mat2);k=this._clipData;k.set([2*m[0]*e-1,2*(b-m[1])*r-1,2*p[0]*e-1,2*(b-p[1])*r-1,2*g[0]*e-1,2*(b-g[1])*r-1,2*n[0]*e-1,2*(b-n[1])*r-1]);this._clipRendererInitialized||this._initializeClipRenderer(h);this._clipVBO.setData(k);this._boundFBO=h.getBoundFramebufferObject();h.bindFramebuffer(this._clipFBO);h.setDepthWriteEnabled(!0);h.setStencilWriteMask(255);h.setClearColor(0,
0,0,0);h.setClearDepth(1);h.setClearStencil(0);h.clear(h.gl.COLOR_BUFFER_BIT|h.gl.DEPTH_BUFFER_BIT|h.gl.STENCIL_BUFFER_BIT);h.setDepthWriteEnabled(!1);this._clipFrame=!0},b.prototype.afterRenderChildren=function(a,b){this._clipFrame&&this._clipRendererInitialized&&(a=this._renderingContext,a.bindFramebuffer(this._boundFBO),this._boundFBO=null,a.bindVAO(this._clipVAO),a.bindProgram(this._clipStencilProgram),a.setDepthWriteEnabled(!1),a.setDepthTestEnabled(!1),a.setStencilTestEnabled(!0),a.setBlendingEnabled(!1),
a.setColorMask(!1,!1,!1,!1),a.setStencilOp(7680,7680,7681),a.setStencilWriteMask(255),a.setStencilFunction(519,1,255),a.drawElements(4,6,5123,0),a.bindVAO(),a.setColorMask(!0,!0,!0,!0),a.setBlendingEnabled(!0),a.setStencilFunction(514,1,255),this._blitRenderer.render(a,this._clipFBO.colorTexture,9728,1),a.setStencilTestEnabled(!1))},b.prototype.doRender=function(b){var c=this.element.style;return this.visible?(c.display="block",c.opacity=""+this.opacity,this._resizeCanvas(b),a.prototype.doRender.call(this,
b),void(this._cachedRenderParams=u(b))):void(c.display="none")},b.prototype.takeScreenshot=function(a){void 0===a&&(a={});var b=a.pixelRatio||1;this._cachedRenderParams.devicePixelRatio=b;var c=Math.round(b*this._cachedRenderParams.state.width),d=Math.round(b*this._cachedRenderParams.state.height),g=0,f=0,h=c,n=d,m=c,p=d,m=a.area;(m&&(g=Math.round(b*m.x),f=Math.round(b*m.y),h=Math.round(b*m.width),n=Math.round(b*m.height)),void 0!==a.width&&void 0!==a.height)?(m=a.width/a.height,n*m<h?(m*=n,g+=Math.floor((h-
m)/2),h=Math.floor(m)):(m=h/m,f+=Math.floor((n-m)/2),n=Math.floor(m)),m=a.width,p=a.height):(m=h,p=n);b=document.createElement("canvas");b.width=m;b.height=p;var t=b.getContext("2d"),u=new Uint8Array(h*n*4),r=this._renderingContext,w=q.create(r,{colorTarget:1,depthStencilTarget:3,width:c,height:d});r.bindFramebuffer(w);r.setViewport(0,0,c,d);this._cachedRenderParams.budget&&this._cachedRenderParams.budget.reset(Number.MAX_VALUE);var v=this._cachedRenderParams,x=this._renderingContext.gl;if(this._renderingContext.setClearColor(0,
0,0,0),this._renderingContext.setClearDepth(1),this._renderingContext.setClearStencil(0),this._renderingContext.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT|x.STENCIL_BUFFER_BIT),v.context=this._renderingContext,this.beforeRenderChildren(v,v),void 0!==a.rotation&&null!==a.rotation){var x=v.state,y=x.clone();y.viewpoint.rotation=a.rotation;v.state=y;this.renderChildren(v);v.state=x}else this.renderChildren(v);this.afterRenderChildren(v,v);w.readPixels(g,d-(f+n),h,n,6408,5121,u);r.bindFramebuffer();
r=t.getImageData(0,0,m,p);if(0!==g||0!==f||h!==c||n!==d||m!==c||p!==d)e.resampleHermite(u,h,n,r.data,m,p,!0);else{f=n-1;n=0;w=4*h;for(y=x=g=d=c=h=v=void 0;f>n;){x=n*w;y=f*w;for(v=0;w>v;v+=4)h=u[x+v],c=u[x+v+1],d=u[x+v+2],g=u[x+v+3],u[x+v]=u[y+v],u[x+v+1]=u[y+v+1],u[x+v+2]=u[y+v+2],u[x+v+3]=u[y+v+3],u[y+v]=h,u[y+v+1]=c,u[y+v+2]=d,u[y+v+3]=g;n++;f--}h=r.data;c=u.length;for(f=0;c>f;f++)h[f]=u[f]}u=r.data;n=u.length;for(f=0;n>f;f+=4)g=u[f+3],0<g&&(d=g/255,h=Math.floor(u[f+0]/d),c=Math.floor(u[f+1]/d),
d=Math.floor(u[f+2]/d),u[f+0]=255>=h?h:255,u[f+1]=255>=c?c:255,u[f+2]=255>=d?d:255);t.putImageData(r,0,0);t=k[a.format?a.format.toLowerCase():"png"];u=1;void 0!==a.quality&&(u=a.quality/100);a=b.toDataURL(t,u);return l.resolve({dataURL:a,x:0,y:0,width:m,height:p})},b.prototype.prepareChildrenRenderParameters=function(a){if(!this.attached||!this._renderingContext)return null;a=u(a);var b=this._renderingContext,c=b.gl;return b.setDepthWriteEnabled(!0),b.setStencilWriteMask(255),b.setClearColor(0,0,
0,0),b.setClearDepth(1),b.setClearStencil(0),b.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT|c.STENCIL_BUFFER_BIT),b.setViewport(0,0,this.element.width,this.element.height),b.setDepthWriteEnabled(!1),a.context=b,a},b.prototype.attachChild=function(a,b){return a.attach(b)},b.prototype.detachChild=function(a,b){return a.detach(b)},b.prototype.renderChild=function(a,b){return a.processRender(b)},b.prototype._resizeCanvas=function(a){var b=this.element,c=b.style,d=a.state,e=a.devicePixelRatio;a=Math.round(d.width*
e);e=Math.round(d.height*e);(b.width!==a||b.height!==e)&&(b.width=a,b.height=e);c.width=d.width+"px";c.height=d.height+"px"},b.prototype._initializeClipRenderer=function(a){if(this._clipRendererInitialized)return!0;this._blitRenderer=new n;var b={a_pos:0},c=new w(a,p.stencilVS,p.stencilFS,b);if(!c)return!1;var d=r.createVertex(a,35040,32),e=new Uint16Array([0,1,2,2,1,3]),e=r.createIndex(a,35044,e);a=new v(a,b,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},
{geometry:d},e);return this._clipStencilProgram=c,this._clipVBO=d,this._clipVAO=a,this._clipRendererInitialized=!0,!0},b}(b)})},"esri/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ../../../webgl/Program ../../../webgl/VertexArrayObject ../../../webgl/BufferObject ./glShaderSnippets".split(" "),function(a,h,m,f,d,c){return function(){function a(){this._initialized=!1}return a.prototype.render=function(a,c,b,d){a&&c&&(this._initialized||this._initialize(a),a.setBlendFunctionSeparate(1,
771,1,771),a.bindVAO(this._vertexArrayObject),a.bindProgram(this._program),c.setSamplingMode(b),a.bindTexture(c,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",d),a.drawArrays(5,0,4),a.bindVAO())},a.prototype._initialize=function(a){if(this._initialized)return!0;var e={a_pos:0,a_tex:1},b=new m(a,c.bitblitVS,c.bitblitFS,e);if(!b)return!1;var g=new Int8Array(16);g[0]=-1;g[1]=-1;g[2]=0;g[3]=0;g[4]=1;g[5]=-1;g[6]=1;g[7]=0;g[8]=-1;g[9]=1;g[10]=0;g[11]=1;g[12]=1;g[13]=1;
g[14]=1;g[15]=1;a=new f(a,e,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:d.createVertex(a,35044,g)});return this._program=b,this._vertexArrayObject=a,this._initialized=!0,!0},a}()})},"esri/views/webgl/Program":function(){define(["require","exports","dojo/has"],function(a,h,m){var f=m("dojo-debug-messages");a=function(){function a(c,d,e,f,b){if(void 0===b&&(b={}),this._context=
null,this._glName=null,this._locations={},this._id=void 0,this._initialized=!1,this._vShader=null,this._fShader=null,this._defines={},this._nameToUniformLocation={},this._nameToAttribLocation={},this._nameToUniform1={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},c||console.error("RenderingContext isn't initialized!"),0===d.length&&console.error("Shaders source should not be empty!"),this._context=c,this._vertexShaderSource=
d,this._fragmentShaderSource=e,Array.isArray(b))for(c=0;c<b.length;c++)this._defines[b[c]]="1";else this._defines=b;this._id=a._nextId++;this._locations=f}return Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0}),a.prototype.getDefine=
function(a){return this._defines[a]},a.prototype.dispose=function(){if(this._context){var a=this._context.gl;this._vShader&&(a.deleteShader(this._vShader),this._vShader=null);this._fShader&&(a.deleteShader(this._fShader),this._fShader=null);this._glName&&(a.deleteProgram(this._glName),this._glName=null);this._context=null}},a.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");
var a=this._context.gl,d=a.createProgram();a.attachShader(d,this._vShader);a.attachShader(d,this._fShader);for(var e in this._locations)a.bindAttribLocation(d,this._locations[e],e);a.linkProgram(d);a.getProgramParameter(d,a.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+a.getProgramParameter(d,a.VALIDATE_STATUS)+", gl error ["+a.getError()+"]infoLog: "+a.getProgramInfoLog(d));this._glName=d;this._initialized=!0}},a.prototype.getUniformLocation=function(a){return this.initialize(),
void 0===this._nameToUniformLocation[a]&&(this._nameToUniformLocation[a]=this._context.gl.getUniformLocation(this._glName,a)),this._nameToUniformLocation[a]},a.prototype.hasUniform=function(a){return null!==this.getUniformLocation(a)},a.prototype.getAttribLocation=function(a){return this.initialize(),void 0===this._nameToAttribLocation[a]&&(this._nameToAttribLocation[a]=this._context.gl.getAttribLocation(this._glName,a)),this._nameToAttribLocation[a]},a.prototype.setUniform1i=function(a,d){var c=
this._nameToUniform1[a];if(void 0===c||d!==c)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(a),d),this._nameToUniform1[a]=d},a.prototype.setUniform1f=function(a,d){var c=this._nameToUniform1[a];if(void 0===c||d!==c)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(a),d),this._nameToUniform1[a]=d},a.prototype.setUniform1fv=function(c,d){var e=this._nameToUniform2[c];void 0!==e&&a._arraysEqual(d,e)||(this._context.bindProgram(this),
this._context.gl.uniform1fv(this.getUniformLocation(c),d),void 0===e?this._nameToUniform2[c]=new Float32Array(d):e.set(d))},a.prototype.setUniform2f=function(a,d,e){var c=this._nameToUniform2[a];if(void 0===c||d!==c[0]||e!==c[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(a),d,e),void 0===c?this._nameToUniform2[a]=new Float32Array([d,e]):(c[0]=d,c[1]=e)},a.prototype.setUniform2fv=function(c,d){f&&0!==d.length%2&&console.error("Value array must have even number of elements!");
var e=this._nameToUniform2[c];void 0!==e&&a._arraysEqual(d,e)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(c),d),void 0===e?this._nameToUniform2[c]=new Float32Array(d):e.set(d))},a.prototype.setUniform3f=function(a,d,e,f){var b=this._nameToUniform3[a];if(void 0===b||d!==b[0]||e!==b[1]||f!==b[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(a),d,e,f),void 0===b?this._nameToUniform3[a]=new Float32Array([d,e,f]):(b[0]=d,b[1]=
e,b[2]=f)},a.prototype.setUniform3fv=function(c,d){f&&0!==d.length%3&&console.error("Value array must contain sets of three values!");var e=this._nameToUniform3[c];void 0!==e&&a._arraysEqual(d,e)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(c),d),void 0===e?this._nameToUniform3[c]=new Float32Array(d):e.set(d))},a.prototype.setUniform4f=function(a,d,e,f,b){var c=this._nameToUniform4[a];if(void 0===c||d!==c[0]||e!==c[1]||f!==c[2]||b!==c[3])this._context.bindProgram(this),
this._context.gl.uniform4f(this.getUniformLocation(a),d,e,f,b),void 0===c?this._nameToUniform4[a]=new Float32Array([d,e,f,b]):(c[0]=d,c[1]=e,c[2]=f,c[3]=b)},a.prototype.setUniform4fv=function(c,d){f&&0!==d.length%4&&console.error("Value array must contain sets of four values!");var e=this._nameToUniform4[c];void 0!==e&&a._arraysEqual(d,e)||(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(c),d),void 0===e?this._nameToUniform4[c]=new Float32Array(d):e.set(d))},a.prototype.setUniformMatrix3fv=
function(c,d,e){void 0===e&&(e=!1);f&&0!==d.length%9&&console.error("Matrix array must contain sets ot 9 elements!");var h=this._nameToUniformMatrix3[c];void 0!==h&&(9===h.length?a._matrix3Equal(h,d):a._arraysEqual(d,h))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(c),e,d),void 0===h?this._nameToUniformMatrix3[c]=new Float32Array(d):h.set(d))},a.prototype.setUniformMatrix4fv=function(c,d,e){void 0===e&&(e=!1);f&&0!==d.length%16&&console.error("Matrix array must contain sets ot 16 elements!");
var h=this._nameToUniformMatrix4[c];void 0!==h&&(16===h.length?a._matrix4Equal(h,d):a._arraysEqual(d,h))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(c),e,d),void 0===h?this._nameToUniformMatrix4[c]=new Float32Array(d):h.set(d))},a._padToThree=function(a){var c=a.toString();return 1E3>a&&(c=("  "+a).slice(-3)),c},a.prototype._addLineNumbers=function(c){var d=2;return c.replace(/\n/g,function(){return"\n"+a._padToThree(d++)+":"})},a.prototype._loadShader=
function(a){var c=35633===a?this._vertexShaderSource:this._fragmentShaderSource,d="",f;for(f in this._defines)d+="#define "+f+" "+this._defines[f]+"\n";c=d+c;d=this._context.gl;a=d.createShader(a);return d.shaderSource(a,c),d.compileShader(a),d.getShaderParameter(a,d.COMPILE_STATUS)||(console.error(d.getShaderInfoLog(a)),console.error(this._addLineNumbers(c))),a},a._matrix4Equal=function(a,d){return f&&(16!==a.length||16!==d.length)&&console.error("Matrix object must contain 16 elements!"),a[0]===
d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]&&a[4]===d[4]&&a[5]===d[5]&&a[6]===d[6]&&a[7]===d[7]&&a[8]===d[8]&&a[9]===d[9]&&a[10]===d[10]&&a[11]===d[11]&&a[12]===d[12]&&a[13]===d[13]&&a[14]===d[14]&&a[15]===d[15]},a._matrix3Equal=function(a,d){return f&&(9!==a.length||9!==d.length)&&console.error("Matrix object must contain 16 elements!"),a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]&&a[4]===d[4]&&a[5]===d[5]&&a[6]===d[6]&&a[7]===d[7]&&a[8]===d[8]},a._arraysEqual=function(a,d){if(a.length!==d.length)return!1;
for(var c=0;c<a.length;++c)if(a[c]!==d[c])return!1;return!0},a}();return a._nextId=0,a})},"esri/views/webgl/VertexArrayObject":function(){define(["require","exports"],function(a,h){a=function(){function a(f,d,c,h,e){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=f;this._layout=c;this._buffers=h;this._locations=d;e&&(this._indexBuffer=e);this._id=a._nextId++}return Object.defineProperty(a.prototype,"id",{get:function(){return this._id},
enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,
"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0}),a.prototype.dispose=function(a){if(void 0===a&&(a=!0),this._context){var d=this._context.extensions.vao;d&&this._glName&&(d.deleteVertexArrayOES(this._glName),this._glName=null);if(this._context.getBoundVAO()===this&&this._context.bindVAO(null),a){for(var c in this._buffers)this._buffers[c].dispose(),delete this._buffers[c];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}this._context=null}},
a.prototype.initialize=function(){if(!this._initialized){var a=this._context.extensions.vao;if(a){var d=a.createVertexArrayOES();a.bindVertexArrayOES(d);this._bindLayout();a.bindVertexArrayOES(null);this._glName=d}this._initialized=!0}},a.prototype.bind=function(){this.initialize();var a=this._context.extensions.vao;a?a.bindVertexArrayOES(this.glName):(this._context.bindVAO(null),this._bindLayout())},a.prototype._bindLayout=function(){var a=this._buffers,d=this._context.extensions.vao,c=this._layout,
h=this._indexBuffer;a||console.error("Vertex buffer dictionary is empty!");var e,l,b=this._context.gl,g=0,m;for(m in a)for((e=a[m])||console.error("Vertex buffer is uninitialized!"),(l=c[m])||console.error("Vertex element descriptor is empty!"),this._context.bindBuffer(e),g=0;g<l.length;++g){e=l[g];var t=this._locations[e.name],w=e.baseInstance?e.baseInstance*e.stride:0;if(void 0===t&&console.error("There is no location for vertex attribute '"+e.name+"' defined."),e.baseInstance&&!e.divisor&&console.error("Vertex attribute '"+
e.name+"' uses baseInstanceOffset without divisor."),4>=e.count){if(b.enableVertexAttribArray(t),b.vertexAttribPointer(t,e.count,e.type,e.normalized,e.stride,e.offset+w),e.divisor&&0<e.divisor){var v=this._context.extensions.angleInstancedArrays;v&&v.vertexAttribDivisorANGLE(t,e.divisor)}}else if(16===e.count&&5126===e.type)for(var r=0;4>r;r++)(b.enableVertexAttribArray(t+r),b.vertexAttribPointer(t+r,4,e.type,e.normalized,e.stride,e.offset+16*r+w),e.divisor&&0<e.divisor)&&(v=this._context.extensions.angleInstancedArrays)&&
v.vertexAttribDivisorANGLE(t+r,e.divisor);else console.error("Unsupported vertex attribute element count: "+e.count)}h&&(d?b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,h.glName):this._context.bindBuffer(h))},a.prototype.unbind=function(){this.initialize();var a=this._context.extensions.vao;a?a.bindVertexArrayOES(null):this._unbindLayout()},a.prototype._unbindLayout=function(){var a=this._buffers,d=this._layout,c=this._locations,h=this._context;a||console.error("Vertex buffer dictionary is empty!");var e,l,
b,g=h.gl,m=0,t=0,w;for(w in a){(e=a[w])||console.error("Vertex buffer is uninitialized!");l=d[w];m=0;for(t=l.length;t>m;++m)b=l[m],g.disableVertexAttribArray(c[b.name]);h.unbindBuffer(e.bufferType)}(a=this._indexBuffer)&&h.unbindBuffer(a.bufferType)},a}();return a._nextId=0,a})},"esri/views/webgl/BufferObject":function(){define(["require","exports"],function(a,h){a=function(){function a(f,d,c,h){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=
void 0;this._context=f;this._bufferType=d;this._usage=c;this._id=a._nextId++;this._glName=this._context.gl.createBuffer();h&&this.setData(h)}return a.createIndex=function(f,d,c){return new a(f,34963,d,c)},a.createVertex=function(f,d,c){return new a(f,34962,d,c)},Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,
"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"byteSize",{get:function(){return 34962===this._bufferType?
this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context=null)},a.prototype.setData=function(a){if(a){if("number"==typeof a)0>a&&console.error("Buffer size cannot be negative!"),this._size=a;else{var d=a.byteLength;a instanceof Uint16Array&&(d/=2,this._indexType=5123);a instanceof Uint32Array&&(d/=4,this._indexType=5125);this._size=
d}d=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,a,this._usage);this._context.bindVAO(d)}},a.prototype.setSubData=function(a,d,c,h){if(void 0===d&&(d=0),void 0===c&&(c=0),a){(0>d||d>=this._size)&&console.error("offset is out of range!");var e=d,f=c,b=h,g=a.byteLength;a instanceof Uint16Array&&(g/=2,e*=2,f*=2,b*=2);a instanceof Uint32Array&&(g/=4,e*=4,f*=4,b*=2);void 0===h&&(h=g-1);c>=h&&console.error("end must be bigger than start!");
d+c-h>this._size&&console.error("An attempt to write beyond the end of the buffer!");d=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferSubData(this._bufferType,e,(a instanceof ArrayBuffer?a:a.buffer).slice(f,b));this._context.bindVAO(d)}},a}();return a._nextId=0,a})},"esri/views/2d/engine/webgl/glShaderSnippets":function(){define("require exports ../../../webgl/ShaderSnippets dojo/text!./Shaders.xml dojo/text!./bitblit.vs.glsl dojo/text!./bitblit.fs.glsl dojo/text!./stencil.vs.glsl dojo/text!./stencil.fs.glsl".split(" "),
function(a,h,m,f,d,c,n,e){function l(a,c){b+='\x3csnippet name\x3d"'+a+'"\x3e\x3c![CDATA[';b+=c;b+="]]\x3e\x3c/snippet\x3e"}var b="",b=b+'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e',b=b+"\x3csnippets\x3e";l("bitblitVS",d);l("bitblitFS",c);l("stencilVS",n);l("stencilFS",e);b+="\x3c/snippets\x3e";a=new m;return m.parse(b,a),m.parse(f,a),a})},"esri/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(a,h,m){return function(){function a(a){if(a)for(var c in a)this[c]=
a[c]}return a.parse=function(a,c){a=m.parse(a).getElementsByTagName("snippet");for(var d=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,e=/[\$\s]+/g,f=/\(([^\(\)]*)\)/,b=0;b<a.length;b++){for(var g=a[b].getAttribute("name"),h=a[b].textContent,t=void 0;null!==(t=h.match(d));){var w=t[0].replace(e,""),v=w.match(f),r=void 0;v&&(r=v[1].split(",").map(function(a){return a.trim()}));w=w.replace(f,"");r=c._instantiate(w,r);h=h.replace(t[0],r)}c[g]=h}},a.prototype._instantiate=function(a,c){a=this[a];c||
(c=[]);for(var d;d=a.match(/\$(\d+)/);){var e=parseInt(d[1],10);a=a.replace(d[0],c[e])}return a},a}()})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(a){a.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(h,m){var f=a.doc,d;m=m||"text/xml";if(h&&a.trim(h)&&"DOMParser"in a.global){d=(new DOMParser).parseFromString(h,m);h=d.documentElement;if("parsererror"==h.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==
h.namespaceURI){if(f=h.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0])f=f.firstChild.data;throw Error("Error parsing text "+h.firstChild.data+" \n"+f);}return d}if("ActiveXObject"in a.global){f=function(a){return"MSXML"+a+".DOMDocument"};f=["Microsoft.XMLDOM",f(6),f(4),f(3),f(2)];a.some(f,function(a){try{d=new ActiveXObject(a)}catch(e){return!1}return!0});if(h&&d&&(d.async=!1,d.loadXML(h),h=d.parseError,0!==h.errorCode))throw Error("Line: "+h.line+"\nCol: "+
h.linepos+"\nReason: "+h.reason+"\nError Code: "+h.errorCode+"\nSource: "+h.srcText);if(d)return d}else if(f.implementation&&f.implementation.createDocument){if(h&&a.trim(h)&&f.createElement){m=f.createElement("xml");m.innerHTML=h;var c=f.implementation.createDocument("foo","",null);a.forEach(m.childNodes,function(a){c.importNode(a,!0)});return c}return f.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(h,m){if(1<arguments.length)return dojox.xml.parser.replaceChildren(h,
(h.ownerDocument||a.doc).createTextNode(m)),m;if(void 0!==h.textContent)return h.textContent;var f="";h&&a.forEach(h.childNodes,function(a){switch(a.nodeType){case 1:case 5:f+=dojox.xml.parser.textContent(a);break;case 3:case 2:case 4:f+=a.nodeValue}});return f};dojox.xml.parser.replaceChildren=function(h,m){var f=[];a.isIE&&a.forEach(h.childNodes,function(a){f.push(a)});dojox.xml.parser.removeChildren(h);a.forEach(f,a.destroy);a.isArray(m)?a.forEach(m,function(a){h.appendChild(a)}):h.appendChild(m)};
dojox.xml.parser.removeChildren=function(a){for(var h=a.childNodes.length;a.hasChildNodes();)a.removeChild(a.firstChild);return h};dojox.xml.parser.innerXML=function(a){return a.innerXML?a.innerXML:a.xml?a.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(a):null};return dojox.xml.parser})},"esri/views/support/screenshotUtils":function(){define(["require","exports","dojo/_base/lang"],function(a,h,m){Object.defineProperty(h,"__esModule",{value:!0});h.adjustScreenshotSettings=
function(a,d){a=m.mixin({format:"png",quality:100},a||{});var c,f;a.includePadding?(c=d.width,f=d.height):(c=d.width-d.padding.left-d.padding.right,f=d.height-d.padding.top-d.padding.bottom);var e=c/f;return void 0!==a.width&&void 0===a.height?a.height=a.width/e:void 0!==a.height&&void 0===a.width&&(a.width=e*a.height),void 0!==a.height&&(a.height=Math.floor(a.height)),void 0!==a.width&&(a.width=Math.floor(a.width)),a.area||a.includePadding||(a.area={x:d.padding.left,y:d.padding.top,width:c,height:f}),
a};h.resampleHermite=function(a,d,c,h,e,l,b){void 0===b&&(b=!0);var g=d/e;c/=l;for(var f=Math.ceil(g/2),n=Math.ceil(c/2),m=0;l>m;m++)for(var v=0;e>v;v++){for(var r=4*(v+(b?l-m-1:m)*e),p=0,u=0,k=0,x=0,B=0,y=0,z=0,A=(m+.5)*c,D=Math.floor(m*c);(m+1)*c>D;D++)for(var F=Math.abs(A-(D+.5))/n,C=(v+.5)*g,F=F*F,H=Math.floor(v*g);(v+1)*g>H;H++){var I=Math.abs(C-(H+.5))/f,M=Math.sqrt(F+I*I);-1<=M&&1>=M&&(p=2*M*M*M-3*M*M+1,0<p&&(I=4*(H+D*d),z+=p*a[I+3],k+=p,255>a[I+3]&&(p=p*a[I+3]/250),x+=p*a[I],B+=p*a[I+1],y+=
p*a[I+2],u+=p))}h[r]=x/u;h[r+1]=B/u;h[r+2]=y/u;h[r+3]=z/k}}})},"esri/views/webgl/RenderingContext":function(){define(["require","exports","./enums","./Extensions"],function(a,h,m,f){a=function(){function a(a,d){this.gl=null;this._extensions=void 0;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=
!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,
zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.gl=a;this._extensions=new f(a,d);d=a.getParameter(a.VIEWPORT);this._viewport={x:d[0],y:d[1],width:d[2],height:d[3]};d=this.extensions.textureFilterAnisotropic;this._parameters={versionString:a.getParameter(a.VERSION),maxVertexTextureImageUnits:a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
maxVertexAttributes:a.getParameter(a.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:d?a.getParameter(d.MAX_TEXTURE_MAX_ANISOTROPY_EXT):void 0,maxTextureImageUnits:a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)};this.enforceState()}return Object.defineProperty(a.prototype,"extensions",{get:function(){return this._extensions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,
"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};this.gl=null},a.prototype.setBlendingEnabled=function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=a)},a.prototype.setBlendColor=function(a,d,e,f){(a!==this._blendColorState.r||d!==this._blendColorState.g||e!==this._blendColorState.b||
f!==this._blendColorState.a)&&(this.gl.blendColor(a,d,e,f),this._blendColorState.r=a,this._blendColorState.g=d,this._blendColorState.b=e,this._blendColorState.a=f)},a.prototype.setBlendFunction=function(a,d){(a!==this._blendFunctionState.srcRGB||d!==this._blendFunctionState.dstRGB)&&(this.gl.blendFunc(a,d),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=d,this._blendFunctionState.dstAlpha=d)},a.prototype.setBlendFunctionSeparate=function(a,d,e,
f){(this._blendFunctionState.srcRGB!==a||this._blendFunctionState.srcAlpha!==e||this._blendFunctionState.dstRGB!==d||this._blendFunctionState.dstAlpha!==f)&&(this.gl.blendFuncSeparate(a,d,e,f),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=e,this._blendFunctionState.dstRGB=d,this._blendFunctionState.dstAlpha=f)},a.prototype.setBlendEquation=function(a){this._blendEquationState.mode!==a&&(this.gl.blendEquation(a),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=
a)},a.prototype.setBlendEquationSeparate=function(a,d){(this._blendEquationState.mode!==a||this._blendEquationState.modeAlpha!==d)&&(this.gl.blendEquationSeparate(a,d),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=d)},a.prototype.setColorMask=function(a,d,e,f){(this._colorMaskState.r!==a||this._colorMaskState.g!==d||this._colorMaskState.b!==e||this._colorMaskState.a!==f)&&(this.gl.colorMask(a,d,e,f),this._colorMaskState.r=a,this._colorMaskState.g=d,this._colorMaskState.b=e,this._colorMaskState.a=
f)},a.prototype.setClearColor=function(a,d,e,f){(this._clearColor.r!==a||this._clearColor.g!==d||this._clearColor.b!==e||this._clearColor.a!==f)&&(this.gl.clearColor(a,d,e,f),this._clearColor.r=a,this._clearColor.g=d,this._clearColor.b=e,this._clearColor.a=f)},a.prototype.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=a)},a.prototype.setPolygonOffsetFillEnabled=function(a){this._polygonOffsetFillEnabled!==
a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a)},a.prototype.setPolygonOffset=function(a,d){this._polygonOffset[0]===a&&this._polygonOffset[1]===d||(this._polygonOffset[0]=a,this._polygonOffset[1]=d,this.gl.polygonOffset(a,d))},a.prototype.setCullFace=function(a){this._cullFace!==a&&(this.gl.cullFace(a),this._cullFace=a)},a.prototype.setFrontFace=function(a){this._frontFace!==a&&(this.gl.frontFace(a),this._frontFace=
a)},a.prototype.setScissorTestEnabled=function(a){this._scissorTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=a)},a.prototype.setScissorRect=function(a,d,e,f){(this._scissorRect.x!==a||this._scissorRect.y!==d||this._scissorRect.width!==e||this._scissorRect.height!==f)&&(this.gl.scissor(a,d,e,f),this._scissorRect.x=a,this._scissorRect.y=d,this._scissorRect.width=e,this._scissorRect.height=f)},a.prototype.setDepthTestEnabled=
function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a)},a.prototype.setClearDepth=function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),this._clearDepth=a)},a.prototype.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a)},a.prototype.setDepthWriteEnabled=function(a){this._depthWriteEnabled!==a&&(this.gl.depthMask(a),this._depthWriteEnabled=a)},a.prototype.setDepthRange=
function(a,d){(this._depthRange.zNear!==a||this._depthRange.zFar!==d)&&(this.gl.depthRange(a,d),this._depthRange.zNear=a,this._depthRange.zFar=d)},a.prototype.setStencilTestEnabled=function(a){this._stencilTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a)},a.prototype.setClearStencil=function(a){a!==this._clearStencil&&(this.gl.clearStencil(a),this._clearStencil=a)},a.prototype.setStencilFunction=function(a,d,e){(this._stencilFunction.func!==
a||this._stencilFunction.ref!==d||this._stencilFunction.mask!==e)&&(this.gl.stencilFunc(a,d,e),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=d,this._stencilFunction.mask=e)},a.prototype.setStencilFunctionSeparate=function(a,d,e,f){(this._stencilFunction.face!==a||this._stencilFunction.func!==d||this._stencilFunction.ref!==e||this._stencilFunction.mask!==f)&&(this.gl.stencilFuncSeparate(a,d,e,f),this._stencilFunction.face=a,this._stencilFunction.func=d,this._stencilFunction.ref=
e,this._stencilFunction.mask=f)},a.prototype.setStencilWriteMask=function(a){this._stencilWriteMask!==a&&(this.gl.stencilMask(a),this._stencilWriteMask=a)},a.prototype.setStencilOp=function(a,d,e){(this._stencilOperation.fail!==a||this._stencilOperation.zFail!==d||this._stencilOperation.zPass!==e)&&(this.gl.stencilOp(a,d,e),this._stencilOperation.face=1032,this._stencilOperation.fail=a,this._stencilOperation.zFail=d,this._stencilOperation.zPass=e)},a.prototype.setStencilOpSeparate=function(a,d,e,
f){(this._stencilOperation.face!==a||this._stencilOperation.fail!==d||this._stencilOperation.zFail!==e||this._stencilOperation.zPass!==f)&&(this.gl.stencilOpSeparate(a,d,e,f),this._stencilOperation.face=a,this._stencilOperation.face=a,this._stencilOperation.fail=d,this._stencilOperation.zFail=e,this._stencilOperation.zPass=f)},a.prototype.setLineWidth=function(a){var c=this._lineWidth;return this._lineWidth!==a&&(this.gl.lineWidth(a),this._lineWidth=a),c},a.prototype.setActiveTexture=function(a){var c=
this._activeTextureUnit;return 0<=a&&a!==this._activeTextureUnit&&(this.gl.activeTexture(m.BASE_TEXTURE_UNIT+a),this._activeTextureUnit=a),c},a.prototype.clear=function(a){a&&this.gl.clear(a)},a.prototype.drawArrays=function(a,d,e){this.gl.drawArrays(a,d,e)},a.prototype.drawElements=function(a,d,e,f){return 5123===e?void this.gl.drawElements(a,d,e,f):void(5125===e&&this._extensions.elementIndexUint?this.gl.drawElements(a,d,e,f):console.warn("Data type is uint however extension OES_Element_index_unit is not supported therefore this draw call cannot be made"))},
a.prototype.drawArraysInstanced=function(a,d,e,f){this._extensions.angleInstancedArrays?this._extensions.angleInstancedArrays.drawArraysInstancedANGLE(a,d,e,f):console.error("Extension ANGLE_instanced_arrays isn't supported!")},a.prototype.drawElementsInstanced=function(a,d,e,f,b){this._extensions.angleInstancedArrays?this._extensions.angleInstancedArrays.drawElementsInstancedANGLE(a,d,e,f,b):console.error("Extension ANGLE_instanced_arrays isn't supported!")},a.prototype.setViewport=function(a,d,
e,f){var b=this._viewport;b.x===a&&b.y===d&&b.width===e&&b.height===f||(b.x=a,b.y=d,b.width=e,b.height=f,this.gl.viewport(a,d,e,f))},a.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}},a.prototype.bindProgram=function(a){return a?void(this._activeShaderProgram!==a&&(a.initialize(),this.gl.useProgram(a.glName),this._activeShaderProgram=a)):(this.gl.useProgram(null),void(this._activeShaderProgram=null))},a.prototype.bindTexture=
function(c,d){void 0===d&&(d=0);-1===a._MAX_TEXTURE_IMAGE_UNITS&&(a._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(d>=a._MAX_TEXTURE_IMAGE_UNITS||0>d)&&console.error("Input texture unit is out of range of available units!");var e=this._textureUnitMap[d];return this.setActiveTexture(d),null==c||null==c.glName?(null!=e&&(this.gl.bindTexture(e.descriptor.target,null),e.setBoundToUnit(d,!1)),void(this._textureUnitMap[d]=null)):e&&e.id===c.id?void c.applyChanges():(this.gl.bindTexture(c.descriptor.target,
c.glName),c.setBoundToUnit(d,!0),c.applyChanges(),void(this._textureUnitMap[d]=c))},a.prototype.bindFramebuffer=function(a){return a?void(this._activeFramebuffer!==a&&(a.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.glName),this._activeFramebuffer=a)):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),void(this._activeFramebuffer=null))},a.prototype.bindBuffer=function(c){c&&(34962===c.bufferType?this._activeVertexBuffer=a._bindBuffer(this.gl,c,c.bufferType,this._activeVertexBuffer):
this._activeIndexBuffer=a._bindBuffer(this.gl,c,c.bufferType,this._activeIndexBuffer))},a.prototype.unbindBuffer=function(c){34962===c?this._activeVertexBuffer=a._bindBuffer(this.gl,null,c,this._activeVertexBuffer):this._activeIndexBuffer=a._bindBuffer(this.gl,null,c,this._activeIndexBuffer)},a.prototype.bindVAO=function(a){return a?void(this._activeVertexArrayObject&&this._activeVertexArrayObject.id===a.id||(a.bind(),this._activeVertexArrayObject=a)):void(this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),
this._activeVertexArrayObject=null))},a.prototype.getBoundTexture=function(a){return this._textureUnitMap[a]},a.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer},a.prototype.getBoundVAO=function(){return this._activeVertexArrayObject},a.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var a=0;a<this.parameters.maxTextureImageUnits;a++)this.bindTexture(null,a);this.setBlendingEnabled(!1);
this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);
this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)},a.prototype.enforceState=function(){var a=this.gl,d=this._extensions.vao;d&&d.bindVertexArrayOES(null);for(var e=0;e<this.parameters.maxVertexAttributes;e++)a.disableVertexAttribArray(e);if(this._activeVertexBuffer?a.bindBuffer(this._activeVertexBuffer.bufferType,
this._activeVertexBuffer.glName):a.bindBuffer(34962,null),this._activeIndexBuffer?a.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):a.bindBuffer(34963,null),d&&this._activeVertexArrayObject)(d=this._activeVertexArrayObject)&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null),this.bindVAO(d);a.bindFramebuffer(a.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);a.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:
null);a.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);!0===this._blendEnabled?a.enable(this.gl.BLEND):a.disable(this.gl.BLEND);a.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);a.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);a.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,
this._clearColor.a);a.clearDepth(this._clearDepth);a.clearStencil(this._clearStencil);a.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);a.cullFace(this._cullFace);a.depthFunc(this._depthFunction);a.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);a.depthMask(this._depthWriteEnabled);a.frontFace(this._frontFace);a.lineWidth(this._lineWidth);!0===this._polygonCullingEnabled?
a.enable(a.CULL_FACE):a.disable(a.CULL_FACE);a.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?a.enable(a.POLYGON_OFFSET_FILL):a.disable(a.POLYGON_OFFSET_FILL);a.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?a.enable(a.SCISSOR_TEST):a.disable(a.SCISSOR_TEST);a.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);a.stencilOpSeparate(this._stencilOperation.face,
this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST);a.stencilMask(this._stencilWriteMask);for(d=0;d<this.parameters.maxTextureImageUnits;d++)a.activeTexture(m.BASE_TEXTURE_UNIT+d),a.bindTexture(3553,null),(e=this._textureUnitMap[d])&&a.bindTexture(e.descriptor.target,e.glName);a.activeTexture(m.BASE_TEXTURE_UNIT+this._activeTextureUnit);a.viewport(this._viewport.x,this._viewport.y,this._viewport.width,
this._viewport.height)},a._bindBuffer=function(a,d,e,f){return d?f===d?f:(a.bindBuffer(e,d.glName),d):(a.bindBuffer(e,null),null)},a}();return a._MAX_TEXTURE_IMAGE_UNITS=-1,a})},"esri/views/webgl/enums":function(){define(["require","exports"],function(a,h){Object.defineProperty(h,"__esModule",{value:!0});h.BASE_TEXTURE_UNIT=33984})},"esri/views/webgl/Extensions":function(){define(["require","exports"],function(a,h){return function(){function a(a,d){if(this._vaoInit=!1,this._angleInstancedArraysInit=
!1,this._standardDerivativesInit=!1,this._elementIndexUintInit=!1,this._depthTextureInit=!1,this._textureFilterAnisotropicInit=!1,this._shaderTextureLODInit=!1,this._compressedTextureS3TCInit=!1,this._disjointTimerQueryInit=!1,this._gl=a,d&&d.disabledExtensions)a=d.disabledExtensions,a.vao&&(this._vao=null,this._vaoInit=!0),a.angleInstancedArrays&&(this._angleInstancedArrays=null,this._angleInstancedArraysInit=!0),a.standardDerivatives&&(this._standardDerivatives=null,this._standardDerivativesInit=
!0),a.elementIndexUint&&(this._elementIndexUint=null,this._elementIndexUintInit=!0),a.depthTexture&&(this._depthTexture=null,this._depthTextureInit=!0),a.textureFilterAnisotropic&&(this._textureFilterAnisotropic=null,this._textureFilterAnisotropicInit=!0),a.compressedTextureS3TC&&(this._compressedTextureS3TC=null,this._compressedTextureS3TCInit=!0),a.shaderTextureLOD&&(this._shaderTextureLOD=null,this._shaderTextureLODInit=!0),a.disjointTimerQuery&&(this._disjointTimerQuery=null,this._disjointTimerQueryInit=
!0)}return Object.defineProperty(a.prototype,"vao",{get:function(){return this._vaoInit||(this._vao=this._gl.getExtension("OES_vertex_array_object")||this._gl.getExtension("MOZ_OES_vertex_array_object")||this._gl.getExtension("WEBKIT_OES_vertex_array_object"),this._vaoInit=!0),this._vao},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"angleInstancedArrays",{get:function(){return this._angleInstancedArraysInit||(this._angleInstancedArrays=this._gl.getExtension("ANGLE_instanced_arrays"),
this._angleInstancedArraysInit=!0),this._angleInstancedArrays},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"standardDerivatives",{get:function(){return this._standardDerivativesInit||(this._standardDerivatives=this._gl.getExtension("OES_standard_derivatives"),this._standardDerivativesInit=!0),this._standardDerivatives},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"elementIndexUint",{get:function(){return this._elementIndexUintInit||(this._elementIndexUint=
this._gl.getExtension("OES_element_index_uint"),this._elementIndexUintInit=!0),this._elementIndexUint},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"depthTexture",{get:function(){return this._depthTextureInit||(this._depthTexture=this._gl.getExtension("WEBGL_depth_texture")||this._gl.getExtension("MOZ_WEBGL_depth_texture")||this._gl.getExtension("WEBKIT_WEBGL_depth_texture"),this._depthTextureInit=!0),this._depthTexture},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,
"textureFilterAnisotropic",{get:function(){return this._textureFilterAnisotropicInit||(this._textureFilterAnisotropic=this._gl.getExtension("EXT_texture_filter_anisotropic")||this._gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this._gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this._textureFilterAnisotropicInit=!0),this._textureFilterAnisotropic},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shaderTextureLOD",{get:function(){return this._shaderTextureLODInit||
(this._shaderTextureLOD=this._gl.getExtension("EXT_shader_texture_lod"),this._shaderTextureLODInit=!0),this._shaderTextureLOD},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"compressedTextureS3TC",{get:function(){return this._compressedTextureS3TCInit||(this._compressedTextureS3TC=this._gl.getExtension("WEBGL_compressed_texture_s3tc"),this._compressedTextureS3TCInit=!0),this._compressedTextureS3TC},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"disjointTimerQuery",
{get:function(){return this._disjointTimerQueryInit||(this._disjointTimerQuery=this._gl.getExtension("EXT_disjoint_timer_query"),this._disjointTimerQueryInit=!0),this._disjointTimerQuery},enumerable:!0,configurable:!0}),a}()})},"esri/views/webgl/FramebufferObject":function(){define(["require","exports","./Texture"],function(a,h,m){a=function(){function a(d,c,f,e){if(this._context=null,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachment=null,this._initialized=
!1,this._context=d,this._desc={colorTarget:c.colorTarget,depthStencilTarget:c.depthStencilTarget,width:c.width,height:c.height,multisampled:c.multisampled},this._id=a._nextId++,f)d=void 0,f instanceof m?(this._colorAttachment=f,d=f.descriptor):(d=f,this._colorAttachment=new m(this._context,d)),0!==this._desc.colorTarget&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),a._validateTextureDimensions(d,this._desc);e&&(this._context.extensions.depthTexture||
console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),f=void 0,e instanceof m?(this._depthStencilTexture=e,f=this._depthStencilTexture.descriptor):(f=e,this._depthStencilTexture=new m(this._context,f)),a._validateTextureDimensions(f,this._desc))}return a.create=function(d,c){return new a(d,c)},a.createWithAttachments=function(d,c,f,e){return new a(d,f,c,e)},Object.defineProperty(a.prototype,"id",{get:function(){return this._id},
enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof m?this._colorAttachment:null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},
enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){this._context&&this._glName&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),this._context.gl.deleteFramebuffer(this._glName),this._glName=null)},a.prototype.attachColorTexture=function(d){if(d){if(a._validateTextureDimensions(d.descriptor,
this._desc),this._disposeColorAttachment(),this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,d.glName,0)}this._colorAttachment=d}},a.prototype.detachColorTexture=function(){var a=void 0;if(this._colorAttachment instanceof m){if(a=this._colorAttachment,this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;this._context.gl.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,
null,0)}this._colorAttachment=null}return a},a.prototype.attachDepthStencilTexture=function(d){if(d){var c=d.descriptor;if(34041!==c.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==c.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!"),this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),a._validateTextureDimensions(c,
this._desc),4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized)this._context.bindFramebuffer(this),c=this._context.gl,c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,d.glName,0);this._depthStencilTexture=d}},a.prototype.detachDepthStencilTexture=function(){var a=this._depthStencilTexture;if(a&&this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;this._context.gl.framebufferTexture2D(c.FRAMEBUFFER,
c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,null,0)}return this._depthStencilTexture=null,a},a.prototype.copyToTexture=function(a,c,f,e,h,b,g){(0>a||0>c||0>h||0>b)&&console.error("Offsets cannot be negative!");(0>=f||0>=e)&&console.error("Copy width and height must be greater than zero!");var d=this._desc,l=g.descriptor;3553!==g.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(a+f>d.width||c+e>d.height||h+f>l.width||b+e>l.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");
d=this._context;d.bindTexture(g);d.bindFramebuffer(this);d.gl.copyTexSubImage2D(3553,0,h,b,a,c,f,e)},a.prototype.readPixels=function(a,c,f,e,h,b,g){(0>=f||0>=e)&&console.error("Copy width and height must be greater than zero!");g||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(a,c,f,e,h,b,g)},a.prototype.resize=function(d,c){var f=this._desc;if(f.width!==d||f.height!==c){if(!this._initialized){if(f.width=d,f.height=c,this._colorAttachment instanceof
m)f=this._colorAttachment,f.resize(d,c);return void(this._depthStencilTexture&&this._depthStencilTexture.resize(d,c))}if(f.width=d,f.height=c,this._colorAttachment instanceof m){var f=this._colorAttachment,e=f.descriptor;e.width=d;e.height=c;this._colorAttachment.dispose();this._colorAttachment=new m(this._context,e);a._validateTextureDimensions(f.descriptor,this._desc)}else this._colorAttachment&&this._disposeColorAttachment();null!=this._depthStencilTexture?(e=this._depthStencilTexture.descriptor,
e.width=d,e.height=c,this._depthStencilTexture.dispose(),this._depthStencilTexture=new m(this._context,e)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments();this._initialized=!1}},a.prototype.initialize=function(){if(this._initialized)return!1;var a=this._context.gl;this._glName&&a.deleteFramebuffer(this._glName);var c=a.createFramebuffer(),f=this._desc;if(a.bindFramebuffer(a.FRAMEBUFFER,c),!this._colorAttachment)if(0===f.colorTarget)this._colorAttachment=new m(this._context,
{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:f.width,height:f.height});else{var e=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,e);a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,f.width,f.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,e);this._colorAttachment=e}this._colorAttachment instanceof m&&a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._colorAttachment.glName,0);switch(f.depthStencilTarget){case 1:case 3:e=
a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,e);var h=1===f.depthStencilTarget?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT;a.renderbufferStorage(a.RENDERBUFFER,1===f.depthStencilTarget?a.DEPTH_COMPONENT16:a.DEPTH_STENCIL,f.width,f.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,h,a.RENDERBUFFER,e);this._depthAttachment=e;break;case 2:e=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,e);a.renderbufferStorage(a.RENDERBUFFER,a.STENCIL_INDEX8,f.width,f.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,
a.STENCIL_ATTACHMENT,a.RENDERBUFFER,e);this._stencilAttachment=e;break;case 4:this._depthStencilTexture||(this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new m(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:f.width,height:f.height})),a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,
a.TEXTURE_2D,this._depthStencilTexture.glName,0)}return a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!"),this._glName=c,this._initialized=!0,!0},a.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof m){var a=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)}a.dispose()}else this._colorAttachment instanceof
WebGLRenderbuffer&&(a=this._colorAttachment,c=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(a));this._colorAttachment=null},a.prototype._disposeDepthStencilAttachments=function(){var a=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,1===this._desc.depthStencilTarget?
c.DEPTH_ATTACHMENT:c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,null)}a.deleteRenderbuffer(this._depthAttachment);this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),c=this._context.gl,c.framebufferRenderbuffer(c.FRAMEBUFFER,c.STENCIL_ATTACHMENT,c.RENDERBUFFER,null)),a.deleteRenderbuffer(this._stencilAttachment),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),a=this._context.gl,
a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)},a._validateTextureDimensions=function(a,c){3553!==a.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==c.width&&0<=c.width&&void 0!==c.height&&0<=c.height?(c.width!==a.width||c.height!==a.height)&&console.error("Color attachment texture must match the framebuffer's!"):(c.width=a.width,c.height=a.height)},a}();return a._nextId=0,
a})},"esri/views/webgl/Texture":function(){define(["require","exports"],function(a,h){a=function(){function a(f,d,c){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=f;this._desc={pixelFormat:d.pixelFormat,dataType:d.dataType,target:d.target?d.target:3553,samplingMode:d.samplingMode?d.samplingMode:9729,wrapMode:d.wrapMode?d.wrapMode:10497,maxAnisotropy:d.maxAnisotropy,flipped:void 0!==d.flipped?d.flipped:
!1,hasMipmap:void 0!==d.hasMipmap?d.hasMipmap:!1,level:void 0!==d.level?d.level:0,unpackAlignment:d.unpackAlignment?d.unpackAlignment:4,width:d.width,height:d.height,preMultiplyAlpha:void 0!==d.preMultiplyAlpha?d.preMultiplyAlpha:!1};this._id=++a._nextId;this.setData(c)}return Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,
"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){var a=this;if(this._context){if(this._glName){var d=this._context.gl;this._boundToUnits.forEach(function(c){a._context.bindTexture(null,c)});d.deleteTexture(this._glName);this._glName=null}this._context=null}},a.prototype.resize=function(a,d){var c=this._desc;c.width===a&&c.height===d||(c.width=a,c.height=d,this.setData(null))},a.prototype.setData=function(f){var d=this._context.gl;this._glName||
(this._glName=d.createTexture());void 0===f&&(f=null);null===f&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var c=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var h=this._desc;a._validateTexture(h);d.pixelStorei(d.UNPACK_ALIGNMENT,h.unpackAlignment);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,h.flipped?1:0);d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.preMultiplyAlpha);f instanceof ImageData||f instanceof HTMLImageElement||f instanceof HTMLCanvasElement||
f instanceof HTMLVideoElement?(d.texImage2D(d.TEXTURE_2D,h.level,h.pixelFormat,h.pixelFormat,h.dataType,f),void 0===this._desc.width&&(this._desc.width=f.width),void 0===this._desc.height&&(this._desc.height=f.height)):((null==h.width||null==h.height)&&console.error("Width and height must be specified!"),d.texImage2D(d.TEXTURE_2D,h.level,h.pixelFormat,h.width,h.height,0,h.pixelFormat,h.dataType,f));h.hasMipmap&&this.generateMipmap();a._applySamplingMode(d,this._desc);a._applyWrapMode(d,this._desc);
a._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(c,0)},a.prototype.updateData=function(a,d,c,h,e,l){l||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var b=this._context.gl,g=this._desc,f=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>d||0>c||h>g.width||e>g.height||d+h>g.width||c+e>g.height)&&console.error("An attempt to update out of bounds of the texture!");
l instanceof ImageData||l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement?b.texSubImage2D(b.TEXTURE_2D,a,d,c,g.pixelFormat,g.dataType,l):b.texSubImage2D(b.TEXTURE_2D,a,d,c,h,e,g.pixelFormat,g.dataType,l);this._context.bindTexture(f,0)},a.prototype.generateMipmap=function(){var f=this._desc;f.hasMipmap||(f.hasMipmap=!0,a._validateTexture(f));9729===f.samplingMode?(this._samplingModeDirty=!0,f.samplingMode=9985):9728===f.samplingMode&&(this._samplingModeDirty=
!0,f.samplingMode=9984);f=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var d=this._context.gl;d.generateMipmap(d.TEXTURE_2D);this._context.bindTexture(f,0)},a.prototype.setSamplingMode=function(f){f!==this._desc.samplingMode&&(this._desc.samplingMode=f,a._validateTexture(this._desc),this._samplingModeDirty=!0)},a.prototype.setWrapMode=function(f){f!==this._desc.wrapMode&&(this._desc.wrapMode=f,a._validateTexture(this._desc),this._wrapModeDirty=!0)},a.prototype.applyChanges=function(){var f=
this._context.gl,d=this._desc;this._samplingModeDirty&&(a._applySamplingMode(f,d),this._samplingModeDirty=!1);this._wrapModeDirty&&(a._applyWrapMode(f,d),this._wrapModeDirty=!1)},a.prototype.setBoundToUnit=function(a,d){d?this._boundToUnits.add(a):this._boundToUnits["delete"](a)},a._isPowerOfTwo=function(a){return 0===(a&a-1)},a._validateTexture=function(f){(0>f.width||0>f.height)&&console.error("Negative dimension parameters are not allowed!");a._isPowerOfTwo(f.width)&&a._isPowerOfTwo(f.height)||
(33071!==f.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),f.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))},a._applySamplingMode=function(a,d){var c=d.samplingMode;9985===c||9987===c?c=9729:(9984===c||9986===c)&&(c=9728);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d.samplingMode)},a._applyWrapMode=function(a,d){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,d.wrapMode);
a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,d.wrapMode)},a._applyAnisotropicFilteringParameters=function(a,d){if(null!=d.maxAnisotropy){var c=a.extensions.textureFilterAnisotropic;c&&(a=a.gl,a.texParameterf(a.TEXTURE_2D,c.TEXTURE_MAX_ANISOTROPY_EXT,d.maxAnisotropy))}},a}();return a._nextId=0,a})},"esri/views/webgl/webgl-utils":function(){define([],function(){var a=function(a,m){for(var f=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d=null,c=0;c<f.length;++c){try{d=a.getContext(f[c],m)}catch(n){}if(d)break}return d};
return{create3DContext:a,setupWebGL:function(h,m){function f(a){var c=h.parentNode;c&&(c.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+a+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}return window.WebGLRenderingContext?(m=a(h,m))?[m]:(f('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e']):(f('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'])},detectWebGL:function(){var h;
try{h=window.WebGLRenderingContext}catch(f){h=[!1,0]}var m;try{m=a(document.createElement("canvas"))}catch(f){m=[!1,1]}h?m?(h=m,h=[!0,{VERSION:h.getParameter(h.VERSION),SHADING_LANGUAGE_VERSION:h.getParameter(h.SHADING_LANGUAGE_VERSION),VENDOR:h.getParameter(h.VENDOR),RENDERER:h.getParameter(h.RENDERER),EXTENSIONS:h.getSupportedExtensions(),MAX_TEXTURE_SIZE:h.getParameter(h.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:h.getParameter(h.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:h.getParameter(h.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]):
h=[!1,1]:h=[!1,0];return h}}})},"esri/views/2d/layers/support/GraphicsView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Collection ../../../../core/HandleRegistry ../../../../core/promiseUtils ../../../../Graphic ../../../layers/GraphicsView ../../engine/graphics/GFXSurface ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject".split(" "),function(a,
h,m,f,d,c,n,e,l,b,g,q,t){a=function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=a.apply(this,b)||this;return d._frontGroup=new q,d._handles=new n,d._objects=new Map,d.container=new g,d.container.addChild(d._frontGroup),d.watch("graphics",function(){return d._reset()},!0),d}return m(b,a),b.prototype.hitTest=function(a,b){if(!this.view||!this.view.position)return null;a+=this.view.position[0]-window.pageXOffset;b+=this.view.position[1]-window.pageYOffset;return(a=
this.container.hitTest(a,b))?e.resolve(a.graphic):null},b.prototype._reset=function(){var a=this;this._handles.remove("graphics");this.graphics&&(this.graphics.forEach(this._add,this),this._handles.add(this.graphics.on("change",function(b){return a._graphicsChangeHandler(b)}),"graphics"))},b.prototype._add=function(a){if(!this._objects.has(a)){var b=new t;b.graphic=a;b.renderingInfo={symbol:a.symbol};this._objects.set(a,b);this._frontGroup.addChild(b)}},b.prototype._remove=function(a){var b=this._objects.get(a);
b&&(this._objects["delete"](a),this._frontGroup.removeChild(b))},b.prototype._graphicsChangeHandler=function(a){for(var b=a.removed,c=0,d=a.added;c<d.length;c++)a=d[c],this._add(a);for(c=0;c<b.length;c++)a=b[c],this._remove(a)},b}(d.declared(b));return f([d.cast(c.ofType(l))],a.prototype,"graphics",void 0),f([d.property()],a.prototype,"view",void 0),a=f([d.subclass("esri.views.2d.layers.support.GraphicsView2D")],a)})},"esri/views/layers/GraphicsView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Collection ../../Graphic".split(" "),
function(a,h,m,f,d,c,n,e){a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.graphics=null,b.renderer=null,b.view=null,b}return m(b,a),b}(d.declared(c));return f([d.property({type:n.ofType(e)})],a.prototype,"graphics",void 0),f([d.property()],a.prototype,"renderer",void 0),f([d.property()],a.prototype,"view",void 0),a=f([d.subclass("esri.views.layers.GraphicsView")],a)})},"esri/views/2d/engine/graphics/GFXSurface":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../../libs/gl-matrix/mat2d ../../libs/gl-matrix/common ../../libs/gfx ../../viewpointUtils ../Container ./Projector ../cssUtils".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g){var q=d.identity(d.create());return function(a){function h(){var c=null!==a&&a.apply(this,arguments)||this;return c._transform=d.create(),c._projector=new b,c}return m(h,a),h.prototype.createElement=function(){var a=document.createElement("div");return a.setAttribute("class","esri-display-object"),a},h.prototype.setElement=function(a){this.surface&&(this.surface.destroy(),this.surface=null);(this.element=a)&&(this.surface=n.createSurface(this.element,400,400))},h.prototype.doRender=
function(b){var f=this.element.style;if(!this.visible)return void(f.display="none");f.display="block";f.opacity=""+this.opacity;var h=this._transform,l=b.state;if(b.stationary)e.getMatrix(h,l.center,l.size,l.resolution,c.toRadian(l.rotation),1),this.surface.setDimensions(l.size[0],l.size[1]),this._projector.update(h,l.resolution),this.children.forEach(function(a){a.g&&a.g.setTransform(q)}),a.prototype.doRender.call(this,b);else{var k=d.invert(d.create(),h);d.multiply(k,l.transform,k);this.children.forEach(function(a){a.g&&
a.g.setTransform(k)})}g.clip(f,l.clipRect);f.transform=g.cssMatrix3d(d.fromRotation(d.create(),c.toRadian(l.rotation)));this.surface.rawNode.style.transform=g.cssMatrix(d.fromRotation(d.create(),c.toRadian(-l.rotation)))},h.prototype.hitTest=function(a,b){if(!this.attached)return null;var c=this.surface.rawNode,c=c.parentElement||c.parentNode;c.style.zIndex="9000";a=document.elementFromPoint(a,b);return(a=(c.style.zIndex="",a))&&a.gfxObject||null},h.prototype.prepareChildrenRenderParameters=function(a){return f({},
a,{projector:this._projector,surface:this.surface})},h.prototype.beforeRenderChildren=function(a,b){this.surface.openBatch()},h.prototype.attachChild=function(a,b){return a.attach(b)},h.prototype.detachChild=function(a,b){return a.detach()},h.prototype.renderChild=function(a,b){return a.processRender(b)},h.prototype.afterRenderChildren=function(a,b){this.surface.closeBatch()},h}(l)})},"esri/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(a){for(var h,m=
1,f=arguments.length;f>m;m++){h=arguments[m];for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(a[d]=h[d])}return a}})},"esri/views/2d/libs/gfx":function(){define("require exports ./gfx/svg ./gfx/Circle ./gfx/Group ./gfx/Path ./gfx/Image ./gfx/Rect ./gfx/Shape ./gfx/Surface ./gfx/Text".split(" "),function(a,h,m,f,d,c,n,e,l,b,g){Object.defineProperty(h,"__esModule",{value:!0});h.createSurface=m.createSurface;h.Circle=f["default"];h.Group=d["default"];h.Path=c["default"];h.Image=n["default"];
h.Rect=e["default"];h.Shape=l["default"];h.Surface=b["default"];h.Text=g["default"]})},"esri/views/2d/libs/gfx/svg":function(){define(["require","exports","dojo/dom","./Surface"],function(a,h,m,f){function d(a,d){return document.createElementNS?document.createElementNS(a,d):document.createElement(d)}Object.defineProperty(h,"__esModule",{value:!0});h.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};h.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,
1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};h._createElementNS=d;h._setAttributeNS=function(a,d,e,f){return a.setAttributeNS?a.setAttributeNS(d,e,f):a.setAttribute(e,f)};h._createTextNode=function(a){return document.createTextNode(a)};h._createFragment=function(){return document.createDocumentFragment()};h.getRef=function(a){return a&&"none"!==a?a.match(/^url\(#.+\)$/)?m.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?
m.byId(a.slice(1)):null:null};h.createSurface=function(a,n,e){var c=new f["default"];c.rawNode=d(h.xmlns.svg,"svg");c.rawNode.setAttribute("overflow","hidden");n&&c.rawNode.setAttribute("width",0>n?0:n);e&&c.rawNode.setAttribute("height",0>e?0:e);n=d(h.xmlns.svg,"defs");return c.rawNode.appendChild(n),c.defNode=n,c._parent=m.byId(a),c._parent.appendChild(c.rawNode),c}})},"esri/views/2d/libs/gfx/Surface":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/has dojo/_base/array dojo/dom-construct dojox/gfx/_base ./svg ./Container ./Circle ./Group ./Path ./Image ./Rect ./Text".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v){Object.defineProperty(h,"__esModule",{value:!0});var r=navigator.userAgent,p=534<function(){var a=/WebKit\/(\d*)/.exec(r);return a?parseInt(a[1],10):0}();a=function(a){function h(){var b=null!==a&&a.apply(this,arguments)||this;return b.rawNode=null,b._parent=null,b._nodes=[],b._events=[],b}return m(h,a),h.prototype.destroy=function(){if(d.forEach(this._nodes,c.destroy),this._nodes=[],d.forEach(this._events,function(a){a&&a.remove()}),this._events=[],this.rawNode=
null,f("ie"))for(;this._parent.lastChild;)c.destroy(this._parent.lastChild);else this._parent.innerHTML="";this.defNode=this._parent=null},h.prototype.setDimensions=function(a,b){if(!this.rawNode)return this;a=0>a?0:a;b=0>b?0:b;return this.rawNode.setAttribute("width",a),this.rawNode.setAttribute("height",b),p&&(this.rawNode.style.width=a,this.rawNode.style.height=b),this},h.prototype.getDimensions=function(){return this.rawNode?{width:n.normalizedLength(this.rawNode.getAttribute("width")),height:n.normalizedLength(this.rawNode.getAttribute("height"))}:
null},h.prototype.getEventSource=function(){return this.rawNode},h.prototype._getRealMatrix=function(){return null},h.prototype.createShape=function(a){switch(a.type){case n.defaultPath.type:return this.createPath(a);case n.defaultRect.type:return this.createRect(a);case n.defaultCircle.type:return this.createCircle(a);case n.defaultImage.type:return this.createImage(a);case n.defaultText.type:return this.createText(a)}return console.error("[gfx] unknown shape",a),null},h.prototype.createGroup=function(){return this.createObject(g["default"])},
h.prototype.createRect=function(a){return this.createObject(w["default"],a)},h.prototype.createCircle=function(a){return this.createObject(b["default"],a)},h.prototype.createImage=function(a){return this.createObject(t["default"],a)},h.prototype.createText=function(a){return this.createObject(v["default"],a)},h.prototype.createPath=function(a){return this.createObject(q["default"],a)},h.prototype.createObject=function(a,b){if(!this.rawNode)return null;var c=new a;a=e._createElementNS(e.xmlns.svg,
a.nodeType);return c.setRawNode(a),c.setShape(b),this.add(c),c},h}(l["default"]);h["default"]=a})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(a,h,m,f,d,c,n,e,l){var b=h.getObject("dojox.gfx",!0),g=b._base={};b._hasClass=function(a,b){return(a=a.getAttribute("className"))&&0<=(" "+a+" ").indexOf(" "+b+" ")};b._addClass=function(a,b){var c=
a.getAttribute("className")||"";(!c||0>(" "+c+" ").indexOf(" "+b+" "))&&a.setAttribute("className",c+(c?" ":"")+b)};b._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};g._getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b,c;f("ie")&&(c=d.doc.documentElement.style.fontSize||"",c||(d.doc.documentElement.style.fontSize=
"100%"));var g=e.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},d.body());for(b in a)g.style.fontSize=b,a[b]=16*Math.round(12*g.offsetHeight/16)/12/1E3;f("ie")&&(d.doc.documentElement.style.fontSize=c);d.body().removeChild(g);return a};var q=null;g._getCachedFontMeasurements=function(a){if(a||!q)q=g._getFontMeasurements();return q};var t=null,w={};g._getTextBox=function(a,
b,c){var g,f,h=arguments.length,k;t||(t=e.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},d.body()));g=t;g.className="";f=g.style;f.borderWidth="0";f.margin="0";f.padding="0";f.outline="0";if(1<h&&b)for(k in b)k in w||(f[k]=b[k]);2<h&&c&&(g.className=c);g.innerHTML=a;g.getBoundingClientRect?(f=g.getBoundingClientRect(),f={l:f.left,t:f.top,w:f.width||f.right-f.left,h:f.height||f.bottom-f.top}):f=l.getMarginBox(g);g.innerHTML="";return f};g._computeTextLocation=
function(a,b,c,d){var e={};switch(a.align){case "end":e.x=a.x-b;break;case "middle":e.x=a.x-b/2;break;default:e.x=a.x}e.y=a.y-c*(d?.75:1);return e};g._computeTextBoundingBox=function(a){if(!b._base._isRendered(a))return{x:0,y:0,width:0,height:0};var c;c=a.getShape();var d=a.getFont()||b.defaultFont;a=a.getTextWidth();d=b.normalizedLength(d.size);c=g._computeTextLocation(c,a,d,!0);return{x:c.x,y:c.y,width:a,height:d}};g._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==
a};var v=0;g._getUniqueId=function(){var b;do b=a._scopeName+"xUnique"+ ++v;while(n.byId(b));return b};var r=f("pointer-events")?"touchAction":f("MSPointer")?"msTouchAction":null;g._fixMsTouchAction=r?function(a){a.rawNode.style[r]="none"}:function(){};h.mixin(b,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},
defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},
defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(c){var d=a[c];if(d)return new d;d=a[c]=new Function;d.prototype=b["default"+c];return new d}}(),normalizeColor:function(a){return a instanceof m?a:new m(a)},normalizeParameters:function(a,
b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return h.delegate(a);var d={};for(c in a)c in d||(d[c]=h.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var d=c.indexOf(".");0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var c=
b.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){c.style=a[0];c.variant=a[1];c.weight=a[2];var d=a[3].indexOf("/");c.size=0>d?a[3]:a[3].substring(0,d);var e=4;0>d&&("/"==a[4]?e=6:"/"==a[4].charAt(0)&&(e=5));e<a.length&&(c.family=a.slice(e).join(" "))}return c},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return b._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*b.px_in_pt()},px2pt:function(a){return a/b.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;
if(2<a.length){var c=b.px_in_pt(),d=parseFloat(a);switch(a.slice(-2)){case "px":return d;case "pt":return d*c;case "in":return 72*d*c;case "pc":return 12*d*c;case "mm":return d*b.mm_in_pt*c;case "cm":return d*b.cm_in_pt*c}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var d="string"==typeof a?b[a]:a;d&&(c.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),
function(a){b[a]=d[a]}),"string"==typeof a?b.renderer=a:c.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return b.renderer=b[a]&&b[a].Surface===b.Surface?a:null}))}});return b})},"esri/views/2d/libs/gfx/Container":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/matrix ./Shape ./svg".split(" "),function(a,h,m,f,d,c){Object.defineProperty(h,"__esModule",{value:!0});a=function(a){function d(){var c=null!==a&&a.apply(this,arguments)||this;
return c.children=[],c._batch=0,c}return m(d,a),d.prototype.openBatch=function(){return this._batch||(this.fragment=c._createFragment()),++this._batch,this},d.prototype.closeBatch=function(){return this._batch=0<this._batch?--this._batch:0,this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),this.fragment=null),this},d.prototype.add=function(a){if(this===a.getParent())return this;this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode);var b=a.getParent();
return b&&b.remove(a,!0),this.children.push(a),a._setParent(this,this._getRealMatrix()),this},d.prototype.remove=function(a,b){if(void 0===b&&(b=!1),this!==a.getParent())return this;this.rawNode===a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode);this.fragment&&this.fragment===a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode);for(var c=0;c<this.children.length;++c)if(this.children[c]===a){b||(a.parent=null,a.parentMatrix=null);this.children.splice(c,1);break}return this},d.prototype.clear=
function(a){void 0===a&&(a=!1);for(var b=this.rawNode;b.lastChild;)b.removeChild(b.lastChild);var c=this.defNode;if(c){for(;c.lastChild;)c.removeChild(c.lastChild);b.appendChild(c)}for(c=0;c<this.children.length;++c)b=this.children[c],b.parent=null,b.parentMatrix=null,a&&b.destroy();return this.children=[],this},d.prototype.getBoundingBox=function(){if(!this.children)return null;var a=null;return this.children.forEach(function(b){var c=b.getBoundingBox();c&&((b=b.getTransform())&&(c=f.multiplyRectangle(b,
c)),a?(a.x=Math.min(a.x,c.x),a.y=Math.min(a.y,c.y),a.endX=Math.max(a.endX,c.x+c.width),a.endY=Math.max(a.endY,c.y+c.height)):a={x:c.x,y:c.y,endX:c.x+c.width,endY:c.y+c.height,width:0,height:0})}),a&&(a.width=a.endX-a.x,a.height=a.endY-a.y),a},d.prototype._moveChildToFront=function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]===a){this.children.splice(b,1);this.children.push(a);break}return this},d.prototype._moveChildToBack=function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]===
a){this.children.splice(b,1);this.children.unshift(a);break}return this},d}(d["default"]);h["default"]=a})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(a,h){var m=a.matrix={},f={};m._degToRad=function(a){return f[a]||(f[a]=Math.PI*a/180)};m._radToDeg=function(a){return a/Math.PI*180};m.Matrix2D=function(a){if(a)if("number"==typeof a)this.xx=this.yy=a;else if(a instanceof Array){if(0<a.length){for(var c=m.normalize(a[0]),d=1;d<a.length;++d){var e=c,f=m.normalize(a[d]),
c=new m.Matrix2D;c.xx=e.xx*f.xx+e.xy*f.yx;c.xy=e.xx*f.xy+e.xy*f.yy;c.yx=e.yx*f.xx+e.yy*f.yx;c.yy=e.yx*f.xy+e.yy*f.yy;c.dx=e.xx*f.dx+e.xy*f.dy+e.dx;c.dy=e.yx*f.dx+e.yy*f.dy+e.dy}h.mixin(this,c)}}else h.mixin(this,a)};h.extend(m.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});h.mixin(m,{identity:new m.Matrix2D,flipX:new m.Matrix2D({xx:-1}),flipY:new m.Matrix2D({yy:-1}),flipXY:new m.Matrix2D({xx:-1,yy:-1}),translate:function(a,c){return 1<arguments.length?new m.Matrix2D({dx:a,dy:c}):new m.Matrix2D({dx:a.x,
dy:a.y})},scale:function(a,c){return 1<arguments.length?new m.Matrix2D({xx:a,yy:c}):"number"==typeof a?new m.Matrix2D({xx:a,yy:a}):new m.Matrix2D({xx:a.x,yy:a.y})},rotate:function(a){var c=Math.cos(a);a=Math.sin(a);return new m.Matrix2D({xx:c,xy:-a,yx:a,yy:c})},rotateg:function(a){return m.rotate(m._degToRad(a))},skewX:function(a){return new m.Matrix2D({xy:Math.tan(a)})},skewXg:function(a){return m.skewX(m._degToRad(a))},skewY:function(a){return new m.Matrix2D({yx:Math.tan(a)})},skewYg:function(a){return m.skewY(m._degToRad(a))},
reflect:function(a,c){1==arguments.length&&(c=a.y,a=a.x);var d=a*a,e=c*c,f=d+e,b=2*a*c/f;return new m.Matrix2D({xx:2*d/f-1,xy:b,yx:b,yy:2*e/f-1})},project:function(a,c){1==arguments.length&&(c=a.y,a=a.x);var d=a*a,e=c*c,f=d+e,b=a*c/f;return new m.Matrix2D({xx:d/f,xy:b,yx:b,yy:e/f})},normalize:function(a){return a instanceof m.Matrix2D?a:new m.Matrix2D(a)},isIdentity:function(a){return 1==a.xx&&0==a.xy&&0==a.yx&&1==a.yy&&0==a.dx&&0==a.dy},clone:function(a){var c=new m.Matrix2D,d;for(d in a)"number"==
typeof a[d]&&"number"==typeof c[d]&&c[d]!=a[d]&&(c[d]=a[d]);return c},invert:function(a){a=m.normalize(a);var c=a.xx*a.yy-a.xy*a.yx;return a=new m.Matrix2D({xx:a.yy/c,xy:-a.xy/c,yx:-a.yx/c,yy:a.xx/c,dx:(a.xy*a.dy-a.yy*a.dx)/c,dy:(a.yx*a.dx-a.xx*a.dy)/c})},_multiplyPoint:function(a,c,f){return{x:a.xx*c+a.xy*f+a.dx,y:a.yx*c+a.yy*f+a.dy}},multiplyPoint:function(a,c,f){a=m.normalize(a);return"number"==typeof c&&"number"==typeof f?m._multiplyPoint(a,c,f):m._multiplyPoint(a,c.x,c.y)},multiplyRectangle:function(a,
c){var d=m.normalize(a);c=c||{x:0,y:0,width:0,height:0};if(m.isIdentity(d))return{x:c.x,y:c.y,width:c.width,height:c.height};a=m.multiplyPoint(d,c.x,c.y);var e=m.multiplyPoint(d,c.x,c.y+c.height),f=m.multiplyPoint(d,c.x+c.width,c.y);c=m.multiplyPoint(d,c.x+c.width,c.y+c.height);var d=Math.min(a.x,e.x,f.x,c.x),b=Math.min(a.y,e.y,f.y,c.y);return{x:d,y:b,width:Math.max(a.x,e.x,f.x,c.x)-d,height:Math.max(a.y,e.y,f.y,c.y)-b}},multiply:function(a){for(var c=m.normalize(a),d=1;d<arguments.length;++d){var e=
c,f=m.normalize(arguments[d]),c=new m.Matrix2D;c.xx=e.xx*f.xx+e.xy*f.yx;c.xy=e.xx*f.xy+e.xy*f.yy;c.yx=e.yx*f.xx+e.yy*f.yx;c.yy=e.yx*f.xy+e.yy*f.yy;c.dx=e.xx*f.dx+e.xy*f.dy+e.dx;c.dy=e.yx*f.dx+e.yy*f.dy+e.dy}return c},_sandwich:function(a,c,f){return m.multiply(m.translate(c,f),a,m.translate(-c,-f))},scaleAt:function(a,c,f,e){switch(arguments.length){case 4:return m._sandwich(m.scale(a,c),f,e);case 3:return"number"==typeof f?m._sandwich(m.scale(a),c,f):m._sandwich(m.scale(a,c),f.x,f.y)}return m._sandwich(m.scale(a),
c.x,c.y)},rotateAt:function(a,c,f){return 2<arguments.length?m._sandwich(m.rotate(a),c,f):m._sandwich(m.rotate(a),c.x,c.y)},rotategAt:function(a,c,f){return 2<arguments.length?m._sandwich(m.rotateg(a),c,f):m._sandwich(m.rotateg(a),c.x,c.y)},skewXAt:function(a,c,f){return 2<arguments.length?m._sandwich(m.skewX(a),c,f):m._sandwich(m.skewX(a),c.x,c.y)},skewXgAt:function(a,c,f){return 2<arguments.length?m._sandwich(m.skewXg(a),c,f):m._sandwich(m.skewXg(a),c.x,c.y)},skewYAt:function(a,c,f){return 2<arguments.length?
m._sandwich(m.skewY(a),c,f):m._sandwich(m.skewY(a),c.x,c.y)},skewYgAt:function(a,c,f){return 2<arguments.length?m._sandwich(m.skewYg(a),c,f):m._sandwich(m.skewYg(a),c.x,c.y)}});a.Matrix2D=m.Matrix2D;return m})},"esri/views/2d/libs/gfx/Shape":function(){define("require exports dojox/gfx/_base dojo/_base/lang dojo/_base/Color dojo/dom dojo/dom-attr ./svg ./Surface ../gl-matrix/mat2d".split(" "),function(a,h,m,f,d,c,n,e,l,b){Object.defineProperty(h,"__esModule",{value:!0});a=function(){function a(){this.parentMatrix=
this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null}return a.prototype.destroy=function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=e.getRef(a))&&a.parentNode.removeChild(a)}this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},a.prototype.getNode=function(){return this.rawNode},a.prototype.getShape=function(){return this.shape},a.prototype.getTransform=function(){return this.matrix},
a.prototype.getFill=function(){return this.fillStyle},a.prototype.getStroke=function(){return this.strokeStyle},a.prototype.getParent=function(){return this.parent},a.prototype.getBoundingBox=function(){return this.bbox},a.prototype.setTransform=function(a){return this.matrix=this.matrix?b.copy(this.matrix,a):b.clone(a),this._applyTransform()},a.prototype.setFill=function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;
var b;if("object"==typeof a&&"type"in a){switch(a.type){case "linear":b=m.makeParameters(m.defaultLinearGradient,a);a=this._setFillObject(b,"linearGradient");a.setAttribute("x1",b.x1.toFixed(8));a.setAttribute("y1",b.y1.toFixed(8));a.setAttribute("x2",b.x2.toFixed(8));a.setAttribute("y2",b.y2.toFixed(8));break;case "radial":b=m.makeParameters(m.defaultRadialGradient,a);a=this._setFillObject(b,"radialGradient");a.setAttribute("cx",b.cx.toFixed(8));a.setAttribute("cy",b.cy.toFixed(8));a.setAttribute("r",
b.r.toFixed(8));break;case "pattern":b=m.makeParameters(m.defaultPattern,a),a=this._setFillObject(b,"pattern"),a.setAttribute("x",b.x.toFixed(8)),a.setAttribute("y",b.y.toFixed(8)),a.setAttribute("width",b.width.toFixed(8)),a.setAttribute("height",b.height.toFixed(8))}return this.fillStyle=b,this}return b=m.normalizeColor(a),this.fillStyle=b,this.rawNode.setAttribute("fill",b.toCss()),this.rawNode.setAttribute("fill-opacity",b.a),this.rawNode.setAttribute("fill-rule","evenodd"),this},a.prototype.setStroke=
function(a){var b=this.rawNode;if(!a)return this.strokeStyle=null,b.setAttribute("stroke","none"),b.setAttribute("stroke-opacity",0),this;("string"==typeof a||f.isArray(a)||a instanceof d)&&(a={color:a});a=this.strokeStyle=m.makeParameters(m.defaultStroke,a);if(a.color=m.normalizeColor(a.color),a){var c=0>a.width?0:a.width;b.setAttribute("stroke",a.color.toCss());b.setAttribute("stroke-opacity",a.color.a);b.setAttribute("stroke-width",c);b.setAttribute("stroke-linecap",a.cap);"number"==typeof a.join?
(b.setAttribute("stroke-linejoin","miter"),b.setAttribute("stroke-miterlimit",a.join)):b.setAttribute("stroke-linejoin",a.join);var g=a.style.toLowerCase();if(g in e.dasharray&&(g=e.dasharray[g]),g instanceof Array){for(var g=f._toArray(g),h=0;h<g.length;++h)g[h]*=c;if("butt"!==a.cap){for(h=0;h<g.length;h+=2)g[h]-=c,1>g[h]&&(g[h]=1);for(h=1;h<g.length;h+=2)g[h]+=c}g=g.join(",")}b.setAttribute("stroke-dasharray",g);b.setAttribute("dojoGfxStrokeStyle",a.style)}return this},a.prototype._getParentSurface=
function(){for(var a=this.parent;a&&!(a instanceof l["default"]);a=a.parent);return a},a.prototype._setFillObject=function(a,b){var c=e.xmlns.svg;this.fillStyle=a;var d=this._getParentSurface().defNode,f=this.rawNode.getAttribute("fill"),g=e.getRef(f);if(g)if(f=g,f.tagName.toLowerCase()!==b.toLowerCase())g=f.id,f.parentNode.removeChild(f),f=e._createElementNS(c,b),f.setAttribute("id",g),d.appendChild(f);else for(;f.childNodes.length;)f.removeChild(f.lastChild);else f=e._createElementNS(c,b),f.setAttribute("id",
m._base._getUniqueId()),d.appendChild(f);if("pattern"===b)f.setAttribute("patternUnits","userSpaceOnUse"),c=e._createElementNS(c,"image"),c.setAttribute("x",0),c.setAttribute("y",0),c.setAttribute("width",(0>a.width?0:a.width).toFixed(8)),c.setAttribute("height",(0>a.height?0:a.height).toFixed(8)),e._setAttributeNS(c,e.xmlns.xlink,"xlink:href",a.src),f.appendChild(c);else for(f.setAttribute("gradientUnits","userSpaceOnUse"),b=0;b<a.colors.length;++b){var d=a.colors[b],g=e._createElementNS(c,"stop"),
h=d.color=m.normalizeColor(d.color);g.setAttribute("offset",d.offset.toFixed(8));g.setAttribute("stop-color",h.toCss());g.setAttribute("stop-opacity",h.a);f.appendChild(g)}return this.rawNode.setAttribute("fill","url(#"+f.getAttribute("id")+")"),this.rawNode.removeAttribute("fill-opacity"),this.rawNode.setAttribute("fill-rule","evenodd"),f},a.prototype._applyTransform=function(){var a=this.matrix;return a?this.rawNode.setAttribute("transform","matrix("+a[0].toFixed(8)+","+a[1].toFixed(8)+","+a[2].toFixed(8)+
","+a[3].toFixed(8)+","+a[4].toFixed(8)+","+a[5].toFixed(8)+")"):this.rawNode.removeAttribute("transform"),this},a.prototype.setRawNode=function(a){a=this.rawNode=a;"image"!==this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this},a.prototype.setShape=
function(a){this.shape=m.makeParameters(this.shape,a);for(var b in this.shape)"type"!==b&&(a=this.shape[b],"width"!==b&&"height"!==b||(a=0>a?0:a),this.rawNode.setAttribute(b,a));return this.bbox=null,this},a.prototype._moveToFront=function(){return this.rawNode.parentNode.appendChild(this.rawNode),this},a.prototype._moveToBack=function(){return this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild),this},a.prototype._removeClipNode=function(){var a,b=n.get(this.rawNode,
"clip-path");return b&&(a=c.byId(b.match(/gfx_clip[\d]+/)[0]),a&&a.parentNode.removeChild(a)),a},a.prototype.moveToFront=function(){var a=this.getParent();return a&&(a._moveChildToFront(this),this._moveToFront()),this},a.prototype.moveToBack=function(){var a=this.getParent();return a&&(a._moveChildToBack(this),this._moveToBack()),this},a.prototype.removeShape=function(a){return this.parent&&this.parent.remove(this,a),this},a.prototype._setParent=function(a,b){return this.parent=a,this._updateParentMatrix(b)},
a.prototype._updateParentMatrix=function(a){return this.parentMatrix=a?b.clone(a):null,this._applyTransform()},a.prototype._getRealMatrix=function(){for(var a=b.clone(this.matrix||b.create()),c=this.parent;c;)c.matrix&&a&&b.multiply(a,c.matrix,a),c=c.parent;return a},a}();h["default"]=a})},"esri/views/2d/libs/gfx/Circle":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","./Shape","dojox/gfx/_base"],function(a,h,m,f,d){Object.defineProperty(h,"__esModule",{value:!0});
a=function(a){function c(c){var e=a.call(this)||this;return e.shape=d.getDefault("Circle"),e.rawNode=c,e}return m(c,a),c.prototype.getBoundingBox=function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox},c}(f["default"]);a.nodeType="circle";h["default"]=a})},"esri/views/2d/libs/gfx/Group":function(){define("require exports ../../../../core/tsSupport/extendsHelper ./Container dojox/gfx/_base ./svg ./Circle ./Path ./Image ./Rect ./Text".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g){Object.defineProperty(h,"__esModule",{value:!0});a=function(a){function f(){return null!==a&&a.apply(this,arguments)||this}return m(f,a),f.prototype.setRawNode=function(a){this.rawNode=a;this.rawNode.__gfxObject__=this},f.prototype.destroy=function(){a.prototype.clear.call(this,!0);a.prototype.destroy.call(this)},f.prototype.createShape=function(a){switch(a.type){case d.defaultPath.type:return this.createPath(a);case d.defaultRect.type:return this.createRect(a);case d.defaultCircle.type:return this.createCircle(a);
case d.defaultImage.type:return this.createImage(a);case d.defaultText.type:return this.createText(a)}return console.error("[gfx] unknown shape",a),null},f.prototype.createGroup=function(){return this.createObject(f)},f.prototype.createRect=function(a){return this.createObject(b["default"],a)},f.prototype.createCircle=function(a){return this.createObject(n["default"],a)},f.prototype.createImage=function(a){return this.createObject(l["default"],a)},f.prototype.createText=function(a){return this.createObject(g["default"],
a)},f.prototype.createPath=function(a){return this.createObject(e["default"],a)},f.prototype.createObject=function(a,b){if(!this.rawNode)return null;var d=new a;a=c._createElementNS(c.xmlns.svg,a.nodeType);return d.setRawNode(a),d.setShape(b),this.add(d),d},f}(f["default"]);a.nodeType="g";h["default"]=a})},"esri/views/2d/libs/gfx/Path":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/_base/lang dojox/gfx/_base dojox/gfx/matrix ./Shape".split(" "),function(a,h,m,f,d,
c,n){Object.defineProperty(h,"__esModule",{value:!0});a=function(a){function e(b){var c=a.call(this)||this;return c.segments=[],c.tbbox=null,c.absolute=!0,c.last={},c.segmented=!1,c._validSegments={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},c._2PI=2*Math.PI,c.rawNode=b,c.shape=f.clone(d.defaultPath),c}return m(e,a),e.prototype.setAbsoluteMode=function(a){return this._confirmSegmented(),this.absolute="string"==typeof a?"absolute"===a:a,this},e.prototype.getAbsoluteMode=function(){return this._confirmSegmented(),
this.absolute},e.prototype.getBoundingBox=function(){return this._confirmSegmented(),this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},e.prototype._getRealBBox=function(){if(this._confirmSegmented(),this.tbbox)return this.tbbox;var a=this.bbox,c=this._getRealMatrix();this.bbox=null;for(var d=this.segments.length,e=0;d>e;++e)this._updateWithSegment(this.segments[e],c);c=this.bbox;return this.bbox=a,this.tbbox=c?[{x:c.l,y:c.t},
{x:c.r,y:c.t},{x:c.r,y:c.b},{x:c.l,y:c.b}]:null,this.tbbox},e.prototype.getLastPosition=function(){return this._confirmSegmented(),"x"in this.last?this.last:null},e.prototype._applyTransform=function(){return this.tbbox=null,a.prototype._applyTransform.call(this),this},e.prototype._updateBBox=function(a,d,e){e&&(d=c.multiplyPoint(e,a,d),a=d.x,d=d.y);this.bbox&&"l"in this.bbox?(this.bbox.l>a&&(this.bbox.l=a),this.bbox.r<a&&(this.bbox.r=a),this.bbox.t>d&&(this.bbox.t=d),this.bbox.b<d&&(this.bbox.b=
d)):this.bbox={l:a,b:d,r:a,t:d}},e.prototype._updateWithSegment=function(a,c){var b,e=a.args,f=e.length;switch(a.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(b=0;f>b;b+=2)this._updateBBox(e[b],e[b+1],c);this.last.x=e[f-2];this.last.y=e[f-1];this.absolute=!0;break;case "H":for(b=0;f>b;++b)this._updateBBox(e[b],this.last.y,c);this.last.x=e[f-1];this.absolute=!0;break;case "V":for(b=0;f>b;++b)this._updateBBox(this.last.x,e[b],c);this.last.y=e[f-1];this.absolute=!0;break;case "m":b=
0;"x"in this.last||(this._updateBBox(this.last.x=e[0],this.last.y=e[1],c),b=2);for(;f>b;b+=2)this._updateBBox(this.last.x+=e[b],this.last.y+=e[b+1],c);this.absolute=!1;break;case "l":case "t":for(b=0;f>b;b+=2)this._updateBBox(this.last.x+=e[b],this.last.y+=e[b+1],c);this.absolute=!1;break;case "h":for(b=0;f>b;++b)this._updateBBox(this.last.x+=e[b],this.last.y,c);this.absolute=!1;break;case "v":for(b=0;f>b;++b)this._updateBBox(this.last.x,this.last.y+=e[b],c);this.absolute=!1;break;case "c":for(b=
0;f>b;b+=6)this._updateBBox(this.last.x+e[b],this.last.y+e[b+1],c),this._updateBBox(this.last.x+e[b+2],this.last.y+e[b+3],c),this._updateBBox(this.last.x+=e[b+4],this.last.y+=e[b+5],c);this.absolute=!1;break;case "s":case "q":for(b=0;f>b;b+=4)this._updateBBox(this.last.x+e[b],this.last.y+e[b+1],c),this._updateBBox(this.last.x+=e[b+2],this.last.y+=e[b+3],c);this.absolute=!1;break;case "A":for(b=0;f>b;b+=7)this._updateBBox(e[b+5],e[b+6],c);this.last.x=e[f-2];this.last.y=e[f-1];this.absolute=!0;break;
case "a":for(b=0;f>b;b+=7)this._updateBBox(this.last.x+=e[b+5],this.last.y+=e[b+6],c);this.absolute=!1}a=[a.action];for(b=0;f>b;++b)a.push(d.formatNumber(e[b],!0));if("string"==typeof this.shape.path)this.shape.path+=a.join("");else for(b=0,f=a.length;f>b;++b)this.shape.path.push(a[b]);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},e.prototype._pushSegment=function(a,c){this.tbbox=null;var b,d=this._validSegments[a.toLowerCase()];"number"==typeof d&&(d?c.length>=
d&&(b={action:a,args:c.slice(0,c.length-c.length%d)},this.segments.push(b),this._updateWithSegment(b)):(b={action:a,args:[]},this.segments.push(b),this._updateWithSegment(b)))},e.prototype._collectArgs=function(a,c){for(var b=0;b<c.length;++b){var d=c[b];"boolean"==typeof d?a.push(d?1:0):"number"==typeof d?a.push(d):d instanceof Array?this._collectArgs(a,d):"x"in d&&"y"in d&&a.push(d.x,d.y)}},e.prototype._confirmSegmented=function(){if(!this.segmented){var a=this.shape.path;this.shape.path=[];this._setPath(a);
this.shape.path=this.shape.path.join("");this.segmented=!0}},e.prototype._setPath=function(a){a=f.isArray(a)?a:a.match(d.pathSvgRegExp);if(this.segments=[],this.absolute=!0,this.bbox={},this.last={},a){for(var b="",c=[],e=a.length,h=0;e>h;++h){var l=a[h],m=parseFloat(l);isNaN(m)?(b&&this._pushSegment(b,c),c=[],b=l):c.push(m)}this._pushSegment(b,c)}},e.prototype.setShape=function(b){return a.prototype.setShape.call(this,"string"==typeof b?{path:b}:b),this.segmented=!1,this.segments=[],this.shape.path?
this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d"),this},e}(n["default"]);a.nodeType="path";h["default"]=a})},"esri/views/2d/libs/gfx/Image":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/_base ./Shape ./svg".split(" "),function(a,h,m,f,d,c){Object.defineProperty(h,"__esModule",{value:!0});a=function(a){function d(c){var b=a.call(this)||this;return b.shape=f.getDefault("Image"),b.rawNode=c,b}return m(d,a),d.prototype.setShape=function(a){this.shape=
f.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;for(var b in this.shape)if("type"!==b&&"src"!==b){var d=this.shape[b];"width"!==b&&"height"!==b||(d=0>d?0:d);a.setAttribute(b,d)}return a.setAttribute("preserveAspectRatio","none"),c._setAttributeNS(a,c.xmlns.xlink,"xlink:href",this.shape.src),a.__gfxObject__=this,this},d.prototype.getBoundingBox=function(){return this.shape},d.prototype.setStroke=function(){return this},d.prototype.setFill=function(){return this},d}(d["default"]);a.nodeType=
"image";h["default"]=a})},"esri/views/2d/libs/gfx/Rect":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","dojox/gfx/_base","./Shape"],function(a,h,m,f,d){Object.defineProperty(h,"__esModule",{value:!0});a=function(a){function c(c){var d=a.call(this)||this;return d.shape=f.getDefault("Rect"),d.rawNode=c,d}return m(c,a),c.prototype.getBoundingBox=function(){return this.shape},c.prototype.setShape=function(a){this.shape=f.makeParameters(this.shape,a);this.bbox=null;for(var c in this.shape)"type"!==
c&&"r"!==c&&(a=this.shape[c],"width"!==c&&"height"!==c||(a=0>a?0:a),this.rawNode.setAttribute(c,a));return null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r)),this},c}(d["default"]);a.nodeType="rect";h["default"]=a})},"esri/views/2d/libs/gfx/Text":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/has dojox/gfx/_base ./Shape ./svg".split(" "),function(a,h,m,f,d,c,n){Object.defineProperty(h,"__esModule",{value:!0});
a=f("android");var e=f("chrome")||a&&4<=a?"auto":"optimizeLegibility";f=function(a){function b(b){var c=a.call(this)||this;return c.fontStyle=null,c.shape=d.getDefault("Text"),c.rawNode=b,c}return m(b,a),b.prototype.getFont=function(){return this.fontStyle},b.prototype.setFont=function(a){return this.fontStyle="string"==typeof a?d.splitFontString(a):d.makeParameters(d.defaultFont,a),this._setFont(),this},b.prototype._setFont=function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);
this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)},b.prototype.setShape=function(a){this.shape=d.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;var b=this.shape;return a.setAttribute("x",b.x),a.setAttribute("y",b.y),a.setAttribute("text-anchor",b.align),a.setAttribute("text-decoration",b.decoration),a.setAttribute("rotate",b.rotated?90:0),
a.setAttribute("kerning",b.kerning?"auto":0),a.setAttribute("text-rendering",e),a.firstChild?a.firstChild.nodeValue=b.text:a.appendChild(n._createTextNode(b.text)),this},b.prototype.getTextWidth=function(){var a=this.rawNode,b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,d=a.firstChild.nodeValue;if(b.appendChild(a),""!==d)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width,10):68;return b.removeChild(a),c},b.prototype.getBoundingBox=function(){var a=null;if(this.getShape().text)try{a=
this.rawNode.getBBox()}catch(q){a={x:0,y:0,width:0,height:0}}return a},b}(c["default"]);f.nodeType="text";h["default"]=f})},"esri/views/2d/engine/graphics/Projector":function(){define(["require","exports"],function(a,h){function m(a,e,f,b,g){void 0===b&&(b=0);void 0===g&&(g=a.length);for(var h,l=a[b],n=a[g-1],v=0,r=0,p=b+1;g-1>p;p++){var u=a[p];h=u[0];var u=u[1],k=l[0],x=l[1],B=n[0],y=n[1];k===B?h=d(h-k):(B=(y-x)/(B-k),h=d(B*h-u+(x-B*k))/c(B*B+1));h>v&&(r=p,v=h)}v>e?(m(a,e,f,b,r+1),m(a,e,f,r,g)):
(f(l[0],l[1]),f(n[0],n[1]))}var f=Math.round,d=Math.abs,c=Math.sqrt;return function(){function a(){this._transform=null}return a.prototype.update=function(a,c){this._transform=a;this._resolution=c},a.prototype.toScreenPoint=function(a,c,b){return this.transformPoint(c.x+b*this._resolution,c.y,function(b,c){a.x=b;a.y=c}),a},a.prototype.toScreenPath=function(a,c){var b=this,d=null!=a.paths;a=d?a.paths:a.rings;var e="",f=function(a,d){a+=c*b._resolution;b.transformPoint(a,d,function(a,b){isNaN(a)||isNaN(b)||
(e+=a,e+=",",e+=b,e+=" ")})};if(a)for(var h=a.length,l=0;h>l;l++)e+="M ",m(a[l],this._resolution,f),d||(e+="Z ");return e},a.prototype.transformPoint=function(a,c,b){var d=this._transform,e=d[1],h=d[3],l=d[5];b(f(d[0]*a+d[2]*c+d[4]),f(e*a+h*c+l))},a}()})},"esri/views/2d/engine/cssUtils":function(){define(["require","exports","dojo/has"],function(a,h,m){function f(a){return"matrix3d(\n                    "+a[0].toFixed(10)+", "+a[1].toFixed(10)+", 0, 0,\n                    "+a[2].toFixed(10)+", "+
a[3].toFixed(10)+", 0, 0,\n                    0, 0, 1, 0,\n                    "+Math.round(a[4]).toFixed(10)+", "+Math.round(a[5]).toFixed(10)+", 0, 1\n                  )"}function d(a){return"translate("+Math.round(a[0])+"px, "+Math.round(a[1])+"px)"}function c(a){return"rotateZ( "+a+" deg)"}Object.defineProperty(h,"__esModule",{value:!0});a=m("ff");var n=m("ie"),e=m("webkit");m=m("opera");var l=e&&"-webkit-transform"||a&&"-moz-transform"||m&&"-o-transform"||n&&"-ms-transform"||"transform";h.clip=
function(a,c){c?a.clip="rect( "+c.top+"px, "+c.right+"px, "+c.bottom+"px, "+c.left+"px)":a.clip=""};h.setTransform=function(a,c){var b=null;2===c.length&&(b=d(c));6===c.length&&(b=f(c));a.transform=a[l]=b};h.setOrigin=function(a,c){a.transformOrigin=c[0]+"px "+c[1]+"px 0"};h.cssMatrix=function(a){return"matrix(\n                  "+a[0].toFixed(10)+", "+a[1].toFixed(10)+",\n                  "+a[2].toFixed(10)+", "+a[3].toFixed(10)+",\n                  "+a[4]+", "+a[5]+"\n                )"};h.cssMatrix3d=
f;h.translate=d;h.rotate=function(a){return c(a.toFixed(3))};h.rotateZ=c})},"esri/views/2d/engine/graphics/GFXGroup":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","dojo/_base/lang","../Container"],function(a,h,m,f,d){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}return m(c,a),c.prototype.attach=function(c){return this.g=c.surface.createGroup(),a.prototype.attach.call(this,c)},c.prototype.detach=function(c){a.prototype.detach.call(this,
c);this.g.destroy();this.g=null},c.prototype.prepareChildrenRenderParameters=function(a){return f.mixin({},a,{surface:this.g})},c.prototype.detachChild=function(a,c){return a.detach(c)},c.prototype.attachChild=function(a,c){return a.attach(c)},c.prototype.renderChild=function(a,c){return a.processRender(c)},c}(d)})},"esri/views/2d/engine/graphics/GFXObject":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../geometry/Extent ../../../../geometry/support/webMercatorUtils ../../../../geometry/support/spatialReferenceUtils ../DisplayObject ./gfxUtils".split(" "),
function(a,h,m,f,d,c,n,e){var l=new Set,b=[];return function(a){function g(){var b=null!==a&&a.apply(this,arguments)||this;return b.visible=!0,b}return m(g,a),Object.defineProperty(g.prototype,"graphic",{get:function(){return this._graphic},set:function(a){this._geometry=(this._graphic=a)&&a.geometry||null;this._projected=null;this.requestRender()},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"geometry",{get:function(){return this._geometry},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,
"isPolygonMarkerSymbol",{get:function(){var a=this.renderingInfo.symbol.type,b=this.geometry;return b&&"polygon"===b.type&&("simple-marker-symbol"===a||"picture-marker-symbol"===a||"text-symbol"===a)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"renderingInfo",{get:function(){return this._renderingInfo},set:function(a){this._renderingInfo=a;this.requestRender()},enumerable:!0,configurable:!0}),g.prototype.detach=function(){this._removeShape();this._drawInfo=this._projected=null},
g.prototype.doRender=function(a){var b=a.surface,c=a.state,d=a.projector,f=this.visible&&this._projectGeometry(this.geometry,a.state.spatialReference);a=this._getScreenOffsets([],a.state);if(e.isShapeInvalid(this.renderingInfo.symbol,this._shape)&&this._removeShape(),!a.length)return void this._removeShape();var g=this._shape,h=f.type;(!g||this._showRedraw(a,c))&&("point"===h?(g=e.drawPoint(d,b,f,g,this.renderingInfo,c.rotation,a),e.stylePoint(g,this.renderingInfo)):"multipoint"===h?(g=e.drawMarkers(d,
b,f,g,this.renderingInfo,c.rotation,a),e.styleMarkers(g,this.renderingInfo)):(g=e.drawShape(d,b,f,g,a),e.styleShape(g,this.renderingInfo)),this._shape=g,g.getNode().gfxObject=this)},g.prototype._getScreenOffsets=function(a,d){var e=d.clippedExtent,f=this._projected.outExtent,g=d.spatialReference;if(a.length=0,!f)return a;if(g.isWrappable){var g=c.getInfo(g),h=f.cache._partwise,e=e._getParts(g);if(b.length=0,h&&h.length)for(f=0;f<h.length;f++)b.push.apply(b,h[f]._getParts(g));else b.push.apply(b,f._getParts(g));
d=d.worldScreenWidth;a.length=0;l.clear();f=b.length;for(g=0;f>g;g++)for(var k=b[g],h=k.extent,k=k.frameIds,m=k.length,n=e.length,q=0;n>q;q++){var t=e[q];if(t.extent.intersects(h))for(var w=m,D=0;w>D;D++){var F=(t.frameIds[0]-k[D])*d;l.has(F)||(a.push(F),l.add(F))}}a.sort()}else e.intersects(f)&&a.push(0);return a},g.prototype._projectGeometry=function(a,b){var c=this._projected;a=this.isPolygonMarkerSymbol?a.centroid:a;return c&&c.inGeometry===a&&c.outSpatialReference===b?c.outGeometry:a&&a.spatialReference.equals(b)?
(this._projected={inGeometry:a,outGeometry:a,outSpatialReference:b,outExtent:this._getExtent(a)},this._projected.outGeometry):d.canProject(a,b)?(this._projected={inGeometry:a,outGeometry:d.project(a,b),outSpatialReference:b,outExtent:this._getExtent(a)},this._projected.outGeometry):(this._projected={inGeometry:a,outGeometry:null,outSpatialReference:b,outExtent:null},this._projected.outGeometry)},g.prototype._getExtent=function(a){var b=a.extent;if(!b){var c=b=void 0;"esri.geometry.Point"===a.declaredClass?
(b=a.x,c=a.y):"esri.geometry.Multipoint"===a.declaredClass&&(b=a.points[0][0],c=a.points[0][1]);b=new f(b,c,b,c,a.spatialReference)}return b},g.prototype._removeShape=function(){var a=this._shape;a&&(a.removeShape(),a.getNode().gfxObject=null,a.destroy());this._shape=this._drawInfo=null},g.prototype._showRedraw=function(a,b){return!0},g}(n)})},"esri/views/2d/engine/graphics/gfxUtils":function(){define("require exports dojo/_base/lang ../../libs/gl-matrix/mat2d ../../libs/gl-matrix/mat2dExtras ../../../../core/screenUtils ../../../../geometry/Polygon ../../../../symbols/SimpleMarkerSymbol ../../../../symbols/support/gfxUtils".split(" "),
function(a,h,m,f,d,c,n,e,l){function b(a,b){return b.toRgba?(a[0]=b.r,a[1]=b.g,a[2]=b.b,a[3]=b.a):(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]),a}function g(a,b,c){return null!=c&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=c),a}function q(a,b,c){var d=b[0]/b[1];return a[0]=a[1]=1,isNaN(c)||(1<d?(a[0]=c/b[0],a[1]=c/d/b[1]):(a[1]=c/b[1],a[0]=c*d/b[0])),a}function t(a,b,g,h,m,n,u){var t,x,A=m.symbol;g=a.toScreenPoint(B,g,u[0]);u=[g.x,g.y];a=g.x;g=g.y;var D=m.heading;m=m.size&&m.size[0];f.identity(y);"number"==
typeof m&&(x=isFinite(m)&&m);x=(m=x&&isFinite(x)&&!isNaN(x))?c.pt2px(x):NaN;n&&d.rotategAt(y,y,n,u);D&&d.rotategAt(y,y,D,u);n=c.pt2px(A.xoffset);D=c.pt2px(A.yoffset);if((0!==n||0!==D)&&f.translate(y,y,[n,-D]),0!==A.angle&&d.rotategAt(y,y,A.angle,u),"simple-marker-symbol"===A.type)switch(t=A.style,n=Math.round,x=m?x:c.pt2px(A.size),m=void 0,t){case e.STYLE_SQUARE:case e.STYLE_CROSS:case e.STYLE_X:case e.STYLE_DIAMOND:m=isNaN(x)?16:.5*x;t=r(b,h,k(t,a,g,n(a-m),n(a+m),n(g-m),n(g+m)));break;case e.STYLE_PATH:t=
A=r(b,h,A.path);A=A.getBoundingBox();x=q(f.create(),[A.width,A.height],x);1===x[0]&&1===x[3]||d.scaleAt(y,y,x,u);f.translate(y,y,[-(A.x+.5*A.width)+a,-(A.y+.5*A.height)+g]);break;default:m=isNaN(x)?16:.5*x,t=v(b,h,{cx:a,cy:g,r:m})}else"picture-marker-symbol"===A.type?(t=m?x:c.pt2px(A.width),x=m?x:c.pt2px(A.height),t=w(b,h,{x:a-.5*t,y:g-.5*x,width:t,height:x,src:A.url})):"text-symbol"===A.type&&((u=A.font&&A.font.clone())&&(u.size=m?x:c.pt2px(u.size)),t=p(b,h,{type:"text",text:A.text,x:a,y:g,align:l.getSVGAlign(A),
decoration:A.decoration||u&&u.decoration,rotated:A.rotated,kerning:A.kerning}),u&&t.setFont(u),x=t.getNode(),b=l.getSVGBaseline(A),A=l.getSVGBaselineShift(A),x&&(x.setAttribute("dominant-baseline",b),A&&x.setAttribute("baseline-shift",A)));return t.setTransform(y),t}function w(a,b,c){return b?b.setShape(c):a.createImage(c)}function v(a,b,c){return b?b.setShape(c):a.createCircle(c)}function r(a,b,c){c=Array.isArray(c)?c.join(" "):c;return b?b.setShape(c):a.createPath(c)}function p(a,b,c){return b?
b.setShape(c):a.createText(c)}function u(a,b){b=b&&b.shape&&b.shape.type;var c=a&&a.type;a=a&&a.style;return c&&(a=z[c]||a),A[a]&&(a="path"),!(!b||!a||b===a)}function k(a,b,c,d,f,g,h,k){switch(a){case e.STYLE_SQUARE:return["M",d+","+g,f+","+g,f+","+h,d+","+h,"Z"];case e.STYLE_CROSS:return["M",b+","+g,b+","+h,"M",d+","+c,f+","+c];case e.STYLE_X:return["M",d+","+g,f+","+h,"M",d+","+h,f+","+g];case e.STYLE_DIAMOND:return["M",b+","+g,f+","+c,b+","+h,d+","+c,"Z"];case e.STYLE_TARGET:return["M",d+","+g,
f+","+g,f+","+h,d+","+h,d+","+g,"M",d-k+","+c,d+","+c,"M",b+","+(g-k),b+","+g,"M",f+k+","+c,f+","+c,"M",b+","+(h+k),b+","+h]}}function x(a,c){var d=c.symbol;if("picture-marker-symbol"!==d.type){var f=l.getFill(d);if("simple-marker-symbol"===d.type){var h=d.style,k=(d=l.getStroke(d))&&d.color,h=h===e.STYLE_X||h===e.STYLE_CROSS,n=c.opacity;(c=c.color||b([0,0,0,0],h?k:f))&&null!=n&&(c=g([0,0,0,0],c,n));c&&(h?c!==k&&(d=d?m.mixin({},d):{},d.color=c):c!==f&&(f=c));a.setFill(f).setStroke(d)}else"text-symbol"===
d.type&&(n=c.opacity,(c=c.color||b([0,0,0,0],f))&&null!=n&&(c=g([0,0,0,0],c,n)),c&&c!==f&&(f=c),a.setFill(f))}}Object.defineProperty(h,"__esModule",{value:!0});h.getScalingVector=q;var B={x:0,y:0},y=f.create();h.drawPoint=t;h.drawMarkers=function(a,b,c,d,e,f,g){var h=e.symbol;c=c.points;b=d||b.createGroup();d=[0];b.children[0]&&u(h,b.children[0])&&b.clear();for(var k=0,l=c.length,h=0;l>h;h++)for(var m=c[h],n=g.length,p=0;n>p;p++)d[0]=g[p],b.add(t(a,b,{x:m[0],y:m[1]},b.children[k++],e,f,d));a=b.children.length;
if(c.length*g.length<a)for(g=c.length*g.length,h=a-1;h>=g;h--)b.children[h].removeShape();return b};h.drawShape=function(a,b,c,d,e){var f=[];if("extent"===c.type&&(c=n.fromExtent(c)),"polyline"===c.type||"polygon"===c.type){for(var g=e.length,h=0;g>h;h++)f=f.concat(a.toScreenPath(c,e[h]));d=r(b,d,f)}return d};h.drawRect=function(a,b,c){return b?b.setShape(c):a.createRect(c)};h.drawImage=w;h.drawCircle=v;h.drawPath=r;h.drawText=p;var z={"picture-marker-symbol":"image","picture-fill-symbol":"path",
"simple-fill-symbol":"path","simple-line-symbol":"path","text-symbol":"text"},A={square:1,cross:1,x:1,diamond:1,target:1};h.isShapeInvalid=u;h.smsToPath=k;h.stylePoint=x;h.styleMarkers=function(a,b){for(var c=a.children.length,d=0;c>d;d++)x(a.children[d],b)};h.styleShape=function(a,d){var e,f=d.symbol,h=d.size,k=d.color;d=d.opacity;var n=l.getStroke(f),p=l.getFill(f),q=!1;"simple-line-symbol"===f.type?(q=!0,e="none"!==f.style):e=f.outline&&"none"!==f.outline.style;var u,r,t;h&&(t=isFinite(h[0])&&
h[0]);null!=h&&(t=c.pt2px(t));!k&&null==d||"picture-fill-symbol"===f.type||(q?(u=k||n&&n.color&&b([0,0,0,0],n.color),u&&null!=d&&(u=g(u,u,d))):p&&(r=k||b([0,0,0,0],p),r&&null!=d&&(r=g(r,r,d))));!e||null==h&&!u?a.setStroke(n):a.setStroke(m.mixin({},n,null!=t?{width:t}:null,u&&{color:u}));a.setFill(r||p);a.rawNode.setAttribute("vector-effect","non-scaling-stroke")}})},"esri/views/2d/libs/gl-matrix/mat2dExtras":function(){define(["require","exports","./mat2d","./vec2","./common"],function(a,h,m,f,d){Object.defineProperty(h,
"__esModule",{value:!0});var c=function(){var a=m.create(),c=f.create();return function(d,b,e){return m.fromTranslation(a,e),m.multiply(d,a,b),f.negate(c,e),m.translate(d,d,c),d}}();h.rotategAt=function(){var a=m.create();return function(e,f,b,g){return m.fromRotation(a,d.toRadian(b)),c(a,a,g),m.multiply(e,a,f),e}}();h.scaleAt=function(){var a=m.create();return function(d,f,b,g){return m.fromScaling(a,b),c(a,a,g),m.multiply(d,a,f),d}}()})},"esri/symbols/support/gfxUtils":function(){define("require exports dojo/_base/lang dojox/gfx/_base ../../Color ../../core/screenUtils".split(" "),
function(a,h,m,f,d,c){function n(a){var d=a.style,e=null;if(a){var g=a.constructor;switch(a.type){case q:d!==g.STYLE_CROSS&&d!==g.STYLE_X&&(e=a.color);break;case b:d===g.STYLE_SOLID?e=a.color:d!==g.STYLE_NULL&&(e=m.mixin({},f.defaultPattern,{src:w+d+".png",width:10,height:10}));break;case l:e=m.mixin({},f.defaultPattern,{src:a.url,width:c.pt2px(a.width)*a.xscale,height:c.pt2px(a.height)*a.yscale,x:c.pt2px(a.xoffset),y:c.pt2px(a.yoffset)});break;case t:e=a.color}}return e}function e(a){if(!a)return null;
var d,f=a.constructor,h=c.pt2px(a.width);switch(a.type){case b:case l:case q:d=e(a.outline);break;case g:a.style!==f.STYLE_NULL&&0!==h&&(d={color:a.color,style:p(a.style),width:h,cap:a.cap,join:a.join===f.JOIN_MITER?c.pt2px(a.miterLimit):a.join});break;default:d=null}return d}Object.defineProperty(h,"__esModule",{value:!0});var l="picture-fill-symbol",b="simple-fill-symbol",g="simple-line-symbol",q="simple-marker-symbol",t="text-symbol",w=a.toUrl("../../symbols/patterns/"),v={left:"start",center:"middle",
right:"end",justify:"start"},r={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"};h.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&v[a.toLowerCase()]||"middle"};h.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&r[a.toLowerCase()]||"alphabetic"};h.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};h.getFill=n;h.getStroke=e;var p=function(){var a={};return function(b){if(a[b])return a[b];var c=b.replace(/-/g,
"");return a[b]=c,c}}();h.getShapeDescriptors=function(a){if(!a)return{defaultShape:null,fill:null,font:null,stroke:null};var d={defaultShape:null,fill:n(a),font:null,stroke:e(a)},f=a.constructor,h=f.defaultProps,m=null;switch(a.type){case q:var p=a.style,h=.5*c.pt2px(a.size||h.size),r=-h,u=+h,w=-h,v=+h;switch(p){case f.STYLE_CIRCLE:m={type:"circle",cx:0,cy:0,r:h};break;case f.STYLE_CROSS:m={type:"path",path:"M "+r+",0 L "+u+",0 M 0,"+w+" L 0,"+v+" E"};break;case f.STYLE_DIAMOND:m={type:"path",path:"M "+
r+",0 L 0,"+w+" L "+u+",0 L 0,"+v+" L "+r+",0 Z"};break;case f.STYLE_SQUARE:m={type:"path",path:"M "+r+","+v+" L "+r+","+w+" L "+u+","+w+" L "+u+","+v+" L "+r+","+v+" Z"};break;case f.STYLE_X:m={type:"path",path:"M "+r+","+v+" L "+u+","+w+" M "+r+","+w+" L "+u+","+v+" E"};break;case f.STYLE_PATH:m={type:"path",path:a.path||""}}break;case g:m={type:"path",path:"M -15,0 L 15,0 E"};break;case l:case b:m={type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"};break;case "picture-marker-symbol":m=
{type:"image",x:-Math.round(c.pt2px(a.width)/2),y:-Math.round(c.pt2px(a.height)/2),width:c.pt2px(a.width),height:c.pt2px(a.height),src:a.url||""};break;case t:f=a.font,p=c.pt2px(f.size),m={type:"text",text:a.text,x:0,y:.25*p,align:"middle",decoration:a.decoration||f&&f.decoration,rotated:a.rotated,kerning:a.kerning},d.font=f&&{size:p+"px",style:f.style,variant:f.variant,weight:f.weight,family:f.family}}return d.defaultShape=m,d};h.defaultThematicColor=new d([128,128,128])})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/watchUtils ../../../core/Accessor ../../../core/HandleRegistry ../../../core/accessorSupport/decorators ../../input/InputManager ../../input/BrowserEventSource ../../input/ViewEvents ../../input/handlers/PreventContextMenu ../input/handlers/DoubleClickZoom ../input/handlers/DragPan ../input/handlers/DragRotate ../input/handlers/KeyPan ../input/handlers/KeyZoom ../input/handlers/KeyRotate ../input/handlers/MouseWheelZoom ../input/handlers/PinchAction".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k,x){var B={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},y={zoomIn:["\x3d","+"],zoomOut:["-","_"]},z={dragRotate:"Alt",clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};a=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b._handles=new n,b}return m(c,a),c.prototype.initialize=function(){var a=this;this.viewEvents=new g.ViewEvents(this.view);
this._handles.add([d.whenNot(this.view,"ready",function(){return a._disconnect()}),d.when(this.view,"ready",function(){return a._connect()})])},c.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect();this.viewEvents.destroy();this.viewEvents=null},c.prototype._disconnect=function(){this._inputManager&&(this.viewEvents.disconnect(),this._source.destroy(),this._inputManager.destroy(),this._source=null,this._inputManager=null)},c.prototype._connect=
function(){var a=new b.BrowserEventSource(this.view.surface),c=new l.InputManager(a);c.installHandlers("prevent-context-menu",[new q.PreventContextMenu]);c.installHandlers("navigation",[new x.PinchRotateAndZoom(this.view),new k.MouseWheelZoom(this.view),new t.DoubleClickZoom(this.view),new w.DragPan(this.view,"primary"),new r.KeyPan(this.view,B),new p.KeyZoom(this.view,y),new u.KeyRotate(this.view,z),new v.DragRotate(this.view,"secondary"),new t.DoubleClickZoom(this.view,["Ctrl"]),new v.DragRotate(this.view,
"primary",[z.dragRotate])]);this.viewEvents.connect(c);this._source=a;this._inputManager=c},c}(e.declared(c));return f([e.property()],a.prototype,"view",void 0),a=f([e.subclass("esri.views.2d.input.MapViewInputManager")],a)})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/now ./keys ./recognizers ../../core/Logger ./handlers/LatestPointerType".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g){Object.defineProperty(h,"__esModule",{value:!0});var q=b.getLogger("esri.views.input");a=function(a){function b(b,c){b=a.call(this)||this;return b._pointerCaptures=new Map,b._nameToGroup={},b._handlers=[],b._currentPropagation=null,b._sourceEvents=new Set,b._keyModifiers=new Set,b._activeKeyModifiers=new Set,b.primaryKey=e.primaryKey,b.latestPointerType="mouse",b._installRecognizers(),b}return m(b,a),b.prototype.normalizeCtorArgs=function(a,b){return this._browserEvents=
a,this._browserEvents.onEventReceived=this._onEventReceived.bind(this),this._recognizers=b,this._recognizers||(this._recognizers=l.defaults.map(function(a){return new a})),{}},b.prototype.destroy=function(){for(var a=0,b=Object.keys(this._nameToGroup);a<b.length;a++)this.uninstallHandlers(b[a])},b.prototype.installHandlers=function(a,b){var c=this;if(this._nameToGroup[a])return void q.error("There is already an InputHandler group registered under the name `"+a+"`");if(0===b.length)return void q.error("Can't register a group of zero handlers");
var d={name:a,handlers:b.map(function(a,b){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[a]=d;a=function(a){var b=d.handlers[a];e._handlers.push(b);b.handler.onInstall({updateDependencies:function(){c.updateDependencies()},emit:function(a,d,e,f){c._emitInputEvent(b.priorityIndex,a,d,e,f)},setPointerCapture:function(a,e){c._setPointerCapture(d,b,a,e)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=
a}})};var e=this;for(b=d.handlers.length-1;0<=b;b--)a(b);this.updateDependencies()},b.prototype.uninstallHandlers=function(a){var b=this._nameToGroup[a];return b?(b.handlers.forEach(function(a){a.removed=!0;a.uninstallCallback()}),delete this._nameToGroup[a],void(this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers())):void q.error("There is no InputHandler group registered under the name `"+a+"`")},b.prototype.hasHandlers=function(a){return void 0!==
this._nameToGroup[a]},b.prototype.updateDependencies=function(){var a=new Set,b=new Set;this._handlersPriority=[];for(var c=this._handlers.length-1;0<=c;c--){var d=this._handlers[c];d.priorityIndex=c;this._handlersPriority.push(d)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(c=this._handlersPriority.length-1;0<=c;c--){d=this._handlersPriority[c];d.priorityIndex=c;var f=d.handler.hasSideEffects;if(!f)for(var g=0,h=d.handler.outgoingEventTypes;g<h.length;g++)if(a.has(h[g])){f=
!0;break}if(f)for(g=0,h=d.handler.incomingEventMatches;g<h.length;g++){var l=h[g];a.add(l.eventType);for(var m=0,l=l.keyModifiers;m<l.length;m++){var n=l[m];e.isSystemModifier(n)||b.add(n)}}d.active=f}this._sourceEvents=a;this._keyModifiers=b;0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)},b.prototype._setLatestPointerType=
function(a){this._set("latestPointerType",a)},b.prototype._onEventReceived=function(a,b){if("pointer-capture-lost"===a)this._pointerCaptures["delete"](b["native"].pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,b,b["native"].timestamp)},b.prototype._updateKeyModifiers=function(a,b){var c=this;if(b){var d=!1,e=function(){if(!d){var a=new Set;c._activeKeyModifiers.forEach(function(b){a.add(b)});c._activeKeyModifiers=a;d=!0}},f=function(a,b){b&&!c._activeKeyModifiers.has(a)?
(e(),c._activeKeyModifiers.add(a)):!b&&c._activeKeyModifiers.has(a)&&(e(),c._activeKeyModifiers["delete"](a))};if("key-down"===a||"key-up"===a){var g=b.key;this._keyModifiers.has(g)&&f(g,"key-down"===a)}a=b["native"];f("Alt",!(!a||!a.altKey));f("Ctrl",!(!a||!a.ctrlKey));f("Shift",!(!a||!a.shiftKey));f("Meta",!(!a||!a.metaKey));f("Primary",this._activeKeyModifiers.has(this.primaryKey))}},b.prototype._installRecognizers=function(){var a=this;this._latestPointerTypeHandler=new g.LatestPointerType(function(b){return a._setLatestPointerType(b)});
0<this._recognizers.length&&this.installHandlers("default",this._recognizers);this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler])},b.prototype._setPointerCapture=function(a,b,c,d){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures.get(c.pointerId)||new Set;this._pointerCaptures.set(c.pointerId,b);d?(b.add(a),1===b.size&&this._browserEvents&&this._browserEvents.setPointerCapture(c,!0)):(b["delete"](a),0===b.size&&(this._pointerCaptures["delete"](c.pointerId),this._browserEvents&&
this._browserEvents.setPointerCapture(c,!1)))},b.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()},b.prototype._emitInputEventFromSource=function(a,b,c){this._emitInputEvent(0,a,b,c)},b.prototype._emitInputEvent=function(a,b,c,d,e){d=d||(this._currentPropagation?this._currentPropagation.timestamp:n());b=new t(b,c,d,e||this._activeKeyModifiers);return this._currentPropagation?void this._currentPropagation.addedEvents.push(b):
void this._doNewPropagation(a,b)},b.prototype._doNewPropagation=function(a,b){for(a=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1,timestamp:b.timestamp};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=!0;else{b=a.events;var c=[];a.addedEvents=[];for(var d=0;d<b.length;d++){var e=b[d];a.currentHandler.active&&a.currentHandler.eventCallback(e);e.shouldStopPropagation()||c.push(e)}a.events=c.concat(a.addedEvents)}a.currentHandler=
this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null},b.prototype._compareHandlerPriority=function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?1:-1;for(var c=0,d=a.handler.incomingEventMatches;c<d.length;c++)for(var e=d[c],f=function(a){if(e.eventType!==a.eventType)return"continue";var b=e.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});
return b.length===e.keyModifiers.length!==(b.length===a.keyModifiers.length)?{value:e.keyModifiers.length>a.keyModifiers.length?-1:1}:void 0},g=0,h=b.handler.incomingEventMatches;g<h.length;g++){var l=f(h[g]);if("object"==typeof l)return l.value}return a.priorityIndex>b.priorityIndex?-1:1},b.prototype._sortHandlersPriority=function(a){for(var b=[],c=0;c<a.length;c++){for(var d=a[c],e=0;e<b.length&&0<=this._compareHandlerPriority(d,b[e]);)e++;b.splice(e,0,d)}return b},b}(d.declared(c));f([d.property({readOnly:!0})],
a.prototype,"latestPointerType",void 0);a=f([d.subclass("esri.views.input.InputManager")],a);h.InputManager=a;var t=function(){function a(a,b,c,d){this.type=a;this.data=b;this.timestamp=c;this.modifiers=d;this._stopPropagation=!1}return a.prototype.stopPropagation=function(){this._stopPropagation=!0},a.prototype.shouldStopPropagation=function(){return this._stopPropagation},a}()})},"esri/views/input/keys":function(){define(["require","exports","../../core/sniff"],function(a,h,m){Object.defineProperty(h,
"__esModule",{value:!0});h.primaryKey=m("mac")?"Meta":"Ctrl";var f={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(a=48;58>a;a++)f[a]=String.fromCharCode(a);for(a=1;25>a;a++)f[111+a]="F"+a;for(a=65;91>a;a++)f[a]=[String.fromCharCode(a+32),String.fromCharCode(a)];var d={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown"};h.eventKey=function(a){if(void 0!==
a.key)return d[a.key]||a.key;var c=f[a.keyCode];return Array.isArray(c)?a.shiftKey?c[1]:c[0]:c};h.isSystemModifier=function(a){switch(a){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}}})},"esri/views/input/recognizers":function(){define("require exports ./recognizers/Drag ./recognizers/PointerClickHoldAndDrag ./recognizers/SingleAndDoubleClick ./recognizers/VerticalTwoFingerDrag".split(" "),function(a,h,m,f,d,c){Object.defineProperty(h,"__esModule",{value:!0});h.defaults=
[f.PointerClickHoldAndDrag,d.SingleAndDoubleClick,m.Drag,c.VerticalTwoFingerDrag]})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../InputHandler ./support ../../../core/now".split(" "),function(a,h,m,f,d,c){Object.defineProperty(h,"__esModule",{value:!0});a=function(a){function e(){var c=a.call(this,"recognizers.Drag",!1)||this;return c._startStateModifiers=new Set,c._activePointers=[],c._activePointerMap=new Map,c._isDragging=!1,c._drag=
c.registerOutgoing("drag"),c.registerIncoming("pointer-drag",c._handlePointerDrag.bind(c)),c.registerIncoming("pointer-down",c._handlePointerDown.bind(c)),c.registerIncoming("pointer-up",c._handlePointerUpAndPointerLost.bind(c)),c.registerIncoming("pointer-capture-lost",c._handlePointerUpAndPointerLost.bind(c)),c}return m(e,a),e.prototype._createPayload=function(a,b){return{action:a,pointers:this._activePointers.map(function(a){return a.data}),startState:this._startState,previousState:this._previousState,
currentState:b}},e.prototype._fitCircleLSQ=function(){var a=this._activePointers.map(function(a){return a.data.currentEvent});return d.fitCircleLSQ(a)},e.prototype._createDragState=function(){for(var a=this._fitCircleLSQ(),b=0,d=0,e=this._activePointers;d<e.length;d++){for(var f=e[d],h=this._pointerAngle(f,a),h=h-f.lastAngle;h>Math.PI;)h-=2*Math.PI;for(;h<-Math.PI;)h+=2*Math.PI;h=f.lastAngle+h;f.lastAngle=h;b+=h-f.initialAngle}return b/=this._activePointers.length,{angle:b,radius:a.radius,center:a.center,
timestamp:c()}},e.prototype._updateMultiPointer=function(a){var b=a.startEvent["native"].pointerId,c=this._activePointerMap.get(b),d=!c;d?(c={data:null,initialAngle:0,lastAngle:0},this._activePointers.push(c),this._activePointerMap.set(b,c),c.data={startEvent:a.startEvent,previousEvent:a.previousEvent,currentEvent:a.currentEvent},a=this._fitCircleLSQ(),c.initialAngle=this._pointerAngle(c,a),c.lastAngle=c.initialAngle):c.data={startEvent:c.data.startEvent,previousEvent:a.previousEvent,currentEvent:a.currentEvent};
return d&&this._isDragging&&this._updateInitialAngles(),c},e.prototype._pointerAngle=function(a,b){a=a.data.currentEvent;return Math.atan2(a.y-b.center.y,a.x-b.center.x)},e.prototype._updateInitialAngles=function(){for(var a=this._createDragState(),b=0,c=this._activePointers;b<c.length;b++){var d=c[b];d.initialAngle=this._pointerAngle(d,a)}},e.prototype._emitStart=function(a){this._updateInitialAngles();var b=this._createDragState();this._previousState=this._startState=b;this._startStateModifiers=
a.modifiers;this._isDragging=!0;for(var c=0,d=this._activePointers;c<d.length;c++){var e=d[c];e.data={previousEvent:e.data.currentEvent,startEvent:e.data.currentEvent,currentEvent:e.data.currentEvent}}this._drag.emit(this._createPayload("start",b),a.timestamp)},e.prototype._emitUpdate=function(a){a=this._createDragState();this._drag.emit(this._createPayload("update",a),void 0,this._startStateModifiers);this._previousState=a},e.prototype._emitEnd=function(){var a=this._createDragState();this._drag.emit(this._createPayload("end",
a),void 0,this._startStateModifiers);this._startState=this._previousState=null;this._isDragging=!1},e.prototype._handlePointerDown=function(a){a=a.data;this._isDragging&&this._emitEnd();this._updateMultiPointer({startEvent:a,previousEvent:a,currentEvent:a})},e.prototype._removeMultiPointer=function(a){var b=this,c=a["native"].pointerId,d=this._activePointerMap.get(c);if(d){var e=function(){b._activePointerMap["delete"](c);var a=b._activePointers.indexOf(d);b._activePointers.splice(a,1);b._isDragging&&
b._updateInitialAngles()};this._isDragging?(this._updateMultiPointer({startEvent:d.data.startEvent,previousEvent:d.data.currentEvent,currentEvent:a}),this._emitEnd(),e()):e()}},e.prototype._handlePointerUpAndPointerLost=function(a){this._removeMultiPointer(a.data)},e.prototype._handlePointerDrag=function(a){var b=a.data;switch(b.action){case "start":this._isDragging||this._emitStart(a);break;case "update":this._isDragging||this._emitStart(a),this._updateMultiPointer(b),this._emitUpdate(a)}},e}(f.InputHandler);
h.Drag=a})},"esri/views/input/InputHandler":function(){define(["require","exports","./EventMatch","../../core/Logger"],function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});var d=f.getLogger("esri.views.input");a=function(){function a(a,b){this._manager=null;this._incoming={};this._outgoing={};this._outgoingEventTypes=this._incomingEventTypes=this._incomingEventMatches=null;this._name=a;this._hasSideEffects=b}return Object.defineProperty(a.prototype,"incomingEventMatches",{get:function(){if(!this._incomingEventMatches){this._incomingEventMatches=
[];for(var a in this._incoming)for(var b=0,c=this._incoming[a];b<c.length;b++)this._incomingEventMatches.push(c[b].match)}return this._incomingEventMatches},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"incomingEventTypes",{get:function(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(function(a){return a.eventType})),this._incomingEventTypes},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"outgoingEventTypes",{get:function(){return this._outgoingEventTypes||
(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hasSideEffects",{get:function(){return this._hasSideEffects},enumerable:!0,configurable:!0}),a.prototype.onInstall=function(a){var b=this;return this._manager?void d.error("This InputHandler has already been registered with an InputManager"):(a.setEventCallback(function(a){return b._handleEvent(a)}),a.setUninstallCallback(function(){return b._onUninstall()}),
void(this._manager=a))},a.prototype.onUninstall=function(){},a.prototype.registerIncoming=function(a,b,d){var e,f=this;"function"==typeof b?(d=b,e=[]):e=b||[];a="string"==typeof a?new m.EventMatch(a,e):a;var g=function(){f._incomingEventTypes=null;f._incomingEventMatches=null};b=function(a){var b=f._incoming[a.match.eventType];b&&(a=b.indexOf(a),b.splice(a,1),g(),f._manager&&f._manager.updateDependencies())};d=new c(a,d,{onPause:b,onRemove:b,onResume:function(a){var b=f._incoming[a.match.eventType];
b&&-1===b.indexOf(a)&&(b.push(a),g(),f._manager&&f._manager.updateDependencies())}});b=this._incoming[a.eventType];return b||(b=[],this._incoming[a.eventType]=b),b.push(d),g(),this._manager&&this._manager.updateDependencies(),d},a.prototype.registerOutgoing=function(a){var b=this;if(this._outgoing[a])throw Error("There is already a callback registered for this outgoing InputEvent: "+a);var c=new n(a,{onEmit:function(a,c,d,e){b._manager.emit(a.eventType,c,d,e)},onRemove:function(a){delete b._outgoing[a.eventType];
b._manager.updateDependencies()}});return this._outgoing[a]=c,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),c},a.prototype.startCapturingPointer=function(a){this._manager.setPointerCapture(a,!0)},a.prototype.stopCapturingPointer=function(a){this._manager.setPointerCapture(a,!1)},a.prototype._onUninstall=function(){return this._manager?(this.onUninstall(),void(this._manager=null)):void d.error("This InputHandler is not registered with an InputManager")},a.prototype._handleEvent=
function(a){var b=this._incoming[a.type];if(b)for(var c=0;c<b.length;c++){var d=b[c];if(d.match.matches(a)&&(d.callback(a),a.shouldStopPropagation()))break}},a}();h.InputHandler=a;var c=function(){function a(a,b,c){this.match=a;this._callback=b;this._handler=c}return a.prototype.pause=function(){this._handler.onPause(this)},a.prototype.resume=function(){this._handler.onResume(this)},a.prototype.remove=function(){this._handler.onRemove(this)},Object.defineProperty(a.prototype,"callback",{get:function(){return this._callback},
enumerable:!0,configurable:!0}),a}(),n=function(){function a(a,b){this.eventType=a;this._removed=!1;this._handler=b}return a.prototype.emit=function(a,b,c){this._removed||this._handler.onEmit(this,a,b,c)},a.prototype.remove=function(){this._removed=!0;this._handler.onRemove(this)},a}()})},"esri/views/input/EventMatch":function(){define(["require","exports"],function(a,h){Object.defineProperty(h,"__esModule",{value:!0});a=function(){function a(a,d){void 0===d&&(d=[]);this.eventType=a;this.keyModifiers=
d}return a.prototype.matches=function(a){if(a.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;a=a.modifiers;for(var d=0,c=this.keyModifiers;d<c.length;d++)if(!a.has(c[d]))return!1;return!0},a}();h.EventMatch=a})},"esri/views/input/recognizers/support":function(){define(["require","exports"],function(a,h){Object.defineProperty(h,"__esModule",{value:!0});h.manhattanDistance=function(a,f){return Math.abs(f.x-a.x)+Math.abs(f.y-a.y)};h.fitCircleLSQ=function(a,f){if(f?(f.radius=
0,f.center.x=0,f.center.y=0):f={radius:0,center:{x:0,y:0}},0===a.length)return f;if(1===a.length)return f.center.x=a[0].x,f.center.y=a[0].y,f;if(2===a.length){var d=a[0];a=a[1];var c=[a.x-d.x,a.y-d.y],h=c[0],c=c[1];return f.radius=Math.sqrt(h*h+c*c)/2,f.center.x=(d.x+a.x)/2,f.center.y=(d.y+a.y)/2,f}for(var e=0,l=0,b=0;b<a.length;b++)e+=a[b].x,l+=a[b].y;for(var e=e/a.length,l=l/a.length,g=a.map(function(a){return a.x-e}),m=a.map(function(a){return a.y-l}),t=d=f=0,w=0,v=h=0,b=c=0;b<g.length;b++){var r=
g[b],p=m[b],u=r*r,k=p*p;f+=u;d+=k;t+=r*p;w+=u*r;h+=k*p;v+=r*k;c+=p*u}b=f;g=t;m=d;w=.5*(w+v);h=.5*(h+c);c=b*m-t*g;v=(w*m-h*g)/c;h=(b*h-t*w)/c;return{radius:Math.sqrt(v*v+h*h+(f+d)/a.length),center:{x:v+e,y:h+l}}}})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(a,h,m,f,d){Object.defineProperty(h,"__esModule",{value:!0});a=function(a){function c(c,d,b){void 0===c&&(c=300);
void 0===d&&(d=1.5);void 0===b&&(b=500);var e=a.call(this,"recognizers.PointerClickHoldAndDrag",!1)||this;return e.maximumClickDelay=c,e.movementUntilDrag=d,e.holdDelay=b,e._pointerState=new Map,e._modifiers=new Set,e._pointerDrag=e.registerOutgoing("pointer-drag"),e._pointerClick=e.registerOutgoing("pointer-click"),e._pointerHold=e.registerOutgoing("hold"),e.registerIncoming("pointer-down",e._handlePointerDown.bind(e)),e.registerIncoming("pointer-up",e._handlePointerUpOrLost.bind(e)),e.registerIncoming("pointer-capture-lost",
e._handlePointerUpOrLost.bind(e)),e._moveHandle=e.registerIncoming("pointer-move",e._handlePointerMove.bind(e)),e._moveHandle.pause(),e}return m(c,a),c.prototype.onUninstall=function(){this._pointerState.forEach(function(a){0!==a.holdTimeout&&(clearTimeout(a.holdTimeout),a.holdTimeout=0)});a.prototype.onUninstall.call(this)},c.prototype._handlePointerDown=function(a){var c=this,b=a.data,d=b["native"].pointerId,e=0;0===this._pointerState.size&&(e=setTimeout(function(){var b=c._pointerState.get(d);
b&&(b.isDragging||(c._pointerHold.emit(b.previousEvent,void 0,a.modifiers),b.holdEmitted=!0),b.holdTimeout=0)},this.holdDelay));1===this._pointerState.size&&this._pointerState.forEach(function(a){0!==a.holdTimeout&&(clearTimeout(a.holdTimeout),a.holdTimeout=0)});this._pointerState.set(d,{startEvent:b,previousEvent:b,startTimestamp:a.timestamp,totalMovement:0,isDragging:!1,downButton:b["native"].button,holdTimeout:e});this.startCapturingPointer(b["native"]);this._moveHandle.resume()},c.prototype._createPointerDragData=
function(a,c,b){return{action:a,startEvent:c.startEvent,previousEvent:c.previousEvent,currentEvent:b}},c.prototype._handlePointerMove=function(a){var c=a.data,b=this._pointerState.get(c["native"].pointerId);b&&(b.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",b,c),void 0,this._modifiers):(b.totalMovement+=d.manhattanDistance(c,b.previousEvent),b.totalMovement>this.movementUntilDrag&&(b.isDragging=!0,b.previousEvent=b.startEvent,this._modifiers=a.modifiers,0!==b.holdTimeout&&
clearTimeout(b.holdTimeout),this._pointerDrag.emit(this._createPointerDragData("start",b,b.startEvent),b.startTimestamp),this._pointerDrag.emit(this._createPointerDragData("update",b,c)))),b.previousEvent=c)},c.prototype._handlePointerUpOrLost=function(a){var c=a.data,b=c["native"].pointerId,d=this._pointerState.get(b);d&&((0!==d.holdTimeout&&clearTimeout(d.holdTimeout),d.isDragging)?this._pointerDrag.emit(this._createPointerDragData("end",d,c),void 0,this._modifiers):d.downButton===c["native"].button&&
a.timestamp-d.startTimestamp<=this.maximumClickDelay&&!d.holdEmitted&&this._pointerClick.emit(c),this._pointerState["delete"](b),this.stopCapturingPointer(c["native"]),0===this._pointerState.size&&this._moveHandle.pause())},c}(f.InputHandler);h.PointerClickHoldAndDrag=a})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(a,h,m,f,d){Object.defineProperty(h,"__esModule",{value:!0});
a=function(a){function c(c,d,b){void 0===c&&(c=250);void 0===d&&(d=10);void 0===b&&(b=35);var e=a.call(this,"recognizers.SingleAndDoubleClick",!1)||this;return e.maximumDoubleClickDelay=c,e.maximumDoubleClickDistance=d,e.maximumDoubleTouchDistance=b,e._pointerState=new Map,e._click=e.registerOutgoing("click"),e._doubleClick=e.registerOutgoing("double-click"),e.registerIncoming("pointer-click",e._handlePointerClick.bind(e)),e}return m(c,a),c.prototype._pointerId=function(a){a=a["native"];return"mouse"===
a.pointerType?a.pointerId+":"+a.button:""+a.pointerType},c.prototype._handlePointerClick=function(a){var c=a.data,b=this._pointerId(c),e=this._pointerState.get(b);if(e){clearTimeout(e.doubleClickTimeout);e.doubleClickTimeout=0;var f="touch"===c["native"].pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;d.manhattanDistance(e.event.data,c)>f?(this._doubleClickTimeoutExceeded(b),this._startClick(a)):(this._doubleClick.emit(c,void 0,e.event.modifiers),this._pointerState["delete"](b))}else this._startClick(a)},
c.prototype._startClick=function(a){var c=this,b=this._pointerId(a.data);this._pointerState.set(b,{event:a,doubleClickTimeout:setTimeout(function(){return c._doubleClickTimeoutExceeded(b)},this.maximumDoubleClickDelay)})},c.prototype._doubleClickTimeoutExceeded=function(a){var c=this._pointerState.get(a);this._click.emit(c.event.data,void 0,c.event.modifiers);c.doubleClickTimeout=0;this._pointerState["delete"](a)},c}(f.InputHandler);h.SingleAndDoubleClick=a})},"esri/views/input/recognizers/VerticalTwoFingerDrag":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});a=function(a){function c(c,d){void 0===c&&(c=20);void 0===d&&(d=40);var e=a.call(this,"recognizers.VerticalTwoFingerDrag",!1)||this;return e._threshold=c,e._maxDelta=d,e._failed=!1,e._active=!1,e._vertical=e.registerOutgoing("vertical-two-finger-drag"),e._artificalDragEnd=e.registerOutgoing("drag"),e.registerIncoming("drag",e._handleDrag.bind(e)),e}return m(c,a),
Object.defineProperty(c.prototype,"failed",{get:function(){return this._failed},enumerable:!0,configurable:!0}),c.prototype._handleDrag=function(a){if(2===a.data.pointers.length)switch(a.data.action){case "start":this._handleDragStart(a);break;case "update":this._handleDragUpdate(a);break;case "end":this._handleDragEnd(a)}},c.prototype._handleDragStart=function(a){this._failed=!1;this._dragStartCenter=a.data.currentState.center},c.prototype._handleDragUpdate=function(a){this._failed||(this._active?
(this._vertical.emit({delta:a.data.currentState.center.y-this._thresholdReachedCenter.y,action:"update"}),a.stopPropagation()):(this._failed=!this._checkDeltaConstraint(a.data),this._failed||this._checkThresholdReached(a.data)&&(this._active=!0,this._thresholdReachedCenter=a.data.currentState.center,this._artificalDragEnd.emit({action:"end",currentState:a.data.currentState,previousState:a.data.previousState,startState:a.data.startState,pointers:a.data.pointers}),this._vertical.emit({delta:a.data.currentState.center.y-
this._thresholdReachedCenter.y,action:"begin"}),a.stopPropagation())))},c.prototype._handleDragEnd=function(a){this._active&&(this._vertical.emit({delta:a.data.currentState.center.y-this._thresholdReachedCenter.y,action:"end"}),a.stopPropagation());this._active=!1},c.prototype._checkDeltaConstraint=function(a){var c=Math.abs(a.pointers[0].startEvent.x-a.pointers[1].startEvent.x),d=Math.abs(a.pointers[0].startEvent.y-a.pointers[1].startEvent.y),b=Math.abs(a.pointers[0].currentEvent.y-a.pointers[1].currentEvent.y),
f=Math.abs(a.pointers[0].currentEvent.x-a.pointers[1].currentEvent.x);return Math.abs(a.currentState.center.x-a.startState.center.x)<this._threshold&&Math.abs(f-c)<=this._maxDelta&&Math.abs(b-d)<=this._maxDelta},c.prototype._checkThresholdReached=function(a){return Math.min(Math.abs(a.pointers[0].currentEvent.y-a.pointers[0].startEvent.y),Math.abs(a.pointers[1].currentEvent.y-a.pointers[1].startEvent.y),Math.abs(a.currentState.center.y-a.startState.center.y))>=this._threshold},c}(f.InputHandler);
h.VerticalTwoFingerDrag=a})},"esri/views/input/handlers/LatestPointerType":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});a=function(a){function c(c){var d=a.call(this,"LatestPointerInteraction",!0)||this;return d._onChange=c,d._value="mouse",d.registerIncoming("pointer-down",function(a){d._setValue("touch"===a.data["native"].pointerType?"touch":"mouse")}),d._moveHandler=d.registerIncoming("pointer-move",
function(a){d._setValue("touch"===a.data["native"].pointerType?"touch":"mouse")}),d._moveHandler.pause(),d}return m(c,a),c.prototype._setValue=function(a){a!==this._value&&("touch"===a?this._moveHandler.resume():this._moveHandler.pause(),this._value=a,this._onChange(a))},c}(f.InputHandler);h.LatestPointerType=a})},"esri/views/input/BrowserEventSource":function(){define(["require","exports","./keys","../../core/libs/pep/pep","dojo/sniff"],function(a,h,m,f,d){Object.defineProperty(h,"__esModule",{value:!0});
var c=d("trident"),n=d("edge"),e=d("chrome"),l=d("ff"),b=d("safari");a=function(){function a(a){this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._element=a;f.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointerDown,"pointer-move":this._handlePointer,"pointer-up":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};
this._initialCssTouchAction=a.style.touchAction;a.style.touchAction="none"}return a.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._element.releasePointerCapture(b)});this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction},Object.defineProperty(a.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"activeEvents",
{set:function(a){var b=this,c;for(c in this._active)a&&a.has(c)||(this._element.removeEventListener(g[c],this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&g[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(g[a],c);b._active[a]=c}})},enumerable:!0,configurable:!0}),a.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._element.releasePointerCapture(a.pointerId),
this._activePointerCaptures["delete"](a.pointerId))},a.prototype._updateNormalizedPointerLikeEvent=function(a,b){var c=this._element.getBoundingClientRect();return b.x=a.clientX-Math.round(c.left),b.y=a.clientY-Math.round(c.top),b},a.prototype._handleKey=function(a,b){var c=m.eventKey(b);c&&"key-up"===a&&this._keyDownState["delete"](c);b={"native":b,key:c,repeat:c&&this._keyDownState.has(c)};c&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)},a.prototype._handlePointerDown=function(a,
b){b=this._updateNormalizedPointerLikeEvent(b,{"native":b,x:0,y:0});this._callback(a,b)},a.prototype._handlePointer=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{"native":b,x:0,y:0});b.preventDefault();this._callback(a,c)},a.prototype._handleMouseWheel=function(a,d){d.preventDefault();var f=d.deltaY;switch(d.deltaMode){case 0:(c||n)&&(f=f/document.documentElement.clientHeight*600);break;case 1:f*=30;break;case 2:f*=900}c||n?f*=.7:e||b?f*=.6:l&&(f*=1.375);var g=Math.abs(f);100<g&&(f=
f/g*200/(1+Math.exp(-.02*(g-100))));d=this._updateNormalizedPointerLikeEvent(d,{"native":d,x:0,y:0,deltaY:f});this._callback(a,d)},a.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures["delete"](b.pointerId);this._handleDefault(a,b)},a.prototype._handleDefault=function(a,b){var c={"native":b};b.preventDefault();this._callback(a,c)},a}();h.BrowserEventSource=a;var g={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove",
"mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu"}})},"esri/core/libs/pep/pep":function(){define([],function(){function a(a,c){c=c||Object.create(null);var d=document.createEvent("Event");d.initEvent(a,c.bubbles||!1,c.cancelable||!1);for(var e=2;e<b.length;e++)a=b[e],d[a]=c[a]||g[e];d.buttons=c.buttons||0;a=0;return a=c.pressure?c.pressure:d.buttons?.5:0,d.x=d.clientX,d.y=d.clientY,d.pointerId=c.pointerId||0,d.width=
c.width||0,d.height=c.height||0,d.pressure=a,d.tiltX=c.tiltX||0,d.tiltY=c.tiltY||0,d.pointerType=c.pointerType||"",d.hwTimestamp=c.hwTimestamp||0,d.isPrimary=c.isPrimary||!1,d}function h(){this.array=[];this.size=0}function m(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);z&&(this.observer=new z(this.mutationWatcher.bind(this)))}function f(a){return"body /shadow-deep/ "+d(a)}function d(a){return'[touch-action\x3d"'+a+'"]'}function c(a){return"{ -ms-touch-action: "+
a+"; touch-action: "+a+"; touch-action-delay: none; }"}function n(){if(C){D.forEach(function(a){String(a)===a?(F+=d(a)+c(a)+"\n",H&&(F+=f(a)+c(a)+"\n")):(F+=a.selectors.map(d)+c(a.rule)+"\n",H&&(F+=a.selectors.map(f)+c(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=F;document.head.appendChild(a)}}function e(a){if(!p.pointermap.has(a))throw a=Error("InvalidPointerId"),a.name="InvalidPointerId",a;}function l(a){if(!a.ownerDocument.contains(a))throw a=Error("InvalidStateError"),
a.name="InvalidStateError",a;}var b="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),g=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],q=window.Map&&window.Map.prototype.forEach?Map:h;h.prototype={set:function(a,b){return void 0===b?this["delete"](a):(this.has(a)||this.size++,void(this.array[a]=b))},has:function(a){return void 0!==this.array[a]},"delete":function(a){this.has(a)&&(delete this.array[a],this.size--)},
get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var t="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),w=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,
0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],v={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},r="undefined"!=typeof SVGElementInstance,p={pointermap:new q,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b,c=this.eventSourceList.length,
d=0;c>d&&(b=this.eventSourceList[d]);d++)b.register.call(b,a)},unregister:function(a){for(var b,c=this.eventSourceList.length,d=0;c>d&&(b=this.eventSourceList[d]);d++)b.unregister.call(b,a)},contains:function(a,b){try{return a.contains(b)}catch(fa){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=!1;this.fireEvent("pointerenter",
a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&this.eventMap[b])&&b(a);a._handledByPE=
!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(b,c){this.captureInfo[c.pointerId]&&(c.relatedTarget=null);b=new a(b,c);return c.preventDefault&&(b.preventDefault=c.preventDefault),b._target=b._target||c.target,b},fireEvent:function(a,b){a=this.makeEvent(a,
b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b,c=Object.create(null),d=0;d<t.length;d++)b=t[d],c[b]=a[b]||w[d],!r||"target"!==b&&"relatedTarget"!==b||c[b]instanceof SVGElementInstance&&(c[b]=c[b].correspondingUseElement);return a.preventDefault&&(c.preventDefault=function(){a.preventDefault()}),c},getTarget:function(a){var b=this.captureInfo[a.pointerId];return b?a._target!==b&&a.type in v?void 0:b:a._target},propagate:function(a,b,c){for(var d=a.target,e=[];!d.contains(a.relatedTarget)&&
d!==document;)e.push(d),d=d.parentNode;c&&e.reverse();e.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(b,c){this.captureInfo[b]&&this.releaseCapture(b);this.captureInfo[b]=c;var d=new a("gotpointercapture");d.pointerId=b;this.implicitRelease=this.releaseCapture.bind(this,b);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);d._target=c;this.asyncDispatchEvent(d)},releaseCapture:function(b){var c=this.captureInfo[b];
if(c){var d=new a("lostpointercapture");d.pointerId=b;this.captureInfo[b]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);d._target=c;this.asyncDispatchEvent(d)}},dispatchEvent:function(a){var b=this.getTarget(a);return b?b.dispatchEvent(a):void 0},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};p.boundHandler=p.eventHandler.bind(p);var u={shadow:function(a){return a?a.shadowRoot||
a.webkitShadowRoot:void 0},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);return this.canTarget(a)?a:void 0},olderShadow:function(a){var b=a.olderShadowRoot;b||(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d,e=a.elementFromPoint(b,c);for(d=this.targetingShadow(e);d;){if(a=d.elementFromPoint(b,c))return d=
this.targetingShadow(a),this.searchRoot(d,b,c)||a;d=this.olderShadow(d)}return e}},owner:function(a){for(;a.parentNode;)a=a.parentNode;return a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document),a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);return a.elementFromPoint(b,c)||(a=document),this.searchRoot(a,b,c)}},k=Array.prototype.forEach.call.bind(Array.prototype.forEach),x=Array.prototype.map.call.bind(Array.prototype.map),B=Array.prototype.slice.call.bind(Array.prototype.slice),
y=Array.prototype.filter.call.bind(Array.prototype.filter),z=window.MutationObserver||window.WebKitMutationObserver,A={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};m.prototype={watchSubtree:function(a){this.observer&&u.canTarget(a)&&this.observer.observe(a,A)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){k(this.findElements(a),
this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(B(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===
Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=x(a,this.findElements,this);return b.push(y(a,this.isElement)),b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var D=["none","auto","pan-x",
"pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],F="",C=window.PointerEvent||window.MSPointerEvent,H=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,I=p.pointermap,M=[1,4,2,8,16],Q=!1;try{Q=1===(new MouseEvent("test",{buttons:1})).buttons}catch(Z){}var K,G={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){p.listen(a,this.events)},unregister:function(a){p.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b,
c=this.lastTouches,d=a.clientX;a=a.clientY;for(var e=0,f=c.length;f>e&&(b=c[e]);e++){var g=Math.abs(a-b.y);if(25>=Math.abs(d-b.x)&&25>=g)return!0}},prepareEvent:function(a){var b=p.cloneEvent(a),c=b.preventDefault;return b.preventDefault=function(){a.preventDefault();c()},b.pointerId=this.POINTER_ID,b.isPrimary=!0,b.pointerType=this.POINTER_TYPE,b},prepareButtonsForMove:function(a,b){var c=I.get(this.POINTER_ID);0!==b.which&&c?a.buttons=c.buttons:a.buttons=0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
I.get(this.POINTER_ID),c=this.prepareEvent(a);Q||(c.buttons=M[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);I.set(this.POINTER_ID,a);b&&0!==b.buttons?p.move(c):p.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);Q||this.prepareButtonsForMove(b,a);b.button=-1;I.set(this.POINTER_ID,a);p.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=I.get(this.POINTER_ID),c=this.prepareEvent(a);if(!Q){var d=M[c.button];c.buttons=
b?b.buttons&~d:0;a.buttons=c.buttons}I.set(this.POINTER_ID,a);c.buttons&=~M[c.button];0===c.buttons?p.up(c):p.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);Q||this.prepareButtonsForMove(b,a);b.button=-1;I.set(this.POINTER_ID,a);p.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);Q||this.prepareButtonsForMove(b,a);b.button=-1;p.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);p.cancel(a);
this.deactivateMouse()},deactivateMouse:function(){I["delete"](this.POINTER_ID)}},N=p.captureInfo,S=u.findTarget.bind(u),J=u.allShadows.bind(u),W=p.pointermap,L={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){K.enableOnSubtree(a)},unregister:function(a){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,p.listen(a,this.events),J(a).forEach(function(a){a._scrollType=c;p.listen(a,this.events)},this))},
elementRemoved:function(a){a._scrollType=void 0;p.unlisten(a,this.events);J(a).forEach(function(a){a._scrollType=void 0;p.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,J(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},
touchActionToScrollType:function(a){var b=this.scrollTypes;return"none"===a?"none":a===b.XSCROLLER?"X":a===b.YSCROLLER?"Y":b.SCROLLER.exec(a)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){(0===W.size||1===W.size&&W.has(1))&&(this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(a){a.isPrimary&&(this.firstTouch=
null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;return("touchstart"===a||"touchmove"===a)&&(b=1),b},touchToPointer:function(a){var b=this.currentTouchEvent,c=p.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=N[d]||S(c);c.bubbles=!0;c.cancelable=
!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=a.radiusX||a.webkitRadiusX||0;c.height=a.radiusY||a.webkitRadiusY||0;c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;var e=this;return c.preventDefault=function(){e.scrolling=!1;e.firstXY=null;b.preventDefault()},c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=
a;for(var d=0;d<c.length;d++)a=c[d],b.call(this,this.touchToPointer(a))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}return this.firstXY=null,b}},findTouch:function(a,b){for(var c,d=0,e=a.length;e>d&&(c=a[d]);d++)if(c.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(W.size>=
b.length){var c=[];W.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){W.set(a.pointerId,{target:a.target,out:a,outTarget:a.target});p.enterOver(a);p.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):
(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=W.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;p.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(p.leaveOut(c),p.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(p.up(a),p.leaveOut(a));this.cleanUpPointer(a)},
touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){p.cancel(a);p.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){W["delete"](a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=G.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};K=new m(L.elementAdded,L.elementRemoved,L.elementChanged,L);var P,
Y,ba=p.pointermap,V=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,X={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){p.listen(a,this.events)},unregister:function(a){p.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;return V&&(b=p.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]),
b},cleanup:function(a){ba["delete"](a)},MSPointerDown:function(a){ba.set(a.pointerId,a);a=this.prepareEvent(a);p.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);p.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);p.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);p.leaveOut(a)},MSPointerOver:function(a){a=this.prepareEvent(a);p.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);p.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=
p.makeEvent("lostpointercapture",a);p.dispatchEvent(a)},MSGotPointerCapture:function(a){a=p.makeEvent("gotpointercapture",a);p.dispatchEvent(a)}};window.navigator.msPointerEnabled?(P=function(a){e(a);l(this);0!==p.pointermap.get(a).buttons&&this.msSetPointerCapture(a)},Y=function(a){e(a);this.msReleasePointerCapture(a)}):(P=function(a){e(a);l(this);0!==p.pointermap.get(a).buttons&&p.setCapture(a,this)},Y=function(a){e(a);p.releaseCapture(a,this)});var ca=window.PointerEvent||window.MSPointerEvent;
return{dispatcher:p,Installer:m,PointerEvent:a,PointerMap:q,targetFinding:u,applyGlobal:function(){n();window.PointerEvent||((window.PointerEvent=a,window.navigator.msPointerEnabled)?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,enumerable:!0}),p.registerSource("ms",X)):(p.registerSource("mouse",G),void 0!==window.ontouchstart&&p.registerSource("touch",L)),p.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,
{setPointerCapture:{value:P},releasePointerCapture:{value:Y}})},applyLocal:function(a){ca||(window.PointerEvent||(window.navigator.msPointerEnabled?p.registerSource("ms",X):(p.registerSource("mouse",G),void 0!==window.ontouchstart&&p.registerSource("touch",L)),p.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=P.bind(a),a.releasePointerCapture=Y.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/ViewEvents":function(){define(["require",
"exports","../../core/tsSupport/extendsHelper","./InputHandler","../../geometry/ScreenPoint"],function(a,h,m,f,d){function c(a){return!!l[a]}function n(a){for(var b=0;b<a.length;b++)if(!c(a[b]))return!1;return!0}Object.defineProperty(h,"__esModule",{value:!0});var e,l={click:!0,"double-click":!0,hold:!0,drag:!0,"key-down":!0,"key-up":!0,"pointer-down":!0,"pointer-move":!0,"pointer-up":!0,"mouse-wheel":!0};!function(a){a[a.Left=0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right"}(e||(e={}));a=function(){function a(a){this.handlers=
new Map;this.counter=0;this.view=a;this.inputManager=null}return a.prototype.connect=function(a){var b=this;a&&this.disconnect();this.inputManager=a;this.handlers.forEach(function(a,c){return b.inputManager.installHandlers(c,[a])})},a.prototype.disconnect=function(){var a=this;this.inputManager&&this.handlers.forEach(function(b,c){return a.inputManager.uninstallHandlers(c)});this.inputManager=null},a.prototype.destroy=function(){this.disconnect();this.handlers.clear();this.view=null},a.prototype.register=
function(a,d,e){var f=this;a=Array.isArray(a)?a:a.split(",");if(!n(a))return a.some(c)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;var g=Array.isArray(d)?d:[];e=Array.isArray(d)?e:d;var h=this.createUniqueGroupName();d=new b(this.view,a,g,e);return this.handlers.set(h,d),this.inputManager&&this.inputManager.installHandlers(h,[d]),{remove:function(){return f.removeHandler(h)}}},a.prototype.removeHandler=function(a){this.handlers.has(a)&&
this.handlers["delete"](a);this.inputManager&&this.inputManager.uninstallHandlers(a)},a.prototype.createUniqueGroupName=function(){return this.counter+=1,"viewEvents_"+this.counter},a}();h.ViewEvents=a;var b=function(a){function b(b,c,d,e){var f=a.call(this,"esri.views.input.ViewEventHandler",!0)||this;f.view=b;for(b=0;b<c.length;b++)switch(c[b]){case "click":f.registerIncoming("click",d,function(a){return e(f.wrapClick(a))});break;case "double-click":f.registerIncoming("double-click",d,function(a){return e(f.wrapDoubleClick(a))});
break;case "hold":f.registerIncoming("hold",d,function(a){return e(f.wrapHold(a))});break;case "drag":f.registerIncoming("drag",d,function(a){return e(f.wrapDrag(a))});break;case "key-down":f.registerIncoming("key-down",d,function(a){return e(f.wrapKeyDown(a))});break;case "key-up":f.registerIncoming("key-up",d,function(a){return e(f.wrapKeyUp(a))});break;case "pointer-down":f.registerIncoming("pointer-down",d,function(a){return e(f.wrapPointer(a,"pointer-down"))});break;case "pointer-move":f.registerIncoming("pointer-move",
d,function(a){return e(f.wrapPointer(a,"pointer-move"))});break;case "pointer-up":f.registerIncoming("pointer-up",d,function(a){return e(f.wrapPointer(a,"pointer-up"))});break;case "mouse-wheel":f.registerIncoming("mouse-wheel",d,function(a){return e(f.wrapMouseWheel(a))})}return f}return m(b,a),b.prototype.wrapClick=function(a){var b=a.data.x,c=a.data.y;return{type:"click",button:"touch"===a.data["native"].pointerType?0:a.data["native"].button,x:b,y:c,"native":a.data["native"],timestamp:a.timestamp,
screenPoint:new d(b,c),mapPoint:this.view.toMap(b,c),stopPropagation:function(){return a.stopPropagation()}}},b.prototype.wrapDoubleClick=function(a){var b=a.data.x,c=a.data.y;return{type:"double-click",button:"touch"===a.data["native"].pointerType?0:a.data["native"].button,x:b,y:c,"native":a.data["native"],timestamp:a.timestamp,mapPoint:this.view.toMap(b,c),stopPropagation:function(){return a.stopPropagation()}}},b.prototype.wrapHold=function(a){var b=a.data.x,c=a.data.y;return{type:"hold",button:"touch"===
a.data["native"].pointerType?0:a.data["native"].button,x:b,y:c,"native":a.data["native"],timestamp:a.timestamp,mapPoint:this.view.toMap(b,c),stopPropagation:function(){return a.stopPropagation()}}},b.prototype.wrapDrag=function(a){return{type:"drag",action:a.data.action,x:a.data.currentState.center.x,y:a.data.currentState.center.y,origin:{x:a.data.startState.center.x,y:a.data.startState.center.y},"native":a.data.pointers[0].currentEvent["native"],timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}},
b.prototype.wrapKeyDown=function(a){return{type:"key-down",key:a.data.key,repeat:a.data.repeat,"native":a.data["native"],timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}},b.prototype.wrapKeyUp=function(a){return{type:"key-up",key:a.data.key,"native":a.data["native"],timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}},b.prototype.wrapPointer=function(a,b){return{type:b,x:a.data.x,y:a.data.y,pointerId:a.data["native"].pointerId,pointerType:a.data["native"].pointerType,
"native":a.data["native"],timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}},b.prototype.wrapMouseWheel=function(a){return{type:"mouse-wheel",x:a.data.x,y:a.data.y,deltaY:a.data.deltaY,"native":a.data["native"],timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}},b}(f.InputHandler)})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(a,h,m,f){Object.defineProperty(h,
"__esModule",{value:!0});a=function(a){function c(){var c=a.call(this,"PreventContextMenu",!0)||this;return c.registerIncoming("context-menu",function(a){a.data["native"].preventDefault()}),c}return m(c,a),c}(f.InputHandler);h.PreventContextMenu=a;h["default"]=a})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(a,h,m,f,d){Object.defineProperty(h,
"__esModule",{value:!0});a=function(a){function c(c,d){var b=a.call(this,"esri.views.2d.input.handlers.DoubleClickZoom",!0)||this;return b.view=c,b.registerIncoming("double-click",d,function(a){return b._handleDoubleClick(a,d)}),b}return m(c,a),c.prototype._handleDoubleClick=function(a,c){d.eventMatchesPointerType(a.data["native"],"primary")&&(a.stopPropagation(),c?this.view.navigation.zoomOut([a.data.x,a.data.y]):this.view.navigation.zoomIn([a.data.x,a.data.y]))},c}(f.InputHandler);h.DoubleClickZoom=
a})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(a,h){Object.defineProperty(h,"__esModule",{value:!0});h.eventMatchesPointerType=function(a,f){switch(f){case "primary":return"touch"===a.pointerType||0===a.button;case "secondary":return"touch"!==a.pointerType&&2===a.button;case "tertiary":return"touch"!==a.pointerType&&1===a.button}}})},"esri/views/2d/input/handlers/DragPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler",
"../../../input/handlers/support"],function(a,h,m,f,d){Object.defineProperty(h,"__esModule",{value:!0});a=function(a){function c(c,d,b){var e=a.call(this,"esri.views.2d.input.handlers.DragPan - "+d,!0)||this;return e.view=c,e.pointerType=d,e.registerIncoming("drag",b,function(a){return e._handleDrag(a)}),e.registerIncoming("pointer-down",function(a){return e.stopMomentumNavigation()}),e}return m(c,a),c.prototype._handleDrag=function(a){var c=a.data,b=this.view.navigation;if(1<c.pointers.length||b.pinch.zoomMomentum||
b.pinch.rotateMomentum)return void this.stopMomentumNavigation();if(d.eventMatchesPointerType(c.pointers[0].startEvent["native"],this.pointerType)){b=b.pan;switch(c.action){case "start":b.begin(this.view,c);break;case "update":b.update(this.view,c);break;case "end":b.end(this.view,c)}a.stopPropagation()}},c.prototype.stopMomentumNavigation=function(){this.view.navigation.pan.stopMomentumNavigation()},c}(f.InputHandler);h.DragPan=a})},"esri/views/2d/input/handlers/DragRotate":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(a,h,m,f,d){Object.defineProperty(h,"__esModule",{value:!0});a=function(a){function c(c,d,b){var e=a.call(this,"esri.views.2d.input.handlers.DragRotate - "+d,!0)||this;return e.view=c,e.pointerType=d,e.registerIncoming("drag",b,function(a){return e._handleDrag(a)}),e}return m(c,a),c.prototype._handleDrag=function(a){var c=a.data;if(!(1<c.pointers.length)&&d.eventMatchesPointerType(c.pointers[0].startEvent["native"],
this.pointerType)){var b=this.view.navigation.rotate;switch(c.action){case "start":b.begin(this.view,c);break;case "update":b.update(this.view,c);break;case "end":b.end(this.view,c)}a.stopPropagation()}},c}(f.InputHandler);h.DragRotate=a})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});a=function(a){function c(c,d,f){var b=a.call(this,
"esri.views.2d.input.handlers.KeyPan",!0)||this;return b.view=c,b.keys=d,b._keyMap=(e={},e[d.left]="left",e[d.right]="right",e[d.up]="up",e[d.down]="down",e),b.registerIncoming("key-down",f,function(a){return b._handleKeyDown(a)}),b.registerIncoming("key-up",f,function(a){return b._handleKeyUp(a)}),b;var e}return m(c,a),c.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,!0)},c.prototype._handleKeyUp=function(a){this._handleKey(a,!1)},c.prototype._handleKey=function(a,c){var d=
this._keyMap[a.data.key];if(null!=d){if(c)switch(d){case "left":this.view.navigation.continousPanLeft();break;case "right":this.view.navigation.continousPanRight();break;case "up":this.view.navigation.continousPanUp();break;case "down":this.view.navigation.continousPanDown()}else this.view.navigation.stop();a.stopPropagation()}},c}(f.InputHandler);h.KeyPan=a})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],
function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});var d;!function(a){a[a.IN=0]="IN";a[a.OUT=1]="OUT"}(d||(d={}));a=function(a){function c(c,f,b){var e=a.call(this,"esri.views.2d.input.handlers.KeyZoom",!0)||this;return e.view=c,e.keys=f,e._keysToZoomAction={},e.registerIncoming("key-down",b,function(a){return e._handleKeyDown(a)}),f.zoomIn.forEach(function(a){return e._keysToZoomAction[a]=d.IN}),f.zoomOut.forEach(function(a){return e._keysToZoomAction[a]=d.OUT}),e}return m(c,a),c.prototype._handleKeyDown=
function(a){this._handleKey(a)},c.prototype._handleKey=function(a){var c=a.modifiers;0<c.size&&!c.has("Shift")||(c=this._keysToZoomAction[a.data.key],c===d.IN?(this.view.navigation.zoomIn(),a.stopPropagation()):c===d.OUT&&(this.view.navigation.zoomOut(),a.stopPropagation()))},c}(f.InputHandler);h.KeyZoom=a})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(a,h,m,f){Object.defineProperty(h,
"__esModule",{value:!0});a=function(a){function c(c,d,f){var b=a.call(this,"esri.views.2d.input.handlers.KeyRotate",!0)||this;return b.view=c,b.keys=d,b._keyToDirection=(e={},e[d.clockwiseOption1]="clockwise",e[d.clockwiseOption2]="clockwise",e[d.counterClockwiseOption1]="counterClockwise",e[d.counterClockwiseOption2]="counterClockwise",e[d.resetOption1]="reset",e[d.resetOption2]="reset",e),b.registerIncoming("key-down",f,function(a){return b._handleKeyDown(a)}),b.registerIncoming("key-up",f,function(a){return b._handleKeyUp(a)}),
b;var e}return m(c,a),c.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,!0)},c.prototype._handleKeyUp=function(a){this._handleKey(a,!1)},c.prototype._handleKey=function(a,c){var d=a.modifiers;0<d.size&&!d.has("Shift")||!this.view.constraints.rotationEnabled||(d=this._keyToDirection[a.data.key])&&(c?"clockwise"===d?this.view.navigation.continousRotateClockwise():"counterClockwise"===d?this.view.navigation.continousRotateCounterclockwise():this.view.navigation.resetRotation():
this.view.navigation.stop(),a.stopPropagation())},c}(f.InputHandler);h.KeyRotate=a})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});a=function(a){function c(c,d){var e=a.call(this,"esri.views.2d.input.handlers.MouseWheelZoom",!0)||this;return e.view=c,e._canZoom=!0,e.registerIncoming("mouse-wheel",d,function(a){return e._handleMouseWheel(a)}),
e}return m(c,a),c.prototype._handleMouseWheel=function(a){var c=this;if(this._canZoom){var d=a.data;(d=this.view.navigation.zoom(1/Math.pow(.6,1/60*d.deltaY),[d.x,d.y]))&&(this._canZoom=!1,d.always(function(){c._canZoom=!0}));a.stopPropagation()}},c}(f.InputHandler);h.MouseWheelZoom=a})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});
a=function(a){function c(c){var d=a.call(this,"esri.views.2d.input.handlers.PinchZoom",!0)||this;return d.view=c,d.registerIncoming("drag",function(a){return d._handleDrag(a)}),d.registerIncoming("pointer-down",function(a){return d.stopMomentumNavigation()}),d}return m(c,a),c.prototype._handleDrag=function(a){var c=a.data;if(!(2>c.pointers.length)){var d=this.view.navigation.pinch;switch(c.action){case "start":d.begin(this.view,c);break;case "update":d.update(this.view,c);break;case "end":d.end(this.view,
c)}a.stopPropagation()}},c.prototype.stopMomentumNavigation=function(){this.view.navigation.pinch.stopMomentumNavigation()},c}(f.InputHandler);h.PinchRotateAndZoom=a})},"esri/views/2d/navigation/MapViewNavigation":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../Viewpoint ../../../geometry/Point ./actions/Pan ./actions/Rotate ./actions/Pinch ./ZoomBox ../viewpointUtils".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t){var w=new n({targetGeometry:new e}),v=[0,0];a=function(a){function c(b){b=a.call(this)||this;return b.animationManager=null,b}return m(c,a),c.prototype.initialize=function(){this.pan=new l({navigation:this});this.rotate=new b({navigation:this});this.pinch=new g({navigation:this});this.zoomBox=new q({view:this.view,navigation:this})},c.prototype.destroy=function(){this.zoomBox.destroy();this.animationManager=this.zoomBox=null},c.prototype.begin=function(){this._set("interacting",
!0)},c.prototype.end=function(){this._set("interacting",!1)},c.prototype.zoom=function(a,b){return void 0===b&&(b=this._getDefaultAnchor()),this.stop(),this.begin(),this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs?1>a?this.zoomIn(b):this.zoomOut(b):void this.setViewpoint(b,a,0)},c.prototype.zoomIn=function(a){void 0===a&&(a=this._getDefaultAnchor());this.begin();var b=this.view,c=b.scale,d=b.constraints.snapToNextScale(c);a=b.goTo(this._scaleAndRotateViewpoint(w,a,d/c,0));return this.end(),
a},c.prototype.zoomOut=function(a){void 0===a&&(a=this._getDefaultAnchor());this.begin();var b=this.view,c=b.scale,d=b.constraints.snapToPreviousScale(c);a=b.goTo(this._scaleAndRotateViewpoint(w,a,d/c,0));return this.end(),a},c.prototype.setViewpoint=function(a,b,c){this.begin();this.view.state.viewpoint=this._scaleAndRotateViewpoint(w,a,b,c);this.end()},c.prototype.animateViewpoint=function(a,b,c){return this.view.goTo(this._scaleAndRotateViewpoint(w,a,b,c))},c.prototype.continousRotateClockwise=
function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){t.rotateBy(a,a,-1)})},c.prototype.continousRotateCounterclockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){t.rotateBy(a,a,1)})},c.prototype.resetRotation=function(){this.view.rotation=0},c.prototype.continousPanLeft=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){t.translateBy(a,a,[-10,0])})},c.prototype.continousPanRight=
function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){t.translateBy(a,a,[10,0])})},c.prototype.continousPanUp=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){t.translateBy(a,a,[0,10])})},c.prototype.continousPanDown=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){t.translateBy(a,a,[0,-10])})},c.prototype.stop=function(){this.pan.stopMomentumNavigation();this.animationManager.stop();
this.end()},c.prototype._getDefaultAnchor=function(){var a=this.view.size;return v[0]=.5*a[0],v[1]=.5*a[1],v},c.prototype._scaleAndRotateViewpoint=function(a,b,c,d){var e=this.view,f=e.size,g=e.padding,h=e.constraints,k=e.viewpoint,l=e.scale*c,e=h.canZoomInTo(l),h=h.canZoomOutTo(l);return 1<c&&!e||1>=c&&!h?k:t.padAndScaleAndRotateBy(a,k,c,d,b,f,g)},c}(d.declared(c));return f([d.property()],a.prototype,"animationManager",void 0),f([d.property({type:Boolean,readOnly:!0})],a.prototype,"interacting",
void 0),f([d.property()],a.prototype,"pan",void 0),f([d.property()],a.prototype,"pinch",void 0),f([d.property()],a.prototype,"rotate",void 0),f([d.property()],a.prototype,"view",void 0),f([d.property()],a.prototype,"zoomBox",void 0),a=f([d.subclass("esri.views.2d.navigation.MapViewNavigation")],a)})},"esri/views/2d/navigation/actions/Pan":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../../navigation/Momentum ../../../3d/lib/glMatrix".split(" "),
function(a,h,m,f,d,c,n,e,l){a=function(a){function b(b){var c=a.call(this)||this;return c.animationTime=0,c.momentumEstimator=new e.ScreenspaceMomentumEstimator(.05,600,6,.92),c.momentum=null,c.momentumVelocityX=0,c.momentumVelocityY=0,c.momentumFinished=!1,c.viewpoint=n.create(),c.watch("momentumFinished",function(a){a&&c.navigation.stop()}),c}return m(b,a),b.prototype.begin=function(a,b){this.navigation.begin();this.momentumEstimator.reset();this.addToEstimator(b)},b.prototype.update=function(a,
b){this.addToEstimator(b);var c=b.pointers[0];b=c.currentEvent.x;var d=c.currentEvent.y;b=(c=c.previousEvent)?c.x-b:-b;d=c?d-c.y:d;a.viewpoint=n.translateBy(this.viewpoint,a.viewpoint,[b||0,d||0])},b.prototype.end=function(a,b){this.addToEstimator(b);this.momentum=this.momentumEstimator.evaluateMomentum();this.animationTime=0;this.momentum&&(this.momentumVelocityX=(this.momentum.dataNewest[0]-this.momentum.dataOldest[0])/this.momentum.dataTimeDelta,this.momentumVelocityY=(this.momentum.dataNewest[1]-
this.momentum.dataOldest[1])/this.momentum.dataTimeDelta,this.onAnimationUpdate(a));this.navigation.end()},b.prototype.addToEstimator=function(a){var b=a.pointers[0],c=b.currentEvent.x,b=b.currentEvent.y;this.momentumEstimator.add(c,b,l.vec3.createFrom(c,b,0),.001*a.currentState.timestamp)},b.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,d){b.momentumFinished=!b.momentum||b.momentum.isFinished(b.animationTime);d*=.001;if(b.notifyChange("momentumFinished"),
!b.momentumFinished){var e=b.momentum.velocityFactor(b.animationTime);a.viewpoint=n.translateBy(c,c,[-(e*b.momentumVelocityX*d),e*b.momentumVelocityY*d])}b.animationTime+=d})},b.prototype.stopMomentumNavigation=function(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())},b}(d.declared(c));return f([d.property()],a.prototype,"viewpoint",void 0),f([d.property()],a.prototype,"navigation",void 0),a=f([d.subclass("esri.views.2d.navigation.actions.Pan")],a)})},"esri/views/navigation/Momentum":function(){define(["require",
"exports","../../core/tsSupport/extendsHelper","./ValueHistory","../3d/lib/glMatrix"],function(a,h,m,f,d){Object.defineProperty(h,"__esModule",{value:!0});var c=function(){function a(a,b,c){this._initialVelocity=a;this._stopVelocity=b;this._friction=c;this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}return Object.defineProperty(a.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),a.prototype.isFinished=
function(a){return a>this.duration},Object.defineProperty(a.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0}),a.prototype.value=function(a){a=Math.min(a,this.duration);var b=1-this._friction;return this._initialVelocity*(Math.pow(b,a)-1)/Math.log(b)},a.prototype.valueDelta=function(a,b){var c=this.value(a);return this.value(a+b)-c},a}();h.Momentum=c;a=function(){function a(a,b,c,d){void 0===a&&(a=.05);this._minimumInitialVelocity=b;this._stopVelocity=c;this._friction=
d;this._history=new f.ValueHistory(1E3*a)}return a.prototype.add=function(a,b){void 0!==b&&(b*=1E3);this._history.add(a,b)},a.prototype.reset=function(){this._history.reset()},Object.defineProperty(a.prototype,"stopVelocity",{get:function(){return this._stopVelocity},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0}),a.prototype.evaluateMomentum=function(){var a=this._evaluateVelocity();return null!==
a?new c(a,this._stopVelocity,this._friction):null},a.prototype._evaluateVelocity=function(){var a=this._history,b=a.oldest,a=a.newest;if(b&&a){var c=(a.timeStamp-b.timeStamp)/1E3;if(0<c&&(b=(a.value-b.value)/c,Math.abs(b)>=this._minimumInitialVelocity))return b}return null},a}();h.MomentumEstimator=a;var n=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}return m(b,a),b.prototype.value=function(b){b=a.prototype.value.call(this,b);return Math.exp(b)},b.prototype.valueDelta=function(b,
c){var d=a.prototype.value.call(this,b);b=a.prototype.value.call(this,b+c);return Math.exp(b-d)},b}(c);h.ZoomMomentum=n;var e=function(a){function b(b,c,d,e){return void 0===b&&(b=.05),void 0===c&&(c=4),void 0===d&&(d=.01),void 0===e&&(e=.95),a.call(this,b,c,d,e)||this}return m(b,a),b.prototype.add=function(b,c){a.prototype.add.call(this,Math.log(b),c)},b.prototype.evaluateMomentum=function(){var a=this._evaluateVelocity();return null!==a?new n(a,this.stopVelocity,this.friction):null},b}(a);h.ZoomMomentumEstimator=
e;a=function(a){function b(b,c,d,e){return void 0===b&&(b=.05),void 0===c&&(c=4),void 0===d&&(d=.01),void 0===e&&(e=.95),a.call(this,b,c,d,e)||this}return m(b,a),b.prototype.add=function(b,c){var d=this._history.newest;if(d){d=d.value;for(b-=d;b>Math.PI;)b-=2*Math.PI;for(;b<-Math.PI;)b+=2*Math.PI;b=d+b}a.prototype.add.call(this,b,c)},b}(a);h.RotationMomentumEstimator=a;var l=function(a){function b(b,c,d,e,f,g){b=a.call(this,b,c,d)||this;return b.dataOldest=e,b.dataNewest=f,b.dataTimeDelta=g,b}return m(b,
a),b.prototype.velocityFactor=function(a){return a=Math.min(a,this.duration),Math.pow(1-this.friction,a)},b.prototype.valueFromInitialVelocity=function(a,b){b=Math.min(b,this.duration);var c=1-this.friction;return a*(Math.pow(c,b)-1)/Math.log(c)},b}(c);h.ScreenspaceMomentum=l;a=function(){function a(a,b,c,d){void 0===a&&(a=.05);this._minimumInitialVelocity=b;this._stopVelocity=c;this._friction=d;this._entryPool=[];this._history=new f.ValueHistory(1E3*a)}return a.prototype.add=function(a,b,c,e){void 0!==
e&&(e*=1E3);var f;0!==this._entryPool.length?(f=this._entryPool.pop(),f.x=a,f.y=b,d.vec3d.set(c,f.data)):f={x:a,y:b,data:d.vec3d.create(c)};this._history.add(f,e)},a.prototype.reset=function(){for(var a=0,b=this._history.values;a<b.length;a++)this._entryPool.push(b[a].value);this._history.reset()},Object.defineProperty(a.prototype,"stopVelocity",{get:function(){return this._stopVelocity},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"friction",{get:function(){return this._friction},
enumerable:!0,configurable:!0}),a.prototype.evaluateMomentum=function(){var a=this._evaluateVelocity(),b=this._history.oldest,c=this._history.newest;return null!==a?new l(a,this._stopVelocity,this._friction,b.value.data,c.value.data,.001*(c.timeStamp-b.timeStamp)):null},a.prototype._evaluateVelocity=function(){var a=this._history,b=a.oldest,c=a.newest;if(b&&c&&(a=.001*(c.timeStamp-b.timeStamp),0<a)){var d=c.value.x-b.value.x,b=c.value.y-b.value.y,b=Math.sqrt(d*d+b*b)/a;if(Math.abs(b)>=this._minimumInitialVelocity)return b}return null},
a}();h.ScreenspaceMomentumEstimator=a})},"esri/views/navigation/ValueHistory":function(){define(["require","exports","../../core/now"],function(a,h,m){Object.defineProperty(h,"__esModule",{value:!0});a=function(){function a(a){this._maximumAge=a;this._values=[]}return Object.defineProperty(a.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),a.prototype.reset=function(){this._values=[]},a.prototype.add=function(a,c){c=void 0!==c?c:m();this._values.push({value:a,
timeStamp:c});this._cleanup(c)},Object.defineProperty(a.prototype,"newest",{get:function(){var a=this._values.length;return 0<a?this._values[a-1]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"oldest",{get:function(){return 0<this._values.length?this._values[0]:void 0},enumerable:!0,configurable:!0}),a.prototype._cleanup=function(a){for(;0<this._values.length&&this._values[0].timeStamp+this._maximumAge<a;)this._values.shift()},a}();h.ValueHistory=a})},"esri/views/2d/navigation/actions/Rotate":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../libs/gl-matrix/vec2".split(" "),
function(a,h,m,f,d,c,n,e){a=function(a){function b(b){b=a.call(this)||this;return b.animationTime=0,b.viewpoint=n.create(),b}return m(b,a),b.prototype.begin=function(a,b){this.navigation.begin()},b.prototype.update=function(a,b){var c=b.pointers[0];b=e.create();b=e.set(b,c.currentEvent.x,a.height-c.currentEvent.y);var c=c.previousEvent,d=e.create();e.set(d,c.x,a.height-c.y);b=n.angleBetween(a.state.paddedScreenCenter,b,d);a.viewpoint=n.rotateBy(this.viewpoint,a.content.viewpoint,b)},b.prototype.end=
function(a,b){this.navigation.end()},b}(d.declared(c));return f([d.property()],a.prototype,"viewpoint",void 0),f([d.property()],a.prototype,"navigation",void 0),a=f([d.subclass("esri.views.2d.actions.Rotate")],a)})},"esri/views/2d/navigation/actions/Pinch":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../../navigation/Momentum ../../libs/gl-matrix/vec2".split(" "),
function(a,h,m,f,d,c,n,e,l){a=function(a){function b(b){var c=a.call(this,b)||this;return c.animationTime=0,c.momentumFinished=!1,c.rotateMomentumEstimator=new e.RotationMomentumEstimator(.05,6,.15,.95),c.rotateMomentum=null,c.rotationDirection=1,c.zoomMomentumEstimator=new e.ZoomMomentumEstimator(.05),c.zoomMomentum=null,c.zoomDirection=1,c.viewpoint=n.create(),c.watch("momentumFinished",function(a){a&&c.navigation.stop()}),c}return m(b,a),b.prototype.begin=function(a,b){this.navigation.begin();
this.rotateMomentumEstimator.reset();this.zoomMomentumEstimator.reset();this.addToRotateEstimator(b,0);this.addToZoomEstimator(b,b.startState.radius/b.currentState.radius)},b.prototype.update=function(a,b){var c=b.currentState,d=c.angle,e=c.radius,c=c.center,f=b.previousState,g=f.radius,h=f.angle,f=b.startState.radius/e;g&&(e/=g,d=180*(d-h)/Math.PI,this.rotationDirection=0<=d?1:-1,this.zoomDirection=1<=e?1:-1,a.constraints.rotationEnabled||(d=0),this.addToRotateEstimator(b,d),this.addToZoomEstimator(b,
f),this.center=c,this.navigation.setViewpoint([c.x,c.y],1/e,d))},b.prototype.end=function(a,b){this.addToRotateEstimator(b,0);this.addToZoomEstimator(b,b.startState.radius/b.currentState.radius);this.rotateMomentum=this.rotateMomentumEstimator.evaluateMomentum();this.zoomMomentum=this.zoomMomentumEstimator.evaluateMomentum();this.animationTime=0;(this.rotateMomentum||this.zoomMomentum)&&this.onAnimationUpdate(a);this.navigation.end()},b.prototype.addToRotateEstimator=function(a,b){this.rotateMomentumEstimator.add(b,
.001*a.currentState.timestamp)},b.prototype.addToZoomEstimator=function(a,b){this.zoomMomentumEstimator.add(b,.001*a.currentState.timestamp)},b.prototype.canZoomIn=function(a){var b=a.scale;a=a.constraints.effectiveMaxScale;return 0===a||b>a},b.prototype.canZoomOut=function(a){var b=a.scale;a=a.constraints.effectiveMinScale;return 0===a||a>b},b.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,d){var e=!b.canZoomIn(a)&&1<b.zoomDirection||
!b.canZoomOut(a)&&1>b.zoomDirection;b.momentumFinished=!b.rotateMomentum||b.rotateMomentum.isFinished(b.animationTime)||e;d*=.001;if(b.notifyChange("momentumFinished"),!b.momentumFinished){var e=Math.abs(b.rotateMomentum.valueDelta(b.animationTime,d))*b.rotationDirection*2,f=b.zoomMomentum?Math.abs(b.zoomMomentum.valueDelta(b.animationTime,d)):1,g=l.create(),h=l.create();l.set(g,b.center.x,b.center.y);n.getPaddingScreenTranslation(h,a.size,a.padding);l.add(g,g,h);n.scaleAndRotateBy(c,a.viewpoint,
f,e,g,a.size)}b.animationTime+=d})},b.prototype.stopMomentumNavigation=function(){(this.rotateMomentum||this.zoomMomentum)&&(this.rotateMomentum&&(this.rotateMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this.zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop())},b}(d.declared(c));return f([d.property()],a.prototype,"viewpoint",void 0),f([d.property()],a.prototype,"navigation",void 0),a=f([d.subclass("esri.views.2d.navigation.actions.Pinch")],a)})},
"esri/views/2d/navigation/ZoomBox":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor".split(" "),function(a,h,m,f,d,c){a=function(a){function c(c){c=a.call(this,c)||this;return c._container=null,c._overlay=null,c._backgroundShape=null,c._boxShape=null,c._box={x:0,y:0,width:0,height:0},c._redraw=c._redraw.bind(c),c}return m(c,a),c.prototype.destroy=function(){this.view=
null},Object.defineProperty(c.prototype,"view",{set:function(a){var b=this;this._handles&&this._handles.forEach(function(a){a.remove()});this._handles=null;this._destroyOverlay();this._set("view",a);a&&(a.on("drag",["Shift"],function(a){return b._handleDrag(a,1)}),a.on("drag",["Shift","Ctrl"],function(a){return b._handleDrag(a,-1)}))},enumerable:!0,configurable:!0}),c.prototype._start=function(a,b,c,d){this._createContainer();this._createOverlay();this.navigation.begin()},c.prototype._update=function(a,
b,c,d){this._box.x=a;this._box.y=b;this._box.width=c;this._box.height=d;this._rafId||(this._rafId=requestAnimationFrame(this._redraw))},c.prototype._end=function(a,b,c,d,e){var f=this.view;a=f.toMap(a+.5*c,b+.5*d);c=Math.min(c/f.width,d/f.height);-1===e&&(c=1/c);this._destroyOverlay();this.navigation.end();f.goTo({center:a,scale:f.scale*c})},c.prototype._updateBox=function(a,b,c,d){var e=this._boxShape;e.setAttributeNS(null,"x",""+a);e.setAttributeNS(null,"y",""+b);e.setAttributeNS(null,"width",""+
c);e.setAttributeNS(null,"height",""+d);e.setAttributeNS(null,"class","esri-zoom-box__outline")},c.prototype._updateBackground=function(a,b,c,d){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(a,b,c,d,this.view.width,this.view.height))},c.prototype._createContainer=function(){var a=document.createElement("div");a.className="esri-zoom-box__container";this.view.root.appendChild(a);this._container=a},c.prototype._createOverlay=function(){var a=this.view.width,b=this.view.height,c=document.createElementNS("http://www.w3.org/2000/svg",
"path");c.setAttributeNS(null,"d","M 0 0 L "+a+" 0 L "+a+" "+b+" L 0 "+b+" Z");c.setAttributeNS(null,"class","esri-zoom-box__overlay-background");a=document.createElementNS("http://www.w3.org/2000/svg","rect");b=document.createElementNS("http://www.w3.org/2000/svg","svg");b.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");b.setAttributeNS(null,"class","esri-zoom-box__overlay");b.appendChild(c);b.appendChild(a);this._container.appendChild(b);this._backgroundShape=
c;this._boxShape=a;this._overlay=b},c.prototype._destroyOverlay=function(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=this._backgroundShape=this._boxShape=this._overlay=null},c.prototype._toSVGPath=function(a,b,c,d,e,f){c=a+c;d=b+d;return"M 0 0 L "+e+" 0 L "+e+" "+f+" L 0 "+f+" ZM "+a+" "+b+" L "+a+" "+d+" L "+c+" "+d+" L "+c+" "+b+" Z"},c.prototype._handleDrag=function(a,b){var c,d,e,f,h=a.x,l=a.y,m=a.origin.x,n=a.origin.y;
switch(h>m?(c=m,e=h-m):(c=h,e=m-h),l>n?(d=n,f=l-n):(d=l,f=n-l),a.action){case "start":this._start(c,d,e,f);break;case "update":this._update(c,d,e,f);break;case "end":this._end(c,d,e,f,b)}a.stopPropagation()},c.prototype._redraw=function(){if(this._rafId&&(this._rafId=null,this._overlay)){var a=this._box,b=a.x,c=a.y,d=a.width,a=a.height;this._updateBox(b,c,d,a);this._updateBackground(b,c,d,a);this._rafId=requestAnimationFrame(this._redraw)}},c}(d.declared(c));return f([d.property()],a.prototype,"navigation",
void 0),f([d.property()],a.prototype,"view",null),a=f([d.subclass("esri.views.2d.navigation.ZoomBox")],a)})},"esri/layers/FeatureLayer":function(){define("require dojo/_base/lang dojo/io-query ../Graphic ../PopupTemplate ../request ../core/kebabDictionary ../core/MultiOriginJSONSupport ../core/Collection ../core/Error ../core/Logger ../core/lang ../core/HandleRegistry ../core/promiseUtils ../core/requireUtils ../core/urlUtils ../geometry/Extent ../geometry/SpatialReference ../geometry/support/normalizeUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/support/jsonUtils ../symbols/support/ElevationInfo ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/support/arcadeUtils ../renderers/support/jsonUtils ../renderers/support/styleUtils ../tasks/support/FeatureSet ../tasks/support/Query ./Layer ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./mixins/ArcGISService ./graphics/sources/MemorySource ./support/Field ./support/fieldUtils ./support/FeatureType ./support/FeatureTemplate ./support/LabelClass ./support/labelingInfo ./support/arcgisLayerUrl ./support/commonProperties".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p,u,k,x,B,y,z,A,D,F,C,H,I,M,Q,K,G,N,S,J,W,L,P,Y,ba,V,X,ca,Z){n=n({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});var ia=g.getLogger("esri.layers.FeatureLayer");g=function(a,b){a=M.fromJSON(b.featureSet);return new W({layer:this,items:a&&a.features||[]})};var fa=K.createSubclass([G,N,S,J,e],{declaredClass:"esri.layers.FeatureLayer",viewModulePaths:{"2d":"../views/2d/layers/FeatureLayerView2D",
"3d":"../views/3d/layers/FeatureLayerView3D"},constructor:function(){this._handles=new t},normalizeCtorArgs:function(a,b){return"string"==typeof a?h.mixin({},{url:a},b):a},load:function(){var a;a=this.source&&(Array.isArray(this.source)||this.source.isInstanceOf&&this.source.isInstanceOf(l));a=this.portalItem&&a?w.resolve():this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]}).always(function(){return this.url&&null==this.layerId&&/FeatureServer\/*$/i.test(this.url)?this._fetchFirstLayerId().then(function(a){null!=
a&&(this.layerId=a)}.bind(this)):void 0}.bind(this)).then(function(){if(!this.url&&!this._hasMemorySource())throw new b("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.createGraphicsSource().then(this._initLayerProperties.bind(this))}.bind(this));this.addResolvingPromise(a)},_handles:null,properties:{advancedQueryCapabilities:{json:{origins:{service:{read:{source:["advancedQueryCapabilities","supportsStatistics","supportsAdvancedQueries"],
reader:function(a,b){return this._readAdvancedQueryCapabilities(b)}}}},read:{source:["layerDefinition.supportsAdvancedQueries","layerDefinition.supportsStatistics"],reader:function(a,b){return this._readAdvancedQueryCapabilities(b.layerDefinition)}}}},featureReduction:{json:{origins:{webScene:{read:{source:"layerDefinition.featureReduction"},write:{target:"layerDefinition.featureReduction"}}}}},allowGeometryUpdates:{json:{origins:{service:{read:{reader:function(a){return this._readAllowGeometryUpdates(a)}}}},
read:{source:"layerDefinition.allowGeometryUpdates",reader:function(a){return this._readAllowGeometryUpdates(a)}}}},allRenderers:{readOnly:!0,dependsOn:["loaded","renderer","fields"],get:function(){return this._getAllRenderers(this.renderer)}},capabilities:{json:{origins:{service:{read:{source:"advancedQueryCapabilities supportsStatistics supportsAdvancedQueries hasAttachments hasM hasZ supportsCalculate supportsTruncate supportsValidateSql supportsCoordinatesQuantization useStandardizedQueries ownershipBasedAccessControlForFeatures allowGeometryUpdates supportsApplyEditsWithGlobalIds supportsRollbackOnFailureParameter allowUpdateWithoutMValues supportsAttachmentsByUploadId".split(" "),
reader:function(a,b){return this._readCapabilities(a,b)}}}},read:{source:"layerDefinition.capabilities layerDefinition.advancedQueryCapabilities layerDefinition.supportsStatistics layerDefinition.supportsAdvancedQueries layerDefinition.hasAttachments layerDefinition.hasM layerDefinition.hasZ layerDefinition.supportsCalculate layerDefinition.supportsTruncate layerDefinition.supportsValidateSql layerDefinition.supportsCoordinatesQuantization layerDefinition.useStandardizedQueries layerDefinition.ownershipBasedAccessControlForFeatures layerDefinition.allowGeometryUpdates layerDefinition.supportsApplyEditsWithGlobalIds layerDefinition.supportsRollbackOnFailureParameter layerDefinition.allowUpdateWithoutMValues layerDefinition.supportsAttachmentsByUploadId".split(" "),
reader:function(a,b){return this._readCapabilities(b.layerDefinition.capabilities,b.layerDefinition)}}},dependsOn:["loaded"],get:function(){var a=this._get("capabilities");return!a&&this.loaded&&this._hasMemorySource()&&(a={data:{supportsAttachment:!1,supportsM:!1,supportsZ:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!0,supportsDelete:!0,supportsEditing:!0,supportsQuery:!0,supportsUpdate:!0},query:{supportsStatistics:!1,supportsCentroid:!1,supportsDistance:!1,
supportsDistinct:!1,supportsExtent:!0,supportsGeometryProperties:!1,supportsOrderBy:!1,supportsPagination:!1,supportsQuantization:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsQueryByOthers:!1},queryRelated:{supportsPagination:!1,supportsCount:!1,supportsOrderBy:!1},editing:{supportsGeometryUpdate:!0,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,
supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}),a}},copyright:{value:null,json:{origins:{service:{read:{source:"copyrightText"}}},read:{source:"layerDefinition.copyrightText"}}},displayField:{value:null,json:{origins:{service:{read:{source:"displayField"}}},read:{source:"layerDefinition.displayField"}}},definitionExpression:{value:null,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}},defaultSymbol:{json:{read:z.read}},
elevationInfo:{type:A,value:null,json:{origins:{service:{read:{source:"elevationInfo"},write:{target:"elevationInfo",enabled:!1}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}},fields:{value:null,type:[L],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.fields"}}},fullExtent:{value:null,type:p,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}},gdbVersion:null,generalizeForScale:4E3,geometryType:{json:{origins:{service:{read:n.fromJSON}},
read:{source:"layerDefinition.geometryType",reader:n.fromJSON}}},hasAttachments:{value:!1,readOnly:!0,get:function(){return!this._hasMemorySource()&&this._get("hasAttachments")},json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasAttachments"}}},hasM:{value:!1,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}},hasZ:{value:!1,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}},id:{json:{origins:{service:{read:!1},portalItem:{read:!1}}}},isTable:{value:!1,
readOnly:!0,json:{origins:{service:{read:{source:"type",reader:function(a){return"Table"===a}}}},read:{source:"layerDefinition.type",reader:function(a){return"Table"===a}}}},labelsVisible:{value:!1,json:{read:{source:["showLabels"],reader:function(a,b){return!!b.showLabels}},write:function(a,b){b.showLabels=!!a}}},labelingInfo:{value:null,type:[V],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:X.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",
reader:X.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}},layerId:{json:{origins:{service:{read:{source:["id"],reader:function(a,b){return b.id}}}},read:!1}},legendEnabled:{value:!0,json:{read:{source:["showLegend"],reader:function(a,b){return null!=b.showLegend?b.showLegend:!0}},write:function(a,b){b.showLegend=!!a}}},maxRecordCount:{value:null,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.maxRecordCount"}}},minScale:{json:{origins:{service:{read:{source:["minScale",
"effectiveMinScale"],reader:function(a,b){return b.effectiveMinScale||a}},write:{target:["minScale"],enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},maxScale:{json:{origins:{service:{read:{source:["maxScale","effectiveMaxScale"],reader:function(a,b){return b.effectiveMaxScale||a}},write:{target:"maxScale",enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},objectIdField:{json:{origins:{service:{read:{source:["objectIdField",
"fields"],reader:function(a,b){return this._readObjectIdField(b)}}}},read:{source:["layerDefinition.objectIdField","layerDefinition.fields"],reader:function(a,b){return this._readObjectIdField(b.layerDefinition)}}}},operationalLayerType:"ArcGISFeatureLayer",outFields:{value:null,dependsOn:["requiredFields"],get:function(){var a=this._get("outFields"),b=this.requiredFields;return a?-1===a.indexOf("*")&&b.forEach(function(b){-1===a.indexOf(b)&&a.push(b)}):a=b,this.loaded&&(a=a.filter(function(a){return"*"===
a||!!this.getField(a)},this),a=a.map(function(a){return"*"===a?a:this.getField(a).name},this)),a},set:function(a){var b=this.requiredFields;a?-1===a.indexOf("*")&&b.forEach(function(b){-1===a.indexOf(b)&&a.push(b)}):a=b;this.loaded&&(a=a.filter(function(a){return"*"===a||!!this.getField(a)},this),a=a.map(function(a){return"*"===a?a:this.getField(a).name},this));this._set("outFields",a)}},parsedUrl:{dependsOn:["layerId"],get:function(){var a=this.url?r.urlToObject(this.url):null;return null!=this.layerId&&
null!=a&&(a.path=r.join(a.path,this.layerId.toString())),a}},popupEnabled:{value:!0,json:{read:{source:["disablePopup"],reader:function(a,b){return null!=b.disablePopup?!b.disablePopup:!0}},write:function(a,b){a||(b.disablePopup=!0)}}},popupTemplate:{value:null,type:d,json:{read:{source:["popupInfo"],reader:function(a,b){return b.popupInfo?d.fromJSON(b.popupInfo):null}},write:function(a,b){a&&(b.popupInfo=a.toJSON())}}},relationships:null,renderer:{set:function(a){var b=this._getAllRenderers(a);P.fixRendererFields(b,
this.fields);this._set("renderer",a)},json:{origins:{service:{read:{source:["drawingInfo.renderer","defaultSymbol","type"],reader:function(a,b,c){return this._readRenderer(null,b,c)}},write:{target:"drawingInfo.renderer",enabled:!1}}},read:{source:["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol","layerDefinition.type"],reader:function(a,b,c){return this._readRenderer(null,b.layerDefinition,c)}},write:{target:"layerDefinition.drawingInfo.renderer"}}},requiredFields:{dependsOn:["allRenderers"],
get:function(){var a=this.timeInfo,b=[this.objectIdField,this.typeIdField,this.editFieldsInfo&&this.editFieldsInfo.creatorField,a&&a.startTimeField,a&&a.endTimeField,this.trackIdField],c=P.rendererFields,d=[];return this.allRenderers.forEach(function(a){c.forEach(function(c){b.push(h.getObject(c,!1,a))});a.valueExpression&&(d=d.concat(C.extractFieldNames(a.valueExpression)));a.visualVariables&&a.visualVariables.forEach(function(a){P.visualVariableFields.forEach(function(c){b.push(a[c])});a.valueExpression&&
(d=d.concat(C.extractFieldNames(a.valueExpression)))},this)},this),b=b.concat(d),b=b.concat(this.dataAttributes),b.filter(function(a,b,c){return!!a&&c.indexOf(a)===b&&"function"!=typeof a})}},returnM:!1,returnZ:!1,screenSizePerspectiveEnabled:Z.screenSizePerspectiveEnabled,source:{json:{origins:{portalItem:{read:{source:["featureSet"],reader:g}},webMap:{read:{source:["featureSet"],reader:g}}}},cast:function(a){return a&&(Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(l))?new W({layer:this,items:a}):
a},set:function(a){var b=this._get("source");b!==a&&(b&&b.isInstanceOf&&b.isInstanceOf(W)&&this._resetMemorySource(b),a&&a.isInstanceOf&&a.isInstanceOf(W)&&this._initMemorySource(a),this._set("source",a))}},supportsCoordinatesQuantization:!1,serviceDefinitionExpression:{json:{origins:{service:{read:{source:["definitionExpression"],reader:function(a,b){return b.definitionExpression}}}}}},spatialReference:{json:{origins:{service:{read:{source:"extent",reader:function(a){return a&&a.spatialReference?
u.fromJSON(a.spatialReference):void 0}}}},read:{source:"layerDefinition.extent",reader:function(a){return a&&a.spatialReference?u.fromJSON(a.spatialReference):void 0}}}},templates:{type:[ba],json:{read:function(a,b){var c=b.editFieldsInfo;b=c&&c.creatorField;c=c&&c.editorField;return a=a&&a.map(function(a){return ba.fromJSON(a)}),this._fixTemplates(a,b),this._fixTemplates(a,c),a}}},title:{json:{origins:{portalItem:{read:{source:["layerDefinition.title","layerDefinition.name","title"],reader:function(a,
b){a=b.layerDefinition&&b.layerDefinition.name;b=b.title||b.layerDefinition&&b.layerDefinition.title;return a?this._readTitleFromName(a):"item-title"===this.sublayerTitleMode&&b?b:void 0}}},service:{read:{source:"name",reader:function(a,b){return this._readTitleFromName(a)}}}}}},sublayerTitleMode:{type:String,value:"item-title"},trackIdField:{json:{read:{source:["timeInfo.trackIdField"],reader:function(a,b){return b.timeInfo.trackIdField}}}},type:{value:"feature",json:{read:!1}},typeIdField:{json:{origins:{service:{read:function(a,
b){return this._readTypeIdField(a,b)}}},read:{source:"layerDefinition.typeIdField",reader:function(a,b){return this._readTypeIdField(a,b.layerDefinition)}}}},types:{json:{origins:{service:{read:function(a,b){return this._readTypes(a,b)}}},read:{source:"layerDefinition.types",reader:function(a,b){return this._readTypes(a,b.layerDefinition)}}}},url:{set:function(a){var b=r.urlToObject(a),c=ca.parse(b.path);c&&null!=c.sublayer&&(null==this.layerId&&(this.layerId=c.sublayer),b=m.objectToQuery(b.query),
a=c.url.path,b&&(a=a+"?"+b));this._set("url",a)},json:{write:function(a,b){(a&&r.isProtocolRelative(a)&&(a="https:"+a),a&&(a=r.normalize(a),b.url=a),null!=this.layerId)&&(a=r.urlToObject(a))&&(b.url=r.join(a.path,""+this.layerId),a.query&&Object.keys(a.query)&&(b.url+="?"+m.objectToQuery(a.query)))}}},userIsAdmin:!1,version:{json:{origins:{service:{read:{source:"currentVersion capabilities drawingInfo hasAttachments htmlPopupType relationships timeInfo typeIdField types".split(" "),reader:function(a,
b){return this._readVersion(b)}}},portalItem:{read:!1}},read:{source:"layerDefinition.currentVersion layerDefinition.capabilities layerDefinition.drawingInfo layerDefinition.hasAttachments layerDefinition.htmlPopupType layerDefinition.typeIdField layerDefinition.types".split(" "),reader:function(a,b){return this._readVersion(b.layerDefinition)}}}},visible:{json:{origins:{portalItem:{read:{source:["visibility","layerDefinition.defaultVisibility"],reader:function(a,b){return b.layerDefinition&&null!=
b.layerDefinition.defaultVisibility?!!b.layerDefinition.defaultVisibility:null!=b.visibility?!!b.visibility:void 0}},write:{target:"layerDefinition.defaultVisibility"}}}}}},applyEdits:function(a){return this.load().then(function(){return this.source.applyEdits?this._processApplyEditsParams(a).then(function(a){return this.source.applyEdits(a).then(function(a){var b=function(a){return a.filter(function(a){return!a.error}).map(function(a){return q.clone(a)})},b={addedFeatures:b(a.addFeatureResults),
updatedFeatures:b(a.updateFeatureResults),deletedFeatures:b(a.deleteFeatureResults)};return(b.addedFeatures.length||b.updatedFeatures.length||b.deletedFeatures.length)&&this.emit("edits",b),a}.bind(this))}.bind(this)):w.reject(new b("FeatureLayer","Layer source does not support applyEdits capability"))}.bind(this))},createGraphicsSource:function(){return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),w.resolve(this.source)):v.when(a,"./graphics/sources/FeatureLayerSource").then(function(a){return new a({layer:this})}.bind(this)).then(function(a){return this.emit("graphics-source-create",
{graphicsSource:a}),a}.bind(this))},createGraphicsController:function(b){var c,d=b.layerView,e=l.ofType(f),g=this.source,k=g&&g.isInstanceOf&&g.isInstanceOf(l),m=h.mixin(b.options||{},{layer:this,layerView:d,graphics:k?g:new e});return c=k?"./graphics/controllers/MemoryController":"2d"===d.view.type?"./graphics/controllers/AutoController2D":"./graphics/controllers/SnapshotController",v.when(a,c).then(function(a){return new a(m)}.bind(this)).then(function(a){return this.emit("graphics-controller-create",
{graphicsController:a}),a}.bind(this))},createQuery:function(){var a=new Q,b=this.get("capabilities.data");return a.returnGeometry=!0,a.returnZ=b&&b.supportsZ&&this.returnZ||null,a.returnM=b&&b.supportsM&&this.returnM||null,a.outFields=this.outFields,a.where=this.definitionExpression||"1\x3d1",a.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,a},getFieldDomain:function(a,b){var c,d;b=(b=b&&b.feature)&&b.attributes;var e=this.typeIdField&&b&&b[this.typeIdField];return null!=e&&
this.types&&this.types.some(function(b){return b.id==e?(c=b.domains&&b.domains[a],c&&"inherited"===c.type&&(c=this._getLayerDomain(a),d=!0),!0):!1},this),d||c||(c=this._getLayerDomain(a)),c},getField:function(a,b){return P.getField(a,b||this.fields)},graphicChanged:function(a){this.emit("graphic-update",a)},queryFeatures:function(a){var c=this;return this.load().then(function(){return a=a||c.createQuery(),c.source.queryFeatures?c.source.queryFeatures(a):w.reject(new b("FeatureLayer","Layer source does not support queryFeatures capability"))}).then(function(b){if(a.returnJSON)return b;
if(b&&b.features){var d=c.popupTemplate;b.features.forEach(function(a){a.popupTemplate=d;a.layer=c})}return b})},queryObjectIds:function(a){var c=this;return this.load().then(function(){return a=a||c.createQuery(),c.source.queryObjectIds?c.source.queryObjectIds(a):w.reject(new b("FeatureLayer","Layer source does not support queryObjectIds capability"))})},queryFeatureCount:function(a){var c=this;return this.load().then(function(){return a=a||c.createQuery(),c.source.queryFeatureCount?c.source.queryFeatureCount(a):
w.reject(new b("FeatureLayer","Layer source does not support queryFeatureCount capability"))})},queryExtent:function(a){var c=this;return this.load().then(function(){return a=a||c.createQuery(),c.source.queryExtent?c.source.queryExtent(a):w.reject(new b("FeatureLayer","Layer source does not support queryExtent capability"))})},read:function(a,b){switch(b&&b.origin){case "web-map":this.inherited(arguments,[{outFields:["*"]},b]);break;case "web-scene":this.inherited(arguments,[{mode:fa.MODE_SNAPSHOT,
returnZ:!0,outFields:["*"]},b])}var c=a.featureCollection;if(c){var d=c.layers;d&&1===d.length&&(this.inherited(arguments,[d[0],b]),null!=c.showLegend&&this.inherited(arguments,[{showLegend:c.showLegend},b]))}return this.inherited(arguments,[a,b]),this},write:function(a,c){if(c&&"web-scene"===c.origin&&c.messages){if(!this.url)return c.messages.push(new b("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to web scenes",
{layer:this})),null;if(this.isTable)return c.messages.push(new b("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes",{layer:this})),null}return this.inherited(arguments)},_getLayerDomain:function(a){var b;return this.fields&&this.fields.some(function(c){return c.name===a&&(b=c.domain),!!b}),b},_fetchFirstLayerId:function(){return c(this.url,{query:{f:"json"},callbackParamName:"callback",responseType:"json"}).then(function(a){return a.data&&
Array.isArray(a.data.layers)&&0<a.data.layers.length?a.data.layers[0].id:void 0})},_initLayerProperties:function(a){return this.source||(this.source=a),a.url&&(this.url=a.url),a.layerDefinition&&this.read(a.layerDefinition,{origin:"service",url:this.parsedUrl}),this._verifySource(),this._verifyFields(),this._addSymbolUrlTokens(),P.fixRendererFields(this._getAllRenderers(this.renderer),this.fields),this.watch("token",function(){this._addSymbolUrlTokens()}.bind(this)),I.loadStyleRenderer(this,{origin:"service"})},
_findUrlBasedSymbols:function(){var a=this.renderer;if(!a)return[];var b=[];a.symbol&&b.push(a.symbol);a.defaultSymbol&&b.push(a.defaultSymbol);a=a.classBreakInfos||a.uniqueValueInfos;return a&&a.forEach(function(a){a.symbol&&b.push(a.symbol)}),b.filter(function(a){return!!a.url})},_addSymbolUrlTokens:function(){var a=this.token;!this._hasMemorySource()&&a&&this._findUrlBasedSymbols().forEach(function(b){var c=b.url;if(c&&-1!==c.search(/https?\:/i)&&!/[?&]token=/.test(c)){var d=-1===c.indexOf("?")?
"?":"\x26";b.url=c+d+"token\x3d"+a}})},_getAllRenderers:function(a){var b=[];a&&[a,a.trackRenderer,a.observationRenderer,a.latestObservationRenderer].forEach(function(a){a&&(b.push(a),a.rendererInfos&&a.rendererInfos.forEach(function(a){a.renderer&&b.push(a.renderer)}))});return b},_verifyFields:function(){var a=this.parsedUrl&&this.parsedUrl.path||"undefined";this.isTable||this._hasMemorySource()||-1!==a.search(/\/FeatureServer\//i)||this.fields&&this.fields.some(function(a){return"geometry"===a.type})},
_fixTemplates:function(a,b){a&&a.forEach(function(a){(a=a.prototype&&a.prototype.attributes)&&b&&delete a[b]})},_verifySource:function(){if(this._hasMemorySource()){if(this.url)throw new b("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url");var a=["geometryType","fields","objectIdField"];if(!a.every(function(a){return this.hasOwnProperty(a)},this))throw new b("feature-layer:missing-property","FeatureLayer created as feature collection requires properties: "+
a.join(),{requiredProperties:a});}else{if(this.isTable)throw new b("feature-layer:source-type-not-supported","The table feature service type is not yet supported",{sourceType:"Table"});if(!this.url)throw new b("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source");}},_initMemorySource:function(a){a.forEach(function(a){a.layer=this}.bind(this));this._handles.add([a.on("after-add",function(a){a.item.layer=this}.bind(this)),a.on("after-remove",function(a){a.item.layer=
null}.bind(this))],"fl-source")},_resetMemorySource:function(a){a.forEach(function(a){a.layer=null}.bind(this));this._handles.remove("fl-source")},_hasMemorySource:function(){return!(this.url||!this.source)},_readTitleFromName:function(a){var b=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?ca.titleFromUrlAndName(this.url,a):a;if(a=a||this.url&&ca.parse(this.url).title)return"item-title-and-service-name"===this.sublayerTitleMode&&b&&(a=b+" - "+a),ca.cleanTitle(a)},
_readAdvancedQueryCapabilities:function(a){return a.advancedQueryCapabilities||{supportsPagination:!1,supportsQueryWithDistance:!1,supportsReturningQueryExtent:!1,supportsStatistics:a.supportsStatistics,supportsOrderBy:a.supportsAdvancedQueries,supportsDistinct:a.supportsAdvancedQueries}},_readAllowGeometryUpdates:function(a){return null==a?!0:a},_readCapabilities:function(a,b){return{data:this._readDataCapabilities(b),operations:this._readOperationsCapabilities(a,b),query:this._readQueryCapabilities(b),
queryRelated:this._readQueryRelatedCapabilities(b),editing:this._readEditingCapabilities(b)}},_readBoolean:function(a,b,c){return!(a&&a.hasOwnProperty(b)?!a[b]:!c)},_readDataCapabilities:function(a){return{supportsAttachment:this._readBoolean(a,"hasAttachments",!1),supportsM:this._readBoolean(a,"hasM",!1),supportsZ:this._readBoolean(a,"hasZ",!1)}},_readOperationsCapabilities:function(a,b){a=a?a.toLowerCase().split(",").map(function(a){return a.trim()}):[];var c=-1!==a.indexOf("editing"),d=c&&-1!==
a.indexOf("create"),e=c&&-1!==a.indexOf("delete"),f=c&&-1!==a.indexOf("update");return c&&!(d||e||f)&&(d=e=f=!0),{supportsCalculate:this._readBoolean(b,"supportsCalculate",!1),supportsTruncate:this._readBoolean(b,"supportsTruncate",!1),supportsValidateSql:this._readBoolean(b,"supportsValidateSql",!1),supportsAdd:d,supportsDelete:e,supportsEditing:c,supportsQuery:-1!==a.indexOf("query"),supportsUpdate:f}},_readQueryCapabilities:function(a){var b=a.advancedQueryCapabilities,c=a.ownershipBasedAccessControlForFeatures;
return{supportsStatistics:this._readBoolean(b,"supportsStatistics",a.supportsStatistics),supportsCentroid:this._readBoolean(b,"supportsReturningGeometryCentroid",!1),supportsDistance:this._readBoolean(b,"supportsQueryWithDistance",!1),supportsDistinct:this._readBoolean(b,"supportsDistinct",a.supportsAdvancedQueries),supportsExtent:this._readBoolean(b,"supportsReturningQueryExtent",!1),supportsGeometryProperties:this._readBoolean(b,"supportsReturningGeometryProperties",!1),supportsOrderBy:this._readBoolean(b,
"supportsOrderBy",a.supportsAdvancedQueries),supportsPagination:this._readBoolean(b,"supportsPagination",!1),supportsQuantization:this._readBoolean(a,"supportsCoordinatesQuantization",!1),supportsResultType:this._readBoolean(b,"supportsQueryWithResultType",!1),supportsSqlExpression:this._readBoolean(b,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:this._readBoolean(a,"useStandardizedQueries",!1),supportsQueryByOthers:this._readBoolean(c,"allowOthersToQuery",!0)}},_readQueryRelatedCapabilities:function(a){a=
a.advancedQueryCapabilities;var b=this._readBoolean(a,"supportsAdvancedQueryRelated",!1);return{supportsPagination:this._readBoolean(a,"supportsQueryRelatedPagination",!1),supportsCount:b,supportsOrderBy:b}},_readEditingCapabilities:function(a){var b=a.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:this._readBoolean(a,"allowGeometryUpdates",!0),supportsGlobalId:this._readBoolean(a,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:this._readBoolean(a,"supportsRollbackOnFailureParameter",
!1),supportsUpdateWithoutM:this._readBoolean(a,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:this._readBoolean(a,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:this._readBoolean(b,"allowAnonymousToDelete",!0),supportsDeleteByOthers:this._readBoolean(b,"allowOthersToDelete",!0),supportsUpdateByAnonymous:this._readBoolean(b,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:this._readBoolean(b,"allowOthersToUpdate",!0)}},_readObjectIdField:function(a){if(a.objectIdField)return a.objectIdField;
if(a.fields)for(var b=0;b<a.fields.length;b++){var c=a.fields[b];if("esriFieldTypeOID"===c.type)return c.name}},_readRenderer:function(a,b,c){var d;if(a=b.drawingInfo&&b.drawingInfo.renderer||void 0)(a=H.read(a,b,c)||void 0)||ia.error("Failed to create renderer",{rendererDefinition:b.drawingInfo.renderer,layer:this,context:c});else if(b.defaultSymbol)z.read(b.defaultSymbol,b,c),b.types&&b.types.length?(a=new F({defaultSymbol:d,field:b.typeIdField}),b.types.forEach(function(b){a.addUniqueValueInfo(b.id,
z.read(b.symbol,b,c))})):a=new D({symbol:d});else if("Table"!==b.type){switch(b.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":d=new x;break;case "esriGeometryPolyline":d=new B;break;case "esriGeometryPolygon":d=new y}a=d&&new D({symbol:d})}return a},_readTypeIdField:function(a,b){a&&(b=this.getField(a,b.fields))&&(a=b.name);return a},_readTypes:function(a,b){var c=(b=b.editFieldsInfo)&&b.creatorField,d=b&&b.editorField;return a&&a.map(function(a){return a=new Y(a),this._fixTemplates(a.templates,
c),this._fixTemplates(a.templates,d),a},this)},_readVersion:function(a){return a.currentVersion?a.currentVersion:a.hasOwnProperty("capabilities")||a.hasOwnProperty("drawingInfo")||a.hasOwnProperty("hasAttachments")||a.hasOwnProperty("htmlPopupType")||a.hasOwnProperty("relationships")||a.hasOwnProperty("timeInfo")||a.hasOwnProperty("typeIdField")||a.hasOwnProperty("types")?10:9.3},_processApplyEditsParams:function(a){if(!a)return w.reject(new b("feature-layer:missing-parameters","'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required"));
if(a=h.mixin({},a),a.addFeatures=a.addFeatures||[],a.updateFeatures=a.updateFeatures||[],a.deleteFeatures=a.deleteFeatures||[],a.addFeatures.length||a.updateFeatures.length||a.deleteFeatures.length){var c=function(a){var b=new f;return b.geometry=a.geometry,b.attributes=a.attributes,b};return a.addFeatures=a.addFeatures.map(c),a.updateFeatures=a.updateFeatures.map(c),this._normalizeGeometries(a).then(function(a){return w.resolve(a)})}return w.reject(new b("feature-layer:missing-parameters","'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required"))},
_normalizeGeometries:function(a){var b=a.addFeatures,c=a.updateFeatures,d=b.concat(c).map(function(a){return a.geometry});return k.normalizeCentralMeridian(d).then(function(d){var e=b.length,f=c.length;return d.slice(0,e).forEach(function(b,c){a.addFeatures[c].geometry=b}),d.slice(e,e+f).forEach(function(b,c){a.updateFeatures[c].geometry=b}),a})}});return fa})},"esri/renderers/SimpleRenderer":function(){define(["../core/declare","../core/lang","../symbols/support/jsonUtils","./Renderer"],function(a,
h,m,f){var d=a(f,{declaredClass:"esri.renderers.SimpleRenderer",properties:{description:{value:null,json:{write:!0}},label:{value:null,json:{write:!0}},symbol:{value:null,json:{read:m.read,write:function(a,d,e,f){d.symbol=m.write(a,{},f)}}},type:"simple"},getSymbol:function(a,d){return this.symbol},clone:function(){return new d({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:h.clone(this.visualVariables),authoringInfo:h.clone(this.authoringInfo)})}});
return d})},"esri/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang ../core/Error dojo/_base/lang ../Color ./support/utils ./support/arcadeUtils".split(" "),function(a,h,m,f,d,c,n,e,l,b,g){var q=f({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),t=f({widthAndDepth:"width-and-depth"}),w=f({classedSize:"classed-size",classedColor:"classed-color",univariateColorSize:"univariate-color-size"}),
v=f({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),r=f({percentTotal:"percent-of-total"}),p=Math.PI;return a([h,m],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{value:null,json:{read:function(a,b){return a&&(a=c.clone(a),a.type&&(a.type=w.fromJSON(a.type)),a.classificationMethod&&(a.classificationMethod=v.fromJSON(a.classificationMethod)),
a.visualVariables&&a.visualVariables.forEach(function(a){a.type&&(a.type=q.fromJSON(a.type));a.style&&(a.style=r.fromJSON(a.style))})),a},write:function(a,b){a&&(a=c.clone(a),a.type&&(a.type=w.toJSON(a.type)),a.classificationMethod&&(a.classificationMethod=v.toJSON(a.classificationMethod)),a.visualVariables&&a.visualVariables.forEach(function(a){a.type&&(a.type=q.toJSON(a.type));a.style&&(a.style=r.toJSON(a.style))}));b.authoringInfo=a}}},requiredFields:{dependsOn:["visualVariables"],get:function(){var a=
Object.create(null);return this.collectRequiredFields(a),Object.keys(a)}},type:{readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables","rotationType","rotationExpression"],reader:function(a,b){return this._readVariables(a,b)}},write:function(a,b,c,d){var e=[];a.forEach(function(a,b){"size"===a.type?e.push(this._writeSizeInfo(a,d,b)):"color"===a.type?e.push(this._writeColorInfo(a,d,b)):"opacity"===a.type?e.push(this._writeOpacityInfo(a,d,b)):"rotation"===
a.type&&e.push(this._writeRotationInfo(a,d,b))},this);b.visualVariables=e}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,_visualVariablesSetter:function(a){var b=this._cache;this.visualVariables&&this.visualVariables.forEach(function(a,c){b.hasOwnProperty(c)&&(b[c]=null)},this);a&&a.some(function(a){return!!a.target})&&a.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});a&&a.forEach(function(a,c){"color"===
a.type?b[c]=this._processColorInfo(a):"opacity"===a.type?b[c]=this._processOpacityInfo(a):"size"===a.type?b[c]=this._processSizeInfo(a):"rotation"===a.type&&(b[c]=this._processRotationInfo(a))},this);this._set("visualVariables",a)},getSymbol:function(a,b){},getVisualVariableValues:function(a,b){var c,d=this.visualVariables;return d&&(c=d.map(function(c){var d,f=c.type,g=f+"Info";switch(b=e.mixin({},b),b[g]=c,f){case "size":d=this.getSize(a,b);break;case "color":d=this.getColor(a,b);break;case "opacity":d=
this.getOpacity(a,b);break;case "rotation":d=this.getRotationAngle(a,b)}return{variable:c,value:d}},this).filter(function(a){return null!=a.value},this)),c},hasVisualVariables:function(a,b){return a?!!this.getVisualVariablesForType(a,b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))},getVisualVariablesForType:function(a,b){var c,d=this.visualVariables;return d&&(c=d.filter(function(c){return c.type===
a&&("string"==typeof b?c.target===b:!1===b?!c.target:!0)}),c&&0===c.length&&(c=void 0)),c},getSize:function(a,b){var c=this._getVarInfo(b&&b.sizeInfo,"size"),d=c.variable,c=this._cache[c.cacheKey],e=null;if(d)var f=d.minSize,e=d.maxSize,f="object"==typeof f&&f?this._getSize(a,f,c&&c.minSize,b):f,e="object"==typeof e&&e?this._getSize(a,e,c&&c.maxSize,b):e,e=this._getSize(a,d,c&&c.root,b,[f,e]);return e},getSizeRangeAtScale:function(a,b){var c,d=this._getVarInfo(a,"size"),e=this._cache[d.cacheKey],
f={scale:b};if(a=d.variable,a&&b)if(b=a.minSize,a=a.maxSize,b="object"==typeof b&&b?this._getSize({},b,e&&e.minSize,f):b,e="object"==typeof a&&a?this._getSize({},a,e&&e.maxSize,f):a,null!=b||null!=e)b>e&&(b=e=b),c={minSize:b,maxSize:e};return c},getColor:function(a,b){var c=this._getVarInfo(b&&b.colorInfo,"color");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],b)},getOpacity:function(a,b){var c=this._getVarInfo(b&&b.opacityInfo,"opacity");return this._getColorComponent(a,c.variable,
this._cache[c.cacheKey],b,!0)},getRotationAngle:function(a,b){var c=this._getVarInfo(b&&b.rotationInfo,"rotation"),d=c.variable,f=this._cache[c.cacheKey],h=d.axis||"heading",c="heading"===h&&"arithmetic"===d.rotationType?90:0,h="heading"===h&&"arithmetic"===d.rotationType?-1:1,d=d.field,f=f&&f.compiledFunc,k=a.attributes,l=0;return(d||f)&&(f?l=g.executeFunction(f,g.createExecContext(a,g.getViewInfo(b))):e.isFunction(d)?l=d.apply(this,arguments):k&&(l=k[d]||0),l="number"!=typeof l||isNaN(l)?null:c+
h*l),l},collectRequiredFields:function(a){var b=[];this.visualVariables&&(b=b.concat(this.visualVariables));b.forEach(function(b){b&&b.field&&(a[b.field]=!0);b&&b.normalizationField&&(a[b.normalizationField]=!0)})},_getVarInfo:function(a,b){var c;a&&a.type===b&&this.visualVariables?(c=this.visualVariables.indexOf(a),a=this.visualVariables[c]):this.visualVariables&&(a=(a=this.getVisualVariablesForType(b))&&a[0],c=this.visualVariables.indexOf(a));return{variable:a,cacheKey:c}},_readSizeInfo:function(a){return a.axis&&
(a.axis=t.fromJSON(a.axis)),a},_readColorInfo:function(a){return a&&(a.colors&&a.colors.forEach(function(b,c){e.isArray(b)?a.colors[c]=l.fromJSON(b):a.colors[c]=new l(b)}),a.stops&&a.stops.forEach(function(b,c){b.color&&e.isArray(b.color)?a.stops[c].color=l.fromJSON(b.color):b.color&&(a.stops[c].color=new l(b.color))})),a},_readOpacityInfo:function(a){var b;return a&&(b=e.mixin({},a),b.transparencyValues&&(b.opacityValues=b.transparencyValues.map(function(a){return 1-a/100}),delete b.transparencyValues),
b.stops&&(b.stops=b.stops.map(function(a){return a=e.mixin({},a),a.opacity=1-a.transparency/100,delete a.transparency,a}))),b},_readVariables:function(a,b){a&&(a=a.map(function(a){return a=c.clone(a),a.type=q.fromJSON(a.type),"size"===a.type?a=this._readSizeInfo(a):"color"===a.type?a=this._readColorInfo(a):"opacity"===a.type&&(a=this._readOpacityInfo(a)),a},this));var d=b.rotationType;if(b=b.rotationExpression)d={type:"rotation",rotationType:d},(b=b.match(this._rotationRE))&&b[1]&&(d.field=b[1],a||
(a=[]),a.push(d));return a},_createCache:function(a){var b=a&&a.valueExpression,c=g.createSyntaxTree(b),c=g.createFunction(c),d=!(!a||!a.expression)||this._viewScaleRE.test(b);return{ipData:this._interpolateData(a),hasExpr:!!b,compiledFunc:c,isScaleDriven:d}},_processColorInfo:function(a){return a&&(a.colors&&a.colors.forEach(function(b,c){b instanceof l||(a.colors[c]=new l(b))}),a.stops&&a.stops.forEach(function(b,c){!b.color||b.color instanceof l||(a.stops[c].color=new l(b.color))}),this._sortStops(a.stops)),
this._createCache(a)},_processOpacityInfo:function(a){return this._sortStops(a&&a.stops),this._createCache(a)},_processSizeInfo:function(a){return a.stops&&Array.isArray(a.stops)?a.stops=this._processSizeInfoStops(a.stops):(a.minSize=a.minSize&&this._processSizeInfoSize(a.minSize),a.maxSize=a.maxSize&&this._processSizeInfoSize(a.maxSize)),{root:this._createCache(a),minSize:this._createCache(a.minSize),maxSize:this._createCache(a.maxSize)}},_processSizeInfoSize:function(a){return"object"==typeof a?
a.stops=this._processSizeInfoStops(a.stops):a=d.toPt(a),a},_processSizeInfoStops:function(a){return a&&Array.isArray(a)&&(a.forEach(function(a){a.size=d.toPt(a.size)}),this._sortStops(a)),a},_sortStops:function(a){a&&Array.isArray(a)&&a.sort(function(a,b){return a.value-b.value})},_processRotationInfo:function(a){return this._createCache(a)},_getSize:function(a,c,d,f,h){var k=a.attributes,l=c.field,m=c.stops,n=0,r=d&&d.hasExpr,q=d&&d.compiledFunc,w=d&&d.ipData,u=d&&d.isScaleDriven,t="number"==typeof a,
v=t?a:null;if(l||u||r){var x,y=f&&f.scale,B=h?h[0]:c.minSize,J=h?h[1]:c.maxSize,W=c.minDataValue,L=c.maxDataValue,P=c.valueUnit||"unknown",Y=c.valueRepresentation,ba=c.scaleBy,V=c.normalizationField,X=k?parseFloat(k[V]):void 0,ca=f&&f.shape;if(u?v=null==y?this._getAverageValue(c):y:"number"!=typeof v&&(r?v=g.executeFunction(q,g.createExecContext(a,g.getViewInfo(f))):e.isFunction(l)?v=l.apply(this,arguments):k&&(v=k[l])),null==v||V&&!t&&(isNaN(X)||0===X))return null;if(isNaN(X)||t||(v/=X),m){var Z,
ia,J=this._lookupData(v,w);x=J[0];B=J[1];x===B?n=m[x].size:(Z=m[x].size,ia=m[B].size,n=Z+(ia-Z)*J[2])}else null!=B&&null!=J&&null!=W&&null!=L?W>=v?n=B:v>=L?n=J:(x=(v-W)/(L-W),"area"===ba&&ca)?(m=(n="circle"===ca)?p*Math.pow(B/2,2):B*B,m+=x*((n?p*Math.pow(J/2,2):J*J)-m),n=n?2*Math.sqrt(m/p):Math.sqrt(m)):n=B+x*(J-B):"unknown"===P?null!=B&&null!=W?(B&&W?(x=v/W,n="circle"===ca?2*Math.sqrt(x*Math.pow(B/2,2)):"square"===ca||"diamond"===ca||"image"===ca?Math.sqrt(x*Math.pow(B,2)):x*B):n=v+(B||W),n=B>n?
B:n,null!=J&&n>J&&(n=J)):n=v:(m=(f&&f.resolution?f.resolution:1)*b.meterIn[P],"area"===Y?(n=Math.sqrt(v/p)/m,n*=2):(n=v/m,("radius"===Y||"distance"===Y)&&(n*=2)),null!=B&&B>n&&(n=B),null!=J&&n>J&&(n=J))}else c&&(n=m&&m[0]&&m[0].size,null==n&&(n=c.minSize));return n=isNaN(n)?0:n},_getAverageValue:function(a){var b,c,d=a.stops;return d?(b=d[0].value,c=d[d.length-1].value):(b=a.minDataValue||0,c=a.maxDataValue||0),(b+c)/2},_getColorComponent:function(a,b,c,d,f,h){var k,l=a.attributes,m=b&&b.field,n=
"number"==typeof a,p=n?a:null,r=c&&c.hasExpr,q=c&&c.compiledFunc,w=c&&c.ipData;if(m||r){var u=b.normalizationField,t=l?parseFloat(l[u]):void 0;"number"!=typeof p&&(r?p=g.executeFunction(q,g.createExecContext(a,g.getViewInfo(d))):e.isFunction(m)?p=m.apply(this,arguments):l&&(p=l[m]));null==p||u&&!n&&(isNaN(t)||0===t)||(isNaN(t)||n||(p/=t),k=f?this._getOpacity(p,b,w):this._getColor(p,b,w))}else b&&(l=b.stops,f?(k=l&&l[0]&&l[0].opacity,null==k&&(k=b.opacityValues&&b.opacityValues[0])):k=l&&l[0]&&l[0].color||
b.colors&&b.colors[0]);return h&&(h.data=p,h.value=k),h||k},_interpolateData:function(a){var b;if(a)if(a.colors||a.opacityValues){var c=(a.colors||a.opacityValues).length,d=a.minDataValue,e=(a.maxDataValue-d)/(c-1);b=[];for(a=0;c>a;a++)b[a]=d+a*e}else a.stops&&(b=a.stops.map(function(a){return a.value}));return b},_getOpacity:function(a,b,c){var d;a=this._lookupData(a,c);if(b=b||this.opacityInfo,a){var e,f;c=a[0];var g=a[1];c===g?d=this._getOpacValue(b,c):(e=this._getOpacValue(b,c),f=this._getOpacValue(b,
g),d=e+(f-e)*a[2])}return d},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity},_getColor:function(a,b,c){var d;a=this._lookupData(a,c);if(b=b||this.colorInfo,a)d=a[0],c=a[1],d=d===c?this._getColorObj(b,d):l.blendColors(this._getColorObj(b,d),this._getColorObj(b,c),a[2]),d=new l(d);return d},_getColorObj:function(a,b){return a.colors?a.colors[b]:a.stops[b].color},_lookupData:function(a,b){var c;if(b){var d=0,e=b.length-1;b.some(function(b,c){return b>a?(e=c,
!0):(d=c,!1)});c=[d,e,(a-b[d])/(b[e]-b[d])]}return c},_processForContext:function(a,b,c){b&&"web-scene"===b.origin?(b.messages&&(a.expression&&b.messages.push(new n("property:unsupported",a.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".expression",context:b})),a.valueExpression&&b.messages.push(new n("property:unsupported",a.type+"VisualVariable.valueExpression is not supported in Web Scene. Please remove this property to save the Web Scene.",
{instance:this,propertyName:c+".valueExpression",context:b})),a.valueExpressionTitle&&b.messages.push(new n("property:unsupported",a.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".valueExpressionTitle",context:b}))),delete a.expression,delete a.valueExpression,delete a.valueExpressionTitle):"size"===a.type&&this._convertExpressionToArcade(a)},_writeRotationInfo:function(a,b,d){return a&&(a=
e.mixin({},a),this._processForContext(a,b,"visualVariables["+d+"]"),a.type=q.toJSON(a.type),a=c.fixJson(a,!0)),a},_convertExpressionToArcade:function(a){a&&a.expression&&(a.valueExpression="$view.scale")},_writeSizeInfo:function(a,b,d){if(a){a=e.mixin({},a);this._processForContext(a,b,"string"==typeof d?d:"visualVariables["+d+"]");var f=a.minSize,g=a.maxSize;f&&(a.minSize="number"==typeof f?f:this._writeSizeInfo(f,b,"visualVariables["+d+"].minSize"));g&&(a.maxSize="number"==typeof g?g:this._writeSizeInfo(g,
b,"visualVariables["+d+"].maxSize"));b=a.legendOptions;d=a.axis;a.type=q.toJSON(a.type);d&&(a.axis=t.toJSON(d));b&&(a.legendOptions=e.mixin({},b),b=b.customValues,b&&(a.legendOptions.customValues=b.slice(0)));a.stops&&(a.stops=a.stops.map(function(a){return a=e.mixin({},a),null===a.label&&delete a.label,a}));a=c.fixJson(a,!0)}return a},_writeColorInfo:function(a,b,d){return a&&(a=e.mixin({},a),this._processForContext(a,b,"visualVariables["+d+"]"),a.type=q.toJSON(a.type),a.colors&&(a.colors=a.colors.map(function(a){return l.toJSON(a)})),
a.stops&&(a.stops=a.stops.map(function(a){return a=e.mixin({},a),a.color&&(a.color=l.toJSON(a.color)),null===a.label&&delete a.label,a})),a.legendOptions&&(a.legendOptions=e.mixin({},a.legendOptions)),a=c.fixJson(a,!0)),a},_writeOpacityInfo:function(a,b,d){var f;return a&&(f=e.mixin({},a),this._processForContext(f,b,"visualVariables["+d+"]"),f.type=q.toJSON(f.type),f.opacityValues&&(f.transparencyValues=f.opacityValues.map(function(a){return 100*(1-a)}),delete f.opacityValues),f.stops&&(f.stops=f.stops.map(function(a){return a=
e.mixin({},a),a.transparency=100*(1-a.opacity),delete a.opacity,null===a.label&&delete a.label,a})),f.legendOptions&&(f.legendOptions=e.mixin({},f.legendOptions)),f=c.fixJson(f,!0)),f}})})},"esri/renderers/support/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/date/locale ../../Color ../../core/numberUtils dojo/i18n!../nls/smartMapping dojo/i18n!dojo/cldr/nls/gregorian".split(" "),function(a,h,m,f,d,c,n){function e(a){return a&&h.map(a,function(a){return new f(a)})}function l(a,b,
c){var d="";return 0===b?d=g.lt+" ":b===c&&(d=g.gt+" "),d+a}var b={},g={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%"},q={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},t={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},
day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},w={formatLength:"short",fullYear:!0},v={formatLength:"short"};return a.mixin(b,{meterIn:{inches:39.3701,feet:3.28084,yards:1.09361,miles:6.21371E-4,"nautical-miles":5.39957E-4,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",
fullYear:!0}},formatDate:function(b,c){var d,e=[];null==b||b instanceof Date||(b=new Date(b));c=c||{};c=a.mixin({},c);var f=c.selector?c.selector.toLowerCase():null,g=!f||-1<f.indexOf("time"),f=!f||-1<f.indexOf("date");return g&&(c.timeOptions=c.timeOptions||v,c.timeOptions&&(c.timeOptions=a.mixin({},c.timeOptions),c.timeOptions.selector=c.timeOptions.selector||"time",e.push(c.timeOptions))),f&&(c.dateOptions=c.dateOptions||w,c.dateOptions&&(c.dateOptions=a.mixin({},c.dateOptions),c.dateOptions.selector=
c.dateOptions.selector||"date",e.push(c.dateOptions))),e&&e.length?(e=h.map(e,function(a){return m.format(b,a)}),d=1==e.length?e[0]:n["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return e[b]})):d=m.format(b),d},createColorStops:function(a){var c=a.values,e=a.colors,f=a.labelIndexes,g=a.isDate,m=a.dateFormatOptions;return h.map(c,function(a,k){var n=null;if(!f||-1<h.indexOf(f,k)){var p;(p=g?b.formatDate(a,m):d.format(a))&&(n=l(p,k,c.length-1))}return{value:a,color:e[k],
label:n}})},updateColorStops:function(a){var c,e=a.stops,f=a.changes,g=a.isDate,m=a.dateFormatOptions,n=[],r=h.map(e,function(a){return a.value});h.forEach(f,function(a){n.push(a.index);r[a.index]=a.value});c=d.round(r,{indexes:n});h.forEach(e,function(a,f){if(a.value=r[f],null!=a.label){var h,k=null;(h=g?b.formatDate(c[f],m):d.format(c[f]))&&(k=l(h,f,e.length-1));a.label=k}})},createClassBreakLabel:function(a){var b=a.minValue,e=a.maxValue,f=a.isFirstBreak?"":g.gt+" ";a="percent-of-total"===a.normalizationType?
g.pct:"";return b=null==b?"":d.format(b),e=null==e?"":d.format(e),f+b+a+" "+c.minToMax+" "+e+a},setLabelsForClassBreaks:function(a){var c=a.classBreaks,e=a.classificationMethod,f=a.normalizationType,g=[];c&&c.length&&("standard-deviation"===e||(a.round?(g.push(c[0].minValue),h.forEach(c,function(a){g.push(a.maxValue)}),g=d.round(g),h.forEach(c,function(a,c){a.label=b.createClassBreakLabel({minValue:0===c?g[0]:g[c],maxValue:g[c+1],isFirstBreak:0===c,normalizationType:f})})):h.forEach(c,function(a,
c){a.label=b.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===c,normalizationType:f})})))},updateClassBreak:function(a){var c,d=a.classBreaks,e=a.normalizationType,f=a.change,g=f.index,f=f.value,h=-1,l=-1,m=d.length;return"standard-deviation"===a.classificationMethod?void 0:(0===g?h=g:g===m?l=g-1:(l=g-1,h=g),-1<h&&m>h&&(c=d[h],c.minValue=f,c.label=b.createClassBreakLabel({minValue:c.minValue,maxValue:c.maxValue,isFirstBreak:0===h,normalizationType:e})),void(-1<l&&m>
l&&(c=d[l],c.maxValue=f,c.label=b.createClassBreakLabel({minValue:c.minValue,maxValue:c.maxValue,isFirstBreak:0===l,normalizationType:e}))))},calculateDateFormatInterval:function(a){var b,c,d,e,f,g,l,m,n,r=a.length,w=1/0;a=h.map(a,function(a){return new Date(a)});for(b=0;r-1>b;b++){d=a[b];f=[];l=1/0;m="";for(c=b+1;r>c;c++)e=a[c],e=d.getFullYear()!==e.getFullYear()&&"year"||d.getMonth()!==e.getMonth()&&"month"||d.getDate()!==e.getDate()&&"day"||d.getHours()!==e.getHours()&&"hour"||d.getMinutes()!==
e.getMinutes()&&"minute"||d.getSeconds()!==e.getSeconds()&&"second"||"millisecond",g=q[e],l>g&&(l=g,m=e),f.push(e);w>l&&(w=l,n=m)}return n},createUniqueValueLabel:function(a){var c=a.value,e=a.fieldInfo,f=a.domain;a=a.dateFormatInterval;var g=String(c),f=f&&f.codedValues?f.getName(c):null;return f?g=f:"number"==typeof c&&(g=e&&"date"===e.type?b.formatDate(c,a&&t[a]):d.format(c)),g},cloneColorVariable:function(b){var c;return b&&(c=a.mixin({},b),c.colors=e(c.colors),c.stops=c.stops&&h.map(c.stops,
function(b){return b=a.mixin({},b),b.color&&(b.color=new f(b.color)),b}),c.legendOptions&&(c.legendOptions=a.mixin({},c.legendOptions))),c},cloneOpacityVariable:function(b){var c;b&&(c=a.mixin({},b),(b=c.opacityValues)&&(c.opacityValues=b.slice(0)),(b=c.stops)&&(c.stops=h.map(b,function(b){return a.mixin({},b)})),(b=c.legendOptions)&&(c.legendOptions=a.mixin({},b)));return c},cloneSizeVariable:function(c){var d;c&&(d=a.mixin({},c),d.stops&&(d.stops=h.map(d.stops,function(b){return a.mixin({},b)})),
(c=d.minSize)&&"object"==typeof c&&(d.minSize=b.cloneSizeVariable(c)),(c=d.maxSize)&&"object"==typeof c&&(d.maxSize=b.cloneSizeVariable(c)),(c=d.legendOptions)&&(d.legendOptions=a.mixin({},c),c=c.customValues,c&&(d.legendOptions.customValues=c.slice(0))));return d}}),b})},"esri/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],function(a,h){function m(a,c){return a-c}var f=/^-?(\d+)(\.(\d+))?$/i,d=new RegExp("\\"+h.decimal+"0+$","g"),c=/(\d)0*$/g,n={numDigits:function(a){var c=
String(a),b=c.match(f);a={integer:0,fractional:0};if(b&&b[1])a.integer=b[1].split("").length,a.fractional=b[3]?b[3].split("").length:0;else if(-1<c.toLowerCase().indexOf("e")){var d,e,b=c.split("e"),c=b[0],b=b[1];c&&b&&(c=Number(c),b=Number(b),e=0<b,e||(b=Math.abs(b)),d=n.numDigits(c),e?(d.integer+=b,b>d.fractional?d.fractional=0:d.fractional-=b):(d.fractional+=b,b>d.integer?d.integer=1:d.integer-=b),a=d)}return a},percentChange:function(a,c,b,d){var e,f,g,h={previous:null,next:null};return null!=
b&&(e=a-b,f=c-b,g=f-e,h.previous=Math.floor(Math.abs(100*g/e))),null!=d&&(e=d-a,f=d-c,g=f-e,h.next=Math.floor(Math.abs(100*g/e))),h},round:function(a,c){var b,d,e,f,h,l,r,p,u,k;a=a.slice(0);var x=c&&null!=c.tolerance?c.tolerance:2,B=c&&c.indexes,y=c&&null!=c.strictBounds?c.strictBounds:!1;if(B)B.sort(m);else for(B=[],r=0;r<a.length;r++)B.push(r);for(r=0;r<B.length;r++)if(k=B[r],b=a[k],c=0===k?null:a[k-1],d=k===a.length-1?null:a[k+1],e=n.numDigits(b),f=e.fractional){p=0;for(u=!1;f>=p&&!u;){l=b;u=p;
var z=h=void 0;l=(h=Number(l.toFixed(u)),l>h?z=h+1/Math.pow(10,u):(z=h,h-=1/Math.pow(10,u)),h=Number(h.toFixed(u)),z=Number(z.toFixed(u)),[h,z]);h=y&&0===r?l[1]:l[0];u=x;l=z=void 0;var A=n.percentChange(b,h,c,d);u=(z=null==A.previous||A.previous<=u,l=null==A.next||A.next<=u,z&&l||A.previous+A.next<=2*u);p++}u&&(a[k]=h)}return a},format:function(e,f){f=f||{places:20,round:-1};e=a.format(e,f);return e&&(e=e.replace(c,"$1").replace(d,"")),e}};return n})},"esri/renderers/nls/smartMapping":function(){define({root:{other:"Other",
minToMax:"to"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/lang ../core/urlUtils ../core/Logger ../core/Error ../core/arrayUtils ../portal/Portal ../symbols/WebStyleSymbol ../symbols/support/jsonUtils ../symbols/support/symbolUtils ./Renderer ./support/arcadeUtils ./support/diffUtils".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w,v,r,p){var u=e.getLogger("esri.renderers.UniqueValueRenderer");a=k=function(a){function d(c){c=a.call(this)||this;return c._valueInfoMap={},c._isDefaultSymbolDerived=!1,c.type="uniqueValue",c.field=null,c.field2=null,c.field3=null,c.valueExpression=null,c.valueExpressionTitle=null,c.legendOptions=null,c.defaultLabel=null,c.fieldDelimiter=null,c.portal=null,c.styleOrigin=null,c.diff={uniqueValueInfos:function(a,c){if(a||c){if(!a||!c)return{type:"complete",oldValue:a,
newValue:c};for(var d=!1,e={type:"collection",added:[],removed:[],changed:[],unchanged:[]},f=function(f){var g=b.find(a,function(a){return a.value===c[f].value});g?p.diff(g,c[f])?(e.changed.push({type:"complete",oldValue:g,newValue:c[f]}),d=!0):(e.unchanged.push({oldValue:g,newValue:c[f]}),d=!0):(e.added.push(c[f]),d=!0)},g=0;g<c.length;g++)f(g);f=function(f){b.find(c,function(b){return b.value===a[f].value})||(e.removed.push(a[f]),d=!0)};for(g=0;g<a.length;g++)f(g);return d?e:void 0}}},c._set("uniqueValueInfos",
[]),c}return m(d,a),d.prototype.writeValueExpression=function(a,b,c,d){d&&"web-scene"===d.origin?a&&d.messages&&d.messages.push(new l("property:unsupported",this.declaredClass+".valueExpression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"valueExpression",context:d})):b.valueExpression=a},d.prototype.writeValueExpressionTitle=function(a,b,c,d){d&&"web-scene"===d.origin?a&&d.messages&&d.messages.push(new l("property:unsupported",this.declaredClass+
".valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"valueExpressionTitle",context:d})):b.valueExpressionTitle=a},Object.defineProperty(d.prototype,"compiledFunc",{get:function(){return r.createFunction(this.valueExpression)},enumerable:!0,configurable:!0}),d.prototype.readLegendOptions=function(a){return c.clone(a)},d.prototype.writeLegendOptions=function(a,b,d,e){e&&"web-scene"===e.origin?a&&e.messages&&e.messages.push(new l("property:unsupported",
this.declaredClass+".legendOptions is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"legendOptions",context:e})):b.legendOptions=c.clone(a)},Object.defineProperty(d.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0}),d.prototype.readDefaultSymbol=function(a,b,c){return t.read(a,b,c)},d.prototype.writeDefaultSymbol=function(a,b,c,d){this._isDefaultSymbolDerived||
(a=t.write(a,{},d))&&(b.defaultSymbol=a)},d.prototype.readPortal=function(a,b,c){return c.portal||g.getDefault()},d.prototype.readStyleOrigin=function(a,b,c){if(b.styleName)return Object.freeze({styleName:b.styleName});if(b.styleUrl)return a=n.read(b.styleUrl,c),Object.freeze({styleUrl:a})},d.prototype.writeStyleOrigin=function(a,b,c,d){a.styleName?b.styleName=a.styleName:a.styleUrl&&(b.styleUrl=n.write(a.styleUrl,d))},Object.defineProperty(d.prototype,"uniqueValueInfos",{set:function(a){return this.styleOrigin?
void u.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",a.slice(0)),void this._updateValueInfoMap())},enumerable:!0,configurable:!0}),d.prototype.readUniqueValueInfos=function(a,b,d){return Array.isArray(a)?a.map(function(a){return a=c.clone(a),a.symbol=t.read(a.symbol,b,d),a}):void 0},d.prototype.writeUniqueValueInfos=function(a,b,d,e){this.styleOrigin||(b.uniqueValueInfos=(this.uniqueValueInfos||[]).map(function(a){return a=
c.clone(a),a.symbol&&(a.symbol=t.write(a.symbol,{},e)),a.value+="",c.fixJson(a)}))},d.prototype.addUniqueValueInfo=function(a,b){if(this.styleOrigin)return void u.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");a="object"==typeof a?a:{value:a,symbol:b};this.uniqueValueInfos.push(a);this._valueInfoMap[a.value+""]=a},d.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)return void u.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");
for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value+""==a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}},d.prototype.getUniqueValueInfo=function(a,b){var c;c=this.field;var d=a.attributes;if(this.valueExpression)c=r.executeFunction(this.compiledFunc,r.createExecContext(a,r.getViewInfo(b)));else if(this.field2){a=this.field2;b=this.field3;var e=[];c&&e.push(d[c]);a&&e.push(d[a]);b&&e.push(d[b]);c=e.join(this.fieldDelimiter||"")}else c=c&&"function"==
typeof c?c(a):d[c];return this._valueInfoMap[c+""]},d.prototype.getSymbol=function(a,b){return(a=this.getUniqueValueInfo(a,b))&&a.symbol||this.defaultSymbol},d.prototype.clone=function(){var a=new k({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:c.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:c.clone(this.visualVariables),legendOptions:c.clone(this.legendOptions),
authoringInfo:c.clone(this.authoringInfo)});this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=c.clone(this.uniqueValueInfos);return this.styleOrigin&&(a._set("styleOrigin",Object.freeze(c.clone(this.styleOrigin))),Object.freeze(b)),a._set("uniqueValueInfos",b),a._updateValueInfoMap(),a},d.prototype.collectRequiredFields=function(a){this.inherited(arguments);[this.field,this.field2,this.field3].forEach(function(b){b&&(a[b]=!0)})},d.prototype.populateFromStyle=
function(){var a=this;return w.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(b){var c=[];return a._valueInfoMap={},b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(d){var e=new q({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:d.name});a.defaultSymbol||d.name!==b.data.defaultItem||(a.defaultSymbol=e,a._isDefaultSymbolDerived=!0);e={value:d.name,symbol:e};c.push(e);a._valueInfoMap[d.name]=e}),a._set("uniqueValueInfos",Object.freeze(c)),!a.defaultSymbol&&
a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,a._isDefaultSymbolDerived=!0),a})},d.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=b})},d.fromPortalStyle=function(a,b){var c=new k(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||g.getDefault());b=c.populateFromStyle();return b.otherwise(function(b){u.error("#fromPortalStyle('"+
a+"'[, ...])","Failed to create unique value renderer from style name",b)}),b},d.fromStyleUrl=function(a,b){b=new k(b&&b.properties);b._set("styleOrigin",Object.freeze({styleUrl:a}));b=b.populateFromStyle();return b.otherwise(function(b){u.error("#fromStyleUrl('"+a+"'[, ...])","Failed to create unique value renderer from style URL",b)}),b},d}(d.declared(v));f([d.property()],a.prototype,"type",void 0);f([d.property({json:{read:{source:"field1"},write:{target:"field1"}}})],a.prototype,"field",void 0);
f([d.property({json:{write:!0}})],a.prototype,"field2",void 0);f([d.property({json:{write:!0}})],a.prototype,"field3",void 0);f([d.property({json:{write:!0}})],a.prototype,"valueExpression",void 0);f([d.writer("valueExpression")],a.prototype,"writeValueExpression",null);f([d.property({json:{write:!0}})],a.prototype,"valueExpressionTitle",void 0);f([d.writer("valueExpressionTitle")],a.prototype,"writeValueExpressionTitle",null);f([d.property({dependsOn:["valueExpression"]})],a.prototype,"compiledFunc",
null);f([d.property({json:{write:!0}})],a.prototype,"legendOptions",void 0);f([d.reader("legendOptions")],a.prototype,"readLegendOptions",null);f([d.writer("legendOptions")],a.prototype,"writeLegendOptions",null);f([d.property({json:{write:!0}})],a.prototype,"defaultLabel",void 0);f([d.property()],a.prototype,"defaultSymbol",null);f([d.reader("defaultSymbol")],a.prototype,"readDefaultSymbol",null);f([d.writer("defaultSymbol")],a.prototype,"writeDefaultSymbol",null);f([d.property({json:{write:!0}})],
a.prototype,"fieldDelimiter",void 0);f([d.property({type:g,readOnly:!0})],a.prototype,"portal",void 0);f([d.reader("portal",["styleName"])],a.prototype,"readPortal",null);f([d.property({readOnly:!0,json:{write:!0}})],a.prototype,"styleOrigin",void 0);f([d.reader("styleOrigin",["styleName","styleUrl"])],a.prototype,"readStyleOrigin",null);f([d.writer("styleOrigin")],a.prototype,"writeStyleOrigin",null);f([d.property()],a.prototype,"uniqueValueInfos",null);f([d.reader("uniqueValueInfos")],a.prototype,
"readUniqueValueInfos",null);f([d.writer("uniqueValueInfos")],a.prototype,"writeUniqueValueInfos",null);f([d.property({dependsOn:["field","field2","field3"],readOnly:!0})],a.prototype,"requiredFields",void 0);a=k=f([d.subclass("esri.renderers.UniqueValueRenderer")],a);var k;return a})},"esri/core/arrayUtils":function(){define([],function(){function a(a,f){return-1===a.indexOf(f)}function h(a,f,d){return!a.some(f.bind(null,d))}return{findIndex:function(a,f,d){for(var c,h=a.length,e=0;h>e;e++)if(c=
a[e],f.call(d,c,e,a))return e;return-1},find:function(a,f,d){for(var c,h=a.length,e=0;h>e;e++)if(c=a[e],f.call(d,c,e,a))return c},equals:function(a,f,d){if(!a&&!f)return!0;if(!a||!f||a.length!=f.length)return!1;if(d)for(var c=0;c<a.length;c++){if(!d(a[c],f[c]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==f[d])return!1;return!0},difference:function(m,f,d){var c,n;return d?(c=f.filter(h.bind(null,m,d)),n=m.filter(h.bind(null,f,d))):(c=f.filter(a.bind(null,m)),n=m.filter(a.bind(null,f))),{added:c,
removed:n}},range:function(a,f){null==f&&(f=a,a=0);for(var d=Array(f-a),c=a;f>c;c++)d[c-a]=c;return d},constant:function(a,f){for(var d=Array(a),c=0;a>c;c++)d[c]=f;return d},binaryIndexOf:function(a,f,d){for(var c=a.length,h=0,e=c-1;e>h;){var l=h+Math.floor((e-h)/2);f>a[l]?h=l+1:e=l}e=a[h];return d?f>=a[c-1]?-1:e===f?h:h-1:e===f?h:-1}}})},"esri/symbols/support/symbolUtils":function(){define("require exports dojo/_base/lang ../Symbol3D ./jsonUtils ./Thumbnail ./StyleOrigin ../../core/urlUtils ../../core/promiseUtils ../../core/Error ../../core/sniff ../../request ../../portal/Portal ../../portal/PortalQueryParams".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q,t,w){function v(a,b){a=e.normalize(e.makeAbsolute(a,b));b=a.lastIndexOf("/");return-1===b?{url:a,base:a,filename:null}:{url:a,base:a.slice(0,b),filename:a.slice(b+1)}}function r(a,b){u(a,function(a){return e.makeAbsolute(a,b)})}function p(a,b){a.symbolLayers&&a.symbolLayers.forEach(b)}function u(a,b){p(a,function(a){(a=a.resource)&&a.href&&(a.href=b(a.href))})}function k(a,b){return a=m.clone(a),r(a,b),d.fromJSON(a)}function x(a,b){var c=v(a,b&&b.url&&b.url.path);
return D(c.url).then(function(b){return{reference:{styleUrl:a},data:b.data,base:c.base,filename:c.filename,styleUrl:a}})}function B(a,b){var c;b=b.portal||t.getDefault();var d=b.url+" - "+a;return F[d]?l.resolve(F[d]):y(a,b).then(function(a){return c=a,a.fetchData()}).then(function(b){b={data:b,base:c.itemUrl,filename:"data",styleName:a};return F[d]=b,b})}function y(a,c){return c.load().then(function(){if(!c.stylesGroupQuery)throw new b("layer-templates:styles-group-query-missing","The styles group query needs to be configured in the portal to query styles");
var a=new w({disableExtraQuery:!0,query:c.stylesGroupQuery});return c.queryGroups(a)}).then(function(c){c=c.results;if(!c||!Array.isArray(c)||0===c.length)throw new b("layer-templates:styles-missing","The styles group does not contain any styles");c=c[0];var d=new w({disableExtraQuery:!0,query:'typekeywords:"'+a+'"'});return c.queryItems(d)}).then(function(c){c=c.results;if(!c||!Array.isArray(c)||0===c.length)throw new b("layer-templates:style-missing","The style '${styleName}' is not part of the styles group",
{styleName:a});return c[0].load()})}function z(a,c){return a.styleUrl?x(a.styleUrl,c):a.styleName?B(a.styleName,c):l.reject(new b("layer-templates:style-url-and-name-missing","Either styleUrl or styleName is required in layerDefinition"))}function A(a,d,g){for(var h=function(b){if(b.name===d){var h=v(b.webRef,a.base);return{value:D(h.url).then(function(l){if((l=k(l.data,h.base))&&l.isInstanceOf(f)){if(b.thumbnail)if(b.thumbnail.href){var m=e.makeAbsolute(b.thumbnail.href,a.base);l.thumbnail=new c["default"]({url:m})}else b.thumbnail.imageData&&
(l.thumbnail=new c["default"]({url:"data:image/png;base64,"+b.thumbnail.imageData}));a.styleUrl?l.styleOrigin=new n({portal:g.portal,styleUrl:a.styleUrl,name:d}):a.styleName&&(l.styleOrigin=new n({portal:g.portal,styleName:a.styleName,name:d}))}return l})}}},m=0,p=a.data.items;m<p.length;m++){var q=h(p[m]);if("object"==typeof q)return q.value}return l.reject(new b("layer-templates:symbol-name-not-found","The symbol name '${symbolName}' could not be found",{symbolName:d}))}function D(a){var b={responseType:"json"};
return/\.json$/.test(a)||(b.query={f:"json"}),q(e.normalize(a),b)}Object.defineProperty(h,"__esModule",{value:!0});h.getIconHref=function(a,b){b=b.resource.href;return!g("esri-canvas-svg-support")&&a.styleOrigin&&C.test(b)?b.replace(C,"/resource/png/$1.png"):b};h.fetchStyleFromUrl=x;var F={};h.fetchStyle=z;h.fetchStyleSymbol=function(a,c){return a.name?z(a,c).then(function(b){return A(b,a.name,c)}):l.reject(new b("layer-templates:style-symbol-reference-name-missing","Missing name in style symbol reference"))};
h.fetchSymbolFromStyle=A;h.fetchSymbolSet=function(a){var c=a.data;if(!c.symbolSetUrl)return l.reject(new b("layer-templates:symbol-set-url-missing","Style does not provide symbol set URL",{style:c}));var d=v(c.symbolSetUrl,a.base);return D(d.url).then(function(a){a=a.data;if(0===a.length||!a[0].name)throw new b("layer-templates:symbol-set-missing-data","Invalid syntax or missing data in symbol set",{style:c});for(var e={},f=0;f<a.length;f++){var g=k(a[f],d.base);e[a[f].name]=g;a[f].name===c.defaultItem&&
(e.defaultSymbol=g)}return e.defaultSymbol||(e.defaultSymbol=e[a[0].name]),e})};h.createSymbol=function(a,b){return a?k(a,b&&b.url&&b.url.path):null};h.styleNameFromItem=function(a){var b=0;for(a=a.typeKeywords;b<a.length;b++){var c=a[b];if(/^Esri.*Style$/.test(c))return c}};h.isVolumetricSymbol=function(a){return(a=a&&a.symbolLayers)?a.some(function(a){a=a.type;return"object"===a||"path"===a||"extrude"===a}):!1};var C=/\/resource\/(.*?)\.svg$/})},"esri/renderers/support/diffUtils":function(){define("require exports dojo/_base/lang ../../core/Accessor ../../core/Collection ../../core/accessorSupport/utils".split(" "),
function(a,h,m,f,d,c){function n(a){return a instanceof d?Object.keys(a.items):a instanceof f?c.getProperties(a).keys():a?Object.keys(a):[]}function e(a,b){return a instanceof d?a.items[b]:a[b]}function l(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function b(a,c){var d=a.diff;if(d&&m.isFunction(d))return d(a,c);var f=n(a),h=n(c);if(0!==f.length||0!==h.length){if(!f.length||!h.length||l(a,c))return{type:"complete",oldValue:a,newValue:c};var p=h.filter(function(a){return-1===
f.indexOf(a)}),q=f.filter(function(a){return-1===h.indexOf(a)}),p=f.filter(function(b){return-1<h.indexOf(b)&&e(a,b)!==e(c,b)}).concat(p,q).sort();if((q=a?a.declaredClass:null)&&-1<g.indexOf(q)&&p.length)return{type:"complete",oldValue:a,newValue:c};var k,t;for(t in p){var q=p[t],B=e(a,q),y=e(c,q),z=void 0;m.isFunction(B)||m.isFunction(y)||B!==y&&(null!=B||null!=y)&&(z=d&&d[q]&&m.isFunction(d[q])?d[q](B,y):"object"==typeof B&&"object"==typeof y&&(B?B.declaredClass:null)===(y?y.declaredClass:null)?
b(B,y):{type:"complete",oldValue:B,newValue:y},z&&(k=k||{type:"partial",diff:{}},k.diff[q]=z))}return k}}Object.defineProperty(h,"__esModule",{value:!0});var g=["esri.Color","esri.portal.Portal"];h.diff=function(a,c){return m.isFunction(a)||m.isFunction(c)||!a&&!c?void 0:!a||!c||"object"==typeof a&&"object"==typeof a&&(a?a.declaredClass:null)!==(c?c.declaredClass:null)?{type:"complete",oldValue:a,newValue:c}:b(a,c)}})},"esri/renderers/support/jsonUtils":function(){define(["../../core/Warning","../SimpleRenderer",
"../UniqueValueRenderer","../ClassBreaksRenderer"],function(a,h,m,f){var d={simple:h,uniqueValue:m,classBreaks:f},c={fromJson:function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(e){console.warn(e.stack)}return c.fromJSON(a)},read:function(c,e,f){return c&&(c.styleName||c.styleUrl)&&"uniqueValue"!==c.type?(f&&f.messages&&f.messages.push(new a("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+c.type+"'",{definition:c,context:f})),
null):(e=c?d[c.type]||null:null)?(e=new e,e.read(c,f),e):(f&&f.messages&&c&&f.messages.push(new a("renderer:unsupported","Renderers of type '"+(c.type||"unknown")+"' are not supported",{definition:c,context:f})),null)},fromJSON:function(a){var c=a?d[a.type]||null:null;return c?c.fromJSON(a):null}};return c})},"esri/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary ../core/Error dojo/_base/array dojo/_base/lang ../symbols/support/jsonUtils ./Renderer ./support/arcadeUtils".split(" "),
function(a,h,m,f,d,c,n,e,l){var b=m({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),g=m({esriClassifyNaturalBreaks:"natural-breaks",esriClassifyEqualInterval:"equal-interval",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyGeometricalInterval:"geometrical-interval"}),q=a(e,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{value:null,json:{read:n.read,write:function(a,
b,c,d){(a=n.write(a,{},d))&&(b.backgroundFillSymbol=a)}}},classBreakInfos:{set:function(a){a&&a.forEach(this._processCBInfo,this);this._set("classBreakInfos",a)},json:{read:{source:["classBreakInfos","minValue"],reader:function(a,b,c){var d=b.minValue;if(a&&Array.isArray(a)){var e=a[0]&&null!=a[0].classMaxValue;return a.map(function(a){if(a=h.clone(a),e){var f=a.classMaxValue;a.minValue=d;d=a.maxValue=f}return a.symbol=n.read(a.symbol,b,c),a})}return a}},write:function(a,b,c,e){a=this.classBreakInfos||
[];c=a[0]&&a[0].minValue;b.minValue=c===-(1/0)?-Number.MAX_VALUE:c;b.classBreakInfos=d.map(a,function(a){return a=h.clone(a),a.symbol&&(a.symbol=n.write(a.symbol,{},e)),a.classMaxValue=a.maxValue===1/0?Number.MAX_VALUE:a.maxValue,delete a.minValue,delete a.maxValue,h.fixJson(a)})}}},classificationMethod:{value:null,json:{read:g.fromJSON,write:function(a,b){(a=g.toJSON(a))&&(b.classificationMethod=a)}}},defaultLabel:{value:null,json:{write:!0}},defaultSymbol:{value:null,json:{read:n.read,write:function(a,
b,c,d){(a=n.write(a,{},d))&&(b.defaultSymbol=a)}}},valueExpression:{value:null,json:{write:function(a,b,c,d){d&&"web-scene"===d.origin?a&&d.messages&&d.messages.push(new f("property:unsupported",this.declaredClass+".valueExpression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"valueExpression",context:d})):b.valueExpression=a}}},valueExpressionTitle:{value:null,json:{write:function(a,b,c,d){d&&"web-scene"===d.origin?a&&d.messages&&
d.messages.push(new f("property:unsupported",this.declaredClass+".valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"valueExpressionTitle",context:d})):b.valueExpressionTitle=a}}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return l.createFunction(this.valueExpression)}},legendOptions:{value:null,json:{read:function(a){return h.clone(a)},write:function(a,b,c,d){d&&"web-scene"===d.origin?a&&d.messages&&
d.messages.push(new f("property:unsupported",this.declaredClass+".legendOptions is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"legendOptions",context:d})):b.legendOptions=h.clone(a)}}},field:{value:null,json:{write:!0}},isMaxInclusive:!0,normalizationField:{value:null,json:{write:!0}},normalizationTotal:{value:null,json:{write:!0}},normalizationType:{value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var a=
this._get("normalizationType"),b=!!this.normalizationField,c=null!=this.normalizationTotal;return b||c?(a=b&&"field"||c&&"percent-of-total",b&&c&&console.warn("warning: both normalizationField and normalizationTotal are set!")):("field"===a||"percent-of-total"===a)&&(a=null),a},json:{read:b.fromJSON,write:function(a,c){(a=b.toJSON(a))&&(c.normalizationType=a)}}},requiredFields:{dependsOn:["field","normalizationField"]},type:"classBreaks"},constructor:function(){this.classBreakInfos=[]},addClassBreakInfo:function(a,
b,d){a=c.isObject(a)?a:{minValue:a,maxValue:b,symbol:d};this.classBreakInfos.push(a);this._processCBInfo(a)},removeClassBreakInfo:function(a,b){var c,d,e=this.classBreakInfos.length;for(d=0;e>d;d++)if(c=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],c[0]==a&&c[1]==b){this.classBreakInfos.splice(d,1);break}},getBreakIndex:function(a,b){var d,e,f=this.field;d=a.attributes;var g=this.classBreakInfos.length,h=this.isMaxInclusive;if(this.valueExpression)a=l.executeFunction(this.compiledFunc,
l.createExecContext(a,l.getViewInfo(b)));else if(c.isFunction(f))a=f(a);else if(a=parseFloat(d[f]),f=this.normalizationType)if(b=parseFloat(this.normalizationTotal),d=parseFloat(d[this.normalizationField]),"log"===f)a=Math.log(a)*Math.LOG10E;else if("percent-of-total"!==f||isNaN(b)){if("field"===f&&!isNaN(d)){if(isNaN(a)||isNaN(d))return-1;a/=d}}else a=a/b*100;if(null!=a&&!isNaN(a)&&"number"==typeof a)for(d=0;g>d;d++)if(e=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],e[0]<=a&&
(h?a<=e[1]:a<e[1]))return d;return-1},getClassBreakInfo:function(a,b){a=this.getBreakIndex(a,b);return-1!==a?this.classBreakInfos[a]:null},getSymbol:function(a,b){a=this.getBreakIndex(a,b);return-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol},clone:function(){return new q({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),classificationMethod:this.classificationMethod,defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),
valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:h.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:h.clone(this.visualVariables),legendOptions:h.clone(this.legendOptions),authoringInfo:h.clone(this.authoringInfo)})},collectRequiredFields:function(a){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(b){b&&
(a[b]=!0)})},_processCBInfo:function(a){var b=(a.minValue,a.maxValue,a.symbol);b&&(b.declaredClass||(a.symbol=n.fromJSON(b)))}});return q})},"esri/renderers/support/styleUtils":function(){define(["require","exports","../../core/promiseUtils","../../core/Warning"],function(a,h,m,f){Object.defineProperty(h,"__esModule",{value:!0});h.loadStyleRenderer=function(a,c){var d=a&&a.getAtOrigin&&a.getAtOrigin("renderer",c.origin);return d&&"uniqueValue"===d.type&&d.styleOrigin?d.populateFromStyle().otherwise(function(d){c&&
c.messages&&c.messages.push(new f("renderer:style-reference","Failed to create unique value renderer from style reference: "+d.message,{error:d,context:c}));a.clear("renderer",c.origin)}).then(function(){return null}):m.resolve(null)}})},"esri/layers/graphics/sources/MemorySource":function(){define("../../../core/Collection ../../../core/Promise ../../../core/promiseUtils ../../../core/Error ../../../tasks/support/FeatureSet ../../../Graphic ../QueryEngine".split(" "),function(a,h,m,f,d,c,n){return a.ofType(c).createSubclass([h],
{properties:{layer:{value:null},_queryEngine:{value:null,dependsOn:["layer.loaded"],get:function(){return this.get("layer.loaded")?new n({features:this,objectIdField:this.layer.objectIdField}):null}}},queryFeatures:function(a){return this._queryEngine?this._queryEngine.queryFeatures(a).then(function(a){var b=new d;return b.features=a,b}):this._rejectQuery("Not ready to execute query")},queryObjectIds:function(a){return this._queryEngine?this._queryEngine.queryObjectIds(a):this._rejectQuery("Not ready to execute query")},
queryFeatureCount:function(a){return this._queryEngine?this._queryEngine.queryFeatureCount(a):this._rejectQuery("Not ready to execute query")},queryExtent:function(a){return this._queryEngine?this._queryEngine.queryExtent(a):this._rejectQuery("Not ready to execute query")},_rejectQuery:function(a){return m.reject(new f("MemorySource",a))}})})},"esri/layers/graphics/QueryEngine":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Error ../../core/promiseUtils ../../geometry/support/graphicsUtils".split(" "),
function(a,h,m,f,d,c,n,e,l){a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.features=null,b.objectIdField=null,b}return m(b,a),b.prototype.queryFeatures=function(a){if(this.features)if(a)if(this._isSupportedQuery(a)){var b=this._createFilters(a);a=b.length?this._executeQuery(a,b):this._rejectQuery("Invalid query")}else a=this._rejectQuery("Unsupported query");else a=this._returnAllFeatures();else a=this._rejectQuery("Engine not initialized");return a},b.prototype.queryObjectIds=
function(a){return this.objectIdField?this.queryFeatures(a).then(this._getObjectIds.bind(this)):this._rejectQuery("Unsupported query")},b.prototype.queryFeatureCount=function(a){return this.queryFeatures(a).then(function(a){return a.length})},b.prototype.queryExtent=function(a){var b=this;return this.queryFeatures(a).then(function(a){return{count:a.length,extent:b._getExtent(a)}})},b.prototype._returnAllFeatures=function(){return e.resolve(this.features.toArray())},b.prototype._executeQuery=function(a,
b){var c=this,d=this.features.filter(function(d){return b.every(function(b){return b.call(c,d,a)})});return e.resolve(d.toArray())},b.prototype._isSupportedQuery=function(a){var b=!0;return(null!=a.distance||null!=a.geometryPrecision||a.groupByFieldsForStatistics&&a.groupByFieldsForStatistics.length||null!=a.maxAllowableOffset||a.multipatchOption||null!=a.num||a.orderByFields&&a.orderByFields.length||a.outFields&&a.outFields.length||a.outSpatialReference||a.outStatistics&&a.outStatistics.length||
a.pixelSize||a.quantizationParameters||a.relationParam||a.returnDistinctValues||null!=a.start||a.text||a.timeExtent||a.where||a.objectIds&&a.objectIds.length&&!this.objectIdField)&&(b=!1),b},b.prototype._createFilters=function(a){var b=[];return a.objectIds&&a.objectIds.length&&b.push(this._createObjectIdFilter()),a.geometry&&"extent"===a.geometry.type&&"intersects"===a.spatialRelationship&&b.push(this._createExtentFilter()),b},b.prototype._createExtentFilter=function(){return function(a,b){a=a.geometry;
b=b.geometry;return a&&b.intersects(a)}},b.prototype._createObjectIdFilter=function(){var a=this;return function(b,c){b=b.attributes;return-1<c.objectIds.indexOf(b&&b[a.objectIdField])}},b.prototype._rejectQuery=function(a){return e.reject(new n(this.declaredClass,a))},b.prototype._getObjectIds=function(a){var b=this.objectIdField,c=[];return a.forEach(function(a){a=(a=a.attributes)&&a[b];null!=a&&c.push(a)}),c},b.prototype._getExtent=function(a){return a.length?l.graphicsExtent(a):null},b}(d.declared(c));
return f([d.property()],a.prototype,"features",void 0),f([d.property()],a.prototype,"objectIdField",void 0),a=f([d.subclass("esri.layers.graphics.QueryEngine")],a)})},"esri/layers/support/fieldUtils":function(){define(["require","exports","dojo/_base/lang"],function(a,h,m){function f(a,f,e){if(a)for(var c=0;c<a.length;c++){var b=a[c],g=m.getObject(b,!1,f);(g=g&&"function"!=typeof g&&d(g,e))&&m.setObject(b,g.name,f)}}function d(a,d){if(null!=d){a=a.toLowerCase();for(var c=0;c<d.length;c++){var f=d[c];
if(f&&f.name.toLowerCase()===a)return f}}return null}Object.defineProperty(h,"__esModule",{value:!0});h.fixRendererFields=function(a,d){if(null!=a&&null!=d){var c=0;for(a=Array.isArray(a)?a:[a];c<a.length;c++){var l=a[c];if(f(h.rendererFields,l,d),l.visualVariables)for(var b=0,l=l.visualVariables;b<l.length;b++)f(h.visualVariableFields,l[b],d)}}};h.getField=d;h.rendererFields="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" ");
h.visualVariableFields=["field","normalizationField"]})},"esri/layers/support/FeatureType":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport ./InheritedDomain ./RangeDomain ./CodedValueDomain ./FeatureTemplate ../../core/lang".split(" "),function(a,h,m,f,d,c,n,e,l,b,g){a=function(a){function c(b){b=a.call(this,b)||this;return b.id=null,b.name=null,b.domains=null,b.templates=
null,b}return m(c,a),c.prototype.readDomains=function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];switch(d.type){case "range":b[c]=e.fromJSON(d);break;case "codedValue":b[c]=l.fromJSON(d);break;case "inherited":b[c]=n.fromJSON(d)}}return b},c.prototype.writeDomains=function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]&&a[d].toJSON());g.fixJson(c);b.domains=c},c.prototype.readTemplates=function(a){return a&&a.map(function(a){return new b(a)})},c.prototype.writeTemplates=
function(a,b){b.templates=a&&a.map(function(a){return a.toJSON()})},c}(d.declared(c));return f([d.property({json:{write:!0}})],a.prototype,"id",void 0),f([d.property({json:{write:!0}})],a.prototype,"name",void 0),f([d.property({json:{write:!0}})],a.prototype,"domains",void 0),f([d.reader("domains")],a.prototype,"readDomains",null),f([d.writer("domains")],a.prototype,"writeDomains",null),f([d.property({json:{write:!0}})],a.prototype,"templates",void 0),f([d.reader("templates")],a.prototype,"readTemplates",
null),f([d.writer("templates")],a.prototype,"writeTemplates",null),a=f([d.subclass("esri.layers.support.FeatureType")],a)})},"esri/layers/support/InheritedDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),function(a,h,m,f,d,c){a=function(a){function c(c){c=a.call(this,c)||this;return c.type="inherited",c}return m(c,a),c}(d.declared(c));return f([d.property()],a.prototype,
"type",void 0),a=f([d.subclass("esri.layers.support.InheritedDomain")],a)})},"esri/layers/support/FeatureTemplate":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang".split(" "),function(a,h,m,f,d,c,n,e){var l=n({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",
esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});a=function(a){function b(b){b=a.call(this,b)||this;
return b.name=null,b.description=null,b.drawingTool=null,b.prototype=null,b.thumbnail=null,b}return m(b,a),b.prototype.writeDrawingTool=function(a,b){b.drawingTool=l.toJSON(a)},b.prototype.writePrototype=function(a,b){b.prototype=e.fixJson(e.clone(a),!0)},b.prototype.writeThumbnail=function(a,b){b.thumbnail=e.fixJson(e.clone(a))},b}(d.declared(c));return f([d.property({json:{write:!0}})],a.prototype,"name",void 0),f([d.property({json:{write:!0}})],a.prototype,"description",void 0),f([d.property({json:{read:l.fromJSON,
write:!0}})],a.prototype,"drawingTool",void 0),f([d.writer("drawingTool")],a.prototype,"writeDrawingTool",null),f([d.property({json:{write:!0}})],a.prototype,"prototype",void 0),f([d.writer("prototype")],a.prototype,"writePrototype",null),f([d.property({json:{write:!0}})],a.prototype,"thumbnail",void 0),f([d.writer("thumbnail")],a.prototype,"writeThumbnail",null),a=f([d.subclass("esri.layers.support.FeatureTemplate")],a)})},"esri/layers/support/LabelClass":function(){define("../../core/JSONSupport ../../core/lang ../../core/kebabDictionary dojo/_base/lang dojo/number ../../PopupTemplate ../../widgets/Popup/PopupRendererViewModel ../../renderers/support/arcadeUtils ../../symbols/support/jsonUtils".split(" "),
function(a,h,m,f,d,c,n,e,l){var b=/__begin__/ig,g=/__end__/ig,q=/^__begin__/i,t=/__end__$/i,w=m({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",
esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",
esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"}),v=a.createSubclass({declaredClass:"esri.layers.support.LabelClass",properties:{name:{value:null,json:{write:!0}},labelExpression:{value:null,json:{write:!0}},labelExpressionInfo:{value:null,
json:{write:function(a,b,c,d){a=h.fixJson(a&&f.clone(a));b.labelExpressionInfo=this._processLabelExpressionInfo(a)}}},labelPlacement:{value:null,json:{read:function(a,b){return w.fromJSON(a)},write:function(a,b){(a=w.toJSON(a))&&(b.labelPlacement=a)}}},maxScale:{value:0,json:{write:function(a,b){(a||this.minScale)&&(b.maxScale=a)}}},minScale:{value:0,json:{write:function(a,b){(a||this.maxScale)&&(b.minScale=a)}}},requiredFields:{readOnly:!0,dependsOn:["labelExpression","labelExpressionInfo","where"],
get:function(){var a=Object.create(null);return this._collectRequiredFields(a),Object.keys(a)}},symbol:{value:null,json:{read:l.read,write:function(a,b,c,d){b.symbol=l.write(a,{},d)}}},useCodedValues:{value:null,json:{write:!0}},where:{value:null,json:{write:!0}}},getLabelExpression:function(){var a={expression:"",type:"none"};return this.labelExpressionInfo?this.labelExpressionInfo.value?(a.expression=this.labelExpressionInfo.value,a.type="conventional"):this.labelExpressionInfo.expression&&(a.expression=
this.labelExpressionInfo.expression,a.type="arcade"):this._validateLabelExpression(this.labelExpression)&&(a.expression=this._convertLabelExpression(this.labelExpression),a.type="conventional"),a},getOptions:function(){var a={},b=this.labelExpressionInfo;if(b){var c=b.expression;c&&!b.value&&(a.hasArcadeExpression=!0,a.compiledArcadeFunc=e.createFunction(c))}return a},clone:function(){return new v({labelExpression:this.labelExpression,labelExpressionInfo:f.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,
maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:this.symbol.clone(),where:this.where,useCodedValues:this.useCodedValues})},_collectRequiredFields:function(a){this._collectLabelExpressionRequiredFields(this.getLabelExpression(),a);this._collectWhereRequiredFields(this.where,a)},_validateLabelExpression:function(a){return/^(\s*\[[^\]]+\]\s*)+$/i.test(a)},_convertLabelExpression:function(a){return a.replace(/\[/g,"{").replace(/\]/g,"}")},_collectWhereRequiredFields:function(a,b){null!=
a&&(a=a.split(" "),3===a.length&&(b[a[0]]=!0),7===a.length&&(b[a[0]]=!0,b[a[4]]=!0))},_collectLabelExpressionRequiredFields:function(a,b){"arcade"===a.type?e.extractFieldNames(a.expression).forEach(function(a){b[a]=!0}):(a=a.expression.match(/{[^}]*}/g))&&a.forEach(function(a){b[a.slice(1,-1)]=!0})},_processLabelExpressionInfo:function(a){return a&&a.value&&(a.expression=this._convertTemplatedStringToArcade(a.value)),a},_convertTemplatedStringToArcade:function(a){var c;return a&&(c=f.replace(a,function(a,
b){return'__begin__$feature["'+b+'"]__end__'}),c=q.test(c)?c.replace(q,""):'"'+c,c=t.test(c)?c.replace(t,""):c+'"',c=c.replace(b,'" + ').replace(g,' + "')),c}});return v.evaluateWhere=function(a,b){var c=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return c>a?!0:!1;case "\x3c\x3d":return c>=a?!0:!1}return!1};try{if(null==a)return!0;var d=a.split(" ");if(3===d.length)return c(b[d[0]],
d[1],d[2]);if(7===d.length){var e=c(b[d[0]],d[1],d[2]),f=d[3],g=c(b[d[4]],d[5],d[6]);switch(f){case "AND":return e&&g;case "OR":return e||g}}return!1}catch(z){}},v.buildLabelText=function(a,b,c,d){var f="";if(d&&d.hasArcadeExpression)d.compiledArcadeFunc&&(a=e.createExecContext(b),a=e.executeFunction(d.compiledArcadeFunc,a),null!=a&&(f=a.toString()));else var g=b&&b.attributes||{},f=a.replace(/{[^}]*}/g,function(a){return v.formatField(a.slice(1,-1),a,g,c,d)});return f},v.formatField=function(a,b,
e,g,l){var k=a.toLowerCase();for(a=0;a<g.length;a++)if(g[a].name.toLowerCase()===k){b=e[g[a].name];var m=g[a].domain;if(m&&f.isObject(m)){if("codedValue"==m.type)for(e=0;e<m.codedValues.length;e++)m.codedValues[e].code==b&&(b=m.codedValues[e].name);else"range"==m.type&&m.minValue<=b&&b<=m.maxValue&&(b=m.name);break}m=g[a].type;"date"==m?(m=l&&l.dateFormat||"shortDate",m=c.prototype._dateFormatKebabDict.fromJSON(m),(m="DateFormat"+n.prototype._dateFormats[m])&&(b=h.substitute({myKey:b},"{myKey:"+m+
"}"))):("integer"==m||"small-integer"==m||"long"==m||"double"==m)&&l&&l.numberFormat&&l.numberFormat.digitSeparator&&l.numberFormat.places&&(b=d.format(b,{places:l.numberFormat.places}))}return null==b?"":b},v})},"esri/layers/support/labelingInfo":function(){define(["require","exports","./LabelClass"],function(a,h,m){Object.defineProperty(h,"__esModule",{value:!0});var f=/\[([^\[\]]+)\]/gi;h.reader=function(a,c,h){var d=this;return a?a.map(function(a){var b=new m;if(b.read(a,h),b.labelExpression){var e=
c.fields||c.layerDefinition&&c.layerDefinition.fields||d.fields;b.labelExpression=b.labelExpression.replace(f,function(a,b){a:if(e){a=b.toLowerCase();for(var c=0;c<e.length;c++){var d=e[c].name;if(d.toLowerCase()===a){b=d;break a}}}return"["+b+"]"})}return b}):null}})},"esri/layers/support/commonProperties":function(){define(["require","exports","../../core/accessorSupport/write","../../core/accessorSupport/utils","../../core/accessorSupport/PropertyOrigin"],function(a,h,m,f,d){Object.defineProperty(h,
"__esModule",{value:!0});h.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{webScene:{read:{source:["id","url","layerType"],reader:function(a,h){return null==h.screenSizePerspective&&"defaults"===this.originOf("screenSizePerspectiveEnabled")?void f.getProperties(this).store.set("screenSizePerspectiveEnabled",!1,d.OriginId.DEFAULTS):h.screenSizePerspective}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(a,d,e,f){"defaults"===this.originOf("screenSizePerspectiveEnabled")&&
a?d[e]=a:m.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},f)&&(d[e]=a)}}}}}}})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(a,h,m,f,d){d=m("dojox.gfx.path.Path",d.Shape,{constructor:function(c){this.shape=h.clone(a.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=c;this.segmented=!1},setAbsoluteMode:function(a){this._confirmSegmented();this.absolute="string"==typeof a?"absolute"==
a:a;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var a=this.bbox,d=this._getRealMatrix();this.bbox=null;for(var e=0,f=this.segments.length;e<f;++e)this._updateWithSegment(this.segments[e],d);d=this.bbox;
this.bbox=a;return this.tbbox=d?[{x:d.l,y:d.t},{x:d.r,y:d.t},{x:d.r,y:d.b},{x:d.l,y:d.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(a,d,e){e&&(d=f.multiplyPoint(e,a,d),a=d.x,d=d.y);this.bbox&&"l"in this.bbox?(this.bbox.l>a&&(this.bbox.l=a),this.bbox.r<a&&(this.bbox.r=a),this.bbox.t>d&&(this.bbox.t=d),this.bbox.b<d&&(this.bbox.b=d)):this.bbox={l:a,
b:d,r:a,t:d}},_updateWithSegment:function(c,d){var e=c.args,f=e.length,b;switch(c.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(b=0;b<f;b+=2)this._updateBBox(e[b],e[b+1],d);this.last.x=e[f-2];this.last.y=e[f-1];this.absolute=!0;break;case "H":for(b=0;b<f;++b)this._updateBBox(e[b],this.last.y,d);this.last.x=e[f-1];this.absolute=!0;break;case "V":for(b=0;b<f;++b)this._updateBBox(this.last.x,e[b],d);this.last.y=e[f-1];this.absolute=!0;break;case "m":b=0;"x"in this.last||(this._updateBBox(this.last.x=
e[0],this.last.y=e[1],d),b=2);for(;b<f;b+=2)this._updateBBox(this.last.x+=e[b],this.last.y+=e[b+1],d);this.absolute=!1;break;case "l":case "t":for(b=0;b<f;b+=2)this._updateBBox(this.last.x+=e[b],this.last.y+=e[b+1],d);this.absolute=!1;break;case "h":for(b=0;b<f;++b)this._updateBBox(this.last.x+=e[b],this.last.y,d);this.absolute=!1;break;case "v":for(b=0;b<f;++b)this._updateBBox(this.last.x,this.last.y+=e[b],d);this.absolute=!1;break;case "c":for(b=0;b<f;b+=6)this._updateBBox(this.last.x+e[b],this.last.y+
e[b+1],d),this._updateBBox(this.last.x+e[b+2],this.last.y+e[b+3],d),this._updateBBox(this.last.x+=e[b+4],this.last.y+=e[b+5],d);this.absolute=!1;break;case "s":case "q":for(b=0;b<f;b+=4)this._updateBBox(this.last.x+e[b],this.last.y+e[b+1],d),this._updateBBox(this.last.x+=e[b+2],this.last.y+=e[b+3],d);this.absolute=!1;break;case "A":for(b=0;b<f;b+=7)this._updateBBox(e[b+5],e[b+6],d);this.last.x=e[f-2];this.last.y=e[f-1];this.absolute=!0;break;case "a":for(b=0;b<f;b+=7)this._updateBBox(this.last.x+=
e[b+5],this.last.y+=e[b+6],d);this.absolute=!1}c=[c.action];for(b=0;b<f;++b)c.push(a.formatNumber(e[b],!0));if("string"==typeof this.shape.path)this.shape.path+=c.join("");else for(b=0,f=c.length;b<f;++b)this.shape.path.push(c[b])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(a,d){this.tbbox=null;var c=this._validSegments[a.toLowerCase()];"number"==typeof c&&(c?d.length>=c&&(a={action:a,args:d.slice(0,d.length-d.length%c)},this.segments.push(a),this._updateWithSegment(a)):
(a={action:a,args:[]},this.segments.push(a),this._updateWithSegment(a)))},_collectArgs:function(a,d){for(var c=0;c<d.length;++c){var f=d[c];"boolean"==typeof f?a.push(f?1:0):"number"==typeof f?a.push(f):f instanceof Array?this._collectArgs(a,f):"x"in f&&"y"in f&&a.push(f.x,f.y)}},moveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"M":"m",a);return this},lineTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);
this._pushSegment(this.absolute?"L":"l",a);return this},hLineTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"H":"h",a);return this},vLineTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"V":"v",a);return this},curveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"C":"c",a);return this},smoothCurveTo:function(){this._confirmSegmented();
var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"S":"s",a);return this},qCurveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"Q":"q",a);return this},qSmoothCurveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"T":"t",a);return this},arcTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"A":
"a",a);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var a=this.shape.path;this.shape.path=[];this._setPath(a);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(c){c=h.isArray(c)?c:c.match(a.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(c){for(var d="",e=[],f=c.length,b=0;b<f;++b){var g=c[b],m=parseFloat(g);isNaN(m)?(d&&this._pushSegment(d,
e),e=[],d=g):e.push(m)}this._pushSegment(d,e)}},setShape:function(c){this.inherited(arguments,["string"==typeof c?{path:c}:c]);this.segmented=!1;this.segments=[];a.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});m=m("dojox.gfx.path.TextPath",d,{constructor:function(c){"text"in this||(this.text=h.clone(a.defaultTextPath));"fontStyle"in this||(this.fontStyle=h.clone(a.defaultFont))},getText:function(){return this.text},setText:function(c){this.text=a.makeParameters(this.text,
"string"==typeof c?{text:c}:c);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(c){this.fontStyle="string"==typeof c?a.splitFontString(c):a.makeParameters(a.defaultFont,c);this._setFont();return this}});return a.path={Path:d,TextPath:m}})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(a,h,m,f,d,c,n,e,
l,b){function g(a,b){if(!q)return a.splice(b,1);var c=a.length;if(c){for(;b<c;)a[b]=a[b+1],b++;a.length--}}var q=!!d("chrome"),t=a.shape={};t.Shape=m("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(d("gfxRegistry")){var a=t.register(this);this.getUID=function(){return a}}},destroy:function(){d("gfxRegistry")&&t.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=
null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var a=this.getBoundingBox();if(!a)return null;var c=this._getRealMatrix();return[b.multiplyPoint(c,a.x,a.y),b.multiplyPoint(c,a.x+a.width,a.y),
b.multiplyPoint(c,a.x+a.width,a.y+a.height),b.multiplyPoint(c,a.x,a.y+a.height)]},getEventSource:function(){return this.rawNode},setClip:function(a){this.clip=a},getClip:function(){return this.clip},setShape:function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;return this},setFill:function(b){if(!b)return this.fillStyle=null,this;var c=null;if("object"==typeof b&&"type"in b)switch(b.type){case "linear":c=a.makeParameters(a.defaultLinearGradient,b);break;case "radial":c=a.makeParameters(a.defaultRadialGradient,
b);break;case "pattern":c=a.makeParameters(a.defaultPattern,b)}else c=a.normalizeColor(b);this.fillStyle=c;return this},setStroke:function(b){if(!b)return this.strokeStyle=null,this;if("string"==typeof b||h.isArray(b)||b instanceof l)b={color:b};b=this.strokeStyle=a.makeParameters(a.defaultStroke,b);b.color=a.normalizeColor(b.color);return this},setTransform:function(a){this.matrix=b.clone(a?b.normalize(a):b.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=
this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&
this.parent.remove(this,a);return this},_setParent:function(a,b){this.parent=a;return this._updateParentMatrix(b)},_updateParentMatrix:function(a){this.parentMatrix=a?b.clone(a):null;return this._applyTransform()},_getRealMatrix:function(){for(var a=this.matrix,c=this.parent;c;)c.matrix&&(a=b.multiply(c.matrix,a)),c=c.parent;return a}});t._eventsProcessing={on:function(b,d){return c(this.getEventSource(),b,t.fixCallback(this,a.fixTarget,d))},connect:function(a,b,c){"on"==a.substring(0,2)&&(a=a.substring(2));
return this.on(a,c?h.hitch(b,c):b)},disconnect:function(a){return a.remove()}};t.fixCallback=function(a,b,c,d){d||(d=c,c=null);if(h.isString(d)){c=c||f.global;if(!c[d])throw['dojox.gfx.shape.fixCallback: scope["',d,'"] is null (scope\x3d"',c,'")'].join("");return function(e){return b(e,a)?c[d].apply(c,arguments||[]):void 0}}return c?function(e){return b(e,a)?d.apply(c,arguments||[]):void 0}:function(e){return b(e,a)?d.apply(c,arguments):void 0}};h.extend(t.Shape,t._eventsProcessing);t.Container={_init:function(){this.children=
[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(a){var b=a.getParent();b&&b.remove(a,!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,b){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){b||(a.parent=null,a.parentMatrix=null);g(this.children,c);break}return this},clear:function(a){for(var b,c=0;c<this.children.length;++c)b=this.children[c],b.parent=null,b.parentMatrix=null,a&&b.destroy();this.children=
[];return this},getBoundingBox:function(){if(this.children){var a=null;n.forEach(this.children,function(c){var d=c.getBoundingBox();d&&((c=c.getTransform())&&(d=b.multiplyRectangle(c,d)),a?(a.x=Math.min(a.x,d.x),a.y=Math.min(a.y,d.y),a.endX=Math.max(a.endX,d.x+d.width),a.endY=Math.max(a.endY,d.y+d.height)):a={x:d.x,y:d.y,endX:d.x+d.width,endY:d.y+d.height})});a&&(a.width=a.endX-a.x,a.height=a.endY-a.y);return a}return null},_moveChildToFront:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==
a){g(this.children,b);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){g(this.children,b);this.children.unshift(a);break}return this}};t.Surface=m("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){n.forEach(this._nodes,e.destroy);this._nodes=[];n.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;
if(d("ie"))for(;this._parent.lastChild;)e.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(a){},whenLoaded:function(a,b){var d=h.hitch(a,b);if(this.isLoaded)d(this);else c.once(this,"load",function(a){d(a)})}});h.extend(t.Surface,t._eventsProcessing);t.Rect=m("dojox.gfx.shape.Rect",t.Shape,{constructor:function(b){this.shape=a.getDefault("Rect");this.rawNode=
b},getBoundingBox:function(){return this.shape}});t.Ellipse=m("dojox.gfx.shape.Ellipse",t.Shape,{constructor:function(b){this.shape=a.getDefault("Ellipse");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});t.Circle=m("dojox.gfx.shape.Circle",t.Shape,{constructor:function(b){this.shape=a.getDefault("Circle");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-
a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});t.Line=m("dojox.gfx.shape.Line",t.Shape,{constructor:function(b){this.shape=a.getDefault("Line");this.rawNode=b},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});t.Polyline=m("dojox.gfx.shape.Polyline",t.Shape,{constructor:function(b){this.shape=a.getDefault("Polyline");this.rawNode=b},setShape:function(a,
b){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);return this},_normalizePoints:function(){var a=this.shape.points,b=a&&a.length;if(b&&"number"==typeof a[0]){for(var c=[],d=0;d<b;d+=2)c.push({x:a[d],y:a[d+1]});this.shape.points=c}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,b=a.length,c=a[0],d=c.x,e=c.y,f=c.x,g=c.y,h=1;h<b;++h)c=
a[h],d>c.x&&(d=c.x),f<c.x&&(f=c.x),e>c.y&&(e=c.y),g<c.y&&(g=c.y);this.bbox={x:d,y:e,width:f-d,height:g-e}}return this.bbox}});t.Image=m("dojox.gfx.shape.Image",t.Shape,{constructor:function(b){this.shape=a.getDefault("Image");this.rawNode=b},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});t.Text=m(t.Shape,{constructor:function(b){this.fontStyle=null;this.shape=a.getDefault("Text");this.rawNode=b},getFont:function(){return this.fontStyle},
setFont:function(b){this.fontStyle="string"==typeof b?a.splitFontString(b):a.makeParameters(a.defaultFont,b);this._setFont();return this},getBoundingBox:function(){var b=null;this.getShape().text&&(b=a._base._computeTextBoundingBox(this));return b}});t.Creator={createShape:function(b){switch(b.type){case a.defaultPath.type:return this.createPath(b);case a.defaultRect.type:return this.createRect(b);case a.defaultCircle.type:return this.createCircle(b);case a.defaultEllipse.type:return this.createEllipse(b);
case a.defaultLine.type:return this.createLine(b);case a.defaultPolyline.type:return this.createPolyline(b);case a.defaultImage.type:return this.createImage(b);case a.defaultText.type:return this.createText(b);case a.defaultTextPath.type:return this.createTextPath(b)}return null},createGroup:function(){return this.createObject(a.Group)},createRect:function(b){return this.createObject(a.Rect,b)},createEllipse:function(b){return this.createObject(a.Ellipse,b)},createCircle:function(b){return this.createObject(a.Circle,
b)},createLine:function(b){return this.createObject(a.Line,b)},createPolyline:function(b){return this.createObject(a.Polyline,b)},createImage:function(b){return this.createObject(a.Image,b)},createText:function(b){return this.createObject(a.Text,b)},createPath:function(b){return this.createObject(a.Path,b)},createTextPath:function(b){return this.createObject(a.TextPath,{}).setText(b)},createObject:function(a,b){return null}};return t})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),
function(a,h,m,f,d,c,n,e,l,b,g,q){function t(a,b){return m.doc.createElementNS?m.doc.createElementNS(a,b):m.doc.createElement(b)}function w(a,b,c,d){return a.setAttributeNS?a.setAttributeNS(b,c,d):a.setAttribute(c,d)}function v(a){return r.useSvgWeb?m.doc.createTextNode(a,!0):m.doc.createTextNode(a)}var r=b.svg={};r.useSvgWeb="undefined"!=typeof window.svgweb;var p=navigator.userAgent,u=h("ios"),k=h("android"),x=h("chrome")||k&&4<=k?"auto":"optimizeLegibility";r.xmlns={xlink:"http://www.w3.org/1999/xlink",
svg:"http://www.w3.org/2000/svg"};r.getRef=function(a){return a&&"none"!=a?a.match(/^url\(#.+\)$/)?f.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?f.byId(a.slice(1)):null:null};r.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var B=0;r.Shape=d("dojox.gfx.svg.Shape",g.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var a=
this.rawNode.getAttribute("fill");(a=r.getRef(a))&&a.parentNode.removeChild(a)}this.clip&&(a=this.rawNode.getAttribute("clip-path"))&&(a=f.byId(a.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);g.Shape.prototype.destroy.apply(this,arguments)},setFill:function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var d,e=function(a){this.setAttribute(a,d[a].toFixed(8))};if("object"==typeof a&&"type"in a){switch(a.type){case "linear":d=
b.makeParameters(b.defaultLinearGradient,a);a=this._setFillObject(d,"linearGradient");c.forEach(["x1","y1","x2","y2"],e,a);break;case "radial":d=b.makeParameters(b.defaultRadialGradient,a);a=this._setFillObject(d,"radialGradient");c.forEach(["cx","cy","r"],e,a);break;case "pattern":d=b.makeParameters(b.defaultPattern,a),a=this._setFillObject(d,"pattern"),c.forEach(["x","y","width","height"],e,a)}this.fillStyle=d;return this}this.fillStyle=d=b.normalizeColor(a);this.rawNode.setAttribute("fill",d.toCss());
this.rawNode.setAttribute("fill-opacity",d.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(c){var d=this.rawNode;if(!c)return this.strokeStyle=null,d.setAttribute("stroke","none"),d.setAttribute("stroke-opacity",0),this;if("string"==typeof c||a.isArray(c)||c instanceof l)c={color:c};c=this.strokeStyle=b.makeParameters(b.defaultStroke,c);c.color=b.normalizeColor(c.color);if(c){var e=0>c.width?0:c.width;d.setAttribute("stroke",c.color.toCss());d.setAttribute("stroke-opacity",
c.color.a);d.setAttribute("stroke-width",e);d.setAttribute("stroke-linecap",c.cap);"number"==typeof c.join?(d.setAttribute("stroke-linejoin","miter"),d.setAttribute("stroke-miterlimit",c.join)):d.setAttribute("stroke-linejoin",c.join);var f=c.style.toLowerCase();f in r.dasharray&&(f=r.dasharray[f]);if(f instanceof Array){var f=a._toArray(f),g;for(g=0;g<f.length;++g)f[g]*=e;if("butt"!=c.cap){for(g=0;g<f.length;g+=2)f[g]-=e,1>f[g]&&(f[g]=1);for(g=1;g<f.length;g+=2)f[g]+=e}f=f.join(",")}d.setAttribute("stroke-dasharray",
f);d.setAttribute("dojoGfxStrokeStyle",c.style)}return this},_getParentSurface:function(){for(var a=this.parent;a&&!(a instanceof b.Surface);a=a.parent);return a},_setFillObject:function(a,c){var d=r.xmlns.svg;this.fillStyle=a;var e=this._getParentSurface().defNode,f=this.rawNode.getAttribute("fill");if(f=r.getRef(f))if(f.tagName.toLowerCase()!=c.toLowerCase()){var g=f.id;f.parentNode.removeChild(f);f=t(d,c);f.setAttribute("id",g);e.appendChild(f)}else for(;f.childNodes.length;)f.removeChild(f.lastChild);
else f=t(d,c),f.setAttribute("id",b._base._getUniqueId()),e.appendChild(f);if("pattern"==c)f.setAttribute("patternUnits","userSpaceOnUse"),d=t(d,"image"),d.setAttribute("x",0),d.setAttribute("y",0),d.setAttribute("width",(0>a.width?0:a.width).toFixed(8)),d.setAttribute("height",(0>a.height?0:a.height).toFixed(8)),w(d,r.xmlns.xlink,"xlink:href",a.src),f.appendChild(d);else for(f.setAttribute("gradientUnits","userSpaceOnUse"),c=0;c<a.colors.length;++c){var e=a.colors[c],g=t(d,"stop"),h=e.color=b.normalizeColor(e.color);
g.setAttribute("offset",e.offset.toFixed(8));g.setAttribute("stop-color",h.toCss());g.setAttribute("stop-opacity",h.a);f.appendChild(g)}this.rawNode.setAttribute("fill","url(#"+f.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return f},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+
","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(a){a=this.rawNode=a;"image"!=this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this},setShape:function(a){this.shape=b.makeParameters(this.shape,
a);for(var c in this.shape)if("type"!=c){a=this.shape[c];if("width"===c||"height"===c)a=0>a?0:a;this.rawNode.setAttribute(c,a)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(b){this.inherited(arguments);var c=b?"width"in b?"rect":"cx"in b?"ellipse":"points"in b?"polyline":"d"in b?"path":null:null;
if(b&&!c)return this;"polyline"===c&&(b=a.clone(b),b.points=b.points.join(","));var d,g=e.get(this.rawNode,"clip-path");g&&(d=f.byId(g.match(/gfx_clip[\d]+/)[0]))&&d.removeChild(d.childNodes[0]);b?(d?(c=t(r.xmlns.svg,c),d.appendChild(c)):(g="gfx_clip"+ ++B,this.rawNode.setAttribute("clip-path","url(#"+g+")"),d=t(r.xmlns.svg,"clipPath"),c=t(r.xmlns.svg,c),d.appendChild(c),this.rawNode.parentNode.insertBefore(d,this.rawNode),e.set(d,"id",g)),e.set(c,b)):(this.rawNode.removeAttribute("clip-path"),d&&
d.parentNode.removeChild(d));return this},_removeClipNode:function(){var a,b=e.get(this.rawNode,"clip-path");b&&(a=f.byId(b.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a}});r.Group=d("dojox.gfx.svg.Group",r.Shape,{constructor:function(){g.Container._init.call(this)},setRawNode:function(a){this.rawNode=a;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);r.Shape.prototype.destroy.apply(this,arguments)}});r.Group.nodeType="g";r.Rect=d("dojox.gfx.svg.Rect",[r.Shape,
g.Rect],{setShape:function(a){this.shape=b.makeParameters(this.shape,a);this.bbox=null;for(var c in this.shape)if("type"!=c&&"r"!=c){a=this.shape[c];if("width"===c||"height"===c)a=0>a?0:a;this.rawNode.setAttribute(c,a)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});r.Rect.nodeType="rect";r.Ellipse=d("dojox.gfx.svg.Ellipse",[r.Shape,g.Ellipse],{});r.Ellipse.nodeType="ellipse";r.Circle=d("dojox.gfx.svg.Circle",[r.Shape,
g.Circle],{});r.Circle.nodeType="circle";r.Line=d("dojox.gfx.svg.Line",[r.Shape,g.Line],{});r.Line.nodeType="line";r.Polyline=d("dojox.gfx.svg.Polyline",[r.Shape,g.Polyline],{setShape:function(a,c){a&&a instanceof Array?(this.shape=b.makeParameters(this.shape,{points:a}),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=b.makeParameters(this.shape,a);this.bbox=null;this._normalizePoints();a=[];c=this.shape.points;for(var d=0;d<c.length;++d)a.push(c[d].x.toFixed(8),
c[d].y.toFixed(8));this.rawNode.setAttribute("points",a.join(" "));return this}});r.Polyline.nodeType="polyline";r.Image=d("dojox.gfx.svg.Image",[r.Shape,g.Image],{setShape:function(a){this.shape=b.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;for(var c in this.shape)if("type"!=c&&"src"!=c){var d=this.shape[c];if("width"===c||"height"===c)d=0>d?0:d;a.setAttribute(c,d)}a.setAttribute("preserveAspectRatio","none");w(a,r.xmlns.xlink,"xlink:href",this.shape.src);a.__gfxObject__=this;return this}});
r.Image.nodeType="image";r.Text=d("dojox.gfx.svg.Text",[r.Shape,g.Text],{setShape:function(a){this.shape=b.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;var c=this.shape;a.setAttribute("x",c.x);a.setAttribute("y",c.y);a.setAttribute("text-anchor",c.align);a.setAttribute("text-decoration",c.decoration);a.setAttribute("rotate",c.rotated?90:0);a.setAttribute("kerning",c.kerning?"auto":0);a.setAttribute("text-rendering",x);a.firstChild?a.firstChild.nodeValue=c.text:a.appendChild(v(c.text));
return this},getTextWidth:function(){var a=this.rawNode,b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,d=a.firstChild.nodeValue;b.appendChild(a);if(""!=d)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width):68;b.removeChild(a);return c},getBoundingBox:function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(D){a={x:0,y:0,width:0,height:0}}return a}});r.Text.nodeType="text";r.Path=d("dojox.gfx.svg.Path",[r.Shape,q.Path],{_updateWithSegment:function(a){this.inherited(arguments);
"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});r.Path.nodeType="path";r.TextPath=d("dojox.gfx.svg.TextPath",[r.Shape,q.TextPath],{_updateWithSegment:function(a){this.inherited(arguments);this._setTextPath()},setShape:function(a){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==
typeof this.shape.path){var a=this.rawNode;if(!a.firstChild){var c=t(r.xmlns.svg,"textPath"),d=v("");c.appendChild(d);a.appendChild(c)}c=(c=a.firstChild.getAttributeNS(r.xmlns.xlink,"href"))&&r.getRef(c);if(!c&&(d=this._getParentSurface())){var d=d.defNode,c=t(r.xmlns.svg,"path"),e=b._base._getUniqueId();c.setAttribute("id",e);d.appendChild(c);w(a.firstChild,r.xmlns.xlink,"xlink:href","#"+e)}c&&c.setAttribute("d",this.shape.path)}},_setText:function(){var a=this.rawNode;if(!a.firstChild){var b=t(r.xmlns.svg,
"textPath"),c=v("");b.appendChild(c);a.appendChild(b)}a=a.firstChild;b=this.text;a.setAttribute("alignment-baseline","middle");switch(b.align){case "middle":a.setAttribute("text-anchor","middle");a.setAttribute("startOffset","50%");break;case "end":a.setAttribute("text-anchor","end");a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor","start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift","0.5ex");a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",
b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.firstChild.data=b.text}});r.TextPath.nodeType="text";var y=534<function(){var a=/WebKit\/(\d*)/.exec(p);return a?a[1]:0}();r.Surface=d("dojox.gfx.svg.Surface",g.Surface,{constructor:function(){g.Container._init.call(this)},destroy:function(){g.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(a,b){if(!this.rawNode)return this;a=0>a?0:a;b=0>b?0:b;this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",
b);y&&(this.rawNode.style.width=a,this.rawNode.style.height=b);return this},getDimensions:function(){return this.rawNode?{width:b.normalizedLength(this.rawNode.getAttribute("width")),height:b.normalizedLength(this.rawNode.getAttribute("height"))}:null}});r.createSurface=function(a,c,d){var e=new r.Surface;e.rawNode=t(r.xmlns.svg,"svg");e.rawNode.setAttribute("overflow","hidden");c&&e.rawNode.setAttribute("width",0>c?0:c);d&&e.rawNode.setAttribute("height",0>d?0:d);c=t(r.xmlns.svg,"defs");e.rawNode.appendChild(c);
e.defNode=c;e._parent=f.byId(a);e._parent.appendChild(e.rawNode);b._base._fixMsTouchAction(e);return e};h={_setFont:function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)}};var z=g.Container;d=r.Container={openBatch:function(){if(!this._batch){var a;a=r.useSvgWeb?m.doc.createDocumentFragment(!0):
m.doc.createDocumentFragment();this.fragment=a}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(a){this!=a.getParent()&&(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),z.add.apply(this,arguments),a.setClip(a.clip));return this},remove:function(a,b){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&
this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),a._removeClipNode(),z.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var b=this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);a.appendChild(b)}return z.clear.apply(this,arguments)},getBoundingBox:z.getBoundingBox,_moveChildToFront:z._moveChildToFront,_moveChildToBack:z._moveChildToBack};
q=r.Creator={createObject:function(a,b){if(!this.rawNode)return null;var c=new a;a=t(r.xmlns.svg,a.nodeType);c.setRawNode(a);c.setShape(b);this.add(c);return c}};a.extend(r.Text,h);a.extend(r.TextPath,h);a.extend(r.Group,d);a.extend(r.Group,g.Creator);a.extend(r.Group,q);a.extend(r.Surface,d);a.extend(r.Surface,g.Creator);a.extend(r.Surface,q);r.fixTarget=function(a,b){a.gfxTarget||(a.gfxTarget=u&&a.target.wholeText?a.target.parentElement.__gfxObject__:a.target.__gfxObject__);return!0};r.useSvgWeb&&
(r.createSurface=function(a,c,d){var e=new r.Surface;c=0>c?0:c;d=0>d?0:d;if(!c||!d){var g=n.position(a);c=c||g.w;d=d||g.h}a=f.byId(a);var g=a.id?a.id+"_svgweb":b._base._getUniqueId(),h=t(r.xmlns.svg,"svg");h.id=g;h.setAttribute("width",c);h.setAttribute("height",d);svgweb.appendChild(h,a);h.addEventListener("SVGLoad",function(){e.rawNode=this;e.isLoaded=!0;var a=t(r.xmlns.svg,"defs");e.rawNode.appendChild(a);e.defNode=a;if(e.onLoad)e.onLoad(e)},!1);e.isLoaded=!1;return e},r.Surface.extend({destroy:function(){var a=
this.rawNode;svgweb.removeChild(a,a.parentNode)}}),h={connect:function(b,c,d){"on"===b.substring(0,2)&&(b=b.substring(2));d=2==arguments.length?c:a.hitch(c,d);this.getEventSource().addEventListener(b,d,!1);return[this,b,d]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);delete a[0]}},a.extend(r.Shape,h),a.extend(r.Surface,h));return r})},"dojo/io/script":function(){define("../_base/connect ../_base/kernel ../_base/lang ../sniff ../_base/window ../_base/xhr ../dom ../dom-construct ../request/script ../aspect".split(" "),
function(a,h,m,f,d,c,n,e,l,b){h.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var g={get:function(a){var d,e=this._makeScriptDeferred(a,function(a){d&&d.cancel()}),f=e.ioArgs;c._ioAddQueryToUrl(f);c._ioNotifyStart(e);d=l.get(f.url,{timeout:a.timeout,jsonp:f.jsonp,checkString:a.checkString,ioArgs:f,frameDoc:a.frameDoc,canAttach:function(a){f.requestId=a.id;f.scriptId=a.scriptId;f.canDelete=a.canDelete;return g._canAttach(f)}},!0);b.around(d,"isValid",function(a){return function(b){g._validCheck(e);
return a.call(this,b)}});d.then(function(){e.resolve(e)}).otherwise(function(a){e.ioArgs.error=a;e.reject(a)});return e},attach:l._attach,remove:l._remove,_makeScriptDeferred:function(a,b){b=c._ioSetArgs(a,b||this._deferredCancel,this._deferredOk,this._deferredError);var d=b.ioArgs;d.id=h._scopeName+"IoScript"+(a.callbackSuffix||this._counter++);d.canDelete=!1;d.jsonp=a.callbackParamName||a.jsonp;d.jsonp&&(d.query=d.query||"",0<d.query.length&&(d.query+="\x26"),d.query+=d.jsonp+"\x3d"+(a.frameDoc?
"parent.":"")+h._scopeName+".io.script.jsonp_"+d.id+"._jsonpCallback",d.frameDoc=a.frameDoc,d.canDelete=!0,b._jsonpCallback=this._jsonpCallback,this["jsonp_"+d.id]=b);b.addBoth(function(a){d.canDelete&&(a instanceof Error?g["jsonp_"+d.id]._jsonpCallback=function(){delete g["jsonp_"+d.id];if(d.requestId)h.global[l._callbacksProperty][d.requestId]()}:g._addDeadScript(d))});return b},_deferredCancel:function(a){a.canceled=!0},_deferredOk:function(a){a=a.ioArgs;return a.json||a.scriptLoaded||a},_deferredError:function(a,
b){return a},_deadScripts:[],_counter:1,_addDeadScript:function(a){g._deadScripts.push({id:a.id,frameDoc:a.frameDoc});a.frameDoc=null},_validCheck:function(a){if((a=g._deadScripts)&&0<a.length){for(var b=0;b<a.length;b++)g.remove(a[b].id,a[b].frameDoc),delete g["jsonp_"+a[b].id],a[b].frameDoc=null;g._deadScripts=[]}return!0},_ioCheck:function(a){a=a.ioArgs;return a.json||a.scriptLoaded&&!a.args.checkString?!0:(a=a.args.checkString)&&eval("typeof("+a+") !\x3d 'undefined'")},_resHandle:function(a){g._ioCheck(a)?
a.callback(a):a.errback(Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(){return!0},_jsonpCallback:function(a){this.ioArgs.json=a;if(this.ioArgs.requestId)h.global[l._callbacksProperty][this.ioArgs.requestId](a)}};m.setObject("dojo.io.script",g);return g})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(a,h,m,f,d,c,n,e,l,b,g){function q(a,
b){a.canDelete&&p._remove(a.id,b.options.frameDoc,!0)}function t(a){z&&z.length&&(d.forEach(z,function(a){p._remove(a.id,a.frameDoc);a.frameDoc=null}),z=[]);return a.options.jsonp?!a.data:!0}function w(a){return!!this.scriptLoaded}function v(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function r(a,b){if(this.canDelete){var c=this.response.options;z.push({id:this.id,frameDoc:c.ioArgs?c.ioArgs.frameDoc:c.frameDoc});c.ioArgs&&(c.ioArgs.frameDoc=null);c.frameDoc=null}b?
this.reject(b):this.resolve(a)}function p(a,b,d){var e=m.parseArgs(a,m.deepCopy({},b));a=e.url;b=e.options;var f=m.deferred(e,q,t,b.jsonp?null:b.checkString?v:w,r);c.mixin(f,{id:u+k++,canDelete:!1});b.jsonp&&((new RegExp("[?\x26]"+b.jsonp+"\x3d")).test(a)||(a+=(~a.indexOf("?")?"\x26":"?")+b.jsonp+"\x3d"+(b.frameDoc?"parent.":"")+u+"_callbacks."+f.id),f.canDelete=!0,y[f.id]=function(a){e.data=a;f.handleResponse(e)});m.notify&&m.notify.emit("send",e,f.promise.cancel);if(!b.canAttach||b.canAttach(f)){var g=
p._attach(f.id,a,b.frameDoc,function(a){if(!(a instanceof Error)){var c=Error("Error loading "+(a.target?a.target.src:"script"));c.source=a;a=c}f.reject(a);p._remove(f.id,b.frameDoc,!0)});if(!b.jsonp&&!b.checkString)var l=n(g,x,function(a){if("load"===a.type||B.test(g.readyState))l.remove(),f.scriptLoaded=a})}h(f);return d?f:f.promise}b.add("script-readystatechange",function(a,b){return"undefined"!==typeof b.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||"[object Opera]"!==
a.opera.toString())});var u=a.id.replace(/[\/\.\-]/g,"_"),k=0,x=b("script-readystatechange")?"readystatechange":"load",B=/complete|loaded/,y=f.global[u+"_callbacks"]={},z=[];p.get=p;p._attach=function(a,b,c,d){c=c||g.doc;var e=c.createElement("script");if(d)n.once(e,"error",d);e.type="text/javascript";try{e.src=b}catch(I){d&&d(e)}e.id=a;e.async=!0;e.charset="utf-8";return c.getElementsByTagName("head")[0].appendChild(e)};p._remove=function(a,b,c){l.destroy(e.byId(a,b));y[a]&&(c?y[a]=function(){delete y[a]}:
delete y[a])};p._callbacksProperty=u+"_callbacks";return p})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(a){return a})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(a,h,m){var f=window,d={addOnWindowUnload:function(c,d){a.windowUnloaded||m(f,"unload",a.windowUnloaded=function(){});m(f,"unload",h.hitch(c,
d))},addOnUnload:function(a,d){m(f,"beforeunload",h.hitch(a,d))}};a.addOnWindowUnload=d.addOnWindowUnload;a.addOnUnload=d.addOnUnload;return d})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(a,h,m,f,d,c,n,e){a.byId=h.byId;a.isDescendant=h.isDescendant;a.setSelectable=h.setSelectable;a.getAttr=f.get;a.setAttr=f.set;a.hasAttr=f.has;a.removeAttr=f.remove;a.getNodeProp=f.getNodeProp;a.attr=
function(a,b,c){return 2==arguments.length?f["string"==typeof b?"get":"set"](a,b):f.set(a,b,c)};a.hasClass=c.contains;a.addClass=c.add;a.removeClass=c.remove;a.toggleClass=c.toggle;a.replaceClass=c.replace;a._toDom=a.toDom=n.toDom;a.place=n.place;a.create=n.create;a.empty=function(a){n.empty(a)};a._destroyElement=a.destroy=function(a){n.destroy(a)};a._getPadExtents=a.getPadExtents=e.getPadExtents;a._getBorderExtents=a.getBorderExtents=e.getBorderExtents;a._getPadBorderExtents=a.getPadBorderExtents=
e.getPadBorderExtents;a._getMarginExtents=a.getMarginExtents=e.getMarginExtents;a._getMarginSize=a.getMarginSize=e.getMarginSize;a._getMarginBox=a.getMarginBox=e.getMarginBox;a.setMarginBox=e.setMarginBox;a._getContentBox=a.getContentBox=e.getContentBox;a.setContentSize=e.setContentSize;a._isBodyLtr=a.isBodyLtr=e.isBodyLtr;a._docScroll=a.docScroll=e.docScroll;a._getIeDocumentElementOffset=a.getIeDocumentElementOffset=e.getIeDocumentElementOffset;a._fixIeBiDiScrollLeft=a.fixIeBiDiScrollLeft=e.fixIeBiDiScrollLeft;
a.position=e.position;a.marginBox=function(a,b){return b?e.setMarginBox(a,b):e.getMarginBox(a)};a.contentBox=function(a,b){return b?e.setContentSize(a,b):e.getContentBox(a)};a.coords=function(c,b){a.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");c=h.byId(c);var d=m.getComputedStyle(c),d=e.getMarginBox(c,d);c=e.position(c,b);d.x=c.x;d.y=c.y;return d};a.getProp=d.get;a.setProp=d.set;a.prop=function(a,b,c){return 2==arguments.length?d["string"==typeof b?"get":"set"](a,b):d.set(a,
b,c)};a.getStyle=m.get;a.setStyle=m.set;a.getComputedStyle=m.getComputedStyle;a.__toPixelValue=a.toPixelValue=m.toPixelValue;a.style=function(a,b,c){switch(arguments.length){case 1:return m.get(a);case 2:return m["string"==typeof b?"get":"set"](a,b)}return m.set(a,b,c)};return a})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(a,h,m){h=h.NodeList;var f=h.prototype;f.connect=h._adaptAsForEach(function(){return a.connect.apply(this,arguments)});
f.coords=h._adaptAsMap(a.coords);h.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");m.forEach(h.events,function(a){var c="on"+a;f[c]=function(a,d){return this.connect(c,a,d)}});return a.NodeList=h})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(a,h,m,f,d,c,n,e,l){function b(a){return function(b,
c,d){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,d)}}var g=function(a){return 1==a.length&&"string"==typeof a[0]},q=function(a){var b=a.parentNode;b&&b.removeChild(a)},t=h.NodeList,w=t._adaptWithCondition,v=t._adaptAsForEach,r=t._adaptAsMap;f.extend(t,{_normalize:function(b,d){var e=!0===b.parse;if("string"==typeof b.template){var g=b.templateFunc||a.string&&a.string.substitute;b=g?g(b.template,b):b}g=typeof b;"string"==g||"number"==g?(b=c.toDom(b,d&&d.ownerDocument),
b=11==b.nodeType?f._toArray(b.childNodes):[b]):f.isArrayLike(b)?f.isArray(b)||(b=f._toArray(b)):b=[b];e&&(b._runParse=!0);return b},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(b,d,e,f){if(1==d.nodeType||"only"!=e)for(var g,h=b.length,k=h-1;0<=k;k--){var l=f?this._cloneNode(b[k]):b[k];if(b._runParse&&a.parser&&a.parser.parse)for(g||(g=d.ownerDocument.createElement("div")),g.appendChild(l),a.parser.parse(g),l=g.firstChild;g.firstChild;)g.removeChild(g.firstChild);k==h-1?c.place(l,
d,e):d.parentNode.insertBefore(l,d);d=l}},position:r(n.position),attr:w(b(e),g),style:w(b(l),g),addClass:v(d.add),removeClass:v(d.remove),toggleClass:v(d.toggle),replaceClass:v(d.replace),empty:v(c.empty),removeAttr:v(e.remove),marginBox:r(n.getMarginBox),place:function(a,b){var d=h(a)[0];return this.forEach(function(a){c.place(a,d,b)})},orphan:function(a){return(a?h._filterResult(this,a):this).forEach(q)},adopt:function(a,b){return h(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;
var b=new t;this.map(function(c){h(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=h._filterResult(this,b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(m.filter(c,b[d],b[d+1]),this)},addContent:function(a,b){a=this._normalize(a,this[0]);for(var d=0,e;e=this[d];d++)a.length?this._place(a,e,b,0<d):c.empty(e);return this}});return t})},"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\n\t${!actionBarTemplate}\n\x3c/div\x3e\n\n',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\n\t\t\t\tid\x3d"${id}_label"\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\n\t\t\t\x3e\x3c/span\n\t\t\x3e\x3c/span\n\t\x3e\x3c/span\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\n/\x3e\x3c/span\x3e\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:esri/widgets/Popup/templates/Popup.html":'\x3cdiv role\x3d"presentation" class\x3d"${_css.invisible}"\x3e\n  \x3c!-- Popup Container --\x3e\n  \x3cdiv data-dojo-attach-point\x3d"_containerNode" class\x3d"${_css.container} ${_css.alignTop} ${_css.shadow}"\x3e\n    \x3cdiv class\x3d"${_css.main}"\x3e\n      \x3c!-- Popup Docked Pagination --\x3e\n      \x3csection class\x3d"${_css.paginationDocked}"\x3e\n        \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\n          \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\n          \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"${_css.paginationDockedButtons}"\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousDockedNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\n          \x3c/div\x3e\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextDockedNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextDockedNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\n          \x3c/div\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuDockedNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e\n      \x3c/section\x3e\n      \x3c!-- /Popup Docked Pagination --\x3e\n      \x3c!-- Popup Header --\x3e\n      \x3cheader class\x3d"${_css.header}"\x3e\n        \x3ch1 data-dojo-attach-point\x3d"_titleNode" class\x3d"${_css.headerTitle}"\x3e\x3c/h1\x3e\n        \x3cdiv class\x3d"${_css.headerButtons}"\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_dockNode" class\x3d"${_css.button} ${_css.buttonDock}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToRight}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToTop}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToLeft}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToBottom}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.dock}\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconUndock}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.undock}\x3c/span\x3e\n          \x3c/div\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_closeNode" class\x3d"${_css.button}" title\x3d"${_i18n.close}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconClose}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.close}\x3c/span\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e\n      \x3c/header\x3e\n      \x3c!-- /Popup Header --\x3e\n      \x3c!-- Popup Content --\x3e\n      \x3carticle class\x3d"${_css.content}" data-dojo-attach-point\x3d"_bodyContentNode"\x3e\x3c/article\x3e\n      \x3c!-- /Popup Content --\x3e\n      \x3c!-- Popup Footer --\x3e\n      \x3cfooter class\x3d"${_css.footer}"\x3e\n        \x3c!-- Popup Actions --\x3e\n        \x3cdiv data-dojo-attach-point\x3d"_actionsNode" class\x3d"${_css.actions}"\x3e\x3c/div\x3e\n        \x3c!-- /Popup Actions --\x3e\n        \x3c!-- Popup Pagination --\x3e\n        \x3csection class\x3d"${_css.pagination}"\x3e\n          \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\n          \x3c/div\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\n          \x3c/div\x3e\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\n          \x3c/div\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\n          \x3c/div\x3e\n        \x3c/section\x3e\n        \x3c!-- /Popup Pagination --\x3e\n      \x3c/footer\x3e\n      \x3c!-- /Popup Footer --\x3e\n      \x3c!-- Popup Menu --\x3e\n      \x3csection class\x3d"${_css.featureMenu}" data-dojo-attach-point\x3d"_pageMenuSectionNode" aria-hidden\x3d"true"\x3e\n        \x3ch2 class\x3d"${_css.featureMenuHeader}" data-dojo-attach-point\x3d"_pageMenuInfoNode"\x3e\x3c/h2\x3e\n        \x3cnav class\x3d"${_css.featureMenuViewport}"\x3e\n          \x3col class\x3d"${_css.featureMenuList}" role\x3d"menu" data-dojo-attach-point\x3d"_paginationNode"\x3e\x3c/ol\x3e\n        \x3c/nav\x3e\n      \x3c/section\x3e\n      \x3c!-- /Popup Menu --\x3e\n    \x3c/div\x3e\n    \x3c!-- Popup Pointer --\x3e\n    \x3cdiv class\x3d"${_css.pointer}" role\x3d"presentation"\x3e\n      \x3cdiv class\x3d"${_css.pointerDirection} ${_css.shadow}"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3c!-- /Popup Pointer --\x3e\n  \x3c/div\x3e\n  \x3c!-- /Popup Container --\x3e\n\x3c/div\x3e\n',
"url:esri/views/2d/engine/webgl/Shaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\n\x3c!--\n  Add your GLSL snippets to this file. You should start from\n  importing your old GLSL files. For instance, if you have a\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\n  and then copy and paste the GLSL source as the content. You will then convert your\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\n--\x3e\n\x3csnippets\x3e\n\n  \x3csnippet name\x3d"foobarVS"\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"foobarFS"\x3e\n  \x3c/snippet\x3e\n\n\x3c/snippets\x3e\n\n',
"url:esri/views/2d/engine/webgl/bitblit.vs.glsl":"attribute vec2 a_pos;\nattribute vec2 a_tex;\n\nvarying mediump vec2 v_uv;\n\nvoid main(void) {\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\n  v_uv \x3d a_tex;\n}\n","url:esri/views/2d/engine/webgl/bitblit.fs.glsl":"\tuniform lowp sampler2D u_tex;\n\tuniform lowp float u_opacity;\n\n\tvarying mediump vec2 v_uv;\n\n\tvoid main() {\n\t\tlowp vec4 color \x3d texture2D(u_tex, v_uv);\n\n    // Note: output in pre-multiplied alpha for correct alpha compositing\n\t\tgl_FragColor \x3d color *  u_opacity;\n\t}\n",
"url:esri/views/2d/engine/webgl/stencil.vs.glsl":"attribute vec2 a_pos;\n\nvoid main() {\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\n}\n","url:esri/views/2d/engine/webgl/stencil.fs.glsl":"void main() {\n  gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\n}\n","*now":function(a){a(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn"]'])},"*noref":1}});
(function(){var a=this.require;a({cache:{}});!a.async&&a(["dojo"]);a.boot&&a.apply(null,a.boot)})();