//>>built
(function(e,h){var d,a=function(){},b=function(f){for(var a in f)return 0;return 1},c={}.toString,m=function(f){return"[object Function]"==c.call(f)},k=function(f){return"[object String]"==c.call(f)},l=function(f){return"[object Array]"==c.call(f)},g=function(f,a){if(f)for(var g=0;g<f.length;)a(f[g++])},n=function(f,a){for(var g in a)f[g]=a[g];return f},u=function(f,a){return n(Error(f),{src:"dojoLoader",info:a})},r=1,t=function(){return"_"+r++},w=function(f,a,g){return ta(f,a,g,0,w)},q=this,v=q.document,
x=v&&v.createElement("DiV"),f=w.has=function(f){return m(p[f])?p[f]=p[f](q,v,x):p[f]},p=f.cache=h.hasCache;f.add=function(a,g,b,c){(void 0===p[a]||c)&&(p[a]=g);return b&&f(a)};f.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);f("host-webworker")&&(n(h.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),h.loaderPatch={injectUrl:function(f,a){try{importScripts(f),a()}catch(gb){console.info("failed to load resource ("+
f+")"),console.error(gb)}}});for(var z in e.has)f.add(z,e.has[z],0,1);w.async=1;var y=f("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");w.eval=function(f,a){return y(f+"\r\n//# sourceURL\x3d"+a)};var A={},B=w.signal=function(f,a){f=A[f];g(f&&f.slice(0),function(f){f.apply(null,l(a)?a:[a])})},D=w.on=function(f,a){var g=A[f]||(A[f]=[]);g.push(a);return{remove:function(){for(var f=0;f<g.length;f++)if(g[f]===a){g.splice(f,1);break}}}},F=[],C={},E=[],G={},K=w.map={},L=[],H=
{},I="",N={},S={};z={};var M=0,ca=function(f){var a,g,b,c;for(a in S)g=S[a],(b=a.match(/^url\:(.+)/))?N["url:"+$a(b[1],f)]=g:"*now"==a?c=g:"*noref"!=a&&(b=za(a,f,!0),N[b.mid]=N["url:"+b.url]=g);c&&c(ra(f));S={}},O=function(f){return f.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(f){return"\\"+f})},P=function(f,a){a.splice(0,a.length);for(var g in f)a.push([g,f[g],new RegExp("^"+O(g)+"(/|$)"),g.length]);a.sort(function(f,a){return a[3]-f[3]});return a},W=function(f,a){g(f,function(f){a.push([k(f[0])?
new RegExp("^"+O(f[0])+"$"):f[0],f[1]])})},aa=function(f){var a=f.name;a||(a=f,f={name:a});f=n({main:"main"},f);f.location=f.location?f.location:a;f.packageMap&&(K[a]=f.packageMap);f.main.indexOf("./")||(f.main=f.main.substring(2));G[a]=f},R=[],T=function(a,b,c){for(var d in a){"waitSeconds"==d&&(w.waitms=1E3*(a[d]||0));"cacheBust"==d&&(I=a[d]?k(a[d])?a[d]:(new Date).getTime()+"":"");if("baseUrl"==d||"combo"==d)w[d]=a[d];a[d]!==p&&(w.rawConfig[d]=a[d],"has"!=d&&f.add("config-"+d,a[d],0,b))}w.baseUrl||
(w.baseUrl="./");/\/$/.test(w.baseUrl)||(w.baseUrl+="/");for(d in a.has)f.add(d,a.has[d],0,b);g(a.packages,aa);for(var e in a.packagePaths)g(a.packagePaths[e],function(f){var a=e+"/"+f;k(f)&&(f={name:f});f.location=a;aa(f)});P(n(K,a.map),L);g(L,function(f){f[1]=P(f[1],[]);"*"==f[0]&&(L.star=f)});P(n(C,a.paths),E);W(a.aliases,F);if(b)R.push({config:a.config});else for(d in a.config)b=Ha(d,c),b.config=n(b.config||{},a.config[d]);a.cache&&(ca(),S=a.cache,a.cache["*noref"]&&ca());B("config",[a,w.rawConfig])};
if(f("dojo-cdn")){var ba=v.getElementsByTagName("script");d=0;for(var U,ea,Z,fa;d<ba.length;)if(U=ba[d++],(Z=U.getAttribute("src"))&&(fa=Z.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(ea=fa[3]||"",h.baseUrl=h.baseUrl||ea,M=U),Z=U.getAttribute("data-dojo-config")||U.getAttribute("djConfig"))z=w.eval("({ "+Z+" })","data-dojo-config"),M=U}w.rawConfig={};T(h,1);f("dojo-cdn")&&((G.dojo.location=ea)&&(ea+="/"),G.dijit.location=ea+"../dijit/",G.dojox.location=ea+"../dojox/");T(e,1);T(z,1);var ja=function(f){J(function(){g(f.deps,
nb)})},ta=function(f,g,b,c,p){var d;if(k(f)){if((d=Ha(f,c,!0))&&d.executed)return d.result;throw u("undefinedModule",f);}l(f)||(T(f,0,c),f=g,g=b);if(l(f))if(f.length){b="require*"+t();for(var e,m=[],v=0;v<f.length;)e=f[v++],m.push(Ha(e,c));d=n(Ua("",b,0,""),{injected:2,deps:m,def:g||a,require:c?c.require:w,gc:1});H[d.mid]=d;ja(d);var r=ma&&!0;J(function(){V(d,r)});d.executed||Aa.push(d);ia()}else g&&g();return p},ra=function(f){if(!f)return w;var a=f.require;a||(a=function(g,b,c){return ta(g,b,c,
f,a)},f.require=n(a,w),a.module=f,a.toUrl=function(a){return $a(a,f)},a.toAbsMid=function(a){return Ra(a,f)});return a},Aa=[],Fa=[],pa={},ib=function(f){f.injected=1;pa[f.mid]=1;f.url&&(pa[f.url]=f.pack||1);sb()},Ia=function(f){f.injected=2;delete pa[f.mid];f.url&&delete pa[f.url];b(pa)&&Va()},wa=w.idle=function(){return!Fa.length&&b(pa)&&!Aa.length&&!ma},xa=function(f,a){if(a)for(var g=0;g<a.length;g++)if(a[g][2].test(f))return a[g];return 0},Ja=function(f){var a=[],g,b;for(f=f.replace(/\\/g,"/").split("/");f.length;)g=
f.shift(),".."==g&&a.length&&".."!=b?(a.pop(),b=a[a.length-1]):"."!=g&&a.push(b=g);return a.join("/")},Ua=function(f,a,g,b){return{pid:f,mid:a,pack:g,url:b,executed:0,def:0}},bb=function(f,a,b,c,p,d,e,k,n){var l,v,r,q;q=/^\./.test(f);if(/(^\/)|(\:)|(\.js$)/.test(f)||q&&!a)return Ua(0,f,0,f);f=Ja(q?a.mid+"/../"+f:f);if(/^\./.test(f))throw u("irrationalPath",f);a&&(r=xa(a.mid,d));(r=(r=r||d.star)&&xa(f,r[1]))&&(f=r[1]+f.substring(r[3]));a=(fa=f.match(/^([^\/]+)(\/(.+))?$/))?fa[1]:"";(l=b[a])?f=a+"/"+
(v=fa[3]||l.main):a="";var t=0;g(k,function(a){var g=f.match(a[0]);g&&0<g.length&&(t=m(a[1])?f.replace(a[0],a[1]):a[1])});if(t)return bb(t,0,b,c,p,d,e,k,n);if(b=c[f])return n?Ua(b.pid,b.mid,b.pack,b.url):c[f];c=(r=xa(f,e))?r[1]+f.substring(r[3]):a?l.location+"/"+v:f;/(^\/)|(\:)/.test(c)||(c=p+c);return Ua(a,f,l,Ja(c+".js"))},za=function(f,a,g){return bb(f,a,G,H,w.baseUrl,g?[]:L,g?[]:E,g?[]:F)},Na=function(f,a,g){return f.normalize?f.normalize(a,function(f){return Ra(f,g)}):Ra(a,g)},Ga=0,Ha=function(f,
a,g){var b,c;(b=f.match(/^(.+?)\!(.*)$/))?(c=Ha(b[1],a,g),5!==c.executed||c.load||Ma(c),c.load?(b=Na(c,b[2],a),f=c.mid+"!"+(c.dynamic?++Ga+"!":"")+b):(b=b[2],f=c.mid+"!"+ ++Ga+"!waitingForPlugin"),f={plugin:c,mid:f,req:ra(a),prid:b}):f=za(f,a);return H[f.mid]||!g&&(H[f.mid]=f)},Ra=w.toAbsMid=function(f,a){return za(f,a).mid},$a=w.toUrl=function(f,a){a=za(f+"/x",a);var g=a.url;return la(0===a.pid?f:g.substring(0,g.length-5))},Ea={injected:2,executed:5,def:3,result:3};ea=function(f){return H[f]=n({mid:f},
Ea)};var Oa=ea("require"),X=ea("exports"),Ba=ea("module"),ua={},ka=0,Ma=function(f){var a=f.result;f.dynamic=a.dynamic;f.normalize=a.normalize;f.load=a.load;return f},Ka=function(f){var a={};g(f.loadQ,function(g){var b=Na(f,g.prid,g.req.module),c=f.dynamic?g.mid.replace(/waitingForPlugin$/,b):f.mid+"!"+b,b=n(n({},g),{mid:c,prid:b,injected:0});H[c]&&H[c].injected||na(H[c]=b);a[g.mid]=H[c];Ia(g);delete H[g.mid]});f.loadQ=0;var b=function(f){for(var g=f.deps||[],b=0;b<g.length;b++)(f=a[g[b].mid])&&(g[b]=
f)},c;for(c in H)b(H[c]);g(Aa,b)},ga=function(f){w.trace("loader-finish-exec",[f.mid]);f.executed=5;f.defOrder=ka++;f.loadQ&&(Ma(f),Ka(f));for(d=0;d<Aa.length;)Aa[d]===f?Aa.splice(d,1):d++;/^require\*/.test(f.mid)&&delete H[f.mid]},cb=[],V=function(f,a){if(4===f.executed)return w.trace("loader-circular-dependency",[cb.concat(f.mid).join("-\x3e")]),!f.def||a?ua:f.cjs&&f.cjs.exports;if(!f.executed){if(!f.def)return ua;var g=f.mid,b=f.deps||[],c,p=[],d=0;for(f.executed=4;c=b[d++];){c=c===Oa?ra(f):c===
X?f.cjs.exports:c===Ba?f.cjs:V(c,a);if(c===ua)return f.executed=0,w.trace("loader-exec-module",["abort",g]),ua;p.push(c)}w.trace("loader-run-factory",[f.mid]);a=f.def;p=m(a)?a.apply(null,p):a;f.result=void 0===p&&f.cjs?f.cjs.exports:p;ga(f)}return f.result},ma=0,J=function(f){try{ma++,f()}catch(kb){throw kb;}finally{ma--}wa()&&B("idle",[])},ia=function(){ma||J(function(){for(var f,a,g=0;g<Aa.length;)f=ka,a=Aa[g],V(a),f!=ka?g=0:g++})};void 0===f("dojo-loader-eval-hint-url")&&f.add("dojo-loader-eval-hint-url",
1);var la="function"==typeof e.fixupUrl?e.fixupUrl:function(f){f+="";return f+(I?(/\?/.test(f)?"\x26":"?")+I:"")},na=function(f){var a=f.plugin;5!==a.executed||a.load||Ma(a);var g=function(a){f.result=a;Ia(f);ga(f);ia()};a.load?a.load(f.prid,f.req,g):a.loadQ?a.loadQ.push(f):(a.loadQ=[f],Aa.unshift(a),nb(a))},da=0,ha=0,Q=0,Wa=function(a,g){f("config-stripStrict")&&(a=a.replace(/(["'])use strict\1/g,""));Q=1;a===da?da.call(null):w.eval(a,f("dojo-loader-eval-hint-url")?g.url:g.mid);Q=0},nb=function(a){var g=
a.mid,b=a.url;if(!(a.executed||a.injected||pa[g]||a.url&&(a.pack&&pa[a.url]===a.pack||1==pa[a.url])))if(ib(a),a.plugin)na(a);else{var c=function(){ub(a);if(2!==a.injected){if(f("dojo-enforceDefine")){B("error",u("noDefine",a));return}Ia(a);n(a,Ea);w.trace("loader-define-nonmodule",[a.url])}ia()};(da=N[g]||N["url:"+a.url])?(w.trace("loader-inject",["cache",a.mid,b]),Wa(da,a),c()):(w.trace("loader-inject",["script",a.mid,b]),ha=a,w.injectUrl(la(b),c,a),ha=0)}},lb=function(f,a,g){w.trace("loader-define-module",
[f.mid,a]);if(2===f.injected)return B("error",u("multipleDefine",f)),f;n(f,{deps:a,def:g,cjs:{id:f.mid,uri:f.url,exports:f.result={},setExports:function(a){f.cjs.exports=a},config:function(){return f.config}}});for(var b=0;a[b];b++)a[b]=Ha(a[b],f);Ia(f);m(g)||a.length||(f.result=g,ga(f));return f},ub=function(f,a){for(var b=[],c,p;Fa.length;)p=Fa.shift(),a&&(p[0]=a.shift()),c=p[0]&&Ha(p[0])||f,b.push([c,p[1],p[2]]);ca(f);g(b,function(f){ja(lb.apply(null,f))})},Va=a,sb=a;f("dom")&&f.add("ie-event-behavior",
v.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));if(f("dom")){var db=function(a,g,b,c){if(f("ie-event-behavior"))return a.attachEvent(b,c),function(){a.detachEvent(b,c)};a.addEventListener(g,c,!1);return function(){a.removeEventListener(g,c,!1)}},vb=db(window,"load","onload",function(){w.pageLoaded=1;try{"complete"!=v.readyState&&(v.readyState="complete")}catch(Ob){}vb()}),ba=v.getElementsByTagName("script");for(d=0;!M;)/^dojo/.test((U=
ba[d++])&&U.type)||(M=U);w.injectUrl=function(f,a,g){g=g.node=v.createElement("script");var b=db(g,"load","onreadystatechange",function(f){f=f||window.event;var g=f.target||f.srcElement;if("load"===f.type||/complete|loaded/.test(g.readyState))b(),c(),a&&a()}),c=db(g,"error","onerror",function(a){b();c();B("error",u("scriptError",[f,a]))});g.type="text/javascript";g.charset="utf-8";g.src=f;M.parentNode.insertBefore(g,M);return g}}w.log=a;w.trace=a;U=function(a,g,b){var c=arguments.length,p=["require",
"exports","module"],d=[0,a,g];1==c?d=[0,m(a)?p:[],a]:2==c&&k(a)?d=[a,m(g)?p:[],g]:3==c&&(d=[a,g,b]);w.trace("loader-define",d.slice(0,2));if((c=d[0]&&Ha(d[0]))&&!pa[c.mid])ja(lb(c,d[1],d[2]));else if(f("ie-event-behavior")&&f("host-browser")&&!Q){c=c||ha;if(!c)for(a in pa)if((p=H[a])&&p.node&&"interactive"===p.node.readyState){c=p;break}c?(ca(c),ja(lb(c,d[1],d[2]))):B("error",u("ieDefineFailed",d[0]));ia()}else Fa.push(d)};U.amd={vendor:"dojotoolkit.org"};n(n(w,h.loaderPatch),e.loaderPatch);D("error",
function(f){try{if(console.error(f),f instanceof Error){for(var a in f)console.log(a+":",f[a]);console.log(".")}}catch(gb){}});n(w,{uid:t,cache:N,packs:G});q.define||(q.define=U,q.require=w,g(R,function(f){T(f)}),D=z.deps||e.deps||h.deps,e=z.callback||e.callback||h.callback,w.boot=D||e?[D||[],e]:0)})(this.dojoConfig||this.djConfig||this.require||{},{async:1,baseUrl:"dojo",hasCache:{"config-deferredInstrumentation":0,"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-has-api":1,
"dojo-loader":1,"dojo-undef-api":0,dom:1,"host-browser":1},packages:[{location:"../app",name:"app"},{location:"../dijit",name:"dijit"},{location:".",name:"dojo"},{location:"../dojox",name:"dojox"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../esri",name:"esri"},{location:"../moment",main:"moment",name:"moment"}]});
require({cache:{"app/main":function(){define("require exports esri/Map esri/views/MapView esri/layers/FeatureLayer esri/widgets/Search esri/widgets/Home dojo/query dojo/touch dojo/on esri/widgets/Legend esri/widgets/LayerList".split(" "),function(e,h,d,a,b,c,m,k,l,g,n){function u(){q.findLayerById(p[0])&&r();var f=new b({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Buildings_Edited/FeatureServer/0",outFields:["Name","Description"],popupTemplate:{title:"{Name}",content:"{Description}"},
opacity:0});q.add(f);p.push(f.id)}function r(){console.log("removing layers");document.getElementById("listNode").innerHTML="";v.popup.close();null!=x&&(x.destroy(),x=null);null!=f&&(f.destroy(),f=null);q.removeAll();p=[]}function t(f){q.findLayerById(p[0])&&r();var a=new b({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/"+f+"/FeatureServer/0",outFields:["*"],definitionExpression:"Name !\x3d ''",popupTemplate:{title:"{Name}",content:[{type:"text",text:"\x3cimg src\x3d'{ImageUrl}'\x3e\x3cdiv class\x3d'popupText'\x3e{Description}\x3c/div\x3e   \x3ca target\x3d'_blank' href\x3d'{url}'\x3e{url}\x3c/a\x3e"}]}});
q.add(a);a.then(function(){a.capabilities.queryRelated.supportsOrderBy?console.log("order supported"):console.log("order NOT supported")});p.push(a.id);var g,c=document.getElementById("listNode");v.whenLayerView(a).then(function(f){f.watch("updating",function(a){a||f.queryFeatures().then(function(f){f.sort(function(f,a){return f.attributes.BLDG_NAME>a.attributes.BLDG_NAME?1:f.attributes.BLDG_NAME<a.attributes.BLDG_NAME?-1:0});g=f;var a=document.createDocumentFragment();f.forEach(function(f,g){f=f.attributes;
f=null!=f.BLDG_ABBR?f.Name+" ("+f.BLDG_ABBR+")":f.Name;var b=document.createElement("li");b.classList.add("panel-result");b.tabIndex=0;b.setAttribute("data-result-id",g);b.textContent=f;a.appendChild(b)});c.innerHTML="";c.appendChild(a)},function(f){console.log("something query messed up",f)})})});c.addEventListener("click",function(f){(f=(f=f.target.getAttribute("data-result-id"))&&g&&g[parseInt(f,10)])&&v.popup.open({features:[f],location:"Buildings Edited"==a.title||"Athletics"==a.title?f.geometry.centroid:
{latitude:f.geometry.latitude,longitude:f.geometry.longitude}})})}function w(a){q.findLayerById(p[0])&&r();var c={title:"{Name}",content:"{Description} {StopLocati}"},d;d="ComputerLabs_Merge"===a||"Transportaion_Merge"===a?new b({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/"+a+"/FeatureServer/0",outFields:["Name","Description","StopLocati"],popupTemplate:c}):new b({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/"+a+"/FeatureServer/0"});q.add(d);d.then(function(){p.push(d.id);
console.log(d);f=new g({view:v,layerInfos:[{layer:d}]});v.ui.add(f,"bottom-left")})}var q,v,x,f,p=[];k("#Buildings_Edited").on(l.press,function(){t("Buildings_Edited")});k("#Dining").on(l.press,function(){t("Dining")});k("#Athletics").on(l.press,function(){t("Athletics")});k("#Services").on(l.press,function(){t("Services")});k("#StudentServices").on(l.press,function(){t("StudentServices")});k("#Web_Cams").on(l.press,function(){t("Web_Cams")});k("#Transportation_Merge").on(l.press,function(){w("Transportation_Merge")});
k("#AccessibilityRoutes").on(l.press,function(){w("AccessibilityRoutes")});k("#ComputerLabs_Merge").on(l.press,function(){w("ComputerLabs_Merge")});k("#ParkingLayers").on(l.press,function(){q.findLayerById(p[0])&&r();for(var f={title:"{Lot}",content:"{Description}"},a=2;12>a;a++){var g=new b({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/ParkingLayers/FeatureServer/"+a,outFields:["Lot","Description","Map_Category"],popupTemplate:f});q.add(g);p.push(g.id)}x=new n({view:v});
v.ui.add(x,{position:"bottom-left"})});return{init:function(){q=new d({basemap:"topo"});v=new a({container:"viewDiv",map:q,center:[-111.649278,40.249251],zoom:16});v.then(function(){u();var f={title:"{Name}",content:"{Description}",overwriteActions:!0},f=new c({view:v,allPlaceholder:"Enter Name or Acronym",sources:[{featureLayer:new b({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Buildings_Edited/FeatureServer/0",popupTemplate:f}),searchFields:["Name","BLDG_ABBR"],suggestionTemplate:"{Name} ({BLDG_ABBR})",
displayField:"Name",exactMatch:!1,outFields:["Name","BLDG_ABBR","Description"],name:"Buildings",placeholder:"example: JSB"},{featureLayer:new b({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Athletics/FeatureServer/0",popupTemplate:f}),searchFields:["Name","BLDG_ABBR"],suggestionTemplate:"{Name}",exactMatch:!1,outFields:["*"],name:"Sports",placeholder:"example: Marriott Center"},{featureLayer:new b({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Services/FeatureServer/0",
popupTemplate:f}),searchFields:["Name"],suggestionTemplate:"{Name}",exactMatch:!1,outFields:["*"],name:"Services",placeholder:"example: Admissions"},{featureLayer:new b({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/StudentServices/FeatureServer/0",popupTemplate:f}),searchFields:["Name"],suggestionTemplate:"{Name}",exactMatch:!1,outFields:["*"],name:"Student Services",placeholder:"example: Title IX"},{featureLayer:new b({url:"https://services.arcgis.com/FvF9MZKp3JWPrSkg/arcgis/rest/services/Entertainment_Museums/FeatureServer/0",
popupTemplate:f}),searchFields:["Name"],suggestionTemplate:"{Name}",exactMatch:!1,outFields:["*"],name:"Entertainment and Museums",placeholder:"example: Planetarium"}]});v.ui.add(f,{position:"top-left",index:2});v.ui.move("zoom","top-left");var a=new m({view:v});v.ui.add(a,"top-left");v.popup.dockEnabled=!1;f.then(function(){},function(f){console.log("search failed",f)})},function(f){console.log("The view's resources failed to load: ",f)})}}})},"esri/Map":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/Accessor ./core/CollectionFlattener ./core/Evented ./support/LayersMixin ./Ground ./support/basemapUtils ./support/groundUtils ./core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u){e=function(a){function b(b){b=a.call(this)||this;return b.basemap=null,b.ground=new l,b._basemapCache=g.createCache(),b}return d(b,a),Object.defineProperty(b.prototype,"allLayers",{get:function(){return new c({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:function(a){return a.layers}})},enumerable:!0,configurable:!0}),b.prototype.castBasemap=function(a){return g.ensureType(a,this._basemapCache)},
b}(u.declared(b,m,k));return a([u.property({readOnly:!0})],e.prototype,"allLayers",null),a([u.property()],e.prototype,"basemap",void 0),a([u.cast("basemap")],e.prototype,"castBasemap",null),a([u.property(),u.cast(n.ensureType)],e.prototype,"ground",void 0),e=a([u.subclass("esri.Map")],e)})},"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(e,h){return function(d,a){d.__bases__=a.__bases__}})},"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(e,
h,d,a){var b,c=arguments.length,m=3>c?h:null===a?a=Object.getOwnPropertyDescriptor(h,d):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,h,d,a);else for(var k=e.length-1;0<=k;k--)(b=e[k])&&(m=(3>c?b(m):3<c?b(h,d,m):b(h,d))||m);return 3<c&&m&&Object.defineProperty(h,d,m),m}})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),
function(e,h,d,a,b,c){h=h["default"];e.before(function(b,c){e.hasMixin(b,m)&&a.processPrototype(c)});e.after(function(b){e.hasMixin(b,m)&&(a.processClass(b),Object.defineProperties(b.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var m=e(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===
m)throw Error("[accessor] cannot instanciate Accessor. This can be fixed by creating a subclass of Accessor");if(Object.defineProperty(this,"__accessor__",{value:new h(this)}),0<arguments.length&&this.normalizeCtorArgs){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,a)}},__accessor__:null,postscript:function(a){var b,g=this.__accessor__;a=g.ctorArgs||a;null!=this.getDefaults&&(b=this.getDefaults(a||{}),this.set(b));g.initialize();
a&&(this.set(a),g.ctorArgs=null);this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");}catch(k){console.warn(k.stack)}else c.removeTarget(this),this.__accessor__.destroy()},get:function(a){return d.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,c){return b.set(this,
a,c),this},watch:function(a,b,g){return c.watch(this,a,b,g)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},_override:function(a,b){return this.__accessor__.override(a,b)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,b){return this.__accessor__.internalSet(a,b)}});return m})},"esri/core/declare":function(){define(["require",
"exports","dojo/_base/declare"],function(e,h,d){function a(a,c){return a&&!Array.isArray(a)&&"function"!=typeof a&&(c=a,a=null),a=a||[],c=c||{},b([this].concat(a),c)}function b(b,e){b&&!Array.isArray(b)&&"function"!=typeof b&&(e=b,b=null);"function"==typeof b?b=[b]:b||(b=[]);e=e||{};var g,n;g=0;for(n=c.length;n>g;g++)c[g](b,e);b=d(b,e);b.createSubclass=a;g=0;for(n=m.length;n>g;g++)m[g](b);return b}var c=[],m=[];return function(a){a.hasMixin=function(a,g){var b;if(b=Array.isArray(a)?a.reduce(function(a,
g){return g._meta?a.concat(g._meta.bases):a},[]):a._meta?a._meta.bases:a,!b)return!1;if("string"==typeof g)for(a=b.length-1;0<=a;a--)if(b[a].prototype.declaredClass===g)return!0;return-1!==b.indexOf(g)};a.safeMixin=function(a,g){return d.safeMixin(a,g)};a.before=function(a){c.push(a)};a.after=function(a){m.push(a)}}(b||(b={})),b})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(e,h,d){function a(f,a){throw Error("declare"+(a?" "+a:"")+": "+f);}function b(f,g){for(var b=
[],c=[{cls:0,refs:[]}],p={},d=1,e=f.length,n=0,k,l,m,v,u;n<e;++n){(k=f[n])?"[object Function]"!=y.call(k)&&a("mixin #"+n+" is not a callable constructor.",g):a("mixin #"+n+" is unknown. Did you use dojo.require to pull it in?",g);l=k._meta?k._meta.bases:[k];m=0;for(k=l.length-1;0<=k;--k)v=l[k].prototype,v.hasOwnProperty("declaredClass")||(v.declaredClass="uniqName_"+B++),v=v.declaredClass,p.hasOwnProperty(v)||(p[v]={count:0,refs:[],cls:l[k]},++d),v=p[v],m&&m!==v&&(v.refs.push(m),++m.count),m=v;++m.count;
c[0].refs.push(m)}for(;c.length;){m=c.pop();b.push(m.cls);for(--d;u=m.refs,1==u.length;){m=u[0];if(!m||--m.count){m=0;break}b.push(m.cls);--d}if(m)for(n=0,e=u.length;n<e;++n)m=u[n],--m.count||c.push(m)}d&&a("can't build consistent linearization",g);k=f[0];b[0]=k?k._meta&&k===b[b.length-k._meta.bases.length]?k._meta.bases.length:1:0;return b}function c(f,g,b,c){var p,d,e,n,k,l,m=this._inherited=this._inherited||{};"string"===typeof f&&(p=f,f=g,g=b,b=c);if("function"===typeof f)e=f,f=g,g=b;else try{e=
f.callee}catch(ca){if(ca instanceof TypeError)a("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass);else throw ca;}(p=p||e.nom)||a("can't deduce a name to call inherited()",this.declaredClass);b=c=0;n=this.constructor._meta;c=n.bases;l=m.p;if("constructor"!=p){if(m.c!==e&&(l=0,k=c[0],n=k._meta,n.hidden[p]!==e)){(d=n.chains)&&"string"==typeof d[p]&&a("calling chained method with inherited: "+p,this.declaredClass);do if(n=k._meta,d=k.prototype,n&&
(d[p]===e&&d.hasOwnProperty(p)||n.hidden[p]===e))break;while(k=c[++l]);l=k?l:-1}if(k=c[++l])if(d=k.prototype,k._meta&&d.hasOwnProperty(p))b=d[p];else{e=z[p];do if(d=k.prototype,(b=d[p])&&(k._meta?d.hasOwnProperty(p):b!==e))break;while(k=c[++l])}b=k&&b||z[p]}else{if(m.c!==e&&(l=0,(n=c[0]._meta)&&n.ctor!==e)){for((d=n.chains)&&"manual"===d.constructor||a("calling chained constructor with inherited",this.declaredClass);(k=c[++l])&&(!(n=k._meta)||n.ctor!==e););l=k?l:-1}for(;(k=c[++l])&&!(b=(n=k._meta)?
n.ctor:k););b=k&&b}m.c=b;m.p=l;if(b)return!0===g?b:b.apply(this,g||f)}function m(f,a,g){return"string"===typeof f?"function"===typeof a?this.__inherited(f,a,g,!0):this.__inherited(f,a,!0):"function"===typeof f?this.__inherited(f,a,!0):this.__inherited(f,!0)}function k(f,a,g,b){var c=this.getInherited(f,a,g);if(c)return c.apply(this,b||g||a||f)}function l(f){for(var a=this.constructor._meta.bases,g=0,b=a.length;g<b;++g)if(a[g]===f)return!0;return this instanceof f}function g(f,a){for(var g in a)"constructor"!=
g&&a.hasOwnProperty(g)&&(f[g]=a[g]);if(h("bug-for-in-skips-shadowed"))for(var b=d._extraNames,c=b.length;c;)g=b[--c],"constructor"!=g&&a.hasOwnProperty(g)&&(f[g]=a[g])}function n(a){f.safeMixin(this.prototype,a);return this}function u(a,g){a instanceof Array||"function"===typeof a||(g=a,a=void 0);g=g||{};a=a||[];return f([this].concat(a),g)}function r(f,a){return function(){var g=arguments,b=g,c=g[0],p,d;d=f.length;var e;if(!(this instanceof g.callee))return x(g);if(a&&(c&&c.preamble||this.preamble))for(e=
Array(f.length),e[0]=g,p=0;;){(c=g[0])&&(c=c.preamble)&&(g=c.apply(this,g)||g);c=f[p].prototype;(c=c.hasOwnProperty("preamble")&&c.preamble)&&(g=c.apply(this,g)||g);if(++p==d)break;e[p]=g}for(p=d-1;0<=p;--p)c=f[p],(c=(d=c._meta)?d.ctor:c)&&c.apply(this,e?e[p]:g);(c=this.postscript)&&c.apply(this,b)}}function t(f,a){return function(){var g=arguments,b=g,c=g[0];if(!(this instanceof g.callee))return x(g);a&&(c&&(c=c.preamble)&&(b=c.apply(this,b)||b),(c=this.preamble)&&c.apply(this,b));f&&f.apply(this,
g);(c=this.postscript)&&c.apply(this,g)}}function w(f){return function(){var a=arguments,g=0,b,c;if(!(this instanceof a.callee))return x(a);for(;b=f[g];++g)if(b=(c=b._meta)?c.ctor:b){b.apply(this,a);break}(b=this.postscript)&&b.apply(this,a)}}function q(f,a,g){return function(){var b,c,p=0,d=1;g&&(p=a.length-1,d=-1);for(;b=a[p];p+=d)c=b._meta,(b=(c?c.hidden:b.prototype)[f])&&b.apply(this,arguments)}}function v(f){A.prototype=f.prototype;f=new A;A.prototype=null;return f}function x(f){var a=f.callee,
g=v(a);a.apply(g,f);return g}function f(e,k,x){"string"!=typeof e&&(x=k,k=e,e="");x=x||{};var B,F,A,C,E,N,S,M=1,ca=k;"[object Array]"==y.call(k)?(N=b(k,e),A=N[0],M=N.length-A,k=N[M]):(N=[0],k?"[object Function]"==y.call(k)?(A=k._meta,N=N.concat(A?A.bases:k)):a("base class is not a callable constructor.",e):null!==k&&a("unknown base class. Did you use dojo.require to pull it in?",e));if(k)for(F=M-1;;--F){B=v(k);if(!F)break;A=N[F];(A._meta?g:p)(B,A.prototype);C=h("csp-restrictions")?function(){}:new Function;
C.superclass=k;C.prototype=B;k=B.constructor=C}else B={};f.safeMixin(B,x);A=x.constructor;A!==z.constructor&&(A.nom="constructor",B.constructor=A);for(F=M-1;F;--F)(A=N[F]._meta)&&A.chains&&(S=p(S||{},A.chains));B["-chains-"]&&(S=p(S||{},B["-chains-"]));k&&k.prototype&&k.prototype["-chains-"]&&(S=p(S||{},k.prototype["-chains-"]));A=!S||!S.hasOwnProperty("constructor");N[0]=C=S&&"manual"===S.constructor?w(N):1==N.length?t(x.constructor,A):r(N,A);C._meta={bases:N,hidden:x,chains:S,parents:ca,ctor:x.constructor};
C.superclass=k&&k.prototype;C.extend=n;C.createSubclass=u;C.prototype=B;B.constructor=C;B.getInherited=m;B.isInstanceOf=l;B.inherited=D;B.__inherited=c;e&&(B.declaredClass=e,d.setObject(e,C));if(S)for(E in S)B[E]&&"string"==typeof S[E]&&"constructor"!=E&&(A=B[E]=q(E,N,"after"===S[E]),A.nom=E);return C}var p=d.mixin,z=Object.prototype,y=z.toString,A,B=0;A=h("csp-restrictions")?function(){}:new Function;var D=e.config.isDebug?k:c;e.safeMixin=f.safeMixin=function(f,a){var g,b;for(g in a)b=a[g],b===z[g]&&
g in z||"constructor"==g||("[object Function]"==y.call(b)&&(b.nom=g),f[g]=b);if(h("bug-for-in-skips-shadowed")&&a)for(var c=d._extraNames,p=c.length;p;)g=c[--p],b=a[g],b===z[g]&&g in z||"constructor"==g||("[object Function]"==y.call(b)&&(b.nom=g),f[g]=b);return f};return e.declare=f})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(e,h,d,a){var b,c=function(){return this}(),m={},k={},l={config:h,global:c,dijit:m,dojox:k},m={dojo:["dojo",l],dijit:["dijit",m],
dojox:["dojox",k]};a=d.map&&d.map[a.id.match(/[^\/]+/)[0]];for(b in a)m[b]?m[b][0]=a[b]:m[b]=[a[b],{}];for(b in m)a=m[b],a[1]._scopeName=a[0],h.noGlobals||(c[a[0]]=a[1]);l.scopeMap=m;l.baseUrl=l.config.baseUrl=d.baseUrl;l.isAsync=d.async;l.locale=h.locale;h="$Rev: 594ed6f $".match(/[0-9a-f]{7,}/);l.version={major:1,minor:12,patch:2,flag:"",revision:h?h[0]:NaN,toString:function(){var a=l.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};e("csp-restrictions")||Function("d",
"d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(l);l.exit=function(){};e("host-webworker");e.add("console-as-object",function(){return Function.prototype.bind&&console&&"object"===typeof console.log});"undefined"!=typeof console||(console={});d="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var g;for(h=0;g=d[h++];)console[g]?e("console-as-object")&&(console[g]=Function.prototype.bind.call(console[g],
console)):function(){var a=g+"";console[a]="log"in console?function(){var g=Array.prototype.slice.call(arguments);g.unshift(a+":");console.log(g.join(" "))}:function(){};console[a]._fake=!0}();l.deprecated=l.experimental=function(){};l._hasResource={};return l})},"dojo/has":function(){define(["require","module"],function(e,h){var d=e.has||function(){};d("host-browser")&&(d.add("dom-addeventlistener",!!document.addEventListener),d.add("touch","ontouchstart"in document||"onpointerdown"in document&&
0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints),d.add("touch-events","ontouchstart"in document),d.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window),d.add("MSPointer",window.navigator.msPointerEnabled),d.add("touch-action",d("touch")&&d("pointer-events")),d.add("device-width",screen.availWidth||innerWidth),e=document.createElement("form"),d.add("dom-attributes-explicit",0==e.attributes.length),d.add("dom-attributes-specified-flag",
0<e.attributes.length&&40>e.attributes.length));d.clearElement=function(a){a.innerHTML="";return a};d.normalize=function(a,b){var c=a.match(/[\?:]|[^:\?]*/g),e=0,k=function(a){var g=c[e++];if(":"==g)return 0;if("?"==c[e++]){if(!a&&d(g))return k();k(!0);return k(a)}return g||0};return(a=k())&&b(a)};d.load=function(a,b,c){a?b([a],c):c()};return d})},"dojo/_base/config":function(){define(["../has","require"],function(e,h){e={};h=h.rawConfig;for(var d in h)e[d]=h[d];!e.locale&&"undefined"!=typeof navigator&&
(d=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(e.locale=d.toLowerCase());return e})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(e,h){h.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var d=h("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],a=d.length,b=function(a,
b,c){c||(c=a[0]&&e.scopeMap[a[0]]?e.scopeMap[a.shift()][1]:e.global);try{for(var g=0;g<a.length;g++){var d=a[g];if(!(d in c))if(b)c[d]={};else return;c=c[d]}return c}catch(w){}},c=Object.prototype.toString,m=function(a,b,c){return(c||[]).concat(Array.prototype.slice.call(a,b||0))},k=/\{([^\}]+)\}/g,l={_extraNames:d,_mixin:function(g,b,c){var e,n,k,l={};for(e in b)n=b[e],e in g&&(g[e]===n||e in l&&l[e]===n)||(g[e]=c?c(n):n);if(h("bug-for-in-skips-shadowed")&&b)for(k=0;k<a;++k)e=d[k],n=b[e],e in g&&
(g[e]===n||e in l&&l[e]===n)||(g[e]=c?c(n):n);return g},mixin:function(a,b){a||(a={});for(var g=1,c=arguments.length;g<c;g++)l._mixin(a,arguments[g]);return a},setObject:function(a,c,d){var g=a.split(".");a=g.pop();return(d=b(g,!0,d))&&a?d[a]=c:void 0},getObject:function(a,c,d){return a?b(a.split("."),c,d):d},exists:function(a,b){return void 0!==l.getObject(a,!1,b)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:Array.isArray||function(a){return"[object Array]"==c.call(a)},
isFunction:function(a){return"[object Function]"===c.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||l.isArray(a)||l.isFunction(a))},isArrayLike:function(a){return!!a&&!l.isString(a)&&!l.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(l.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!l.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(String(a))},extend:function(a,b){for(var g=1,c=arguments.length;g<c;g++)l._mixin(a.prototype,arguments[g]);
return a},_hitchArgs:function(a,b){var g=l._toArray(arguments,2),c=l.isString(b);return function(){var d=l._toArray(arguments),n=c?(a||e.global)[b]:b;return n&&n.apply(a||this,g.concat(d))}},hitch:function(a,b){if(2<arguments.length)return l._hitchArgs.apply(e,arguments);b||(b=a,a=null);if(l.isString(b)){a=a||e.global;if(!a[b])throw['lang.hitch: scope["',b,'"] is null (scope\x3d"',a,'")'].join("");return function(){return a[b].apply(a,arguments||[])}}return a?function(){return b.apply(a,arguments||
[])}:b},delegate:function(){function a(){}return function(g,b){a.prototype=g;g=new a;a.prototype=null;b&&l._mixin(g,b);return g}}(),_toArray:h("ie")?function(){function a(a,g,b){b=b||[];for(g=g||0;g<a.length;g++)b.push(a[g]);return b}return function(g){return(g.item?a:m).apply(this,arguments)}}():m,partial:function(a){return l.hitch.apply(e,[null].concat(l._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||l.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);
if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return new RegExp(a);var g,b,c;if(l.isArray(a))for(g=[],b=0,c=a.length;b<c;++b)b in a&&(g[b]=l.clone(a[b]));else g=a.constructor?new a.constructor:{};return l._mixin(g,a,l.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,b,c){return a.replace(c||k,l.isFunction(b)?b:function(a,g){return l.getObject(g,!1,b)})}};l.mixin(e,l);return l})},
"dojo/sniff":function(){define(["./has"],function(e){if(e("host-browser")){var h=navigator,d=h.userAgent,h=h.appVersion,a=parseFloat(h);e.add("air",0<=d.indexOf("AdobeAIR"));e.add("wp",parseFloat(d.split("Windows Phone")[1])||void 0);e.add("msapp",parseFloat(d.split("MSAppHost/")[1])||void 0);e.add("khtml",0<=h.indexOf("Konqueror")?a:void 0);e.add("edge",parseFloat(d.split("Edge/")[1])||void 0);e.add("opr",parseFloat(d.split("OPR/")[1])||void 0);e.add("webkit",!e("wp")&&!e("edge")&&parseFloat(d.split("WebKit/")[1])||
void 0);e.add("chrome",!e("edge")&&!e("opr")&&parseFloat(d.split("Chrome/")[1])||void 0);e.add("android",!e("wp")&&parseFloat(d.split("Android ")[1])||void 0);e.add("safari",!(0<=h.indexOf("Safari"))||e("wp")||e("chrome")||e("android")||e("edge")||e("opr")?void 0:parseFloat(h.split("Version/")[1]));e.add("mac",0<=h.indexOf("Macintosh"));e.add("quirks","BackCompat"==document.compatMode);if(!e("wp")&&d.match(/(iPhone|iPod|iPad)/)){var b=RegExp.$1.replace(/P/,"p"),c=d.match(/OS ([\d_]+)/)?RegExp.$1:
"1",c=parseFloat(c.replace(/_/,".").replace(/_/g,""));e.add(b,c);e.add("ios",c)}e.add("bb",(0<=d.indexOf("BlackBerry")||0<=d.indexOf("BB10"))&&parseFloat(d.split("Version/")[1])||void 0);e.add("trident",parseFloat(h.split("Trident/")[1])||void 0);e.add("svg","undefined"!==typeof SVGAngle);e("webkit")||(0<=d.indexOf("Opera")&&e.add("opera",9.8<=a?parseFloat(d.split("Version/")[1])||a:a),!(0<=d.indexOf("Gecko"))||e("wp")||e("khtml")||e("trident")||e("edge")||e.add("mozilla",a),e("mozilla")&&e.add("ff",
parseFloat(d.split("Firefox/")[1]||d.split("Minefield/")[1])||void 0),document.all&&!e("opera")&&(d=parseFloat(h.split("MSIE ")[1])||void 0,(h=document.documentMode)&&5!=h&&Math.floor(d)!=h&&(d=h),e.add("ie",d)),e.add("wii","undefined"!=typeof opera&&opera.wiiremote))}return e})},"esri/core/accessorSupport/Properties":function(){define("require exports dojo/has ./Store ./PropertyOrigin ./extensions ../Logger".split(" "),function(e,h,d,a,b,c,m){function k(a,g){return g.metadatas[a]?!0:(d("dojo-debug-messages")&&
l.warn("cannot access unknown property '"+a+"' on instance of "+g.host.declaredClass+"."),!1)}Object.defineProperty(h,"__esModule",{value:!0});var l=m.getLogger("esri.core.Accessor"),g=0;e=function(){function d(c){this.host=c;this._origin=b.OriginId.USER;this.cursors={};this.ctorArgs=null;this.destroyed=!1;this.dirties={};this.initialized=!1;this.metadatas=this.host.constructor.__accessorMetadata__;this.overridden=null;this.store=new a["default"];Object.defineProperty(this,"uid",{value:g++})}return d.prototype.initialize=
function(){this.initialized=!0;c.instanceCreated(this.host,this.metadatas)},d.prototype.destroy=function(){this.destroyed=!0;for(var a=this.cursors,g=0,b=Object.getOwnPropertyNames(a);g<b.length;g++){var c=b[g],d=a[c];if(d){for(;0<d.length;)d.pop().propertyDestroyed(this,c);a[c]=null}}},d.prototype.clearOverride=function(a){this.isOverridden(a)&&(this.overridden[a]=!1,this.propertyInvalidated(a))},d.prototype.get=function(a){k(a,this);var g=this.metadatas[a];if(this.store.has(a)&&1==!this.dirties[a])return this.store.get(a);
var c=g.get;return c?(g=c.call(this.host),this.store.set(a,g,b.OriginId.COMPUTED),this.propertyCommitted(a),g):g.value},d.prototype.originOf=function(a){var g=this.store.originOf(a);return void 0===g&&(a=this.metadatas[a])&&a.hasOwnProperty("value")?"defaults":b.idToName(g)},d.prototype.has=function(a){return this.metadatas[a]?this.store.has(a):!1},d.prototype.internalGet=function(a){if(k(a,this)){var g=this.store;return g.has(a)?g.get(a):this.metadatas[a].value}},d.prototype.internalSet=function(a,
g){k(a,this)&&(this.propertyInvalidated(a),this.initialized?this.store.set(a,g,this._origin):this.store.set(a,g,b.OriginId.DEFAULTS),this.propertyCommitted(a))},d.prototype.isOverridden=function(a){return null!=this.overridden&&!0===this.overridden[a]},d.prototype.keys=function(){return this.store.keys()},d.prototype.override=function(a,g){k(a,this)&&(this.overridden||(this.overridden={}),this.overridden[a]=!0,this.internalSet(a,g))},d.prototype.set=function(a,g){if(k(a,this)){var b=this.metadatas[a],
c=b.set;(b=b.cast)&&(g=b.call(this.host,g));c?c.call(this.host,g):this.internalSet(a,g)}},d.prototype.setDefaultOrigin=function(a){this._origin=b.nameToId(a)},d.prototype.propertyInvalidated=function(a){var g=this.cursors[a];if(g)for(var b=0;b<g.length;b++)g[b].propertyInvalidated(this,a);this.isOverridden(a)||(this.dirties[a]=!0)},d.prototype.propertyCommitted=function(a){this.dirties[a]=!1;var g=this.cursors[a];if(g)for(var b=0;b<g.length;b++)g[b].propertyCommitted(this,a)},d.prototype.addCursor=
function(a,g){var b=this.cursors[a];b||(this.cursors[a]=b=[]);b.push(g)},d.prototype.removeCursor=function(a,g){var b=this.cursors[a];this.cursors[a]&&(b.splice(b.indexOf(g),1),0===b.length&&(this.cursors[a]=null))},d}();h["default"]=e})},"esri/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});e=function(){function a(){this._values={}}return a.prototype.get=function(a){return this._values[a]},a.prototype.originOf=
function(a){return d.OriginId.USER},a.prototype.keys=function(){return Object.keys(this._values)},a.prototype.set=function(a,c){this._values[a]=c},a.prototype.clear=function(a){delete this._values[a]},a.prototype.has=function(a){return a in this._values},a}();h["default"]=e})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(e,h){function d(a){switch(a){case "defaults":return b.DEFAULTS;case "service":return b.SERVICE;case "portal-item":return b.PORTAL_ITEM;
case "web-scene":return b.WEB_SCENE;case "web-map":return b.WEB_MAP;case "user":return b.USER}}function a(a){switch(a){case b.DEFAULTS:return"defaults";case b.SERVICE:return"service";case b.PORTAL_ITEM:return"portal-item";case b.WEB_SCENE:return"web-scene";case b.WEB_MAP:return"web-map";case b.USER:return"user"}}Object.defineProperty(h,"__esModule",{value:!0});var b;!function(a){a[a.DEFAULTS=0]="DEFAULTS";a[a.COMPUTED=1]="COMPUTED";a[a.SERVICE=2]="SERVICE";a[a.PORTAL_ITEM=3]="PORTAL_ITEM";a[a.WEB_SCENE=
4]="WEB_SCENE";a[a.WEB_MAP=5]="WEB_MAP";a[a.USER=6]="USER";a[a.NUM=7]="NUM"}(b=h.OriginId||(h.OriginId={}));h.nameToId=d;h.idToName=a;h.readableNameToId=function(a){return d(a)};h.idToReadableName=function(b){return a(b)};h.writableNameToId=function(a){return d(a)};h.idToWritableName=function(b){return a(b)}})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(e,
h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});var c=[d["default"],a["default"],b["default"]];h.processPrototypeMetadatas=function(a,b){for(var d=Object.getOwnPropertyNames(a),g=0;g<c.length;g++){var e=c[g];if(e.processPrototypePropertyMetadata)for(var k=0,m=d;k<m.length;k++){var t=m[k];e.processPrototypePropertyMetadata(t,a[t],a,b)}}};h.processClassMetadatas=function(a,b){for(var d=Object.getOwnPropertyNames(a),g=0;g<c.length;g++){var e=c[g];if(e.processClassPropertyMetadata)for(var k=
0,m=d;k<m.length;k++){var t=m[k];e.processClassPropertyMetadata(t,a[t],a,b)}}};h.instanceCreated=function(a,b){for(var d=Object.getOwnPropertyNames(b),g=0;g<c.length;g++){var e=c[g];e.instanceCreated&&e.instanceCreated(a,b,d)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../wire ../utils ../get ../set".split(" "),function(e,h,d,a,b,c,m){function k(g,c,d){var e=b.getProperties(g);return a.wire(g,d.aliasOf,function(){e.propertyInvalidated(c)})}
Object.defineProperty(h,"__esModule",{value:!0});var l=d("dojo-debug-messages");h.AliasedPropertyExtension={processClassPropertyMetadata:function(a,b,d,e){var g=b.aliasOf;if(g){var k=g.split(".")[0];if(null==d[k])return void(l&&console.error("[accessor] class '"+e+"' - property '"+a+"' is alias of aliased of '"+g+"', but '"+k+"' isn't declared as property. This can be fix by adding '"+k+"' to the metadata for example."));if(b.set)return void(l&&console.error("[accessor] class '"+e+"' - property '"+
a+"' is alias of aliased of '"+g+"', so it cannot have a setter defined"));if(b.get)return void(l&&console.error("[accessor] class '"+e+"' - property '"+a+"' is alias of aliased of '"+g+"', so it cannot have a getter defined"));var n;b.get=function(){var a=c["default"](this,g);if("function"==typeof a){n||(n=g.split(".").slice(0,-1).join("."));var b=c["default"](this,n);b&&(a=a.bind(b))}return a};b.readOnly||(b.set=function(a){return m["default"](this,g,a)})}},instanceCreated:function(a,b,c){for(var g=
0;g<c.length;g++){var d=c[g],e=b[d];e.aliasOf&&k(a,d,e)}}};h["default"]=h.AliasedPropertyExtension})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(e,h,d){function a(a,c,e){c=d.splitPath(c);if(Array.isArray(c)){for(var g=[],n=0;n<c.length;n++)g.push((new b(c[n],e)).install(a));return new k(g)}a=(new b(c,e)).install(a);return new l(a)}Object.defineProperty(h,"__esModule",{value:!0});var b=function(){function a(a,g){return this.path=a,this.callback=g,this.chain=
null,this.path=a,-1<a.indexOf(".")&&(this.chain=d.pathToArray(a)),this.callback=g,this}return a.prototype.install=function(a){return this.chain?new m(this,a):new c(this,a)},a.prototype.notify=function(a){this.callback(a,this.path)},a}(),c=function(){function a(a,g){this.binding=a;this.target=g;d.getProperties(g).addCursor(this.binding.path,this)}return a.prototype.destroy=function(){this.target&&(d.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)},a.prototype.propertyDestroyed=
function(a,g){d.getProperties(this.target).removeCursor(g,this)},a.prototype.propertyInvalidated=function(a,g){this.binding&&this.binding.notify(this.target)},a.prototype.propertyCommitted=function(a,g){this.binding&&this.binding.notify(this.target)},a}(),m=function(){function a(a,g){return this.binding=a,this.target=g,this.stack=[],this.properties=d.getProperties(g),this.stack.push({properties:this.properties,propertyName:a.chain[0]}),this.properties.addCursor(a.chain[0],this),this.moveForward(),
this}return a.prototype.destroy=function(){for(var a;a=this.stack.pop();)a.properties.removeCursor(a.propertyName,this);this.target=this.binding=null},a.prototype.propertyDestroyed=function(a,g){this.moveBackward(a,g)},a.prototype.propertyInvalidated=function(a,g){this.binding&&this.binding.notify(this.target)},a.prototype.propertyCommitted=function(a,g){this.binding&&(this.moveBackward(a,g),this.moveForward(),this.binding.notify(this.target))},a.prototype.moveBackward=function(a,g){for(var b=this.stack,
c=b[b.length-1];c.properties!==a&&c.propertyName!==g;)c.properties.removeCursor(c.propertyName,this),b.pop(),c=b[b.length-1]},a.prototype.moveForward=function(){var a=this.stack,g=a[a.length-1],g=g.properties.internalGet(g.propertyName);(g=d.getProperties(g))&&a.length<this.binding.chain.length&&(a=this.binding.chain[a.length],this.stack.push({properties:g,propertyName:a}),g.addCursor(a,this),this.moveForward())},a}(),k=function(){function a(a){this.cursors=a}return a.prototype.remove=function(){for(var a=
this.cursors;0<a.length;)a.pop().destroy();this.cursors=null},a}(),l=function(){function a(a){this.cursor=a}return a.prototype.remove=function(){this.cursor.destroy();this.cursor=null},a}();h.create=function(a,c){a=d.splitPath(a);if(Array.isArray(a)){for(var g=[],e=0;e<a.length;e++)g.push(new b(a[e],c));return function(a){for(var b=[],c=0;c<g.length;c++)b[c]=g[c].install(a);return new k(b)}}var n=new b(a,c);return function(a){return new l(n.install(a))}};h.wire=a;h["default"]=a})},"esri/core/accessorSupport/utils":function(){define(["require",
"exports","../lang"],function(e,h,d){function a(a){return a?a.__accessor__?a.__accessor__:a.propertyInvalidated?a:null:null}function b(a,c){return c?Object.keys(c).reduce(function(a,g){if("value"===g)return a[g]=c[g],a;if(void 0===a[g])return a[g]=d.clone(c[g]),a;var e=a[g],k=c[g];return e===k?a:(Array.isArray(k)||Array.isArray(a)?(e=e?Array.isArray(e)?a[g]=e.concat():a[g]=[e]:a[g]=[],k&&(Array.isArray(k)||(k=[k]),k.forEach(function(a){-1===e.indexOf(a)&&e.push(a)}))):k&&"object"==typeof k?a[g]=b(e,
k):(!a.hasOwnProperty(g)||c.hasOwnProperty(g))&&(a[g]=k),a)},a||{}):a}function c(a){return Array.isArray(a)?a:a.split(".")}function m(a){if(Array.isArray(a)||-1<a.indexOf(",")){a=Array.isArray(a)?a:a.split(",");for(var g=0;g<a.length;g++)a[g]=a[g].trim();return 1===a.length?a[0]:a}return a.trim()}function k(a){var g=!1;return function(){g||(g=!0,a())}}Object.defineProperty(h,"__esModule",{value:!0});h.getProperties=a;h.isPropertyDeclared=function(a,b){return a&&a.metadatas&&null!=a.metadatas[b]};
h.merge=b;h.pathToStringOrArray=function(a){return a?"string"==typeof a&&-1===a.indexOf(".")?a:c(a):a};h.pathToArray=c;h.splitPath=m;h.parse=function(a,b,c,d){b=m(b);if(Array.isArray(b)){var g=b.map(function(g){return d(a,g.trim(),c)});return{remove:k(function(){return g.forEach(function(a){return a.remove()})})}}return d(a,b.trim(),c)};h.once=k;var l=0;h.uid=function(g){if(null==g)return l++;g=a(g);return null==g.uid&&(g.uid=l++),g.uid}})},"esri/core/lang":function(){define("dojo/_base/array dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),
function(e,h,d,a,b,c,m){function k(a){return void 0!==a&&null!==a}function l(a){return k(a)?a:""}function g(g,n,m){var v,f=m.match(/([^\(]+)(\([^\)]+\))?/i),p=d.trim(f[1]);m=n[g];var f=JSON.parse((f[2]?d.trim(f[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,'$1"$2":').replace(/\"\s*:\s*\'/gi,'":"').replace(/\'\s*(,|\})/gi,'"$1')),u=f.utcOffset;if(-1===e.indexOf(r,p))v=d.getObject(p),d.isFunction(v)&&(m=v(m,g,n,f));else if("number"==typeof m||"string"==typeof m&&
m&&!isNaN(Number(m)))switch(m=Number(m),p){case "NumberFormat":return g=d.mixin({},f),n=parseFloat(g.places),(isNaN(n)||0>n)&&(g.places=1/0),b.format(m,g);case "DateString":return v=new Date(m),f.local||f.systemLocale?f.systemLocale?v.toLocaleDateString()+(f.hideTime?"":" "+v.toLocaleTimeString()):v.toDateString()+(f.hideTime?"":" "+v.toTimeString()):(v=v.toUTCString(),f.hideTime&&(v=v.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,"")),v);case "DateFormat":return v=new Date(m),k(u)&&(v=a.add(v,"minute",
v.getTimezoneOffset()-u)),c.format(v,f)}return l(m)}function n(a,g){var b;if(g)for(b in a)a.hasOwnProperty(b)&&(void 0===a[b]?delete a[b]:a[b]instanceof Object&&n(a[b],!0));else for(b in a)a.hasOwnProperty(b)&&void 0===a[b]&&delete a[b];return a}function u(a){if(!a||"object"!=typeof a||d.isFunction(a))return a;if("function"==typeof a.clone)a=a.clone();else if("function"==typeof a.map&&"function"==typeof a.forEach)a=a.map(u);else{var g={},b,c,f={};for(b in a){c=a[b];var p=!(b in f)||f[b]!==c;b in g&&
(g[b]===c||!p)||(g[b]=u?u(c):c)}a=g}return a}var r=["NumberFormat","DateString","DateFormat"],t=/<\/?[^>]+>/g;return{equals:function(a,g){return a===g||"number"==typeof a&&isNaN(a)&&"number"==typeof g&&isNaN(g)||d.isFunction((a||{}).getTime)&&d.isFunction((g||{}).getTime)&&a.getTime()==g.getTime()||d.isFunction((a||{}).equals)&&a.equals(g)||d.isFunction((g||{}).equals)&&g.equals(a)||!1},valueOf:function(a,g){for(var b in a)if(a[b]==g)return b;return null},stripTags:function(a){if(a){var g=typeof a;
if("string"===g)a=a.replace(t,"");else if("object"===g)for(var b in a)(g=a[b])&&"string"==typeof g&&(g=g.replace(t,"")),a[b]=g}return a},substitute:function(a,b,c){var n,f,p;if(k(c)&&(d.isObject(c)?(n=c.first,f=c.dateFormat,p=c.numberFormat):n=c),b&&"{*}"!==b)return d.replace(b,d.hitch({obj:a},function(a,b){a=b.split(":");return 1<a.length?(b=a[0],a.shift(),g(b,this.obj,a.join(":"))):f&&-1!==e.indexOf(f.properties||"",b)?g(b,this.obj,f.formatter||"DateString"):p&&-1!==e.indexOf(p.properties||"",b)?
g(b,this.obj,p.formatter||"NumberFormat"):l(this.obj[b])}));var v,u;b=[];b.push('\x3ctable summary\x3d"'+m.fieldsSummary+'"\x3e\x3ctbody\x3e');for(u in a)if(v=a[u],f&&-1!==e.indexOf(f.properties||"",u)?v=g(u,a,f.formatter||"DateString"):p&&-1!==e.indexOf(p.properties||"",u)&&(v=g(u,a,p.formatter||"NumberFormat")),b.push("\x3ctr\x3e\x3cth\x3e"+u+"\x3c/th\x3e\x3ctd\x3e"+l(v)+"\x3c/td\x3e\x3c/tr\x3e"),n)break;return b.push("\x3c/tbody\x3e\x3c/table\x3e"),b.join("")},filter:function(a,g,b){var c;g=[d.isString(a)?
a.split(""):a,b||h.global,d.isString(g)?new Function("item","index","array",g):g];b={};a=g[0];for(c in a)g[2].call(g[c],a[c],c,a)&&(b[c]=a[c]);return b},startsWith:function(a,g,b){return b=b||0,a.indexOf(g,b)===b},endsWith:function(a,g,b){("number"!=typeof b||!isFinite(b)||Math.floor(b)!==b||b>a.length)&&(b=a.length);b-=g.length;a=a.indexOf(g,b);return-1!==a&&a===b},isDefined:k,fixJson:n,clone:u}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(e,h,d){function a(a){return m[a]=
new Function("item","index","array",a)}function b(b){var g=!b;return function(c,d,e){var k=0,l=c&&c.length||0,n;l&&"string"==typeof c&&(c=c.split(""));"string"==typeof d&&(d=m[d]||a(d));if(e)for(;k<l;++k){if(n=!d.call(e,c[k],k,c),b^n)return!n}else for(;k<l;++k)if(n=!d(c[k],k,c),b^n)return!n;return g}}function c(a){var b=1,g=0,c=0;a||(b=g=c=-1);return function(d,e,n,m){if(m&&0<b)return l.lastIndexOf(d,e,n);m=d&&d.length||0;var v=a?m+c:g;n===k?n=a?g:m+c:0>n?(n=m+n,0>n&&(n=g)):n=n>=m?m+c:n;for(m&&"string"==
typeof d&&(d=d.split(""));n!=v;n+=b)if(d[n]==e)return n;return-1}}var m={},k,l={every:b(!1),some:b(!0),indexOf:c(!0),lastIndexOf:c(!1),forEach:function(b,c,d){var g=0,e=b&&b.length||0;e&&"string"==typeof b&&(b=b.split(""));"string"==typeof c&&(c=m[c]||a(c));if(d)for(;g<e;++g)c.call(d,b[g],g,b);else for(;g<e;++g)c(b[g],g,b)},map:function(b,c,d,e){var g=0,k=b&&b.length||0;e=new (e||Array)(k);k&&"string"==typeof b&&(b=b.split(""));"string"==typeof c&&(c=m[c]||a(c));if(d)for(;g<k;++g)e[g]=c.call(d,b[g],
g,b);else for(;g<k;++g)e[g]=c(b[g],g,b);return e},filter:function(b,c,d){var g=0,e=b&&b.length||0,k=[],l;e&&"string"==typeof b&&(b=b.split(""));"string"==typeof c&&(c=m[c]||a(c));if(d)for(;g<e;++g)l=b[g],c.call(d,l,g,b)&&k.push(l);else for(;g<e;++g)l=b[g],c(l,g,b)&&k.push(l);return k},clearCache:function(){m={}}};d.mixin(e,l);return l})},"dojo/date":function(){define(["./has","./_base/lang"],function(e,h){var d={getDaysInMonth:function(a){var b=a.getMonth();return 1==b&&d.isLeapYear(a)?29:[31,28,
31,30,31,30,31,31,30,31,30,31][b]},isLeapYear:function(a){a=a.getFullYear();return!(a%400)||!(a%4)&&!!(a%100)},getTimezoneName:function(a){var b=a.toString(),c="",d=b.indexOf("(");if(-1<d)c=b.substring(++d,b.indexOf(")"));else if(d=/([A-Z\/]+) \d{4}$/,b=b.match(d))c=b[1];else if(b=a.toLocaleString(),d=/ ([A-Z\/]+)$/,b=b.match(d))c=b[1];return"AM"==c||"PM"==c?"":c},compare:function(a,b,c){a=new Date(+a);b=new Date(+(b||new Date));"date"==c?(a.setHours(0,0,0,0),b.setHours(0,0,0,0)):"time"==c&&(a.setFullYear(0,
0,0),b.setFullYear(0,0,0));return a>b?1:a<b?-1:0},add:function(a,b,c){var d=new Date(+a),e=!1,l="Date";switch(b){case "day":break;case "weekday":var g;(b=c%5)?g=parseInt(c/5):(b=0<c?5:-5,g=0<c?(c-5)/5:(c+5)/5);var n=a.getDay(),u=0;6==n&&0<c?u=1:0==n&&0>c&&(u=-1);n+=b;if(0==n||6==n)u=0<c?2:-2;c=7*g+b+u;break;case "year":l="FullYear";e=!0;break;case "week":c*=7;break;case "quarter":c*=3;case "month":e=!0;l="Month";break;default:l="UTC"+b.charAt(0).toUpperCase()+b.substring(1)+"s"}if(l)d["set"+l](d["get"+
l]()+c);e&&d.getDate()<a.getDate()&&d.setDate(0);return d},difference:function(a,b,c){b=b||new Date;c=c||"day";var e=b.getFullYear()-a.getFullYear(),k=1;switch(c){case "quarter":a=a.getMonth();b=b.getMonth();k=Math.floor(b/3)+1+4*e-(Math.floor(a/3)+1);break;case "weekday":e=Math.round(d.difference(a,b,"day"));c=parseInt(d.difference(a,b,"week"));if(0==e%7)e=5*c;else{var k=0,l=a.getDay(),g=b.getDay();c=parseInt(e/7);b=e%7;a=new Date(a);a.setDate(a.getDate()+7*c);a=a.getDay();if(0<e)switch(!0){case 6==
l:k=-1;break;case 0==l:k=0;break;case 6==g:k=-1;break;case 0==g:k=-2;break;case 5<a+b:k=-2}else if(0>e)switch(!0){case 6==l:k=0;break;case 0==l:k=1;break;case 6==g:k=2;break;case 0==g:k=1;break;case 0>a+b:k=2}e=e+k-2*c}k=e;break;case "year":k=e;break;case "month":k=b.getMonth()-a.getMonth()+12*e;break;case "week":k=parseInt(d.difference(a,b,"day")/7);break;case "day":k/=24;case "hour":k/=60;case "minute":k/=60;case "second":k/=1E3;case "millisecond":k*=b.getTime()-a.getTime()}return Math.round(k)}};
h.mixin(h.getObject("dojo.date",!0),d);return d})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(e,h,d,a,b){var c={};e.setObject("dojo.number",c);c.format=function(a,b){b=e.mixin({},b||{});var g=h.normalizeLocale(b.locale),g=h.getLocalization("dojo.cldr","number",g);b.customs=g;g=b.pattern||g[(b.type||"decimal")+"Format"];return isNaN(a)||Infinity==Math.abs(a)?null:c._applyPattern(a,g,b)};c._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;
c._applyPattern=function(a,b,g){g=g||{};var d=g.customs.group,e=g.customs.decimal;b=b.split(";");var k=b[0];b=b[0>a?1:0]||"-"+k;if(-1!=b.indexOf("%"))a*=100;else if(-1!=b.indexOf("\u2030"))a*=1E3;else if(-1!=b.indexOf("\u00a4"))d=g.customs.currencyGroup||d,e=g.customs.currencyDecimal||e,b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(a,b,c,d){return(a=g[["symbol","currency","displayName"][c.length-1]]||g.currency||"")?b+a+d:""});else if(-1!=b.indexOf("E"))throw Error("exponential notation not supported");
var l=c._numberPatternRE,k=k.match(l);if(!k)throw Error("unable to find a number expression in pattern: "+b);!1===g.fractional&&(g.places=0);return b.replace(l,c._formatAbsolute(a,k[0],{decimal:e,group:d,places:g.places,round:g.round}))};c.round=function(a,b,g){g=10/(g||10);return(g*+a).toFixed(b)/g};if(0==(.9).toFixed()){var m=c.round;c.round=function(a,b,g){var c=Math.pow(10,-b||0),d=Math.abs(a);if(!a||d>=c)c=0;else if(d/=c,.5>d||.95<=d)c=0;return m(a,b,g)+(0<a?c:-c)}}c._formatAbsolute=function(b,
d,g){g=g||{};!0===g.places&&(g.places=0);Infinity===g.places&&(g.places=6);d=d.split(".");var e="string"==typeof g.places&&g.places.indexOf(","),k=g.places;e?k=g.places.substring(e+1):0<=k||(k=(d[1]||[]).length);0>g.round||(b=c.round(b,k,g.round));b=String(Math.abs(b)).split(".");var l=b[1]||"";d[1]||g.places?(e&&(g.places=g.places.substring(0,e)),e=void 0!==g.places?g.places:d[1]&&d[1].lastIndexOf("0")+1,e>l.length&&(b[1]=a.pad(l,e,"0",!0)),k<l.length&&(b[1]=l.substr(0,k))):b[1]&&b.pop();k=d[0].replace(",",
"");e=k.indexOf("0");-1!=e&&(e=k.length-e,e>b[0].length&&(b[0]=a.pad(b[0],e)),-1==k.indexOf("#")&&(b[0]=b[0].substr(b[0].length-e)));var k=d[0].lastIndexOf(","),m,w;-1!=k&&(m=d[0].length-k-1,d=d[0].substr(0,k),k=d.lastIndexOf(","),-1!=k&&(w=d.length-k-1));d=[];for(k=b[0];k;)e=k.length-m,d.push(0<e?k.substr(e):k),k=0<e?k.slice(0,e):"",w&&(m=w,w=void 0);b[0]=d.reverse().join(g.group||",");return b.join(g.decimal||".")};c.regexp=function(a){return c._parseInfo(a).regexp};c._parseInfo=function(a){a=a||
{};var d=h.normalizeLocale(a.locale),d=h.getLocalization("dojo.cldr","number",d),g=a.pattern||d[(a.type||"decimal")+"Format"],e=d.group,k=d.decimal,m=1;if(-1!=g.indexOf("%"))m/=100;else if(-1!=g.indexOf("\u2030"))m/=1E3;else{var t=-1!=g.indexOf("\u00a4");t&&(e=d.currencyGroup||e,k=d.currencyDecimal||k)}d=g.split(";");1==d.length&&d.push("-"+d[0]);d=b.buildGroupRE(d,function(g){g="(?:"+b.escapeString(g,".")+")";return g.replace(c._numberPatternRE,function(b){var g={signed:!1,separator:a.strict?e:[e,
""],fractional:a.fractional,decimal:k,exponent:!1};b=b.split(".");var d=a.places;1==b.length&&1!=m&&(b[1]="###");1==b.length||0===d?g.fractional=!1:(void 0===d&&(d=a.pattern?b[1].lastIndexOf("0")+1:Infinity),d&&void 0==a.fractional&&(g.fractional=!0),!a.places&&d<b[1].length&&(d+=","+b[1].length),g.places=d);b=b[0].split(",");1<b.length&&(g.groupSize=b.pop().length,1<b.length&&(g.groupSize2=b.pop().length));return"("+c._realNumberRegexp(g)+")"})},!0);t&&(d=d.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,
function(g,c,d,e){g=b.escapeString(a[["symbol","currency","displayName"][d.length-1]]||a.currency||"");if(!g)return"";c=c?"[\\s\\xa0]":"";e=e?"[\\s\\xa0]":"";return a.strict?c+g+e:(c&&(c+="*"),e&&(e+="*"),"(?:"+c+g+e+")?")}));return{regexp:d.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:e,decimal:k,factor:m}};c.parse=function(a,b){b=c._parseInfo(b);a=(new RegExp("^"+b.regexp+"$")).exec(a);if(!a)return NaN;var g=a[1];if(!a[1]){if(!a[2])return NaN;g=a[2];b.factor*=-1}g=g.replace(new RegExp("["+b.group+"\\s\\xa0]",
"g"),"").replace(b.decimal,".");return g*b.factor};c._realNumberRegexp=function(a){a=a||{};"places"in a||(a.places=Infinity);"string"!=typeof a.decimal&&(a.decimal=".");"fractional"in a&&!/^0/.test(a.places)||(a.fractional=[!0,!1]);"exponent"in a||(a.exponent=[!0,!1]);"eSigned"in a||(a.eSigned=[!0,!1]);var d=c._integerRegexp(a),g=b.buildGroupRE(a.fractional,function(b){var g="";b&&0!==a.places&&(g="\\"+a.decimal,g=Infinity==a.places?"(?:"+g+"\\d+)?":g+("\\d{"+a.places+"}"));return g},!0),e=b.buildGroupRE(a.exponent,
function(b){return b?"([eE]"+c._integerRegexp({signed:a.eSigned})+")":""}),d=d+g;g&&(d="(?:(?:"+d+")|(?:"+g+"))");return d+e};c._integerRegexp=function(a){a=a||{};"signed"in a||(a.signed=[!0,!1]);"separator"in a?"groupSize"in a||(a.groupSize=3):a.separator="";var c=b.buildGroupRE(a.signed,function(a){return a?"[-+]":""},!0),g=b.buildGroupRE(a.separator,function(g){if(!g)return"(?:\\d+)";g=b.escapeString(g);" "==g?g="\\s":"\u00a0"==g&&(g="\\s\\xa0");var c=a.groupSize,d=a.groupSize2;return d?(g="(?:0|[1-9]\\d{0,"+
(d-1)+"}(?:["+g+"]\\d{"+d+"})*["+g+"]\\d{"+c+"})",0<c-d?"(?:"+g+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":g):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+g+"]\\d{"+c+"})*)"},!0);return c+g};return c})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./has!host-browser?./_base/xhr ./json module".split(" "),function(e,h,d,a,b,c,m,k,l){d.add("dojo-preload-i18n-Api",1);m=e.i18n={};var g=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,n=function(f,a,b,g){var c=[b+g];a=a.split("-");
for(var d="",p=0;p<a.length;p++)if(d+=(d?"-":"")+a[p],!f||f[d])c.push(b+d+"/"+g),c.specificity=d;return c},u={},r=function(f,a,b){b=b?b.toLowerCase():e.locale;f=f.replace(/\./g,"/");a=a.replace(/\./g,"/");return/root/i.test(b)?f+"/nls/"+a:f+"/nls/"+b+"/"+a},t=e.getL10nName=function(f,a,b){return f=l.id+"!"+r(f,a,b)},w=function(f,a,b,g,d,p){f([a],function(e){var k=c.clone(e.root||e.ROOT),l=n(!e._v1x&&e,d,b,g);f(l,function(){for(var f=1;f<l.length;f++)k=c.mixin(c.clone(k),arguments[f]);u[a+"/"+d]=k;
k.$locale=l.specificity;p()})})},q=function(f){var a=b.extraLocale||[],a=c.isArray(a)?a:[a];a.push(f);return a},v=function(b,l,n){var m=g.exec(b),v=m[1]+"/",r=m[5]||m[4],t=v+r,x=(m=m[5]&&m[4])||e.locale||"",h=t+"/"+x,m=m?[x]:q(x),B=m.length,A=function(){--B||n(c.delegate(u[h]))},x=b.split("*"),D="preload"==x[1];if(d("dojo-preload-i18n-Api")){if(D&&(u[b]||(u[b]=1,z(x[2],k.parse(x[3]),1,l)),n(1)),(x=D)||(f&&p.push([b,l,n]),x=f&&!u[h]),x)return}else if(D){n(1);return}a.forEach(m,function(f){var a=t+
"/"+f;d("dojo-preload-i18n-Api")&&y(a);u[a]?A():w(l,t,v,r,f,A)})};d("dojo-preload-i18n-Api");var x=m.normalizeLocale=function(f){f=f?f.toLowerCase():e.locale;return"root"==f?"ROOT":f},f=0,p=[],z=m._preloadLocalizations=function(b,g,d,k){function l(f,a){k([f],a)}function n(f,a){for(f=f.split("-");f.length;){if(a(f.join("-")))return;f.pop()}a("ROOT")}function m(){for(--f;!f&&p.length;)v.apply(null,p.shift())}function r(d){d=x(d);n(d,function(p){if(0<=a.indexOf(g,p)){var e=b.replace(/\./g,"/")+"_"+p;
f++;l(e,function(a){for(var b in a){var g=a[b],e=b.match(/(.+)\/([^\/]+)$/),l;if(e&&(l=e[2],e=e[1]+"/",g._localized)){var v;if("ROOT"===p){var r=v=g._localized;delete g._localized;r.root=g;u[h.toAbsMid(b)]=r}else v=g._localized,u[h.toAbsMid(e+l+"/"+p)]=g;p!==d&&function(a,b,g,p){var e=[],l=[];n(d,function(f){p[f]&&(e.push(h.toAbsMid(a+f+"/"+b)),l.push(h.toAbsMid(a+b+"/"+f)))});e.length?(f++,k(e,function(){for(var f=e.length-1;0<=f;f--)g=c.mixin(c.clone(g),arguments[f]),u[l[f]]=g;u[h.toAbsMid(a+b+
"/"+d)]=c.clone(g);m()})):u[h.toAbsMid(a+b+"/"+d)]=g}(e,l,g,v)}}m()});return!0}return!1})}k=k||h;r();a.forEach(e.config.extraLocale,r)},y=function(){},y=function(f){for(var a,b=f.split("/"),g=e.global[b[0]],c=1;g&&c<b.length-1;g=g[b[c++]]);g&&((a=g[b[c]])||(a=g[b[c].replace(/-/g,"_")]),a&&(u[f]=a));return a};m.getLocalization=function(f,a,b){var g;f=r(f,a,b);v(f,h,function(f){g=f});return g};return c.mixin(m,{dynamic:!0,normalize:function(f,a){return/^\./.test(f)?a(f):f},load:v,cache:u,getL10nName:t})})},
"dojo/json":function(){define(["./has"],function(e){var h="undefined"!=typeof JSON;e.add("json-parse",h);e.add("json-stringify",h&&'{"a":1}'==JSON.stringify({a:0},function(a,b){return b||1}));if(e("json-stringify"))return JSON;var d=function(a){return('"'+a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:e("json-parse")?JSON.parse:function(a,b){if(b&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(a))throw new SyntaxError("Invalid characters in JSON");
return eval("("+a+")")},stringify:function(a,b,c){function e(a,g,n){b&&(a=b(n,a));var l;l=typeof a;if("number"==l)return isFinite(a)?a+"":"null";if("boolean"==l)return a+"";if(null===a)return"null";if("string"==typeof a)return d(a);if("function"==l||"undefined"==l)return k;if("function"==typeof a.toJSON)return e(a.toJSON(n),g,n);if(a instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(b,f,g){b=a["getUTC"+f]()+(g?1:0);return 10>b?"0"+
b:b});if(a.valueOf()!==a)return e(a.valueOf(),g,n);var m=c?g+c:"",t=c?" ":"",w=c?"\n":"";if(a instanceof Array){var t=a.length,q=[];for(n=0;n<t;n++)l=e(a[n],m,n),"string"!=typeof l&&(l="null"),q.push(w+m+l);return"["+q.join(",")+w+g+"]"}q=[];for(n in a){var v;if(a.hasOwnProperty(n)){if("number"==typeof n)v='"'+n+'"';else if("string"==typeof n)v=d(n);else continue;l=e(a[n],m,n);"string"==typeof l&&q.push(w+m+v+":"+t+l)}}return"{"+q.join(",")+w+g+"}"}var k;"string"==typeof b&&(c=b,b=null);return e(a,
"","")}}})},"dojo/cldr/nls/number":function(){define({root:{scientificFormat:"#E0","currencySpacing-afterCurrency-currencyMatch":"[:^S:]",infinity:"\u221e",superscriptingExponent:"\u00d7",list:";",percentSign:"%",minusSign:"-","currencySpacing-beforeCurrency-surroundingMatch":"[:digit:]","decimalFormat-short":"000T","currencySpacing-afterCurrency-insertBetween":"\u00a0",nan:"NaN",plusSign:"+","currencySpacing-afterCurrency-surroundingMatch":"[:digit:]","currencySpacing-beforeCurrency-currencyMatch":"[:^S:]",
currencyFormat:"\u00a4\u00a0#,##0.00",perMille:"\u2030",group:",",percentFormat:"#,##0%","decimalFormat-long":"000T",decimalFormat:"#,##0.###",decimal:".","currencySpacing-beforeCurrency-insertBetween":"\u00a0",exponential:"E"},ar:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,"en-au":!0,es:!0,et:!0,fi:!0,fr:!0,"fr-ch":!0,he:!0,hi:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,mk:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-pt":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,vi:!0,zh:!0,"zh-hant":!0,"zh-hk":!0,
"zh-tw":!0})},"dojo/cldr/nls/en/number":function(){define({group:",",percentSign:"%",exponential:"E",scientificFormat:"#E0",percentFormat:"#,##0%",list:";",infinity:"\u221e",minusSign:"-",decimal:".",superscriptingExponent:"\u00d7",nan:"NaN",perMille:"\u2030",decimalFormat:"#,##0.###",currencyFormat:"\u00a4#,##0.00;(\u00a4#,##0.00)",plusSign:"+","decimalFormat-long":"000 trillion","decimalFormat-short":"000T"})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(e,h){var d=
/[&<>'"\/]/g,a={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},b={};h.setObject("dojo.string",b);b.escape=function(b){return b?b.replace(d,function(b){return a[b]}):""};b.rep=function(a,b){if(0>=b||!a)return"";for(var c=[];;){b&1&&c.push(a);if(!(b>>=1))break;a+=a}return c.join("")};b.pad=function(a,d,e,l){e||(e="0");a=String(a);d=b.rep(e,Math.ceil((d-a.length)/e.length));return l?a+d:d+a};b.substitute=function(a,b,d,l){l=l||e.global;d=d?h.hitch(l,
d):function(a){return a};return a.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(a,c,e){if(""==c)return"$";a=h.getObject(c,!1,b);e&&(a=h.getObject(e,!1,l).call(l,a,c));e=d(a,c);if("undefined"===typeof e)throw Error('string.substitute could not find key "'+c+'" in template');return e.toString()})};b.trim=String.prototype.trim?h.trim:function(a){a=a.replace(/^\s+/,"");for(var b=a.length-1;0<=b;b--)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a};return b})},"dojo/regexp":function(){define(["./_base/kernel",
"./_base/lang"],function(e,h){var d={};h.setObject("dojo.regexp",d);d.escapeString=function(a,b){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(a){return b&&-1!=b.indexOf(a)?a:"\\"+a})};d.buildGroupRE=function(a,b,c){if(!(a instanceof Array))return b(a);for(var e=[],k=0;k<a.length;k++)e.push(b(a[k]));return d.group(e.join("|"),c)};d.group=function(a,b){return"("+(b?"?:":"")+a+")"};return d})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),
function(e,h,d,a,b,c,m,k,l){function g(b,g,f,c){return c.replace(/([a-z])\1*/ig,function(d){var p,e,k=d.charAt(0);d=d.length;var l=["abbr","wide","narrow"];switch(k){case "G":p=g[4>d?"eraAbbr":"eraNames"][0>b.getFullYear()?0:1];break;case "y":p=b.getFullYear();switch(d){case 1:break;case 2:if(!f.fullYear){p=String(p);p=p.substr(p.length-2);break}default:e=!0}break;case "Q":case "q":p=Math.ceil((b.getMonth()+1)/3);e=!0;break;case "M":case "L":p=b.getMonth();3>d?(p+=1,e=!0):(k=["months","L"==k?"standAlone":
"format",l[d-3]].join("-"),p=g[k][p]);break;case "w":p=r._getWeekOfYear(b,0);e=!0;break;case "d":p=b.getDate();e=!0;break;case "D":p=r._getDayOfYear(b);e=!0;break;case "e":case "c":if(p=b.getDay(),2>d){p=(p-a.getFirstDayOfWeek(f.locale)+8)%7;break}case "E":p=b.getDay();3>d?(p+=1,e=!0):(k=["days","c"==k?"standAlone":"format",l[d-3]].join("-"),p=g[k][p]);break;case "a":k=12>b.getHours()?"am":"pm";p=f[k]||g["dayPeriods-format-wide-"+k];break;case "h":case "H":case "K":case "k":e=b.getHours();switch(k){case "h":p=
e%12||12;break;case "H":p=e;break;case "K":p=e%12;break;case "k":p=e||24}e=!0;break;case "m":p=b.getMinutes();e=!0;break;case "s":p=b.getSeconds();e=!0;break;case "S":p=Math.round(b.getMilliseconds()*Math.pow(10,d-3));e=!0;break;case "v":case "z":if(p=r._getZone(b,!0,f))break;d=4;case "Z":k=r._getZone(b,!1,f);k=[0>=k?"+":"-",m.pad(Math.floor(Math.abs(k)/60),2),m.pad(Math.abs(k)%60,2)];4==d&&(k.splice(0,0,"GMT"),k.splice(3,0,":"));p=k.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+
c);}e&&(p=m.pad(p,d));return p})}function n(a,b,f,g){var c=function(f){return f};b=b||c;f=f||c;g=g||c;var d=a.match(/(''|[^'])+/g),p="'"==a.charAt(0);h.forEach(d,function(a,g){a?(d[g]=(p?f:b)(a.replace(/''/g,"'")),p=!p):d[g]=""});return g(d.join(""))}function u(a,b,f,g){g=c.escapeString(g);f.strict||(g=g.replace(" a"," ?a"));return g.replace(/([a-z])\1*/ig,function(g){var c;c=g.charAt(0);var d=g.length,p="",e="";f.strict?(1<d&&(p="0{"+(d-1)+"}"),2<d&&(e="0{"+(d-2)+"}")):(p="0?",e="0{0,2}");switch(c){case "y":c=
"\\d{2,4}";break;case "M":case "L":2<d?(c=b["months-"+("L"==c?"standAlone":"format")+"-"+t[d-3]].slice(0).join("|"),f.strict||(c=c.replace(/\./g,""),c="(?:"+c+")\\.?")):c="1[0-2]|"+p+"[1-9]";break;case "D":c="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p+"[1-9][0-9]|"+e+"[1-9]";break;case "d":c="3[01]|[12]\\d|"+p+"[1-9]";break;case "w":c="[1-4][0-9]|5[0-3]|"+p+"[1-9]";break;case "E":case "e":case "c":c=".+?";break;case "h":c="1[0-2]|"+p+"[1-9]";break;case "k":c="1[01]|"+p+"\\d";break;case "H":c="1\\d|2[0-3]|"+
p+"\\d";break;case "K":c="1\\d|2[0-4]|"+p+"[1-9]";break;case "m":case "s":c="[0-5]\\d";break;case "S":c="\\d{"+d+"}";break;case "a":d=f.am||b["dayPeriods-format-wide-am"];p=f.pm||b["dayPeriods-format-wide-pm"];c=d+"|"+p;f.strict||(d!=d.toLowerCase()&&(c+="|"+d.toLowerCase()),p!=p.toLowerCase()&&(c+="|"+p.toLowerCase()),-1!=c.indexOf(".")&&(c+="|"+c.replace(/\./g,"")));c=c.replace(/\./g,"\\.");break;default:c=".*"}a&&a.push(g);return"("+c+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var r={};e.setObject(l.id.replace(/\//g,
"."),r);r._getZone=function(a,b,f){return b?d.getTimezoneName(a):a.getTimezoneOffset()};r.format=function(a,c){c=c||{};var f=b.normalizeLocale(c.locale),d=c.formatLength||"short",f=r._getGregorianBundle(f),k=[];a=e.hitch(this,g,a,f,c);if("year"==c.selector)return n(f["dateFormatItem-yyyy"]||"yyyy",a);var l;"date"!=c.selector&&(l=c.timePattern||f["timeFormat-"+d])&&k.push(n(l,a));"time"!=c.selector&&(l=c.datePattern||f["dateFormat-"+d])&&k.push(n(l,a));return 1==k.length?k[0]:f["dateTimeFormat-"+d].replace(/\'/g,
"").replace(/\{(\d+)\}/g,function(f,a){return k[a]})};r.regexp=function(a){return r._parseInfo(a).regexp};r._parseInfo=function(a){a=a||{};var g=b.normalizeLocale(a.locale),g=r._getGregorianBundle(g),f=a.formatLength||"short",c=a.datePattern||g["dateFormat-"+f],d=a.timePattern||g["timeFormat-"+f],f="date"==a.selector?c:"time"==a.selector?d:g["dateTimeFormat-"+f].replace(/\{(\d+)\}/g,function(f,a){return[d,c][a]}),k=[];return{regexp:n(f,e.hitch(this,u,k,g,a)),tokens:k,bundle:g}};r.parse=function(a,
b){var f=/[\u200E\u200F\u202A\u202E]/g,g=r._parseInfo(b),c=g.tokens,e=g.bundle;a=(new RegExp("^"+g.regexp.replace(f,"")+"$",g.strict?"":"i")).exec(a&&a.replace(f,""));if(!a)return null;var k=["abbr","wide","narrow"],l=[1970,0,1,0,0,0,0],n="";a=h.every(a,function(f,a){if(!a)return!0;var g=c[a-1];a=g.length;g=g.charAt(0);switch(g){case "y":if(2!=a&&b.strict)l[0]=f;else if(100>f)f=Number(f),g=""+(new Date).getFullYear(),a=100*g.substring(0,2),g=Math.min(Number(g.substring(2,4))+20,99),l[0]=f<g?a+f:a-
100+f;else{if(b.strict)return!1;l[0]=f}break;case "M":case "L":if(2<a){if(a=e["months-"+("L"==g?"standAlone":"format")+"-"+k[a-3]].concat(),b.strict||(f=f.replace(".","").toLowerCase(),a=h.map(a,function(f){return f.replace(".","").toLowerCase()})),f=h.indexOf(a,f),-1==f)return!1}else f--;l[1]=f;break;case "E":case "e":case "c":a=e["days-"+("c"==g?"standAlone":"format")+"-"+k[a-3]].concat();b.strict||(f=f.toLowerCase(),a=h.map(a,function(f){return f.toLowerCase()}));f=h.indexOf(a,f);if(-1==f)return!1;
break;case "D":l[1]=0;case "d":l[2]=f;break;case "a":a=b.am||e["dayPeriods-format-wide-am"];g=b.pm||e["dayPeriods-format-wide-pm"];if(!b.strict){var d=/\./g;f=f.replace(d,"").toLowerCase();a=a.replace(d,"").toLowerCase();g=g.replace(d,"").toLowerCase()}if(b.strict&&f!=a&&f!=g)return!1;n=f==g?"p":f==a?"a":"";break;case "K":24==f&&(f=0);case "h":case "H":case "k":if(23<f)return!1;l[3]=f;break;case "m":l[4]=f;break;case "s":l[5]=f;break;case "S":l[6]=f}return!0});f=+l[3];"p"===n&&12>f?l[3]=f+12:"a"===
n&&12==f&&(l[3]=0);f=new Date(l[0],l[1],l[2],l[3],l[4],l[5],l[6]);b.strict&&f.setFullYear(l[0]);var m=c.join(""),g=-1!=m.indexOf("d"),m=-1!=m.indexOf("M");if(!a||m&&f.getMonth()>l[1]||g&&f.getDate()>l[2])return null;if(m&&f.getMonth()<l[1]||g&&f.getDate()<l[2])f=d.add(f,"hour",1);return f};var t=["abbr","wide","narrow"],w=[],q={};r.addCustomFormats=function(a,b){w.push({pkg:a,name:b});q={}};r._getGregorianBundle=function(a){if(q[a])return q[a];var g={};h.forEach(w,function(f){f=b.getLocalization(f.pkg,
f.name,a);g=e.mixin(g,f)},this);return q[a]=g};r.addCustomFormats(l.id.replace(/\/date\/locale$/,".cldr"),"gregorian");r.getNames=function(a,b,f,g){var c;g=r._getGregorianBundle(g);a=[a,f,b];"standAlone"==f&&(f=a.join("-"),c=g[f],1==c[0]&&(c=void 0));a[1]="format";return(c||g[a.join("-")]).concat()};r.isWeekend=function(b,g){g=a.getWeekend(g);b=(b||new Date).getDay();g.end<g.start&&(g.end+=7,b<g.start&&(b+=7));return b>=g.start&&b<=g.end};r._getDayOfYear=function(a){return d.difference(new Date(a.getFullYear(),
0,1,a.getHours()),a)+1};r._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var f=(new Date(a.getFullYear(),0,1)).getDay(),g=(f-b+7)%7,g=Math.floor((r._getDayOfYear(a)+g-1)/7);f==b&&g++;return g};return r})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(e,h){var d={};e.setObject("dojo.cldr.supplemental",d);d.getFirstDayOfWeek=function(a){a={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,
br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[d._region(a)];return void 0===a?1:a};d._region=function(a){a=h.normalizeLocale(a);a=a.split("-");var b=a[1];b?4==b.length&&(b=a[2]):b={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",
bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",
kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",
sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",
bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",
hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",
mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",
ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[a[0]];return b};d.getWeekend=
function(a){var b=d._region(a);a={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[b];b={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[b];void 0===a&&(a=6);void 0===b&&(b=0);return{start:a,end:b}};return d})},"dojo/cldr/nls/gregorian":function(){define({root:{"dateFormatItem-Ehm":"E h:mm a","days-standAlone-short":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"months-format-narrow":"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),
"field-second-relative+0":"now","quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"y-MM-dd, E","field-wed-relative+0":"this Wednesday","field-wed-relative+1":"next Wednesday","dateFormatItem-GyMMMEd":"G y MMM d, E","dateFormatItem-MMMEd":"MMM d, E",eraNarrow:["BCE","CE"],"field-tue-relative+-1":"last Tuesday","days-format-short":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}",
"dateFormat-long":"y MMMM d","field-fri-relative+-1":"last Friday","field-wed-relative+-1":"last Wednesday","months-format-wide":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"PM","dateFormat-full":"y MMMM d, EEEE","field-thu-relative+-1":"last Thursday","dateFormatItem-Md":"MM-dd","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dayPeriods-format-wide-noon":"noon","dateFormatItem-yMd":"y-MM-dd",
"field-era":"Era","dateFormatItem-yM":"y-MM","months-standAlone-wide":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"timeFormat-short":"HH:mm","quarters-format-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-yQQQQ":"y QQQQ","timeFormat-long":"HH:mm:ss z","field-year":"Year","dateFormatItem-yMMM":"y MMM","dateTimeFormats-appendItem-Era":"{1} {0}","field-hour":"Hour","months-format-abbr":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"field-sat-relative+0":"this Saturday","field-sat-relative+1":"next Saturday",
"timeFormat-full":"HH:mm:ss zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"today","field-thu-relative+0":"this Thursday","field-day-relative+1":"tomorrow","field-thu-relative+1":"next Thursday","dateFormatItem-GyMMMd":"G y MMM d","dateFormatItem-H":"HH","months-standAlone-abbr":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-Gy":"G y","dateFormatItem-M":"L",
"days-standAlone-wide":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dayPeriods-format-abbr-noon":"noon","timeFormat-medium":"HH:mm:ss","field-sun-relative+0":"this Sunday","dateFormatItem-Hm":"HH:mm","field-sun-relative+1":"next Sunday","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],eraAbbr:["BCE","CE"],"field-minute":"Minute","field-dayperiod":"Dayperiod","days-standAlone-abbr":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1",
"2","3","4"],"field-day-relative+-1":"yesterday","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"a","dateFormatItem-h":"h a","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"MM-dd, E","dateTimeFormat-full":"{1} {0}","field-fri-relative+0":"this Friday","field-fri-relative+1":"next Friday","field-day":"Day","days-format-wide":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"field-zone":"Zone","months-standAlone-narrow":"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),"dateFormatItem-y":"y","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})",
"field-year-relative+-1":"last year","field-month-relative+-1":"last month","dateTimeFormats-appendItem-Year":"{1} {0}","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","days-format-abbr":"Sun Mon Tue Wed Thu Fri Sat".split(" "),eraNames:["BCE","CE"],"dateFormatItem-yMMMd":"y MMM d","days-format-narrow":"SMTWTFS".split(""),"field-month":"Month","days-standAlone-narrow":"SMTWTFS".split(""),"dateFormatItem-MMM":"LLL","field-tue-relative+0":"this Tuesday",
"dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","field-tue-relative+1":"next Tuesday","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormatItem-EHm":"E HH:mm","field-mon-relative+0":"this Monday","field-mon-relative+1":"next Monday","dateFormat-short":"y-MM-dd","dateFormatItem-EHms":"E HH:mm:ss","dateFormatItem-Ehms":"E h:mm:ss a","dayPeriods-format-narrow-noon":"n","field-second":"Second","field-sat-relative+-1":"last Saturday",
"dateFormatItem-yMMMEd":"y MMM d, E","field-sun-relative+-1":"last Sunday","field-month-relative+0":"this month","field-month-relative+1":"next month","dateTimeFormats-appendItem-Timezone":"{0} {1}","dateFormatItem-Ed":"d, E","field-week":"Week","dateFormat-medium":"y MMM d","field-week-relative+-1":"last week","field-year-relative+0":"this year","field-year-relative+1":"next year","dayPeriods-format-narrow-pm":"p","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a",
"dateFormatItem-GyMMM":"G y MMM","field-mon-relative+-1":"last Monday","field-week-relative+0":"this week","field-week-relative+1":"next week"},ar:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,"en-au":!0,"en-ca":!0,"en-gb":!0,es:!0,et:!0,fi:!0,fr:!0,"fr-ch":!0,he:!0,hi:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,mk:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-pt":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,vi:!0,zh:!0,"zh-hant":!0,"zh-hk":!0,"zh-tw":!0})},"dojo/cldr/nls/en/gregorian":function(){define({"dateFormatItem-Ehm":"E h:mm a",
"days-standAlone-short":"Su Mo Tu We Th Fr Sa".split(" "),"months-format-narrow":"JFMAMJJASOND".split(""),"field-second-relative+0":"now","quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"E, M/d/y","field-wed-relative+0":"this Wednesday","field-wed-relative+1":"next Wednesday","dateFormatItem-GyMMMEd":"E, MMM d, y G","dateFormatItem-MMMEd":"E, MMM d",eraNarrow:["B","A"],"field-tue-relative+-1":"last Tuesday","days-format-short":"Su Mo Tu We Th Fr Sa".split(" "),
"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"MMMM d, y","field-fri-relative+-1":"last Friday","field-wed-relative+-1":"last Wednesday","months-format-wide":"January February March April May June July August September October November December".split(" "),"dateTimeFormat-medium":"{1}, {0}","dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE, MMMM d, y","field-thu-relative+-1":"last Thursday","dateFormatItem-Md":"M/d","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})",
"dayPeriods-format-wide-noon":"noon","dateFormatItem-yMd":"M/d/y","field-era":"Era","dateFormatItem-yM":"M/y","months-standAlone-wide":"January February March April May June July August September October November December".split(" "),"timeFormat-short":"h:mm a","quarters-format-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormatItem-yQQQQ":"QQQQ y","timeFormat-long":"h:mm:ss a z","field-year":"Year","dateFormatItem-yMMM":"MMM y","dateTimeFormats-appendItem-Era":"{0} {1}","field-hour":"Hour",
"months-format-abbr":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),"field-sat-relative+0":"this Saturday","field-sat-relative+1":"next Saturday","timeFormat-full":"h:mm:ss a zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"today","field-thu-relative+0":"this Thursday","field-day-relative+1":"tomorrow","field-thu-relative+1":"next Thursday","dateFormatItem-GyMMMd":"MMM d, y G","dateFormatItem-H":"HH","months-standAlone-abbr":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormatItem-Gy":"y G","dateFormatItem-M":"L","days-standAlone-wide":"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),"timeFormat-medium":"h:mm:ss a","field-sun-relative+0":"this Sunday","dateFormatItem-Hm":"HH:mm","field-sun-relative+1":"next Sunday",eraAbbr:["BC","AD"],"field-minute":"Minute","field-dayperiod":"AM/PM","dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss",
"field-day-relative+-1":"yesterday","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} 'at' {0}","dayPeriods-format-narrow-am":"a","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"E, M/d","dateTimeFormat-full":"{1} 'at' {0}","field-fri-relative+0":"this Friday","field-fri-relative+1":"next Friday","field-day":"Day","days-format-wide":"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),"field-zone":"Time Zone","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-y":"y",
"months-standAlone-narrow":"JFMAMJJASOND".split(""),"field-year-relative+-1":"last year","field-month-relative+-1":"last month","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","days-format-abbr":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dateFormatItem-yMMMd":"MMM d, y",eraNames:["Before Christ","Anno Domini"],"days-standAlone-narrow":"SMTWTFS".split(""),"dateFormatItem-MMM":"LLL","field-month":"Month","field-tue-relative+0":"this Tuesday",
"dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","field-tue-relative+1":"next Tuesday","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormatItem-EHm":"E HH:mm","field-mon-relative+0":"this Monday","field-mon-relative+1":"next Monday","dateFormat-short":"M/d/yy","dateFormatItem-EHms":"E HH:mm:ss","dateFormatItem-Ehms":"E h:mm:ss a","dayPeriods-format-narrow-noon":"n","field-second":"Second","field-sat-relative+-1":"last Saturday",
"dateFormatItem-yMMMEd":"E, MMM d, y","field-sun-relative+-1":"last Sunday","field-month-relative+0":"this month","field-month-relative+1":"next month","dateFormatItem-Ed":"d E","dateTimeFormats-appendItem-Timezone":"{0} {1}","field-week":"Week","dateFormat-medium":"MMM d, y","field-year-relative+0":"this year","field-week-relative+-1":"last week","field-year-relative+1":"next year","dayPeriods-format-narrow-pm":"p","dateTimeFormat-short":"{1}, {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a",
"dateFormatItem-GyMMM":"MMM y G","field-mon-relative+-1":"last Monday","field-week-relative+0":"this week","field-week-relative+1":"next week"})},"esri/nls/common":function(){define({root:{about:"About",add:"Add",all:"All",apply:"Apply",auth:{logOut:"Log Out",signIn:"Sign In"},back:"Back",cancel:"Cancel",change:"Change",clear:"Clear",close:"Close",collapse:"Collapse",configure:"Configure",control:{pause:"Pause",play:"Play",resume:"Resume",stop:"Stop"},copy:"Copy",create:"Create",cut:"Cut","delete":"Delete",
details:"Details",edit:"Edit",error:"Error",esri:"Esri",exit:"Exit",expand:"Expand",fieldsSummary:"List of attributes and values",find:"Find",form:{no:"No",ok:"OK",password:"Password",submit:"Submit",username:"Username",yes:"Yes"},help:"Help",home:"Home",info:"Info",information:"Information",layer:"Layer",loading:"Loading",maximize:"Maximize",menu:"Menu",more:"More",none:"None",open:"Open",pagination:{first:"First",last:"Last",next:"Next",page:"Page",pageText:"{index} of {total}",previous:"Previous"},
paste:"Paste",preview:"Preview",print:"Print",publish:"Publish",redo:"Redo",refresh:"Refresh",remove:"Remove",rename:"Rename",reset:"Reset",restore:"Restore",save:"Save",search:"Search",searching:"Searching",select:"Select",settings:"Settings",sort:"Sort",share:"Share",title:"Title",untitled:"Untitled",upload:"Upload",undo:"Undo",view:"View",visibility:{hide:"Hide",show:"Show",toggle:"Toggle"},warning:"Warning"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,
lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(e,h,d){function a(a,b,g){if(null!=g.getItemAt||Array.isArray(g)){var c=parseInt(a,10);if(!isNaN(c))return Array.isArray(g)?g[c]:g.getItemAt(c)}c=d.getProperties(g);return b?d.isPropertyDeclared(c,a)?c.get(a):g[a]:d.isPropertyDeclared(c,a)?c.internalGet(a):g[a]}function b(c,d,g,e){if(null==c)return c;
c=a(d[e],g,c);return!c&&e<d.length-1?void 0:e===d.length-1?c:b(c,d,g,e+1)}function c(c,e,g,n){return void 0===g&&(g=!1),void 0===n&&(n=0),"string"==typeof e&&-1===e.indexOf(".")?a(e,g,c):b(c,d.pathToArray(e),g,n)}function m(a,b){return c(a,b,!0)}Object.defineProperty(h,"__esModule",{value:!0});h.valueOf=c;h.get=m;h.exists=function(a,b){return void 0!==c(b,a,!0)};h["default"]=m})},"esri/core/accessorSupport/set":function(){define(["require","exports","./get"],function(e,h,d){function a(b,c,e){if(b&&
c)if("object"==typeof c){e=0;for(var k=Object.getOwnPropertyNames(c);e<k.length;e++){var l=k[e];a(b,l,c[l])}}else if("_"!==c[0]){if(-1!==c.indexOf("."))return c=c.split("."),l=c.splice(c.length-1,1)[0],void a(d["default"](b,c),l,e);b[c]=e}}Object.defineProperty(h,"__esModule",{value:!0});h.set=a;h["default"]=a})},"esri/core/accessorSupport/extensions/computedProperty":function(){define(["require","exports","dojo/has","../utils","../wire"],function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});
var c=d("dojo-debug-messages");h.ComputedPropertyExtension={processClassPropertyMetadata:function(d,e,l,g){if(c){var k=e.dependsOn;k&&k.length&&k.map(function(a){return a.split(".")[0]}).forEach(function(a){null==l[a]&&console.error("[accessor] class '"+g+"' - property '"+d+"' depends on unknown property '"+a+"' which hasn't been found during introspection. This can be fix by adding '"+a+"' to the metadata for example.")})}e.dependsOn&&(e.wire=b.create(e.dependsOn,function(b){return a.getProperties(b).propertyInvalidated(d)}))},
instanceCreated:function(a,b,c){for(var g=0;g<c.length;g++){var d=b[c[g]];d.wire&&d.wire(a)}}};h["default"]=h.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/shorthands ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/writer".split(" "),function(e,h,d,a,b,c){function m(a,b,g){var c=a&&a.json;a&&a.json&&a.json.origins&&g&&(a=a.json.origins[g.origin])&&b in a&&
(c=a);return c}Object.defineProperty(h,"__esModule",{value:!0});h.originSpecificReadPropertyDefinition=function(a,b){return m(a,"read",b)};h.originSpecificWritePropertyDefinition=function(a,b){return m(a,"write",b)};h.SerializablePropertyExtension={processPrototypePropertyMetadata:function(e,l,g,n){if(d.process(l)){a.process(l);n=(g=Array.isArray(l.type))?l.type[0]:l.type;if(l.json.origins)for(var k in l.json.origins){var m=l.json.origins[k];b.create(n,g,e,m);c.create(n,g,e,m)}b.create(n,g,e,l.json);
c.create(n,g,e,l.json)}}};h["default"]=h.SerializablePropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(e,h){function d(a){"boolean"==typeof a.read?a.read={enabled:a.read}:"function"==typeof a.read?a.read={enabled:!0,reader:a.read}:a.read&&"object"==typeof a.read&&void 0===a.read.enabled&&(a.read.enabled=!0)}function a(a){"boolean"==typeof a.write?a.write={enabled:a.write}:"function"==typeof a.write?a.write=
{enabled:!0,writer:a.write}:a.write&&"object"==typeof a.write&&void 0===a.write.enabled&&(a.write.enabled=!0)}Object.defineProperty(h,"__esModule",{value:!0});h.process=function(b){if(b.json||(b.json={}),d(b.json),a(b.json),b.json.origins)for(var c in b.json.origins)d(b.json.origins[c]),a(b.json.origins[c]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});h.process=
function(d){if(d.json&&d.json.origins){var a=d.json.origins,b={portalItem:["portal-item"],webScene:["web-scene"],webMap:["web-map"],webDocument:["web-scene","web-map"],"web-document":["web-scene","web-map"]};d=function(c){if(a[c]){var d=a[c];b[c].forEach(function(b){a[b]=d});delete a[c]}};for(var c in b)d(c)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","dojo/_base/lang","./type"],function(e,h,d,a){function b(a,b,d,e){if(b)return m(a);
if(k(a)){var g=m(a.prototype.itemType);return function(b,c,d){return(b=g(b,c,d))?new a(b):b}}return c(a)}function c(a){return a.prototype.read?function(b,g,c){return null==b?b:(new a).read(b,c)}:a.fromJSON}function m(a){var b=c(a);return function(a,g,c){return null==a?a:Array.isArray(a)?a.map(function(a){return b(a,null,c)}):[b(a,null,c)]}}function k(b){return a.isCollection(b)&&l(b.prototype.itemType)}function l(a){return!!a&&(!!a.prototype.read||!!a.fromJSON||k(a))}Object.defineProperty(h,"__esModule",
{value:!0});h.create=function(a,c,e,k){(!k.read||!k.read.reader&&!1!==k.read.enabled)&&l(a)&&d.setObject("read.reader",b(a,c,e,k),k)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});h.isCollection=function(d){return!!d&&!!d.prototype.declaredClass&&0===d.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require",
"exports","dojo/_base/lang","./type"],function(e,h,d,a){function b(a,b,g,e){d.setObject(g,c(a,e),b)}function c(a,b){return a&&"function"==typeof a.write?a.write({},b):a&&"function"==typeof a.toJSON?a.toJSON():a}function m(a,b,g,e){var k;null===a?k=null:a&&"function"==typeof a.map?(k=a.map(function(a){return c(a,e)}),"function"==typeof k.toArray&&(k=k.toArray())):k=[c(a,e)];d.setObject(g,k,b)}Object.defineProperty(h,"__esModule",{value:!0});h.create=function(c,d,g,e){e.write&&!e.write.writer&&!1!==
e.write.enabled&&(d||a.isCollection(c)?e.write.writer=m:e.write.writer=b)}})},"esri/core/Logger":function(){define(["require","exports","dojo/has"],function(e,h,d){var a={info:0,warn:1,error:2};e=function(){function b(a){void 0===a&&(a={});this.module=a.module||"";this.writer=a.writer||null;this.level=a.level||null;null!=a.enabled&&(this.enabled=!!a.enabled);b._loggers[this.module]=this;a=this.module.lastIndexOf(".");-1!==a&&(this.parent=b.getLogger(this.module.slice(0,a)))}return b.prototype.log=
function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this._isEnabled()&&this._matchLevel(a)&&(c=this._inheritedWriter())&&c.apply(void 0,[a,this.module].concat(b))},b.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["error"].concat(a))},b.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["warn"].concat(a))},b.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=
arguments[b];this.log.apply(this,["info"].concat(a))},b.prototype.getLogger=function(a){return b.getLogger(this.module+"."+a)},b.getLogger=function(a){var c=b._loggers[a];return c||(c=new b({module:a})),c},b.prototype._parentWithMember=function(a,b){for(var c=this;c&&null==c[a];)c=c.parent;return c?c[a]:b},b.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)},b.prototype._consoleWriter=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];
console[a].apply(console,["["+b+"]"].concat(c))},b.prototype._matchLevel=function(b){return a[this._parentWithMember("level","error")]<=a[b]},b.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)},b}();e._loggers={};h=e.getLogger("esri");return d("dojo-debug-messages")?h.level="info":h.level="warn",e})},"esri/core/accessorSupport/introspection":function(){define("require exports dojo/_base/lang ./utils ./metadata ./ensureType ./extensions ./decorators/cast".split(" "),function(e,
h,d,a,b,c,m,k){Object.defineProperty(h,"__esModule",{value:!0});var l=Object.prototype.hasOwnProperty,g=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,n={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},u=/^_(set|get)([a-zA-Z0-9]+)Attr$/;h.processPrototype=function(e){for(var k=e.declaredClass,r=e.properties||{},q=0,v=Object.getOwnPropertyNames(r);q<v.length;q++){var x=v[q],f=r[x],p=typeof f;null==f?b.setPropertyMetadata(e,x,{value:f}):Array.isArray(f)?
b.setPropertyMetadata(e,x,{type:[f[0]],value:null}):"object"===p?a.getProperties(f)||f instanceof Date?b.setPropertyMetadata(e,x,{type:f.constructor,value:f}):b.setPropertyMetadata(e,x,f):"boolean"===p?b.setPropertyMetadata(e,x,{type:Boolean,value:f}):"string"===p?b.setPropertyMetadata(e,x,{type:String,value:f}):"number"===p?b.setPropertyMetadata(e,x,{type:Number,value:f}):"function"===p&&b.setPropertyMetadata(e,x,{type:f,value:null})}q=0;for(v=Object.getOwnPropertyNames(e);q<v.length;q++){var p=
v[q],f=e[p],z=void 0,r=x=void 0;if((z=g.exec(p))?(x=z[1],r=n[z[2]]):(z=u.exec(p))&&(x=z[2][0].toLowerCase()+z[2].substr(1),r=z[1].toLowerCase()),x&&r)x=b.getPropertyMetadata(e,x),d.setObject(r,f,x)}q=0;for(v=Object.getOwnPropertyNames(b.getPropertiesMetadata(e));q<v.length;q++)if(x=v[q],f=b.getPropertyMetadata(e,x),r=f.type,void 0===f.value&&l.call(e,x)&&(f.value=e[x]),!f.cast&&r)switch(r){case Number:f.cast=c.ensureNumber;break;case Boolean:f.cast=c.ensureBoolean;break;case String:f.cast=c.ensureString;
break;case Date:f.cast=c.ensureDate;break;default:Array.isArray(r)?f.cast=c.ensureArray(r[0]):f.cast=c.ensureType(r)}return m.processPrototypeMetadatas(b.getPropertiesMetadata(e),k),b.getPropertiesMetadata(e)};h.processClass=function(g){for(var c=g.prototype,d=c.declaredClass,e=g._meta.bases,l={},n=e.length-1;0<=n;n--)a.merge(l,b.getMetadata(e[n].prototype));var f=l.properties;m.processClassMetadatas(f,d);Object.defineProperty(g,"__accessorMetadata__",{value:f});for(var p={},d=function(a){var b=f[a];
p[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):b.value},set:function(f){var g=this.__accessor__;if(!g)return void Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:f});if(!Object.isFrozen(this)){if(g.initialized&&b.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);g.set(a,f)}}}},e=0,n=Object.getOwnPropertyNames(f);e<n.length;e++)d(n[e]);if(Object.defineProperties(g.prototype,
p),l.parameters)for(g=0,d=Object.getOwnPropertyNames(l.parameters);g<d.length;g++)e=d[g],n=Object.getOwnPropertyDescriptor(c,e)||{value:c[e]},(n=k.autocastMethod(c,e,n))&&Object.defineProperty(c,e,n);return l}})},"esri/core/accessorSupport/metadata":function(){define(["require","exports"],function(e,h){function d(a){return null!=a.__accessorMetadata__}function a(a){return d(a)&&null!=b(a).properties}function b(a){return a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},
enumerable:!0,configurable:!0,writable:!0}),a.__accessorMetadata__}function c(a){a=b(a);var c=a.properties;return c||(c=a.properties={}),c}function m(a,c){var g=b(a);(a=g.parameters)||(a=g.parameters={});g=a[c];return g||(g=[],a[c]=g),g}Object.defineProperty(h,"__esModule",{value:!0});h.hasMetadata=d;h.hasPropertiesMetadata=a;h.hasPropertyMetadata=function(b,d){return a(b)&&null!=c(b)[d]};h.hasParametersMetadata=function(a,c){return d(a)&&null!=b(a).parameters&&null!=b(a).parameters[c]};h.getMetadata=
b;h.getPropertiesMetadata=c;h.getPropertyMetadata=function(a,b){a=c(a);var g=a[b];return g||(g=a[b]={}),g};h.setPropertyMetadata=function(a,b,g){c(a)[b]=g};h.getParametersMetadata=m;h.getParameterMetadata=function(a,b,g){var c=m(a,b)[g];return c||(m(a,b)[g]=c={index:g}),c}})},"esri/core/accessorSupport/ensureType":function(){define(["require","exports","dojo/has"],function(e,h,d){function a(a,b){return b.isInstanceOf?b.isInstanceOf(a):b instanceof a}function b(a){return a&&a.constructor&&void 0!==
a.constructor._meta}function c(b,c){return null!=c&&b&&!a(b,c)}function m(a,d){return 1===arguments.length?m.bind(null,a):(c(a,d)&&(l&&b(d)?console.warn("Assigning an instance of '"+(d.declaredClass||"unknown")+"' which is not a subclass of '"+(a.prototype&&a.prototype.declaredClass||"unknown")+"'"):d=new a(d)),d)}function k(a,b){return 1===arguments.length?k.bind(null,a):b?Array.isArray(b)?b.map(m.bind(null,a)):[m(a,b)]:b}Object.defineProperty(h,"__esModule",{value:!0});var l=d("dojo-debug-messages");
h.isInstanceOf=a;h.ensureDate=function(a){return null==a?a:new Date(a)};h.ensureBoolean=function(a){return!0===a||!1===a?a:!!a};h.ensureString=function(a){return null==a?a:a.toString()};h.ensureNumber=function(a){return null==a?a:parseFloat(a)};h.isClassedType=b;h.requiresType=c;h.ensureType=m;h.ensureArray=k;h["default"]=m})},"esri/core/accessorSupport/decorators/cast":function(){define(["require","exports","../metadata","../ensureType"],function(e,h,d,a){function b(b){var g="_meta"in b?a.ensureType(b):
b;return function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return a.push(g),"number"==typeof a[2]?m.apply(this,a):c.apply(this,a)}}function c(a,b,c,e){d.getPropertyMetadata(a,b).cast=e}function m(a,b,c,e){d.getParameterMetadata(a,b,c).cast=e}function k(a){return function(b,g,c){d.getPropertyMetadata(b,a).cast=b[g]}}Object.defineProperty(h,"__esModule",{value:!0});var l=Object.prototype.toString;h.autocastMethod=function(a,b,c){if(d.hasParametersMetadata(a,b)){var g=d.getParametersMetadata(a,
b).filter(function(a){return null!=a.cast});if(!g.length)return void console.warn("Method "+a.declaredClass+"::"+b+" is decorated with @cast but no parameters are decorated");var e=c.value;return c.value=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(b=0;b<g.length;b++){var c=g[b];a[c.index]=c.cast(a[c.index])}return e.apply(this,a)},c}};h.cast=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return 3!==a.length||"string"!=typeof a[1]?1===a.length&&"[object Function]"===
l.call(a[0])?b(a[0]):1===a.length&&"string"==typeof a[0]?k(a[0]):void 0:void 0}})},"esri/core/accessorSupport/watch":function(){define("require exports ../Scheduler ../ObjectPool ../ArrayPool ../lang ./utils ./get ./wire".split(" "),function(e,h,d,a,b,c,m,k,l){function g(a){f.has(a)?p.splice(p.indexOf(a),1):f.add(a);p.push(a);v||(v=d.schedule(u))}function n(f){if(!f.removed){var a=f.callback,b=f.path,g=f.oldValue,d=f.target,e=k.valueOf(d,f.propertyPath,!0);!c.equals(g,e)&&(f.oldValue=e,a.call(d,e,
g,b,d))}}function u(){if(v){v=null;var a=p;p=x.acquire();f.clear();for(var b=x.acquire(),g=0;g<a.length;g++){var c=a[g];n(c);c.removed&&b.push(c)}for(g=0;g<p.length;g++)c=p[g],c.removed&&(b.push(c),f["delete"](c),p.splice(g,1),--g);for(g=0;g<b.length;g++)q.pool.release(b[g]);x.release(a);x.release(b)}}function r(f,a,b){var c=m.parse(f,a,b,function(f,a,b){var d,e=k.valueOf(f,a,!0),p=l.wire(f,a,function(f,a){return f.__accessor__.destroyed?void c.remove():(d||(d=q.pool.acquire(f,a,e,b),e=null),void g(d))});
return{remove:m.once(function(){p.remove();d&&(d.removed=!0,g(d),d=null);c=p=e=null})}});return c}function t(f,a,b){var g=m.parse(f,a,b,function(f,a,b){var d=k.valueOf(f,a,!0),e=!1;return l.wire(f,a,function(f,a){if(f.__accessor__.destroyed)return void g.remove();if(!e){e=!0;var p=k.valueOf(f,a,!0);!c.equals(d,p)&&b.call(f,p,d,a,f);d=k.valueOf(f,a,!0);e=!1}})});return g}function w(f,a,b,g){return void 0===g&&(g=!1),!f.__accessor__||f.__accessor__.destroyed?{remove:function(){}}:g?t(f,a,b):r(f,a,b)}
Object.defineProperty(h,"__esModule",{value:!0});var q=function(){function f(f,a,b,g){this.target=f;this.path=a;this.oldValue=b;this.callback=g;this.removed=!1;this.propertyPath=m.pathToStringOrArray(a)}return f.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null;this.removed=!0},f}();q.pool=new a(q,!0);var v,x=new b,f=new Set,p=x.acquire();h.dispatchTarget=function(a){for(var b=x.copy(p),g=0;g<b.length;g++){var c=b[g];c.target===a&&(n(c),f["delete"](c),
p.splice(p.indexOf(c),1))}};h.removeTarget=function(f){for(var a=0;a<p.length;a++){var b=p[a];b.target===f&&(b.removed=!0)}};h.dispatch=u;h.watch=w;h["default"]=w})},"esri/core/Scheduler":function(){define(["./ArrayPool","./ObjectPool","./nextTick","./requestAnimationFrame","./now"],function(e,h,d,a,b){var c=["prepare","preRender","render","postRender","update"],m=new h(function(){this.isActive=!0;this.callback=null},!0,function(a){a.isActive=!1;a.callback=null}),k=function(){},l=function(){this.item.isActive=
!1;n.release(this)},g={time:0,deltaTime:0,spendInFrame:0,spendInTask:0},n=new h(function(){this.remove=l;this.item=null},!0,function(a){a.remove=k;a.item=null});h=function(){this._boundDispatch=this._dispatch.bind(this);this.willDispatch=!1;this._queue=e.acquire();this._frameTasks=e.acquire();this._phaseTasks={};this._previousFrameTime=-1;for(var a=0;a<c.length;a++)this._phaseTasks[c[a]]=e.acquire();this._boundAnimationFrame=this._animationFrame.bind(this);this.executing=!1;this._animationFrameRequestId=
null};h.prototype={schedule:function(a){var b=m.acquire();b.callback=a;this._schedule(b);a=n.acquire();return a.item=b,a},_dispatch:function(){for(var a=this._queue;a.length;){var b=a.shift();b.isActive&&(b.isActive=!1,b.callback());!b.isActive}this.willDispatch=!1},_schedule:function(a){this._queue.push(a);this.willDispatch||(this.willDispatch=!0,d(this._boundDispatch))},addFrameTask:function(a){var g={phases:a,paused:!1,pausedAt:0,epoch:-1,dt:0,ticks:-1,removed:!1};this._frameTasks.push(g);for(var d=
0;d<c.length;d++){var e=c[d];a[e]&&this._phaseTasks[e].push(g)}return this._animationFrameRequestId||(this._previousFrameTime=-1,this._requestAnimationFrame()),{isPaused:function(){return g.paused},remove:function(){g.removed=!0},pause:function(){g.paused=!0;g.pausedAt=b()},resume:function(){g.paused=!1;-1!==g.epoch&&(g.epoch+=b()-g.pausedAt)}}},clearFrameTasks:function(){for(var a=0;a<this._frameTasks.length;a++)this._frameTasks[a].removed=!0},_purge:function(){for(var a=0;a<this._frameTasks.length;){var b=
this._frameTasks[a];if(a++,b.removed){this._frameTasks.splice(a-1,1);for(var g=0;g<c.length;g++){var d=c[g];if(b.phases[d]){var d=this._phaseTasks[d],e=d.indexOf(b);-1!==e&&d.splice(e,1)}}}}},_animationFrame:function(a){this._animationFrameRequestId=null;this.executing=!0;0<this._frameTasks.length&&this._requestAnimationFrame();a=b();0>this._previousFrameTime&&(this._previousFrameTime=a);var d=a-this._previousFrameTime;this._previousFrameTime=a;for(var e=0;e<this._frameTasks.length;e++){var k=this._frameTasks[e];
-1!==k.epoch&&(k.dt=d)}for(e=0;e<c.length;e++)for(var d=c[e],l=this._phaseTasks[d],n=0;n<l.length;n++)k=l[n],k.paused||k.removed||(0===e&&k.ticks++,-1===k.epoch&&(k.epoch=a),g.time=a,g.deltaTime=k.dt,g.spendInFrame=b()-a,g.spendInTask=a-k.epoch,k.phases[d].call(k,g));this._purge();this.executing=!1},_requestAnimationFrame:function(){this._animationFrameRequestId=a(this._boundAnimationFrame)}};var u=new h;return h.schedule=function(a){return u.schedule(a)},h.addFrameTask=function(a){return u.addFrameTask(a)},
h.clearFrameTasks=function(){return u.clearFrameTasks()},Object.defineProperty(h,"executing",{get:function(){return u.executing}}),h.instance=u,h})},"esri/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(e,h,d){var a=Array.prototype.splice;e=function(){function c(a,b){void 0===a&&(a=50);void 0===b&&(b=50);this._pool=new d(Array,!1,function(a){return a.length=0},b,a)}return c.prototype.acquire=function(){return this._pool.acquire()},c.prototype.copy=function(b){var c=
this.acquire();return b.unshift(0,0),a.apply(c,b),b.splice(0,2),c},c.prototype.release=function(a){this._pool.release(a)},c.acquire=function(){return b.acquire()},c.copy=function(a){return b.copy(a)},c.release=function(a){return b.release(a)},c}();var b=new e(100);return e})},"esri/core/ObjectPool":function(){define(["require","exports"],function(e,h){var d=function(){return function(){}}();return function(){function a(a,c,d,e,l){void 0===e&&(e=1);void 0===l&&(l=0);this.classConstructor=a;this.acquireFunctionOrWithConstructor=
c;this.releaseFunction=d;this.growthSize=e;!0===c?this.acquireFunction=this._constructorAcquireFunction:"function"==typeof c&&(this.acquireFunction=c);this._pool=Array(l);this._set=new Set;this._initialSize=l;for(a=0;l>a;a++)this._pool[a]=new this.classConstructor;this.growthSize=Math.max(e,1)}return a.prototype.acquire=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var e,c=this.classConstructor||d;if(0===this._pool.length)for(var k=this.growthSize,l=0;k>l;l++)this._pool[l]=
new c;return e=this._pool.shift(),this.acquireFunction?this.acquireFunction.apply(this,[e].concat(a)):e&&e.acquire&&"function"==typeof e.acquire&&e.acquire.apply(e,a),this._set["delete"](e),e},a.prototype.release=function(a){a&&!this._set.has(a)&&(this.releaseFunction?this.releaseFunction(a):a&&a.release&&"function"==typeof a.release&&a.release(),this._pool.push(a),this._set.add(a))},a.prototype.prune=function(){if(!(this._pool.length<=this._initialSize))for(var a;this._initialSize>this._pool.length;)a=
this._pool.shift(),this._set["delete"](a),a.dispose&&"function"==typeof a.dispose&&a.dispose()},a.prototype._constructorAcquireFunction=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];(e=this.classConstructor).call.apply(e,[a].concat(b));var e},a}()})},"esri/core/nextTick":function(){define(["require","exports"],function(e,h){function d(){if(a.postMessage&&!a.importScripts){var b=a.onmessage,d=!0;return a.onmessage=function(){d=!1},a.postMessage("","*"),a.onmessage=b,d}return!1}
var a=function(){return this}(),b=a.MutationObserver||a.WebKitMutationObserver;return function(){var c;if(a.process&&a.process.nextTick)c=function(b){a.process.nextTick(b)};else if(a.Promise)c=function(b){a.Promise.resolve().then(b)};else if(b){var e=[],k=document.createElement("div");(new b(function(){for(;0<e.length;)e.shift()()})).observe(k,{attributes:!0});c=function(a){e.push(a);k.setAttribute("queueStatus","1")}}else if(d()){var l=[];a.addEventListener("message",function(b){if(b.source===a&&
"esri-nexttick-message"===b.data)for(b.stopPropagation();l.length;)l.shift()()},!0);c=function(b){l.push(b);a.postMessage("esri-nexttick-message","*")}}else c=a.setImmediate?function(b){return a.setImmediate(b)}:function(b){return a.setTimeout(b,0)};return c}()})},"esri/core/requestAnimationFrame":function(){define(["require","exports","./global","dojo/sniff","./now"],function(e,h,d,a,b){var c;e=a("ff");h=a("ie");var m=a("webkit");a=a("opera");var k=b(),l=d.requestAnimationFrame;return l||(c=m&&"webkit"||
e&&"moz"||a&&"o"||h&&"ms",l=d[c+"RequestAnimationFrame"],l||(l=function(a){var g=b(),c=Math.max(0,16-(g-k)),e=d.setTimeout(function(){a(b())},c);return k=g+c,e})),l})},"esri/core/global":function(){define(["require","exports"],function(e,h){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}})},"esri/core/now":function(){define(["require","exports","./global"],function(e,h,d){return function(){var a=d.performance||{};if(a.now)return function(){return a.now()};
if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};if(a.oNow)return function(){return a.oNow()};var b;return b=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now(),function(){return Date.now()-b}}()})},"esri/core/CollectionFlattener":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./accessorSupport/decorators ./Collection ./HandleRegistry".split(" "),
function(e,h,d,a,b,c,m){e=function(a){function b(b){b=a.call(this)||this;return b._handles=new m,b.root=null,b.refresh=b.refresh.bind(b),b.updateCollections=b.updateCollections.bind(b),b}return d(b,a),b.prototype.initialize=function(){var a=this;this._handles.add(this.rootCollectionNames.map(function(b){return a.watch("root."+b,a.updateCollections,!0)}));this.updateCollections()},b.prototype.destroy=function(){this.root=null;this.refresh();this._handles.destroy();this._handles=null},b.prototype.updateCollections=
function(){var a=this;this._collections=this.rootCollectionNames.map(function(b){return a.get("root."+b)}).filter(function(a){return null!=a});this.refresh()},b.prototype.refresh=function(){var a=this._handles;a.remove("collections");this.removeAll();for(var b=this._collections.slice(),c=0,d=this._collections;c<d.length;c++)this._processCollection(b,this,d[c]);for(c=0;c<b.length;c++)a.add(b[c].on("after-changes",this.refresh),"collections")},b.prototype._createNewInstance=function(a){return new c(a)},
b.prototype._processCollection=function(a,b,c){var g=this;c&&(a.push(c),c.forEach(function(c){c&&(b.push(c),g._processCollection(a,b,g.getChildrenFunction(c)))}))},b}(b.declared(c));return a([b.property()],e.prototype,"rootCollectionNames",void 0),a([b.property()],e.prototype,"root",void 0),a([b.property()],e.prototype,"getChildrenFunction",void 0),e=a([b.subclass("esri.core.CollectionFlattener")],e)})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(e,h,d,a,b,c,m,k,l,g){function n(a){for(var b in a)h.hasOwnProperty(b)||(h[b]=a[b])}Object.defineProperty(h,"__esModule",{value:!0});n(d);n(a);n(b);n(c);n(m);n(k);n(l);n(g)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});h.aliasOf=function(a){return function(b,c){d.getPropertyMetadata(b,c).aliasOf=a}}})},"esri/core/accessorSupport/decorators/declared":function(){define(["require",
"exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});h.declared=function(d){for(var a=[],b=1;b<arguments.length;b++)a[b-1]=arguments[b];b=function(){return this||{}};return b.__bases__=[d].concat(a),b}})},"esri/core/accessorSupport/decorators/property":function(){define(["require","exports","dojo/has","../../lang","../metadata"],function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});var c=d("dojo-debug-messages");h.property=function(d){return void 0===d&&(d={}),
function(e,l){var g=e.constructor.prototype;if(g===Function.prototype)return void(c&&console.error("[accessor] inappropriate use of @property() on a static field: "+e.name+"."+l+". Accessor does not support static properties."));(e=Object.getOwnPropertyDescriptor(e,l))&&(e.get||e.set)&&(d=a.clone(d),e.set&&(d.set=e.set),e.get&&(d.get=e.get));l=b.getPropertyMetadata(g,l);for(var k in d)g=d[k],Array.isArray(g)?l[k]=(l[k]||[]).concat(g):l[k]=g}};h.propertyJSONMeta=function(a,c,d){a=b.getPropertyMetadata(a.constructor.prototype,
d);a.json||(a.json={});a=a.json;return void 0!==c&&(a.origins||(a.origins={}),a.origins[c]||(a.origins[c]={}),a=a.origins[c]),a}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require","exports","dojo/_base/lang","./property"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});h.reader=function(b,c,e){var k,l;return void 0===c||Array.isArray(c)?(l=b,e=c,k=[void 0]):(l=c,k=Array.isArray(b)?b:[b]),function(b,c,m){var g=b.constructor.prototype;k.forEach(function(k){k=
a.propertyJSONMeta(b,k,l);k.read&&"object"!=typeof k.read&&(k.read={});d.setObject("read.reader",g[c],k);e&&(k.read.source=(k.read.source||[]).concat(e))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});h.shared=function(d){return function(a,b){a[b]=d}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(e,h,d,a){function b(a,
b){a.read&&("function"==typeof a.read?b.push(a.read):"object"==typeof a.read&&a.read.reader&&b.push(a.read.reader))}function c(a,b){a.write&&("function"==typeof a.write?b.push(a.write):"object"==typeof a.write&&a.write.writer&&b.push(a.write.writer))}function m(g){var d=[];g=a.getPropertiesMetadata(g.prototype);if(!g)return d;for(var e in g){var k=g[e];k.cast&&d.push(k.cast);k.copy&&d.push(k.copy);if(k=k.json)if(b(k,d),c(k,d),k=k.origins)for(var l in k){var m=k[l];b(m,d);c(m,d)}}return d}function k(b){var g=
{},c=["__bases__"],d=a.getPropertiesMetadata(b.prototype),e=m(b);return Object.getOwnPropertyNames(b.prototype).filter(function(a){return-1!==c.indexOf(a)?!1:d&&d.hasOwnProperty(a)?!1:-1!==e.indexOf(b.prototype[a])?!1:!0}).forEach(function(a){g[a]=b.prototype[a]}),g}function l(a){var b=Object.getOwnPropertyNames(a),g=Object.getPrototypeOf(a.prototype).constructor,c=Object.getOwnPropertyNames(Function);c.push("__bases__");var d=Object.getOwnPropertyNames(g),e={};return b.filter(function(b){return-1!==
c.indexOf(b)?!1:-1===d.indexOf(b)?!0:g[b]!==a[b]?!0:!1}).forEach(function(b){e[b]=a[b]}),e}Object.defineProperty(h,"__esModule",{value:!0});h.subclass=function(a){return function(b){var g=k(b),c=l(b);null!=a&&(g.declaredClass=a);b=d(b.__bases__,g);for(var e in c)b[e]=c[e];return b}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require","exports","dojo/_base/lang","./property"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});h.writer=function(b,c){var e;return void 0===
c?(c=b,e=[void 0]):e=Array.isArray(b)?b:[b],function(b,l,g){var k=b.constructor.prototype;e.forEach(function(g){g=a.propertyJSONMeta(b,g,c);g.write&&"object"!=typeof g.write&&(g.write={});d.setObject("write.writer",k[l],g)})}}})},"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./accessorSupport/decorators ./accessorSupport/ensureType ./Accessor ./ArrayPool ./Evented ./ObjectPool ./Scheduler ./lang".split(" "),function(e,
h,d,a,b,c,m,k,l,g,n,u,r){function t(a){return a&&a.isInstanceOf&&a.isInstanceOf(D)?!0:!1}function w(a){return a?t(a)?a.toArray():a.length?Array.prototype.slice.apply(a):[]:[]}function q(a){return a&&a.length?a[0]:void 0}function v(a,f,b,g){f&&f.forEach(function(f,c,d){a.push(f);v(a,b.call(g,f,c,d),b,g)})}e=(function(){return function(){}}(),function(){function a(){this.target=null;this.defaultPrevented=this.cancellable=!1}return a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=
!0)},a.prototype.reset=function(a){this.defaultPrevented=!1;this.item=a},a}());var x=function(){},f=new n(e,!0,function(a){a.item=null;a.target=null}),p=new Set,z=new Set,y=new Set,A=new Map,B=0,D=F=function(a){function g(f){f=a.call(this,f)||this;return f._boundDispatch=f._dispatchColChange.bind(f),f._chgListeners=[],f._notifications=null,f._timer=null,f.length=0,f._items=[],Object.defineProperty(f,"uid",{value:B++}),f}return d(g,a),g.ofType=function(a){if(!a)return F;if(A.has(a))return A.get(a);
var f=F.createSubclass({declaredClass:"esri.core.Collection\x3c"+a.prototype.declaredClass+"\x3e"});return Object.defineProperty(f.prototype,"itemType",{value:a}),A.set(a,f),f},g.prototype.normalizeCtorArgs=function(a){return a?Array.isArray(a)||t(a)?{items:a}:a:{}},Object.defineProperty(g.prototype,"items",{get:function(){return this._items},set:function(a){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(w(a))),this._emitAfterChanges())},enumerable:!0,configurable:!0}),
g.prototype.on=function(a,f){var g;if(Array.isArray(a)?g=a:-1<a.indexOf(",")&&(g=a.split(/\s*,\s*/)),g){var c=[];for(a=0;a<g.length;a++)c.push(this.on(g[a],f));return c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()},c}if("change"===a){var d=this._chgListeners,e={removed:!1,callback:f};return d.push(e),this._notifications&&this._notifications.push({listeners:d.slice(),items:this._items.slice(),changes:[]}),{remove:function(){this.remove=x;e.removed=!0;d.splice(d.indexOf(e),1)}}}return b.after(this,
"on"+a,f,!0)},g.prototype.hasEventListener=function(a){return"change"===a?0<this._chgListeners.length:this.inherited(arguments)},g.prototype.add=function(a,f){if(this._emitBeforeChanges())return this;f=this.getNextIndex(f);return this._splice(f,0,a),this._emitAfterChanges(),this},g.prototype.addMany=function(a,f){if(void 0===f&&(f=this._items.length),this._emitBeforeChanges())return this;f=this.getNextIndex(f);return this._splice.apply(this,[f,0].concat(w(a))),this._emitAfterChanges(),this},g.prototype.removeAll=
function(){if(!this.length||this._emitBeforeChanges())return[];var a=this._splice(0,this.length)||[];return this._emitAfterChanges(),a},g.prototype.clone=function(){return this._createNewInstance({items:this._items.map(r.clone)})},g.prototype.concat=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];a=a.map(w);return this._createNewInstance({items:(b=this._items).concat.apply(b,a)});var b},g.prototype.drain=function(a,f){if(this.length&&!this._emitBeforeChanges()){for(var b=this._splice(0,
this.length),g=b.length,c=0;g>c;c++)a.call(f,b[c],c,b);this._emitAfterChanges()}},g.prototype.every=function(a,f){return this._items.every(a,f)},g.prototype.filter=function(a,f){var b;return b=2===arguments.length?this._items.filter(a,f):this._items.filter(a),this._createNewInstance({items:b})},g.prototype.find=function(a,f){if("function"!=typeof a)throw new TypeError(a+" is not a function");for(var b=this._items,g=b.length,c=0;g>c;c++){var d=b[c];if(a.call(f,d,c,b))return d}},g.prototype.findIndex=
function(a,f){if("function"!=typeof a)throw new TypeError(a+" is not a function");for(var b=this._items,g=b.length,c=0;g>c;c++)if(a.call(f,b[c],c,b))return c;return-1},g.prototype.flatten=function(a,f){var b=[];return v(b,this,a,f),new F(b)},g.prototype.forEach=function(a,f){for(var b=this._items,g=b.length,c=0;g>c;c++)a.call(f,b[c],c,b)},g.prototype.getItemAt=function(a){return this._items[a]},g.prototype.getNextIndex=function(a){var f=this.length;return a=null==a?f:a,0>a?a=0:a>f&&(a=f),a},g.prototype.includes=
function(a,f){return void 0===f&&(f=0),arguments.length?-1!==this._items.indexOf(a,f):!1},g.prototype.indexOf=function(a,f){return void 0===f&&(f=0),this._items.indexOf(a,f)},g.prototype.join=function(a){return void 0===a&&(a=","),this._items.join(a)},g.prototype.lastIndexOf=function(a,f){return void 0===f&&(f=this.length-1),this._items.lastIndexOf(a,f)},g.prototype.map=function(a,f){a=this._items.map(a,f);return new F({items:a})},g.prototype.reorder=function(a,f){void 0===f&&(f=this.length-1);var b=
this.indexOf(a);if(-1!==b){if(0>f?f=0:f>=this.length&&(f=this.length-1),b!==f){if(this._emitBeforeChanges())return a;this._splice(b,1);this._splice(f,0,a);this._emitAfterChanges()}return a}},g.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var a=q(this._splice(this.length-1,1));return this._emitAfterChanges(),a}},g.prototype.push=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];return this._emitBeforeChanges()?this.length:(this._splice.apply(this,[this.length,
0].concat(a)),this._emitAfterChanges(),this.length)},g.prototype.reduce=function(a,f){var b=this._items;return 2===arguments.length?b.reduce(a,f):b.reduce(a)},g.prototype.reduceRight=function(a,f){var b=this._items;return 2===arguments.length?b.reduceRight(a,f):b.reduceRight(a)},g.prototype.remove=function(a){return this.removeAt(this.indexOf(a))},g.prototype.removeAt=function(a){if(!(0>a||a>=this.length||this._emitBeforeChanges()))return a=q(this._splice(a,1)),this._emitAfterChanges(),a},g.prototype.removeMany=
function(a){if(!a||!a.length||this._emitBeforeChanges())return[];a=t(a)?a.toArray():a;for(var f=this._items,b=[],g=a.length,c=0;g>c;c++){var d=f.indexOf(a[c]);if(-1<d){for(var e=c+1,p=d+1,k=Math.min(a.length-e,f.length-p),l=0;k>l&&a[e+l]===f[p+l];)l++;e=1+l;(d=this._splice(d,e))&&0<d.length&&b.push.apply(b,d);c+=e-1}}return this._emitAfterChanges(),b},g.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var a=this._splice(0,this.length);return a&&(a.reverse(),this._splice.apply(this,
[0,0].concat(a))),this._emitAfterChanges(),this},g.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var a=q(this._splice(0,1));return this._emitAfterChanges(),a}},g.prototype.slice=function(a,f){return void 0===a&&(a=0),void 0===f&&(f=this.length),this._createNewInstance({items:this._items.slice(a,f)})},g.prototype.some=function(a,f){return this._items.some(a,f)},g.prototype.sort=function(a){if(!this.length||this._emitBeforeChanges())return this;var f=this._splice(0,this.length);
return arguments.length?f.sort(a):f.sort(),this._splice.apply(this,[0,0].concat(f)),this},g.prototype.splice=function(a,f){for(var b=[],g=2;g<arguments.length;g++)b[g-2]=arguments[g];if(this._emitBeforeChanges())return[];b=this._splice.apply(this,[a,f].concat(b))||[];return this._emitAfterChanges(),b},g.prototype.toArray=function(){return this._items.slice()},g.prototype.toJSON=function(){return this.toArray()},g.prototype.toLocaleString=function(){return this._items.toLocaleString()},g.prototype.toString=
function(){return this._items.toString()},g.prototype.unshift=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];return this._emitBeforeChanges()?this.length:(this._splice.apply(this,[0,0].concat(a)),this._emitAfterChanges(),this.length)},g.prototype._createNewInstance=function(a){return new this.constructor(a)},g.prototype._splice=function(a,b){for(var g=this,c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var e,p,k=this._items,l=this.constructor.prototype.itemType;if(!this._notifications&&
this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=u.schedule(this._boundDispatch)),b){if(p=k.splice(a,b),this.hasEventListener("before-remove")){d=f.acquire();d.target=this;d.cancellable=!0;for(var n=0,v=p.length;v>n;n++)e=p[n],d.reset(e),this.emit("before-remove",d),d.defaultPrevented&&(p.splice(n,1),k.splice(a,0,e),a+=1,--n,--v);f.release(d)}if(this.length=this._items.length,
this.hasEventListener("after-remove")){d=f.acquire();d.target=this;d.cancellable=!1;v=p.length;for(n=0;v>n;n++)d.reset(p[n]),this.emit("after-remove",d);f.release(d)}this._notifyChangeEvent(null,p)}if(c&&c.length){if(l&&(c=c.map(m.ensureType.bind(null,l))),this.hasEventListener("before-add")){var q=f.acquire();q.target=this;q.cancellable=!0;c=c.filter(function(a){return q.reset(a),g.emit("before-add",q),!q.defaultPrevented});f.release(q)}if(k.splice.apply(k,[a,0].concat(c)),this.length=this._items.length,
this.hasEventListener("after-add")){d=f.acquire();d.target=this;d.cancellable=!1;k=0;for(l=c;k<l.length;k++)e=l[k],d.reset(e),this.emit("after-add",d);f.release(d)}this._notifyChangeEvent(c,null)}return p},g.prototype._emitBeforeChanges=function(){var a=!1;if(this.hasEventListener("before-changes")){var b=f.acquire();b.target=this;b.cancellable=!0;this.emit("before-changes",b);a=b.defaultPrevented;f.release(b)}return a},g.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var a=
f.acquire();a.target=this;a.cancellable=!1;this.emit("after-changes",a);f.release(a)}},g.prototype._notifyChangeEvent=function(a,f){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:f})},g.prototype._dispatchColChange=function(){if(this._timer&&(this._timer.remove(),this._timer=null),this._notifications){var a=this._notifications;this._notifications=null;for(var f=function(a){var f=a.changes;p.clear();z.clear();y.clear();for(var g=0;g<
f.length;g++){var c=f[g],d=c.added,c=c.removed;if(d)if(0===y.size&&0===z.size)for(var e=0,k=d;e<k.length;e++)d=k[e],p.add(d);else for(e=0,k=d;e<k.length;e++)d=k[e],z.has(d)?(y.add(d),z["delete"](d)):y.has(d)||p.add(d);if(c)if(0===y.size&&0===p.size)for(e=0;e<c.length;e++)d=c[e],z.add(d);else for(e=0;e<c.length;e++)d=c[e],p.has(d)?p["delete"](d):(y["delete"](d),z.add(d))}var n=l.acquire();p.forEach(function(a){n.push(a)});var m=l.acquire();z.forEach(function(a){m.push(a)});var v=b._items,u=a.items,
q=l.acquire();if(y.forEach(function(a){u.indexOf(a)!==v.indexOf(a)&&q.push(a)}),a.listeners&&(n.length||m.length||q.length))for(f={target:b,added:n,removed:m,moved:q},g=a.listeners.length,d=0;g>d;d++)c=a.listeners[d],c.removed||c.callback.call(b,f);l.release(n);l.release(m);l.release(q)},b=this,g=0;g<a.length;g++)f(a[g]);p.clear();z.clear();y.clear()}},g}(c.declared(k,g));D.isCollection=t;a([c.property()],D.prototype,"length",void 0);a([c.property()],D.prototype,"items",null);var D=F=a([c.subclass("esri.core.Collection")],
D),F;return D})},"dojo/aspect":function(){define([],function(){function e(a,b,c,g){var d=a[b],e="around"==b,k;if(e){var l=c(function(){return d.advice(this,arguments)});k={remove:function(){l&&(l=a=c=null)},advice:function(a,b){return l?l.apply(a,b):d.advice(a,b)}}}else k={remove:function(){if(k.advice){var g=k.previous,d=k.next;d||g?(g?g.next=d:a[b]=d,d&&(d.previous=g)):delete a[b];a=c=k.advice=null}},id:a.nextId++,advice:c,receiveArguments:g};if(d&&!e)if("after"==b){for(;d.next&&(d=d.next););d.next=
k;k.previous=d}else"before"==b&&(a[b]=k,k.next=d,d.previous=k);else a[b]=k;return k}function h(a){return function(b,c,g,n){var k=b[c],l;k&&k.target==b||(b[c]=l=function(){for(var a=l.nextId,b=arguments,g=l.before;g;)g.advice&&(b=g.advice.apply(this,b)||b),g=g.next;if(l.around)var c=l.around.advice(this,b);for(g=l.after;g&&g.id<a;){if(g.advice)if(g.receiveArguments)var e=g.advice.apply(this,b),c=e===d?c:e;else c=g.advice.call(this,c,b);g=g.next}return c},k&&(l.around={advice:function(a,b){return k.apply(a,
b)}}),l.target=b,l.nextId=l.nextId||0);b=e(l||k,a,g,n);g=null;return b}}var d,a=h("after"),b=h("before"),c=h("around");return{before:b,around:c,after:a}})},"esri/core/Evented":function(){define(["./declare","dojo/Evented"],function(e,h){return e(h,{declaredClass:"esri.core.Evented",hasEventListener:function(d){return d="on"+d,!(!this[d]||!this[d].after)},emit:function(d,a){return this.hasEventListener(d)?(a=a||{},a.target||(a.target=this),this.inherited(arguments,[d,a])):void 0}})})},"dojo/Evented":function(){define(["./aspect",
"./on"],function(e,h){function d(){}var a=e.after;d.prototype={on:function(b,c){return h.parse(this,b,c,function(b,d){return a(b,"on"+d,c,!0)})},emit:function(a,c){var b=[this];b.push.apply(b,arguments);return h.emit.apply(h,b)}};return d})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(e,h,d){function a(a,f,b,g,c){if(g=f.match(/(.*):(.*)/))return f=g[2],g=g[1],k.selector(g,f).call(c,a,b);d("touch")&&(l.test(f)&&(b=A(b)),d("event-orientationchange")||
"orientationchange"!=f||(f="resize",a=window,b=A(b)));t&&(b=t(b));if(a.addEventListener){var e=f in u,p=e?u[f]:f;a.addEventListener(p,b,e);return{remove:function(){a.removeEventListener(p,b,e)}}}if(x&&a.attachEvent)return x(a,"on"+f,b);throw Error("Target must be an event emitter");}function b(){this.cancelable=!1;this.defaultPrevented=!0}function c(){this.bubbles=!1}if(d("dom")){var m=window.ScriptEngineMajorVersion;d.add("jscript",m&&m()+ScriptEngineMinorVersion()/10);d.add("event-orientationchange",
d("touch")&&!d("android"));d.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);d.add("event-focusin",function(a,f,b){return"onfocusin"in b});d("touch")&&d.add("touch-can-modify-event-delegate",function(){var a=function(){};a.prototype=document.createEvent("MouseEvents");try{var f=new a;f.target=null;return null===f.target}catch(F){return!1}})}var k=function(f,b,g,c){return"function"!=typeof f.on||"function"==typeof b||f.nodeType?
k.parse(f,b,g,a,c,this):f.on(b,g)};k.pausable=function(a,f,b,g){var c;a=k(a,f,function(){if(!c)return b.apply(this,arguments)},g);a.pause=function(){c=!0};a.resume=function(){c=!1};return a};k.once=function(a,f,b,g){var c=k(a,f,function(){c.remove();return b.apply(this,arguments)});return c};k.parse=function(a,f,b,g,c,d){var e;if(f.call)return f.call(d,a,b);f instanceof Array?e=f:-1<f.indexOf(",")&&(e=f.split(/\s*,\s*/));if(e){var p=[];f=0;for(var l;l=e[f++];)p.push(k.parse(a,l,b,g,c,d));p.remove=
function(){for(var a=0;a<p.length;a++)p[a].remove()};return p}return g(a,f,b,c,d)};var l=/^touch/;k.matches=function(a,f,b,g,c){c=c&&"function"==typeof c.matches?c:h.query;g=!1!==g;1!=a.nodeType&&(a=a.parentNode);for(;!c.matches(a,f,b);)if(a==b||!1===g||!(a=a.parentNode)||1!=a.nodeType)return!1;return a};k.selector=function(a,f,b){return function(g,c){function d(f){return k.matches(f,a,g,b,e)}var e="function"==typeof a?{matches:a}:this,p=f.bubble;return p?k(g,p(d),c):k(g,f,function(a){var f=d(a.target);
if(f)return a.selectorTarget=f,c.call(f,a)})}};var g=[].slice,n=k.emit=function(a,f,d){var e=g.call(arguments,2),p="on"+f;if("parentNode"in a){var k=e[0]={},l;for(l in d)k[l]=d[l];k.preventDefault=b;k.stopPropagation=c;k.target=a;k.type=f;d=k}do a[p]&&a[p].apply(a,e);while(d&&d.bubbles&&(a=a.parentNode));return d&&d.cancelable&&d},u=d("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!d("event-stopimmediatepropagation"))var r=function(){this.modified=this.immediatelyStopped=!0},t=function(a){return function(f){if(!f.immediatelyStopped)return f.stopImmediatePropagation=
r,a.apply(this,arguments)}};if(d("dom-addeventlistener"))k.emit=function(a,f,b){if(a.dispatchEvent&&document.createEvent){var g=(a.ownerDocument||document).createEvent("HTMLEvents");g.initEvent(f,!!b.bubbles,!!b.cancelable);for(var c in b)c in g||(g[c]=b[c]);return a.dispatchEvent(g)&&g}return n.apply(k,arguments)};else{k._fixEvent=function(a,b){a||(a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event);if(!a)return a;try{w&&a.type==w.type&&a.srcElement==w.target&&(a=w)}catch(F){}if(!a.target)switch(a.target=
a.srcElement,a.currentTarget=b||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=f,a.preventDefault=p),a.type){case "keypress":b="charCode"in a?a.charCode:a.keyCode,10==b?(b=0,a.keyCode=13):13==b||27==b?b=0:3==b&&(b=99),a.charCode=b,b=a,b.keyChar=b.charCode?String.fromCharCode(b.charCode):"",b.charOrCode=b.keyChar||b.keyCode}return a};var w,q=function(a){this.handle=a};q.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};
var v=function(a){return function(f){f=k._fixEvent(f,this);var b=a.call(this,f);f.modified&&(w||setTimeout(function(){w=null}),w=f);return b}},x=function(a,f,b){b=v(b);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>d("jscript"))&&!d("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var g=a[f];if(!g||!g.listeners){var c=g,g=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
g.listeners=[];a[f]=g;g.global=this;c&&g.listeners.push(_dojoIEListeners_.push(c)-1)}g.listeners.push(a=g.global._dojoIEListeners_.push(b)-1);return new q(a)}return e.after(a,f,b,!0)},f=function(){this.cancelBubble=!0},p=k._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(B){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(d("touch"))var z=function(){},y=window.orientation,A=function(a){return function(f){var b=f.corrected;if(!b){var g=
f.type;try{delete f.type}catch(K){}if(f.type){if(d("touch-can-modify-event-delegate"))z.prototype=f,b=new z;else{var b={},c;for(c in f)b[c]=f[c]}b.preventDefault=function(){f.preventDefault()};b.stopPropagation=function(){f.stopPropagation()}}else b=f,b.type=g;f.corrected=b;if("resize"==g){if(y==window.orientation)return null;y=window.orientation;b.type="orientationchange";return a.call(this,b)}"rotation"in b||(b.rotation=0,b.scale=1);if(window.TouchEvent&&f instanceof TouchEvent){var g=b.changedTouches[0],
e;for(e in g)delete b[e],b[e]=g[e]}}return a.call(this,b)}};return k})},"esri/core/HandleRegistry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./accessorSupport/decorators".split(" "),function(e,h,d,a,b,c){e=function(a){function b(){var b=a.call(this)||this;return b._groups=null,b._groups={},b}return d(b,a),b.prototype.destroy=function(){this.removeAll();this._groups=null},Object.defineProperty(b.prototype,"size",{get:function(){var a=
0,b=this._groups,c;for(c in b)a+=b[c].length;return a},enumerable:!0,configurable:!0}),b.prototype.add=function(a,b){if(!this._isHandle(a)&&!Array.isArray(a))return this;b=this._getOrCreateGroup(b);if(Array.isArray(a))for(var g=0;g<a.length;g++)b.push(a[g]);else b.push(a);return this.notifyChange("size"),this},b.prototype.has=function(a){a=this._groups[a];return!!a&&0<a.length},b.prototype.remove=function(a){if(Array.isArray(a))return a.forEach(this.remove.bind(this)),this;a=this._getGroup(a);if(!a)return this;
for(var b=0;b<a.length;b++)a[b].remove();return a.length=0,this.notifyChange("size"),this},b.prototype.removeAll=function(){var a=this._groups,b;for(b in a)this.remove(b),delete a[b];return this},b.prototype._isHandle=function(a){return a&&!!a.remove},b.prototype._getOrCreateGroup=function(a){return this._getGroup(a)||(this._groups[this._ensureGroupName(a)]=[])},b.prototype._getGroup=function(a){return this._groups[this._ensureGroupName(a)]},b.prototype._ensureGroupName=function(a){return a||"_default_"},
b}(c.declared(b));return a([c.property({readOnly:!0})],e.prototype,"size",null),e=a([c.subclass()],e)})},"esri/support/LayersMixin":function(){define(["../core/Accessor","../core/Collection","../core/Logger"],function(e,h,d){var a=function(b,d){for(var c,e,g=0,n=b.length;n>g;g++){if(c=b.getItemAt(g),c.id===d)return c;if(c.layers&&(e=a(c.layers,d)))return e}},b=d.getLogger("esri.Map");return e.createSubclass({declaredClass:"esri.support.LayersMixin",destroy:function(){this._layersHandle.remove();this._layersHandle=
null;this.layers.drain(this._lyrRemove,this)},properties:{layers:{type:h,get:function(){var a=this._get("layers");return a?a:(a=new h,a.on("after-add",function(a){a=a.item;a.parent&&a.parent!==this&&a.parent.remove(a);a.parent=this;this.layerAdded(a);"elevation"===a.type&&b.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as an operational layer and will therefore be ignored.")}.bind(this)),a.on("after-remove",function(a){a=a.item;a.parent=null;this.layerRemoved(a)}.bind(this)),
a)},set:function(a){var b=this._get("layers");b&&this.remove(b.toArray());this.addMany(a.toArray())}}},findLayerById:function(b){return a(this.layers,b)},add:function(a,b){var c=this.layers;return b=c.getNextIndex(b),a.parent===this?void this.reorder(a,b):void c.add(a,b)},addMany:function(a,b){var c=this.layers;b=c.getNextIndex(b);a.slice().forEach(function(a){return a.parent===this?void this.reorder(a,b):(c.add(a,b),void(b+=1))},this)},remove:function(a){return this.layers.remove(a)},removeMany:function(a){return this.layers.removeMany(a)},
removeAll:function(){return this.layers.removeAll()},reorder:function(a,b){return this.layers.reorder(a,b)},layerAdded:function(a){},layerRemoved:function(a){}})})},"esri/Ground":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/accessorSupport/decorators ./core/Accessor ./core/Collection ./core/collectionUtils ./core/Logger ./core/requireUtils ./layers/Layer ./layers/support/types".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u){var r=m.ofType(n),
t=l.getLogger("esri.Ground");h=w=function(a){function b(b){b=a.call(this)||this;return b.layers=new r,b.layers.on("after-add",function(a){a=a.item;u.isOfType(a,["elevation","base-elevation"])||t.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.")}),b}return d(b,a),Object.defineProperty(b.prototype,"layers",{set:function(a){this._set("layers",k.referenceSetter(a,this._get("layers"),
r))},enumerable:!0,configurable:!0}),b.prototype.queryElevation=function(a,f){var b=this;return g.when(e,"./layers/support/ElevationQuery").then(function(g){g=new g.ElevationQuery;var c=b.layers.filter(function(a){return"elevation"===a.type}).toArray();return g.queryAll(c,a,f)})},b.prototype.clone=function(){return new w({layers:this.layers.slice()})},b}(b.declared(c));a([b.property({type:r}),b.cast(k.castForReferenceSetter)],h.prototype,"layers",null);h=w=a([b.subclass("esri.Ground")],h);var w;return h})},
"esri/core/collectionUtils":function(){define(["require","exports","./Collection"],function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});h.referenceSetter=function(a,b,c){void 0===c&&(c=d);b||(b=new c);b.removeAll();return a&&(Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(d))?b.addMany(a):b.add(a),b};h.castForReferenceSetter=function(a){return a}})},"esri/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(e,h,d){function a(b,c){if(Array.isArray(c)){var e=
new d;return b(c,function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];e.resolve(a)}),e.promise}return a(b,[c]).then(function(a){return a[0]})}Object.defineProperty(h,"__esModule",{value:!0});h.when=a;h.getAbsMid=function(a,c,d){return c.toAbsMid?c.toAbsMid(a):d.id.replace(/\/[^\/]*$/gi,"/")+a}})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","require"],function(e,h,d,a,b){var c=Object.freeze||function(){},m=function(a,b,g,c,d){for(d=
0;d<a.length;d++)k(a[d],b,g,c)},k=function(a,b,c,d){d=a[b];var e=a.deferred;if(d)try{var k=d(c);0===b?"undefined"!==typeof k&&g(e,b,k):k&&"function"===typeof k.then?(a.cancel=k.cancel,k.then(l(e,1),l(e,2),l(e,0))):g(e,1,k)}catch(x){g(e,2,x)}else g(e,b,c)},l=function(a,b){return function(c){g(a,b,c)}},g=function(a,b,g){if(!a.isCanceled())switch(b){case 0:a.progress(g);break;case 1:a.resolve(g);break;case 2:a.reject(g)}},n=function(b){var g=this.promise=new a,e=this,l,u,v=!1,x=[];this.isResolved=g.isResolved=
function(){return 1===l};this.isRejected=g.isRejected=function(){return 2===l};this.isFulfilled=g.isFulfilled=function(){return!!l};this.isCanceled=g.isCanceled=function(){return v};this.progress=function(a,f){if(l){if(!0===f)throw Error("This deferred has already been fulfilled.");return g}m(x,0,a,null,e);return g};this.resolve=function(a,f){if(l){if(!0===f)throw Error("This deferred has already been fulfilled.");return g}m(x,l=1,u=a,null,e);x=null;return g};var f=this.reject=function(a,f){if(l){if(!0===
f)throw Error("This deferred has already been fulfilled.");return g}m(x,l=2,u=a,void 0,e);x=null;return g};this.then=g.then=function(a,f,b){var c=[b,a,f];c.cancel=g.cancel;c.deferred=new n(function(a){return c.cancel&&c.cancel(a)});l&&!x?k(c,l,u,void 0):x.push(c);return c.deferred.promise};this.cancel=g.cancel=function(a,g){if(!l){b&&(g=b(a),a="undefined"===typeof g?a:g);v=!0;if(!l)return"undefined"===typeof a&&(a=new d),f(a),a;if(2===l&&u===a)return a}else if(!0===g)throw Error("This deferred has already been fulfilled.");
};c(g)};n.prototype.toString=function(){return"[object Deferred]"};b&&b(n);return n})},"dojo/errors/CancelError":function(){define(["./create"],function(e){return e("CancelError",null,null,{dojoType:"cancel",log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(e){return function(h,d,a,b){a=a||Error;var c=function(b){if(a===Error){Error.captureStackTrace&&Error.captureStackTrace(this,c);var e=Error.call(this,b),l;for(l in e)e.hasOwnProperty(l)&&(this[l]=e[l]);this.message=
b;this.stack=e.stack}else a.apply(this,arguments);d&&d.apply(this,arguments)};c.prototype=e.delegate(a.prototype,b);c.prototype.name=h;return c.prototype.constructor=c}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(e){function h(){throw new TypeError("abstract");}return e.extend(function(){},{then:function(d,a,b){h()},cancel:function(d,a){h()},isResolved:function(){h()},isRejected:function(){h()},isFulfilled:function(){h()},isCanceled:function(){h()},always:function(d){return this.then(d,
d)},otherwise:function(d){return this.then(null,d)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"esri/layers/Layer":function(){define("require dojo/Deferred ../core/Accessor ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/urlUtils ../core/requireUtils ../core/promiseUtils ../core/Logger ../config ../kernel ../request ../geometry/SpatialReference ../geometry/Extent".split(" "),function(e,h,d,a,b,
c,m,k,l,g,n,u,r,t,w,q){var v=0,x=n.getLogger("esri.layers.Layer");d=d.createSubclass([b,c,m],{declaredClass:"esri.layers.Layer",properties:{attributionDataUrl:null,credential:{value:null,readOnly:!0,dependsOn:["loaded","parsedUrl"],get:function(){var a=this.loaded&&this.parsedUrl&&r.id&&r.id.findCredential(this.parsedUrl.path)||null;return a&&a.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),a}},fullExtent:new q(-180,-90,180,90,w.WGS84),hasAttributionData:{readOnly:!0,dependsOn:["attributionDataUrl"],
get:function(){return null!=this.attributionDataUrl}},id:{get:function(){return Date.now().toString(16)+"-layer-"+v++}},legendEnabled:!0,listMode:"show",opacity:{value:1,type:Number,cast:function(a){return 0>a?0:1<a?1:a}},parsedUrl:{readOnly:!0,dependsOn:["url"],get:function(){var a=this._get("url");return a?k.urlToObject(a):null}},popupEnabled:!0,refreshInterval:0,attributionVisible:!0,spatialReference:w.WGS84,title:null,token:{dependsOn:["credential.token"],get:function(){var a=this.get("parsedUrl.query.token"),
b=this.get("credential.token");return a||b||null},set:function(a){a?this._override("token",a):this._clearOverride("token")}},type:{type:String,readOnly:!0,value:null,json:{read:!1}},url:{value:null},visible:!0},initialize:function(){this.otherwise(function(a){n.getLogger(this.declaredClass).error("#load()","Failed to load layer (title: '"+this.title+"', id: '"+this.id+"')",a)})},createLayerView:function(f){var b=this.viewModulePaths[f.type];return b?l.when(e,b).then(function(a){return a["default"]&&
(a=a["default"]),new a({layer:this,view:f})}.bind(this)):g.reject(new a("layerview:module-unavailable","No LayerView module available for layer '${layer.declaredClass}' and view type: '${view.type}'",{view:f,layer:this}))},destroyLayerView:function(a){a.destroy()},fetchAttributionData:function(){var f;f=this.attributionDataUrl;this.hasAttributionData&&f?f=t(f,{query:{f:"json"},responseType:"json"}).then(function(a){return a.data}):(f=new h,f.reject(new a("layer:no-attribution-data","Layer does not have attribution data")),
f=f.promise);return f},refresh:function(){this.emit("refresh")}});return d.fromArcGISServerUrl=function(a){"string"==typeof a&&(a={url:a});var f=l.when(e,"./support/arcgisLayers").then(function(f){return f.fromUrl(a)});return f.otherwise(function(f){x.error("#fromArcGISServerUrl({ url: '"+a.url+"'})","Failed to create layer from arcgis server url",f)}),f},d.fromPortalItem=function(a){!a||a.portalItem||"object"!=typeof a||a.declaredClass&&"esri.portal.PortalItem"!==a.declaredClass||(a={portalItem:a});
var f=l.when(e,"../portal/support/portalLayers").then(function(f){return f.fromItem(a)});return f.otherwise(function(f){var b=a&&a.portalItem;x.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+(b&&b.portal&&b.portal.url||u.portalUrl)+"', id: '"+(b&&b.id||"unset")+"')",f)}),f},d})},"esri/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./Message"],function(e,h,d,a){e=function(a){function b(c,d,e){var g=a.call(this,c,d,e)||this;return g instanceof
b?g:new b(c,d,e)}return d(b,a),b}(a);return e.prototype.type="error",e})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,d){e.__proto__=d}||function(e,d){for(var a in d)d.hasOwnProperty(a)&&(e[a]=d[a])};return function(h,d){function a(){this.constructor=h}e(h,d);h.prototype=null===d?Object.create(d):(a.prototype=d.prototype,new a)}}()})},"esri/core/Message":function(){define(["require","exports",
"dojo/string"],function(e,h,d){return function(){function a(b,c,e){this instanceof a&&(this.name=b,this.message=c&&d.substitute(c,e,function(a){return null==a?"":a})||"",this.details=e)}return a.prototype.toString=function(){return"["+this.name+"]: "+this.message},a}()})},"esri/core/Identifiable":function(){define(["./declare"],function(e){var h=0;return e(null,{constructor:function(){Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+h++})}})})},
"esri/core/Loadable":function(){define("./Promise ./Accessor ./Error ./Warning dojo/aspect dojo/_base/lang dojo/Deferred".split(" "),function(e,h,d,a,b,c,m){return e.createSubclass([h],{declaredClass:"esri.core.Loadable","-chains-":c.mixin(h._meta.chains,{load:"after"}),constructor:function(){this._set("loadWarnings",[]);var a=new m;this.addResolvingPromise(a.promise);b.around(this,"load",function(b){return function(){return"not-loaded"===this.loadStatus&&(this.loadStatus="loading",b.apply(this),
a.resolve(),a=null),this}});this.then(function(a){this.loadStatus="loaded"}.bind(this),function(a){this.loadStatus="failed";this.loadError=a}.bind(this))},properties:{loaded:{readOnly:!0,dependsOn:["loadStatus"],get:function(){return"loaded"===this.loadStatus}},loadError:null,loadStatus:"not-loaded",loadWarnings:{type:[a],readOnly:!0}},load:function(){},cancelLoad:function(){return this.isFulfilled()?this:(this.loadError=new d("load:cancelled","Cancelled"),this._promiseProps.cancel(this.loadError),
this)}})})},"esri/core/Promise":function(){define("./declare dojo/promise/all dojo/aspect dojo/Deferred dojo/errors/create ./Scheduler".split(" "),function(e,h,d,a,b,c){var m=function(b){if(!b.isFulfilled()){var g,d,e=b._promiseProps,k=e.resolvingPromises;e.allPromise&&e.allPromise.cancel();var l=new a;for(g=k.length-1;0<=g;g--)d=k[g],d.isCanceled&&d.isCanceled()?k.splice(g,1):d.then(null,null,e.resolver.progress);d=null;(e.allPromise=h(k.concat([l.promise]))).then(function(){e.resolver.resolve(b);
b=e=l=e.allPromise=e.resolvingPromises=null},function(a){if(e.allPromise=null,!a||"cancel"!==a.dojoType){var g=Array.prototype.slice.call(arguments,0);e.resolver.reject(g[0]);b=e=l=e.allPromise=e.resolvingPromises=null}});l&&c.schedule(function(){l&&l.resolve()})}},k=b("CancelError",null,function(a){this.target=a}),l=function(a){return a||new k(this.instance)},g=function(b){this.instance=b;this.canceler=l.bind(this);this.resolver=new a;this.initialized=!1;this.resolvingPromises=[]};g.prototype={canceler:null,
cancel:function(a){if(!this.resolver.isFulfilled()){this.allPromise.cancel();for(var b=this.resolvingPromises.concat(),g=b.length-1;0<=g;g--)b[g].cancel(a);this.resolver.cancel(a)}}};return e(null,{declaredClass:"esri.core.Promise",constructor:function(){Object.defineProperty(this,"_promiseProps",{value:new g(this),enumerable:!1,configurable:!1,writable:!0});var a=d.after(this,"postscript",function(b,g){a.remove();a=null;m(this)},!0)},_promiseProps:null,always:function(a){return this.then(a,a)},then:function(b,
g,c){var d=new a(this._promiseProps.canceler);b=d.then(b,g,c);return this._promiseProps.resolver.then(d.resolve,d.reject,d.progress),b},isResolved:function(){return this._promiseProps.resolver.isResolved()},isRejected:function(){return this._promiseProps.resolver.isRejected()},isFulfilled:function(){return this._promiseProps.resolver.isFulfilled()},otherwise:function(a){return this.then(null,a)},addResolvingPromise:function(a){a&&!this.isFulfilled()&&(this._promiseProps.resolvingPromises.push(a),
m(this))}})})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(e,h,d){var a=e.some;return function(b){var c,e;b instanceof Array?e=b:b&&"object"===typeof b&&(c=b);var k,l=[];if(c){e=[];for(var g in c)Object.hasOwnProperty.call(c,g)&&(l.push(g),e.push(c[g]));k={}}else e&&(k=[]);if(!e||!e.length)return(new h).resolve(k);var n=new h;n.promise.always(function(){k=l=null});var u=e.length;a(e,function(a,b){c||l.push(b);d(a,function(a){n.isFulfilled()||(k[l[b]]=a,
0===--u&&n.resolve(k))},n.reject);return n.isFulfilled()});return n.promise}})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(e,h){return function(d,a,b,c){var m=d&&"function"===typeof d.then,k=m&&d instanceof h;if(!m)return 1<arguments.length?a?a(d):d:(new e).resolve(d);k||(m=new e(d.cancel),d.then(m.resolve,m.reject,m.progress),d=m.promise);return a||b||c?d.then(a,b,c):d}})},"esri/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper",
"./Message"],function(e,h,d,a,b){e=function(a){function b(c,d,g){var e=a.call(this,c,d,g)||this;return e instanceof b?e:new b(c,d,g)}return d(b,a),b}(b);return e.prototype.type="warning",e})},"esri/core/urlUtils":function(){define("require exports dojo/_base/window dojo/_base/lang dojo/_base/url dojo/io-query ../config ./lang ./sniff ./Logger ./Error".split(" "),function(e,h,d,a,b,c,m,k,l,g,n){function u(a){var f={path:null,query:null},g=new b(a),d=a.indexOf("?");return null===g.query?f.path=a:(f.path=
a.substring(0,d),f.query=c.queryToObject(g.query)),g.fragment&&(f.hash=g.fragment,null===g.query&&(f.path=f.path.substring(0,f.path.length-(g.fragment.length+1)))),f}function r(a,b){void 0===a&&(a=!1);void 0===b&&(b=!0);var g,c=O.proxyUrl;"string"==typeof a?(g=L(a),(a=q(a))&&(c=a.proxyUrl)):g=!!a;if(!c)throw ca.warn(P),new n("urlutils:proxy-not-set",P);var d;g&&b&&"https"===h.appUrl.scheme&&(b=I(c),f(b)&&(c=b,d=1));c=u(c);return c._xo=d,c}function t(a){var f=a.indexOf("?");return-1!==f?(ba.path=a.slice(0,
f),ba.query=a.slice(f+1)):(ba.path=a,ba.query=null),ba}function w(a){return a=t(a).path,a=a&&"/"===a[a.length-1]?a:a+"/",a=N(a,!0),a=a.toLowerCase()}function q(a){var f=O.proxyRules;a=w(a);for(var b=0;b<f.length;b++)if(0===a.indexOf(f[b].urlPrefix))return f[b]}function v(a){a=B(a);var f=a.indexOf("/sharing");return 0<f?a.substring(0,f):a.replace(/\/+$/,"")}function x(a,f,b){void 0===b&&(b=!1);a=M(a);f=M(f);return b||a.scheme===f.scheme?a.host.toLowerCase()===f.host.toLowerCase()&&a.port===f.port:
!1}function f(a){return l("esri-phonegap")?!0:l("esri-cors")?null!=p(a):!1}function p(a,f){void 0===f&&(f=!1);"string"==typeof a&&(a=C(a)?M(a):h.appUrl);for(var b=O.corsEnabledServers||[],g=0;g<b.length;g++)for(var c=b[g],d=void 0,d="string"==typeof c?z(c):c.host?z(c.host):[],e=0;e<d.length;e++)if(x(a,d[e]))return f?g:c;return f?-1:null}function z(a){return h.corsServersUrlCache[a]||(K(a)||G(a)?h.corsServersUrlCache[a]=[new b(y(a))]:h.corsServersUrlCache[a]=[new b("http://"+a),new b("https://"+a)]),
h.corsServersUrlCache[a]}function y(a,f,b){void 0===f&&(f=h.appBaseUrl);if(G(a))a=b&&b.preserveProtocolRelative?a:"http"===h.appUrl.scheme&&h.appUrl.authority===F(a).slice(2)?"http:"+a:"https:"+a;else if(!K(a)){b=D;if("/"===a[0]){var g=f.indexOf("//"),g=f.indexOf("/",g+2);f=-1===g?f:f.slice(0,g)}a=b(f,a)}return a}function A(a,f,b){if(void 0===f&&(f=h.appBaseUrl),!C(a))return a;var g=B(a),c=g.toLowerCase();f=B(f).toLowerCase().replace(/\/+$/,"");if((b=b?B(b).toLowerCase().replace(/\/+$/,""):null)&&
0!==f.indexOf(b))return a;for(var d=function(a,f,b){return b=a.indexOf(f,b),-1===b?a.length:b},e=d(c,"/",c.indexOf("//")+2),p=-1;c.slice(0,e+1)===f.slice(0,e)+"/"&&(p=e+1,e!==c.length);)e=d(c,"/",e+1);if(-1===p||b&&p<b.length)return a;a=g.slice(p);g=f.slice(p-1).replace(/[^\/]+/g,"").length;if(0<g)for(c=0;g>c;c++)a="../"+a;else a="./"+a;return a}function B(a){a=a.trim();var b=a=y(a);return a="http"===h.appUrl.scheme&&L(b)&&x(h.appBaseUrl,b,!0)&&!f(b)?G(b)?"http:"+b:b.replace(R,"http:"):b,a=S(a),a=
a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function D(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];if(a&&a.length){f=[];if(C(a[0])){var b=a[0],g=b.indexOf("//");f.push(b.slice(0,g+1));T.test(a[0])&&(f[0]+="/");a[0]=b.slice(g+2)}else"/"===a[0][0]&&f.push("");a=a.reduce(function(a,f){return a.concat(f.split("/"))},[]);for(b=0;b<a.length;b++)g=a[b],".."===g&&0<f.length?f.pop():!g||"."===g&&0!==f.length||f.push(g);return f.join("/")}}function F(a){if(E(a))return null;var f=a.indexOf("://");
if(-1===f&&G(a))f=2;else{if(-1===f)return null;f+=3}f=a.indexOf("/",f);return-1===f?a:a.slice(0,f)}function C(a){return G(a)||K(a)}function E(a){return"data:"===a.slice(0,5)}function G(a){return a&&"/"===a[0]&&"/"===a[1]}function K(a){return W.test(a)}function L(a){return R.test(a)||"https"===h.appUrl.scheme&&G(a)}function H(a){return aa.test(a)||"http"===h.appUrl.scheme&&G(a)}function I(a){return G(a)?"https:"+a:a.replace(aa,"https:")}function N(a,f){return void 0===f&&(f=!1),G(a)?a.slice(2):(a=
a.replace(W,""),f&&1<a.length&&"/"===a[0]&&"/"===a[1]&&(a=a.slice(2)),a)}function S(a){var f=m.request.httpsDomains;if(!H(a))return a;var b,g=a.indexOf("/",7);return b=-1===g?a:a.slice(0,g),b=b.toLowerCase().slice(7),"http"===h.appUrl.scheme&&b===h.appUrl.authority?a:(("https"===h.appUrl.scheme&&b===h.appUrl.authority||f&&f.some(function(a){return b===a||k.endsWith(b,"."+a)}))&&(a=I(a)),a)}function M(a){return"string"==typeof a?new b(y(a)):(a.scheme||(a.scheme=h.appUrl.scheme),a)}Object.defineProperty(h,
"__esModule",{value:!0});e=d.global;var ca=g.getLogger("esri.core.urlUtils"),O=m.request,P="esri/config: esriConfig.request.proxyUrl is not set. If making a request to a CORS-enabled\n server, please push the domain into esriConfig.request.corsEnabledServers.",W=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,aa=/^\s*http:/i,R=/^\s*https:/i,T=/^\s*file:/i;h.appUrl=new b(e.location);h.corsServersUrlCache={};h.appBaseUrl=function(){var a=h.appUrl.path,a=a.substring(0,a.lastIndexOf(a.split("/")[a.split("/").length-
1]));return""+(h.appUrl.scheme+"://"+h.appUrl.host+(null!=h.appUrl.port?":"+h.appUrl.port:""))+a}();h.urlToObject=u;h.getProxyUrl=r;h.addProxy=function(f){var b,g,d=q(f);d?(g=t(d.proxyUrl),b=g.path,g=g.query?c.queryToObject(g.query):null):O.forceProxy&&(g=r(),b=g.path,g=g.query);b&&(d=u(f),f=b+"?"+d.path,(b=c.objectToQuery(a.mixin(g||{},d.query)))&&(f=f+"?"+b));return f};var ba={path:"",query:""};h.addProxyRule=function(a){a={proxyUrl:a.proxyUrl,urlPrefix:w(a.urlPrefix)};for(var f=O.proxyRules,b=
a.urlPrefix,g=f.length,c=0;c<f.length;c++){var d=f[c].urlPrefix;if(0===b.indexOf(d)){if(b.length===d.length)return-1;g=c;break}0===d.indexOf(b)&&(g=c+1)}return f.splice(g,0,a),g};h.getProxyRule=q;h.hasSamePortal=function(a,f){return a=v(a),f=v(f),N(a)===N(f)};h.hasSameOrigin=x;h.canUseXhr=f;h.getCorsConfig=p;h.makeAbsolute=y;h.makeRelative=A;h.normalize=B;h.join=D;h.getOrigin=F;h.isAbsolute=C;h.isDataProtocol=E;var U=/^data:(.*?)(;base64)?,(.*)$/;h.dataComponents=function(a){return(a=a.match(U))?
{mediaType:a[1],isBase64:!!a[2],data:a[3]}:null};h.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};h.isProtocolRelative=G;h.hasProtocol=K;h.read=function(a,f){f=f&&f.url&&f.url.path;return a&&f?y(a,f,{preserveProtocolRelative:!0}):a};h.write=function(a,f){if(!a)return a;!C(a)&&f&&f.blockedRelativeUrls&&f.blockedRelativeUrls.push(a);var b=y(a);if(f){var g=f.verifyItemRelativeUrls&&f.verifyItemRelativeUrls.rootPath||f.url&&f.url.path;g&&(b=
A(b,g,g),b!==a&&f.verifyItemRelativeUrls&&f.verifyItemRelativeUrls.writtenUrls.push(b))}return b};h.isSVG=function(a){return ea.test(a)};var ea=/(^data:image\/svg|\.svg$)/i})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(e,h,d){var a={global:e.global,doc:e.global.document||null,body:function(a){a=a||e.doc;return a.body||a.getElementsByTagName("body")[0]},setContext:function(b,c){e.global=a.global=b;e.doc=a.doc=c},withGlobal:function(b,c,d,k){var l=e.global;try{return e.global=
a.global=b,a.withDoc.call(null,b.document,c,d,k)}finally{e.global=a.global=l}},withDoc:function(b,c,m,k){var l=a.doc,g=d("quirks"),n=d("ie"),u,r,t;try{return e.doc=a.doc=b,e.isQuirks=d.add("quirks","BackCompat"==e.doc.compatMode,!0,!0),d("ie")&&(t=b.parentWindow)&&t.navigator&&(u=parseFloat(t.navigator.appVersion.split("MSIE ")[1])||void 0,(r=b.documentMode)&&5!=r&&Math.floor(u)!=r&&(u=r),e.isIE=d.add("ie",u,!0,!0)),m&&"string"==typeof c&&(c=m[c]),c.apply(m,k||[])}finally{e.doc=a.doc=l,e.isQuirks=
d.add("quirks",g,!0,!0),e.isIE=d.add("ie",n,!0,!0)}}};h.mixin(e,a);return a})},"dojo/_base/url":function(){define(["./kernel"],function(e){var h=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,d=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,a=function(){for(var b=arguments,c=[b[0]],e=1;e<b.length;e++)if(b[e]){var k=new a(b[e]+""),c=new a(c[0]+"");if(""==k.path&&!k.scheme&&!k.authority&&!k.query)null!=k.fragment&&(c.fragment=k.fragment),k=c;else if(!k.scheme&&(k.scheme=
c.scheme,!k.authority&&(k.authority=c.authority,"/"!=k.path.charAt(0)))){for(var c=(c.path.substring(0,c.path.lastIndexOf("/")+1)+k.path).split("/"),l=0;l<c.length;l++)"."==c[l]?l==c.length-1?c[l]="":(c.splice(l,1),l--):0<l&&(1!=l||""!=c[0])&&".."==c[l]&&".."!=c[l-1]&&(l==c.length-1?(c.splice(l,1),c[l-1]=""):(c.splice(l-1,2),l-=2));k.path=c.join("/")}c=[];k.scheme&&c.push(k.scheme,":");k.authority&&c.push("//",k.authority);c.push(k.path);k.query&&c.push("?",k.query);k.fragment&&c.push("#",k.fragment)}this.uri=
c.join("");b=this.uri.match(h);this.scheme=b[2]||(b[1]?"":null);this.authority=b[4]||(b[3]?"":null);this.path=b[5];this.query=b[7]||(b[6]?"":null);this.fragment=b[9]||(b[8]?"":null);null!=this.authority&&(b=this.authority.match(d),this.user=b[3]||null,this.password=b[4]||null,this.host=b[6]||b[7],this.port=b[9]||null)};a.prototype.toString=function(){return this.uri};return e._Url=a})},"dojo/io-query":function(){define(["./_base/lang"],function(e){var h={};return{objectToQuery:function(d){var a=encodeURIComponent,
b=[],c;for(c in d){var m=d[c];if(m!=h[c]){var k=a(c)+"\x3d";if(e.isArray(m))for(var l=0,g=m.length;l<g;++l)b.push(k+a(m[l]));else b.push(k+a(m))}}return b.join("\x26")},queryToObject:function(d){var a=decodeURIComponent;d=d.split("\x26");for(var b={},c,m,k=0,l=d.length;k<l;++k)if(m=d[k],m.length){var g=m.indexOf("\x3d");0>g?(c=a(m),m=""):(c=a(m.slice(0,g)),m=a(m.slice(g+1)));"string"==typeof b[c]&&(b[c]=[b[c]]);e.isArray(b[c])?b[c].push(m):b[c]=m}return b}}})},"esri/config":function(){define(["require",
"exports","dojo/_base/window"],function(e,h,d){return{screenDPI:96,geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:null,kmlServiceUrl:null,portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{corsDetection:!(d.global&&d.global.cordova),corsDetectionTimeout:15,corsEnabledServers:"basemaps.arcgis.com basemapsbeta.arcgis.com basemapsbetadev.arcgis.com basemapsdev.arcgis.com demographics1.arcgis.com demographics2.arcgis.com demographics3.arcgis.com demographics4.arcgis.com demographics5.arcgis.com demographics6.arcgis.com dev.arcgis.com devext.arcgis.com elevation3d.arcgis.com elevation3ddev.arcgis.com js.arcgis.com jsdev.arcgis.com jsqa.arcgis.com geocode.arcgis.com geocodedev.arcgis.com geocodeqa.arcgis.com geoenrich.arcgis.com geoenrichdev.arcgis.com geoenrichqa.arcgis.com localvtiles.arcgis.com qaext.arcgis.com server.arcgisonline.com services.arcgis.com services.arcgisonline.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com services6.arcgis.com services7.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com static.arcgis.com staticqa.arcgis.com staticdev.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com tilesdevext.arcgis.com tilesqa.arcgis.com utility.arcgis.com utility.arcgisonline.com www.arcgis.com".split(" "),
corsStatus:{},forceProxy:!1,maxUrlLength:2E3,maxWorkers:5,proxyRules:[],proxyUrl:null,timeout:6E4,useCors:"with-credentials",useWorkers:"on-request",httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},useSpatialIndex:(d.global&&d.global.Worker,!1)}})},"esri/core/sniff":function(){define(["dojo/_base/window","dojo/sniff","../kernel"],function(e,h,d){function a(){if(t)return t;
t={available:!1,version:0,supportsHighPrecisionFragment:!1};var a;try{if(!r.WebGLRenderingContext)throw 0;a=document.createElement("canvas")}catch(f){return t}for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],g=null,c=0;c<b.length;++c){try{g=a.getContext(b[c])}catch(f){}if(g)break}a=g;if(!a)return t;b=a.getParameter(a.VERSION);if(!b)return t;if(b=b.match(/^WebGL\s+([\d.]*)/))t.version=parseFloat(b[1]),t.available=.94<=t.version,b=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT),
t.supportsHighPrecisionFragment=b&&0<b.precision,t.supportsVertexShaderSamplers=0<a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),t.supportsElementIndexUint=null!=a.getExtension("OES_element_index_uint");return t}if(h("host-node"))return h;var b,c=h("ff"),m=h("ie"),k=void 0===m&&7<=h("trident"),l=h("webkit"),g=h("opera"),n=h("chrome"),u=h("safari"),r=e.global;e=navigator.userAgent;if(b=e.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i),b&&h.add("esri-iphone",parseFloat(b[2].replace("_","."))),b=e.match(/Android\s+(\d+\.\d+)/i),
b&&h.add("esri-android",parseFloat(b[1])),b=e.match(/Fennec\/(\d+\.\d+)/i),b&&h.add("esri-fennec",parseFloat(b[1])),0<=e.indexOf("BlackBerry")&&0<=e.indexOf("WebKit")&&h.add("esri-blackberry",1),h.add("esri-touch",h("esri-iphone")||h("esri-android")||h("esri-blackberry")||6<=h("esri-fennec")||(c||l)&&document.createTouch?!0:!1),b=e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),b&&h.add("esri-mobile",b),h.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled),
d._getDOMAccessor=function(a){var b="";return c?b="Moz":l?b="Webkit":m?b="ms":g&&(b="O"),b+a.charAt(0).toUpperCase()+a.substr(1)},h.add("esri-phonegap",!!r.cordova),h.add("esri-cors",h("esri-phonegap")||"XMLHttpRequest"in r&&"withCredentials"in new XMLHttpRequest),h.add("esri-canvas-svg-support",function(){return!(h("trident")||h("ie"))}),h("host-webworker"))return h;h.add("esri-workers",r.Worker?!0:!1);h.add("esri-transforms",k||9<=m||3.5<=c||4<=n||3.1<=u||10.5<=g||3.2<=h("esri-iphone")||2.1<=h("esri-android"));
h.add("esri-transitions",k||10<=m||4<=c||4<=n||3.1<=u||10.5<=g||3.2<=h("esri-iphone")||2.1<=h("esri-android"));h.add("esri-transforms3d",k||10<=c||12<=n||4<=u||3.2<=h("esri-iphone")||3<=h("esri-android"));h.add("esri-url-encodes-apostrophe",function(){var a=r.document.createElement("a");return a.href="?'",-1<a.href.indexOf("?%27")});3>h("esri-android")&&(h.add("esri-transforms",!1,!1,!0),h.add("esri-transitions",!1,!1,!0),h.add("esri-transforms3d",!1,!1,!0));d._css=function(a){var b=h("esri-transforms3d");
void 0!==a&&null!==a?b=a:b&&(n||u&&!h("esri-iphone"))&&(b=!1);var d=b?"translate3d(":"translate(",e=b?n?",-1px)":",0px)":")",f=b?"scale3d(":"scale(",p=b?",1)":")",k=b?"rotate3d(0,0,1,":"rotate(",r=b?"matrix3d(":"matrix(",t=b?",0,0,":",",w=b?",0,0,0,0,1,0,":",",D=b?",0,1)":")";return{names:{transition:l&&"-webkit-transition"||c&&"MozTransition"||g&&"OTransition"||m&&"msTransition"||"transition",transform:l&&"-webkit-transform"||c&&"MozTransform"||g&&"OTransform"||m&&"msTransform"||"transform",transformName:l&&
"-webkit-transform"||c&&"-moz-transform"||g&&"-o-transform"||m&&"-ms-transform"||"transform",origin:l&&"-webkit-transform-origin"||c&&"MozTransformOrigin"||g&&"OTransformOrigin"||m&&"msTransformOrigin"||"transformOrigin",endEvent:l&&"webkitTransitionEnd"||c&&"transitionend"||g&&"oTransitionEnd"||m&&"MSTransitionEnd"||"transitionend"},translate:function(a,f){return d+a+"px,"+f+"px"+e},scale:function(a){return f+a+","+a+p},rotate:function(a){return k+a+"deg)"},matrix:function(a){return a.m?(a=a.m,r+
a[0].toFixed(10)+","+a[1].toFixed(10)+t+a[2].toFixed(10)+","+a[3].toFixed(10)+w+a[4].toFixed(10)+(c?"px,":",")+a[5].toFixed(10)+(c?"px":"")+D):r+a.xx.toFixed(10)+","+a.yx.toFixed(10)+t+a.xy.toFixed(10)+","+a.yy.toFixed(10)+w+a.dx.toFixed(10)+(c?"px,":",")+a.dy.toFixed(10)+(c?"px":"")+D},matrix3d:function(a){return a=a.m,"matrix3d("+a[0].toFixed(10)+","+a[1].toFixed(10)+",0,0,"+a[2].toFixed(10)+","+a[3].toFixed(10)+",0,0,0,0,1,0,"+a[4].toFixed(10)+","+a[5].toFixed(10)+",0,1)"},getScaleFromMatrix:function(a){if(!a)return 1;
a=a.toLowerCase();var f=-1<a.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(a.substring(f.length,a.indexOf(",")))}}};var t;return h.add("esri-webgl",function(){return!!a().available}),h.add("esri-webgl-high-precision-fragment",function(){return!!a().supportsHighPrecisionFragment}),h.add("esri-webgl-vertex-shader-samplers",function(){return!!a().supportsVertexShaderSamplers}),h.add("esri-webgl-element-index-uint",function(){return!!a().supportsElementIndexUint}),h})},"esri/kernel":function(){define(["require",
"./core/requireUtils","dojo/main","dojo/has"],function(e,h,d,a){(function(){var b=d.config,c=b.has&&void 0!==b.has["config-deferredInstrumentation"],e=b.has&&void 0!==b.has["config-useDeferredInstrumentation"];void 0!==b.useDeferredInstrumentation||c||e||(a.add("config-deferredInstrumentation",!1,!0,!0),a.add("config-useDeferredInstrumentation",!1,!0,!0))})();return{version:"4.4",workerMessages:{request:function(a){return h.when(e,"./request").then(function(b){var c=a.options||{};return c.responseType=
"array-buffer",b(a.url,c)}).then(function(a){return{data:{data:a.data,ssl:a.ssl},buffers:[a.data]}}).otherwise(function(a){throw{code:a.code,message:a.message,ssl:a.ssl};})}}}})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color require ./has!host-browser?./_base/browser require".split(" "),function(e,h,d,a,b,c,m,k){m.isDebug&&d(["./_firebug/firebug"]);return e})},
"dojo/ready":function(){define(["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(e,h,d,a,b){var c=0,m=[],k=0;h=function(){c=1;e._postLoad=e.config.afterOnLoad=!0;l()};var l=function(){if(!k){for(k=1;c&&(!a||0==a._Q.length)&&(d.idle?d.idle():1)&&m.length;){var b=m.shift();try{b()}catch(r){if(r.info=r.message,d.signal)d.signal("error",r);else throw r;}}k=0}};d.on&&d.on("idle",l);a&&(a._onQEmpty=l);var g=e.ready=e.addOnLoad=function(a,g,c){var d=b._toArray(arguments);
"number"!=typeof a?(c=g,g=a,a=1E3):d.shift();c=c?b.hitch.apply(e,d):function(){g()};c.priority=a;for(d=0;d<m.length&&a>=m[d].priority;d++);m.splice(d,0,c);l()},n=e.config.addOnLoad;if(n)g[b.isArray(n)?"apply":"call"](e,n);a?a(h):h();return g})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(e,h,d,a,b,c,m,k){function l(b,g,d,f,p){f=k.hitch(d,f);if(!b||!b.addEventListener&&!b.attachEvent)return a.after(b||e.global,
g,f,!0);"string"==typeof g&&"on"==g.substring(0,2)&&(g=g.substring(2));b||(b=e.global);if(!p)switch(g){case "keypress":g=t;break;case "mouseenter":g=c.enter;break;case "mouseleave":g=c.leave}return h(b,g,f,p)}function g(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}m.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(v){}return 0==
a.charCode&&!m("opera")});var n={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},u=m("mac")?"metaKey":"ctrlKey",r=function(a,b){b=k.mixin({},a,b);g(b);b.preventDefault=function(){a.preventDefault()};b.stopPropagation=function(){a.stopPropagation()};return b},t;t=m("events-keypress-typed")?function(a,b){var g=h(a,"keydown",function(a){var f=a.keyCode,g=13!=f&&32!=f&&(27!=f||!m("ie"))&&(48>f||90<f)&&(96>f||111<f)&&(186>f||192<f)&&(219>f||222<f)&&229!=
f;if(g||a.ctrlKey){g=g?0:f;if(a.ctrlKey){if(3==f||13==f)return b.call(a.currentTarget,a);g=95<g&&106>g?g-48:!a.shiftKey&&65<=g&&90>=g?g+32:n[g]||g}f=r(a,{type:"keypress",faux:!0,charCode:g});b.call(a.currentTarget,f);if(m("ie"))try{a.keyCode=f.keyCode}catch(A){}}}),f=h(a,"keypress",function(a){var f=a.charCode;a=r(a,{charCode:32<=f?f:0,faux:!0});return b.call(this,a)});return{remove:function(){g.remove();f.remove()}}}:m("opera")?function(a,b){return h(a,"keypress",function(a){var f=a.which;3==f&&
(f=99);f=32>f&&!a.shiftKey?0:f;a.ctrlKey&&!a.shiftKey&&65<=f&&90>=f&&(f+=32);return b.call(this,r(a,{charCode:f}))})}:function(a,b){return h(a,"keypress",function(a){g(a);return b.call(this,a)})};var w={_keypress:t,connect:function(a,b,g,f,c){var d=arguments,e=[],p=0;e.push("string"==typeof d[0]?null:d[p++],d[p++]);var k=d[p+1];e.push("string"==typeof k||"function"==typeof k?d[p++]:null,d[p++]);for(k=d.length;p<k;p++)e.push(d[p]);return l.apply(this,e)},disconnect:function(a){a&&a.remove()},subscribe:function(a,
b,g){return d.subscribe(a,k.hitch(b,g))},publish:function(a,b){return d.publish.apply(d,[a].concat(b))},connectPublisher:function(a,b,g){var f=function(){w.publish(a,arguments)};return g?w.connect(b,g,f):w.connect(b,f)},isCopyKey:function(a){return a[u]}};w.unsubscribe=w.disconnect;k.mixin(e,w);return w})},"dojo/topic":function(){define(["./Evented"],function(e){var h=new e;return{publish:function(d,a){return h.emit.apply(h,arguments)},subscribe:function(d,a){return h.on.apply(h,arguments)}}})},"dojo/_base/event":function(){define(["./kernel",
"../on","../has","../dom-geometry"],function(e,h,d,a){if(h._fixEvent){var b=h._fixEvent;h._fixEvent=function(c,d){(c=b(c,d))&&a.normalizeEvent(c);return c}}var c={fix:function(a,b){return h._fixEvent?h._fixEvent(a,b):a},stop:function(a){d("dom-addeventlistener")||a&&a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a=a||window.event,a.cancelBubble=!0,h._preventDefault.call(a))}};e.fixEvent=c.fix;e.stopEvent=c.stop;return c})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window",
"./dom","./dom-style"],function(e,h,d,a){function b(a,b,c,d,e,k){k=k||"px";a=a.style;isNaN(b)||(a.left=b+k);isNaN(c)||(a.top=c+k);0<=d&&(a.width=d+k);0<=e&&(a.height=e+k)}function c(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function m(a){return"border-box"==k.boxModel||"table"==a.tagName.toLowerCase()||c(a)}var k={boxModel:"content-box"};e("ie")&&(k.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");
k.getPadExtents=function(b,c){b=d.byId(b);var g=c||a.getComputedStyle(b),e=a.toPixelValue;c=e(b,g.paddingLeft);var k=e(b,g.paddingTop),l=e(b,g.paddingRight);b=e(b,g.paddingBottom);return{l:c,t:k,r:l,b:b,w:c+l,h:k+b}};k.getBorderExtents=function(b,c){b=d.byId(b);var g=a.toPixelValue,e=c||a.getComputedStyle(b);c="none"!=e.borderLeftStyle?g(b,e.borderLeftWidth):0;var k="none"!=e.borderTopStyle?g(b,e.borderTopWidth):0,l="none"!=e.borderRightStyle?g(b,e.borderRightWidth):0;b="none"!=e.borderBottomStyle?
g(b,e.borderBottomWidth):0;return{l:c,t:k,r:l,b:b,w:c+l,h:k+b}};k.getPadBorderExtents=function(b,c){b=d.byId(b);var g=c||a.getComputedStyle(b);c=k.getPadExtents(b,g);b=k.getBorderExtents(b,g);return{l:c.l+b.l,t:c.t+b.t,r:c.r+b.r,b:c.b+b.b,w:c.w+b.w,h:c.h+b.h}};k.getMarginExtents=function(b,c){b=d.byId(b);var g=c||a.getComputedStyle(b),e=a.toPixelValue;c=e(b,g.marginLeft);var k=e(b,g.marginTop),l=e(b,g.marginRight);b=e(b,g.marginBottom);return{l:c,t:k,r:l,b:b,w:c+l,h:k+b}};k.getMarginBox=function(b,
c){b=d.byId(b);c=c||a.getComputedStyle(b);c=k.getMarginExtents(b,c);var g=b.offsetLeft-c.l,l=b.offsetTop-c.t,n=b.parentNode,m=a.toPixelValue;8==e("ie")&&!e("quirks")&&n&&(n=a.getComputedStyle(n),g-="none"!=n.borderLeftStyle?m(b,n.borderLeftWidth):0,l-="none"!=n.borderTopStyle?m(b,n.borderTopWidth):0);return{l:g,t:l,w:b.offsetWidth+c.w,h:b.offsetHeight+c.h}};k.getContentBox=function(b,c){b=d.byId(b);var g=c||a.getComputedStyle(b);c=b.clientWidth;var l,n=k.getPadExtents(b,g);l=k.getBorderExtents(b,
g);var g=b.offsetLeft+n.l+l.l,m=b.offsetTop+n.t+l.t;c?l=b.clientHeight:(c=b.offsetWidth-l.w,l=b.offsetHeight-l.h);if(8==e("ie")&&!e("quirks")){var q=b.parentNode,v=a.toPixelValue;q&&(q=a.getComputedStyle(q),g-="none"!=q.borderLeftStyle?v(b,q.borderLeftWidth):0,m-="none"!=q.borderTopStyle?v(b,q.borderTopWidth):0)}return{l:g,t:m,w:c-n.w,h:l-n.h}};k.setContentSize=function(a,c,e){a=d.byId(a);var g=c.w;c=c.h;m(a)&&(e=k.getPadBorderExtents(a,e),0<=g&&(g+=e.w),0<=c&&(c+=e.h));b(a,NaN,NaN,g,c)};var l={l:0,
t:0,w:0,h:0};k.setMarginBox=function(g,n,u){g=d.byId(g);var r=u||a.getComputedStyle(g);u=n.w;var t=n.h,h=m(g)?l:k.getPadBorderExtents(g,r),r=k.getMarginExtents(g,r);if(e("webkit")&&c(g)){var q=g.style;0<=u&&!q.width&&(q.width="4px");0<=t&&!q.height&&(q.height="4px")}0<=u&&(u=Math.max(u-h.w-r.w,0));0<=t&&(t=Math.max(t-h.h-r.h,0));b(g,n.l,n.t,u,t)};k.isBodyLtr=function(a){a=a||h.doc;return"ltr"==(h.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};k.docScroll=function(a){a=a||h.doc;var b=h.doc.parentWindow||
h.doc.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:(b=e("quirks")?h.body(a):a.documentElement)&&{x:k.fixIeBiDiScrollLeft(b.scrollLeft||0,a),y:b.scrollTop||0}};k.getIeDocumentElementOffset=function(a){return{x:0,y:0}};k.fixIeBiDiScrollLeft=function(a,b){b=b||h.doc;var g=e("ie");if(g&&!k.isBodyLtr(b)){var c=e("quirks");b=c?h.body(b):b.documentElement;var d=h.global;6==g&&!c&&d.frameElement&&b.scrollHeight>b.clientHeight&&(a+=b.clientLeft);return 8>g||c?a+b.clientWidth-b.scrollWidth:
-a}return a};k.position=function(a,b){a=d.byId(a);var g=h.body(a.ownerDocument),c=a.getBoundingClientRect(),c={x:c.left,y:c.top,w:c.right-c.left,h:c.bottom-c.top};9>e("ie")&&(c.x-=e("quirks")?g.clientLeft+g.offsetLeft:0,c.y-=e("quirks")?g.clientTop+g.offsetTop:0);b&&(a=k.docScroll(a.ownerDocument),c.x+=a.x,c.y+=a.y);return c};k.getMarginSize=function(b,c){b=d.byId(b);c=k.getMarginExtents(b,c||a.getComputedStyle(b));b=b.getBoundingClientRect();return{w:b.right-b.left+c.w,h:b.bottom-b.top+c.h}};k.normalizeEvent=
function(a){"layerX"in a||(a.layerX=a.offsetX,a.layerY=a.offsetY);if(!("pageX"in a)){var b=a.target,b=b&&b.ownerDocument||document,g=e("quirks")?b.body:b.documentElement;a.pageX=a.clientX+k.fixIeBiDiScrollLeft(g.scrollLeft||0,b);a.pageY=a.clientY+(g.scrollTop||0)}};return k})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(e,h,d){if(7>=e("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(c){}var a={};e("ie")?a.byId=function(a,b){if("string"!=typeof a)return a;
var c=b||h.doc;b=a&&c.getElementById(a);if(!b||b.attributes.id.value!=a&&b.id!=a){c=c.all[a];if(!c||c.nodeName)c=[c];for(var d=0;b=c[d++];)if(b.attributes&&b.attributes.id&&b.attributes.id.value==a||b.id==a)return b}else return b}:a.byId=function(a,b){return("string"==typeof a?(b||h.doc).getElementById(a):a)||null};d=d.global.document||null;e.add("dom-contains",!(!d||!d.contains));a.isDescendant=e("dom-contains")?function(b,d){return!(!(d=a.byId(d))||!d.contains(a.byId(b)))}:function(b,d){try{for(b=
a.byId(b),d=a.byId(d);b;){if(b==d)return!0;b=b.parentNode}}catch(k){}return!1};e.add("css-user-select",function(a,b,d){if(!d)return!1;a=d.style;b=["Khtml","O","Moz","Webkit"];d=b.length;var c="userSelect";do if("undefined"!==typeof a[c])return c;while(d--&&(c=b[d]+"UserSelect"));return!1});var b=e("css-user-select");a.setSelectable=b?function(c,d){a.byId(c).style[b]=d?"":"none"}:function(b,d){b=a.byId(b);var c=b.getElementsByTagName("*"),e=c.length;if(d)for(b.removeAttribute("unselectable");e--;)c[e].removeAttribute("unselectable");
else for(b.setAttribute("unselectable","on");e--;)c[e].setAttribute("unselectable","on")};return a})},"dojo/dom-style":function(){define(["./sniff","./dom","./_base/window"],function(e,h,d){function a(a,b,g){b=b.toLowerCase();if("auto"==g){if("height"==b)return a.offsetHeight;if("width"==b)return a.offsetWidth}if("fontweight"==b)switch(g){case 700:return"bold";default:return"normal"}b in n||(n[b]=u.test(b));return n[b]?m(a,g):g}var b,c={};b=e("webkit")?function(a){var b;if(1==a.nodeType){var g=a.ownerDocument.defaultView;
b=g.getComputedStyle(a,null);!b&&a.style&&(a.style.display="",b=g.getComputedStyle(a,null))}return b||{}}:e("ie")&&(9>e("ie")||e("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){if(1===a.nodeType){var b=a.ownerDocument.defaultView;return(b.opener?b:d.global.window).getComputedStyle(a,null)}return{}};c.getComputedStyle=b;var m;m=e("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var g=a.style,c=a.runtimeStyle,
d=g.left,f=c.left;c.left=a.currentStyle.left;try{g.left=b,b=g.pixelLeft}catch(p){b=0}g.left=d;c.left=f;return b}:function(a,b){return parseFloat(b)||0};c.toPixelValue=m;var k=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(q){return b?{}:null}},l=9>e("ie")||10>e("ie")&&e("quirks")?function(a){try{return k(a).Opacity/100}catch(w){return 1}}:function(a){return b(a).opacity},g=9>e("ie")||10>e("ie")&&e("quirks")?function(a,b){""===b&&(b=1);var c=100*b;1===b?(a.style.zoom=
"",k(a)&&(a.style.filter=a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(a.style.zoom=1,k(a)?k(a,1).Opacity=c:a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+c+")",k(a,1).Enabled=!0);if("tr"==a.tagName.toLowerCase())for(a=a.firstChild;a;a=a.nextSibling)"td"==a.tagName.toLowerCase()&&g(a,b);return b}:function(a,b){return a.style.opacity=b},n={left:!0,top:!0},u=/margin|padding|width|height|max|min|offset/,r={cssFloat:1,styleFloat:1,"float":1};
c.get=function(b,g){var d=h.byId(b),e=arguments.length;if(2==e&&"opacity"==g)return l(d);g=r[g]?"cssFloat"in d.style?"cssFloat":"styleFloat":g;var k=c.getComputedStyle(d);return 1==e?k:a(d,g,k[g]||d.style[g])};c.set=function(a,b,d){var e=h.byId(a),k=arguments.length,f="opacity"==b;b=r[b]?"cssFloat"in e.style?"cssFloat":"styleFloat":b;if(3==k)return f?g(e,d):e.style[b]=d;for(var p in b)c.set(a,p,b[p]);return c.getComputedStyle(e)};return c})},"dojo/mouse":function(){define(["./_base/kernel","./on",
"./has","./dom","./_base/window"],function(e,h,d,a,b){function c(b,d){var e=function(g,c){return h(g,b,function(b){if(d)return d(b,c);if(!a.isDescendant(b.relatedTarget,g))return c.call(this,b)})};e.bubble=function(a){return c(b,function(b,g){var c=a(b.target),d=b.relatedTarget;if(c&&c!=(d&&1==d.nodeType&&a(d)))return g.call(c,b)})};return e}d.add("dom-quirks",b.doc&&"BackCompat"==b.doc.compatMode);d.add("events-mouseenter",b.doc&&"onmouseenter"in b.doc.createElement("div"));d.add("events-mousewheel",
b.doc&&"onmousewheel"in b.doc);b=d("dom-quirks")&&d("ie")||!d("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(a,b){return a.button&b},isLeft:function(a){return a.button&1},isMiddle:function(a){return a.button&4},isRight:function(a){return a.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(a,b){return a.button==b},isLeft:function(a){return 0==a.button},isMiddle:function(a){return 1==a.button},isRight:function(a){return 2==a.button}};e.mouseButtons=b;e=d("events-mousewheel")?
"mousewheel":function(a,b){return h(a,"DOMMouseScroll",function(a){a.wheelDelta=-a.detail;b.call(this,a)})};return{_eventHandler:c,enter:c("mouseover"),leave:c("mouseout"),wheel:e,isLeft:b.isLeft,isMiddle:b.isMiddle,isRight:b.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(e,h,d){if(!d("host-browser"))return d;e._name="browser";h.mixin(e,{isBrowser:!0,isFF:d("ff"),isIE:d("ie"),isKhtml:d("khtml"),isWebKit:d("webkit"),isMozilla:d("mozilla"),isMoz:d("mozilla"),
isOpera:d("opera"),isSafari:d("safari"),isChrome:d("chrome"),isMac:d("mac"),isIos:d("ios"),isAndroid:d("android"),isWii:d("wii"),isQuirks:d("quirks"),isAir:d("air")});return d})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(e,h){return e.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:h("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,
HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:h("mac")&&!h("air")?
h("safari")?91:224:17}})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(e,h,d,a,b,c,m){var k=function(){},l=Object.freeze||function(){},g=e.Deferred=function(e){function n(a){if(w)throw Error("This deferred has already been resolved");t=a;w=!0;m()}function m(){for(var a;!a&&p;){var f=p;p=p.next;if(a=f.progress==k)w=!1;var g=x?f.error:f.resolved;b("config-useDeferredInstrumentation")&&x&&h.instrumentRejected&&
h.instrumentRejected(t,!!g);if(g)try{var d=g(t);d&&"function"===typeof d.then?d.then(c.hitch(f.deferred,"resolve"),c.hitch(f.deferred,"reject"),c.hitch(f.deferred,"progress")):(g=a&&void 0===d,a&&!g&&(x=d instanceof Error),f.deferred[g&&x?"reject":"resolve"](g?t:d))}catch(C){f.deferred.reject(C)}else x?f.deferred.reject(t):f.deferred.resolve(t)}}var t,w,q,v,x,f,p,z=this.promise=new d;this.isResolved=z.isResolved=function(){return 0==v};this.isRejected=z.isRejected=function(){return 1==v};this.isFulfilled=
z.isFulfilled=function(){return 0<=v};this.isCanceled=z.isCanceled=function(){return q};this.resolve=this.callback=function(a){this.fired=v=0;this.results=[a,null];n(a)};this.reject=this.errback=function(a){x=!0;this.fired=v=1;b("config-useDeferredInstrumentation")&&h.instrumentRejected&&h.instrumentRejected(a,!!p);n(a);this.results=[null,a]};this.progress=function(a){for(var f=p;f;){var b=f.progress;b&&b(a);f=f.next}};this.addCallbacks=function(a,f){this.then(a,f,k);return this};z.then=this.then=
function(a,b,c){var d=c==k?this:new g(z.cancel);a={resolved:a,error:b,progress:c,deferred:d};p?f=f.next=a:p=f=a;w&&m();return d.promise};var y=this;z.cancel=this.cancel=function(){if(!w){var f=e&&e(y);w||(f instanceof Error||(f=new a(f)),f.log=!1,y.reject(f))}q=!0};l(z)};c.extend(g,{addCallback:function(a){return this.addCallbacks(c.hitch.apply(e,arguments))},addErrback:function(a){return this.addCallbacks(null,c.hitch.apply(e,arguments))},addBoth:function(a){var b=c.hitch.apply(e,arguments);return this.addCallbacks(b,
b)},fired:-1});g.when=e.when=m;return g})},"dojo/_base/json":function(){define(["./kernel","../json"],function(e,h){e.fromJson=function(d){return eval("("+d+")")};e._escapeString=h.stringify;e.toJsonIndentStr="\t";e.toJson=function(d,a){return h.stringify(d,function(a,c){return c&&(a=c.__json__||c.json,"function"==typeof a)?a.call(c):c},a&&e.toJsonIndentStr)};return e})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(e,h,d,a){var b=e.Color=function(a){a&&
this.setColor(a)};b.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:a.transparentColor||[0,0,0,0]};h.extend(b,{r:255,g:255,b:255,a:1,_set:function(a,b,d,e){this.r=a;this.g=b;this.b=d;this.a=e},setColor:function(a){h.isString(a)?b.fromString(a,this):h.isArray(a)?
b.fromArray(a,this):(this._set(a.r,a.g,a.b,a.a),a instanceof b||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+d.map(["r","g","b"],function(a){a=this[a].toString(16);return 2>a.length?"0"+a:a},this).join("")},toCss:function(a){var b=this.r+", "+this.g+", "+this.b;return(a?"rgba("+b+", "+this.a:"rgb("+b)+")"},toString:function(){return this.toCss(!0)}});b.blendColors=
e.blendColors=function(a,e,k,l){var g=l||new b;d.forEach(["r","g","b","a"],function(b){g[b]=a[b]+(e[b]-a[b])*k;"a"!=b&&(g[b]=Math.round(g[b]))});return g.sanitize()};b.fromRgb=e.colorFromRgb=function(a,d){return(a=a.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&b.fromArray(a[1].split(/\s*,\s*/),d)};b.fromHex=e.colorFromHex=function(a,e){var c=e||new b,l=4==a.length?4:8,g=(1<<l)-1;a=Number("0x"+a.substr(1));if(isNaN(a))return null;d.forEach(["b","g","r"],function(b){var d=a&g;a>>=l;c[b]=4==l?17*
d:d});c.a=1;return c};b.fromArray=e.colorFromArray=function(a,d){d=d||new b;d._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));isNaN(d.a)&&(d.a=1);return d.sanitize()};b.fromString=e.colorFromString=function(a,d){var c=b.named[a];return c&&b.fromArray(c,d)||b.fromRgb(a,d)||b.fromHex(a,d)};return b})},"esri/core/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all","./Error"],function(e,h,d,a,b){function c(a){if(a){if("function"!=typeof a.forEach){var b=Object.keys(a),
e=b.map(function(b){return a[b]});return c(e).then(function(a){var g={};return b.forEach(function(b,c){return g[b]=a[c]}),g})}var g=new d,n=[],m=a.length;return 0===m&&g.resolve(n),a.forEach(function(a){var b={promise:a};n.push(b);a.then(function(a){b.value=a}).otherwise(function(a){b.error=a}).then(function(){--m;0===m&&g.resolve(n)})}),g.promise}}Object.defineProperty(h,"__esModule",{value:!0});h.all=function(b){return a(b)};h.eachAlways=c;h.create=function(a,b){var c=new d(b);return a(function(a){return void 0===
a&&(a=null),c.resolve(a)},c.reject),c.promise};h.reject=function(a){var b=new d;return b.reject(a),b.promise};h.resolve=function(a){void 0===a&&(a=null);var b=new d;return b.resolve(a),b.promise};h.after=function(a,b){void 0===b&&(b=null);var c=0,g=new d(function(){c&&(clearTimeout(c),c=0)});return c=setTimeout(function(){g.resolve(b)},a),g.promise};h.timeout=function(a,c,e){var g=0,k=new d(a.cancel);return a.then(function(a){k.isFulfilled()||(k.resolve(a),g&&(clearTimeout(g),g=0))}),a.otherwise(function(a){k.isFulfilled()||
(k.reject(a),g&&(clearTimeout(g),g=0))}),g=setTimeout(function(){var a=e||new b("promiseUtils:timeout","The wrapped promise did not resolve within "+c+" ms");k.reject(a)},c),k.promise};h.wrapCallback=function(a){var b=!1,c=new d(function(){return b=!0});return a(function(a){b||c.resolve(a)}),c.promise}})},"esri/request":function(){define("require dojo/_base/config dojo/Deferred dojo/_base/lang dojo/_base/url dojo/request dojo/io-query dojo/when ./kernel ./config ./core/global ./core/sniff ./core/lang ./core/urlUtils ./core/deferredUtils ./core/promiseUtils dojo/has!host-browser?dojo/io/script dojo/has!host-webworker?./core/workers/request".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x){function f(f){var b=m.objectToQuery(f.content);if(b&&(f.url+=(-1===f.url.indexOf("?")?"?":"\x26")+b),2E3<f.url.length)return q.reject(a.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."}));var g=new Image;f.allowImageDataAccess&&(f.withCredentials?g.crossOrigin="use-credentials":g.crossOrigin="anonymous");var c=!1,e=new d(function(a){c=!0;g.onload=g.onerror=g.onabort=null;g.src=""}),b=function(a){g.onload=
g.onerror=g.onabort=null;c||e.reject(a)};return g.onload=function(){g.onload=g.onerror=g.onabort=null;c||e.resolve(this)},g.onerror=b,g.onabort=b,g.alt="",g.src=f.url,e.promise}function p(a){return a=new b(a),(a.host+(a.port?":"+a.port:"")).toLowerCase()}function z(b,g){var e=!!b.useProxy,p=b.method||"auto",k=r.isDefined(b.crossOrigin)?b.crossOrigin:E.useCors;b=a.mixin({},b);b._ssl&&(b.url=b.url.replace(/^http:/i,"https:"));var n=b.content,q=b.url;b.load=function(f){var b;return f&&(f.error?(b=a.mixin(Error(),
f.error),b.log=!!h.isDebug):"error"===f.status&&(b=a.mixin(Error(),f),b.log=!!h.isDebug),b&&!r.isDefined(b.httpCode)&&(b.httpCode=b.code)),b||f};b.error=function(f,b){return b&&b.xhr&&b.xhr.abort(),f instanceof Error||(f=a.mixin(Error(),f)),f.log=!!h.isDebug,f};b._token&&(b.content=b.content||{},b.content.token=b._token);var x,z=0;q&&(x=m.objectToQuery(n),z=x.length+q.length+1,u("esri-url-encodes-apostrophe")&&(z=x.replace(/'/g,"%27").length+q.length+1));b.timeout=r.isDefined(b.timeout)?b.timeout:
E.timeout;b.handleAs=b.handleAs||"json";try{var w,y,F=k&&t.canUseXhr(b.urlObj)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(b.url),A=t.hasSameOrigin(b.urlObj,t.appUrl)||F,B="post"===p||!!b.body||z>E.maxUrlLength,D=!A&&-1!==b.handleAs.indexOf("json")&&b.callbackParamName&&!b.body,H=!!t.getProxyRule(b.url)||E.forceProxy||e||("image"!==b.handleAs||b.allowImageDataAccess)&&(!D||B)&&!A;if((u("host-browser")||u("host-webworker"))&&H)if(w=t.getProxyUrl(q,k),y=w.path,w._xo&&(F=!0),!B&&y.length+1+
z>E.maxUrlLength&&(B=!0),b.url=y+"?"+q,B)b.content=a.mixin(w.query||{},n);else{var G=m.objectToQuery(a.mixin(w.query||{},n));G&&(b.url+=(-1===q.indexOf("?")?"?":"\x26")+G);b.content=null}if((u("host-browser")||u("host-webworker"))&&D&&!B)return!r.isDefined(b.isAsync)&&4>u("ff")&&(b.isAsync=!0),v.get(C?C(b):b);var I=b.headers;if(!u("host-browser")&&!u("host-webworker")||I&&I.hasOwnProperty("X-Requested-With")||(I=b.headers=I||{},I["X-Requested-With"]=null),u("host-browser")&&g){var L=b.content&&b.content.token;
L&&g.set("token",L);b.contentType=!1}if(F&&!b.hasOwnProperty("withCredentials")&&"with-credentials"===E.useCors){var e=H?y:q,ra=t.getCorsConfig(e);if(ra&&ra.hasOwnProperty("withCredentials"))ra.withCredentials&&(b.withCredentials=!0);else if(l.id){var Aa=l.id.findServerInfo(e);Aa&&Aa.webTierAuth&&(b.withCredentials=!0)}}return b=C?C(b):b,"image"===b.handleAs?f(b):B?(b.body?(b.data=g||b.body,b.query=b.content):b.data=b.content,delete b.body,delete b.content,!H&&u("safari")&&(b.url+=(-1===b.url.indexOf("?")?
"?":"\x26")+"_ts\x3d"+(new Date).getTime()+K++),c.post(b.url,b)):(b.query=b.content,delete b.content,c.get(b.url,b))}catch(Fa){return g=new d,g.reject(b.error(Fa)),g}}function y(a){var f=E.corsStatus,b=t.getCorsConfig(a,!0);return-1<b&&E.corsEnabledServers.splice(b,1),f[p(a)]=1,b}function A(a){var f=E.corsStatus;try{var b=p(a.url);if(E.corsDetection&&E.useCors&&u("esri-cors")&&a.url&&-1!==a.url.toLowerCase().indexOf("/rest/services")&&!t.hasSameOrigin(a.urlObj,t.appUrl)&&!t.canUseXhr(a.urlObj)){if(f[b])return f[b];
var g=new d;f[b]=g.promise;var e=a.url.substring(0,a.url.toLowerCase().indexOf("/rest/")+6)+"info";return c.get(e,{query:{f:"json"},handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*E.corsDetectionTimeout}).then(function(f){f?(t.canUseXhr(a.url)||E.corsEnabledServers.push(b),g.resolve()):g.reject()},function(a){g.reject()}),g.promise}}catch(ca){console.log("esri._detectCors: an unknown error occurred while detecting CORS support")}}function B(f,b,g,k){function n(f){if(f._pendingDfd=z(g,
F),!f._pendingDfd){f.ioArgs=f._pendingDfd&&f._pendingDfd.ioArgs;var b=Error("Deferred object is missing");return b.log=!!h.isDebug,f.reject(b),void(f._pendingDfd=null)}var c=!!f._pendingDfd.response;(f._pendingDfd.response||f._pendingDfd).then(function(f){if(!c||!f.data)return f;var b=f.getHeader("Content-Type");if(b&&(b=b.toLowerCase(),-1===b.indexOf("text/plain")&&-1===b.indexOf("application/json")))return f;b=f.data;if(b instanceof ArrayBuffer&&750>=b.byteLength)b=new Blob([b]);else if(!(b instanceof
Blob&&750>=b.size))return f;var g=new d,e=new FileReader;return e.readAsText(b),e.onloadend=function(){if(!e.error)try{var b=JSON.parse(e.result);b.error&&(Object.isExtensible(f)||(f=a.mixin({},f)),f._jsonData=b)}catch(pa){}g.resolve(f)},g.promise}).then(function(b){var g=c?b.data:b,d=c?b.getHeader.bind(b):L,e=null;if(f.ioArgs=f._pendingDfd&&f._pendingDfd.ioArgs,g)if(b=c&&b._jsonData||g,b.error?(e=a.mixin(Error(),b.error),e.log=!!h.isDebug):"error"===b.status&&(e=a.mixin(Error(),b),e.log=!!h.isDebug),
e&&!r.isDefined(e.httpCode)&&(e.httpCode=e.code),e)throw e;f.resolve({data:g,url:k.url,requestOptions:k.requestOptions,getHeader:d});f._pendingDfd=null}).otherwise(function(a){var b,c,d;if(a&&(b=a.code,c=a.subcode,d=a.messageCode,d=d&&d.toUpperCase()),a&&403==b&&(4==c||a.message&&-1<a.message.toLowerCase().indexOf("ssl")&&-1===a.message.toLowerCase().indexOf("permission"))){if(!g._ssl)return g._ssl=g._sslFromServer=!0,void B(f,!0,g,k)}else if(a&&415==a.status){if(y(g.url),!g._err415)return g._err415=
1,void B(f,!0,g,k)}else if(l.id&&l.id._errorCodes&&-1!==l.id._errorCodes.indexOf(b)&&!l.id._isPublic(g.url)&&!v&&(403!=b||G&&-1===G.indexOf(d)&&(!r.isDefined(c)||2==c&&g._token)))return void D(f,g,k,a);f.ioArgs=f._pendingDfd&&f._pendingDfd.ioArgs;f.reject(a);f._pendingDfd=null})}var m=g.body,v=g.disableIdentityLookup,q=g._preLookup,x=!1;if(u("esri-workers")&&!1!==E.useWorkers)if(!0===g.useWorkers||!0===E.useWorkers)x=!0;else if(g.workerOptions){var w=g.workerOptions;(w.callback||w.worker&&w.worker.worker instanceof
Worker)&&(x=!0)}var F=null;((w=m instanceof FormData)||m&&m.elements)&&(F=w?m:new FormData(m));var A=!!(-1!==g.url.toLowerCase().indexOf("token\x3d")||g.content&&g.content.token||F&&F.get("token"));if(!b){f.then(function(a){if((/\/sharing\/rest\/accounts\/self/i.test(g.url)||/\/sharing\/rest\/portals\/self/i.test(g.url))&&!A&&!g._token&&a.user&&a.user.username){var f=E.corsEnabledServers,b=t.getCorsConfig(g.url,!0),c={host:p(g.url),withCredentials:!0};if(-1===b)f.push(c);else{var d=f[b];"object"==
typeof d?d.withCredentials=!0:f.splice(b,1,c)}}if(f=g._credential){var e;(b=(b=l.id.findServerInfo(f.server))&&b.owningSystemUrl)&&(b=b.replace(/\/?$/,"/sharing"),e=l.id.findCredential(b,f.userId),e&&-1===l.id._getIdenticalSvcIdx(b,e)&&e.resources.splice(0,0,b))}return a}).always(function(a){delete g._credential;a&&(a.ssl=!!g._ssl)});var C=g.load,H=g.error;C&&f.then(function(a){var b=f._pendingDfd,b=b&&b.ioArgs;return C.call(b&&b.args,a,b)});H&&f.then(null,function(a){var b=f._pendingDfd,b=b&&b.ioArgs;
return H.call(b&&b.args,a,b)})}!l.id||A||g._token||l.id._isPublic(g.url)||v&&!q||(b=l.id.findCredential(g.url))&&(g._token=b.token,g._ssl=b.ssl);return x?g.workerOptions&&g.workerOptions.worker?(c=g.workerOptions.worker,n(f)):e(["./workers/RequestClient"],function(a){if(g.workerOptions){var b=g.workerOptions;c=a.getClient(b.callback,b.cbFunction)}else c=a.getClient();n(f)}):n(f),f.promise}function D(a,f,b,g){a._pendingDfd=l.id.getCredential(f.url,{token:f._token,error:g});a._pendingDfd.then(function(g){f._token=
g.token;f._credential=g;f._ssl=f._sslFromServer||g.ssl;B(a,!0,f,b)}).otherwise(function(f){a.reject(f);a._pendingDfd=null})}function F(f,g){if(x&&n.invokeStaticMessage)return x.execute(f,g);"string"!=typeof f&&console.error("esri/request: the first parameter should be a url string");var c=a.mixin({},g),d={url:f,requestOptions:a.mixin({},g)};if(c.content=c.query,delete c.query,c.preventCache=!!c.cacheBust,delete c.cacheBust,c.handleAs=c.responseType,delete c.responseType,"array-buffer"===c.handleAs&&
(c.handleAs="arraybuffer"),"image"===c.handleAs){if(u("host-webworker")||u("host-node"))return q.reject(a.mixin(Error(),{message:"The responseType 'image' is not supported in Web Workers or Node environment."}));c.preventCache&&(c.content=c.content||{},c.content["request.preventCache"]=Date.now());c.method="auto"}c.url=t.normalize(f);c.urlObj=new b(c.url);var e=w.makeDeferredCancellingPending();return k(A(c)).always(function(){B(e,!1,c,d)}),e.promise}var C,E=g.request,G=["COM_0056","COM_0057"],K=
0,L=function(){return null};return F._makeRequest=z,F._processRequest=B,F._disableCors=y,F._detectCors=A,F.setRequestPreCallback=function(a){C=a},F})},"dojo/request":function(){define(["./request/default!"],function(e){return e})},"dojo/request/default":function(){define(["exports","require","../has"],function(e,h,d){var a=d("config-requestProvider"),b;if(d("host-browser")||d("host-webworker"))b="./xhr";a||(a=b);e.getPlatformDefaultId=function(){return b};e.load=function(c,d,e,l){h(["platform"==c?
b:a],function(a){e(a)})}})},"esri/core/deferredUtils":function(){define(["dojo/Deferred"],function(e){var h={makeDeferredCancellingPending:function(){var d={},a=h._dfdCanceller.bind(null,d),a=new e(a);return d.deferred=a,a},_dfdCanceller:function(d){d=d.deferred?d.deferred:d;d.canceled=!0;var a=d._pendingDfd;d.isResolved()||!a||a.isResolved()||a.cancel();d._pendingDfd=null},_fixDfd:function(d){var a=d.then;return d.then=function(b,c,d){if(b){var e=b;b=function(a){return a&&a._argsArray?e.apply(null,
a):e(a)}}return a.call(this,b,c,d)},d},_resDfd:function(d,a,b){var c=a.length;1===c?b?d.reject(a[0]):d.resolve(a[0]):1<c?(a._argsArray=!0,d.resolve(a)):d.resolve()}};return h})},"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),function(e,h,d,a,b,c,m){e=k=function(a){function b(b){b=a.call(this)||this;return b.latestWkid=
null,b.wkid=null,b.wkt=null,b}return d(b,a),b.prototype.normalizeCtorArgs=function(a){return a&&"object"==typeof a?a:(b={},b["string"==typeof a?"wkt":"wkid"]=a,b);var b},Object.defineProperty(b.prototype,"isWGS84",{get:function(){return 4326===this.wkid},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isWebMercator",{get:function(){return-1!==l.indexOf(this.wkid)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isGeographic",{get:function(){return m.isGeographic(this)},
enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isWrappable",{get:function(){return-1!==g.indexOf(this.wkid)},enumerable:!0,configurable:!0}),b.prototype.writeWkt=function(a,b){this.wkid||(b.wkt=a)},b.prototype.clone=function(){if(this===k.WGS84)return k.WGS84;if(this===k.WebMercator)return k.WebMercator;var a=new k;return null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&
(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt),a},b.prototype.equals=function(a){if(a){if(this===a)return!0;if(null!=this.wkid||null!=a.wkid)return this.wkid===a.wkid||this.isWebMercator&&a.isWebMercator||null!=a.latestWkid&&this.wkid===a.latestWkid||null!=this.latestWkid&&a.wkid===this.latestWkid;if(this.wkt&&a.wkt)return this.wkt.toUpperCase()===a.wkt.toUpperCase()}return!1},b.fromJSON=function(a){if(!a)return null;if(a.wkid){if(102100===a.wkid)return k.WebMercator;if(4326===
a.wkid)return k.WGS84}var b=new k;return b.read(a),b},b}(c.declared(b));e.WGS84=null;e.WebMercator=null;a([c.property({dependsOn:["wkid"],readOnly:!0})],e.prototype,"isWGS84",null);a([c.property({dependsOn:["wkid"],readOnly:!0})],e.prototype,"isWebMercator",null);a([c.property({dependsOn:["wkid","wkt"],readOnly:!0})],e.prototype,"isGeographic",null);a([c.property({dependsOn:["wkid"],readOnly:!0})],e.prototype,"isWrappable",null);a([c.property({json:{write:!0}})],e.prototype,"latestWkid",void 0);a([c.property({json:{write:!0}})],
e.prototype,"wkid",void 0);a([c.property()],e.prototype,"wkt",void 0);a([c.writer("wkt")],e.prototype,"writeWkt",null);a([c.property({json:{write:!0}})],e.prototype,"vcsWkid",void 0);a([c.property({json:{write:!0}})],e.prototype,"latestVcsWkid",void 0);e=k=a([c.subclass("esri.SpatialReference")],e);e.WGS84=new e(4326);e.WebMercator=new e({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(e.WGS84),Object.freeze(e.WebMercator));var k,l=[102113,102100,3857,3785],g=[102113,102100,3857,3785,
4326];return e})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/read ./accessorSupport/write ./accessorSupport/decorators".split(" "),function(e,h,d,a,b,c,m,k,l){function g(a,b){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var g=new this;return g.read(a,b),g}var n=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),
b.prototype.read=function(a,b){return m["default"](this,a,b),this},b.prototype.write=function(a,b){return k["default"](this,a||{},b)},b.prototype.toJSON=function(a){return this.write(null,a)},b}(l.declared(b));return n=a([l.subclass("esri.core.JSONSupport")],n),n.prototype.toJSON.isDefaultToJSON=!0,c.after(function(a){c.hasMixin(a,n)&&(a.fromJSON=g.bind(a))}),n})},"esri/core/accessorSupport/read":function(){define("require exports dojo/_base/lang ./utils ./get ./extensions/serializableProperty".split(" "),
function(e,h,d,a,b,c){function m(d,g,e){void 0===e&&(e=k);for(var l=a.getProperties(d),n=l.metadatas,m={},h=0,q=Object.getOwnPropertyNames(g);h<q.length;h++){var v=m,x=n,f=q[h],p=g,z=e,y=c.originSpecificReadPropertyDefinition(x[f],z);y&&(!y.read||!1!==y.read.enabled&&!y.read.source)&&(v[f]=!0);for(var A=0,B=Object.getOwnPropertyNames(x);A<B.length;A++){var D=B[A],y=c.originSpecificReadPropertyDefinition(x[D],z),F;a:{F=f;var C=p;if(y&&y.read&&!1!==y.read.enabled&&y.read.source)if(y=y.read.source,"string"==
typeof y){if(y===F||-1<y.indexOf(".")&&0===y.indexOf(F)&&b.exists(y,C)){F=!0;break a}}else for(var E=0;E<y.length;E++){var G=y[E];if(G===F||-1<G.indexOf(".")&&0===G.indexOf(F)&&b.exists(G,C)){F=!0;break a}}F=!1}F&&(v[D]=!0)}}l.setDefaultOrigin(e.origin);h=0;for(m=Object.getOwnPropertyNames(m);h<m.length;h++)q=m[h],x=(v=c.originSpecificReadPropertyDefinition(n[q],e).read)&&v.source,f=void 0,f=x&&"string"==typeof x?b.valueOf(g,x):g[q],v&&v.reader&&(f=v.reader.call(d,f,g,e)),void 0!==f&&l.set(q,f);l.setDefaultOrigin("user")}
Object.defineProperty(h,"__esModule",{value:!0});var k={origin:"service"};h.read=m;h.readLoadable=function(a,b,c,e){void 0===e&&(e=k);b=d.mixin({},e,{messages:[]});c(b);b.messages.forEach(function(b){"warning"!==b.type||a.loaded?e&&e.messages.push(b):a.loadWarnings.push(b)})};h["default"]=m})},"esri/core/accessorSupport/write":function(){define(["require","exports","./PropertyOrigin","./utils","./extensions/serializableProperty"],function(e,h,d,a,b){function c(a,b,g,c,e,m){if(!c||!c.write)return!1;
var k=a.get(g);if(void 0===k)return!1;!e&&c.write.overridePolicy&&(a=c.write.overridePolicy.call(a,k,g,m),void 0!==a&&(e=a));return(e||(e=c.write),!e||!1===e.enabled)||!e.allowNull&&null===k||!e.ignoreOrigin&&m&&m.origin&&b.store.originOf(g)<d.nameToId(m.origin)?!1:!0}function m(e,l,g){if(e&&"function"==typeof e.toJSON&&(!e.toJSON.isDefaultToJSON||!e.write))return a.merge(l,e.toJSON());var k=a.getProperties(e),m=k.metadatas,r;for(r in m){var t=b.originSpecificWritePropertyDefinition(m[r],g);if(c(e,
k,r,t,null,g)){var h=e.get(r),q={},t=(t.write.writer.call(e,h,q,t.write.target||r,g),q);0<Object.keys(t).length&&(l=a.merge(l,t),g&&g.writtenProperties&&g.writtenProperties.push({target:e,propName:r,oldOrigin:d.idToReadableName(k.store.originOf(r)),newOrigin:g.origin}))}}return l}Object.defineProperty(h,"__esModule",{value:!0});h.willPropertyWrite=function(d,e,g,n){var k=a.getProperties(d),l=b.originSpecificWritePropertyDefinition(k.metadatas[e],n);return l?c(d,k,e,l,g,n):!1};h.write=m;h["default"]=
m})},"esri/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});h.isGeographic=function(a){return a.wkid?null==d[a.wkid]:a.wkt?/^\s*GEOGCS/i.test(a.wkt):!1};h.getInfo=function(b){return b.wkid?a[b.wkid]:null};e=[-2.0037508342788905E7,2.0037508342788905E7];h=[-2.0037508342787E7,2.0037508342787E7];var a={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:e,origin:h,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:e,origin:h,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:e,origin:h,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:e,origin:h,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}}})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var e,h={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,
2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,
3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,
3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,
3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,
5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,
6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,
6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,
6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,
6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,
7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,
7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,
26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,54034:0,
65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,
103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,
103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,
103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,
103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(e=2E3;2045>=e;e++)h[e]=0;for(e=2056;2065>=e;e++)h[e]=0;for(e=2067;2135>=e;e++)h[e]=0;for(e=2137;2154>=e;e++)h[e]=0;for(e=2161;2170>=e;e++)h[e]=0;for(e=2172;2193>=e;e++)h[e]=0;for(e=2195;2198>=e;e++)h[e]=0;for(e=2200;2203>=e;e++)h[e]=0;for(e=2205;2217>=e;e++)h[e]=0;for(e=2222;2224>=e;e++)h[e]=1;for(e=2225;2250>=e;e++)h[e]=2;for(e=2251;2253>=
e;e++)h[e]=1;for(e=2257;2264>=e;e++)h[e]=2;for(e=2274;2279>=e;e++)h[e]=2;for(e=2280;2282>=e;e++)h[e]=1;for(e=2283;2289>=e;e++)h[e]=2;for(e=2290;2292>=e;e++)h[e]=0;for(e=2308;2313>=e;e++)h[e]=0;for(e=2315;2491>=e;e++)h[e]=0;for(e=2494;2866>=e;e++)h[e]=0;for(e=2867;2869>=e;e++)h[e]=1;for(e=2870;2888>=e;e++)h[e]=2;for(e=2891;2895>=e;e++)h[e]=2;for(e=2896;2898>=e;e++)h[e]=1;for(e=2902;2908>=e;e++)h[e]=2;for(e=2915;2920>=e;e++)h[e]=2;for(e=2921;2923>=e;e++)h[e]=1;for(e=2924;2930>=e;e++)h[e]=2;for(e=2931;2962>=
e;e++)h[e]=0;for(e=2964;2968>=e;e++)h[e]=2;for(e=2969;2973>=e;e++)h[e]=0;for(e=2975;2991>=e;e++)h[e]=0;for(e=2995;3051>=e;e++)h[e]=0;for(e=3054;3079>=e;e++)h[e]=0;for(e=3081;3088>=e;e++)h[e]=0;for(e=3092;3101>=e;e++)h[e]=0;for(e=3106;3138>=e;e++)h[e]=0;for(e=3146;3151>=e;e++)h[e]=0;for(e=3153;3166>=e;e++)h[e]=0;for(e=3168;3172>=e;e++)h[e]=0;for(e=3174;3203>=e;e++)h[e]=0;for(e=3294;3358>=e;e++)h[e]=0;for(e=3367;3403>=e;e++)h[e]=0;for(e=3408;3416>=e;e++)h[e]=0;for(e=3417;3438>=e;e++)h[e]=2;for(e=3441;3446>=
e;e++)h[e]=2;for(e=3447;3450>=e;e++)h[e]=0;for(e=3451;3459>=e;e++)h[e]=2;for(e=3460;3478>=e;e++)h[e]=0;for(e=3554;3559>=e;e++)h[e]=0;for(e=3560;3570>=e;e++)h[e]=2;for(e=3571;3581>=e;e++)h[e]=0;for(e=3594;3597>=e;e++)h[e]=0;for(e=3601;3604>=e;e++)h[e]=0;for(e=3637;3639>=e;e++)h[e]=0;for(e=3665;3667>=e;e++)h[e]=0;for(e=3693;3695>=e;e++)h[e]=0;for(e=3701;3727>=e;e++)h[e]=0;for(e=3728;3739>=e;e++)h[e]=2;for(e=3740;3751>=e;e++)h[e]=0;for(e=3753;3760>=e;e++)h[e]=2;for(e=3761;3773>=e;e++)h[e]=0;for(e=3775;3777>=
e;e++)h[e]=0;for(e=3779;3781>=e;e++)h[e]=0;for(e=3783;3785>=e;e++)h[e]=0;for(e=3788;3791>=e;e++)h[e]=0;for(e=3797;3802>=e;e++)h[e]=0;for(e=3814;3816>=e;e++)h[e]=0;for(e=3825;3829>=e;e++)h[e]=0;for(e=3832;3841>=e;e++)h[e]=0;for(e=3844;3852>=e;e++)h[e]=0;for(e=3873;3885>=e;e++)h[e]=0;for(e=3890;3893>=e;e++)h[e]=0;for(e=3907;3912>=e;e++)h[e]=0;for(e=3942;3950>=e;e++)h[e]=0;for(e=3968;3970>=e;e++)h[e]=0;for(e=3973;3976>=e;e++)h[e]=0;for(e=3986;3989>=e;e++)h[e]=0;for(e=3994;3997>=e;e++)h[e]=0;for(e=4048;4051>=
e;e++)h[e]=0;for(e=4056;4063>=e;e++)h[e]=0;for(e=4093;4096>=e;e++)h[e]=0;for(e=4390;4398>=e;e++)h[e]=0;for(e=4399;4413>=e;e++)h[e]=2;for(e=4418;4433>=e;e++)h[e]=2;for(e=4455;4457>=e;e++)h[e]=2;for(e=4484;4489>=e;e++)h[e]=0;for(e=4491;4554>=e;e++)h[e]=0;for(e=4568;4589>=e;e++)h[e]=0;for(e=4652;4656>=e;e++)h[e]=0;for(e=4766;4800>=e;e++)h[e]=0;for(e=5014;5016>=e;e++)h[e]=0;for(e=5069;5072>=e;e++)h[e]=0;for(e=5105;5130>=e;e++)h[e]=0;for(e=5173;5188>=e;e++)h[e]=0;for(e=5253;5259>=e;e++)h[e]=0;for(e=5269;5275>=
e;e++)h[e]=0;for(e=5292;5311>=e;e++)h[e]=0;for(e=5329;5331>=e;e++)h[e]=0;for(e=5343;5349>=e;e++)h[e]=0;for(e=5355;5357>=e;e++)h[e]=0;for(e=5387;5389>=e;e++)h[e]=0;for(e=5459;5463>=e;e++)h[e]=0;for(e=5479;5482>=e;e++)h[e]=0;for(e=5518;5520>=e;e++)h[e]=0;for(e=5530;5539>=e;e++)h[e]=0;for(e=5550;5552>=e;e++)h[e]=0;for(e=5562;5583>=e;e++)h[e]=0;for(e=5623;5625>=e;e++)h[e]=2;for(e=5631;5639>=e;e++)h[e]=0;for(e=5649;5653>=e;e++)h[e]=0;for(e=5663;5680>=e;e++)h[e]=0;for(e=5682;5685>=e;e++)h[e]=0;for(e=5875;5877>=
e;e++)h[e]=0;for(e=5921;5940>=e;e++)h[e]=0;for(e=6050;6125>=e;e++)h[e]=0;for(e=6244;6275>=e;e++)h[e]=0;for(e=6328;6348>=e;e++)h[e]=0;for(e=6350;6356>=e;e++)h[e]=0;for(e=6366;6372>=e;e++)h[e]=0;for(e=6381;6387>=e;e++)h[e]=0;for(e=6393;6404>=e;e++)h[e]=0;for(e=6480;6483>=e;e++)h[e]=0;for(e=6511;6514>=e;e++)h[e]=0;for(e=6579;6581>=e;e++)h[e]=0;for(e=6619;6624>=e;e++)h[e]=0;for(e=6625;6627>=e;e++)h[e]=2;for(e=6628;6632>=e;e++)h[e]=0;for(e=6634;6637>=e;e++)h[e]=0;for(e=6669;6692>=e;e++)h[e]=0;for(e=6707;6709>=
e;e++)h[e]=0;for(e=6720;6723>=e;e++)h[e]=0;for(e=6732;6738>=e;e++)h[e]=0;for(e=6931;6933>=e;e++)h[e]=0;for(e=6956;6959>=e;e++)h[e]=0;for(e=7005;7007>=e;e++)h[e]=0;for(e=7057;7070>=e;e++)h[e]=2;for(e=7074;7082>=e;e++)h[e]=0;for(e=7109;7118>=e;e++)h[e]=0;for(e=7119;7127>=e;e++)h[e]=1;for(e=7374;7376>=e;e++)h[e]=0;for(e=7528;7586>=e;e++)h[e]=0;for(e=7587;7645>=e;e++)h[e]=2;for(e=7845;7859>=e;e++)h[e]=0;for(e=20002;20032>=e;e++)h[e]=0;for(e=20062;20092>=e;e++)h[e]=0;for(e=20135;20138>=e;e++)h[e]=0;for(e=
20248;20258>=e;e++)h[e]=0;for(e=20348;20358>=e;e++)h[e]=0;for(e=20436;20440>=e;e++)h[e]=0;for(e=20822;20824>=e;e++)h[e]=0;for(e=20934;20936>=e;e++)h[e]=0;for(e=21035;21037>=e;e++)h[e]=0;for(e=21095;21097>=e;e++)h[e]=0;for(e=21148;21150>=e;e++)h[e]=0;for(e=21413;21423>=e;e++)h[e]=0;for(e=21473;21483>=e;e++)h[e]=0;for(e=21780;21782>=e;e++)h[e]=0;for(e=21891;21894>=e;e++)h[e]=0;for(e=21896;21899>=e;e++)h[e]=0;for(e=22171;22177>=e;e++)h[e]=0;for(e=22181;22187>=e;e++)h[e]=0;for(e=22191;22197>=e;e++)h[e]=
0;for(e=22234;22236>=e;e++)h[e]=0;for(e=22521;22525>=e;e++)h[e]=0;for(e=22991;22994>=e;e++)h[e]=0;for(e=23028;23038>=e;e++)h[e]=0;for(e=23830;23853>=e;e++)h[e]=0;for(e=23866;23872>=e;e++)h[e]=0;for(e=23877;23884>=e;e++)h[e]=0;for(e=23886;23894>=e;e++)h[e]=0;for(e=23946;23948>=e;e++)h[e]=0;for(e=24311;24313>=e;e++)h[e]=0;for(e=24342;24347>=e;e++)h[e]=0;for(e=24370;24374>=e;e++)h[e]=10;for(e=24375;24381>=e;e++)h[e]=0;for(e=24718;24721>=e;e++)h[e]=0;for(e=24817;24821>=e;e++)h[e]=0;for(e=24877;24882>=
e;e++)h[e]=0;for(e=24891;24893>=e;e++)h[e]=0;for(e=25391;25395>=e;e++)h[e]=0;for(e=25828;25838>=e;e++)h[e]=0;for(e=26191;26195>=e;e++)h[e]=0;for(e=26391;26393>=e;e++)h[e]=0;for(e=26701;26722>=e;e++)h[e]=0;for(e=26729;26799>=e;e++)h[e]=2;for(e=26801;26803>=e;e++)h[e]=2;for(e=26811;26813>=e;e++)h[e]=2;for(e=26847;26870>=e;e++)h[e]=2;for(e=26891;26899>=e;e++)h[e]=0;for(e=26901;26923>=e;e++)h[e]=0;for(e=26929;26946>=e;e++)h[e]=0;for(e=26948;26998>=e;e++)h[e]=0;for(e=27037;27040>=e;e++)h[e]=0;for(e=27205;27232>=
e;e++)h[e]=0;for(e=27258;27260>=e;e++)h[e]=0;for(e=27391;27398>=e;e++)h[e]=0;for(e=27561;27564>=e;e++)h[e]=0;for(e=27571;27574>=e;e++)h[e]=0;for(e=27581;27584>=e;e++)h[e]=0;for(e=27591;27594>=e;e++)h[e]=0;for(e=28191;28193>=e;e++)h[e]=0;for(e=28348;28358>=e;e++)h[e]=0;for(e=28402;28432>=e;e++)h[e]=0;for(e=28462;28492>=e;e++)h[e]=0;for(e=29118;29122>=e;e++)h[e]=0;for(e=29168;29172>=e;e++)h[e]=0;for(e=29177;29185>=e;e++)h[e]=0;for(e=29187;29195>=e;e++)h[e]=0;for(e=29900;29903>=e;e++)h[e]=0;for(e=30161;30179>=
e;e++)h[e]=0;for(e=30491;30494>=e;e++)h[e]=0;for(e=30729;30732>=e;e++)h[e]=0;for(e=31251;31259>=e;e++)h[e]=0;for(e=31265;31268>=e;e++)h[e]=0;for(e=31275;31279>=e;e++)h[e]=0;for(e=31281;31297>=e;e++)h[e]=0;for(e=31461;31469>=e;e++)h[e]=0;for(e=31491;31495>=e;e++)h[e]=0;for(e=31917;31922>=e;e++)h[e]=0;for(e=31965;32E3>=e;e++)h[e]=0;for(e=32001;32003>=e;e++)h[e]=2;for(e=32005;32031>=e;e++)h[e]=2;for(e=32033;32060>=e;e++)h[e]=2;for(e=32064;32067>=e;e++)h[e]=2;for(e=32074;32077>=e;e++)h[e]=2;for(e=32081;32086>=
e;e++)h[e]=0;for(e=32107;32130>=e;e++)h[e]=0;for(e=32133;32158>=e;e++)h[e]=0;for(e=32164;32167>=e;e++)h[e]=2;for(e=32180;32199>=e;e++)h[e]=0;for(e=32201;32260>=e;e++)h[e]=0;for(e=32301;32360>=e;e++)h[e]=0;for(e=32601;32662>=e;e++)h[e]=0;for(e=32664;32667>=e;e++)h[e]=2;for(e=32701;32761>=e;e++)h[e]=0;for(e=53001;53004>=e;e++)h[e]=0;for(e=53008;53019>=e;e++)h[e]=0;for(e=53021;53032>=e;e++)h[e]=0;for(e=53042;53046>=e;e++)h[e]=0;for(e=53074;53080>=e;e++)h[e]=0;for(e=54001;54004>=e;e++)h[e]=0;for(e=54008;54019>=
e;e++)h[e]=0;for(e=54021;54032>=e;e++)h[e]=0;for(e=54042;54046>=e;e++)h[e]=0;for(e=54048;54053>=e;e++)h[e]=0;for(e=54074;54080>=e;e++)h[e]=0;for(e=102001;102040>=e;e++)h[e]=0;for(e=102042;102063>=e;e++)h[e]=0;for(e=102065;102067>=e;e++)h[e]=0;for(e=102070;102117>=e;e++)h[e]=0;for(e=102122;102216>=e;e++)h[e]=0;for(e=102221;102377>=e;e++)h[e]=0;for(e=102382;102388>=e;e++)h[e]=0;for(e=102389;102398>=e;e++)h[e]=2;for(e=102399;102444>=e;e++)h[e]=0;for(e=102445;102447>=e;e++)h[e]=2;for(e=102448;102458>=
e;e++)h[e]=0;for(e=102459;102468>=e;e++)h[e]=2;for(e=102469;102496>=e;e++)h[e]=0;for(e=102500;102519>=e;e++)h[e]=1;for(e=102520;102524>=e;e++)h[e]=0;for(e=102525;102529>=e;e++)h[e]=2;for(e=102530;102561>=e;e++)h[e]=0;for(e=102570;102588>=e;e++)h[e]=0;for(e=102590;102598>=e;e++)h[e]=0;for(e=102601;102603>=e;e++)h[e]=0;for(e=102605;102628>=e;e++)h[e]=0;for(e=102629;102646>=e;e++)h[e]=2;for(e=102648;102700>=e;e++)h[e]=2;for(e=102701;102703>=e;e++)h[e]=0;for(e=102707;102730>=e;e++)h[e]=2;for(e=102733;102758>=
e;e++)h[e]=2;for(e=102767;102798>=e;e++)h[e]=0;for(e=102965;102969>=e;e++)h[e]=0;for(e=102971;102973>=e;e++)h[e]=0;for(e=102975;102989>=e;e++)h[e]=0;for(e=102990;102992>=e;e++)h[e]=1;for(e=102997;103002>=e;e++)h[e]=0;for(e=103003;103008>=e;e++)h[e]=2;for(e=103009;103011>=e;e++)h[e]=0;for(e=103012;103014>=e;e++)h[e]=2;for(e=103019;103021>=e;e++)h[e]=0;for(e=103022;103024>=e;e++)h[e]=2;for(e=103029;103031>=e;e++)h[e]=0;for(e=103032;103034>=e;e++)h[e]=2;for(e=103065;103068>=e;e++)h[e]=0;for(e=103074;103076>=
e;e++)h[e]=0;for(e=103077;103079>=e;e++)h[e]=1;for(e=103080;103082>=e;e++)h[e]=0;for(e=103083;103085>=e;e++)h[e]=2;for(e=103090;103093>=e;e++)h[e]=0;for(e=103097;103099>=e;e++)h[e]=0;for(e=103100;103102>=e;e++)h[e]=2;for(e=103107;103109>=e;e++)h[e]=0;for(e=103110;103112>=e;e++)h[e]=2;for(e=103113;103116>=e;e++)h[e]=0;for(e=103117;103120>=e;e++)h[e]=2;for(e=103153;103157>=e;e++)h[e]=0;for(e=103158;103162>=e;e++)h[e]=2;for(e=103163;103165>=e;e++)h[e]=0;for(e=103166;103168>=e;e++)h[e]=1;for(e=103169;103171>=
e;e++)h[e]=2;for(e=103186;103188>=e;e++)h[e]=0;for(e=103189;103191>=e;e++)h[e]=2;for(e=103192;103195>=e;e++)h[e]=0;for(e=103196;103199>=e;e++)h[e]=2;for(e=103200;103224>=e;e++)h[e]=0;for(e=103225;103227>=e;e++)h[e]=1;for(e=103232;103237>=e;e++)h[e]=0;for(e=103238;103243>=e;e++)h[e]=2;for(e=103244;103246>=e;e++)h[e]=0;for(e=103247;103249>=e;e++)h[e]=2;for(e=103254;103256>=e;e++)h[e]=0;for(e=103257;103259>=e;e++)h[e]=2;for(e=103264;103266>=e;e++)h[e]=0;for(e=103267;103269>=e;e++)h[e]=2;for(e=103300;103375>=
e;e++)h[e]=0;for(e=103381;103383>=e;e++)h[e]=0;for(e=103384;103386>=e;e++)h[e]=1;for(e=103387;103389>=e;e++)h[e]=0;for(e=103390;103392>=e;e++)h[e]=2;for(e=103397;103399>=e;e++)h[e]=0;for(e=103400;103471>=e;e++)h[e]=2;for(e=103476;103478>=e;e++)h[e]=0;for(e=103479;103481>=e;e++)h[e]=2;for(e=103486;103488>=e;e++)h[e]=0;for(e=103489;103491>=e;e++)h[e]=2;for(e=103492;103495>=e;e++)h[e]=0;for(e=103496;103499>=e;e++)h[e]=2;for(e=103528;103543>=e;e++)h[e]=0;for(e=103544;103548>=e;e++)h[e]=2;for(e=103549;103551>=
e;e++)h[e]=0;for(e=103552;103554>=e;e++)h[e]=1;for(e=103555;103557>=e;e++)h[e]=2;for(e=103558;103560>=e;e++)h[e]=0;for(e=103571;103573>=e;e++)h[e]=0;for(e=103574;103576>=e;e++)h[e]=2;for(e=103577;103580>=e;e++)h[e]=0;for(e=103581;103583>=e;e++)h[e]=2;for(e=103600;103694>=e;e++)h[e]=0;for(e=103700;103793>=e;e++)h[e]=2;for(e=103794;103871>=e;e++)h[e]=0;for(e=103900;103971>=e;e++)h[e]=2;return h})},"esri/geometry/Extent":function(){define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./support/webMercatorUtils ./support/mathUtils ./support/spatialReferenceUtils".split(" "),
function(e,h,d,a,b,c,m,k){var l=a.createSubclass({declaredClass:"esri.geometry.Extent",type:"extent",normalizeCtorArgs:function(a,b,c,k,l){return this.isSR(a)?{spatialReference:a,xmin:0,ymin:0,xmax:0,ymax:0}:e.isObject(a)?(a.spatialReference=null!=a.spatialReference?a.spatialReference:d.WGS84,a):{xmin:a,ymin:b,xmax:c,ymax:k,spatialReference:null!=l?l:d.WGS84}},properties:{cache:{dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax".split(" ")},center:{readOnly:!0,dependsOn:["cache"],get:function(a){return a||
(a=new b({spatialReference:this.spatialReference})),a.x=.5*(this.xmin+this.xmax),a.y=.5*(this.ymin+this.ymax),this.hasZ&&(a.z=.5*(this.zmin+this.zmax)),this.hasM&&(a.m=.5*(this.mmin+this.mmax)),a}},extent:{readOnly:!0,dependsOn:["cache"],get:function(){return this.clone()}},hasM:{readOnly:!0,dependsOn:["mmin","mmax"],get:function(){return null!=this.mmin&&null!=this.mmax}},hasZ:{readOnly:!0,dependsOn:["zmin","zmax"],get:function(){return null!=this.zmin&&null!=this.zmax}},height:{readOnly:!0,dependsOn:["ymin",
"ymax"],get:function(){return Math.abs(this.ymax-this.ymin)}},width:{readOnly:!0,dependsOn:["xmin","xmax"],get:function(){return Math.abs(this.xmax-this.xmin)}},xmin:0,ymin:0,mmin:void 0,zmin:void 0,xmax:0,ymax:0,mmax:void 0,zmax:void 0},centerAt:function(a){var b=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-b.x,a.y-b.y,a.z-b.z):this.offset(a.x-b.x,a.y-b.y)},clone:function(){var a=new l;return a.xmin=this.xmin,a.ymin=this.ymin,a.xmax=this.xmax,a.ymax=this.ymax,a.spatialReference=this.spatialReference,
null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax),null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax),a},contains:function(a){if(!a)return!1;var g=a.type;if("point"===g){var d,g=this.spatialReference,e=a.spatialReference,k=a.x,l=a.y;a=a.z;return g&&e&&!g.equals(e)&&c.canProject(g,e)&&(d=g.isWebMercator?b.lngLatToXY(k,l):b.xyToLngLat(k,l,!0),k=d[0],l=d[1]),k>=this.xmin&&k<=this.xmax&&l>=this.ymin&&l<=this.ymax?null!=a&&this.hasZ?a>=this.zmin&&a<=this.zmax:!0:!1}return"extent"===g?this._containsExtent(a):
!1},equals:function(a){if(!a)return!1;var b=this.spatialReference;if(!b.equals(a.spatialReference)){if(!c.canProject(a.spatialReference,b))return!1;a=c.project(a,b)}return this.xmin===a.xmin&&this.ymin===a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&this.mmax===a.mmax},expand:function(a){a=.5*(1-a);var b=this.width*a,g=this.height*a;if(this.xmin+=b,this.ymin+=g,this.xmax-=b,this.ymax-=g,this.hasZ)b=(this.zmax-this.zmin)*a,this.zmin+=b,
this.zmax-=b;this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this},intersects:function(a){if(!a)return!1;var b=a.type,g=this.spatialReference,d=a.spatialReference;switch(g&&d&&!g.equals(d)&&c.canProject(g,d)&&(a=g.isWebMercator?c.geographicToWebMercator(a):c.webMercatorToGeographic(a,!0)),b){case "point":return this.contains(a);case "multipoint":return this._intersectsMultipoint(a);case "extent":return this._intersectsExtent(a);case "polygon":return this._intersectsPolygon(a);
case "polyline":return this._intersectsPolyline(a)}},normalize:function(){var a=this._normalize(!1,!0);return Array.isArray(a)||(a=[a]),a},offset:function(a,b,c){return this.xmin+=a,this.ymin+=b,this.xmax+=a,this.ymax+=b,null!=c&&(this.zmin+=c,this.zmax+=c),this},shiftCentralMeridian:function(){return this._normalize(!0)},toJSON:function(){var a=this.spatialReference,a={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax,spatialReference:a&&a.toJSON()};return this.hasZ&&(a.zmin=this.zmin,
a.zmax=this.zmax),this.hasM&&(a.mmax=this.mmax,a.mmin=this.mmin),a},union:function(a){function b(a,b,g){return null==b?g:null==g?b:a(b,g)}return this.xmin=Math.min(this.xmin,a.xmin),this.ymin=Math.min(this.ymin,a.ymin),this.xmax=Math.max(this.xmax,a.xmax),this.ymax=Math.max(this.ymax,a.ymax),(this.hasZ||a.hasZ)&&(this.zmin=b(Math.min,this.zmin,a.zmin),this.zmax=b(Math.max,this.zmax,a.zmax)),(this.hasM||a.hasM)&&(this.mmin=b(Math.min,this.mmin,a.mmin),this.mmax=b(Math.max,this.mmax,a.mmax)),this},
intersection:function(a){function b(a,b,g){return null==b?g:null==g?b:a(b,g)}return this._intersectsExtent(a)?(this.xmin=Math.max(this.xmin,a.xmin),this.ymin=Math.max(this.ymin,a.ymin),this.xmax=Math.min(this.xmax,a.xmax),this.ymax=Math.min(this.ymax,a.ymax),(this.hasZ||a.hasZ)&&(this.zmin=b(Math.max,this.zmin,a.zmin),this.zmax=b(Math.min,this.zmax,a.zmax)),(this.hasM||a.hasM)&&(this.mmin=b(Math.max,this.mmin,a.mmin),this.mmax=b(Math.min,this.mmax,a.mmax)),this):null},_containsExtent:function(a){var c=
a.xmin,g=a.ymin,d=a.zmin,e=a.xmax,k=a.ymax,l=a.zmax;a=a.spatialReference;return null!=d&&this.hasZ?this.contains(new b(c,g,d,a))&&this.contains(new b(c,k,d,a))&&this.contains(new b(e,k,d,a))&&this.contains(new b(e,g,d,a))&&this.contains(new b(c,g,l,a))&&this.contains(new b(c,k,l,a))&&this.contains(new b(e,k,l,a))&&this.contains(new b(e,g,l,a)):this.contains(new b(c,g,a))&&this.contains(new b(c,k,a))&&this.contains(new b(e,k,a))&&this.contains(new b(e,g,a))},_intersectsMultipoint:function(a){var b,
c=a.points.length;for(b=0;c>b;b++)if(this.contains(a.getPoint(b)))return!0;return!1},_intersectsExtent:function(a){var b,c,g,d=this.hasZ&&a.hasZ;if(this.xmin<=a.xmin){if(b=a.xmin,this.xmax<b)return!1}else if(b=this.xmin,a.xmax<b)return!1;if(this.ymin<=a.ymin){if(c=a.ymin,this.ymax<c)return!1}else if(c=this.ymin,a.ymax<c)return!1;if(d&&a.hasZ)if(this.zmin<=a.zmin){if(g=a.zmin,this.zmax<g)return!1}else if(g=this.zmin,a.zmax<g)return!1;return!0},_intersectsPolygon:function(a){var c,g,d;c=[this.xmin,
this.ymax];d=[this.xmax,this.ymax];var e=[this.xmin,this.ymin],k=[this.xmax,this.ymin],l=[c,d,e,k],e=[[e,c],[c,d],[d,k],[k,e]],k=a.rings,m=k.length,x=new b(0,0,this.spatialReference);d=l.length;for(c=0;d>c;c++)if(x.x=l[c][0],x.y=l[c][1],a.contains(x))return!0;var x={x:0,y:0,spatialReference:a.spatialReference,type:"point"},f,p;for(c=0;m>c;c++)if(g=k[c],d=g.length){if(f=g[0],x.x=f[0],x.y=f[1],this.contains(x))return!0;for(a=1;d>a;a++){if(p=g[a],x.x=p[0],x.y=p[1],this.contains(x)||this._intersectsLine([f,
p],e))return!0;f=p}}return!1},_intersectsPolyline:function(a){var b,c,g,d,e,k=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],l=a.paths,m=l.length,f={x:0,y:0,spatialReference:a.spatialReference,type:"point"};for(a=0;m>a;a++)if(c=l[a],g=c.length){if(d=c[0],f.x=d[0],f.y=d[1],this.contains(f))return!0;for(b=1;g>b;b++){if(e=c[b],f.x=e[0],f.y=e[1],this.contains(f)||
this._intersectsLine([d,e],k))return!0;d=e}}return!1},_intersectsLine:function(a,b){var c,g=m._getLineIntersection2,d=b.length;for(c=0;d>c;c++)if(g(a,b[c]))return!0;return!1},_shiftCM:function(a){var b=this.spatialReference;if(a=a||k.getInfo(b)){var g=this._getCM(a);if(g){var e=b.isWebMercator?c.webMercatorToGeographic(g):g;this.xmin-=g.x;this.xmax-=g.x;b.isWebMercator||(e.x=this._normalizeX(e.x,a).x);this.spatialReference=new d(h.substitute({Central_Meridian:e.x},4326===b.wkid?a.altTemplate:a.wkTemplate))}}return this},
_getCM:function(a){var b,c=a.valid[0];a=a.valid[1];var g=this.xmin,d=this.xmax;return g>=c&&a>=g&&d>=c&&a>=d||(b=this.center),b},_normalize:function(a,b,c){var g=this.spatialReference;if(g&&(c=c||k.getInfo(g))){var d=this._getParts(c).map(function(a){return a.extent});if(2<d.length)return a?this._shiftCM(c):this.set({xmin:c.valid[0],xmax:c.valid[1]});if(2===d.length){if(a)return this._shiftCM(c);if(b)return d;var e=!0,l=!0;return d.map(function(a){a.hasZ||(e=!1);a.hasM||(l=!1)}),{rings:d.map(function(a){var b=
[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(e)for(var f=(a.zmax-a.zmin)/2,c=0;c<b.length;c++)b[c].push(f);if(l)for(a=(a.mmax-a.mmin)/2,c=0;c<b.length;c++)b[c].push(a);return b}),hasZ:e,hasM:l,spatialReference:g}}return d[0]||this}return this},_getParts:function(a){var b=this.cache._parts;if(!b){var b=[],c,g,d,e,m=this.xmin,v=this.xmax,x=this.ymin,f=this.ymax,p=this.spatialReference,h=this.width,y=m,A=v,B=0,D=0;if(a=a||k.getInfo(p),g=a.valid[0],d=a.valid[1],
c=this._normalizeX(m,a),m=c.x,B=c.frameId,c=this._normalizeX(v,a),v=c.x,D=c.frameId,e=m===v&&0<h,h>2*d){a=new l(A>y?m:v,x,d,f,p);m=new l(g,x,A>y?v:m,f,p);d=new l(0,x,d,f,p);x=new l(g,x,0,f,p);f=[];p=[];a.contains(d)&&f.push(B);a.contains(x)&&p.push(B);m.contains(d)&&f.push(D);m.contains(x)&&p.push(D);for(g=B+1;D>g;g++)f.push(g),p.push(g);b.push({extent:a,frameIds:[B]},{extent:m,frameIds:[D]},{extent:d,frameIds:f},{extent:x,frameIds:p})}else m>v||e?b.push({extent:new l(m,x,d,f,p),frameIds:[B]},{extent:new l(g,
x,v,f,p),frameIds:[D]}):b.push({extent:new l(m,x,v,f,p),frameIds:[B]});this.cache._parts=b}D=this.hasZ;g=this.hasM;if(D||g)for(B={},D&&(B.zmin=this.zmin,B.zmax=this.zmax),g&&(B.mmin=this.mmin,B.mmax=this.mmax),D=0;D<b.length;D++)b[D].extent.set(B);return b},_normalizeX:function(a,b){var c,g=0,d=b.valid[0];b=b.valid[1];var e=2*b;return a>b?(c=Math.ceil(Math.abs(a-b)/e),a-=c*e,g=c):d>a&&(c=Math.ceil(Math.abs(a-d)/e),a+=c*e,g=-c),{x:a,frameId:g}}});return l})},"esri/geometry/Geometry":function(){define(["../core/JSONSupport",
"./SpatialReference"],function(e,h){return e.createSubclass({declaredClass:"esri.geometry.Geometry",type:null,properties:{cache:{value:null,readOnly:!0,dependsOn:["spatialReference"],get:function(){return{}}},extent:{value:null,readOnly:!0,dependsOn:["spatialReference"]},hasM:!1,hasZ:!1,spatialReference:h.WGS84},isSR:function(d){return d&&("esri.SpatialReference"===d.declaredClass||null!=d.wkid)},clone:function(){return console.warn(".clone() is not implemented for "+this.declaredClass),null},toJSON:function(){return console.warn(".toJSON() is not implemented for "+
this.declaredClass),null},clearCache:function(){this.notifyChange("cache")},getCacheValue:function(d){return this.cache[d]},setCacheValue:function(d,a){this.cache[d]=a}})})},"esri/geometry/Point":function(){define(["./SpatialReference","./Geometry","./support/webMercatorUtils","./support/spatialReferenceUtils"],function(e,h,d,a){var b=[0,0],c=d.lngLatToXY,m=d.xyToLngLat,k=h.createSubclass({declaredClass:"esri.geometry.Point",normalizeCtorArgs:function(a,g,d,k,m){var l;if(Array.isArray(a))l=a,m=g,
a=l[0],g=l[1],d=l[2],k=l[3];else if(a&&"object"==typeof a){if(l=a,a=null!=l.x?l.x:l.longitude,g=null!=l.y?l.y:l.latitude,d=null!=l.z?l.z:l.altitude,k=l.m,m=l.spatialReference,m&&"esri.SpatialReference"!==m.declaredClass&&(m=new e(m)),!l.declaredClass&&m&&m.isWebMercator&&null!=l.longitude&&null!=l.latitude)g=c(l.longitude,l.latitude,!1,b),a=g[0],g=g[1]}else this.isSR(d)?(m=d,d=null):this.isSR(k)&&(m=k,k=null);a={x:a,y:g};return null!=m&&(a.spatialReference=m),null!=d&&(a.z=d),null!=k&&(a.m=k),a},
properties:{cache:{dependsOn:["x","y","z","m"]},hasM:{dependsOn:["m"],get:function(){return void 0!==this.m},set:function(a){var b=this._get("hasM");a!==b&&(this._set("m",a?0:void 0),this._set("hasM",a))}},hasZ:{dependsOn:["z"],get:function(){return void 0!==this.z},set:function(a){var b=this._get("hasZ");a!==b&&(this._set("z",a?0:void 0),this._set("hasZ",a))}},latitude:{dependsOn:["y"],get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return m(this.x,this.y,!1,b)[1];if(4326===
a.wkid)return this._get("y")}return null},set:function(a){var g=this._get("spatialReference");g&&(g.isWebMercator?this._set("y",c(this.x,a,!1,b)[1]):4326===g.wkid&&this._set("y",a),this._set("latitude",a))}},longitude:{dependsOn:["x"],get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return m(this._get("x"),this._get("y"),!1,b)[0];if(4326===a.wkid)return this._get("x")}return null},set:function(a){var g=this._get("spatialReference");g&&(g.isWebMercator?this._set("x",c(a,
this._get("y"),!1,b)[0]):4326===g.wkid&&this._set("x",a),this._set("longitude",a))}},x:0,y:0,z:void 0,m:void 0,type:"point"},clone:function(){var a=new k;return a.x=this.x,a.y=this.y,a.z=this.z,a.m=this.m,a.spatialReference=this.spatialReference,a},copy:function(a){return k.copy(a,this),this},equals:function(a){if(!a)return!1;var b=this.x,d=this.y,e=this.z,k=this.m,l=this.spatialReference,h=a.x,q=a.y,v=a.z,x=a.m;a=a.spatialReference;if(!l.equals(a)){if(l.isWebMercator&&4326===a.wkid)q=c(h,q);else{if(4326!==
l.wkid||!a.isWebMercator)return!1;q=m(h,q)}h=q[0];q=q[1];a=l}return b===h&&d===q&&e===v&&k===x&&l.wkid===a.wkid},offset:function(a,b,c){return this.x+=a,this.y+=b,null!=c&&this.hasZ&&(this.z+=c),this},normalize:function(){var b=this.x,c=this.spatialReference;if(c){var d=a.getInfo(c);if(d){var e,c=d.valid[0],d=d.valid[1],k=2*d;b>d?(e=Math.ceil(Math.abs(b-d)/k),b-=e*k):c>b&&(e=Math.ceil(Math.abs(b-c)/k),b+=e*k)}}return this._set("x",b),this},distance:function(a){return k.distance(this,a)},toArray:function(){var a=
this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:[this.x,this.y]},toJSON:function(){var a=this.spatialReference,b={x:this.x,y:this.y};return this.hasZ&&(b.z=this.z),this.hasM&&(b.m=this.m),b.spatialReference=a&&a.toJSON(),b}});return k.lngLatToXY=c,k.xyToLngLat=m,k.copy=function(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.m=a.m;b.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()},k.distance=function(a,
b){var c=a.x-b.x,g=a.y-b.y;a=a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(c*c+g*g+a*a)},k})},"esri/geometry/support/webMercatorUtils":function(){define(["require","exports","../SpatialReference"],function(e,h,d){function a(a,b,c,g,d){if("point"===a.type)b=b(a.x,a.y,g,u),d.x=b[0],d.y=b[1];else if("extent"===a.type)m=b(a.xmin,a.ymin,g,u),d.xmin=m[0],d.ymin=m[1],b=b(a.xmax,a.ymax,g,u),d.xmax=b[0],d.ymax=b[1];else if("polyline"===a.type||"polygon"===a.type){var e=(m="polyline"===a.type)?a.paths:a.rings,
f=[],p=void 0;for(a=0;a<e.length;a++){var k=e[a],p=[];f.push(p);for(var l=0;l<k.length;l++)p.push(b(k[l][0],k[l][1],g)),2<k[l].length&&p[l].push(k[l][2]),3<k[l].length&&p[l].push(k[l][3])}m?d.paths=f:d.rings=f}else if("multipoint"===a.type){m=a.points;e=[];for(a=0;a<m.length;a++)e[a]=b(m[a][0],m[a][1],g),2<m[a].length&&e[a].push(m[a][2]),3<m[a].length&&e[a].push(m[a][3]);d.points=e}return d.spatialReference=c,d;var m}function b(a,b){a=a&&(null!=a.wkid?a:a.spatialReference);b=b&&(null!=b.wkid?b:b.spatialReference);
return a&&b?b.equals(a)?!0:b.isWebMercator&&4326===a.wkid||a.isWebMercator&&4326===b.wkid:!1}function c(a,b,c,g){void 0===g&&(g=[0,0]);89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=n;return g[0]=a*n*k,g[1]=.5*k*Math.log((1+Math.sin(b))/(1-Math.sin(b))),g}function m(a,b,c,d){void 0===c&&(c=!1);void 0===d&&(d=[0,0]);a=a/k*g;return d[0]=c?a:a-360*Math.floor((a+180)/360),d[1]=(l/2-2*Math.atan(Math.exp(-1*b/k)))*g,d}Object.defineProperty(h,"__esModule",{value:!0});var k=6378137,l=3.141592653589793,
g=57.29577951308232,n=.017453292519943,u=[0,0];h.canProject=b;h.project=function(g,e){var k=g&&g.spatialReference;e=e&&(null!=e.wkid?e:e.spatialReference);return b(k,e)?k.equals(e)?g.clone():e.isWebMercator?a(g,c,d.WebMercator,!1,g.clone()):4326===e.wkid?a(g,m,d.WGS84,!1,g.clone()):null:null};h.lngLatToXY=c;h.xyToLngLat=m;h.geographicToWebMercator=function(b,g,e){return void 0===g&&(g=!1),void 0===e&&(e=b.clone()),a(b,c,d.WebMercator,g,e)};h.webMercatorToGeographic=function(b,c,g){return void 0===
c&&(c=!1),void 0===g&&(g=b.clone()),a(b,m,d.WGS84,c,g)}})},"esri/geometry/support/mathUtils":function(){define(["../Point"],function(e){function h(a,b){var c,d,g;return a instanceof e?(c=b.x-a.x,d=b.y-a.y,g=0,null!=a.z&&null!=b.z&&(g=a.z-b.z)):(c=b[0]-a[0],d=b[1]-a[1],g=0,null!=a[2]&&null!=b[2]&&(g=a[2]-b[2])),Math.sqrt(c*c+d*d+g*g)}function d(a,b,d){var c,g,k;return a instanceof e?(c=a.x+d*(b.x-a.x),g=a.y+d*(b.y-a.y),null!=a.z&&null!=b.z&&(k=a.z+d*(b.z-a.z)),new e(c,g,k)):(c=a[0]+d*(b[0]-a[0]),g=
a[1]+d*(b[1]-a[1]),2<a.length&&2<b.length?[c,g,a[2]+d*(b[2]-a[2])]:[c,g])}function a(a,b){return 1E-8>Math.abs(a-b)}function b(b,d,e,l){var c,k,m=a(b[0],d[0])?1E10:(b[1]-d[1])/(b[0]-d[0]),h=a(e[0],l[0])?1E10:(e[1]-l[1])/(e[0]-l[0]),t=b[1]-m*b[0],w=e[1]-h*e[0];if(a(m,h)){if(a(t,w)){if(a(b[0],d[0])){if(!(Math.min(b[1],d[1])<Math.max(e[1],l[1])||Math.max(b[1],d[1])>Math.min(e[1],l[1])))return null;k=(b[1]+d[1]+e[1]+l[1]-Math.min(b[1],d[1],e[1],l[1])-Math.max(b[1],d[1],e[1],l[1]))/2;c=(k-t)/m}else{if(!(Math.min(b[0],
d[0])<Math.max(e[0],l[0])||Math.max(b[0],d[0])>Math.min(e[0],l[0])))return null;c=(b[0]+d[0]+e[0]+l[0]-Math.min(b[0],d[0],e[0],l[0])-Math.max(b[0],d[0],e[0],l[0]))/2;k=m*c+t}return[c,k]}return null}return a(m,1E10)?(c=b[0],k=h*c+w):a(h,1E10)?(c=e[0],k=m*c+t):(c=-(t-w)/(m-h),k=b[1]===d[1]?b[1]:e[1]===l[1]?e[1]:m*c+t),[c,k]}return{getLength:h,_getLength:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},getPointOnLine:d,getMidpoint:function(a,b){return d(a,b,.5)},_equals:a,_getLineIntersection:b,
getLineIntersection:function(a,d,k,l,g){a=b([a.x,a.y],[d.x,d.y],[k.x,k.y],[l.x,l.y]);return a&&(a=new e(a[0],a[1],g)),a},_getLineIntersection2:function(a,b){var c,d,g,e,m=a[0],h=a[1],t=b[0],w=b[1];b=m[0];m=m[1];a=h[0];var h=h[1],q=t[0],v=t[1],t=w[0]-q,q=b-q,x=a-b,w=w[1]-v,v=m-v,f=h-m,p=w*x-t*f;return 0===p?!1:(c=(t*v-w*q)/p,d=(x*v-f*q)/p,0<=c&&1>=c&&0<=d&&1>=d?(g=b+c*(a-b),e=m+c*(h-m),[g,e]):!1)},_pointLineDistance:function(a,b){var c=b[0],d=b[1];b=c[0];var g=c[1],c=a[0];a=a[1];var e=d[0]-b,m=d[1]-
g,h=c-b,t=a-g,d=Math.sqrt,w=Math.pow,q=d(w(e,2)+w(m,2)),h=(h*e+t*m)/(q*q),g=g+h*m;return d(w(c-(b+h*e),2)+w(a-g,2))},getPathLength:function(a){for(var b=0,c=a.length,d=0;c-1>d;++d)b+=h(a[d],a[d+1]);return b},getPointOnPath:function(a,b){if(0>=b)return a[0];for(var c=0,e=a.length,g=0;e-1>g;++g){var m=h(a[g],a[g+1]);if(m>b-c)return d(a[g],a[g+1],(b-c)/m);c+=m}return a[e-1]}}})},"esri/layers/support/types":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});
h.isOfType=function(d,a){d=d.constructor._meta;if(!d||!d.bases)return!1;d=d.bases;var b=Array.isArray(a);return d.some(function(c){c=c.__accessorMetadata__;if(!c||!c.type||!c.type.value)return!1;c=c.type.value;return b?-1!==a.indexOf(c):c===a})}})},"esri/support/basemapUtils":function(){define("require exports ./basemapDefinitions ../core/accessorSupport/ensureType ../core/urlUtils ../core/Logger ../Basemap".split(" "),function(e,h,d,a,b,c,m){function k(f,b){var c;if("string"==typeof f){if(!(f in
d))return b=Object.keys(d).map(function(a){return'"'+a+'"'}).join(", "),x.warn("Unable to find basemap definition for: "+f+". Try one of these: "+b),null;b&&(c=b[f]);c||(c=m.fromId(f),b&&(b[f]=c))}else c=a["default"](m,f);return c}function l(a,b){return a.map(function(a){return b.find(function(f){var b=u(a);f=u(f);return b.type===f.type&&b.url===f.url})||a})}function g(a){return a?!a.loaded&&a.resourceInfo?r(a.resourceInfo):{baseLayers:n(a.baseLayers),referenceLayers:n(a.referenceLayers)}:null}function n(a){return(Array.isArray(a)?
a:a.toArray()).map(u)}function u(a){return{type:a.type,url:v(a.urlTemplate||a.url||a.styleUrl)}}function r(a){return a?{baseLayers:t(a.baseMapLayers.filter(function(a){return!a.isReference})),referenceLayers:t(a.baseMapLayers.filter(function(a){return a.isReference}))}:null}function t(a){return a.map(function(a){var f;switch(a.layerType){case "VectorTileLayer":f="vector-tile";break;case "ArcGISTiledMapServiceLayer":f="tile";break;default:f="unknown"}return{type:f,url:v(a.templateUrl||a.urlTemplate||
a.styleUrl||a.url)}})}function w(a,b,c){return null!=a!=(null!=b)?"not-equal":a?q(a.baseLayers,b.baseLayers)?q(a.referenceLayers,b.referenceLayers)?"equal":c.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function q(a,b){return a.length!==b.length?!1:!a.some(function(a){return!b.some(function(f){return a.type===f.type&&a.url===f.url})})}function v(a){return a?b.normalize(a).replace(/^\s*https?:/i,"").toLowerCase():""}Object.defineProperty(h,"__esModule",{value:!0});var x=
c.getLogger("esri.Basemap");h.createCache=function(){return{}};h.ensureType=k;h.clonePreservingTiledLayers=function(a,b){void 0===b&&(b=null);a=k(a);if(!a)return null;a=new m({id:a.id,title:a.title,baseLayers:a.baseLayers.slice(),referenceLayers:a.referenceLayers.slice()});return b&&(a.baseLayers=l(a.baseLayers,b.baseLayers),a.referenceLayers=l(a.referenceLayers,b.referenceLayers)),a};h.getWellKnownBasemapId=function(a){var f=null;a=g(a);for(var b in d){var c=r(d[b]),c=w(a,c,{mustMatchReferences:!1});
if("equal"===c){f=b;break}"base-layers-equal"===c&&(f=b)}return f};h.contentEquals=function(a,b){if(a===b)return!0;a=g(a);b=g(b);return"equal"===w(a,b,{mustMatchReferences:!0})}})},"esri/support/basemapDefinitions":function(){define(["require","exports","dojo/i18n!../nls/basemaps"],function(e,h,d){return{streets:{id:"streets",title:d.streets,thumbnailUrl:e.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",title:d.satellite,thumbnailUrl:e.toUrl("../images/basemap/satellite.jpg"),baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",title:d.hybrid,thumbnailUrl:e.toUrl("../images/basemap/hybrid.jpg"),
baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",
title:d.terrain,thumbnailUrl:e.toUrl("../images/basemap/terrain.jpg"),baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,
showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",title:d.topo,thumbnailUrl:e.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",title:d.gray,thumbnailUrl:e.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",title:d["dark-gray"],thumbnailUrl:e.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",title:d.oceans,thumbnailUrl:e.toUrl("../images/basemap/oceans.jpg"),
baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",
title:d["national-geographic"],thumbnailUrl:e.toUrl("../images/basemap/national-geographic.jpg"),baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",title:d.osm,thumbnailUrl:e.toUrl("../images/basemap/osm.jpg"),baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",title:d["dark-gray"],thumbnailUrl:e.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/5ad3948260a147a993ef4865e3fad476/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Dark Gray",visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",title:d.gray,thumbnailUrl:e.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",
styleUrl:"//www.arcgis.com/sharing/rest/content/items/5dd75c1a544b46c3af01ba5736bfdfa0/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Light Gray",visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",title:d.streets,thumbnailUrl:e.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/a60a37a27cc140ddad15f919cd5a69f2/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",
visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",title:d.topo,thumbnailUrl:e.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/86d5ed4b6dc741de9dad5f0fbe09ae95/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",title:d["streets-night-vector"],thumbnailUrl:e.toUrl("../images/basemap/streets-night.jpg"),baseMapLayers:[{id:"streets-night-vector-base-layer",
styleUrl:"//www.arcgis.com/sharing/rest/content/items/92c551c9f07b4147846aae273e822714/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",title:d["streets-relief-vector"],thumbnailUrl:e.toUrl("../images/basemap/streets-relief.jpg"),baseMapLayers:[{id:"streets-relief-vector-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",
title:"World Streets Relief Base",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-reference-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/78c0a9ab4fbf4198a8b951848aab19d8/resources/styles/root.json",title:"World Streets Relief Reference",layerType:"VectorTileLayer",showLegend:!1,visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",title:d["streets-navigation-vector"],thumbnailUrl:e.toUrl("../images/basemap/streets-navigation.jpg"),
baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/e19e9330bf08490ca8353d76b5e2e658/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]}}})},"esri/nls/basemaps":function(){define({root:{streets:"Streets",satellite:"Imagery",hybrid:"Imagery with Labels",terrain:"Terrain with Labels",topo:"Topographic",gray:"Light Gray Canvas","dark-gray":"Dark Gray Canvas",oceans:"Oceans","national-geographic":"National Geographic",
osm:"OpenStreetMap","streets-night-vector":"World Street Map (Night)","streets-relief-vector":"World Street Map (with Relief)","streets-navigation-vector":"World Navigation Map"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/Basemap":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/accessorSupport/decorators dojo/_base/lang ./support/basemapDefinitions ./core/Collection ./core/collectionUtils ./core/Evented ./core/JSONSupport ./core/Loadable ./core/promiseUtils ./core/requireUtils ./core/urlUtils ./core/Logger ./portal/Portal ./portal/PortalItem ./layers/Layer".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f){var p=0,z=k.ofType(f),y=q.getLogger("esri.Basemap");h=A=function(a){function f(f){f=a.call(this)||this;f.id=null;f.portalItem=null;f.resourceInfo=null;f.thumbnailUrl=null;f.title="Basemap";f.id=Date.now().toString(16)+"-basemap-"+p++;f.baseLayers=new k;f.referenceLayers=new k;var b=function(a){"elevation"===a.type&&y.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as a basemap layer and will therefore be ignored.")};return f.baseLayers.on("after-add",
function(a){return b(a.item)}),f.referenceLayers.on("after-add",function(a){return b(a.item)}),f}return d(f,a),f.prototype.initialize=function(){var a=this;this.otherwise(function(f){y.error("#load()","Failed to load basemap (title: '"+a.title+"', id: '"+a.id+"')",f)});this.resourceInfo&&this.read(this.resourceInfo)},Object.defineProperty(f.prototype,"baseLayers",{set:function(a){this._set("baseLayers",l.referenceSetter(a,this._get("baseLayers"),z))},enumerable:!0,configurable:!0}),f.prototype.writeBaseLayers=
function(a,f,b,g){var d=[];return a?(g=c.mixin({},g,{layerContainerType:"basemap"}),this.baseLayers.forEach(function(a){if(a.write){var f={};a.write(f,g)&&d.push(f)}}),this.referenceLayers.forEach(function(a){if(a.write){var f={isReference:!0};a.write(f,g)&&d.push(f)}}),void(f.baseMapLayers=d)):d},Object.defineProperty(f.prototype,"referenceLayers",{set:function(a){this._set("referenceLayers",l.referenceSetter(a,this._get("referenceLayers"),z))},enumerable:!0,configurable:!0}),f.prototype.writeTitle=
function(a,f){f.title=a||"Basemap"},f.prototype.load=function(){return this.addResolvingPromise(this._loadFromSource()),this},f.prototype.clone=function(){var a={id:this.id,title:this.title};return this.resourceInfo||this.portalItem?(a.portalItem=this.portalItem,a.resourceInfo=this.resourceInfo):(a.baseLayers=this.baseLayers.slice(),a.referenceLayers=this.referenceLayers.slice()),new A(a)},f.prototype.read=function(a,f){return!f||"web-scene"!==f.origin&&"web-map"!==f.origin||(this._layerOrigin=f.origin),
f&&f.portal&&(this._layerPortal=f.portal),this.inherited(arguments)},f.prototype.write=function(a,f){return a=a||{},f&&f.origin||(f=c.mixin({origin:"web-map"},f)),this.inherited(arguments,[a,f]),!this.loaded&&this.resourceInfo&&this.resourceInfo.baseMapLayers&&(a.baseMapLayers=this.resourceInfo.baseMapLayers.map(function(a){a=c.clone(a);return a.url&&w.isProtocolRelative(a.url)&&(a.url="https:"+a.url),a.templateUrl&&w.isProtocolRelative(a.templateUrl)&&(a.templateUrl="https:"+a.templateUrl),a})),
a},f.prototype._loadFromSource=function(){var a=this.resourceInfo,f=this.portalItem;return a?this._loadFromJSON(a):f?this._loadFromItem(f):r.resolve(null)},f.prototype._loadFromJSON=function(a,f){var b=this,c=this.portalItem&&this.portalItem.portal||this._layerPortal||null;return t.when(e,"./portal/support/layersCreator").then(function(g){var d=[];if(a.baseMapLayers&&Array.isArray(a.baseMapLayers)){var e={context:{origin:b._layerOrigin||"web-map",layerContainerType:"basemap",url:f,portal:c},defaultLayerType:"DefaultTileLayer"},
p=g.populateOperationalLayers(b.baseLayers,a.baseMapLayers.filter(function(a){return!a.isReference}),e);d.push.apply(d,p);g=g.populateOperationalLayers(b.referenceLayers,a.baseMapLayers.filter(function(a){return a.isReference}),e);d.push.apply(d,g)}return r.eachAlways(d)}).then(function(){})},f.prototype._loadFromItem=function(a){var f=this;return a.load().then(function(a){return a.fetchData()}).then(function(b){var c=w.urlToObject(a.itemUrl);return f.resourceInfo=b.baseMap,f.read(f.resourceInfo,
{origin:"web-map",portal:a.portal||v.getDefault(),url:c}),f.read({title:a.title,thumbnailUrl:a.thumbnailUrl},{origin:"portal-item",portal:a.portal||v.getDefault(),url:c}),f._loadFromJSON(f.resourceInfo,c)})},f.fromJSON=function(a){return a?new A({resourceInfo:a}):null},f.fromId=function(a){return(a=m[a])?A.fromJSON(a):null},f}(b.declared(n,g,u));a([b.property({type:z,json:{write:{ignoreOrigin:!0}}}),b.cast(l.castForReferenceSetter)],h.prototype,"baseLayers",null);a([b.writer("baseLayers")],h.prototype,
"writeBaseLayers",null);a([b.property({json:{origins:{webScene:{write:!0}}}})],h.prototype,"id",void 0);a([b.property({type:x})],h.prototype,"portalItem",void 0);a([b.property({type:z}),b.cast(l.castForReferenceSetter)],h.prototype,"referenceLayers",null);a([b.property()],h.prototype,"resourceInfo",void 0);a([b.property()],h.prototype,"thumbnailUrl",void 0);a([b.property()],h.prototype,"title",void 0);a([b.writer("title")],h.prototype,"writeTitle",null);h=A=a([b.subclass("esri.Basemap")],h);var A;
return h})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/accessorSupport/decorators ../core/Error ../config ../identity/IdentityManager ../request ../geometry/Extent ../core/JSONSupport ../core/Loadable ./PortalQueryParams ./PortalQueryResult ./PortalUser ../core/promiseUtils ../core/requireUtils ../core/urlUtils dojo/promise/all dojo/_base/kernel dojo/_base/lang".split(" "),function(e,
h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y){var A;h=B=function(a){function b(f){f=a.call(this)||this;return f.access=null,f.allSSL=!1,f.authMode=B.AUTH_MODE_AUTO,f.authorizedCrossOriginDomains=null,f.basemapGalleryGroupQuery=null,f.bingKey=null,f.canListApps=!1,f.canListData=!1,f.canListPreProvisionedItems=!1,f.canProvisionDirectPurchase=!1,f.canSearchPublic=!1,f.canShareBingPublic=!1,f.canSharePublic=!1,f.canSignInArcGIS=!1,f.canSignInIDP=!1,f.colorSetsGroupQuery=null,f.commentsEnabled=!1,f.created=
null,f.culture=null,f.customBaseUrl=null,f.defaultBasemap=null,f.defaultExtent=null,f.defaultVectorBasemap=null,f.description=null,f.featuredGroups=null,f.featuredItemsGroupQuery=null,f.galleryTemplatesGroupQuery=null,f.livingAtlasGroupQuery=null,f.helperServices=null,f.homePageFeaturedContent=null,f.homePageFeaturedContentCount=null,f.httpPort=null,f.httpsPort=null,f.id=null,f.ipCntryCode=null,f.isPortal=!1,f.layerTemplatesGroupQuery=null,f.maxTokenExpirationMinutes=null,f.modified=null,f.name=null,
f.portalHostname=null,f.portalMode=null,f.portalProperties=null,f.region=null,f.rotatorPanels=null,f.showHomePageDescription=!1,f.supportsHostedServices=!1,f.symbolSetsGroupQuery=null,f.templatesGroupQuery=null,f.units=null,f.url=k.portalUrl,f.urlKey=null,f.user=null,f.useStandardizedQuery=!1,f.useVectorBasemaps=!1,f.vectorBasemapGalleryGroupQuery=null,f}return d(b,a),b.prototype.normalizeCtorArgs=function(a){return"string"==typeof a?{url:a}:a},b.prototype.initialize=function(){var a=this;this._esriId_credentialCreateHandle=
l.on("credential-create",function(){a.loaded&&!a.credential&&a.authMode===B.AUTH_MODE_AUTO&&l.findCredential(a.restUrl)&&a._signIn()})},b.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)},b.prototype.readAuthorizedCrossOriginDomains=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b],g=c;f.hasProtocol(g)||(g=f.appUrl.scheme+"://"+g);f.canUseXhr(g)||k.request.corsEnabledServers.push({host:c,
withCredentials:!0})}return a},b.prototype.readDefaultBasemap=function(a){return a?(a=A.fromJSON(a),a.portalItem={portal:this},a):null},b.prototype.readDefaultVectorBasemap=function(a){return a?(a=A.fromJSON(a),a.portalItem={portal:this},a):null},Object.defineProperty(b.prototype,"extraQuery",{get:function(){return this.id&&!this.canSearchPublic?" AND orgid:"+this.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isOrganization",{get:function(){return!!this.access},enumerable:!0,
configurable:!0}),Object.defineProperty(b.prototype,"restUrl",{get:function(){var a=this.url;if(a)var f=a.indexOf("/sharing"),a=0<f?a.substring(0,f):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"thumbnailUrl",{get:function(){var a=this.restUrl,f=this.thumbnail;return a&&f?this._normalizeSSL(a+"/portals/self/resources/"+f):null},enumerable:!0,configurable:!0}),b.prototype.readUser=function(a){var f=null;return a&&(f=q.fromJSON(a),
f.portal=this),f},b.prototype.load=function(){var a=this,f=v.resolve().then(function(){return a.authMode===B.AUTH_MODE_IMMEDIATE?l.getCredential(a.restUrl):a.authMode===B.AUTH_MODE_AUTO?l.checkSignInStatus(a.restUrl).otherwise(function(){return null}):null}).then(function(f){return a.credential=f,x.when(e,"../Basemap")}).then(function(a){A=a}).then(function(){return a._fetchSelf()}).then(function(f){a.read(f)});return this.addResolvingPromise(f),this},b.prototype.fetchBasemaps=function(){var a=new t;
return a.query=this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery,a.disableExtraQuery=!0,this.queryGroups(a).then(function(f){return(a.num=100,a.query='type:"Web Map" -type:"Web Application"',f.total)?(f=f.results[0],a.sortField=f.sortField||"name",a.sortOrder=f.sortOrder||"desc",f.queryItems(a)):null}).then(function(a){return a&&a.total?a.results.filter(function(a){return"Web Map"===a.type}).map(function(a){return new A({portalItem:a})}):[]})},b.prototype.fetchFeaturedGroups=
function(){var a=this.featuredGroups,f=new t;if(f.num=100,f.sortField="title",a&&a.length){for(var b=[],c=0;c<a.length;c++){var g=a[c];b.push('(title:"'+g.title+'" AND owner:'+g.owner+")")}return f.query=b.join(" OR "),this.queryGroups(f).then(function(a){return a.results})}return v.resolve([])},b.getDefault=function(){return B._default||(B._default=new B),B._default},b.prototype.queryGroups=function(a){return this._queryPortal("/community/groups",a,"PortalGroup")},b.prototype.queryItems=function(a){return this._queryPortal("/search",
a,"PortalItem")},b.prototype.queryUsers=function(a){return a.sortField||(a.sortField="username"),this._queryPortal("/community/users",a,"PortalUser")},b.prototype.toJSON=function(){throw new m("internal:not-yet-implemented","Portal.toJSON is not yet implemented");},b.prototype._fetchSelf=function(){return this._request(this.restUrl+"/portals/self",{query:{culture:z.locale}})},b.prototype._queryPortal=function(a,f,b){var c=this,g=function(b){return c._request(c.restUrl+a,f.toRequestOptions(c)).then(function(a){var g=
f.clone();return g.start=a.nextStart,new w({nextQueryParams:g,queryParams:f,total:a.total,results:B._resultsToTypedArray(b,{portal:c},a)})}).then(function(a){return p(a.results).always(function(){return a})})};return b?x.when(e,"./"+b).then(function(a){return g(a)}):g()},b.prototype._signIn=function(){var a=this;return this.authMode===B.AUTH_MODE_ANONYMOUS?v.reject(new m("portal:invalid-auth-mode",'Current "authMode"\' is "'+this.authMode+'"')):"failed"===this.loadStatus?v.reject(this.loadError):
l.getCredential(this.restUrl).then(function(f){return"not-loaded"===a.loadStatus?a.load().then(function(){return null}):"loading"===a.loadStatus?a.load().then(function(){return a.credential?null:(a.credential=f,a._fetchSelf())}):a.user&&a.credential===f?null:(a.credential=f,a._fetchSelf())}).then(function(f){f&&a.read(f)})},b.prototype._normalizeSSL=function(a){var f=this.allSSL||window&&"https:"===window.location.protocol;if(this.isPortal){var b=B._getLocation(a);if(-1<this.portalHostname.toLowerCase().indexOf(b.hostname.toLowerCase())&&
b.port&&"80"!==b.port&&"443"!==b.port)return a=b.pathname,0!==a.indexOf("/")&&(a="/"+a),f?"https://"+b.hostname+(this.httpsPort&&443!==this.httpsPort?":"+this.httpsPort:"")+a+b.search:"http://"+b.hostname+(this.httpPort&&80!==this.httpPort?":"+this.httpPort:"")+a+b.search}return f?a.replace("http:","https:"):a},b.prototype._normalizeUrl=function(a){var f=this.credential&&this.credential.token;return this._normalizeSSL(f?a+(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+f:a)},b.prototype._requestToTypedArray=
function(a,f,b){var c=this,g=function(b){return c._request(a,f).then(function(a){var f=B._resultsToTypedArray(b,{portal:c},a);return p(f).always(function(){return f})})};return b?x.when(e,"./"+b).then(function(a){return g(a)}):g()},b.prototype._request=function(a,f){var b,c={f:"json"},d={disableIdentityLookup:this.authMode===B.AUTH_MODE_ANONYMOUS};return f&&(y.mixin(c,f.query),b=f.responseType,d.method=f.method),g(this._normalizeSSL(a),y.mixin({callbackParamName:"callback",query:c,responseType:b,
timeout:0},d)).then(function(a){return a.data})},b._getLocation=function(a){var f=document.createElement("a");return f.href=a,{protocol:f.protocol,hostname:f.hostname,port:f.port,pathname:f.pathname,search:f.search,hash:f.hash,host:f.host}},b._resultsToTypedArray=function(a,f,b){var c;return b?(c=b.listings||b.notifications||b.userInvitations||b.tags||b.items||b.groups||b.comments||b.provisions||b.results||b.relatedItems||b,(a||f)&&(c=c.map(function(b){b=y.mixin(a?a.fromJSON(b):b,f);return"function"==
typeof b.load&&b.load(),b}))):c=[],c},b}(c.declared(u,r));h.AUTH_MODE_ANONYMOUS="anonymous";h.AUTH_MODE_AUTO="auto";h.AUTH_MODE_IMMEDIATE="immediate";a([c.property()],h.prototype,"access",void 0);a([c.property()],h.prototype,"allSSL",void 0);a([c.property()],h.prototype,"authMode",void 0);a([c.property()],h.prototype,"authorizedCrossOriginDomains",void 0);a([c.reader("authorizedCrossOriginDomains")],h.prototype,"readAuthorizedCrossOriginDomains",null);a([c.property()],h.prototype,"basemapGalleryGroupQuery",
void 0);a([c.property()],h.prototype,"bingKey",void 0);a([c.property()],h.prototype,"canListApps",void 0);a([c.property()],h.prototype,"canListData",void 0);a([c.property()],h.prototype,"canListPreProvisionedItems",void 0);a([c.property()],h.prototype,"canProvisionDirectPurchase",void 0);a([c.property()],h.prototype,"canSearchPublic",void 0);a([c.property()],h.prototype,"canShareBingPublic",void 0);a([c.property()],h.prototype,"canSharePublic",void 0);a([c.property()],h.prototype,"canSignInArcGIS",
void 0);a([c.property()],h.prototype,"canSignInIDP",void 0);a([c.property()],h.prototype,"colorSetsGroupQuery",void 0);a([c.property()],h.prototype,"commentsEnabled",void 0);a([c.property({type:Date})],h.prototype,"created",void 0);a([c.property()],h.prototype,"credential",void 0);a([c.property()],h.prototype,"culture",void 0);a([c.property()],h.prototype,"customBaseUrl",void 0);a([c.property()],h.prototype,"defaultBasemap",void 0);a([c.reader("defaultBasemap")],h.prototype,"readDefaultBasemap",null);
a([c.property({type:n})],h.prototype,"defaultExtent",void 0);a([c.property()],h.prototype,"defaultVectorBasemap",void 0);a([c.reader("defaultVectorBasemap")],h.prototype,"readDefaultVectorBasemap",null);a([c.property()],h.prototype,"description",void 0);a([c.property({dependsOn:["id","canSearchPublic"],readOnly:!0})],h.prototype,"extraQuery",null);a([c.property()],h.prototype,"featuredGroups",void 0);a([c.property()],h.prototype,"featuredItemsGroupQuery",void 0);a([c.property()],h.prototype,"galleryTemplatesGroupQuery",
void 0);a([c.property()],h.prototype,"livingAtlasGroupQuery",void 0);a([c.property()],h.prototype,"helpBase",void 0);a([c.property()],h.prototype,"helperServices",void 0);a([c.property()],h.prototype,"helpMap",void 0);a([c.property()],h.prototype,"homePageFeaturedContent",void 0);a([c.property()],h.prototype,"homePageFeaturedContentCount",void 0);a([c.property()],h.prototype,"httpPort",void 0);a([c.property()],h.prototype,"httpsPort",void 0);a([c.property()],h.prototype,"id",void 0);a([c.property()],
h.prototype,"ipCntryCode",void 0);a([c.property({dependsOn:["access"],readOnly:!0})],h.prototype,"isOrganization",null);a([c.property()],h.prototype,"isPortal",void 0);a([c.property()],h.prototype,"layerTemplatesGroupQuery",void 0);a([c.property()],h.prototype,"maxTokenExpirationMinutes",void 0);a([c.property({type:Date})],h.prototype,"modified",void 0);a([c.property()],h.prototype,"name",void 0);a([c.property()],h.prototype,"portalHostname",void 0);a([c.property()],h.prototype,"portalMode",void 0);
a([c.property()],h.prototype,"portalProperties",void 0);a([c.property()],h.prototype,"region",void 0);a([c.property({dependsOn:["url"],readOnly:!0})],h.prototype,"restUrl",null);a([c.property()],h.prototype,"rotatorPanels",void 0);a([c.property()],h.prototype,"showHomePageDescription",void 0);a([c.property()],h.prototype,"staticImagesUrl",void 0);a([c.property()],h.prototype,"stylesGroupQuery",void 0);a([c.property()],h.prototype,"supportsHostedServices",void 0);a([c.property()],h.prototype,"symbolSetsGroupQuery",
void 0);a([c.property()],h.prototype,"templatesGroupQuery",void 0);a([c.property()],h.prototype,"thumbnail",void 0);a([c.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],h.prototype,"thumbnailUrl",null);a([c.property()],h.prototype,"units",void 0);a([c.property()],h.prototype,"url",void 0);a([c.property()],h.prototype,"urlKey",void 0);a([c.property()],h.prototype,"user",void 0);a([c.reader("user")],h.prototype,"readUser",null);a([c.property()],h.prototype,"useStandardizedQuery",void 0);
a([c.property()],h.prototype,"useVectorBasemaps",void 0);a([c.property()],h.prototype,"vectorBasemapGalleryGroupQuery",void 0);a([b(1,c.cast(t))],h.prototype,"_queryPortal",null);h=B=a([c.subclass("esri.portal.Portal")],h);var B;return h})},"esri/core/tsSupport/paramHelper":function(){define([],function(){return function(e,h){return function(d,a){h(d,a,e)}}})},"esri/identity/IdentityManager":function(){define(["./IdentityManagerDialog","../kernel","./OAuthSignInHandler","../core/declare"],function(e,
h,d,a){e=new e;return h.id=a.safeMixin(e,d),h.id})},"esri/identity/IdentityManagerDialog":function(){define("dojo/_base/kernel ../core/declare dojo/_base/config dojo/Deferred dojo/_base/lang dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ../kernel ../core/lang ../core/domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/identity dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w){return h([t],{declaredClass:"esri.identity.IdentityManager",
constructor:function(a){b.mixin(this,a)},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblUser}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblPwd}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
signIn:function(b,g,e){this._nls||(this._nls=w);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.emit("dialog-create"));var f=this._loginDialog,p=e&&e.error,k=e&&e.token,l=new a(function(){f.onCancel()});return f.open?(b=Error("BUSY"),b.code="IdentityManager.1",b.log=!!d.isDebug,l.reject(b),l.promise):(u.hide(f.errMsg_),p&&403==p.code&&k&&(c.set(f.errMsg_,"innerHTML",this._nls.forbidden),u.show(f.errMsg_)),f.dfd_=l,f.serverInfo_=g,f.resUrl_=b,f.admin_=e&&e.isAdmin,
c.set(f.resLink_,{title:b,innerHTML:"("+(this.getResourceName(b)||this._nls.lblItem)+")"}),c.set(f.serverLink_,{title:g.server,innerHTML:(-1!==g.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":g.server)+" "}),f.txtPwd_.set("value",""),f.show(),l.promise)},_createLoginDialog:function(){var a=this._nls,b=n.substitute(a,this._dialogContent),b=n.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},
b),x=new l({title:a.title,content:b,"class":" esri-widget esriSignInDialog esriIdentityDialog",style:"width: 18em;",esriIdMgr_:this,onShow:function(){this.domNode.classList.add("esriIdentityDialog--visible")},onHide:function(){this.domNode.classList.remove("esriIdentityDialog--visible")},keypressed_:function(a){a.charOrCode===m.ENTER&&this.execute_()},execute_:function(){var f=this.txtUser_.get("value"),b=this.txtPwd_.get("value"),d=this.dfd_,e=this;if(this.form_.validate()&&f&&b){this.btnSubmit_.set("label",
a.lblSigning);var k=g.id.findCredential(e.resUrl_,f),m=function(b){e.btnSubmit_.set("label",a.lblOk);e.btnSubmit_.set("disabled",!1);u.hide(e.errMsg_);e.hide();l._DialogLevelManager.hide(e);var c=e.serverInfo_;e.dfd_=e.serverInfo_=e.generateDfd_=e.resUrl_=null;var g,p,m,v=k;b&&(g=b.token,p=n.isDefined(b.expires)?Number(b.expires):null,m=!!b.ssl,v?(v.userId=f,v.token=g,v.expires=p,v.validity=b.validity,v.ssl=m,v.creationTime=(new Date).getTime()):v=new r({userId:f,server:c.server,token:g,expires:p,
ssl:m,isAdmin:e.admin_,validity:b.validity}));d.resolve(v)};if(k&&!k._enqueued)return void m();e.btnSubmit_.set("disabled",!0);e.generateDfd_=g.id.generateToken(this.serverInfo_,{username:f,password:b},{isAdmin:this.admin_}).then(m).then(null,function(f){e.btnSubmit_.set("disabled",!1);e.generateDfd_=null;e.btnSubmit_.set("label",a.lblOk);c.set(e.errMsg_,"innerHTML",f&&f.code?a.invalidUser:a.noAuthService);u.show(e.errMsg_)})}},cancel_:function(){x.generateDfd_&&x.generateDfd_.cancel();var a=x.dfd_,
b=x.resUrl_,c=x.serverInfo_;x.btnSubmit_.set("disabled",!1);x.dfd_=x.serverInfo_=x.generateDfd_=x.resUrl_=null;u.hide(x.errMsg_);l._DialogLevelManager.hide(x);x.esriIdMgr_.emit("dialog-cancel",{resourceUrl:b,serverInfo:c});b=Error("ABORTED");b.code="IdentityManager.2";b.log=!!d.isDebug;a.reject(b)}}),b=x.domNode;return x.form_=k.byNode(e.query(".esriIdForm",b)[0]),x.txtUser_=k.byNode(e.query(".esriIdUser",b)[0]),x.txtPwd_=k.byNode(e.query(".esriIdPwd",b)[0]),x.btnSubmit_=k.byNode(e.query(".esriIdSubmit",
b)[0]),x.btnCancel_=k.byNode(e.query(".esriIdCancel",b)[0]),x.resLink_=e.query(".resLink",b)[0],x.serverLink_=e.query(".serverLink",b)[0],x.errMsg_=e.query(".esriErrorMsg",b)[0],x.connect(x.txtUser_,"onKeyPress",x.keypressed_),x.connect(x.txtPwd_,"onKeyPress",x.keypressed_),x.connect(x.btnSubmit_,"onClick",x.execute_),x.connect(x.btnCancel_,"onClick",x.onCancel),x.connect(x,"onCancel",x.cancel_),x}})})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),
function(e,h,d,a,b,c){function m(a,b){a=a.getAttributeNode&&a.getAttributeNode(b);return!!a&&a.specified}var k={innerHTML:1,textContent:1,className:1,htmlFor:h("ie"),value:1},l={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};e.has=function(b,d){var g=d.toLowerCase();return k[c.names[g]||d]||m(a.byId(b),l[g]||d)};e.get=function(b,e){b=a.byId(b);var g=e.toLowerCase(),n=c.names[g]||e,h=b[n];if(k[n]&&"undefined"!=typeof h)return h;if("textContent"==n)return c.get(b,n);if("href"!=
n&&("boolean"==typeof h||d.isFunction(h)))return h;e=l[g]||e;return m(b,e)?b.getAttribute(e):null};e.set=function(g,m,u){g=a.byId(g);if(2==arguments.length){for(var n in m)e.set(g,n,m[n]);return g}n=m.toLowerCase();var h=c.names[n]||m,w=k[h];if("style"==h&&"string"!=typeof u)return b.set(g,u),g;if(w||"boolean"==typeof u||d.isFunction(u))return c.set(g,m,u);g.setAttribute(l[n]||m,u);return g};e.remove=function(b,c){a.byId(b).removeAttribute(l[c.toLowerCase()]||c)};e.getNodeProp=function(b,d){b=a.byId(b);
var g=d.toLowerCase(),e=c.names[g]||d;if(e in b&&"href"!=e)return b[e];d=l[g]||d;return m(b,d)?b.getAttribute(d):null}})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(e,h,d,a,b,c,m,k){function l(a){var b="";a=a.childNodes;for(var c=0,g;g=a[c];c++)8!=g.nodeType&&(b=1==g.nodeType?b+l(g):b+g.nodeValue);return b}var g={},n=1,u=h._scopeName+"attrid";d.add("dom-textContent",function(a,b,c){return"textContent"in
c});e.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};e.get=function(a,c){a=b.byId(a);var g=c.toLowerCase();c=e.names[g]||c;return"textContent"!=c||d("dom-textContent")?a[c]:l(a)};e.set=function(l,h,w){l=b.byId(l);if(2==arguments.length&&"string"!=typeof h){for(var q in h)e.set(l,q,h[q]);return l}q=h.toLowerCase();q=e.names[q]||h;if("style"==q&&"string"!=
typeof w)return c.set(l,w),l;if("innerHTML"==q)return d("ie")&&l.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(m.empty(l),l.appendChild(m.toDom(w,l.ownerDocument))):l[q]=w,l;if("textContent"==q&&!d("dom-textContent"))return m.empty(l),l.appendChild(l.ownerDocument.createTextNode(w)),l;if(a.isFunction(w)){var v=l[u];v||(v=n++,l[u]=v);g[v]||(g[v]={});var x=g[v][q];if(x)k.disconnect(x);else try{delete l[q]}catch(f){}w?g[v][q]=k.connect(l,q,w):l[q]=null;return l}l[q]=
w;return l}})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(e,h,d,a,b,c){function m(a,f){var b=f.parentNode;b&&b.insertBefore(a,f)}function k(a){if("innerHTML"in a)try{a.innerHTML="";return}catch(p){}for(var f;f=a.lastChild;)a.removeChild(f)}var l={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],
colgroup:["table"],col:["table","colgroup"],li:["ul"]},g=/<\s*([\w\:]+)/,n={},u=0,r="__"+h._scopeName+"ToDomId",t;for(t in l)l.hasOwnProperty(t)&&(h=l[t],h.pre="option"==t?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+h.join("\x3e\x3c")+"\x3e",h.post="\x3c/"+h.reverse().join("\x3e\x3c/")+"\x3e");var w;8>=d("ie")&&(w=function(a){a.__dojo_html5_tested="yes";var f=q("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},a.body);1!==f.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,
function(f){a.createElement(f)});v(f)});e.toDom=function(b,f){f=f||a.doc;var c=f[r];c||(f[r]=c=++u+"",n[c]=f.createElement("div"));8>=d("ie")&&!f.__dojo_html5_tested&&f.body&&w(f);b+="";var e=b.match(g),k=e?e[1].toLowerCase():"",c=n[c];if(e&&l[k])for(e=l[k],c.innerHTML=e.pre+b+e.post,b=e.length;b;--b)c=c.firstChild;else c.innerHTML=b;if(1==c.childNodes.length)return c.removeChild(c.firstChild);for(b=f.createDocumentFragment();f=c.firstChild;)b.appendChild(f);return b};e.place=function(a,f,c){f=b.byId(f);
"string"==typeof a&&(a=/^\s*</.test(a)?e.toDom(a,f.ownerDocument):b.byId(a));if("number"==typeof c){var g=f.childNodes;!g.length||g.length<=c?f.appendChild(a):m(a,g[0>c?0:c])}else switch(c){case "before":m(a,f);break;case "after":c=a;(g=f.parentNode)&&(g.lastChild==f?g.appendChild(c):g.insertBefore(c,f.nextSibling));break;case "replace":f.parentNode.replaceChild(a,f);break;case "only":e.empty(f);f.appendChild(a);break;case "first":if(f.firstChild){m(a,f.firstChild);break}default:f.appendChild(a)}return a};
var q=e.create=function(g,f,d,k){var p=a.doc;d&&(d=b.byId(d),p=d.ownerDocument);"string"==typeof g&&(g=p.createElement(g));f&&c.set(g,f);d&&e.place(g,d,k);return g};e.empty=function(a){k(b.byId(a))};var v=e.destroy=function(a){if(a=b.byId(a)){var f=a;a=a.parentNode;f.firstChild&&k(f);a&&(d("ie")&&a.canHaveChildren&&"removeNode"in f?f.removeNode(!1):a.removeChild(f))}}})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(e,h,d){var a={},b={},c={length:0,
add:function(a){if(b[a.id])throw Error("Tried to register widget with id\x3d\x3d"+a.id+" but that id is already registered");b[a.id]=a;this.length++},remove:function(a){b[a]&&(delete b[a],this.length--)},byId:function(a){return"string"==typeof a?b[a]:a},byNode:function(a){return b[a.getAttribute("widgetId")]},toArray:function(){var a=[],c;for(c in b)a.push(b[c]);return a},getUniqueId:function(c){var e;do e=c+"_"+(c in a?++a[c]:a[c]=0);while(b[e]);return"dijit"==d._scopeName?e:d._scopeName+"_"+e},
findWidgets:function(a,c){function d(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType){var e=a.getAttribute("widgetId");e?(e=b[e])&&g.push(e):a!==c&&d(a)}}var g=[];d(a);return g},_destroyAll:function(){d._curFocus=null;d._prevFocus=null;d._activeStack=[];e.forEach(c.findWidgets(h.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(a){for(;a;){var c=1==a.nodeType&&a.getAttribute("widgetId");if(c)return b[c];a=a.parentNode}return null},
_hash:b};return d.registry=c})},"dijit/main":function(){define(["dojo/_base/kernel"],function(e){return e.dijit})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y,A,B,D,F,C,E,G,K,L){function H(){}var I=new b;I.resolve(!0);y=a("dijit._DialogBase"+(q("dojo-bidi")?"_NoBidi":""),[B,F,C,D],{templateString:L,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:y.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:.9,
closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=n.getLocalization("dijit","common");r.mixin(this,a);this.inherited(arguments)},postCreate:function(){l.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);d.after(this,"onExecute",r.hitch(this,"hide"),!0);d.after(this,"onCancel",r.hitch(this,"hide"),!0);t(this.closeButtonNode,
v.press,function(a){a.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&S.isTop(this)&&(this._getFocusItems(),z.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();z.focus(this._firstFocusItem)},_endDrag:function(){var a=k.position(this.domNode),f=x.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),f.h-a.h);a.x=Math.min(Math.max(a.x,0),f.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==q("ie")?p:f)(a,{handle:this.titleBar}),d.after(this._moveable,"onMoveStop",r.hitch(this,"_endDrag"),!0)):m.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":h.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:r.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!m.contains(this.ownerDocumentBody,"dojoMove")){var a=
this.domNode,f=x.getBox(this.ownerDocument),b=this._relativePosition,c=k.position(a);l.set(a,{left:Math.floor(f.l+(b?Math.min(b.x,f.w-c.w):(f.w-c.w)/2))+"px",top:Math.floor(f.t+(b?Math.min(b.y,f.h-c.h):(f.h-c.h)/2))+"px"})}},_onKey:function(a){if(a.keyCode==u.TAB){this._getFocusItems();var f=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):f==this._firstFocusItem&&a.shiftKey?(z.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):f!=this._lastFocusItem||
a.shiftKey||(z.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==u.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return I.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),S.hide(this));var a=x.get(this.ownerDocument);this._modalconnects.push(t(a,"scroll",r.hitch(this,"resize",null)));this._modalconnects.push(t(this.domNode,
"keydown",r.hitch(this,"_onKey")));l.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();var f;this._fadeInDeferred=new b(r.hitch(this,function(){f.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,H);a=this._fadeInDeferred.promise;f=g.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:r.hitch(this,function(){S.show(this,this.underlayAttrs)}),onEnd:r.hitch(this,function(){this.autofocus&&S.isTop(this)&&(this._getFocusItems(),
z.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return a},hide:function(){if(!this._alreadyInitialized||!this.open)return I.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new b(r.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,H);this._fadeOutDeferred.then(r.hitch(this,"onHide"));var f=this._fadeOutDeferred.promise;a=g.fadeOut({node:this.domNode,duration:this.duration,
onEnd:r.hitch(this,function(){this.domNode.style.display="none";S.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var c;c=this._modalconnects.pop();)c.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return f},resize:function(a){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!a){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),h.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(a){a&&l.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var f=x.getBox(this.ownerDocument);f.w*=this.maxRatio;f.h*=this.maxRatio;var b=k.position(this.domNode);b.w>=f.w||b.h>=f.h?(a={w:Math.min(b.w,f.w),h:Math.min(b.h,f.h)},this._shrunk=!0):this._shrunk=!1}if(a){k.setMarginBox(this.domNode,
a);f=[];this.titleBar&&f.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&f.push({domNode:this.actionBarNode,region:"bottom"});b={domNode:this.containerNode,region:"center"};f.push(b);var c=K.marginBox2contentBox(this.domNode,a);K.layoutChildren(this.domNode,c,f);this._singleChild?(f=K.marginBox2contentBox(this.containerNode,b),this._singleChild.resize({w:f.w,h:f.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();q("touch")||a||this._position()}},
_layoutChildren:function(){h.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();S.hide(this);this.inherited(arguments)}});q("dojo-bidi")&&(y=a("dijit._DialogBase",y,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},
_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var N=a("dijit.Dialog",[G,y],{});N._DialogBase=y;var S=N._DialogLevelManager={_beginZIndex:950,show:function(a,f){M[M.length-1].focus=z.curNode;var b=M[M.length-1].dialog?M[M.length-1].zIndex+2:N._DialogLevelManager._beginZIndex;l.set(a.domNode,"zIndex",b);E.show(f,b-1);M.push({dialog:a,underlayAttrs:f,zIndex:b})},hide:function(a){if(M[M.length-1].dialog==a){M.pop();var f=M[M.length-
1];1==M.length?E.hide():E.show(f.underlayAttrs,f.zIndex-1);if(a.refocus&&(a=f.focus,!f.dialog||a&&c.isDescendant(a,f.dialog.domNode)||(f.dialog._getFocusItems(),a=f.dialog._firstFocusItem),a))try{a.focus()}catch(P){}}else f=h.indexOf(h.map(M,function(a){return a.dialog}),a),-1!=f&&M.splice(f,1)},isTop:function(a){return M[M.length-1].dialog==a}},M=N._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];z.watch("curNode",function(a,f,b){a=M[M.length-1].dialog;if(b&&a&&!a._fadeOutDeferred&&b.ownerDocument==
a.ownerDocument){do if(b==a.domNode||m.contains(b,"dijitPopup"))return;while(b=b.parentNode);a.focus()}});q("dijit-legacy-requires")&&w(0,function(){e(["dijit/TooltipDialog"])});return N})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(e,h,d){function a(a){if("string"==typeof a||a instanceof String){if(a&&!c.test(a))return m[0]=a,m;a=a.split(c);a.length&&!a[0]&&a.shift();a.length&&!a[a.length-1]&&a.pop();return a}return a?h.filter(a,function(a){return a}):[]}
var b,c=/\s+/,m=[""],k={};return b={contains:function(a,b){return 0<=(" "+d.byId(a).className+" ").indexOf(" "+b+" ")},add:function(b,c){b=d.byId(b);c=a(c);var g=b.className,e,g=g?" "+g+" ":" ";e=g.length;for(var k=0,l=c.length,m;k<l;++k)(m=c[k])&&0>g.indexOf(" "+m+" ")&&(g+=m+" ");e<g.length&&(b.className=g.substr(1,g.length-2))},remove:function(b,c){b=d.byId(b);var g;if(void 0!==c){c=a(c);g=" "+b.className+" ";for(var k=0,l=c.length;k<l;++k)g=g.replace(" "+c[k]+" "," ");g=e.trim(g)}else g="";b.className!=
g&&(b.className=g)},replace:function(a,c,e){a=d.byId(a);k.className=a.className;b.remove(k,e);b.add(k,c);a.className!==k.className&&(a.className=k.className)},toggle:function(c,g,e){c=d.byId(c);if(void 0===e){g=a(g);for(var k=0,l=g.length,m;k<l;++k)m=g[k],b[b.contains(c,m)?"remove":"add"](c,m)}else b[e?"add":"remove"](c,g);return e}}})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(e,h,d,a,b,c,m,k,l){var g=
d.mixin,n={},u=n._Line=function(a,b){this.start=a;this.end=b};u.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var r=n.Animation=function(a){g(this,a);d.isArray(this.curve)&&(this.curve=new u(this.curve[0],this.curve[1]))};r.prototype=new a;d.extend(r,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){b=b||[];if(this[a])if(h.debugAtAllCosts)this[a].apply(this,b);else try{this[a].apply(this,
b)}catch(z){console.error("exception in animation handler for:",a),console.error(z)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);a=a||this.delay;b=d.hitch(this,"_play",b);if(0<a)return this._delayTimer=setTimeout(b,a),this;b();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();
this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,
b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?
1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);
delete this._delayTimer}});var t=0,w=null,q={run:function(){}};d.extend(r,{_startTimer:function(){this._timer||(this._timer=c.after(q,"run",d.hitch(this,"_cycle"),!0),t++);w||(w=setInterval(d.hitch(q,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,t--);0>=t&&(clearInterval(w),w=null,t=0)}});var v=m("ie")?function(a){var f=a.style;f.width.length||"auto"!=l.get(a,"width")||(f.width="auto")}:function(){};n._fade=function(a){a.node=k.byId(a.node);var f=g({properties:{}},
a);a=f.properties.opacity={};a.start="start"in f?f.start:function(){return+l.get(f.node,"opacity")||0};a.end=f.end;a=n.animateProperty(f);c.after(a,"beforeBegin",d.partial(v,f.node),!0);return a};n.fadeIn=function(a){return n._fade(g({end:1},a))};n.fadeOut=function(a){return n._fade(g({end:0},a))};n._defaultEasing=function(a){return.5+Math.sin((a+1.5)*Math.PI)/2};var x=function(a){this._properties=a;for(var f in a){var c=a[f];c.start instanceof b&&(c.tempColor=new b)}};x.prototype.getValue=function(a){var f=
{},c;for(c in this._properties){var g=this._properties[c],e=g.start;e instanceof b?f[c]=b.blendColors(e,g.end,a,g.tempColor).toCss():d.isArray(e)||(f[c]=(g.end-e)*a+e+("opacity"!=c?g.units||"px":0))}return f};n.animateProperty=function(a){var f=a.node=k.byId(a.node);a.easing||(a.easing=e._defaultEasing);a=new r(a);c.after(a,"beforeBegin",d.hitch(a,function(){var a={},c;for(c in this.properties){var e=function(a,f){var b={height:a.offsetHeight,width:a.offsetWidth}[f];if(void 0!==b)return b;b=l.get(a,
f);return"opacity"==f?+b:k?b:parseFloat(b)};if("width"==c||"height"==c)this.node.display="block";var p=this.properties[c];d.isFunction(p)&&(p=p(f));p=a[c]=g({},d.isObject(p)?p:{end:p});d.isFunction(p.start)&&(p.start=p.start(f));d.isFunction(p.end)&&(p.end=p.end(f));var k=0<=c.toLowerCase().indexOf("color");"end"in p?"start"in p||(p.start=e(f,c)):p.end=e(f,c);k?(p.start=new b(p.start),p.end=new b(p.end)):p.start="opacity"==c?+p.start:parseFloat(p.start)}this.curve=new x(a)}),!0);c.after(a,"onAnimate",
d.hitch(l,"set",a.node),!0);return a};n.anim=function(a,b,c,g,d,e){return n.animateProperty({node:a,duration:c||r.prototype.duration,properties:b,easing:g,onEnd:d}).play(e||0)};g(e,n);e._Animation=r;return n})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(e,h,d,a,b,c,m,k,l,g){function n(a,f,b){return w&&b?function(a,f){return c(a,b,f)}:v?function(b,g){var d=c(b,f,function(a){g.call(this,a);
C=(new Date).getTime()}),e=c(b,a,function(a){(!C||(new Date).getTime()>C+1E3)&&g.call(this,a)});return{remove:function(){d.remove();e.remove()}}}:function(f,b){return c(f,a,b)}}function u(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function r(b,e,l){if(!k.isRight(b)){var m=u(b.target);if(f=!b.target.disabled&&m&&m.dojoClick)if(z=(p="useTarget"==f)?m:b.target,p&&b.preventDefault(),y=b.changedTouches?b.changedTouches[0].pageX-g.global.pageXOffset:b.clientX,A=b.changedTouches?b.changedTouches[0].pageY-
g.global.pageYOffset:b.clientY,B=("object"==typeof f?f.x:"number"==typeof f?f:0)||4,D=("object"==typeof f?f.y:"number"==typeof f?f:0)||4,!x){b=function(b){g.doc.addEventListener(b,function(c){var g=c.target;f&&!c._dojo_click&&(new Date).getTime()<=F+1E3&&("INPUT"!=g.tagName||!a.contains(g,"dijitOffScreen"))&&(c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),"click"==b&&("INPUT"!=g.tagName||"radio"==g.type&&(a.contains(g,"dijitCheckBoxInput")||a.contains(g,"mblRadioButton"))||
"checkbox"==g.type&&(a.contains(g,"dijitCheckBoxInput")||a.contains(g,"mblCheckBox")))&&"TEXTAREA"!=g.tagName&&"AUDIO"!=g.tagName&&"VIDEO"!=g.tagName&&c.preventDefault())},!0)};var v=function(a){f=p?d.isDescendant(g.doc.elementFromPoint(a.changedTouches?a.changedTouches[0].pageX-g.global.pageXOffset:a.clientX,a.changedTouches?a.changedTouches[0].pageY-g.global.pageYOffset:a.clientY),z):f&&(a.changedTouches?a.changedTouches[0].target:a.target)==z&&Math.abs((a.changedTouches?a.changedTouches[0].pageX-
g.global.pageXOffset:a.clientX)-y)<=B&&Math.abs((a.changedTouches?a.changedTouches[0].pageY-g.global.pageYOffset:a.clientY)-A)<=D};x=!0;g.doc.addEventListener(e,function(a){k.isRight(a)||(v(a),p&&a.preventDefault())},!0);g.doc.addEventListener(l,function(a){if(!k.isRight(a)&&(v(a),f)){var b=function(f){var b=document.createEvent("MouseEvents");b._dojo_click=!0;b.initMouseEvent(f,!0,!0,a.view,a.detail,e.screenX,e.screenY,e.clientX,e.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);return b};
F=(new Date).getTime();var g=p?z:a.target;"LABEL"===g.tagName&&(g=d.byId(g.getAttribute("for"))||g);var e=a.changedTouches?a.changedTouches[0]:a,l=b("mousedown"),m=b("mouseup"),n=b("click");setTimeout(function(){c.emit(g,"mousedown",l);c.emit(g,"mouseup",m);c.emit(g,"click",n);F=(new Date).getTime()},0)}},!0);b("click");b("mousedown");b("mouseup")}}}var t=5>m("ios"),w=m("pointer-events")||m("MSPointer"),q=function(){var a={},f;for(f in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[f]=m("MSPointer")?
"MSPointer"+f.charAt(0).toUpperCase()+f.slice(1):"pointer"+f;return a}(),v=m("touch-events"),x,f,p=!1,z,y,A,B,D,F,C,E;m("touch")&&(w?l(function(){g.doc.addEventListener(q.down,function(a){r(a,q.move,q.up)},!0)}):l(function(){function a(a){var f=b.delegate(a,{bubbles:!0});6<=m("ios")&&(f.touches=a.touches,f.altKey=a.altKey,f.changedTouches=a.changedTouches,f.ctrlKey=a.ctrlKey,f.metaKey=a.metaKey,f.shiftKey=a.shiftKey,f.targetTouches=a.targetTouches);return f}E=g.body();g.doc.addEventListener("touchstart",
function(a){C=(new Date).getTime();var f=E;E=a.target;c.emit(f,"dojotouchout",{relatedTarget:E,bubbles:!0});c.emit(E,"dojotouchover",{relatedTarget:f,bubbles:!0});r(a,"touchmove","touchend")},!0);c(g.doc,"touchmove",function(f){C=(new Date).getTime();var b=g.doc.elementFromPoint(f.pageX-(t?0:g.global.pageXOffset),f.pageY-(t?0:g.global.pageYOffset));b&&(E!==b&&(c.emit(E,"dojotouchout",{relatedTarget:b,bubbles:!0}),c.emit(b,"dojotouchover",{relatedTarget:E,bubbles:!0}),E=b),c.emit(b,"dojotouchmove",
a(f))||f.preventDefault())});c(g.doc,"touchend",function(f){C=(new Date).getTime();var b=g.doc.elementFromPoint(f.pageX-(t?0:g.global.pageXOffset),f.pageY-(t?0:g.global.pageYOffset))||g.body();c.emit(b,"dojotouchend",a(f))})}));h={press:n("mousedown","touchstart",q.down),move:n("mousemove","dojotouchmove",q.move),release:n("mouseup","dojotouchend",q.up),cancel:n(k.leave,"touchcancel",w?q.cancel:null),over:n("mouseover","dojotouchover",q.over),out:n("mouseout","dojotouchout",q.out),enter:k._eventHandler(n("mouseover",
"dojotouchover",q.over)),leave:k._eventHandler(n("mouseout","dojotouchout",q.out))};return e.touch=h})},"dojo/domReady":function(){define(["./has"],function(e){function h(a){l.push(a);k&&d()}function d(){if(!g){for(g=!0;l.length;)try{l.shift()(b)}catch(q){console.error(q,"in domReady callback",q.stack)}g=!1;h._onQEmpty()}}var a=function(){return this}(),b=document,c={loaded:1,complete:1},m="string"!=typeof b.readyState,k=!!c[b.readyState],l=[],g;h.load=function(a,b,c){h(c)};h._Q=l;h._onQEmpty=function(){};
m&&(b.readyState="loading");if(!k){var n=[],u=function(g){g=g||a.event;k||"readystatechange"==g.type&&!c[b.readyState]||(m&&(b.readyState="complete"),k=1,d())},r=function(a,b){a.addEventListener(b,u,!1);l.push(function(){a.removeEventListener(b,u,!1)})};if(!e("dom-addeventlistener")){var r=function(a,b){b="on"+b;a.attachEvent(b,u);l.push(function(){a.detachEvent(b,u)})},t=b.createElement("div");try{t.doScroll&&null===a.frameElement&&n.push(function(){try{return t.doScroll("left"),1}catch(q){}})}catch(q){}}r(b,
"DOMContentLoaded");r(a,"load");"onreadystatechange"in b?r(b,"readystatechange"):m||n.push(function(){return c[b.readyState]});if(n.length){var w=function(){if(!k){for(var a=n.length;a--;)if(n[a]()){u("poller");return}setTimeout(w,30)}};w()}}return h})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(e,h,d,a,b,c,m){h.add("rtl-adjust-position-for-verticalScrollBar",function(a,c){a=d.body(c);c=m.create("div",
{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},a,"last");var g=m.create("div",{style:{overflow:"hidden",direction:"ltr"}},c,"last"),e=0!=b.position(g).x;c.removeChild(g);a.removeChild(c);return e});h.add("position-fixed-support",function(a,c){a=d.body(c);c=m.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},a,"last");var g=m.create("span",{style:{position:"fixed",left:"0",
top:"0"}},c,"last"),e=b.position(g).x!=b.position(c).x;c.removeChild(g);a.removeChild(c);return e});var k={getBox:function(a){a=a||d.doc;var c="BackCompat"==a.compatMode?d.body(a):a.documentElement,e=b.docScroll(a);if(h("touch")){var l=k.get(a);a=l.innerWidth||c.clientWidth;c=l.innerHeight||c.clientHeight}else a=c.clientWidth,c=c.clientHeight;return{l:e.x,t:e.y,w:a,h:c}},get:function(a){if(h("ie")&&k!==document.parentWindow){a.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");
var b=a._parentWindow;a._parentWindow=null;return b}return a.parentWindow||a.defaultView},scrollIntoView:function(e,g){try{e=a.byId(e);var k=e.ownerDocument||d.doc,l=d.body(k),m=k.documentElement||l.parentNode,t=h("ie")||h("trident"),w=h("webkit");if(e!=l&&e!=m)if(!(h("mozilla")||t||w||h("opera")||h("trident")||h("edge"))&&"scrollIntoView"in e)e.scrollIntoView(!1);else{var q="BackCompat"==k.compatMode,v=Math.min(l.clientWidth||m.clientWidth,m.clientWidth||l.clientWidth),x=Math.min(l.clientHeight||
m.clientHeight,m.clientHeight||l.clientHeight),k=w||q?l:m,f=g||b.position(e),p=e.parentNode;g=function(a){return 6>=t||7==t&&q?!1:h("position-fixed-support")&&"fixed"==c.get(a,"position").toLowerCase()};var z=this,w=function(a,f,b){"BODY"==a.tagName||"HTML"==a.tagName?z.get(a.ownerDocument).scrollBy(f,b):(f&&(a.scrollLeft+=f),b&&(a.scrollTop+=b))};if(!g(e))for(;p;){p==l&&(p=k);var y=b.position(p),A=g(p),B="rtl"==c.getComputedStyle(p).direction.toLowerCase();if(p==k)y.w=v,y.h=x,k==m&&(t||h("trident"))&&
B&&(y.x+=k.offsetWidth-y.w),y.x=0,y.y=0;else{var D=b.getPadBorderExtents(p);y.w-=D.w;y.h-=D.h;y.x+=D.l;y.y+=D.t;var F=p.clientWidth,C=y.w-F;0<F&&0<C&&(B&&h("rtl-adjust-position-for-verticalScrollBar")&&(y.x+=C),y.w=F);F=p.clientHeight;C=y.h-F;0<F&&0<C&&(y.h=F)}A&&(0>y.y&&(y.h+=y.y,y.y=0),0>y.x&&(y.w+=y.x,y.x=0),y.y+y.h>x&&(y.h=x-y.y),y.x+y.w>v&&(y.w=v-y.x));var E=f.x-y.x,G=f.y-y.y,K=E+f.w-y.w,L=G+f.h-y.h,H,I;0<K*E&&(p.scrollLeft||p==k||p.scrollWidth>p.offsetHeight)&&(H=Math[0>E?"max":"min"](E,K),
B&&(8==t&&!q||5<=h("trident"))&&(H=-H),I=p.scrollLeft,w(p,H,0),H=p.scrollLeft-I,f.x-=H);0<L*G&&(p.scrollTop||p==k||p.scrollHeight>p.offsetHeight)&&(H=Math.ceil(Math[0>G?"max":"min"](G,L)),I=p.scrollTop,w(p,0,H),H=p.scrollTop-I,f.y-=H);p=p!=k&&!A&&p.parentNode}}}catch(N){console.error("scrollIntoView: "+N),e.scrollIntoView(!1)}}};e.setObject("dojo.window",k);return k})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../has ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r){function t(a,b){"touchAction"in document.body.style?w="touchAction":"msTouchAction"in document.body.style&&(w="msTouchAction");q=function(a,b){a.style[w]=b};q(a,b)}var w,q=function(){};m("touch-action")&&(q=t);return h("dojo.dnd.Moveable",[c],{handle:"",delay:0,skip:!1,constructor:function(b,c){this.node=a.byId(b);q(this.node,"none");c||(c={});this.handle=c.handle?a.byId(c.handle):null;this.handle||(this.handle=this.node);this.delay=0<c.delay?c.delay:0;this.skip=
c.skip;this.mover=c.mover?c.mover:u;this.events=[k(this.handle,g.press,d.hitch(this,"onMouseDown")),k(this.handle,"dragstart",d.hitch(this,"onSelectStart")),k(this.handle,"selectstart",d.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,f){return new f(b,a)},destroy:function(){e.forEach(this.events,function(a){a.remove()});q(this.node,"");this.events=this.node=this.handle=null},onMouseDown:function(a){if(!this.skip||!n.isFormElement(a)){if(this.delay)this.events.push(k(this.handle,g.move,
d.hitch(this,"onMouseMove")),k(this.handle.ownerDocument,g.release,d.hitch(this,"onMouseUp"))),this._lastX=a.pageX,this._lastY=a.pageY;else this.onDragDetected(a);a.stopPropagation();a.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},
onSelectStart:function(a){this.skip&&n.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){l.publish("/dnd/move/start",a);b.add(r.body(),"dojoMove");b.add(this.node,"dojoMoveItem")},onMoveStop:function(a){l.publish("/dnd/move/stop",a);b.remove(r.body(),"dojoMove");b.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var f=a.node.style;f.left=b.l+"px";f.top=b.t+
"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(e,h,d,a){var b=d.getObject("dojo.dnd",!0);b.getCopyKeyState=function(a){return a[e("mac")?"metaKey":"ctrlKey"]};b._uniqueId=0;b.getUniqueId=function(){var c;do c=h._scopeName+"Unique"+ ++b._uniqueId;while(a.byId(c));return c};b._empty={};b.isFormElement=function(a){a=a.target;3==a.nodeType&&(a=a.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+
a.tagName.toLowerCase()+" ")};return b})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u,r){return h("dojo.dnd.Mover",[l],{constructor:function(a,b,e){function k(a){a.preventDefault();a.stopPropagation()}this.node=c.byId(a);this.marginBox={l:b.pageX,t:b.pageY};this.mouseButton=b.button;b=this.host=e;a=a.ownerDocument;
this.events=[g(a,n.move,d.hitch(this,"onFirstMove")),g(a,n.move,d.hitch(this,"onMouseMove")),g(a,n.release,d.hitch(this,"onMouseUp")),g(a,"dragstart",k),g(a.body,"selectstart",k)];r.autoScrollStart(a);if(b&&b.onMoveStart)b.onMoveStart(this)},onMouseMove:function(a){r.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(b){(a("webkit")&&a("mac")&&2==this.mouseButton?0==b.button:this.mouseButton==b.button)&&
this.destroy();b.preventDefault();b.stopPropagation()},onFirstMove:function(a){var c=this.node.style,g,d=this.host;switch(c.position){case "relative":case "absolute":g=Math.round(parseFloat(c.left))||0;c=Math.round(parseFloat(c.top))||0;break;default:c.position="absolute";c=m.getMarginBox(this.node);g=b.doc.body;var e=k.getComputedStyle(g),f=m.getMarginBox(g,e),e=m.getContentBox(g,e);g=c.l-(e.l-f.l);c=c.t-(e.t-f.t)}this.marginBox.l=g-this.marginBox.l;this.marginBox.t=c-this.marginBox.t;if(d&&d.onFirstMove)d.onFirstMove(this,
a);this.events.shift().remove()},destroy:function(){e.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(e,h,d,a,b,c){var m={};e.setObject("dojo.dnd.autoscroll",m);m.getViewport=c.getBox;m.V_TRIGGER_AUTOSCROLL=32;m.H_TRIGGER_AUTOSCROLL=32;m.V_AUTOSCROLL_VALUE=16;m.H_AUTOSCROLL_VALUE=
16;var k,l=d.doc,g=Infinity,n=Infinity;m.autoScrollStart=function(a){l=a;k=c.getBox(l);a=d.body(l).parentNode;g=Math.max(a.scrollHeight-k.h,0);n=Math.max(a.scrollWidth-k.w,0)};m.autoScroll=function(a){var b=k||c.getBox(l),e=d.body(l).parentNode,u=0,q=0;a.clientX<m.H_TRIGGER_AUTOSCROLL?u=-m.H_AUTOSCROLL_VALUE:a.clientX>b.w-m.H_TRIGGER_AUTOSCROLL&&(u=Math.min(m.H_AUTOSCROLL_VALUE,n-e.scrollLeft));a.clientY<m.V_TRIGGER_AUTOSCROLL?q=-m.V_AUTOSCROLL_VALUE:a.clientY>b.h-m.V_TRIGGER_AUTOSCROLL&&(q=Math.min(m.V_AUTOSCROLL_VALUE,
g-e.scrollTop));window.scrollBy(u,q)};m._validNodes={div:1,p:1,td:1};m._validOverflow={auto:1,scroll:1};m.autoScrollNodes=function(c){for(var g,e,k,l,n,u=0,f=0,p=c.target;p;){if(1==p.nodeType&&p.tagName.toLowerCase()in m._validNodes){k=b.getComputedStyle(p);n=k.overflowX.toLowerCase()in m._validOverflow;l=k.overflowY.toLowerCase()in m._validOverflow;if(n||l)g=a.getContentBox(p,k),e=a.position(p,!0);if(n){k=Math.min(m.H_TRIGGER_AUTOSCROLL,g.w/2);n=c.pageX-e.x;if(h("webkit")||h("opera"))n+=d.body().scrollLeft;
u=0;0<n&&n<g.w&&(n<k?u=-k:n>g.w-k&&(u=k),p.scrollLeft+=u)}if(l){l=Math.min(m.V_TRIGGER_AUTOSCROLL,g.h/2);k=c.pageY-e.y;if(h("webkit")||h("opera"))k+=d.body().scrollTop;f=0;0<k&&k<g.h&&(k<l?f=-l:k>g.h-l&&(f=l),p.scrollTop+=f)}if(u||f)return}try{p=p.parentNode}catch(z){p=null}}m.autoScroll(c)};return m})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(e,h){var d=h.prototype.onMove;return e("dojo.dnd.TimedMoveable",h,{timeout:40,constructor:function(a,b){b||(b=
{});b.timeout&&"number"==typeof b.timeout&&0<=b.timeout&&(this.timeout=b.timeout)},onMoveStop:function(a){a._timer&&(clearTimeout(a._timer),d.call(this,a,a._leftTop));h.prototype.onMoveStop.apply(this,arguments)},onMove:function(a,b){a._leftTop=b;if(!a._timer){var c=this;a._timer=setTimeout(function(){a._timer=null;d.call(c,a,a._leftTop)},this.timeout)}}})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v){var x,f,p=new (h([u,m],{curNode:null,activeStack:[],constructor:function(){var a=k.hitch(this,function(a){d.isDescendant(this.curNode,a)&&this.set("curNode",null);d.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});e.before(c,"empty",a);e.before(c,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,f){var b=this,c=a.document&&a.document.body;if(c){var g=n("pointer-events")?"pointerdown":n("MSPointer")?
"MSPointerDown":n("touch-events")?"mousedown, touchstart":"mousedown",d=l(a.document,g,function(a){a&&a.target&&null==a.target.parentNode||b._onTouchNode(f||a.target,"mouse")}),e=l(c,"focusin",function(a){if(a.target.tagName){var c=a.target.tagName.toLowerCase();"#document"!=c&&"body"!=c&&(w.isFocusable(a.target)?b._onFocusNode(f||a.target):b._onTouchNode(f||a.target))}}),p=l(c,"focusout",function(a){b._onBlurNode(f||a.target)});return{remove:function(){d.remove();e.remove();p.remove();c=d=e=p=null}}}},
_onBlurNode:function(a){a=(new Date).getTime();a<x+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(k.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<f+100||(this._clearActiveWidgetsTimer=setTimeout(k.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(c,g){f=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);b.contains(c,"dijitPopup")&&(c=c.firstChild);var d=[];try{for(;c;){var e=a.get(c,"dijitPopupParent");if(e)c=q.byId(e).domNode;else if(c.tagName&&"body"==c.tagName.toLowerCase()){if(c===r.body())break;c=t.get(c.ownerDocument).frameElement}else{var p=c.getAttribute&&c.getAttribute("widgetId"),k=p&&q.byId(p);!k||"mouse"==g&&k.get("disabled")||d.unshift(p);c=c.parentNode}}}catch(E){}this._setStack(d,
g)},_onFocusNode:function(a){a&&9!=a.nodeType&&(x=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,f){var b=this.activeStack,c=b.length-1,g=a.length-1;if(a[g]!=b[c]){this.set("activeStack",a);var d;for(d=c;0<=d&&b[d]!=a[d];d--)if(c=q.byId(b[d]))c._hasBeenBlurred=!0,c.set("focused",!1),c._focusManager==this&&c._onBlur(f),
this.emit("widget-blur",c,f);for(d++;d<=g;d++)if(c=q.byId(a[d]))c.set("focused",!0),c._focusManager==this&&c._onFocus(f),this.emit("widget-focus",c,f)}},focus:function(a){if(a)try{a.focus()}catch(A){}}}));g(function(){var a=p.registerWin(t.get(document));n("ie")&&l(window,"unload",function(){a&&(a.remove(),a=null)})});v.focus=function(a){p.focus(a)};for(var z in p)/^_/.test(z)||(v.focus[z]="function"==typeof p[z]?k.hitch(p,z):p[z]);p.watch(function(a,f,b){v.focus[a]=b});return p})},"dojo/Stateful":function(){define(["./_base/declare",
"./_base/lang","./_base/array","./when"],function(e,h,d,a){return e("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;return b[a]?b[a]:b[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,c){return"function"===typeof this[c.g]?this[c.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(b,c){if("object"===typeof b){for(var d in b)b.hasOwnProperty(d)&&"_watchCallbacks"!=d&&this.set(d,
b[d]);return this}d=this._getAttrNames(b);var e=this._get(b,d);d=this[d.s];var l;"function"===typeof d?l=d.apply(this,Array.prototype.slice.call(arguments,1)):this[b]=c;if(this._watchCallbacks){var g=this;a(l,function(){g._watchCallbacks(b,e,c)})}return this},_changeAttrValue:function(a,c){var b=this.get(a);this[a]=c;this._watchCallbacks&&this._watchCallbacks(a,b,c);return this},watch:function(a,c){var b=this._watchCallbacks;if(!b)var e=this,b=this._watchCallbacks=function(a,c,d,k){var g=function(b){if(b){b=
b.slice();for(var g=0,k=b.length;g<k;g++)b[g].call(e,a,c,d)}};g(b["_"+a]);k||g(b["*"])};c||"function"!==typeof a?a="_"+a:(c=a,a="*");var l=b[a];"object"!==typeof l&&(l=b[a]=[]);l.push(c);a={};a.unwatch=a.remove=function(){var a=d.indexOf(l,c);-1<a&&l.splice(a,1)};return a}})})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(e,h,d,a,b,c,m){var k={_isElementShown:function(b){var c=a.get(b);return"hidden"!=
c.visibility&&"collapsed"!=c.visibility&&"none"!=c.display&&"hidden"!=d.get(b,"type")},hasDefaultTabStop:function(a){switch(a.nodeName.toLowerCase()){case "a":return d.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var c=a.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;b=c.body}catch(u){try{b=a.contentWindow.document.body}catch(r){return!1}}return b&&("true"==b.contentEditable||b.firstChild&&"true"==
b.firstChild.contentEditable);default:return"true"==a.contentEditable}},effectiveTabIndex:function(a){if(!d.get(a,"disabled"))return d.has(a,"tabIndex")?+d.get(a,"tabIndex"):k.hasDefaultTabStop(a)?0:void 0},isTabNavigable:function(a){return 0<=k.effectiveTabIndex(a)},isFocusable:function(a){return-1<=k.effectiveTabIndex(a)},_getTabNavigable:function(a){function b(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}function e(a){return x[b(a)]||
a}var l,m,h,w,q,v,x={},f=k._isElementShown,p=k.effectiveTabIndex,z=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||9>=c("ie")&&"HTML"!==a.scopeName)&&f(a)){var g=p(a);if(0<=g){if(0==g)l||(l=a),m=a;else if(0<g){if(!h||g<w)w=g,h=a;if(!q||g>=v)v=g,q=a}g=b(a);d.get(a,"checked")&&g&&(x[g]=a)}"SELECT"!=a.nodeName.toUpperCase()&&z(a)}};f(a)&&z(a);return{first:e(l),last:e(m),lowest:e(h),highest:e(q)}},getFirstInTabbingOrder:function(a,b){a=k._getTabNavigable(h.byId(a,b));return a.lowest?
a.lowest:a.first},getLastInTabbingOrder:function(a,b){a=k._getTabNavigable(h.byId(a,b));return a.last?a.last:a.highest}};b.mixin(m,k);return k})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(e,h,d,a,b){var c={};e.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(b){c[b]=a[b]});d.mixin(c,{defaultDuration:h.defaultDuration||200});d.mixin(b,c);return b})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r){function t(){}function w(a){return function(b,c,f,g){return b&&"string"==typeof c&&b[c]==t?b.on(c.substring(2).toLowerCase(),m.hitch(f,g)):a.apply(d,arguments)}}e.around(d,"connect",w);c.connect&&e.around(c,"connect",w);e=a("dijit._Widget",[n,u,r],{onClick:t,onDblClick:t,onKeyDown:t,onKeyPress:t,onKeyUp:t,onMouseDown:t,onMouseMove:t,onMouseOut:t,onMouseOver:t,onMouseLeave:t,onMouseEnter:t,onMouseUp:t,constructor:function(a){this._toConnect={};for(var b in a)this[b]===
t&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===t?d.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){c.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){c.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?k("[widgetId]",this.containerNode).map(g.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});b("dijit-legacy-requires")&&l(0,function(){require(["dijit/_base"])});
return e})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(e,h,d,a,b,c,m,k){function l(a,c){var f=function(f,b){if("string"==typeof b&&(b=d.byId(b),!b))return new c([]);f="string"==typeof f?a(f,b):f?f.end&&f.on?f:[f]:[];return f.end&&f.on?f:new c(f)};f.matches=a.match||function(a,b,c){return 0<f.filter([a],b,c).length};f.filter=a.filter||function(a,c,g){return f(c,g).filter(function(f){return-1<
b.indexOf(a,f)})};if("function"!=typeof a){var g=a.search;a=function(a,f){return g(f||document,a)}}return f}h.add("array-extensible",function(){return 1==c.delegate([],{length:1}).length&&!h("bug-for-in-skips-shadowed")});var g=Array.prototype,n=g.slice,u=g.concat,r=b.forEach,t=function(a,b,c){b=[0].concat(n.call(b,0));c=c||e.global;return function(f){b[0]=f;return a.apply(c,b)}},w=function(a){var f=this instanceof q&&h("array-extensible");"number"==typeof a&&(a=Array(a));var b=a&&"length"in a?a:
arguments;if(f||!b.sort){for(var g=f?this:[],d=g.length=b.length,e=0;e<d;e++)g[e]=b[e];if(f)return g;b=g}c._mixin(b,v);b._NodeListCtor=function(a){return q(a)};return b},q=w,v=q.prototype=h("array-extensible")?[]:{};q._wrap=v._wrap=function(a,b,c){a=new (c||this._NodeListCtor||q)(a);return b?a._stash(b):a};q._adaptAsMap=function(a,b){return function(){return this.map(t(a,arguments,b))}};q._adaptAsForEach=function(a,b){return function(){this.forEach(t(a,arguments,b));return this}};q._adaptAsFilter=
function(a,b){return function(){return this.filter(t(a,arguments,b))}};q._adaptWithCondition=function(a,b,c){return function(){var f=arguments,g=t(a,f,c);if(b.call(c||e.global,f))return this.map(g);this.forEach(g);return this}};r(["slice","splice"],function(a){var f=g[a];v[a]=function(){return this._wrap(f.apply(this,arguments),"slice"==a?this:null)}});r(["indexOf","lastIndexOf","every","some"],function(a){var f=b[a];v[a]=function(){return f.apply(e,[this].concat(n.call(arguments,0)))}});c.extend(w,
{constructor:q,_NodeListCtor:q,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(f,b){var c=this.map(function(c){return a(c,f,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var f=n.call(this,0),c=b.map(arguments,function(a){return n.call(a,0)});return this._wrap(u.apply(f,c),this)},map:function(a,c){return this._wrap(b.map(this,
a,c),this)},forEach:function(a,b){r(this,a,b);return this},filter:function(a){var f=arguments,c=this,g=0;if("string"==typeof a){c=x._filterResult(this,f[0]);if(1==f.length)return c._stash(this);g=1}return this._wrap(b.filter(c,f[g],f[g+1]),this)},instantiate:function(a,b){var f=c.isFunction(a)?a:c.getObject(a);b=b||{};return this.forEach(function(a){new f(b,a)})},at:function(){var a=new this._NodeListCtor(0);r(arguments,function(f){0>f&&(f=this.length+f);this[f]&&a.push(this[f])},this);return a._stash(this)}});
var x=l(k,w);e.query=l(k,function(a){return w(a)});x.load=function(a,b,c){m.load(a,b,function(a){c(l(a,w))})};e._filterQueryResult=x._filterResult=function(a,b,c){return new w(x.filter(a,b,c))};e.NodeList=x.NodeList=w;return x})},"dojo/selector/_loader":function(){define(["../has","require"],function(e,h){if("undefined"!==typeof document){var d=document.createElement("div");e.add("dom-qsa2.1",!!d.querySelectorAll);e.add("dom-qsa3",function(){try{return d.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",
1==d.querySelectorAll(".TEST:empty").length}catch(b){}})}var a;return{load:function(b,c,d,k){if(k&&k.isBuild)d();else{k=h;b="default"==b?e("config-selectorEngine")||"css3":b;b="css2"==b||"lite"==b?"./lite":"css2.1"==b?e("dom-qsa2.1")?"./lite":"./acme":"css3"==b?e("dom-qsa3")?"./lite":"./acme":"acme"==b?"./acme":(k=c)&&b;if("?"==b.charAt(b.length-1)){b=b.substring(0,b.length-1);var l=!0}if(l&&(e("dom-compliant-qsa")||a))return d(a);k([b],function(c){"./lite"!=b&&(a=c);d(c)})}}}})},"dojo/selector/acme":function(){define(["../dom",
"../sniff","../_base/array","../_base/lang","../_base/window"],function(e,h,d,a,b){var c=a.trim,m=d.forEach,k="BackCompat"==b.doc.compatMode,l=!1,g=function(){return!0},n=function(a){a=0<="\x3e~+".indexOf(a.slice(-1))?a+" * ":a+" ";for(var f=function(f,b){return c(a.slice(f,b))},b=[],g=-1,d=-1,e=-1,p=-1,k=-1,m=-1,n=-1,v,u="",h="",q,x=0,z=a.length,t=null,r=null,w=function(){0<=m&&(t.id=f(m,x).replace(/\\/g,""),m=-1);if(0<=n){var a=n==x?null:f(n,x);t[0>"\x3e~+".indexOf(a)?"tag":"oper"]=a;n=-1}0<=k&&
(t.classes.push(f(k+1,x).replace(/\\/g,"")),k=-1)};u=h,h=a.charAt(x),x<z;x++)"\\"!=u&&(t||(q=x,t={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return l?this.otag:this.tag}},n=x),v?h==v&&(v=null):"'"==h||'"'==h?v=h:0<=g?"]"==h?(r.attr?r.matchFor=f(e||g+1,x):r.attr=f(g+1,x),!(g=r.matchFor)||'"'!=g.charAt(0)&&"'"!=g.charAt(0)||(r.matchFor=g.slice(1,-1)),r.matchFor&&(r.matchFor=r.matchFor.replace(/\\/g,"")),t.attrs.push(r),r=null,g=e=-1):"\x3d"==h&&(e=0<="|~^$*".indexOf(u)?
u:"",r.type=e+h,r.attr=f(g+1,x-e.length),e=x+1):0<=d?")"==h&&(0<=p&&(r.value=f(d+1,x)),p=d=-1):"#"==h?(w(),m=x+1):"."==h?(w(),k=x):":"==h?(w(),p=x):"["==h?(w(),g=x,r={}):"("==h?(0<=p&&(r={name:f(p+1,x),value:null},t.pseudos.push(r)),d=x):" "==h&&u!=h&&(w(),0<=p&&t.pseudos.push({name:f(p+1,x)}),t.loops=t.pseudos.length||t.attrs.length||t.classes.length,t.oquery=t.query=f(q,x),t.otag=t.tag=t.oper?null:t.tag||"*",t.tag&&(t.tag=t.tag.toUpperCase()),b.length&&b[b.length-1].oper&&(t.infixOper=b.pop(),t.query=
t.infixOper.query+" "+t.query),b.push(t),t=null));return b},u=function(a,f){return a?f?function(){return a.apply(window,arguments)&&f.apply(window,arguments)}:a:f},r=function(a,f){f=f||[];a&&f.push(a);return f},t=function(a){return 1==a.nodeType},w=function(a,f){return a?"class"==f?a.className||"":"for"==f?a.htmlFor||"":"style"==f?a.style.cssText||"":(l?a.getAttribute(f):a.getAttribute(f,2))||"":""},q={"*\x3d":function(a,f){return function(b){return 0<=w(b,a).indexOf(f)}},"^\x3d":function(a,f){return function(b){return 0==
w(b,a).indexOf(f)}},"$\x3d":function(a,f){return function(b){b=" "+w(b,a);var c=b.lastIndexOf(f);return-1<c&&c==b.length-f.length}},"~\x3d":function(a,f){var b=" "+f+" ";return function(f){return 0<=(" "+w(f,a)+" ").indexOf(b)}},"|\x3d":function(a,f){var b=f+"-";return function(c){c=w(c,a);return c==f||0==c.indexOf(b)}},"\x3d":function(a,f){return function(b){return w(b,a)==f}}};a=b.doc.documentElement;var v=!(a.nextElementSibling||"nextElementSibling"in a),x=v?"nextSibling":"nextElementSibling",
f=v?"previousSibling":"previousElementSibling",p=v?t:g,z=function(a){for(;a=a[f];)if(p(a))return!1;return!0},y=function(a){for(;a=a[x];)if(p(a))return!1;return!0},A=function(a){var f=a.parentNode,f=7!=f.nodeType?f:f.nextSibling,b=0,c=f.children||f.childNodes,g=a._i||a.getAttribute("_i")||-1,d=f._l||("undefined"!==typeof f.getAttribute?f.getAttribute("_l"):-1);if(!c)return-1;c=c.length;if(d==c&&0<=g&&0<=d)return g;h("ie")&&"undefined"!==typeof f.setAttribute?f.setAttribute("_l",c):f._l=c;g=-1;for(f=
f.firstElementChild||f.firstChild;f;f=f[x])p(f)&&(h("ie")?f.setAttribute("_i",++b):f._i=++b,a===f&&(g=b));return g},B=function(a){return!(A(a)%2)},D=function(a){return A(a)%2},F={checked:function(a,f){return function(a){return!("checked"in a?!a.checked:!a.selected)}},disabled:function(a,f){return function(a){return a.disabled}},enabled:function(a,f){return function(a){return!a.disabled}},"first-child":function(){return z},"last-child":function(){return y},"only-child":function(a,f){return function(a){return z(a)&&
y(a)}},empty:function(a,f){return function(a){var f=a.childNodes;for(a=a.childNodes.length-1;0<=a;a--){var b=f[a].nodeType;if(1===b||3==b)return!1}return!0}},contains:function(a,f){a=f.charAt(0);if('"'==a||"'"==a)f=f.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(f)}},not:function(a,f){a=n(f)[0];f={el:1};"*"!=a.tag&&(f.tag=1);a.classes.length||(f.classes=1);var b=E(a,f);return function(a){return!b(a)}},"nth-child":function(a,f){a=parseInt;if("odd"==f)return D;if("even"==f)return B;if(-1!=
f.indexOf("n")){f=f.split("n",2);var b=f[0]?"-"==f[0]?-1:a(f[0]):1,c=f[1]?a(f[1]):0,g=0,d=-1;0<b?0>c?c=c%b&&b+c%b:0<c&&(c>=b&&(g=c-c%b),c%=b):0>b&&(b*=-1,0<c&&(d=c,c%=b));if(0<b)return function(a){a=A(a);return a>=g&&(0>d||a<=d)&&a%b==c};f=c}var e=a(f);return function(a){return A(a)==e}}},C=9>h("ie")||9==h("ie")&&h("quirks")?function(a){var f=a.toLowerCase();"class"==f&&(a="className");return function(b){return l?b.getAttribute(a):b[a]||b[f]}}:function(a){return function(f){return f&&f.getAttribute&&
f.hasAttribute(a)}},E=function(a,f){if(!a)return g;f=f||{};var b=null;"el"in f||(b=u(b,t));"tag"in f||"*"!=a.tag&&(b=u(b,function(f){return f&&(l?f.tagName:f.tagName.toUpperCase())==a.getTag()}));"classes"in f||m(a.classes,function(a,f,c){var g=new RegExp("(?:^|\\s)"+a+"(?:\\s|$)");b=u(b,function(a){return g.test(a.className)});b.count=f});"pseudos"in f||m(a.pseudos,function(a){var f=a.name;F[f]&&(b=u(b,F[f](f,a.value)))});"attrs"in f||m(a.attrs,function(a){var f,c=a.attr;a.type&&q[a.type]?f=q[a.type](c,
a.matchFor):c.length&&(f=C(c));f&&(b=u(b,f))});"id"in f||a.id&&(b=u(b,function(f){return!!f&&f.id==a.id}));b||"default"in f||(b=g);return b},G=function(a){return function(f,b,c){for(;f=f[x];)if(!v||t(f)){c&&!Z(f,c)||!a(f)||b.push(f);break}return b}},K=function(a){return function(f,b,c){for(f=f[x];f;){if(p(f)){if(c&&!Z(f,c))break;a(f)&&b.push(f)}f=f[x]}return b}},L=function(a,f){var b=function(a){var f=[];try{f=Array.prototype.slice.call(a)}catch(wa){for(var b=0,c=a.length;b<c;b++)f.push(a[b])}return f};
a=a||g;return function(c,g,e){var k=0,l=[],l=b(c.children||c.childNodes);for(f&&d.forEach(l,function(a){1===a.nodeType&&(l=l.concat(b(a.getElementsByTagName("*"))))});c=l[k++];)p(c)&&(!e||Z(c,e))&&a(c,k)&&g.push(c);return g}},H=function(a,f){for(a=a.parentNode;a&&a!=f;)a=a.parentNode;return!!a},I={},N=function(a){var f=I[a.query];if(f)return f;var c=a.infixOper,c=c?c.oper:"",p=E(a,{el:1}),l="*"==a.tag,m=b.doc.getElementsByClassName;if(c)m={el:1},l&&(m.tag=1),p=E(a,m),"+"==c?f=G(p):"~"==c?f=K(p):"\x3e"==
c&&(f=L(p));else if(a.id)p=!a.loops&&l?g:E(a,{el:1,id:1}),f=function(f,b){var c=e.byId(a.id,f.ownerDocument||f);f.ownerDocument&&!H(f,f.ownerDocument)&&d.some(11===f.nodeType?f.childNodes:[f],function(f){f=L(function(f){return f.id===a.id},!0)(f,[]);if(f.length)return c=f[0],!1});if(c&&p(c)&&(9==f.nodeType||H(c,f)))return r(c,b)};else if(m&&/\{\s*\[native code\]\s*\}/.test(String(m))&&a.classes.length&&!k)var p=E(a,{el:1,classes:1,id:1}),n=a.classes.join(" "),f=function(a,f,b){f=r(0,f);for(var c,
g=0,d=a.getElementsByClassName(n);c=d[g++];)p(c,a)&&Z(c,b)&&f.push(c);return f};else l||a.loops?(p=E(a,{el:1,tag:1,id:1}),f=function(f,b,c){b=r(0,b);for(var g,d=0,e=(g=a.getTag())?f.getElementsByTagName(g):[];g=e[d++];)p(g,f)&&Z(g,c)&&b.push(g);return b}):f=function(f,b,c){b=r(0,b);for(var g=0,d=a.getTag(),d=d?f.getElementsByTagName(d):[];f=d[g++];)Z(f,c)&&b.push(f);return b};return I[a.query]=f},S={},M={},ca=function(a){var f=n(c(a));if(1==f.length){var b=N(f[0]);return function(a){if(a=b(a,[]))a.nozip=
!0;return a}}return function(a){a=r(a);for(var b,c,g=f.length,d,e,p=0;p<g;p++){e=[];b=f[p];c=a.length-1;0<c&&(d={},e.nozip=!0);c=N(b);for(var k=0;b=a[k];k++)c(b,e,d);if(!e.length)break;a=e}return e}},O=h("ie")?"commentStrip":"nozip",P=!!b.doc.querySelectorAll,W=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,aa=function(a,f,b,c){return b?(f?f+" ":"")+b+(c?" "+c:""):a},R=/([^[]*)([^\]]*])?/g,T=function(a,f,b){return f.replace(W,aa)+(b||"")},ba=function(a,f){a=a.replace(R,T);if(P){var b=M[a];if(b&&!f)return b}if(b=
S[a])return b;var b=a.charAt(0),c=-1==a.indexOf(" ");0<=a.indexOf("#")&&c&&(f=!0);if(!P||f||-1!="\x3e~+".indexOf(b)||h("ie")&&-1!=a.indexOf(":")||k&&0<=a.indexOf(".")||-1!=a.indexOf(":contains")||-1!=a.indexOf(":checked")||-1!=a.indexOf("|\x3d")){var g=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return S[a]=2>g.length?ca(a):function(a){for(var f=0,b=[],c;c=g[f++];)b=b.concat(ca(c)(a));return b}}var d=0<="\x3e~+".indexOf(a.charAt(a.length-1))?a+" *":a;return M[a]=function(f){if(9==
f.nodeType||c)try{var b=f.querySelectorAll(d);b[O]=!0;return b}catch(xa){}return ba(a,!0)(f)}},U=0,ea=h("ie")?function(a){return l?a.getAttribute("_uid")||a.setAttribute("_uid",++U)||U:a.uniqueID}:function(a){return a._uid||(a._uid=++U)},Z=function(a,f){if(!f)return 1;a=ea(a);return f[a]?0:f[a]=1},fa=function(a){if(a&&a.nozip)return a;if(!a||!a.length)return[];if(2>a.length)return[a[0]];var f=[];U++;var b,c;if(h("ie")&&l){var g=U+"";for(b=0;b<a.length;b++)(c=a[b])&&c.getAttribute("_zipIdx")!=g&&(f.push(c),
c.setAttribute("_zipIdx",g))}else if(h("ie")&&a.commentStrip)try{for(b=0;b<a.length;b++)(c=a[b])&&t(c)&&f.push(c)}catch(ib){}else for(b=0;b<a.length;b++)(c=a[b])&&c._zipIdx!=U&&(f.push(c),c._zipIdx=U);return f},ja=function(a,f){f=f||b.doc;l="div"===(f.ownerDocument||f).createElement("div").tagName;return(a=ba(a)(f))&&a.nozip?a:fa(a)};ja.filter=function(a,f,b){for(var c=[],g=n(f),g=1!=g.length||/[^\w#\.]/.test(f)?function(a){return-1!=d.indexOf(ja(f,e.byId(b)),a)}:E(g[0]),p=0,k;k=a[p];p++)g(k)&&c.push(k);
return c};return ja})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y,A){function B(a){return function(f){k[f?
"set":"remove"](this.domNode,a,f);this._set(a,f)}}r.add("dijit-legacy-requires",!t.isAsync);r.add("dojo-bidi",!1);r("dijit-legacy-requires")&&v(0,function(){e(["dijit/_base/manager"])});var D={};a=c("dijit._WidgetBase",[x,z],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:B("lang"),dir:"",_setDirAttr:B("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",
a)},attributeMap:{},_blankGif:a.blankGif||e.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var f=a.prototype,b=a._setterAttrs=[],a=a._onMap={},c;for(c in f.attributeMap)b.push(c);for(c in f)/^on/.test(c)&&(a[c.substring(2).toLowerCase()]=c),/^_set[A-Z](.*)Attr$/.test(c)&&(c=c.charAt(4).toLowerCase()+c.substr(5,c.length-9),f.attributeMap&&c in f.attributeMap||b.push(c))}},postscript:function(a,f){this.create(a,f)},create:function(a,f){this._introspect();
this.srcNodeRef=m.byId(f);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,w.mixin(this,a));this.postMixInProperties();this.id||(this.id=A.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=p.body(this.ownerDocument);A.add(this);
this.buildRendering();var b;this.domNode&&(this._applyAttributes(),(a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),b=!0),this.domNode.setAttribute("widgetId",this.id));this.postCreate();b&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},f;for(f in this.params||{})a[f]=this._get(f);h.forEach(this.constructor._setterAttrs,function(f){if(!(f in a)){var b=this._get(f);b&&this.set(f,b)}},this);for(f in a)this.set(f,a[f])},postMixInProperties:function(){},
buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(h.map(a,function(a){return a+"Rtl"})));l.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,h.forEach(this.getChildren(),function(a){a._started||a._destroyed||!w.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=
!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function f(f){f.destroyRecursive?f.destroyRecursive(a):f.destroy&&f.destroy(a)}this._beingDestroyed=!0;this.uninitialize();h.forEach(this._connects,w.hitch(this,"disconnect"));h.forEach(this._supportingWidgets,f);this.domNode&&h.forEach(A.findWidgets(this.domNode,this.containerNode),f);this.destroyRendering(a);A.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);
this.domNode&&(a?k.remove(this.domNode,"widgetId"):g.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||g.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){h.forEach(this.getChildren(),function(f){f.destroyRecursive&&f.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var f=this.domNode;w.isObject(a)?u.set(f,a):f.style.cssText=f.style.cssText?f.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,f,b){b=3<=
arguments.length?b:this.attributeMap[a];h.forEach(w.isArray(b)?b:[b],function(b){var c=this[b.node||b||"domNode"];switch(b.type||"attribute"){case "attribute":w.isFunction(f)&&(f=w.hitch(this,f));b=b.attribute?b.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;c.tagName?k.set(c,b,f):c.set(b,f);break;case "innerText":c.innerHTML="";c.appendChild(this.ownerDocument.createTextNode(f));break;case "innerHTML":c.innerHTML=f;break;case "class":l.replace(c,f,this[a]);break;case "toggleClass":l.toggle(c,
b.className||a,f)}},this)},get:function(a){var f=this._getAttrNames(a);return this[f.g]?this[f.g]():this._get(a)},set:function(a,f){if("object"===typeof a){for(var b in a)this.set(b,a[b]);return this}b=this._getAttrNames(a);var c=this[b.s];if(w.isFunction(c))var g=c.apply(this,Array.prototype.slice.call(arguments,1));else{var c=this.focusNode&&!w.isFunction(this.focusNode)?"focusNode":"domNode",d=this[c]&&this[c].tagName,e;if((e=d)&&!(e=D[d])){e=this[c];var p={},k;for(k in e)p[k.toLowerCase()]=!0;
e=D[d]=p}k=e;b=a in this.attributeMap?this.attributeMap[a]:b.s in this?this[b.s]:k&&b.l in k&&"function"!=typeof f||/^aria-|^data-|^role$/.test(a)?c:null;null!=b&&this._attrToDom(a,f,b);this._set(a,f)}return g||this},_attrPairNames:{},_getAttrNames:function(a){var f=this._attrPairNames;if(f[a])return f[a];var b=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return f[a]={n:a+"Node",s:"_set"+b+"Attr",g:"_get"+b+"Attr",l:b.toLowerCase()}},_set:function(a,f){var b=
this[a];this[a]=f;!this._created||b===f||b!==b&&f!==f||(this._watchCallbacks&&this._watchCallbacks(a,b,f),this.emit("attrmodified-"+a,{detail:{prevValue:b,newValue:f}}))},_get:function(a){return this[a]},emit:function(a,f,b){f=f||{};void 0===f.bubbles&&(f.bubbles=!0);void 0===f.cancelable&&(f.cancelable=!0);f.detail||(f.detail={});f.detail.widget=this;var c,g=this["on"+a];g&&(c=g.apply(this,b?b:[f]));this._started&&!this._beingDestroyed&&q.emit(this.domNode,a.toLowerCase(),f);return c},on:function(a,
f){var b=this._onMap(a);return b?d.after(this,b,f,!0):this.own(q(this.domNode,a,f))[0]},_onMap:function(a){var f=this.constructor,b=f._onMap;if(!b){var b=f._onMap={},c;for(c in f.prototype)/^on/.test(c)&&(b[c.replace(/^on/,"").toLowerCase()]=c)}return b["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?A.findWidgets(this.containerNode):[]},getParent:function(){return A.getEnclosingWidget(this.domNode.parentNode)},
connect:function(a,f,c){return this.own(b.connect(a,f,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(f.subscribe(a,w.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():n.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=u.get(this.domNode,"display")},placeAt:function(a,f){var b=!a.tagName&&A.byId(a);!b||!b.addChild||f&&"number"!==typeof f?(a=b&&"domNode"in
b?b.containerNode&&!/after|before|replace/.test(f||"")?b.containerNode:b.domNode:m.byId(a,this.ownerDocument),g.place(this.domNode,a,f),!this._started&&(this.getParent()||{})._started&&this.startup()):b.addChild(this,f);return this},defer:function(a,f){var b=setTimeout(w.hitch(this,function(){b&&(b=null,this._destroyed||w.hitch(this,a)())}),f||0);return{remove:function(){b&&(clearTimeout(b),b=null);return null}}}});r("dojo-bidi")&&a.extend(y);return a})},"dijit/Destroyable":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare"],function(e,h,d){return d("dijit.Destroyable",null,{destroy:function(a){this._destroyed=!0},own:function(){var a=["destroyRecursive","destroy","remove"];e.forEach(arguments,function(b){function c(){k.remove();e.forEach(l,function(a){a.remove()})}var d,k=h.before(this,"destroy",function(a){b[d](a)}),l=[];b.then?(d="cancel",b.then(c,c)):e.forEach(a,function(a){"function"===typeof b[a]&&(d||(d=a),l.push(h.after(b,a,c,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),
function(e,h,d,a,b,c){e=a("dijit._OnDijitClickMixin",null,{connect:function(a,b,d){return this.inherited(arguments,[a,"ondijitclick"==b?c:b,d])}});e.a11yclick=c;return e})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(e,h,d,a){function b(a){if((a.keyCode===e.ENTER||a.keyCode===e.SPACE)&&!/input|button|textarea/i.test(a.target.nodeName))for(a=a.target;a;a=a.parentNode)if(a.dojoClick)return!0}var c;d(document,"keydown",function(a){b(a)?(c=a.target,a.preventDefault()):
c=null});d(document,"keyup",function(a){b(a)&&a.target==c&&(c=null,d.emit(a.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey,altKey:a.altKey,_origType:a.type}))});var m=function(a,b){a.dojoClick=!0;return d(a,"click",b)};m.click=m;m.press=function(b,c){var g=d(b,a.press,function(a){("mousedown"!=a.type||h.isLeft(a))&&c(a)}),k=d(b,"keydown",function(a){a.keyCode!==e.ENTER&&a.keyCode!==e.SPACE||c(a)});return{remove:function(){g.remove();k.remove()}}};
m.release=function(b,c){var g=d(b,a.release,function(a){("mouseup"!=a.type||h.isLeft(a))&&c(a)}),k=d(b,"keyup",function(a){a.keyCode!==e.ENTER&&a.keyCode!==e.SPACE||c(a)});return{remove:function(){g.remove();k.remove()}}};m.move=a.move;return m})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(e,h,d,a){a.extend(h,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});
return d("dijit._FocusMixin",null,{_focusManager:e})})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(e,h,d,a,b){var c=b.doc.documentElement;b=a("ie");var m=a("trident"),k=a("opera"),l=Math.floor,g=a("ff"),n=e.boxModel.replace(/-/,""),k={dj_quirks:a("quirks"),dj_opera:k,dj_khtml:a("khtml"),dj_webkit:a("webkit"),dj_safari:a("safari"),dj_chrome:a("chrome"),dj_edge:a("edge"),dj_gecko:a("mozilla"),dj_ios:a("ios"),dj_android:a("android")};
b&&(k.dj_ie=!0,k["dj_ie"+l(b)]=!0,k.dj_iequirks=a("quirks"));m&&(k.dj_trident=!0,k["dj_trident"+l(m)]=!0);g&&(k["dj_ff"+l(g)]=!0);k["dj_"+n]=!0;var u="",r;for(r in k)k[r]&&(u+=r+" ");c.className=h.trim(c.className+" "+u);d(function(){if(!e.isBodyLtr()){var a="dj_rtl dijitRtl "+u.replace(/ /g,"-rtl ");c.className=h.trim(c.className+" "+a+"dj_rtl dijitRtl "+u.replace(/ /g,"-rtl "))}});return a})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(e,
h,d,a){d(function(){h("highcontrast")&&e.add(a.body(),"dijit_a11y")});return h})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(e,h,d,a,b,c,m){b.add("highcontrast",function(){var c=m.doc.createElement("div");try{c.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(h.blankGif||e.toUrl("./resources/blank.gif"))+'");';m.body().appendChild(c);
var d=a.getComputedStyle(c),g=d.backgroundImage;return d.borderTopColor==d.borderRightColor||g&&("none"==g||"url(invalid-url:)"==g)}catch(n){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+n.toString()),!1}finally{8>=b("ie")?c.outerHTML="":m.body().removeChild(c)}});c(function(){b("highcontrast")&&d.add(m.body(),"dj_a11y")});return b})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),
function(e,h,d,a,b,c,m,k){var l=h("dijit._TemplatedMixin",k,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(b){var c=this.declaredClass,g=this;return m.substitute(b,this,function(b,d){"!"==d.charAt(0)&&(b=a.getObject(d.substr(1),!1,g));if("undefined"==typeof b)throw Error(c+" template:"+d);return null==b?"":"!"==d.charAt(0)?b:this._escapeValue(""+b)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;",
"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=e(this.templatePath,{sanitize:!0}));var b=l.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),c;if(a.isString(b)){if(c=d.toDom(this._stringRepl(b),this.ownerDocument),1!=c.nodeType)throw Error("Invalid template: "+b);}else c=b.cloneNode(!0);this.domNode=c}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);
this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});l._templateCache={};l.getCachedTemplate=function(a,b,c){var g=l._templateCache,e=a,k=g[e];if(k){try{if(!k.ownerDocument||k.ownerDocument==(c||document))return k}catch(q){}d.destroy(k)}a=m.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return g[e]=a;b=d.toDom(a,c);if(1!=b.nodeType)throw Error("Invalid template: "+a);return g[e]=b};c("ie")&&b(window,"unload",function(){var a=
l._templateCache,b;for(b in a){var c=a[b];"object"==typeof c&&d.destroy(c);delete a[b]}});return l})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(e){return e.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./has!host-browser?./request"],function(e,h,d,a){var b;d("host-browser")?b=function(b,c,d){a(b,{sync:!!c,headers:{"X-Requested-With":null}}).then(d)}:h.getText?b=h.getText:console.error("dojo/text plugin failed to load because loader does not support getText");
var c={},m=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},k={},l={};e.cache=function(a,d,e){var g;"string"==typeof a?/\//.test(a)?(g=a,e=d):g=h.toUrl(a.replace(/\./g,"/")+(d?"/"+d:"")):(g=a+"",e=d);a=void 0!=e&&"string"!=typeof e?e.value:e;e=e&&e.sanitize;if("string"==typeof a)return c[g]=a,e?m(a):a;if(null===a)return delete c[g],null;g in c||b(g,!0,function(a){c[g]=
a});return e?m(c[g]):c[g]};return{dynamic:!0,normalize:function(a,b){a=a.split("!");var c=a[0];return(/^\./.test(c)?b(c):c)+(a[1]?"!"+a[1]:"")},load:function(a,d,e){a=a.split("!");var g=1<a.length,n=a[0],h=d.toUrl(a[0]);a="url:"+h;var u=k,v=function(a){e(g?m(a):a)};n in c?u=c[n]:d.cache&&a in d.cache?u=d.cache[a]:h in c&&(u=c[h]);if(u===k)if(l[h])l[h].push(v);else{var x=l[h]=[v];b(h,!d.async,function(a){c[n]=c[h]=a;for(var f=0;f<x.length;)x[f++](a);delete l[h]})}else v(u)}}})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),
function(e,h,d,a,b,c,m,k,l){var g=b.delegate(k,{mouseenter:c.enter,mouseleave:c.leave,keypress:d._keypress}),n;d=a("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||
this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,c,g){var d=!0,e=this.attachScope||this,k=c(a,"dojoAttachPoint")||c(a,"data-dojo-attach-point");if(k)for(var l=k.split(/\s*,\s*/);k=l.shift();)b.isArray(e[k])?e[k].push(a):e[k]=a,d="containerNode"!=k,this._attachPoints.push(k);if(c=c(a,"dojoAttachEvent")||c(a,"data-dojo-attach-event"))for(k=c.split(/\s*,\s*/),l=b.trim;c=k.shift();)if(c){var f=
null;-1!=c.indexOf(":")?(f=c.split(":"),c=l(f[0]),f=l(f[1])):c=l(c);f||(f=c);this._attachEvents.push(g(a,c,b.hitch(e,f)))}return d},_attach:function(a,b,c){b=b.replace(/^on/,"").toLowerCase();b="dijitclick"==b?n||(n=e("./a11yclick")):g[b]||b;return m(a,b,c)},_detachTemplateNodes:function(){var a=this.attachScope||this;h.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];h.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();
this.inherited(arguments)}});b.extend(l,{dojoAttachEvent:"",dojoAttachPoint:""});return d})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u){h=h("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);e.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),
function(a){this.watch(a,c.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes||{})this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",
!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function a(a){b=b.concat(e.map(b,function(f){return f+a}),"dijit"+a)}var b=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(c);this.state&&a(this.state);
this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var c=this.stateNode||this.domNode,g={};e.forEach(c.className.split(" "),function(a){g[a]=!0});"_stateClasses"in this&&e.forEach(this._stateClasses,function(a){delete g[a]});e.forEach(b,function(a){g[a]=!0});var d=[],k;for(k in g)d.push(k);c.className=d.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(b,
c,g){function d(g){a.toggle(b,c+"Active",g)}if(!this.disabled&&!this.readOnly)switch(g.type){case "mouseover":case "MSPointerOver":case "pointerover":a.toggle(b,c+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":a.toggle(b,c+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":d(!0);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":a.toggle(b,
c+"Focused",!0);break;case "blur":case "focusout":a.toggle(b,c+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});k(function(){function a(a,b,c){if(!c||!d.isDescendant(c,b))for(;b&&b!=c;b=b.parentNode)if(b._cssState){var f=u.getEnclosingWidget(b);f&&(b==f.domNode?f._cssMouseEvent(a):f._subnodeCssMouseEvent(b,b._cssState,a))}}var b=g.body(),c;m(b,l.over,function(b){a(b,b.target,b.relatedTarget)});m(b,l.out,function(b){a(b,b.target,b.relatedTarget)});m(b,n.press,function(b){c=b.target;
a(b,c)});m(b,n.release,function(b){a(b,c);c=null});m(b,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=u.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return h})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(e,h,d,a,b,c){return h("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(a){var b=[];e.forEach(a||
this.getChildren(),function(a){"value"in a?b.push(a):b=b.concat(this._getDescendantFormWidgets(a.getChildren()))},this);return b},reset:function(){e.forEach(this._getDescendantFormWidgets(),function(a){a.reset&&a.reset()})},validate:function(){var a=!1;return e.every(e.map(this._getDescendantFormWidgets(),function(b){b._hasBeenBlurred=!0;var d=b.disabled||!b.validate||b.validate();d||a||(c.scrollIntoView(b.containerNode||b.domNode),b.focus(),a=!0);return d}),function(a){return a})},setValues:function(a){d.deprecated(this.declaredClass+
"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(b){var c={};e.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(c[a.name]||(c[a.name]=[])).push(a)});for(var d in c)if(c.hasOwnProperty(d)){var g=c[d],m=a.getObject(d,!1,b);void 0!==m&&(m=[].concat(m),"boolean"==typeof g[0].checked?e.forEach(g,function(a){a.set("value",-1!=e.indexOf(m,a._get("value")))}):g[0].multiple?g[0].set("value",m):e.forEach(g,function(a,b){a.set("value",
m[b])}))}},getValues:function(){d.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var b={};e.forEach(this._getDescendantFormWidgets(),function(c){var d=c.name;if(d&&!c.disabled){var g=c.get("value");"boolean"==typeof c.checked?/Radio/.test(c.declaredClass)?!1!==g?a.setObject(d,g,b):(g=a.getObject(d,!1,b),void 0===g&&a.setObject(d,null,b)):(c=a.getObject(d,!1,b),c||(c=[],a.setObject(d,c,b)),!1!==g&&
c.push(g)):(c=a.getObject(d,!1,b),"undefined"!=typeof c?a.isArray(c)?c.push(g):a.setObject(d,[c,g],b):a.setObject(d,g,b))}});return b},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var a=e.map(this._descendants,function(a){return a.get("state")||""});return 0<=e.indexOf(a,"Error")?"Error":0<=e.indexOf(a,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(a){this._descendants=this._getDescendantFormWidgets();e.forEach(this._descendants,
function(a){a._started||a.startup()});a||this._onChildChange()},_onChildChange:function(a){a&&"state"!=a&&"disabled"!=a||this._set("state",this._getState());a&&"value"!=a&&"disabled"!=a&&"checked"!=a||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");
this.state=this._getState();var a=this;this.own(b(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(b){b.target!=a.domNode&&a._onChildChange(b.type.replace("attrmodified-",""))}));this.watch("state",function(a,b,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(e,h){return e("dijit._DialogMixin",null,{actionBarTemplate:"",
execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var d=h._getTabNavigable(this.domNode);this._firstFocusItem=d.lowest||d.first||this.closeButtonNode||this.domNode;this._lastFocusItem=d.last||d.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u){var r=e("dijit.DialogUnderlay",[k,l],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(b){a.set(this.node,"id",b+"_underlay");this._set("dialogId",b)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(c(this.domNode,"keydown",h.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=m.getBox(this.ownerDocument);b.top=c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new g(this.domNode);var a=m.get(this.ownerDocument);this._modalConnects=[n.on("resize",h.hitch(this,"layout")),c(a,"scroll",
h.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});r.show=function(a,c){var g=r._singleton;!g||g._destroyed?g=u._underlay=r._singleton=new r(a):a&&g.set(a);b.set(g.domNode,"zIndex",c);g.open||g.show()};r.hide=function(){var a=
r._singleton;a&&!a._destroyed&&a.hide()};return r})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(e,h,d,a,b,c,m,k){k.add("config-bgIframe",(k("ie")||k("trident"))&&!/IEMobile\/10\.0/.test(navigator.userAgent));var l=new function(){var c=[];this.pop=function(){var g;c.length?(g=c.pop(),g.style.display=""):(9>k("ie")?(g=d.dojoBlankHtmlUrl||e.toUrl("dojo/resources/blank.html")||'javascript:""',
g=document.createElement("\x3ciframe src\x3d'"+g+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(g=a.create("iframe"),g.src='javascript:""',g.className="dijitBackgroundIframe",g.setAttribute("role","presentation"),b.set(g,"opacity",.1)),g.tabIndex=-1);return g};this.push=function(a){a.style.display="none";c.push(a)}};h.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(k("config-bgIframe")){var g=this.iframe=
l.pop();a.appendChild(g);7>k("ie")||k("quirks")?(this.resize(a),this._conn=m(a,"resize",c.hitch(this,"resize",a))):b.set(g,{width:"100%",height:"100%"})}};c.extend(h.BackgroundIframe,{resize:function(a){this.iframe&&b.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),l.push(this.iframe),delete this.iframe)}});return h.BackgroundIframe})},"dijit/Viewport":function(){define(["dojo/Evented",
"dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(e,h,d,a,b){var c=new e,m;d(function(){var d=b.getBox();c._rlh=h(window,"resize",function(){var a=b.getBox();if(d.h!=a.h||d.w!=a.w)d=a,c.emit("resize")});if(8==a("ie")){var e=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=e&&(e=screen.deviceXDPI,c.emit("resize"))},500)}a("ios")&&(h(document,"focusin",function(a){m=a.target}),h(document,"focusout",function(a){m=null}))});c.getEffectiveBox=function(c){c=b.getBox(c);var d=m&&
m.tagName&&m.tagName.toLowerCase();a("ios")&&m&&!m.readOnly&&("textarea"==d||"input"==d&&/^(color|email|number|password|search|tel|text|url)$/.test(m.type))&&(c.h*=0==orientation||180==orientation?.66:.4,d=m.getBoundingClientRect(),c.h=Math.max(c.h,d.top+d.height));return c};return c})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q){return l("dijit.layout.ContentPane",[d,a,b],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:e._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,f){var c=new f(a,b);return!c.href&&c._contentSetter&&c._contentSetter.parseDeferred&&!c._contentSetter.parseDeferred.isFulfilled()?c._contentSetter.parseDeferred.then(function(){return c}):c},create:function(a,b){if(!(a&&a.template||!b||"href"in a||"content"in a)){b=n.byId(b);for(var f=b.ownerDocument.createDocumentFragment();b.firstChild;)f.appendChild(b.firstChild);
a=h.delegate(a,{content:f})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=w.getLocalization("dijit","loading",this.lang);this.loadingMessage=c.substitute(this.loadingMessage,a);this.errorMessage=c.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&k.forEach(this._contentSetter.parseResults,
function(a){a._started||a._destroyed||!h.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){k.forEach(this.getChildren(),function(a){a._started||a._destroyed||!h.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&k.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!h.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(a){e.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new g(h.hitch(this,"cancel"));this.onLoadDeferred.then(h.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){e.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new g(h.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(h.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new g(h.hitch(this,"cancel"));this.onLoadDeferred.then(h.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
h.isObject(this.ioArgs)&&h.mixin(b,this.ioArgs);var f=this._xhrDfd=(this.ioMethod||t.get)(b),c;f.then(function(b){c=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(y){a._onError("Content",y)}},function(b){f.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return c});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(x){console.error("Error "+this.widgetId+
" running custom onLoad code: "+x.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(v){console.error("Error "+this.widgetId+" running custom onUnload code: "+v.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;k.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(k.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?
b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||r.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){a=this.preprocessContent(a);this.destroyDescendants();var f=this._contentSetter;f&&f instanceof m._ContentSetter||(f=this._contentSetter=new m._ContentSetter({node:this.containerNode,_onError:h.hitch(this,this._onError),onContentError:h.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(A){console.error("Fatal "+
this.id+" could not change content due to "+A.message,A)}})}));var c=h.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),c=f.set(h.isObject(a)&&a.domNode?a.domNode:a,c),g=this;return q(c&&c.then?c:f.parseDeferred,function(){delete g._contentSetterParams;b||(g._started&&(g._startChildren(),g._scheduleLayout()),g._onLoadHandler(a))})},
preprocessContent:function(a){return a},_onError:function(a,b,f){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);f?console.error(f,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],
function(e,h,d,a){return h("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(a,c){var b=this.containerNode;if(0<c){for(b=b.firstChild;0<c;)1==b.nodeType&&c--,b=b.nextSibling;b?c="before":(b=this.containerNode,c="last")}d.place(a.domNode,b,c);this._started&&!a._started&&a.startup()},removeChild:function(a){"number"==typeof a&&(a=this.getChildren()[a]);a&&(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},
hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(a,c){var b=this.getChildren();a=e.indexOf(b,a);return b[a+c]},getIndexOfChild:function(a){return e.indexOf(this.getChildren(),a)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(e,h,d,a,b,c,m,k,l,g){return h("dijit.layout._ContentPaneResizeMixin",
null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(l.on("resize",c.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],b=!1;m("\x3e *",this.containerNode).some(function(c){var g=k.byNode(c);g&&g.resize?a.push(g):!/script|link|style/i.test(c.nodeName)&&
c.offsetHeight&&(b=!0)});this._singleChild=1!=a.length||b?null:a[0];d.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(b,d){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();b&&a.setMarginBox(this.domNode,b);var e=this.containerNode;e===this.domNode?
(d=d||{},c.mixin(d,b||{}),"h"in d&&"w"in d||(d=c.mixin(a.getMarginBox(e),d)),this._contentBox=g.marginBox2contentBox(e,d)):this._contentBox=a.getContentBox(e);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var b=this._contentBox||a.getContentBox(this.containerNode);this._singleChild.resize({w:b.w,h:b.h})}else for(var b=this.getChildren(),c,g=0;c=b[g++];)c.resize&&c.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&
"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!d.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],
function(e,h,d,a,b){function c(a){return a.substring(0,1).toUpperCase()+a.substring(1)}function m(a,c){var g=a.resize?a.resize(c):d.setMarginBox(a.domNode,c);g?b.mixin(a,g):(b.mixin(a,d.getMarginBox(a.domNode)),b.mixin(a,c))}var k={marginBox2contentBox:function(b,c){var g=a.getComputedStyle(b),e=d.getMarginExtents(b,g),k=d.getPadBorderExtents(b,g);return{l:a.toPixelValue(b,g.paddingLeft),t:a.toPixelValue(b,g.paddingTop),w:c.w-(e.w+k.w),h:c.h-(e.h+k.h)}},layoutChildren:function(a,g,d,k,r){g=b.mixin({},
g);h.add(a,"dijitLayoutContainer");d=e.filter(d,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(e.filter(d,function(a){return"center"==a.region||"client"==a.layoutAlign}));e.forEach(d,function(a){var b=a.domNode,d=a.region||a.layoutAlign;if(!d)throw Error("No region setting for "+a.id);var e=b.style;e.left=g.l+"px";e.top=g.t+"px";e.position="absolute";h.add(b,"dijitAlign"+c(d));b={};k&&k==a.id&&(b["top"==a.region||"bottom"==a.region?"h":"w"]=r);"leading"==d&&(d=a.isLeftToRight()?
"left":"right");"trailing"==d&&(d=a.isLeftToRight()?"right":"left");"top"==d||"bottom"==d?(b.w=g.w,m(a,b),g.h-=a.h,"top"==d?g.t+=a.h:e.top=g.t+g.h+"px"):"left"==d||"right"==d?(b.h=g.h,m(a,b),g.w-=a.w,"left"==d?g.l+=a.w:e.left=g.l+g.w+"px"):"client"!=d&&"center"!=d||m(a,g)})}};b.setObject("dijit.layout.utils",k);return k})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(e,h,d,a,b,c,m){var k=0,l={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,
"")},_emptyNode:c.empty,_setNodeContent:function(a,b){c.empty(a);if(b)if("number"==typeof b&&(b=b.toString()),"string"==typeof b&&(b=c.toDom(b,a.ownerDocument)),!b.nodeType&&h.isArrayLike(b))for(var g=b.length,d=0;d<b.length;d=g==b.length?d+1:0)c.place(b[d],a,"last");else c.place(b,a,"last");return a},_ContentSetter:a("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:e._scopeName,startup:!0,constructor:function(a,c){h.mixin(this,
a||{});c=this.node=b.byId(this.node||c);this.id||(this.id=["Setter",c?c.id||c.tagName:"",k++].join("_"))},set:function(a,b){void 0!==a&&(this.content=a);"number"==typeof a&&(a=a.toString());b&&this._mixin(b);this.onBegin();this.setContent();return(a=this.onEnd())&&a.then?a:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=l._setNodeContent(a,this.content)}catch(u){var b=this.onContentError(u);try{a.innerHTML=b}catch(r){console.error("Fatal "+
this.declaredClass+".setContent could not change content due to "+r.message,r)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(d.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);c.empty(this.node)},onBegin:function(){var a=this.content;if(h.isString(a)&&(this.cleanContent&&(a=l._secureForInnerHtml(a)),this.extractContent)){var b=
a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=
this.node;try{var b={};d.forEach(["dir","lang","textDir"],function(a){this[a]&&(b[a]=this[a])},this);var c=this;this.parseDeferred=m.parse({rootNode:a,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return c.parseResults=a},function(a){c._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(r){this._onError("Content",r,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,c){a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&l._setNodeContent(this.node,
a,!0)}}),set:function(a,b,c){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),b="");"number"==typeof b&&(b=b.toString());return c?(new l._ContentSetter(h.mixin(c,{content:b,node:a}))).set():l._setNodeContent(a,b,!0)}};h.setObject("dojo.html",l);return l})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q){function v(a){return eval("("+a+")")}function x(a){var b=a._nameCaseMap,f=a.prototype;if(!b||b._extendCnt<p){var b=a._nameCaseMap={},c;for(c in f)"_"!==c.charAt(0)&&(b[c.toLowerCase()]=c);b._extendCnt=p}return b}function f(a,b){b||(b=e);var f=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),c=a.join();if(!f[c]){for(var g=[],p=0,k=a.length;p<k;p++){var l=a[p];g[g.length]=f[l]=f[l]||d.getObject(l)||~l.indexOf("/")&&b(l)}a=g.shift();f[c]=g.length?a.createSubclass?
a.createSubclass(g):a.extend.apply(a,g):a}return f[c]}new Date("X");var p=0;l.after(d,"extend",function(){p++},!0);var z={_clearCache:function(){p++;_ctorMap={}},_functionFromScript:function(b,f){var c="",g="",d=b.getAttribute(f+"args")||b.getAttribute("args");f=b.getAttribute("with");d=(d||"").split(/\s*,\s*/);f&&f.length&&a.forEach(f.split(/\s*,\s*/),function(a){c+="with("+a+"){";g+="}"});return new Function(d,c+b.innerHTML+g)},instantiate:function(b,f,c){f=f||{};c=c||{};var g=(c.scope||h._scopeName)+
"Type",d="data-"+(c.scope||h._scopeName)+"-",e=d+"type",p=d+"mixins",k=[];a.forEach(b,function(a){var b=g in f?f[g]:a.getAttribute(e)||a.getAttribute(g);if(b){var c=a.getAttribute(p),b=c?[b].concat(c.split(/\s*,\s*/)):[b];k.push({node:a,types:b})}});return this._instantiate(k,f,c)},_instantiate:function(b,c,d,e){function p(b){c._started||d.noStart||a.forEach(b,function(a){"function"!==typeof a.startup||a._started||a.startup()});return b}b=a.map(b,function(a){var b=a.ctor||f(a.types,d.contextRequire);
if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,a.node,c,d,a.scripts,a.inherited)},this);return e?g(b).then(p):p(b)},construct:function(b,f,c,g,e,p){function m(a){D&&d.setObject(D,a);for(A=0;A<W.length;A++)l[W[A].advice||"after"](a,W[A].method,d.hitch(a,W[A].func),!0);for(A=0;A<aa.length;A++)aa[A].call(a);for(A=0;A<R.length;A++)a.watch(R[A].prop,R[A].func);for(A=0;A<T.length;A++)w(a,T[A].event,T[A].func);return a}var u=b&&b.prototype;g=g||{};var q=
{};g.defaults&&d.mixin(q,g.defaults);p&&d.mixin(q,p);var z;r("dom-attributes-explicit")?z=f.attributes:r("dom-attributes-specified-flag")?z=a.filter(f.attributes,function(a){return a.specified}):(p=(/^input$|^img$/i.test(f.nodeName)?f:f.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),z=a.map(p.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==f.nodeName&&"value"==a||"enctype"==b?f.getAttribute(b):f.getAttributeNode(b).value}}));
var y=g.scope||h._scopeName;p="data-"+y+"-";var B={};"dojo"!==y&&(B[p+"props"]="data-dojo-props",B[p+"type"]="data-dojo-type",B[p+"mixins"]="data-dojo-mixins",B[y+"type"]="dojotype",B[p+"id"]="data-dojo-id");for(var A=0,F,y=[],D,C;F=z[A++];){var O=F.name,P=O.toLowerCase();F=F.value;switch(B[P]||P){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":C=F;break;case "data-dojo-id":case "jsid":D=F;break;case "data-dojo-attach-point":case "dojoattachpoint":q.dojoAttachPoint=
F;break;case "data-dojo-attach-event":case "dojoattachevent":q.dojoAttachEvent=F;break;case "class":q["class"]=f.className;break;case "style":q.style=f.style&&f.style.cssText;break;default:if(O in u||(O=x(b)[P]||O),O in u)switch(typeof u[O]){case "string":q[O]=F;break;case "number":q[O]=F.length?Number(F):NaN;break;case "boolean":q[O]="false"!=F.toLowerCase();break;case "function":""===F||-1!=F.search(/[^\w\.]+/i)?q[O]=new Function(F):q[O]=d.getObject(F,!1)||new Function(F);y.push(O);break;default:P=
u[O],q[O]=P&&"length"in P?F?F.split(/\s*,\s*/):[]:P instanceof Date?""==F?new Date(""):"now"==F?new Date:n.fromISOString(F):P instanceof k?h.baseUrl+F:v(F)}else q[O]=F}}for(z=0;z<y.length;z++)B=y[z].toLowerCase(),f.removeAttribute(B),f[B]=null;if(C)try{C=v.call(g.propsThis,"{"+C+"}"),d.mixin(q,C)}catch(ba){throw Error(ba.toString()+" in data-dojo-props\x3d'"+C+"'");}d.mixin(q,c);e||(e=b&&(b._noScript||u._noScript)?[]:t("\x3e script[type^\x3d'dojo/']",f));var W=[],aa=[],R=[],T=[];if(e)for(A=0;A<e.length;A++)B=
e[A],f.removeChild(B),c=B.getAttribute(p+"event")||B.getAttribute("event"),g=B.getAttribute(p+"prop"),C=B.getAttribute(p+"method"),y=B.getAttribute(p+"advice"),z=B.getAttribute("type"),B=this._functionFromScript(B,p),c?"dojo/connect"==z?W.push({method:c,func:B}):"dojo/on"==z?T.push({event:c,func:B}):q[c]=B:"dojo/aspect"==z?W.push({method:C,advice:y,func:B}):"dojo/watch"==z?R.push({prop:g,func:B}):aa.push(B);b=(e=b.markupFactory||u.markupFactory)?e(q,f,b):new b(q,f);return b.then?b.then(m):m(b)},scan:function(b,
c){function g(a){if(!a.inherited){a.inherited={};var b=a.node,f=g(a.parent),b={dir:b.getAttribute("dir")||f.dir,lang:b.getAttribute("lang")||f.lang,textDir:b.getAttribute(v)||f.textDir},c;for(c in b)b[c]&&(a.inherited[c]=b[c])}return a.inherited}var d=[],p=[],k={},l=(c.scope||h._scopeName)+"Type",m="data-"+(c.scope||h._scopeName)+"-",n=m+"type",v=m+"textdir",m=m+"mixins",q=b.firstChild,x=c.inherited;if(!x){var z=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&z(a.parentNode,
b)},x={dir:z(b,"dir"),lang:z(b,"lang"),textDir:z(b,v)},t;for(t in x)x[t]||delete x[t]}t={inherited:x};for(var r,w;;)if(q)if(1!=q.nodeType)q=q.nextSibling;else if(r&&"script"==q.nodeName.toLowerCase())(x=q.getAttribute("type"))&&/^dojo\/\w/i.test(x)&&r.push(q),q=q.nextSibling;else if(w)q=q.nextSibling;else if(x=q.getAttribute(n)||q.getAttribute(l),b=q.firstChild,x||b&&(3!=b.nodeType||b.nextSibling)){w=null;if(x){var y=q.getAttribute(m);r=y?[x].concat(y.split(/\s*,\s*/)):[x];try{w=f(r,c.contextRequire)}catch(W){}w||
a.forEach(r,function(a){~a.indexOf("/")&&!k[a]&&(k[a]=!0,p[p.length]=a)});y=w&&!w.prototype._noScript?[]:null;t={types:r,ctor:w,parent:t,node:q,scripts:y};t.inherited=g(t);d.push(t)}else t={node:q,scripts:r,parent:t};r=y;w=q.stopParser||w&&w.prototype.stopParser&&!c.template;q=b}else q=q.nextSibling;else{if(!t||!t.node)break;q=t.node.nextSibling;w=!1;t=t.parent;r=t.scripts}var A=new u;p.length?(c.contextRequire||e)(p,function(){A.resolve(a.filter(d,function(a){if(!a.ctor)try{a.ctor=f(a.types,c.contextRequire)}catch(T){}for(var b=
a.parent;b&&!b.types;)b=b.parent;var g=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(g&&g.stopParser&&!c.template);a.instantiate=!b||b.instantiate&&b.instantiateChildren;return a.instantiate}))}):A.resolve(d);return A.promise},_require:function(a,b){a=v("{"+a.innerHTML+"}");var f=[],c=[],g=new u;b=b&&b.contextRequire||e;for(var p in a)f.push(p),c.push(a[p]);b(c,function(){for(var a=0;a<f.length;a++)d.setObject(f[a],arguments[a]);g.resolve(arguments)});return g.promise},_scanAmd:function(a,b){var f=
new u,c=f.promise;f.resolve(!0);var g=this;t("script[type\x3d'dojo/require']",a).forEach(function(a){c=c.then(function(){return g._require(a,b)});a.parentNode.removeChild(a)});return c},parse:function(a,b){!a||"string"==typeof a||"nodeType"in a||(b=a,a=b.rootNode);var f=a?c.byId(a):m.body();b=b||{};var g=b.template?{template:!0}:{},e=[],p=this;a=this._scanAmd(f,b).then(function(){return p.scan(f,b)}).then(function(a){return p._instantiate(a,g,b,!0)}).then(function(a){return e=e.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});d.mixin(e,a);return e}};h.parser=z;b.parseOnLoad&&q(100,z,"parse");return z})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(e,h){var d={};e.setObject("dojo.date.stamp",d);d.fromISOString=function(a,b){d._isoRegExp||(d._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var c=d._isoRegExp.exec(a);a=null;if(c){c.shift();c[1]&&c[1]--;c[6]&&(c[6]*=1E3);b&&(b=new Date(b),h.forEach(h.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(a){return b["get"+a]()}),function(a,b){c[b]=c[b]||a}));a=new Date(c[0]||1970,c[1]||0,c[2]||1,c[3]||0,c[4]||0,c[5]||0,c[6]||0);100>c[0]&&a.setFullYear(c[0]||1970);var e=0,k=c[7]&&c[7].charAt(0);"Z"!=k&&(e=60*(c[8]||0)+(Number(c[9])||0),"-"!=k&&(e*=-1));k&&(e-=a.getTimezoneOffset());e&&a.setTime(a.getTime()+6E4*e)}return a};d.toISOString=function(a,b){var c=function(a){return 10>a?"0"+a:a};b=b||{};var d=[],e=b.zulu?"getUTC":"get",l="";"time"!=b.selector&&(l=a[e+"FullYear"](),l=["0000".substr((l+
"").length)+l,c(a[e+"Month"]()+1),c(a[e+"Date"]())].join("-"));d.push(l);"date"!=b.selector&&(l=[c(a[e+"Hours"]()),c(a[e+"Minutes"]()),c(a[e+"Seconds"]())].join(":"),e=a[e+"Milliseconds"](),b.milliseconds&&(l+="."+(100>e?"0":"")+c(e)),b.zulu?l+="Z":"time"!=b.selector&&(a=a.getTimezoneOffset(),b=Math.abs(a),l+=(0<a?"-":"+")+c(Math.floor(b/60))+":"+c(b%60)),d.push(l));return d.join("T")};return d})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q){e._xhrObj=w._create;var v=e.config;e.objectToQuery=a.objectToQuery;e.queryToObject=a.queryToObject;e.fieldToObject=c.fieldToObject;e.formToObject=c.toObject;e.formToQuery=c.toQuery;e.formToJson=c.toJson;e._blockAsync=!1;h.add("native-xhr2-blob",function(){if(h("native-xhr2")){var a=new XMLHttpRequest;a.open("GET","/",!0);a.responseType="blob";var b=a.responseType;a.abort();return"blob"===b}});var x=e._contentHandlers=e.contentHandlers={text:function(a){return a.responseText},
json:function(a){return l.fromJson(a.responseText||null)},"json-comment-filtered":function(a){k.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");a=a.responseText;var b=a.indexOf("/*"),f=a.lastIndexOf("*/");if(-1==b||-1==f)throw Error("JSON was not comment filtered");
return l.fromJson(a.substring(b+2,f))},javascript:function(a){return e.eval(a.responseText)},xml:function(a){var b=a.responseXML;b&&h("dom-qsa2.1")&&!b.querySelectorAll&&h("dom-parser")&&(b=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(h("ie")&&(!b||!b.documentElement)){var f=function(a){return"MSXML"+a+".DOMDocument"},f=["Microsoft.XMLDOM",f(6),f(4),f(3),f(2)];n.some(f,function(f){try{var c=new ActiveXObject(f);c.async=!1;c.loadXML(a.responseText);b=c}catch(E){return!1}return!0})}return b},
"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?x["json-comment-filtered"](a):x.json(a)}};h("native-xhr2")&&(x.arraybuffer=x.blob=x.document=function(a,b){return"blob"!==b.args.handleAs||h("native-xhr2-blob")?a.response:new Blob([a.response],{type:a.getResponseHeader("Content-Type")})});e._ioSetArgs=function(f,d,p,k){var l={args:f,url:f.url},n=null;if(f.form){var n=b.byId(f.form),h=n.getAttributeNode("action");l.url=l.url||(h?h.value:e.doc?e.doc.URL:
null);n=c.toObject(n)}h=[{}];n&&h.push(n);f.content&&h.push(f.content);f.preventCache&&h.push({"dojo.preventCache":(new Date).valueOf()});l.query=a.objectToQuery(g.mixin.apply(null,h));l.handleAs=f.handleAs||"text";var q=new m(function(a){a.canceled=!0;d&&d(a);var b=a.ioArgs.error;b||(b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b);return b});q.addCallback(p);var u=f.load;u&&g.isFunction(u)&&q.addCallback(function(a){return u.call(f,a,l)});var x=f.error;x&&g.isFunction(x)&&q.addErrback(function(a){return x.call(f,
a,l)});var z=f.handle;z&&g.isFunction(z)&&q.addBoth(function(a){return z.call(f,a,l)});q.addErrback(function(a){return k(a,q)});v.ioPublish&&e.publish&&!1!==l.args.ioPublish&&(q.addCallbacks(function(a){e.publish("/dojo/io/load",[q,a]);return a},function(a){e.publish("/dojo/io/error",[q,a]);return a}),q.addBoth(function(a){e.publish("/dojo/io/done",[q,a]);return a}));q.ioArgs=l;return q};var f=function(a){a=x[a.ioArgs.handleAs](a.ioArgs.xhr,a.ioArgs);return void 0===a?null:a},p=function(a,b){b.ioArgs.args.failOk||
console.error(a);return a},z=function(a){0>=y&&(y=0,v.ioPublish&&e.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish)&&e.publish("/dojo/io/stop"))},y=0;r.after(t,"_onAction",function(){--y});r.after(t,"_onInFlight",z);e._ioCancelAll=t.cancelAll;e._ioNotifyStart=function(a){v.ioPublish&&e.publish&&!1!==a.ioArgs.args.ioPublish&&(y||e.publish("/dojo/io/start"),y+=1,e.publish("/dojo/io/send",[a]))};e._ioWatch=function(a,b,f,c){a.ioArgs.options=a.ioArgs.args;g.mixin(a,{response:a.ioArgs,isValid:function(f){return b(a)},
isReady:function(b){return f(a)},handleResponse:function(b){return c(a)}});t(a);z(a)};e._ioAddQueryToUrl=function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"\x26")+a.query,a.query=null)};e.xhr=function(a,b,c){var g,d=e._ioSetArgs(b,function(a){g&&g.cancel()},f,p),k=d.ioArgs;"postData"in b?k.query=b.postData:"putData"in b?k.query=b.putData:"rawBody"in b?k.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(a.toUpperCase()))&&e._ioAddQueryToUrl(k);var l;h("native-xhr2")&&(l=
{arraybuffer:1,blob:1,document:1});l=h("native-xhr2")&&l[b.handleAs]?b.handleAs:"text";"blob"!==l||h("native-xhr2-blob")||(l="arraybuffer");l={method:a,handleAs:l,responseType:b.responseType,timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:k};"undefined"!==typeof b.headers&&(l.headers=b.headers);"undefined"!==typeof b.contentType&&(l.headers||(l.headers={}),l.headers["Content-Type"]=b.contentType);"undefined"!==typeof k.query&&(l.data=k.query);"undefined"!==typeof b.sync&&(l.sync=b.sync);
e._ioNotifyStart(d);try{g=w(k.url,l,!0)}catch(K){return d.cancel(),d}d.ioArgs.xhr=g.response.xhr;g.then(function(){d.resolve(d)}).otherwise(function(a){k.error=a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);d.reject(a)});return d};e.xhrGet=function(a){return e.xhr("GET",a)};e.rawXhrPost=e.xhrPost=function(a){return e.xhr("POST",a,!0)};e.rawXhrPut=e.xhrPut=function(a){return e.xhr("PUT",a,!0)};e.xhrDelete=function(a){return e.xhr("DELETE",a)};e._isDocumentOk=
function(a){return q.checkStatus(a.status)};e._getText=function(a){var b;e.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};g.mixin(e.xhr,{_xhrObj:e._xhrObj,fieldToObject:c.fieldToObject,formToObject:c.toObject,objectToQuery:a.objectToQuery,formToQuery:c.toQuery,formToJson:c.toJson,queryToObject:a.queryToObject,contentHandlers:x,_ioSetArgs:e._ioSetArgs,_ioCancelAll:e._ioCancelAll,_ioNotifyStart:e._ioNotifyStart,_ioWatch:e._ioWatch,_ioAddQueryToUrl:e._ioAddQueryToUrl,_isDocumentOk:e._isDocumentOk,
_getText:e._getText,get:e.xhrGet,post:e.xhrPost,put:e.xhrPut,del:e.xhrDelete});return e.xhr})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(e,h,d,a){var b={fieldToObject:function(a){var b=null;if(a=h.byId(a)){var c=a.name,d=(a.type||"").toLowerCase();if(c&&d&&!a.disabled)if("radio"==d||"checkbox"==d)a.checked&&(b=a.value);else if(a.multiple)for(b=[],a=[a.firstChild];a.length;)for(c=a.pop();c;c=c.nextSibling)if(1==c.nodeType&&"option"==c.tagName.toLowerCase())c.selected&&
b.push(c.value);else{c.nextSibling&&a.push(c.nextSibling);c.firstChild&&a.push(c.firstChild);break}else b=a.value}return b},toObject:function(a){var c={};a=h.byId(a).elements;for(var d=0,l=a.length;d<l;++d){var g=a[d],n=g.name,u=(g.type||"").toLowerCase();if(n&&u&&0>"file|submit|image|reset|button".indexOf(u)&&!g.disabled){var r=c,t=n,g=b.fieldToObject(g);if(null!==g){var w=r[t];"string"==typeof w?r[t]=[w,g]:e.isArray(w)?w.push(g):r[t]=g}"image"==u&&(c[n+".x"]=c[n+".y"]=c[n].x=c[n].y=0)}}return c},
toQuery:function(a){return d.objectToQuery(b.toObject(a))},toJson:function(c,d){return a.stringify(b.toObject(c),null,d?4:0)}};return b})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../has!host-browser?../_base/window: ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(e,h,d,a,b,c){function m(){for(var a=+new Date,b=0,c;b<g.length&&(c=g[b]);b++){var d=c.response,e=d.options;c.isCanceled&&c.isCanceled()||c.isValid&&
!c.isValid(d)?(g.splice(b--,1),k._onAction&&k._onAction()):c.isReady&&c.isReady(d)?(g.splice(b--,1),c.handleResponse(d),k._onAction&&k._onAction()):c.startTime&&c.startTime+(e.timeout||0)<a&&(g.splice(b--,1),c.cancel(new h("Timeout exceeded",d)),k._onAction&&k._onAction())}k._onInFlight&&k._onInFlight(c);g.length||(clearInterval(l),l=null)}function k(a){a.response.options.timeout&&(a.startTime=+new Date);a.isFulfilled()||(g.push(a),l||(l=setInterval(m,50)),a.response.options.sync&&m())}var l=null,
g=[];k.cancelAll=function(){try{a.forEach(g,function(a){try{a.cancel(new d("All requests canceled."))}catch(u){}})}catch(n){}};b&&c&&b.doc.attachEvent&&c(b.global,"unload",function(){k.cancelAll()});return k})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),function(e,h,d,a,b,c,m,k,l){function g(a){return u(a)}function n(a){return void 0!==a.data?a.data:a.text}e.deepCopy=
function(a,b){for(var c in b){var g=a[c],d=b[c];g!==d&&(g&&"object"===typeof g&&d&&"object"===typeof d?e.deepCopy(g,d):a[c]=d)}return a};e.deepCreate=function(a,b){b=b||{};var c=m.delegate(a),g,d;for(g in a)(d=a[g])&&"object"===typeof d&&(c[g]=e.deepCreate(d,b[g]));return e.deepCopy(c,b)};var u=Object.freeze||function(a){return a};e.deferred=function(b,c,l,q,v,x){var f=new a(function(a){c&&c(f,b);return a&&(a instanceof h||a instanceof d)?a:new d("Request canceled",b)});f.response=b;f.isValid=l;f.isReady=
q;f.handleResponse=v;l=f.then(g).otherwise(function(a){a.response=b;throw a;});e.notify&&l.then(m.hitch(e.notify,"emit","load"),m.hitch(e.notify,"emit","error"));q=l.then(n);v=new k;for(var p in q)q.hasOwnProperty(p)&&(v[p]=q[p]);v.response=l;u(v);x&&f.then(function(a){x.call(f,a)},function(a){x.call(f,b,a)});f.promise=v;f.then=v.then;return f};e.addCommonMethods=function(a,b){c.forEach(b||["GET","POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(c,g){g=m.delegate(g||
{});g.method=b;return a(c,g)}})};e.parseArgs=function(a,c,g){var d=c.data,e=c.query;!d||g||"object"!==typeof d||l("native-xhr2")&&(d instanceof ArrayBuffer||d instanceof Blob)||(c.data=b.objectToQuery(d));e?("object"===typeof e&&(e=b.objectToQuery(e)),c.preventCache&&(e+=(e?"\x26":"")+"request.preventCache\x3d"+ +new Date)):c.preventCache&&(e="request.preventCache\x3d"+ +new Date);a&&e&&(a+=(~a.indexOf("?")?"\x26":"?")+e);return{url:a,options:c,getHeader:function(a){return null}}};e.checkStatus=function(a){a=
a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(e){return e("RequestError",function(e,d){this.response=d})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(e,h){return e("RequestTimeoutError",null,h,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(e,h,d,a,b){function c(b,c){var g=b.xhr;b.status=
b.xhr.status;try{b.text=g.responseText}catch(p){}"xml"===b.options.handleAs&&(b.data=g.responseXML);if(!c)try{d(b)}catch(p){c=p}var f;if(c)this.reject(c);else{try{d(b)}catch(p){f=p}a.checkStatus(g.status)?f?this.reject(f):this.resolve(b):(c=f?new e("Unable to load "+b.url+" status: "+g.status+" and an error in handleAs: transformation of response",b):new e("Unable to load "+b.url+" status: "+g.status,b),this.reject(c))}}function m(a){return this.xhr.getResponseHeader(a)}function k(d,v,x){var f=b("native-formdata")&&
v&&v.data&&v.data instanceof FormData,p=a.parseArgs(d,a.deepCreate(w,v),f);d=p.url;v=p.options;var q,y=a.deferred(p,r,g,n,c,function(){q&&q()}),A=p.xhr=k._create();if(!A)return y.cancel(new e("XHR was not created")),x?y:y.promise;p.getHeader=m;u&&(q=u(A,y,p));var B="undefined"===typeof v.data?null:v.data,D=!v.sync,F=v.method;try{A.open(F,d,D,v.user||t,v.password||t);v.withCredentials&&(A.withCredentials=v.withCredentials);b("native-response-type")&&v.handleAs in l&&(A.responseType=l[v.handleAs]);
var C=v.headers;d=f?!1:"application/x-www-form-urlencoded";if(C)for(var E in C)"content-type"===E.toLowerCase()?d=C[E]:C[E]&&A.setRequestHeader(E,C[E]);d&&!1!==d&&A.setRequestHeader("Content-Type",d);C&&"X-Requested-With"in C||A.setRequestHeader("X-Requested-With","XMLHttpRequest");a.notify&&a.notify.emit("send",p,y.promise.cancel);A.send(B)}catch(G){y.reject(G)}h(y);A=null;return x?y:y.promise}b.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});b.add("dojo-force-activex-xhr",
function(){return b("activex")&&"file:"===window.location.protocol});b.add("native-xhr2",function(){if(b("native-xhr")&&!b("dojo-force-activex-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});b.add("native-formdata",function(){return"undefined"!==typeof FormData});b.add("native-response-type",function(){return b("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});b.add("native-xhr2-blob",
function(){if(b("native-response-type")){var a=new XMLHttpRequest;a.open("GET","https://dojotoolkit.org/",!0);a.responseType="blob";var c=a.responseType;a.abort();return"blob"===c}});var l={blob:b("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"},g,n,u,r;b("native-xhr2")?(g=function(a){return!this.isFulfilled()},r=function(a,b){b.xhr.abort()},u=function(a,b,c){function f(a){b.handleResponse(c)}function g(a){a=new e("Unable to load "+c.url+" status: "+a.target.status,
c);b.handleResponse(c,a)}function d(a){a.lengthComputable?(c.loaded=a.loaded,c.total=a.total,b.progress(c)):3===c.xhr.readyState&&(c.loaded="loaded"in a?a.loaded:a.position,b.progress(c))}a.addEventListener("load",f,!1);a.addEventListener("error",g,!1);a.addEventListener("progress",d,!1);return function(){a.removeEventListener("load",f,!1);a.removeEventListener("error",g,!1);a.removeEventListener("progress",d,!1);a=null}}):(g=function(a){return a.xhr.readyState},n=function(a){return 4===a.xhr.readyState},
r=function(a,b){a=b.xhr;b=typeof a.abort;"function"!==b&&"object"!==b&&"unknown"!==b||a.abort()});var t,w={data:null,query:null,sync:!1,method:"GET"};k._create=function(){throw Error("XMLHTTP not available");};if(b("native-xhr")&&!b("dojo-force-activex-xhr"))k._create=function(){return new XMLHttpRequest};else if(b("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),k._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(q){try{new ActiveXObject("Microsoft.XMLHTTP"),k._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(v){}}a.addCommonMethods(k);
return k})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../has!dom?../selector/_loader"],function(e,h,d,a){function b(a){var b=g[a.options.handleAs];a.data=b?b(a):a.data||a.text;return a}a.add("activex","undefined"!==typeof ActiveXObject);a.add("dom-parser",function(a){return"DOMParser"in a});var c;if(a("activex")){var m=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],k;c=function(b){function c(a){try{var b=
new ActiveXObject(a);b.async=!1;b.loadXML(e);g=b;k=a}catch(v){return!1}return!0}var g=b.data,e=b.text;g&&a("dom-qsa2.1")&&!g.querySelectorAll&&a("dom-parser")&&(g=(new DOMParser).parseFromString(e,"application/xml"));g&&g.documentElement||k&&c(k)||d.some(m,c);return g}}var l=function(b){return a("native-xhr2-blob")||"blob"!==b.options.handleAs||"undefined"===typeof Blob?b.xhr.response:new Blob([b.xhr.response],{type:b.xhr.getResponseHeader("Content-Type")})},g={javascript:function(a){return h.eval(a.text||
"")},json:function(a){return e.parse(a.text||null)},xml:c,blob:l,arraybuffer:l,document:l};b.register=function(a,b){g[a]=b};return b})},"dijit/nls/loading":function(){define({root:{loadingState:"Loading...",errorState:"Sorry, an error occurred"},bs:!0,mk:!0,sr:!0,zh:!0,"zh-tw":!0,vi:!0,uk:!0,tr:!0,th:!0,sv:!0,sl:!0,sk:!0,ru:!0,ro:!0,pt:!0,"pt-pt":!0,pl:!0,nl:!0,nb:!0,lv:!0,lt:!0,ko:!0,kk:!0,ja:!0,it:!0,id:!0,hu:!0,hr:!0,hi:!0,he:!0,fr:!0,fi:!0,eu:!0,et:!0,es:!0,el:!0,de:!0,da:!0,cs:!0,ca:!0,bg:!0,
az:!0,ar:!0})},"dijit/nls/common":function(){define({root:{buttonOk:"OK",buttonCancel:"Cancel",buttonSave:"Save",itemClose:"Close"},bs:!0,mk:!0,sr:!0,zh:!0,"zh-tw":!0,vi:!0,uk:!0,tr:!0,th:!0,sv:!0,sl:!0,sk:!0,ru:!0,ro:!0,pt:!0,"pt-pt":!0,pl:!0,nl:!0,nb:!0,lv:!0,lt:!0,ko:!0,kk:!0,ja:!0,it:!0,id:!0,hu:!0,hr:!0,hi:!0,he:!0,fr:!0,fi:!0,eu:!0,et:!0,es:!0,el:!0,de:!0,da:!0,cs:!0,ca:!0,bg:!0,az:!0,ar:!0})},"esri/core/domUtils":function(){define(["dojo/on","dojo/dom-style","dojo/has"],function(e,h,d){var a=
{show:function(b){(b=a.getNode(b))&&(b.style.display="block")},getNode:function(a){return a&&a.domNode||a},hide:function(b){(b=a.getNode(b))&&(b.style.display="none")},toggle:function(b){(b=a.getNode(b))&&(b.style.display="none"===b.style.display?"block":"none")},documentBox:8>=d("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(a){if(a=this.getNode(a)){var b=0,d=0,k=0,l=0,g=0,n=0;return[e(a,"touchstart",
function(c){b=c.touches[0].screenX;d=c.touches[0].screenY;k=a.scrollWidth;l=a.scrollHeight;g=a.clientWidth;n=a.clientHeight}),e(a,"touchmove",function(c){c.preventDefault();var e=a.firstChild;e instanceof Text&&(e=a.childNodes[1]);var m=e._currentX||0,u=e._currentY||0,m=m+(c.touches[0].screenX-b);0<m?m=0:0>m&&Math.abs(m)+g>k&&(m=-1*(k-g));e._currentX=m;u+=c.touches[0].screenY-d;0<u?u=0:0>u&&Math.abs(u)+n>l&&(u=-1*(l-n));e._currentY=u;h.set(e,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+
m+"px, "+u+"px)"});b=c.touches[0].screenX;d=c.touches[0].screenY})]}}};return a})},"esri/identity/Credential":function(){define(["./IdentityManagerBase"],function(e){return e.Credential})},"esri/identity/IdentityManagerBase":function(){define("../core/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/Deferred dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/regexp ../kernel ../config ../core/lang ./ServerInfo ../core/urlUtils ../core/deferredUtils ../core/Accessor ../request ../core/Evented ./OAuthCredential ./OAuthInfo".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z){var y,A={},B=function(a){var b=(new c(a.owningSystemUrl)).host;a=(new c(a.server)).host;var f=/.+\.arcgis\.com$/i;return f.test(b)&&f.test(a)},D=function(b,f){return!!(B(b)&&f&&a.some(f,function(a){return a.test(b.server)}))};e=e(f,{declaredClass:"esri.identity.IdentityManagerBase",constructor:function(){this._portalConfig=d.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=
[];this._getOAuthHash()},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_adminSvcs:/\/admin\/services(\/|$)/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},
{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/gi,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer|SceneServer)).*/gi,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(b){var f=this.serverInfos;f?(b=a.filter(b,function(a){return!this.findServerInfo(a.server)},this),this.serverInfos=f.concat(b)):
this.serverInfos=b;a.forEach(b,function(a){if(a.owningSystemUrl&&this._portals.push(a.owningSystemUrl),a.hasPortal){this._portals.push(a.server);var b=u.request.corsEnabledServers,f=this._getOrigin(a.tokenServiceUrl);w.canUseXhr(a.server)||b.push(a.server.replace(/^https?:\/\//i,""));w.canUseXhr(f)||b.push(f.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(b){var f=this.oAuthInfos;f?(b=a.filter(b,function(a){return!this.findOAuthInfo(a.portalUrl)},this),this.oAuthInfos=f.concat(b)):
this.oAuthInfos=b},registerToken:function(a){a=d.mixin({},a);var b,f=this._sanitizeUrl(a.server),c=this.findServerInfo(f),g=this._isServerRsrc(f),e=!0;c||(c=new t,c.server=this._getServerInstanceRoot(f),g?c.hasServer=!0:(c.tokenServiceUrl=this._getTokenSvcUrl(f),c.hasPortal=!0),this.registerServers([c]));(b=this._findCredential(f))?(delete a.server,d.mixin(b,a),e=!1):(b=new y({userId:a.userId,server:c.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:g?"server":"portal"}),b.resources=[f],this.credentials.push(b));
b.emitTokenChange(!1);e||b.refreshServerTokens()},toJSON:function(){return r.fixJson({serverInfos:a.map(this.serverInfos,function(a){return a.toJSON()}),oAuthInfos:a.map(this.oAuthInfos,function(a){return a.toJSON()}),credentials:a.map(this.credentials,function(a){return a.toJSON()})})},initialize:function(b){if(b){d.isString(b)&&(b=JSON.parse(b));var f=b.serverInfos,c=b.oAuthInfos;b=b.credentials;if(f){var g=[];a.forEach(f,function(a){a.server&&a.tokenServiceUrl&&g.push(a.declaredClass?a:new t(a))});
g.length&&this.registerServers(g)}if(c){var e=[];a.forEach(c,function(a){a.appId&&e.push(a.declaredClass?a:new z(a))});e.length&&this.registerOAuthInfos(e)}b&&a.forEach(b,function(a){a.server&&a.token&&a.expires&&a.expires>(new Date).getTime()&&(a=a.declaredClass?a:new y(a),a.emitTokenChange(),this.credentials.push(a))},this)}},findServerInfo:function(b){var f;return b=this._sanitizeUrl(b),a.some(this.serverInfos,function(a){return this._hasSameServerInstance(a.server,b)&&(f=a),!!f},this),f},findOAuthInfo:function(b){var f;
return b=this._sanitizeUrl(b),a.some(this.oAuthInfos,function(a){return this._hasSameServerInstance(a.portalUrl,b)&&(f=a),!!f},this),f},findCredential:function(b,f){var c,g;return b=this._sanitizeUrl(b),g=this._isServerRsrc(b)?"server":"portal",f?a.some(this.credentials,function(a){return this._hasSameServerInstance(a.server,b)&&f===a.userId&&a.scope===g&&(c=a),!!c},this):a.some(this.credentials,function(a){return this._hasSameServerInstance(a.server,b)&&-1!==this._getIdenticalSvcIdx(b,a)&&a.scope===
g&&(c=a),!!c},this),c},getCredential:function(a,b){var f,c,g=!0;r.isDefined(b)&&(d.isObject(b)?(f=!!b.token,c=b.error,g=!1!==b.prompt):f=b);a=this._sanitizeUrl(a);var e,p=q.makeDeferredCancellingPending(),l=this._isAdminResource(a),m=f&&this._doPortalSignIn(a)?this._getEsriAuthCookie():null;if((f=f?this.findCredential(a):null)&&c&&498===c.code)f.destroy(),m&&m.token===b.token&&k("esri_auth",null,{expires:-1,path:"/",domain:document.domain});else if(m||f)return e=Error("You are currently signed in as: '"+
(m&&m.email||f&&f.userId)+"'. You do not have access to this resource: "+a),e.code="IdentityManagerBase.1",e.httpCode=c&&c.httpCode,e.messageCode=c?c.messageCode:null,e.subcode=c?c.subcode:null,e.details=c?c.details:null,e.log=!!h.isDebug,p.reject(e),p.promise;if(c=this._findCredential(a,b))return p.resolve(c),p.promise;if(c=this.findServerInfo(a))!c.hasServer&&this._isServerRsrc(a)&&(c._restInfoDfd=this._getTokenSvcUrl(a,!0),c.hasServer=!0);else{m=this._getTokenSvcUrl(a);if(!m)return e=Error("Unknown resource - could not find token service endpoint."),
e.code="IdentityManagerBase.2",e.log=!!h.isDebug,p.reject(e),p.promise;c=new t;c.server=this._getServerInstanceRoot(a);d.isString(m)?(c.tokenServiceUrl=m,c.hasPortal=!0):(c._restInfoDfd=m,c.hasServer=!0);this.registerServers([c])}return g&&c.hasPortal&&void 0===c._selfReq&&!this._findOAuthInfo(a)&&(c._selfReq={owningTenant:b&&b.owningTenant,selfDfd:this._getPortalSelf(c.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),a)}),this._enqueue(a,c,b,p,l)},getResourceName:function(a){return this._isRESTService(a)?
a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""},generateToken:function(a,b,f){var g,e,p,k,l,m,v,u,q=this._rePortalTokenSvc.test(a.tokenServiceUrl),z=new c(window.location.href.toLowerCase()),t=this._getEsriAuthCookie(),r=!b,y=a.shortLivedTokenValidity;b&&(u=n.id.tokenValidity||y||n.id.defaultTokenValidity,u>y&&(u=y));
f&&(g=f.isAdmin,e=f.serverUrl,p=f.token,m=f.ssl,a.customParameters=f.customParameters);g?k=a.adminTokenServiceUrl:(k=a.tokenServiceUrl,l=new c(k.toLowerCase()),t&&(v=t.auth_tier,v=v&&v.toLowerCase()),("web"===v||a.webTierAuth)&&f&&f.serverUrl&&!m&&"http"===z.scheme&&(w.hasSameOrigin(z.uri,k,!0)||"https"===l.scheme&&z.host===l.host&&"7080"===z.port&&"7443"===l.port)&&(k=k.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),r&&q&&(k=k.replace(/\/rest/i,"")));f=d.mixin({query:d.mixin({request:"getToken",
username:b&&b.username,password:b&&b.password,serverUrl:e,token:p,expiration:u,referer:g||q?window.location.host:null,client:g?"referer":null,f:"json"},a.customParameters),method:r?"auto":"post",disableIdentityLookup:!0,useProxy:this._useProxy(a,f),responseType:"json",callbackParamName:r?"callback":void 0},f&&f.ioArgs);q||(f.withCredentials=!1);return x(k,f).then(function(f){f=f.data;if(!f||!f.token)return f=Error("Unable to generate token"),f.code="IdentityManagerBase.3",f.log=!!h.isDebug,f;var c=
a.server;return A[c]||(A[c]={}),b&&(A[c][b.username]=b.password),f.validity=u,f})},isBusy:function(){return!!this._busy},checkSignInStatus:function(a){return this.getCredential(a,{prompt:!1}).then(function(a){return a.token?x(a.server+("portal"===a.scope?"/sharing/rest":"/rest/services"),{query:{f:"json",token:a.token},callbackParamName:"callback",disableIdentityLookup:!0}).then(function(){return a}).otherwise(function(b){if(498===b.code)throw a.destroy(),b=Error("User is not signed in."),b.code=
"IdentityManagerBase.6",b.log=!!h.isDebug,b;return a}):a})},setRedirectionHandler:function(a){this._redirectFunc=a},setProtocolErrorHandler:function(a){this._protocolFunc=a},signIn:function(){},oAuthSignIn:function(){},destroyCredentials:function(){if(this.credentials){var b=this.credentials.slice();a.forEach(b,function(a){a.destroy()})}this.emit("credentials-destroy")},_getOAuthHash:function(){var a=window.location.hash;if(a){"#"===a.charAt(0)&&(a=a.substring(1));var a=l.queryToObject(a),b=!1;a.access_token&&
a.expires_in&&a.state&&a.hasOwnProperty("username")?(a.state=JSON.parse(a.state),this._oAuthHash=a,b=!0):a.error&&a.error_description&&(console.log("IdentityManager OAuth Error: ",a.error," - ",a.error_description),"access_denied"===a.error&&(b=!0));b&&(!m("ie")||8<m("ie"))&&(window.location.hash="")}},_findCredential:function(b,f){var c,g,d,e,p=-1,k=f&&f.token;f=f&&f.resource;var l=this._isServerRsrc(b)?"server":"portal",m=a.filter(this.credentials,function(a){return this._hasSameServerInstance(a.server,
b)&&a.scope===l},this);if(b=f||b,m.length)if(1===m.length){if(c=m[0],e=this.findServerInfo(c.server),g=e&&e.owningSystemUrl,d=g&&this.findCredential(g,c.userId),p=this._getIdenticalSvcIdx(b,c),!k)return-1===p&&c.resources.push(b),this._addResource(b,d),c;-1!==p&&(c.resources.splice(p,1),this._removeResource(b,d))}else{var n,v;if(a.some(m,function(a){return v=this._getIdenticalSvcIdx(b,a),-1!==v?(n=a,e=this.findServerInfo(n.server),g=e&&e.owningSystemUrl,d=g&&this.findCredential(g,n.userId),p=v,!0):
!1},this),k)n&&(n.resources.splice(p,1),this._removeResource(b,d));else if(n)return this._addResource(b,d),n}},_findOAuthInfo:function(b){var f=this.findOAuthInfo(b);return f||a.some(this.oAuthInfos,function(a){return this._isIdProvider(a.portalUrl,b)&&(f=a),!!f},this),f},_addResource:function(a,b){b&&-1===this._getIdenticalSvcIdx(a,b)&&b.resources.push(a)},_removeResource:function(a,b){var f=-1;b&&(f=this._getIdenticalSvcIdx(a,b),-1<f&&b.resources.splice(f,1))},_useProxy:function(a,b){return b&&
b.isAdmin&&!w.hasSameOrigin(a.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&10.1==a.currentVersion&&!w.hasSameOrigin(a.tokenServiceUrl,window.location.href)},_getOrigin:function(a){a=new c(a);return a.scheme+"://"+a.host+(r.isDefined(a.port)?":"+a.port:"")},_getServerInstanceRoot:function(a){var b=a.toLowerCase(),f=b.indexOf(this._agsRest);return-1===f&&this._isAdminResource(a)&&(f=b.indexOf("/admin")),-1===f&&(f=b.indexOf("/sharing")),-1===f&&"/"===b.substr(-1)&&
(f=b.length-1),-1<f?a.substring(0,f):a},_hasSameServerInstance:function(a,b){return"/"===a.substr(-1)&&(a=a.slice(0,-1)),a=a.toLowerCase(),b=this._getServerInstanceRoot(b).toLowerCase(),a=a.substr(a.indexOf(":")),b=b.substr(b.indexOf(":")),a===b},_sanitizeUrl:function(a){a=w.normalize(d.trim(a));var b=(u.request.proxyUrl||"").toLowerCase(),f=b?a.toLowerCase().indexOf(b+"?"):-1;return-1!==f&&(a=a.substring(f+b.length+1)),w.urlToObject(a).path},_isRESTService:function(a){return-1<a.indexOf(this._agsRest)},
_isAdminResource:function(a){return this._agsAdmin.test(a)||this._adminSvcs.test(a)},_isServerRsrc:function(a){return this._isRESTService(a)||this._isAdminResource(a)},_isIdenticalService:function(a,b){var f;this._isRESTService(a)&&this._isRESTService(b)?(a=this._getSuffix(a).toLowerCase(),b=this._getSuffix(b).toLowerCase(),(f=a===b,f)||(f=/(.*)\/(MapServer|FeatureServer).*/gi,f=a.replace(f,"$1")===b.replace(f,"$1"))):this._isAdminResource(a)&&this._isAdminResource(b)?f=!0:this._isServerRsrc(a)||
this._isServerRsrc(b)||!this._isPortalDomain(a)||(f=!0);return f},_isPortalDomain:function(b){b=b.toLowerCase();var f=(new c(b)).authority,g=this._portalConfig,e=-1!==f.indexOf(this._agolSuffix);(!e&&g&&(e=this._hasSameServerInstance(this._getServerInstanceRoot(g.restBaseUrl),b)),e)||(this._arcgisUrl||(g=d.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new c(g)).authority),this._arcgisUrl&&(e=this._arcgisUrl.toLowerCase()===f));return e||(e=a.some(this._portals,function(a){return this._hasSameServerInstance(a,
b)},this)),e=e||this._agsPortal.test(b)},_isIdProvider:function(b,f){var c=-1,g=-1;a.forEach(this._gwDomains,function(a,d){-1===c&&a.regex.test(b)&&(c=d);-1===g&&a.regex.test(f)&&(g=d)});var d=!1;if(-1<c&&-1<g&&(0===c||4===c?(0===g||4===g)&&(d=!0):1===c?(1===g||2===g)&&(d=!0):2===c?2===g&&(d=!0):3===c&&3===g&&(d=!0)),!d){var e=this.findServerInfo(f),p=e&&e.owningSystemUrl;p&&B(e)&&this._isPortalDomain(p)&&this._isIdProvider(b,p)&&(d=!0)}return d},_isPublic:function(b){return b=this._sanitizeUrl(b),
a.some(this._publicUrls,function(a){return a.test(b)})},_getIdenticalSvcIdx:function(b,f){var c=-1;return a.some(f.resources,function(a,f){return this._isIdenticalService(b,a)?(c=f,!0):!1},this),c},_getSuffix:function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(b){var f,g,d,e=this._isRESTService(b);if(e||this._isAdminResource(b))return d=b.toLowerCase().indexOf(e?this._agsRest:"/admin/"),f=b.substring(0,d)+"/admin/generateToken",b=b.substring(0,
d)+"/rest/info",g=x(b,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){return a.data}),g.adminUrl_=f,g;if(this._isPortalDomain(b)){var p="";if(a.some(this._gwDomains,function(a){return a.regex.test(b)&&(p=a.tokenServiceUrl),!!p}),p||a.some(this._portals,function(a){return this._hasSameServerInstance(a,b)&&(p=a+this._gwTokenUrl),!!p},this),p||(d=b.toLowerCase().indexOf("/sharing"),-1!==d&&(p=b.substring(0,d)+this._gwTokenUrl)),p||(p=this._getOrigin(b)+this._gwTokenUrl),
p)f=(new c(b)).port,/^http:\/\//i.test(b)&&"7080"===f&&(p=p.replace(/:7080/i,":7443")),p=p.replace(/http:/i,"https:");return p}return-1!==b.toLowerCase().indexOf("premium.arcgisonline.com")?"https://premium.arcgisonline.com/server/tokens":void 0},_getPortalSelf:function(a,b){return"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(b)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),x(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback",
crossOrigin:!1,disableIdentityLookup:!0}).then(function(a){return a.data})},_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var a;if(k.isSupported()){var b,f=this._getAllCookies("esri_auth");for(b=0;b<f.length;b++){var c=JSON.parse(f[b]);if(c.portalApp){a=c;break}}}return a},_getAllCookies:function(a){var b=[],f=document.cookie.match(new RegExp("(?:^|; )"+g.escapeString(a)+"\x3d([^;]*)","g"));if(f)for(a=0;a<f.length;a++){var c=f[a],d=c.indexOf("\x3d");
-1<d&&(c=c.substring(d+1),b.push(decodeURIComponent(c)))}return b},_doPortalSignIn:function(a){if(k.isSupported()){var b=this._getEsriAuthCookie(),f=this._portalConfig,c=window.location.href,g=this.findServerInfo(a);if(this.useSignInPage&&(f||this._isPortalDomain(c)||b)&&(g?g.hasPortal||g.owningSystemUrl&&this._isPortalDomain(g.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(c,a)||f&&(this._hasSameServerInstance(this._getServerInstanceRoot(f.restBaseUrl),a)||this._isIdProvider(f.restBaseUrl,
a))||w.hasSameOrigin(c,a,!0)))return!0}return!1},_checkProtocol:function(a,b,f,c){var g=!0;c=c?b.adminTokenServiceUrl:b.tokenServiceUrl;0!==d.trim(c).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||u.request.useCors&&(w.canUseXhr(c)||w.canUseXhr(w.getProxyUrl(!0).path))||(g=this._protocolFunc?!!this._protocolFunc({resourceUrl:a,serverInfo:b}):!1)||(a=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),a.code="IdentityManagerBase.4",
a.log=!!h.isDebug,console.log(a.message),f(a));return g},_enqueue:function(a,b,f,c,g,d){return c||(c=q.makeDeferredCancellingPending()),c.resUrl_=a,c.sinfo_=b,c.options_=f,c.admin_=g,c.refresh_=d,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(c)):this._xoReqs.push(c):this._doSignIn(c),c.promise},_doSignIn:function(b){this._busy=b;var f=this,c=function(c){var g=b.options_&&
b.options_.resource,d=b.resUrl_,e=b.refresh_,p=!1;-1===a.indexOf(f.credentials,c)&&(e&&-1!==a.indexOf(f.credentials,e)?(e.userId=c.userId,e.token=c.token,e.expires=c.expires,e.validity=c.validity,e.ssl=c.ssl,e.creationTime=c.creationTime,p=!0,c=e):f.credentials.push(c));c.resources||(c.resources=[]);c.resources.push(g||d);c.scope=f._isServerRsrc(d)?"server":"portal";c.emitTokenChange();var g=f._soReqs,k={};f._soReqs=[];a.forEach(g,function(a){if(!this._isIdenticalService(d,a.resUrl_)){var b=this._getSuffix(a.resUrl_);
k[b]||(k[b]=!0,c.resources.push(a.resUrl_))}},f);b.resolve(c);a.forEach(g,function(a){this._hasSameServerInstance(this._getServerInstanceRoot(d),a.resUrl_)?a.resolve(c):this._soReqs.push(a)},f);f._busy=b.resUrl_=b.sinfo_=b.refresh_=null;p||f.emit("credential-create",{credential:c});f._soReqs.length?f._doSignIn(f._soReqs.shift()):f._xoReqs.length&&f._doSignIn(f._xoReqs.shift())},g=function(a){b.reject(a);f._busy=b.resUrl_=b.sinfo_=b.refresh_=null;f._soReqs.length?f._doSignIn(f._soReqs.shift()):f._xoReqs.length&&
f._doSignIn(f._xoReqs.shift())},e=function(a,d,e,k){var l,m;l=b.sinfo_;var n=!b.options_||!1!==b.options_.prompt,v=l.hasPortal&&f._findOAuthInfo(b.resUrl_);if(f._doPortalSignIn(b.resUrl_)){a=f._getEsriAuthCookie();v=f._portalConfig;if(a)return void c(new y({userId:a.email,server:l.server,token:a.token,expires:null}));if(n)return n="",a=window.location.href,n=f.signInPage?f.signInPage:v?v.baseUrl+v.signin:f._isIdProvider(a,b.resUrl_)?f._getOrigin(a)+"/home/signin.html":l.tokenServiceUrl.replace(f._rePortalTokenSvc,
"")+"/home/signin.html",n=n.replace(/http:/i,"https:"),v&&!1===v.useSSL&&(n=n.replace(/https:/i,"http:")),void(0===a.toLowerCase().replace("https","http").indexOf(n.toLowerCase().replace("https","http"))?(m=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+b.resUrl_),m.code="IdentityManagerBase.5",m.log=!!h.isDebug,g(m)):f._redirectFunc?f._redirectFunc({signInPage:n,returnUrlParamName:"returnUrl",returnUrl:a,resourceUrl:b.resUrl_,
serverInfo:l}):window.location=n+"?returnUrl\x3d"+window.escape(a));m=Error("User is not signed in.");m.code="IdentityManagerBase.6";m.log=!!h.isDebug;g(m)}else a?c(new y({userId:a,server:l.server,token:e,expires:r.isDefined(k)?Number(k):null,ssl:!!d})):v?(a=v._oAuthCred,a||(d=new p(v,window.localStorage),e=new p(v,window.sessionStorage),d.isValid()&&e.isValid()?d.expires>e.expires?(a=d,e.destroy()):(a=e,d.destroy()):a=d.isValid()?d:e,v._oAuthCred=a),a.isValid()?c(new y({userId:a.userId,server:l.server,
token:a.token,expires:a.expires,ssl:a.ssl,_oAuthCred:a})):f._oAuthHash&&f._oAuthHash.state.portalUrl===v.portalUrl?(m=f._oAuthHash,l=new y({userId:m.username,server:l.server,token:m.access_token,expires:(new Date).getTime()+1E3*Number(m.expires_in),ssl:"true"===m.ssl,oAuthState:m.state,_oAuthCred:a}),a.storage=m.persist?window.localStorage:window.sessionStorage,a.token=l.token,a.expires=l.expires,a.userId=l.userId,a.ssl=l.ssl,a.save(),f._oAuthHash=null,c(l)):n?b._pendingDfd=f.oAuthSignIn(b.resUrl_,
l,v,b.options_).then(c,g):(m=Error("User is not signed in."),m.code="IdentityManagerBase.6",m.log=!!h.isDebug,g(m))):n?f._checkProtocol(b.resUrl_,l,g,b.admin_)&&(m=b.options_,b.admin_&&(m=m||{},m.isAdmin=!0),b._pendingDfd=f.signIn(b.resUrl_,l,m).then(c,g)):(m=Error("User is not signed in."),m.code="IdentityManagerBase.6",m.log=!!h.isDebug,g(m))},k=function(){var d,e,p,k,l=b.sinfo_,m=l.owningSystemUrl,n=b.options_;(n&&(d=n.token,e=n.error,p=n.prompt),k=f._findCredential(m,{token:d,resource:b.resUrl_}),
!k&&B(l)&&a.some(f.credentials,function(a){return this._isIdProvider(m,a.server)&&(k=a),!!k},f),k)?(d=f.findCredential(b.resUrl_,k.userId))?c(d):D(l,f._legacyFed)?(d=k.toJSON(),d.server=l.server,d.resources=null,c(new y(d))):(b._pendingDfd=f.generateToken(f.findServerInfo(k.server),null,{serverUrl:b.resUrl_,token:k.token,ssl:k.ssl})).then(function(a){c(new y({userId:k.userId,server:l.server,token:a.token,expires:r.isDefined(a.expires)?Number(a.expires):null,ssl:!!a.ssl,isAdmin:b.admin_,validity:a.validity}))},
g):(f._busy=null,d&&(b.options_.token=null),(b._pendingDfd=f.getCredential(m.replace(/\/?$/,"/sharing"),{resource:b.resUrl_,owningTenant:l.owningTenant,token:d,error:e,prompt:p})).then(function(a){f._enqueue(b.resUrl_,b.sinfo_,b.options_,b,b.admin_)},function(a){g(a)}))},l=b.sinfo_.owningSystemUrl,m=this._isServerRsrc(b.resUrl_),n=b.sinfo_._restInfoDfd;n?n.then(function(a){var c=b.sinfo_;c.adminTokenServiceUrl=c._restInfoDfd.adminUrl_;c._restInfoDfd=null;c.tokenServiceUrl=d.getObject("authInfo.tokenServicesUrl",
!1,a)||d.getObject("authInfo.tokenServiceUrl",!1,a)||d.getObject("tokenServiceUrl",!1,a);c.shortLivedTokenValidity=d.getObject("authInfo.shortLivedTokenValidity",!1,a);c.currentVersion=a.currentVersion;c.owningTenant=a.owningTenant;(a=c.owningSystemUrl=a.owningSystemUrl)&&f._portals.push(a);m&&a?k():e()},function(){b.sinfo_._restInfoDfd=null;var a=Error("Unknown resource - could not find token service endpoint.");a.code="IdentityManagerBase.2";a.log=!!h.isDebug;g(a)}):m&&l?k():b.sinfo_._selfReq?b.sinfo_._selfReq.selfDfd.then(function(a){var c,
g,d,e,p={};return a&&(c=a.user&&a.user.username,p.username=c,p.allSSL=a.allSSL,g=a.supportsOAuth,d=a.currentVersion,"multitenant"===a.portalMode&&(e=a.customBaseUrl)),b.sinfo_.webTierAuth=!!c,c&&f.normalizeWebTierAuth?f.generateToken(b.sinfo_,null,{ssl:p.allSSL}).always(function(a){return p.portalToken=a&&a.token,p.tokenExpiration=a&&a.expires,p}):!c&&g&&4.4<=parseFloat(d)&&!f._doPortalSignIn(b.resUrl_)?f._generateOAuthInfo({portalUrl:b.sinfo_.server,customBaseUrl:e,owningTenant:b.sinfo_._selfReq.owningTenant}).always(function(){return p}):
p}).always(function(a){b.sinfo_._selfReq=null;a?e(a.username,a.allSSL,a.portalToken,a.tokenExpiration):e()}):e()},_generateOAuthInfo:function(a){var f,c,g=this,d=a.portalUrl,e=a.customBaseUrl,p=a.owningTenant;if(a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){c=window.location.href;var k=c.indexOf("?");-1<k&&(c=c.slice(0,k));k=c.search(/\/(apps|home)\//);c=-1<k?c.slice(0,k):null}return a&&c?(this._hasTestedIfAppIsOnPortal=!0,f=x(c+"/sharing/rest",{query:{f:"json"},
responseType:"json"}).then(function(){g.defaultOAuthInfo=new z({appId:"arcgisonline",popup:!0,popupCallbackUrl:c+"/home/oauth-callback.html"})})):(f=new b,f.resolve(),f=f.promise),f.then(function(){return g.defaultOAuthInfo?(d=d.replace(/^http:/i,"https:"),x(d+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:p,client_id:g.defaultOAuthInfo.appId,redirect_uri:w.makeAbsolute(g.defaultOAuthInfo.popupCallbackUrl),f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){if(a.data.valid){var b=
g.defaultOAuthInfo.clone();a.data.urlKey&&e?b.portalUrl="https://"+a.data.urlKey+"."+e:b.portalUrl=d;g.oAuthInfos.push(b)}})):void 0})}});return y=v.createSubclass([f],{declaredClass:"esri.identity.Credential",constructor:function(a){a&&a._oAuthCred&&(this._oAuthCred=a._oAuthCred)},initialize:function(){this.resources=this.resources||[];r.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,properties:{creationTime:{},expires:{},isAdmin:{},oAuthState:{},resources:{},
scope:{},server:{},ssl:{},token:{},tokenRefreshBuffer:2,userId:{},validity:{}},refreshToken:function(){var b,f,c=this,g=this.resources&&this.resources[0],d=n.id.findServerInfo(this.server),e=d&&d.owningSystemUrl,p=!!e&&"server"===this.scope,k=p&&D(d,n.id._legacyFed),l=p&&n.id.findServerInfo(e),m=d.webTierAuth,v=m&&n.id.normalizeWebTierAuth,h=A[this.server],h=h&&h[this.userId],u={username:this.userId,password:h};if((!m||v)&&(p&&!l&&a.some(n.id.serverInfos,function(a){return n.id._isIdProvider(e,a.server)&&
(l=a),!!l}),b=l&&n.id.findCredential(l.server,this.userId),!p||b)){if(k)return void b.refreshToken();if(p)f={serverUrl:g,token:b&&b.token,ssl:b&&b.ssl};else if(v)u=null,f={ssl:this.ssl};else{if(!h){var q;return g&&(g=n.id._sanitizeUrl(g),this._enqueued=1,q=n.id._enqueue(g,d,null,null,this.isAdmin,this),q.then(function(){c._enqueued=0;c.refreshServerTokens()}).then(null,function(){c._enqueued=0})),q}this.isAdmin&&(f={isAdmin:!0})}return n.id.generateToken(p?l:d,p?null:u,f).then(function(a){c.token=
a.token;c.expires=r.isDefined(a.expires)?Number(a.expires):null;c.creationTime=(new Date).getTime();c.validity=a.validity;c.emitTokenChange();c.refreshServerTokens()}).then(null,function(){})}},refreshServerTokens:function(){"portal"===this.scope&&a.forEach(n.id.credentials,function(a){var b=n.id.findServerInfo(a.server),f=b&&b.owningSystemUrl;a!==this&&a.userId===this.userId&&f&&"server"===a.scope&&(n.id._hasSameServerInstance(this.server,f)||n.id._isIdProvider(f,this.server))&&(D(b,n.id._legacyFed)?
(a.token=this.token,a.expires=this.expires,a.creationTime=this.creationTime,a.validity=this.validity,a.emitTokenChange()):a.refreshToken())},this)},emitTokenChange:function(a){clearTimeout(this._refreshTimer);var b=this.server&&n.id.findServerInfo(this.server),f=(b=b&&b.owningSystemUrl)&&n.id.findServerInfo(b);!1!==a&&(!b||"portal"===this.scope||f&&f.webTierAuth&&!n.id.normalizeWebTierAuth)&&(r.isDefined(this.expires)||r.isDefined(this.validity))&&this._startRefreshTimer();this.emit("token-change")},
destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var b=a.indexOf(n.id.credentials,this);-1<b&&n.id.credentials.splice(b,1);this.emitTokenChange();this.emit("destroy")},toJSON:function(){var a=r.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,
scope:this.scope}),b=this.resources;return b&&0<b.length&&(a.resources=b.slice()),a},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var a=6E4*this.tokenRefreshBuffer,b=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>b&&(b=0);this._refreshTimer=setTimeout(d.hitch(this,this.refreshToken),b>a?b-a:b)}}),e.Credential=y,e})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(e,h){e.cookie=function(d,a,b){var c=document.cookie,e;
if(1==arguments.length)e=(e=c.match(new RegExp("(?:^|; )"+h.escapeString(d)+"\x3d([^;]*)")))?decodeURIComponent(e[1]):void 0;else{b=b||{};c=b.expires;if("number"==typeof c){var k=new Date;k.setTime(k.getTime()+864E5*c);c=b.expires=k}c&&c.toUTCString&&(b.expires=c.toUTCString());a=encodeURIComponent(a);var c=d+"\x3d"+a,l;for(l in b)c+="; "+l,k=b[l],!0!==k&&(c+="\x3d"+k);document.cookie=c}return e};e.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),
navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return e.cookie})},"esri/identity/ServerInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/JSONSupport".split(" "),function(e,h,d,a,b,c){e=function(a){function b(b){b=a.call(this)||this;return b.adminTokenServiceUrl=null,b.currentVersion=
null,b.hasPortal=null,b.hasServer=null,b.owningSystemUrl=null,b.owningTenant=null,b.server=null,b.shortLivedTokenValidity=null,b.tokenServiceUrl=null,b.webTierAuth=null,b}return d(b,a),b}(b.declared(c));return a([b.property({json:{write:!0}})],e.prototype,"adminTokenServiceUrl",void 0),a([b.property({json:{write:!0}})],e.prototype,"currentVersion",void 0),a([b.property({json:{write:!0}})],e.prototype,"hasPortal",void 0),a([b.property({json:{write:!0}})],e.prototype,"hasServer",void 0),a([b.property({json:{write:!0}})],
e.prototype,"owningSystemUrl",void 0),a([b.property({json:{write:!0}})],e.prototype,"owningTenant",void 0),a([b.property({json:{write:!0}})],e.prototype,"server",void 0),a([b.property({json:{write:!0}})],e.prototype,"shortLivedTokenValidity",void 0),a([b.property({json:{write:!0}})],e.prototype,"tokenServiceUrl",void 0),a([b.property({json:{write:!0}})],e.prototype,"webTierAuth",void 0),e=a([b.subclass("esri.identity.ServerInfo")],e)})},"esri/identity/OAuthCredential":function(){define(["../core/declare"],
function(e){return e(null,{declaredClass:"esri.identity.OAuthCredential",oAuthInfo:null,storage:null,expires:null,ssl:null,token:null,userId:null,constructor:function(e,d){this.oAuthInfo=e;this.storage=d;this._init()},isValid:function(){var e=!1;if(this.oAuthInfo&&this.token&&this.userId){var d=(new Date).getTime();this.expires>d&&(this.expires-d)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(e=!0)}return e},save:function(){if(this.storage){var e=this._load(),d=this.oAuthInfo;if(d&&d.authNamespace&&
d.portalUrl){var a=e[d.authNamespace];a||(a=e[d.authNamespace]={});a[d.portalUrl]={expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(e))}catch(b){console.log(b)}}}},destroy:function(){var e=this._load(),d=this.oAuthInfo;if(d&&d.authNamespace&&d.portalUrl&&this.storage){var a=e[d.authNamespace];if(a){delete a[d.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(e))}catch(b){console.log(b)}}}d&&(d._oAuthCred=
null,this.oAuthInfo=null)},_init:function(){var e=this._load(),d=this.oAuthInfo;d&&d.authNamespace&&d.portalUrl&&(e=e[d.authNamespace])&&(e=e[d.portalUrl],e&&(this.expires=e.expires,this.ssl=e.ssl,this.token=e.token,this.userId=e.userId))},_load:function(){var e={};if(this.storage){var d=this.storage.getItem("esriJSAPIOAuth");if(d)try{e=JSON.parse(d)}catch(a){console.log(a)}}return e}})})},"esri/identity/OAuthInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/JSONSupport".split(" "),
function(e,h,d,a,b,c){e=m=function(a){function b(b){b=a.call(this)||this;return b._oAuthCred=null,b.appId=null,b.authNamespace="/",b.expiration=20160,b.forceLogin=!1,b.locale=null,b.minTimeUntilExpiration=30,b.popup=!1,b.popupCallbackUrl="oauth-callback.html",b.popupWindowFeatures="height\x3d480,width\x3d800,location,resizable,scrollbars,status",b.portalUrl="https://www.arcgis.com",b}return d(b,a),b.prototype.clone=function(){return m.fromJSON(this.toJSON())},b}(b.declared(c));a([b.property({json:{write:!0}})],
e.prototype,"appId",void 0);a([b.property({json:{write:!0}})],e.prototype,"authNamespace",void 0);a([b.property({json:{write:!0}})],e.prototype,"expiration",void 0);a([b.property({json:{write:!0}})],e.prototype,"forceLogin",void 0);a([b.property({json:{write:!0}})],e.prototype,"locale",void 0);a([b.property({json:{write:!0}})],e.prototype,"minTimeUntilExpiration",void 0);a([b.property({json:{write:!0}})],e.prototype,"popup",void 0);a([b.property({json:{write:!0}})],e.prototype,"popupCallbackUrl",
void 0);a([b.property({json:{write:!0}})],e.prototype,"popupWindowFeatures",void 0);a([b.property({json:{write:!0}})],e.prototype,"portalUrl",void 0);e=m=a([b.subclass("esri.identity.OAuthInfo")],e);var m;return e})},"esri/identity/nls/identity":function(){define({root:{lblItem:"item",title:"Sign In",info:"Please sign in to access the item on {server} {resource}",oAuthInfo:"Please sign in to continue.",lblUser:"Username:",lblPwd:"Password:",lblOk:"OK",lblSigning:"Signing in...",lblCancel:"Cancel",
errorMsg:"Invalid username/password. Please try again.",invalidUser:"The username or password you entered is incorrect.",forbidden:"The username and password are valid, but you don't have access to this resource.",noAuthService:"Unable to access the authentication service."},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hr:1,hi:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),
function(e,h,d,a,b,c,m,k,l,g){a("dijit-legacy-requires")&&m(0,function(){e(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});m=h("dijit.form.Button"+(a("dojo-bidi")?"_NoBidi":""),[k,l],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:g,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);
this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=c.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&d.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){b.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);this.showLabel||
"title"in this.params||(this.titleNode.title=c.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});a("dojo-bidi")&&(m=h("dijit.form.Button",m,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return m})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(e,h,d,a,b,c,m,k){h("dijit-legacy-requires")&&a(0,function(){require(["dijit/form/_FormValueWidget"])});return e("dijit.form._FormWidget",[b,m,c,k],{setDisabled:function(a){d.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",a)},setValue:function(a){d.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0");this.set("value",a)},getValue:function(){d.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!h("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(e,h,d,a,b,c,m,k,l,g){return h("dijit.form._FormWidgetMixin",
null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(a){this._set("disabled",a);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?d.set(this.focusNode,"disabled",a):this.focusNode.setAttribute("aria-disabled",a?"true":"false");this.valueNode&&d.set(this.valueNode,"disabled",a);a?(this._set("hovering",!1),
this._set("active",!1),a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",e.forEach(b.isArray(a)?a:[a],function(a){a=this[a];k("webkit")||g.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var c=this.own(m(this.focusNode,"focus",function(){d.remove();c.remove()}))[0],g=k("pointer-events")?
"pointerup":k("MSPointer")?"MSPointerUp":k("touch-events")?"touchend, mouseup":"mouseup",d=this.own(m(this.ownerDocumentBody,g,b.hitch(this,function(a){d.remove();c.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){l.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=a.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(n){}},
compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){void 0!=this._lastValueReported||null!==b&&this._onChangeActive||(this._resetValue=this._lastValueReported=a);this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);(this.intermediateChanges||b||void 0===b)&&this._pendingOnChange&&(this._lastValueReported=
a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],
function(e,h,d,a){var b=e("dijit.form._ButtonMixin"+(d("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(a){a.stopPropagation();a.preventDefault();this.disabled||this.valueNode.click(a);return!1},_onClick:function(b){if(this.disabled)return b.stopPropagation(),b.preventDefault(),!1;!1===this.onClick(b)&&b.preventDefault();var c=b.defaultPrevented;if(!c&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var d=this.domNode;d.parentNode;d=d.parentNode){var e=a.byNode(d);
if(e&&"function"==typeof e._onSubmit){e._onSubmit(b);b.preventDefault();c=!0;break}}return!c},postCreate:function(){this.inherited(arguments);h.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(a){this._set("label",a);(this.containerNode||this.focusNode).innerHTML=a;this.onLabelSet()},onLabelSet:function(){}});d("dojo-bidi")&&(b=e("dijit.form._ButtonMixin",b,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));
return b})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(e,h,d,a,b,c,m,k){return e("dijit.form.Form",[b,c,m,k],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(b){h.set(this.domNode,"encType",b);a("ie")&&(this.domNode.encoding=b);this._set("encType",b)},reset:function(a){var b={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:a?a.target:this.domNode,target:a?a.target:this.domNode};!1!==this.onReset(b)&&b.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(a){this.reset(a);a.stopPropagation();a.preventDefault();return!1},_onSubmit:function(a){var b=this.constructor.prototype;if(this.execute!=b.execute||this.onExecute!=b.onExecute)d.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(a)&&(a.stopPropagation(),a.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),function(e,h,d,a,b,c,m){var k=e("dijit.form.ValidationTextBox",b,{templateString:m,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",
regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(a,b){b!=k.prototype[a]&&(h.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+a+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",b))},_setRegExpGenAttr:function(a){this._deprecateRegExp("regExpGen",a);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(a){this._deprecateRegExp("regExp",a)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},
validator:function(a,b){return(new RegExp("^(?:"+this._computeRegexp(b)+")"+(this.required?"":"?")+"$")).test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||void 0!==this.parse(a,b))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){var a="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:
this.invalidMessage?this.invalidMessage:this.promptMessage,b="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:a;return this.required&&this._isEmpty(this.textbox.value)?b:a},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var b="",c=this.disabled||this.isValid(a);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),e=!c&&a&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||
a)&&d||e)&&(this._maskValidSubsetError||e&&!this._hasBeenBlurred&&a)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=a&&e,b=this.getErrorMessage(a)):"Incomplete"==this.state?(b=this.getPromptMessage(a),this._maskValidSubsetError=!this._hasBeenBlurred||a):d&&(b=this.getPromptMessage(a));this.set("message",b);return c},displayMessage:function(a){a&&this.focused?c.show(a,this.domNode,this.tooltipPosition,
!this.isLeftToRight()):c.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(a){this.constraints=d.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(a){!a.locale&&this.lang&&(a.locale=this.lang);this._set("constraints",a);this._refreshState()},_setPatternAttr:function(a){this._set("pattern",a);this._refreshState()},
_computeRegexp:function(a){var b=this.pattern;"function"==typeof b&&(b=b.call(this,a));if(b!=this._lastRegExp){var c="";this._lastRegExp=b;".*"!=b&&b.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=a;break;case ")":c+="|$)";break;default:c+="(?:"+a+"|$)"}});try{"".search(c)}catch(u){c=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+
c+")$"}return b},postMixInProperties:function(){this.inherited(arguments);this.messages=a.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setMessageAttr:function(a){this._set("message",a);this.displayMessage(a)},reset:function(){this._maskValidSubsetError=
!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){c.hide(this.domNode);this.inherited(arguments)}});return k})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),function(e,h,d,a,b,c,m,k,l,g,n){k=e("dijit.form.TextBox"+(m("dojo-bidi")?"_NoBidi":""),
[k,l],{templateString:g,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:m("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=
this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>m("ie")&&this.defer(function(){try{var a=d.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(w){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=h.create("span",{className:"dijitPlaceHolder dijitInputField"},
this.textbox,"after"),this.own(c(this._phspan,"mousedown",function(a){a.preventDefault()}),c(this._phspan,"touchend, pointerup, MSPointerUp",b.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},
_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){a.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(b){a.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",b)},_onBlur:function(a){this.disabled||(this.inherited(arguments),
this._updatePlaceHolder(),m("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});9>m("ie")&&(k.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},n._setSelectionRange=l._setSelectionRange=function(a,b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),
a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});m("dojo-bidi")&&(k=e("dijit.form.TextBox",k,{_setPlaceHolderAttr:function(a){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return k})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(e,h,d,a){return e("dijit.form._FormValueWidget",[d,a],{_layoutHackIE7:function(){if(7==h("ie"))for(var a=this.domNode,c=a.parentNode,
d=a.firstChild||a,e=d.style.filter,l=this;c&&0==c.clientHeight;)(function(){var a=l.connect(c,"onscroll",function(){l.disconnect(a);d.style.filter=(new Date).getMilliseconds();l.defer(function(){d.style.filter=e})})})(),c=c.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(e,h,d,a,b,c){return e("dijit.form._FormValueMixin",c,{readOnly:!1,_setReadOnlyAttr:function(a){h.set(this.focusNode,
"readOnly",a);this._set("readOnly",a)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(a,b){this._handleOnChange(a,b)},_handleOnChange:function(a,b){this._set("value",a);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),
function(e,h,d,a,b,c,m,k){var l=h("dijit.form._TextBoxMixin"+(a("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var d;void 0!==a&&(d=this.filter(a),"string"!=typeof c&&(c=null===d||"number"==typeof d&&isNaN(d)?"":this.filter(this.format(d,this.constraints)),0!=this.compare(d,this.filter(this.parse(c,this.constraints)))&&
(c=null)));null==c||"number"==typeof c&&isNaN(c)||this.textbox.value==c||(this.textbox.value=c,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[d,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==
a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);
this.inherited(arguments);this.own(m(this.textbox,"keydown, keypress, paste, cut, compositionend",c.hitch(this,function(d){var g;if("keydown"==d.type&&229!=d.keyCode){g=d.keyCode;switch(g){case b.SHIFT:case b.ALT:case b.CTRL:case b.META:case b.CAPS_LOCK:case b.NUM_LOCK:case b.SCROLL_LOCK:return}if(!d.ctrlKey&&!d.metaKey&&!d.altKey){switch(g){case b.NUMPAD_0:case b.NUMPAD_1:case b.NUMPAD_2:case b.NUMPAD_3:case b.NUMPAD_4:case b.NUMPAD_5:case b.NUMPAD_6:case b.NUMPAD_7:case b.NUMPAD_8:case b.NUMPAD_9:case b.NUMPAD_MULTIPLY:case b.NUMPAD_PLUS:case b.NUMPAD_ENTER:case b.NUMPAD_MINUS:case b.NUMPAD_PERIOD:case b.NUMPAD_DIVIDE:return}if(65<=
g&&90>=g||48<=g&&57>=g||g==b.SPACE)return;g=!1;for(var e in b)if(b[e]===d.keyCode){g=!0;break}if(!g)return}}(g=32<=d.charCode?String.fromCharCode(d.charCode):d.charCode)||(g=65<=d.keyCode&&90>=d.keyCode||48<=d.keyCode&&57>=d.keyCode||d.keyCode==b.SPACE?String.fromCharCode(d.keyCode):d.keyCode);g||(g=229);if("keypress"==d.type){if("string"!=typeof g)return;if("a"<=g&&"z">=g||"A"<=g&&"Z">=g||"0"<=g&&"9">=g||" "===g)if(d.ctrlKey||d.metaKey||d.altKey)return}var k={faux:!0},l;for(l in d)/^(layer[XY]|returnValue|keyLocation)$/.test(l)||
(e=d[l],"function"!=typeof e&&"undefined"!=typeof e&&(k[l]=e));c.mixin(k,{charOrCode:g,_wasConsumed:!1,preventDefault:function(){k._wasConsumed=!0;d.preventDefault()},stopPropagation:function(){d.stopPropagation()}});this._lastInputProducingEvent=k;!1===this.onInput(k)&&(k.preventDefault(),k.stopPropagation());if(!k._wasConsumed&&9>=a("ie"))switch(d.keyCode){case b.TAB:case b.ESCAPE:case b.DOWN_ARROW:case b.UP_ARROW:case b.LEFT_ARROW:case b.RIGHT_ARROW:break;default:d.keyCode==b.ENTER&&"textarea"!=
this.textbox.tagName.toLowerCase()||this.defer(function(){this.textbox.value!==this._lastInputEventValue&&m.emit(this.textbox,"input",{bubbles:!0})})}})),m(this.textbox,"input",c.hitch(this,"_onInput")),m(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=c.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,
function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=m.once(this.domNode,"mouseup, touchend",c.hitch(this,function(a){this._isTextSelected()||
l.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});a("dojo-bidi")&&(l=h("dijit.form._TextBoxMixin",l,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);
this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));l._setSelectionRange=k._setSelectionRange=function(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)};l.selectInputText=k.selectInputText=function(a,b,c){a=d.byId(a);isNaN(b)&&(b=0);isNaN(c)&&(c=a.value?a.value.length:0);try{a.focus(),l._setSelectionRange(a,b,c)}catch(r){}};return l})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x){function f(){}var p=h("dijit._MasterTooltip",[t,w],{duration:u.defaultDuration,templateString:v,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new q(this.domNode);this.fadeIn=d.fadeIn({node:this.domNode,duration:this.duration,onEnd:k.hitch(this,"_onShow")});this.fadeOut=d.fadeOut({node:this.domNode,duration:this.duration,onEnd:k.hitch(this,"_onHide")})},show:function(a,b,c,d,g,e,p){if(!this.aroundNode||this.aroundNode!==
b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;g&&this.set("textDir",g);this.containerNode.align=d?"right":"left";var l=r.around(this.domNode,b,c&&c.length?c:z.defaultPosition,!d,k.hitch(this,"orient")),v=l.aroundNodePos;"M"==l.corner.charAt(0)&&"M"==l.aroundCorner.charAt(0)?(this.connectorNode.style.top=v.y+(v.h-this.connectorNode.offsetHeight>>1)-l.y+"px",this.connectorNode.style.left=""):"M"==l.corner.charAt(1)&&
"M"==l.aroundCorner.charAt(1)?this.connectorNode.style.left=v.x+(v.w-this.connectorNode.offsetWidth>>1)-l.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");m.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=e||f;this.onMouseLeave=p||f}},orient:function(a,b,f,d,g){this.connectorNode.style.top="";var e=d.h;d=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+f];this.domNode.style.width="auto";var p=c.position(this.domNode);if(n("ie")||n("trident"))p.w+=2;c.setMarginBox(this.domNode,{w:Math.min(Math.max(d,1),p.w)});"B"==f.charAt(0)&&"B"==b.charAt(0)?(a=c.position(a),b=this.connectorNode.offsetHeight,
a.h>e?(this.connectorNode.style.top=e-(g.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(g.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,p.w-d)},_onShow:function(){n("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=
null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=f},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});n("dojo-bidi")&&p.extend({_setAutoTextDir:function(a){this.applyTextDir(a);e.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});x.showTooltip=
function(a,b,f,c,d,g,k){f&&(f=e.map(f,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));z._masterTT||(x._masterTT=z._masterTT=new p);return z._masterTT.show(a,b,f,c,d,g,k)};x.hideTooltip=function(a){return z._masterTT&&z._masterTT.hide(a)};var z=h("dijit.Tooltip",t,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(b){e.forEach(this._connections||[],function(a){e.forEach(a,function(a){a.remove()})},this);this._connectIds=
e.filter(k.isArrayLike(b)?b:b?[b]:[],function(b){return a.byId(b,this.ownerDocument)},this);this._connections=e.map(this._connectIds,function(b){b=a.byId(b,this.ownerDocument);var f=this.selector,c=f?function(a){return g.selector(f,a)}:function(a){return a},d=this;return[g(b,c(l.enter),function(){d._onHover(this)}),g(b,c("focusin"),function(){d._onHover(this)}),g(b,c(l.leave),k.hitch(d,"_onUnHover")),g(b,c("focusout"),k.hitch(d,"set","state","DORMANT"))]},this);this._set("connectId",b)},addTarget:function(a){a=
a.id||a;-1==e.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=e.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);b.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;e.forEach(k.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},
state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(z.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},
this.showDelay));break;case "SHOWING":var b=this.getContent(this._connectNode);if(!b){this.set("state","DORMANT");return}z.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,k.hitch(this,"set","state","SHOWING"),k.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&a!=this._connectNode&&
this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");e.forEach(this._connections||[],function(a){e.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});z._MasterTooltip=p;z.show=
x.showTooltip;z.hide=x.hideTooltip;z.defaultPosition=["after-centered","before-centered"];return z})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(e,h,d,a,b,c,m){function k(a,k,l,m){var g=c.getEffectiveBox(a.ownerDocument);a.parentNode&&"body"==String(a.parentNode.tagName).toLowerCase()||b.body(a.ownerDocument).appendChild(a);var n=null;e.some(k,function(b){var f=b.corner,c=b.pos,d=0,e=
{w:{L:g.l+g.w-c.x,R:c.x-g.l,M:g.w}[f.charAt(1)],h:{T:g.t+g.h-c.y,B:c.y-g.t,M:g.h}[f.charAt(0)]},k=a.style;k.left=k.right="auto";l&&(d=l(a,b.aroundCorner,f,e,m),d="undefined"==typeof d?0:d);var v=a.style,q=v.display,x=v.visibility;"none"==v.display&&(v.visibility="hidden",v.display="");k=h.position(a);v.display=q;v.visibility=x;q={L:c.x,R:c.x-k.w,M:Math.max(g.l,Math.min(g.l+g.w,c.x+(k.w>>1))-k.w)}[f.charAt(1)];x={T:c.y,B:c.y-k.h,M:Math.max(g.t,Math.min(g.t+g.h,c.y+(k.h>>1))-k.h)}[f.charAt(0)];c=Math.max(g.l,
q);v=Math.max(g.t,x);q=Math.min(g.l+g.w,q+k.w)-c;x=Math.min(g.t+g.h,x+k.h)-v;d+=k.w-q+(k.h-x);if(null==n||d<n.overflow)n={corner:f,aroundCorner:b.aroundCorner,x:c,y:v,w:q,h:x,overflow:d,spaceAvailable:e};return!d});n.overflow&&l&&l(a,n.aroundCorner,n.corner,n.spaceAvailable,m);k=n.y;var q=n.x,v=b.body(a.ownerDocument);/relative|absolute/.test(d.get(v,"position"))&&(k-=d.get(v,"marginTop"),q-=d.get(v,"marginLeft"));v=a.style;v.top=k+"px";v.left=q+"px";v.right="auto";return n}var l={TL:"BR",TR:"BL",
BL:"TR",BR:"TL"};return m.place={at:function(a,b,c,d,m){c=e.map(c,function(a){var c={corner:a,aroundCorner:l[a],pos:{x:b.x,y:b.y}};d&&(c.pos.x+="L"==a.charAt(1)?d.x:-d.x,c.pos.y+="T"==a.charAt(0)?d.y:-d.y);return c});return k(a,c,m)},around:function(b,c,l,m,t){function g(a,b){F.push({aroundCorner:a,corner:b,pos:{x:{L:r,R:r+B,M:r+(B>>1)}[a.charAt(1)],y:{T:A,B:A+D,M:A+(D>>1)}[a.charAt(0)]}})}var n;if("string"==typeof c||"offsetWidth"in c||"ownerSVGElement"in c){if(n=h.position(c,!0),/^(above|below)/.test(l[0])){var v=
h.getBorderExtents(c),x=c.firstChild?h.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0},f=h.getBorderExtents(b),p=b.firstChild?h.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0};n.y+=Math.min(v.t+x.t,f.t+p.t);n.h-=Math.min(v.t+x.t,f.t+p.t)+Math.min(v.b+x.b,f.b+p.b)}}else n=c;if(c.parentNode)for(v="absolute"==d.getComputedStyle(c).position,c=c.parentNode;c&&1==c.nodeType&&"BODY"!=c.nodeName;){x=h.position(c,!0);f=d.getComputedStyle(c);/relative|absolute/.test(f.position)&&(v=!1);if(!v&&/hidden|auto|scroll/.test(f.overflow)){var p=
Math.min(n.y+n.h,x.y+x.h),u=Math.min(n.x+n.w,x.x+x.w);n.x=Math.max(n.x,x.x);n.y=Math.max(n.y,x.y);n.h=p-n.y;n.w=u-n.x}"absolute"==f.position&&(v=!0);c=c.parentNode}var r=n.x,A=n.y,B="w"in n?n.w:n.w=n.width,D="h"in n?n.h:(a.deprecated("place.around: dijit/place.__Rectangle: { x:"+r+", y:"+A+", height:"+n.height+", width:"+B+" } has been deprecated.  Please use { x:"+r+", y:"+A+", h:"+n.height+", w:"+B+" }","","2.0"),n.h=n.height),F=[];e.forEach(l,function(a){var b=m;switch(a){case "above-centered":g("TM",
"BM");break;case "below-centered":g("BM","TM");break;case "after-centered":b=!b;case "before-centered":g(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":g(b?"TL":"TR",b?"TR":"TL");g(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":g(b?"BL":"BR",b?"TL":"TR");g(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":g(b?"TL":"TR",b?"BL":"BR");g(b?"TR":"TL",b?"BR":"BL");break;default:g(a.aroundCorner,a.corner)}});b=k(b,F,t,{w:B,h:D});b.aroundNodePos=n;return b}}})},
"dijit/form/nls/validate":function(){define({root:{invalidMessage:"The value entered is not valid.",missingMessage:"This value is required.",rangeMessage:"This value is out of range."},bs:!0,mk:!0,sr:!0,zh:!0,"zh-tw":!0,vi:!0,uk:!0,tr:!0,th:!0,sv:!0,sl:!0,sk:!0,ru:!0,ro:!0,pt:!0,"pt-pt":!0,pl:!0,nl:!0,nb:!0,lv:!0,lt:!0,ko:!0,kk:!0,ja:!0,it:!0,id:!0,hu:!0,hr:!0,hi:!0,he:!0,fr:!0,fi:!0,eu:!0,et:!0,es:!0,el:!0,de:!0,da:!0,cs:!0,ca:!0,bg:!0,az:!0,ar:!0})},"esri/identity/OAuthSignInHandler":function(){define("./Credential ../core/domUtils ../core/lang ../core/urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/identity dojo/io-query dojo/sniff dijit/form/Button dojo/query".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(a){this._oAuthRedirectFunc=a},oAuthSignIn:function(a,b,c,d){var e=this._oAuthDfd=new k;e.resUrl_=a;e.sinfo_=b;e.oinfo_=c;var f=!d||!1!==d.oAuthPopupConfirmation;if(!c.popup||!f)return this._doOAuthSignIn(a,b,c),e.promise;this._nls||(this._nls=n);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());a=this.oAuthDialog;b=d&&d.error;d=d&&d.token;return h.hide(a.errMsg_),b&&403==b.code&&d&&(g.set(a.errMsg_,"innerHTML",this._nls.forbidden),h.show(a.errMsg_)),
a.show(),e.promise},setOAuthResponseHash:function(a){var b=this._oAuthDfd;if(this._oAuthDfd=null,b&&a)if(clearInterval(this._oAuthIntervalId),"#"===a.charAt(0)&&(a=a.substring(1)),a=u.queryToObject(a),a.error)a=Error("access_denied"===a.error?"ABORTED":"OAuth: "+a.error+" - "+a.error_description),a.code="IdentityManagerBase.2",a.log=!!m.isDebug,b.reject(a);else{var c=b.oinfo_._oAuthCred,d=new e({userId:a.username,server:b.sinfo_.server,token:a.access_token,expires:(new Date).getTime()+1E3*Number(a.expires_in),
ssl:"true"===a.ssl,_oAuthCred:c});c.storage=a.persist?window.localStorage:window.sessionStorage;c.token=d.token;c.expires=d.expires;c.userId=d.userId;c.ssl=d.ssl;c.save();b.resolve(d)}},_createOAuthDialog:function(){var a=this._nls,g=d.substitute(a,this._oAuthDialogContent),e=new b({title:a.title,content:g,"class":"esri-widget esriOAuthSignInDialog esriIdentityDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var a=e.esriIdMgr_._oAuthDfd;e.hide_();e.esriIdMgr_._doOAuthSignIn(a.resUrl_,
a.sinfo_,a.oinfo_)},cancel_:function(){var a=e.esriIdMgr_._oAuthDfd;e.esriIdMgr_._oAuthDfd=null;e.hide_();var b=Error("ABORTED");b.code="IdentityManager.2";b.log=!!m.isDebug;a.reject(b)},hide_:function(){h.hide(e.errMsg_);e.hide();b._DialogLevelManager.hide(e)}}),a=e.domNode;return e.btnSubmit_=c.byNode(l.query(".esriIdSubmit",a)[0]),e.btnCancel_=c.byNode(l.query(".esriIdCancel",a)[0]),e.errMsg_=l.query(".esriErrorMsg",a)[0],e.connect(e.btnSubmit_,"onClick",e.execute_),e.connect(e.btnCancel_,"onClick",
e.onCancel),e.connect(e,"onCancel",e.cancel_),e},_doOAuthSignIn:function(b,c,d){var g=this,e={client_id:d.appId,response_type:"token",state:JSON.stringify({portalUrl:d.portalUrl}),expiration:d.expiration,locale:d.locale,redirect_uri:d.popup?a.makeAbsolute(d.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};d.forceLogin&&(e.force_login=!0);var f=d.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",p=f+"?"+u.objectToQuery(e);if(d.popup){var k;(7===r("ie")?(k=window.open(d.popupCallbackUrl,
"esriJSAPIOAuth",d.popupWindowFeatures),k.location=p):k=window.open(p,"esriJSAPIOAuth",d.popupWindowFeatures),k)?(k.focus(),this._oAuthDfd.oAuthWin_=k,this._oAuthIntervalId=setInterval(function(){if(k.closed){clearInterval(g._oAuthIntervalId);var a=g._oAuthDfd;if(a){var b=Error("ABORTED");b.code="IdentityManager.2";b.log=!!m.isDebug;a.reject(b)}}},500)):(b=Error("ABORTED"),b.code="IdentityManager.2",b.log=!!m.isDebug,this._oAuthDfd.reject(b))}else this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:e,
authorizeUrl:f,resourceUrl:b,serverInfo:c,oAuthInfo:d}):window.location=p}}})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor ../core/kebabDictionary ../geometry/Extent ../geometry/support/webMercatorUtils ../geometry/SpatialReference dojo/_base/lang".split(" "),function(e,h,d,a,b,c,m,k,l,g,n){var u=m({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",
numViews:"num-views"});e=r=function(a){function b(b){b=a.call(this)||this;return b.disableExtraQuery=!1,b.extent=null,b.num=10,b.query=null,b.sortField=null,b.start=1,b}return d(b,a),Object.defineProperty(b.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(a){"asc"!==a&&"desc"!==a||this._set("sortOrder",a)},enumerable:!0,configurable:!0}),b.prototype.clone=function(){return new r({disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():
null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})},b.prototype.toRequestOptions=function(a,b){var c;if(this.extent){var f=l.project(this.extent,g.WGS84);f&&(c=f.xmin+","+f.ymin+","+f.xmax+","+f.ymax)}f=this.query;!this.disableExtraQuery&&a.extraQuery&&(f="("+f+")"+a.extraQuery);a={bbox:c,q:f,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(a.sortField=u.toJSON(this.sortField),a.sortOrder=this.sortOrder),{query:n.mixin(b,
a)}},b}(b.declared(c));a([b.property()],e.prototype,"disableExtraQuery",void 0);a([b.property({type:k})],e.prototype,"extent",void 0);a([b.property()],e.prototype,"num",void 0);a([b.property()],e.prototype,"query",void 0);a([b.property()],e.prototype,"sortField",void 0);a([b.property()],e.prototype,"sortOrder",null);a([b.property()],e.prototype,"start",void 0);e=r=a([b.subclass("esri.portal.PortalQueryParams")],e);var r;return e})},"esri/core/kebabDictionary":function(){define(["require","exports"],
function(e,h){return function(d,a){void 0===a&&(a={});var b=a.ignoreUnknown||!1,c={},e;for(e in d)c[d[e]]=e;var k=function(a){return c.hasOwnProperty(a)?c[a]:b?void 0:a},l=function(a){return d.hasOwnProperty(a)?d[a]:b?void 0:a};return{toJSON:k,fromJSON:l,read:function(a){return l(a)},write:function(a,b,c){a=k(a);void 0!==a&&(b[c]=a)}}}})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor".split(" "),
function(e,h,d,a,b,c){e=function(a){function b(b){b=a.call(this)||this;return b.nextQueryParams=null,b.queryParams=null,b.results=null,b.total=null,b}return d(b,a),b}(b.declared(c));return a([b.property()],e.prototype,"nextQueryParams",void 0),a([b.property()],e.prototype,"queryParams",void 0),a([b.property()],e.prototype,"results",void 0),a([b.property()],e.prototype,"total",void 0),e=a([b.subclass("esri.portal.PortalQueryResult")],e)})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Error ../core/JSONSupport ./PortalFolder ./PortalGroup ../core/promiseUtils ../core/requireUtils dojo/promise/all".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u){h=function(a){function b(){var b=a.call(this)||this;return b.access=null,b.created=null,b.culture=null,b.description=null,b.email=null,b.fullName=null,b.modified=null,b.orgId=null,b.portal=null,b.preferredView=null,b.privileges=null,b.region=null,b.role=null,b.roleId=null,b.units=null,b.username=null,b.userType=null,b}return d(b,a),Object.defineProperty(b.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+
"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"userContentUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/users/"+this.username:null},enumerable:!0,configurable:!0}),b.prototype.addItem=function(a){var b=this,c=a&&a.item,d=a&&a.data;a=a&&a.folder;var f=
{method:"post"};c&&(f.query=c._getPostQuery(),null!=d&&("string"==typeof d?f.query.text=d:"object"==typeof d&&(f.query.text=JSON.stringify(d))));d=this.userContentUrl;return a&&(d+="/"+a.id),this.portal._request(d+"/addItem",f).then(function(a){return c.id=a.id,c.portal=b.portal,c.loaded?c._reload():c.load()})},b.prototype.deleteItem=function(a){var b=this.userContentUrl;return a.ownerFolder&&(b+="/"+a.ownerFolder),this.portal._request(b+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=
null;a.portal=null})},b.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=k.fromJSON(b);return b.portal=a.portal,b}):[]})},b.prototype.fetchGroups=function(){var a=this;return this.portal._request(this.url).then(function(b){return b&&b.groups?b.groups.map(function(b){b=l.fromJSON(b);return b.portal=a.portal,b}):[]})},b.prototype.fetchItems=function(a){var b=this;a||(a={});var c=
this.userContentUrl;a.folder&&(c+="/"+a.folder.id);var d;return n.when(e,"./PortalItem").then(function(f){d=f;return b.portal._request(c,{query:{folders:!1,num:a.num||10,start:a.start||1}})}).then(function(a){var f;return a&&a.items?(f=a.items.map(function(a){a=d.fromJSON(a);return a.portal=b.portal,a.load(),a}),u(f).always(function(){return{items:f,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})},b.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;return b&&
a&&(b+="\x26w\x3d"+a),b},b.prototype.queryFavorites=function(a){return this.favGroupId?(this._favGroup||(this._favGroup=new l({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(a)):g.reject(new c("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))},b.prototype.toJSON=function(){throw new c("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");},b}(b.declared(m));return a([b.property()],h.prototype,"access",void 0),a([b.property({type:Date})],
h.prototype,"created",void 0),a([b.property()],h.prototype,"culture",void 0),a([b.property()],h.prototype,"description",void 0),a([b.property()],h.prototype,"email",void 0),a([b.property()],h.prototype,"favGroupId",void 0),a([b.property()],h.prototype,"fullName",void 0),a([b.property({type:Date})],h.prototype,"modified",void 0),a([b.property()],h.prototype,"orgId",void 0),a([b.property()],h.prototype,"portal",void 0),a([b.property()],h.prototype,"preferredView",void 0),a([b.property()],h.prototype,
"privileges",void 0),a([b.property()],h.prototype,"region",void 0),a([b.property()],h.prototype,"role",void 0),a([b.property()],h.prototype,"roleId",void 0),a([b.property()],h.prototype,"thumbnail",void 0),a([b.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],h.prototype,"thumbnailUrl",null),a([b.property()],h.prototype,"units",void 0),a([b.property({dependsOn:["portal.restUrl"],readOnly:!0})],h.prototype,"userContentUrl",null),a([b.property({dependsOn:["portal.restUrl"],
readOnly:!0})],h.prototype,"url",null),a([b.property()],h.prototype,"username",void 0),a([b.property()],h.prototype,"userType",void 0),h=a([b.subclass("esri.portal.PortalUser")],h)})},"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Error ../core/JSONSupport".split(" "),function(e,h,d,a,b,c,m){e=function(a){function b(b){b=a.call(this)||this;return b.created=null,b.id=null,
b.portal=null,b.title=null,b.username=null,b}return d(b,a),Object.defineProperty(b.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username+"/"+this.id:null},enumerable:!0,configurable:!0}),b.prototype.toJSON=function(){throw new c("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");},b}(b.declared(m));return a([b.property({type:Date})],e.prototype,"created",void 0),a([b.property()],e.prototype,"id",void 0),a([b.property()],
e.prototype,"portal",void 0),a([b.property()],e.prototype,"title",void 0),a([b.property({dependsOn:["portal.restUrl"],readOnly:!0})],e.prototype,"url",null),a([b.property()],e.prototype,"username",void 0),e=a([b.subclass("esri.portal.PortalFolder")],e)})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/accessorSupport/decorators ../core/Error ../core/JSONSupport ./PortalQueryParams".split(" "),
function(e,h,d,a,b,c,m,k,l){e=function(a){function b(b){b=a.call(this)||this;return b.access=null,b.created=null,b.description=null,b.id=null,b.isInvitationOnly=!1,b.modified=null,b.owner=null,b.portal=null,b.snippet=null,b.sortField=null,b.sortOrder=null,b.tags=null,b.title=null,b}return d(b,a),Object.defineProperty(b.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,
"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0}),b.prototype.fetchMembers=function(){return this.portal._request(this.url+"/users")},b.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;return b&&a&&(b+="\x26w\x3d"+a),b},b.prototype.toJSON=function(){throw new m("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");},b.prototype.queryItems=function(a){return a=a?a.clone():new l,a.query=
"group:"+this.id+(a.query?" "+a.query:""),this.portal.queryItems(a)},b}(c.declared(k));return a([c.property()],e.prototype,"access",void 0),a([c.property({type:Date})],e.prototype,"created",void 0),a([c.property()],e.prototype,"description",void 0),a([c.property()],e.prototype,"id",void 0),a([c.property()],e.prototype,"isInvitationOnly",void 0),a([c.property({type:Date})],e.prototype,"modified",void 0),a([c.property()],e.prototype,"owner",void 0),a([c.property()],e.prototype,"portal",void 0),a([c.property()],
e.prototype,"snippet",void 0),a([c.property()],e.prototype,"sortField",void 0),a([c.property()],e.prototype,"sortOrder",void 0),a([c.property()],e.prototype,"tags",void 0),a([c.property()],e.prototype,"thumbnail",void 0),a([c.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],e.prototype,"thumbnailUrl",null),a([c.property()],e.prototype,"title",void 0),a([c.property({dependsOn:["portal.restUrl"],readOnly:!0})],e.prototype,"url",null),a([b(0,c.cast(l))],e.prototype,"queryItems",
null),e=a([c.subclass("esri.portal.PortalGroup")],e)})},"esri/portal/PortalItem":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Error ../core/lang ../geometry/Extent ../core/JSONSupport ../core/Loadable ./Portal ./PortalRating ../core/promiseUtils".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u,r){h=t=function(a){function b(b){b=a.call(this)||this;return b.access=null,b.accessInformation=null,b.appProxies=
null,b.avgRating=null,b.created=null,b.culture=null,b.description=null,b.extent=null,b.id=null,b.itemControl=null,b.licenseInfo=null,b.modified=null,b.name=null,b.numComments=null,b.numRatings=null,b.numViews=null,b.owner=null,b.portal=null,b.size=null,b.snippet=null,b.tags=null,b.title=null,b.type=null,b.typeKeywords=null,b.url=null,b}return d(b,a),Object.defineProperty(b.prototype,"displayName",{get:function(){var a=this.type,b=this.typeKeywords||[],f=a;return"Feature Service"===a||"Feature Collection"===
a?f=-1<b.indexOf("Table")?"Table":-1<b.indexOf("Route Layer")?"Route Layer":-1<b.indexOf("Markup")?"Markup":"Feature Layer":"Image Service"===a?f=-1<b.indexOf("Elevation 3D Layer")?"Elevation Layer":"Imagery Layer":"Scene Service"===a?f="Scene Layer":"Scene Package"===a?f="Scene Layer Package":"Stream Service"===a?f="Feature Layer":"Geoprocessing Service"===a&&this.portal&&this.portal.isPortal?f=-1<b.indexOf("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===a?f="Locator":"Microsoft Powerpoint"===
a?f="Microsoft PowerPoint":"GeoJson"===a?f="GeoJSON":"Globe Service"===a?f="Globe Layer":"Vector Tile Service"===a?f="Tile Layer":"Map Service"===a?f=-1===b.indexOf("Spatiotemporal")&&(-1<b.indexOf("Hosted Service")||-1<b.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":a&&-1<a.toLowerCase().indexOf("add in")?f=a.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===a&&(f="Big Data File Share"),f},enumerable:!0,configurable:!0}),b.prototype.readExtent=function(a){return a&&a.length?new k(a[0][0],
a[0][1],a[1][0],a[1][1]):null},Object.defineProperty(b.prototype,"iconUrl",{get:function(){var a,b=this.type&&this.type.toLowerCase()||"",f=this.typeKeywords||[],c=!1,d=!1,g=!1,k=!1;return 0<b.indexOf("service")||"feature collection"===b||"kml"===b||"wms"===b||"wmts"===b||"wfs"===b?(c=-1<f.indexOf("Hosted Service"),"feature service"===b||"feature collection"===b||"kml"===b||"wfs"===b?(d=-1<f.indexOf("Table"),g=-1<f.indexOf("Route Layer"),k=-1<f.indexOf("Markup"),a=d?"table":g?"routelayer":k?"markup":
c?"featureshosted":"features"):a="map service"===b||"wms"===b||"wmts"===b?c||-1<f.indexOf("Tiled")||"wmts"===b?"maptiles":"mapimages":"scene service"===b?-1<f.indexOf("Line")?"sceneweblayerline":-1<f.indexOf("3DObject")?"sceneweblayermultipatch":-1<f.indexOf("Point")?"sceneweblayerpoint":-1<f.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<f.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<f.indexOf("Polygon")?"sceneweblayerpolygon":"sceneweblayer":"image service"===b?-1<f.indexOf("Elevation 3D Layer")?
"elevationlayer":"imagery":"stream service"===b?"streamlayer":"vector tile service"===b?"vectortile":"datastore catalog service"===b?"datastorecollection":"geocoding service"===b?"geocodeservice":"layers"):a="web map"===b||"cityengine web scene"===b?"maps":"web scene"===b?-1<f.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===b||"mobile application"===b||"application"===b||"operation view"===b||"desktop application"===b?"apps":"map document"===b||"map package"===
b||"published map"===b||"scene document"===b||"globe document"===b||"basemap package"===b||"mobile basemap package"===b||"mobile map package"===b||"project package"===b||"project template"===b||"pro map"===b||"layout"===b||"layer"===b&&-1<f.indexOf("ArcGIS Pro")||"explorer map"===b&&f.indexOf("Explorer Document")?"mapsgray":"service definition"===b||"csv"===b||"shapefile"===b||"cad drawing"===b||"geojson"===b||"360 vr experience"===b?"datafiles":"explorer add in"===b||"desktop add in"===b||"windows viewer add in"===
b||"windows viewer configuration"===b?"appsgray":"arcgis pro add in"===b||"arcgis pro configuration"===b?"addindesktop":"rule package"===b||"file geodatabase"===b||"csv collection"===b||"kml collection"===b||"windows mobile package"===b||"map template"===b||"desktop application template"===b||"arcpad package"===b||"code sample"===b||"form"===b||"document link"===b||"vector tile package"===b||"operations dashboard add in"===b||"rules package"===b||"image"===b||"workflow manager package"===b||"desktop style"===
b||"explorer map"===b&&-1<f.indexOf("Explorer Mapping Application")||-1<f.indexOf("Document")?"datafilesgray":"network analysis service"===b||"geoprocessing service"===b||"geodata service"===b||"geometry service"===b||"geoprocessing package"===b||"locator package"===b||"geoprocessing sample"===b||"workflow manager service"===b||"raster function template"===b?"toolsgray":"layer"===b||"layer package"===b||"explorer layer"===b?"layersgray":"scene package"===b?"scenepackage":"tile package"===b?"tilepackage":
"task file"===b?"taskfile":"report template"===b?"report-template":"statistical data collection"===b?"statisticaldatacollection":"insights workbook"===b?"workbook":"insights model"===b?"insightsmodel":"insights page"===b?"insightspage":"hub initiative"===b?"hubinitiative":"hubpage"===b?"hubpage":"hub site application"===b?"hubsite":"relational database connection"===b?"relationaldatabaseconnection":"big data file share"===b?"datastorecollection":"image collection"===b?"imagecollection":"style"===
b?"style":"dashboard"===b?"dashboard":"maps",a?e.toUrl("../images/portal/"+a+"16.png"):null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isLayer",{get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;WMTS;WMS".split(";").indexOf(this.type)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"itemUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/items/"+this.id:
null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"thumbnailUrl",{get:function(){var a=this.itemUrl,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"userItemUrl",{get:function(){var a=this.get("portal.restUrl");if(!a)return null;var b=this.owner||this.get("portal.user.username");return b?a+"/content/users/"+(this.ownerFolder?b+"/"+this.ownerFolder:b)+"/items/"+this.id:null},
enumerable:!0,configurable:!0}),b.prototype.load=function(){var a=this;this.portal||(this.portal=n.getDefault());var b=this.portal.load().then(function(){return a.resourceInfo?a.resourceInfo:a.id&&a.itemUrl?a.portal._request(a.itemUrl):{}}).then(function(b){a.resourceInfo=b;a.read(b)});return this.addResolvingPromise(b),this},b.prototype.addRating=function(a){var b={method:"post",query:{}};return a instanceof u&&(a=a.rating),isNaN(a)||"number"!=typeof a||(b.query.rating=a),this.portal._request(this.itemUrl+
"/addRating",b).then(function(){return new u({rating:a,created:new Date})})},b.prototype.deleteRating=function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(function(){})},b.prototype.fetchData=function(a){return void 0===a&&(a="json"),this.portal._request(this.itemUrl+"/data",{responseType:a})},b.prototype.fetchRating=function(){return this.portal._request(this.itemUrl+"/rating").then(function(a){return null!=a.rating?(a.created=new Date(a.created),new u(a)):null})},
b.prototype.fetchRelatedItems=function(a){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:a},"PortalItem")},b.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;return b&&a&&(b+="\x26w\x3d"+a),b},b.prototype.update=function(a){var b=this;return this.id?this.load().then(function(){return b.portal._signIn()}).then(function(){var f=a&&a.data,c={method:"post"};c.query=b._getPostQuery();for(var d in c.query)null===c.query[d]&&(c.query[d]="");return c.query.clearEmptyFields=
!0,null!=f&&("string"==typeof f?c.query.text=f:"object"==typeof f&&(c.query.text=JSON.stringify(f))),b.portal._request(b.userItemUrl+"/update",c).then(function(){return b._reload()})}):r.reject(new c("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))},b.prototype.toJSON=function(){var a=this.extent,a={created:this.created&&this.created.getTime(),description:this.description,extent:a&&[[a.xmin,a.ymin],[a.xmax,a.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),
name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return m.fixJson(a)},b.fromJSON=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");return new t({resourceInfo:a})},b.prototype._reload=function(){var a=this;return this.portal._request(this.itemUrl,{query:{_ts:(new Date).getTime()}}).then(function(b){return a.resourceInfo=
b,a.read(b),a})},b.prototype._getPostQuery=function(){var a=this.toJSON(),b;for(b in a)"tags"===b&&null!==a[b]&&(a[b]=a[b].join(", ")),"typeKeywords"===b&&null!==a[b]&&(a[b]=a[b].join(", "));return a},b}(b.declared(l,g));a([b.property()],h.prototype,"access",void 0);a([b.property()],h.prototype,"accessInformation",void 0);a([b.property()],h.prototype,"appProxies",void 0);a([b.property()],h.prototype,"avgRating",void 0);a([b.property({type:Date})],h.prototype,"created",void 0);a([b.property()],h.prototype,
"culture",void 0);a([b.property()],h.prototype,"description",void 0);a([b.property({dependsOn:["type","typeKeywords"],readOnly:!0})],h.prototype,"displayName",null);a([b.property({type:k})],h.prototype,"extent",void 0);a([b.reader("extent")],h.prototype,"readExtent",null);a([b.property({dependsOn:["type","typeKeywords"],readOnly:!0})],h.prototype,"iconUrl",null);a([b.property()],h.prototype,"id",void 0);a([b.property({dependsOn:["type"],readOnly:!0})],h.prototype,"isLayer",null);a([b.property()],
h.prototype,"itemControl",void 0);a([b.property({dependsOn:["portal.restUrl","id"],readOnly:!0})],h.prototype,"itemUrl",null);a([b.property()],h.prototype,"licenseInfo",void 0);a([b.property({type:Date})],h.prototype,"modified",void 0);a([b.property()],h.prototype,"name",void 0);a([b.property()],h.prototype,"numComments",void 0);a([b.property()],h.prototype,"numRatings",void 0);a([b.property()],h.prototype,"numViews",void 0);a([b.property()],h.prototype,"owner",void 0);a([b.property()],h.prototype,
"ownerFolder",void 0);a([b.property({type:n})],h.prototype,"portal",void 0);a([b.property()],h.prototype,"resourceInfo",void 0);a([b.property()],h.prototype,"size",void 0);a([b.property()],h.prototype,"snippet",void 0);a([b.property()],h.prototype,"tags",void 0);a([b.property()],h.prototype,"thumbnail",void 0);a([b.property({dependsOn:["itemUrl","thumbnail","portal.credential.token"],readOnly:!0})],h.prototype,"thumbnailUrl",null);a([b.property()],h.prototype,"title",void 0);a([b.property()],h.prototype,
"type",void 0);a([b.property()],h.prototype,"typeKeywords",void 0);a([b.property()],h.prototype,"url",void 0);a([b.property({dependsOn:["portal.restUrl","portal.user.username","owner","ownerFolder","id"],readOnly:!0})],h.prototype,"userItemUrl",null);h=t=a([b.subclass("esri.portal.PortalItem")],h);var t;return h})},"esri/portal/PortalRating":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor".split(" "),
function(e,h,d,a,b,c){e=function(a){function b(b){b=a.call(this)||this;return b.created=null,b.rating=null,b}return d(b,a),b}(b.declared(c));return a([b.property()],e.prototype,"created",void 0),a([b.property()],e.prototype,"rating",void 0),e=a([b.subclass("esri.portal.PortalRating")],e)})},"esri/support/groundUtils":function(){define("require exports ../core/accessorSupport/ensureType ../core/Logger ../Ground ../layers/ElevationLayer".split(" "),function(e,h,d,a,b,c){Object.defineProperty(h,"__esModule",
{value:!0});var m=a.getLogger("esri.support.groundUtils");h.groundElevationLayers={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"}};h.ensureType=function(a){var e;"string"==typeof a?a in h.groundElevationLayers?(a=h.groundElevationLayers[a],a=new c({id:a.id,url:a.url}),e=new b({layers:[a]})):m.warn("Unable to find ground definition for: "+a+'. Try "world-elevation"'):e=d["default"](b,a);return e}})},"esri/layers/ElevationLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators dojo/_base/lang ../request ../core/Error ../core/promiseUtils ../core/requireUtils ./TiledLayer ./mixins/ArcGISMapService ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./support/rasterFormats/LercCodec".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q){h=function(a){function b(b){b=a.call(this)||this;return b.type="elevation",b.url=null,b.opacity=1,b.operationalLayerType="ArcGISTiledElevationServiceLayer",b}return d(b,a),b.prototype.normalizeCtorArgs=function(a,b){return"string"==typeof a?c.mixin({},{url:a},b):a},b.prototype.load=function(){var a=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(a){for(var b=0;b<a.typeKeywords.length;b++)if("elevation 3d layer"===
a.typeKeywords[b].toLowerCase())return!0;throw new k("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"});}}).always(function(){return a._fetchImageService()})),this},b.prototype.fetchTile=function(a,b,c,d){var f=this;return void 0===d&&(d=0),this.load().then(function(){return f._fetchTileAvailability(a,b,c)}).then(function(){var d=f.getTileUrl(a,b,c);return m(d,{responseType:"array-buffer",
failOk:!0})}).then(function(a){a=q.decode(a.data,{noDataValue:d,returnFileInfo:!0});return{values:a.pixelData,width:a.width,height:a.height,maxZError:a.fileInfo.maxZError,noDataValue:a.noDataValue}})},b.prototype.queryElevation=function(a,b){var f=this;return g.when(e,"./support/ElevationQuery").then(function(c){return(new c.ElevationQuery).query(f,a,b)})},b.prototype._fetchTileAvailability=function(a,b,c){return this.tilemapCache?this.tilemapCache.fetchAvailability(a,b,c):l.resolve("unknown")},b.prototype._fetchImageService=
function(){var a=this;return l.resolve().then(function(){if(a.resourceInfo)return a.resourceInfo;var b={query:c.mixin({f:"json"},a.parsedUrl.query),responseType:"json",callbackParamName:"callback"};return m(a.parsedUrl.path,b)}).then(function(b){b.ssl&&(a.url=a.url.replace(/^http:/i,"https:"));a.read(b.data,{origin:"service",url:a.parsedUrl})})},b}(b.declared(n,u,r,t,w));return a([b.shared({"3d":"../views/3d/layers/ElevationLayerView3D"})],h.prototype,"viewModulePaths",void 0),a([b.property()],h.prototype,
"resourceInfo",void 0),a([b.property({json:{read:!1},value:"elevation",readOnly:!0})],h.prototype,"type",void 0),a([b.property()],h.prototype,"url",void 0),a([b.property({json:{read:!1,write:!1}})],h.prototype,"opacity",void 0),a([b.property()],h.prototype,"operationalLayerType",void 0),h=a([b.subclass("esri.layers.ElevationLayer")],h)})},"esri/layers/TiledLayer":function(){define(["../request","./Layer","./support/TileInfo"],function(e,h,d){return h.createSubclass({properties:{attributionDataUrl:null,
tileInfo:d},viewModulePaths:{"2d":"../views/2d/layers/TiledLayerView2D","3d":"../views/3d/layers/TiledLayerView3D"},getTileUrl:function(a,b,c){},fetchTile:function(a,b,c,d){a=this.getTileUrl(a,b,c);d={responseType:"image",allowImageDataAccess:d&&d.allowImageDataAccess||!1};return"string"==typeof a?e(a,d).then(function(a){return a.data}):a.then(function(a){return e(a,{responseType:"image"})}).then(function(a){return a.data})}})})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ../../geometry/SpatialReference ../../geometry/Point ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/scaleUtils ./LOD".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w){var q=m({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});e=v=function(a){function b(b){b=a.call(this)||this;return b.dpi=96,b.format=null,b.origin=null,b.minScale=0,b.maxScale=0,b.size=null,b.spatialReference=null,b}return d(b,a),b.create=function(a){void 0===a&&(a={size:256,spatialReference:g.WebMercator});var b=
a.scales,f=a.size||256;a=a.spatialReference||g.WebMercator;var c=u.getInfo(a),c=c?new n(c.origin[0],c.origin[1],a):new n(0,0,a),d=1/(39.37*t.getUnitValueForSR(a)*96),e=[];if(b)for(var p=0;p<b.length;p++){var k=b[p],l=k*d;e.push({level:p,scale:k,resolution:l})}else for(b=256/f*5.91657527591555E8,e.push({level:0,scale:b,resolution:b*d}),p=1;24>p;p++)k=b/2,l=k*d,e.push({level:p,scale:k,resolution:l}),b=k;return new v({dpi:96,lods:e,origin:c,size:f,spatialReference:a})},Object.defineProperty(b.prototype,
"lods",{set:function(a){var b=this,f=0,c=0,d=[];this._levelToLOD={};a&&(f=-(1/0),c=1/0,a.forEach(function(a){d.push(a.scale);f=a.scale>f?a.scale:f;c=a.scale<c?a.scale:c;b._levelToLOD[a.level]=a}));this._set("scales",d);this._set("minScale",f);this._set("maxScale",c);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0}),b.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var f=Math.round(a);return b[f]+(f-a)*
(b[Math.round(a-.5)]-b[f])},b.prototype.scaleToZoom=function(a){for(var b=this.scales,f=b.length-1,c=0;f>c;c++){var d=b[c],g=b[c+1];if(a>=d)break;if(g===a)return c+1;if(d>a&&a>g)return c+1-(a-g)/(d-g)}return c},b.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))},b.prototype.tileAt=function(a,b,f,c){var d=this.lodAt(a);if(!d)return null;c||(c={id:null,level:0,row:0,col:0,extent:[0,0,
0,0]});var g;if("number"==typeof b)g=b,b=f;else{if(b.spatialReference.equals(this.spatialReference))g=b.x,b=b.y;else{c=r.project(b,this.spatialReference);if(!c)return null;g=c.x;b=c.y}c=f}f=d.resolution*this.size[0];d=d.resolution*this.size[1];return c.level=a,c.row=Math.floor((this.origin.y-b)/d+.001),c.col=Math.floor((g-this.origin.x)/f+.001),this.updateTileInfo(c),c},b.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level),f=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+
"/"+a.row+"/"+a.col;a.extent||(a.extent=[0,0,0,0]);a.extent[0]=this.origin.x+a.col*f;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=a.extent[0]+f;a.extent[3]=a.extent[1]+b},b.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];return b&&-1!==b.parentLevel?(a.level=b.parentLevel,a.row=Math.floor(a.row/b.factor+.001),a.col=Math.floor(a.col/b.factor+.001),this.updateTileInfo(a),!0):!1},b.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null},b.prototype.clone=
function(){return v.fromJSON(this.toJSON())},b.prototype.toJSON=function(){return k.fixJson({rows:this.size[0],cols:this.size[1],dpi:this.dpi,format:q.toJSON(this.format),compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJSON(),spatialReference:this.spatialReference&&this.spatialReference.toJSON(),lods:this.lods&&this.lods.map(function(a){return a.toJSON()})})},b.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,f=0;f<
a.length;f++){var c=a[f];this._upsampleLevels[c.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/c.resolution:0};b=c}},b}(l.declared(c));a([l.property()],e.prototype,"compressionQuality",void 0);a([l.property()],e.prototype,"dpi",void 0);a([l.property({json:{read:q.fromJSON}})],e.prototype,"format",void 0);a([l.property({type:n,json:{read:function(a,f){return n.fromJSON(b.mixin({spatialReference:f.spatialReference},a))}}})],e.prototype,"origin",void 0);a([l.property({type:[w],value:null})],
e.prototype,"lods",null);a([l.property({readOnly:!0})],e.prototype,"minScale",void 0);a([l.property({readOnly:!0})],e.prototype,"maxScale",void 0);a([l.property({readOnly:!0})],e.prototype,"scales",void 0);a([l.property({cast:function(a){return Array.isArray(a)?a:"number"==typeof a?[a,a]:[256,256]},json:{read:{source:["rows","cols"],reader:function(a,b){return[b.cols,b.rows]}}}})],e.prototype,"size",void 0);a([l.property({type:g})],e.prototype,"spatialReference",void 0);e=v=a([l.subclass("esri.layers.support.TileInfo")],
e);var v;return e})},"esri/geometry/support/scaleUtils":function(){define(["../../config","../../core/lang","./WKIDUnitConversion","./WKIDUnitStrings"],function(e,h,d,a){var b=20015077/180,c={getVerticalUnitValueForSR:function(a){a=this.getUnitValueForSR(a);return 1E5<a?1:a},getVerticalUnitStringForSR:function(a){return 1E5<this.getUnitValueForSR(a)?"meter":(a=this.getUnitString(a))?a.toLowerCase().replace(/_/g,"-"):"meter"},getUnitValueForSR:function(a){return this.getUnitValue(a)||b},getUnitValue:function(a){var b,
c,g;(a&&("object"==typeof a?(b=a.wkid,c=a.wkt):"number"==typeof a?b=a:"string"==typeof a&&(c=a)),b)?g=d.values[d[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(c))&&a[1]&&(g=parseFloat(a[1].split(",")[1]));return g},getUnitString:function(b){var c,e;return"object"==typeof b?c=b.wkid:"number"==typeof b&&(c=b),c&&(e=a.strings[d[c]]),e},getScale:function(a,d,l){var g,k,m;return 1<arguments.length&&h.isDefined(d)&&!d.declaredClass?(g=a,k=d,d=null,m=c.getUnitValue(l)):(g=d||a.extent,
k=a.width,m=c.getUnitValue(g&&g.spatialReference)),g&&k?g.width/k*(m||b)*39.37*e.screenDPI:0},getResolutionForScale:function(a,b){b=c.getUnitValueForSR(b);return a/(39.37*b*e.screenDPI)},getExtentForScale:function(a,b){var d=a.extent;a=a.width;b=c.getResolutionForScale(b,d.spatialReference);return d.clone().expand(b*a/d.width)}};return c})},"esri/geometry/support/WKIDUnitStrings":function(){define([],function(){return{strings:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" ")}})},
"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport".split(" "),function(e,h,d,a,b,c){e=m=function(a){function b(b){b=a.call(this,b)||this;return b.level=0,b.levelValue=null,b.resolution=0,b.scale=0,b}return d(b,a),b.prototype.clone=function(){return new m({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})},b}(b.declared(c));
a([b.property({json:{write:!0}})],e.prototype,"level",void 0);a([b.property({json:{write:!0}})],e.prototype,"levelValue",void 0);a([b.property({json:{write:!0}})],e.prototype,"resolution",void 0);a([b.property({json:{write:!0}})],e.prototype,"scale",void 0);e=m=a([b.subclass("esri.layers.support.LOD")],e);var m;return e})},"esri/layers/mixins/ArcGISMapService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ArcGISService ./ScaleRangeLayer ../../geometry/Extent ../../geometry/SpatialReference".split(" "),
function(e,h,d,a,b,c,m,k,l){e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.copyright=null,b.fullExtent=null,b.spatialReference=null,b.version=null,b}return d(b,a),b.prototype.readCapabilities=function(a,b){return a&&a.split(",").map(function(a){return a.trim()})},b.prototype.readCopyright=function(a,b){return b.copyrightText},b.prototype.readLegendEnabled=function(a,b){return b.showLegend},b.prototype.writeLegendEnabled=function(a,b){b.showLegend=!!a},b.prototype.readPopupEnabled=
function(a,b){return!b.disablePopup},b.prototype.readVersion=function(a,b){a=b.currentVersion;return a||(a=b.hasOwnProperty("capabilities")||b.hasOwnProperty("tables")?10:b.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),a},b}(b.declared(c,m));return a([b.property()],e.prototype,"capabilities",void 0),a([b.reader("service","capabilities")],e.prototype,"readCapabilities",null),a([b.property()],e.prototype,"copyright",void 0),a([b.reader("copyright",["copyrightText"])],e.prototype,"readCopyright",
null),a([b.property({type:k})],e.prototype,"fullExtent",void 0),a([b.property({json:{origins:{service:{read:!1},portalItem:{read:!1}}}})],e.prototype,"id",void 0),a([b.property()],e.prototype,"legendEnabled",void 0),a([b.reader("legendEnabled",["showLegend"])],e.prototype,"readLegendEnabled",null),a([b.writer("legendEnabled")],e.prototype,"writeLegendEnabled",null),a([b.reader("popupEnabled",["disablePopup"])],e.prototype,"readPopupEnabled",null),a([b.property({type:l})],e.prototype,"spatialReference",
void 0),a([b.property()],e.prototype,"version",void 0),a([b.reader("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],e.prototype,"readVersion",null),e=a([b.subclass("esri.layers.mixins.ArcGISMapService")],e)})},"esri/layers/mixins/ArcGISService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/MultiOriginJSONSupport ../support/arcgisLayerUrl".split(" "),
function(e,h,d,a,b,c,m){e=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),Object.defineProperty(b.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var a=m.parse(this.url);if(a&&a.title)return a.title}return this._get("title")||""},set:function(a){this._set("title",a)},enumerable:!0,configurable:!0}),b}(b.declared(c));return a([b.property({dependsOn:["url"]})],e.prototype,"title",
null),a([b.property()],e.prototype,"url",void 0),e=a([b.subclass("esri.layers.mixins.ArcGISService")],e)})},"esri/core/MultiOriginJSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./accessorSupport/decorators ./Accessor ./accessorSupport/read ./accessorSupport/write ./accessorSupport/utils ./accessorSupport/MultiOriginStore ./accessorSupport/PropertyOrigin".split(" "),function(e,h,d,a,b,c,m,k,l,g,n){e=function(a){function b(){var b=a.call(this)||
this,c=l.getProperties(b),d=c.metadatas,e=c.store,k=new g["default"];return c.store=k,e.keys().forEach(function(a){k.set(a,e.get(a),n.OriginId.DEFAULTS)}),Object.keys(d).forEach(function(a){c.internalGet(a)&&k.set(a,c.internalGet(a),n.OriginId.DEFAULTS)}),b}return d(b,a),b.prototype.clear=function(a,b){return void 0===b&&(b="user"),l.getProperties(this).store.clear(a,n.nameToId(b))},b.prototype.read=function(a,b){return m["default"](this,a,b),this},b.prototype.write=function(a,b){return a=a||{},k["default"](this,
a,b),a},b.prototype.getAtOrigin=function(a,b){var c=l.getProperties(this).store,d=n.nameToId(b);if("string"==typeof a)return c.get(a,d);var e={};return a.forEach(function(a){e[a]=c.get(a,d)}),e},b.prototype.originOf=function(a){var b=l.getProperties(this).store;if("string"==typeof a)return n.idToName(b.originOf(a));a.forEach(function(a){n.idToName(b.originOf(a))})},b.prototype.revert=function(a,b){var c=l.getProperties(this).store,d=n.nameToId(b),e=l.getProperties(this);("string"==typeof a?"*"===
a?Object.keys(c.getAll(d)):[a]:a).forEach(function(a){e.propertyInvalidated(a);c.revert(a,d);e.propertyCommitted(a)})},b.prototype.removeOrigin=function(a){var b=l.getProperties(this).store;a=n.nameToId(a);var c=b.getAll(a),d;for(d in c)b.originOf(d)===a&&b.set(d,c[d],n.OriginId.USER)},b.prototype.updateOrigin=function(a,b){var c=l.getProperties(this).store;b=n.nameToId(b);var d=this.get(a);c.clear(a);c.set(a,d,b)},b}(b.declared(c));return e=a([b.subclass("esri.core.MultiOriginJSONSupport")],e)})},
"esri/core/accessorSupport/MultiOriginStore":function(){define(["require","exports","./PropertyOrigin"],function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});e=function(){function a(){this._propertyOriginMap={};this._originStores=Array(d.OriginId.NUM);this._values={}}return a.prototype.get=function(a,c){return(c=void 0===c?this._values:this._originStores[c])?c[a]:void 0},a.prototype.keys=function(){return Object.keys(this._values)},a.prototype.set=function(a,c,e){void 0===e&&(e=d.OriginId.USER);
var b=this._originStores[e];return(b||(b={},this._originStores[e]=b),b[a]=c,!(a in this._values)||this._propertyOriginMap[a]<=e)?(b=this._values[a],this._values[a]=c,this._propertyOriginMap[a]=e,b!==c):!1},a.prototype.clear=function(a,c){void 0===c&&(c=d.OriginId.USER);var b=this._originStores[c];if(b){var e=b[a];if(delete b[a],a in this._values&&this._propertyOriginMap[a]===c)for(delete this._values[a],--c;0<=c;c--)if((b=this._originStores[c])&&a in b){this._values[a]=b[a];this._propertyOriginMap[a]=
c;break}return e}},a.prototype.has=function(a,c){return(c=void 0===c?this._values:this._originStores[c])?a in c:!1},a.prototype.revert=function(a,c){for(;0<c&&!this.has(a,c);)--c;var b=this._originStores[c],b=b&&b[a],d=this._values[a];return this._values[a]=b,this._propertyOriginMap[a]=c,d!==b},a.prototype.originOf=function(a,c){return this._propertyOriginMap[a]||d.OriginId.DEFAULTS},a.prototype.getAll=function(a){return this._originStores[a]},a}();h["default"]=e})},"esri/layers/support/arcgisLayerUrl":function(){define(["require",
"exports","../../core/urlUtils"],function(e,h,d){function a(a){var c=d.urlToObject(a).path.match(h.match);if(!c)return null;a=c[1];var e=c[2],l=c[3],c=c[4],g=e.indexOf("/");return{title:b(-1!==g?e.slice(g+1):e),serverType:l,sublayer:null!=c&&""!==c?parseInt(c,10):null,url:{path:a}}}function b(a){return a=a.replace(/\s*[\/_]+\s*/g," "),a[0].toUpperCase()+a.slice(1)}Object.defineProperty(h,"__esModule",{value:!0});h.serverTypes="MapServer ImageServer FeatureServer SceneServer StreamServer VectorTileServer".split(" ");
h.match=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/("+h.serverTypes.join("|")+"))(?:\\/(?:layers\\/)?(\\d+))?","i");h.test=function(a){return!!h.match.test(a)};h.parse=a;h.cleanTitle=b;h.titleFromUrlAndName=function(c,d){var e=[];c&&(c=a(c))&&c.title&&e.push(c.title);d&&(d=b(d),e.push(d));if(2===e.length){if(-1!==e[0].toLowerCase().indexOf(e[1].toLowerCase()))return e[0];if(-1!==e[1].toLowerCase().indexOf(e[0].toLowerCase()))return e[1]}return e.join(" - ")};h.isHostedAgolService=
function(a){if(!a)return!1;a=a.toLowerCase();var b=-1!==a.indexOf(".arcgis.com/");a=-1!==a.indexOf("//services")||-1!==a.indexOf("//tiles")||-1!==a.indexOf("//features");return b&&a};h.isHostedSecuredProxyService=function(a,b){return b&&a&&-1!==a.toLowerCase().indexOf(b.toLowerCase())}})},"esri/layers/mixins/ScaleRangeLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/accessorSupport/write".split(" "),
function(e,h,d,a,b,c,m){e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.minScale=0,b.maxScale=0,b}return d(b,a),b}(b.declared(c));return a([b.property({json:{write:{overridePolicy:function(a,b,c){return m.willPropertyWrite(this,"maxScale",{},c)?{ignoreOrigin:!0}:void 0}}}})],e.prototype,"minScale",void 0),a([b.property({json:{write:{overridePolicy:function(a,b,c){return m.willPropertyWrite(this,"minScale",{},c)?{ignoreOrigin:!0}:void 0}}}})],e.prototype,"maxScale",
void 0),e=a([b.subclass("esri.layers.mixins.ScaleRangeLayer")],e)})},"esri/layers/mixins/ArcGISCachedService":function(){define("dojo/_base/lang dojo/io-query ./ArcGISService ./ScaleRangeLayer ../support/TileInfo ../support/TilemapCache".split(" "),function(e,h,d,a,b,c){return d.createSubclass([a],{declaredClass:"esri.layers.mixins.ArcGISCachedService",properties:{minScale:{json:{origins:{service:{read:!1}}}},maxScale:{json:{origins:{service:{read:!1}}}},resampling:!0,supportsBlankTile:{value:!1,
readOnly:!0,dependsOn:["version"],get:function(){return 10.2<=this.version}},tileInfo:{value:null,type:b,json:{read:function(a,c){var d=c.minScale?c.minScale:+(1/0),e=c.maxScale?c.maxScale:-(1/0);return a?(a.lods=a.lods.filter(function(a){return a.scale<=d&&a.scale>=e}),b.fromJSON(a)):null}}},tilemapCache:{value:null,json:{read:{source:["capabilities"],reader:function(a,b){return b.capabilities&&-1<b.capabilities.indexOf("Tilemap")?new c({layer:this}):null}}}},refreshTimestamp:null,version:{}},refresh:function(){this.refreshTimestamp=
Date.now();this.inherited(arguments)},getTileUrl:function(a,b,c){var d=e.mixin({},this.parsedUrl.query,{token:this.token,blankTile:!this.tilemapCache&&this.resampling&&this.supportsBlankTile?!1:null,_ts:this.refreshTimestamp});a=this.parsedUrl.path+"/tile/"+a+"/"+b+"/"+c;return d=h.objectToQuery(d),a+=d?"?"+d:""}})})},"esri/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang dojo/io-query ../../request ../../core/Accessor ../../core/LRUMap ../../core/promiseUtils ../../core/watchUtils ../../core/Error ../../core/HandleRegistry ../../core/Logger ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q){var v=t.getLogger("esri.layers.support.TilemapCache");e=function(a){function f(){var b=null!==a&&a.apply(this,arguments)||this;return b._handles=new r,b._pendingTilemapRequests={},b._availableLevels={},b.levels=5,b.cacheByteSize=2097152,b.request=m,b}return d(f,a),f.prototype.normalizeCtorArgs=function(a){var f=this;return a=b.mixin({},a),this._constructOnly={},["cacheByteSize","layer","levels","request"].forEach(function(b){b in a&&("levels"===b&&2>=a[b]?
v.error("Minimum levels for Tilemap is 3, but got ",a[b]):f._constructOnly[b]=a[b],delete a[b])}),a},f.prototype.initialize=function(){var a=this,b;for(b in this._constructOnly)this._set(b,this._constructOnly[b]);this._constructOnly=null;this._tilemapCache=new l(this.cacheByteSize,{sizeOfFunction:function(a){return a.byteSize}});this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers"],function(){return a._initializeTilemapDefinition()}),n.init(this,"layer.tileInfo.lods",function(b){return a._initializeAvailableLevels(b)},
!0)]);this._initializeTilemapDefinition()},f.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)},Object.defineProperty(f.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0}),f.prototype.getTilemap=function(a,b,f){return this._tilemapFromCache(a,b,f,this._tmpTilemapDefinition)},f.prototype.fetchTilemap=function(a,b,f,c){var d=this;if(!this._availableLevels[a])return g.reject(new u("tilemap-cache:level-unavailable","Level "+a+
" is unavailable in the service"));var e=this._tmpTilemapDefinition;if(a=this._tilemapFromCache(a,b,f,e))return g.resolve(a);var p=q.tilemapDefinitionId(e);a=this._pendingTilemapRequests[p];return a||(a=q.Tilemap.fromDefinition(e,c).then(function(a){return d._tilemapCache.set(p,a),delete d._pendingTilemapRequests[p],a}).otherwise(function(a){return delete d._pendingTilemapRequests[p],g.reject(a)}),this._pendingTilemapRequests[p]=a),a},f.prototype.getAvailability=function(a,b,f){return this._availableLevels[a]?
(a=this.getTilemap(a,b,f))?a.getAvailability(b,f):"unknown":"unavailable"},f.prototype.getAvailabilityUpsample=function(a,b,f,c){c.level=a;c.row=b;c.col=f;a=this.layer.tileInfo;for(a.updateTileInfo(c);;){b=this.getAvailability(c.level,c.row,c.col);if("unavailable"!==b)return b;if(!a.upsampleTile(c))return"unavailable"}},f.prototype.fetchAvailability=function(a,b,f,c){return this._availableLevels[a]?this.fetchTilemap(a,b,f,c).always(function(c){return c instanceof q.Tilemap?(c=c.getAvailability(b,
f),"unavailable"===c?g.reject(new u("tile-map:tile-unavailable","Tile is not available",{level:a,row:b,col:f})):c):"unknown"}):g.reject(new u("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"))},f.prototype.fetchAvailabilityUpsample=function(a,b,f,c,d){var e=this;c.level=a;c.row=b;c.col=f;var p=this.layer.tileInfo;return p.updateTileInfo(c),this.fetchAvailability(a,b,f,d).otherwise(function(a){return p.upsampleTile(c)?e.fetchAvailabilityUpsample(c.level,c.row,c.col,c):
g.reject(a)})},f.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var a=this.layer.parsedUrl,f=a.query;f&&f.token||!this.layer.token||(f=b.mixin(f,{token:this.layer.token}));this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:a.path,query:f?c.objectToQuery(f):null,tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}},f.prototype._tilemapFromCache=function(a,b,f,c){a=this._getTilemapDefinition(a,b,
f,c);a=q.tilemapDefinitionId(a);return this._tilemapCache.get(a)},f.prototype._getTilemapDefinition=function(a,b,f,c){return c.level=a,c.row=b-b%this.size,c.col=f-f%this.size,c},f.prototype._initializeAvailableLevels=function(a){var b=this;this._availableLevels={};a&&a.forEach(function(a){return b._availableLevels[a.level]=!0})},f}(w.declared(k));return a([w.property({readOnly:!0})],e.prototype,"levels",void 0),a([w.property({readOnly:!0,dependsOn:["levels"]})],e.prototype,"size",null),a([w.property({readOnly:!0})],
e.prototype,"cacheByteSize",void 0),a([w.property({readOnly:!0})],e.prototype,"layer",void 0),a([w.property({readOnly:!0})],e.prototype,"request",void 0),e=a([w.subclass("esri.layers.support.TilemapCache")],e)})},"esri/core/LRUMap":function(){define(["require","exports"],function(e,h){return function(){function d(a,b){if(void 0===a&&(a=0),this.sizeOfFunction=function(){return 1},this._sizeOf=0,this._cache=new Map,this._queue=[],0>=a)throw Error("LRU cache size must be bigger than zero!");this._maxSize=
a;b&&(b.disposeFunction&&(this.disposeFunction=b.disposeFunction),b.sizeOfFunction&&(this.sizeOfFunction=b.sizeOfFunction))}return Object.defineProperty(d.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"size",{get:function(){return this._sizeOf},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"keys",{get:function(){return this._queue.slice()},enumerable:!0,configurable:!0}),d.prototype.clear=function(){var a=
this;this._queue.length=0;this.disposeFunction&&this._cache.forEach(function(b,c){a.disposeFunction(c,b)});this._cache.clear();this._sizeOf=0},d.prototype["delete"]=function(a){var b=this._cache.get(a);return this._cache["delete"](a)?(this._sizeOf-=this.sizeOfFunction(b),this.disposeFunction&&this.disposeFunction(a,b),this._queue.splice(this._queue.indexOf(a),1),!0):!1},d.prototype.forEach=function(a,b){this._cache.forEach(a,b)},d.prototype.get=function(a){var b=this._cache.get(a);if(void 0!==b)return this._queue.splice(this._queue.indexOf(a),
1),this._queue.unshift(a),b},d.prototype.has=function(a){return this._cache.has(a)},d.prototype.set=function(a,b){var c=this.get(a);return void 0!==c?this._sizeOf-=this.sizeOfFunction(c):this._queue.unshift(a),this._sizeOf+=this.sizeOfFunction(b),this._cache.set(a,b),this._collect(),this},d.prototype._collect=function(){for(;this._queue.length&&this._sizeOf>this._maxSize;){var a=this._queue.pop(),b=this._cache.get(a);this._cache["delete"](a)&&(this._sizeOf-=this.sizeOfFunction(b),this.disposeFunction&&
this.disposeFunction(a,b))}},d}()})},"esri/core/watchUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(e,h,d,a){function b(a,b,c,d,e){e=a.watch(b,function(b,f,e,g){d&&!d(b)||c.call(a,b,f,e,g)},e);var f=a.get(b);return d&&d(f)&&c.call(a,f,f,b,a),e}function c(c,e,g,k,l){function f(){p&&(p.remove(),p=null)}var p,m=!1,n=new d(f),v=new a;return v.cancel=n.cancel,v.isCanceled=n.isCanceled,v.isFulfilled=n.isFulfilled,v.isRejected=n.isRejected,v.isResolved=n.isResolved,
v.then=n.then,v.remove=f,Object.freeze(v),p=b(c,e,function(a,b,d,e){m=!0;f();g&&g.call(c,a,b,d,e);n.resolve({value:a,oldValue:b,propertyName:d,target:e})},k,l),m&&p.remove(),v}function m(a){return!!a}function k(a){return!a}function l(a){return!0===a}function g(a){return!1===a}function n(a){return void 0!==a}function u(a){return void 0===a}function r(a,b,c,d){return(Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b]).forEach(function(b){b=b.trim();var f=a.get(b);c.call(a,f,f,b,a)}),a.watch(b,c,
d)}Object.defineProperty(h,"__esModule",{value:!0});h.init=r;h.watch=function(a,b,c,d){return a.watch(b,c,d)};h.once=function(a,b,d,e){return c(a,b,d,null,e)};h.when=function(a,c,d,e){return b(a,c,d,m,e)};h.whenOnce=function(a,b,d,e){return c(a,b,d,m,e)};h.whenNot=function(a,c,d,e){return b(a,c,d,k,e)};h.whenNotOnce=function(a,b,d,e){return c(a,b,d,k,e)};h.whenTrue=function(a,c,d,e){return b(a,c,d,l,e)};h.whenTrueOnce=function(a,b,d,e){return c(a,b,d,l,e)};h.whenFalse=function(a,c,d,e){return b(a,
c,d,g,e)};h.whenFalseOnce=function(a,b,d,e){return c(a,b,d,g,e)};h.whenDefined=function(a,c,d,e){return b(a,c,d,n,e)};h.whenDefinedOnce=function(a,b,d,e){return c(a,b,d,n,e)};h.whenUndefined=function(a,c,d,e){return b(a,c,d,u,e)};h.whenUndefinedOnce=function(a,b,d,e){return c(a,b,d,u,e)};h.pausable=function(a,b,c,d){var e=!1;return{remove:a.watch(b,function(b,d,g,k){e||c.call(a,b,d,g,k)},d).remove,pause:function(){e=!0},resume:function(){e=!1}}};h.on=function(a,b,c,d,e,f,g){function p(){l&&(f&&f(k,
b,a,c),l.remove(),l=null,k=null)}var k=null,l=null,m=r(a,b,function(f){p();f&&f.on&&(k=f,l=f.on(c,d),e&&e(k,b,a,c))},g);return{remove:function(){m.remove();p()}}}})},"esri/layers/support/Tilemap":function(){define("require exports dojo/_base/lang ../../request ../../core/lang ../../core/Error".split(" "),function(e,h,d,a,b,c){function m(a){var b=a.service.tileServers,b=(b&&b.length?b[a.row%b.length]:a.service.url)+"/tilemap/"+a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height;a=a.service.query;
return a&&(b=b+"?"+a),b}Object.defineProperty(h,"__esModule",{value:!0});e=function(){function e(){this.location={left:0,top:0,width:0,height:0};this.byteSize=40}return e.prototype.getAvailability=function(a,b){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";a=(a-this.location.top)*this.location.width+(b-this.location.left);b=a>>3;var c=this._tileAvailabilityBitSet;return 0>b||b>c.length?"unknown":c[b]&1<<a%8?"available":"unavailable"},e.prototype._updateFromData=
function(a){for(var b=!0,c=!0,d=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),e=0,k=0;k<a.length;k++){var l=k%8;a[k]?(c=!1,d[e]|=1<<l):b=!1;7===l&&++e}this._isAllUnvailable=c;(this._isAllAvailable=b)||this._isAllUnvailable||(this._tileAvailabilityBitSet=d,this.byteSize+=d.length)},e.fromDefinition=function(b,g){var k=b.service.request||a,l=b.row,h=b.col,t=b.width,w=b.height,q={failOk:!0,callbackParamName:"callback"};return g=g?d.mixin(q,g):q,k(m(b),g).then(function(a){var b=
a.data;if(b.location&&(b.location.top!==l||b.location.left!==h||b.location.width!==t||b.location.height!==w))throw new c("tilemap:location-mismatch","Tilemap response for different location than requested",{response:b,definition:{top:l,left:h,width:t,height:w}});return e.fromJSON(a.data)})},e.fromJSON=function(a){e.validateJSON(a);var c=new e;return c.location=Object.freeze(b.clone(a.location)),c._updateFromData(a.data),Object.freeze(c)},e.validateJSON=function(a){if(!a||!a.location)throw new c("tilemap:missing-location",
"Location missing from tilemap response");if(!a.valid)throw new c("tilemap:invalid","Tilemap response was marked as invalid");if(!a.data)throw new c("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(a.data))throw new c("tilemap:data-mismatch","Data must be an array of numbers");if(a.data.length!==a.location.width*a.location.height)throw new c("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");},e}();h.Tilemap=e;h.tilemapDefinitionId=
function(a){return a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height};h.tilemapDefinitionUrl=m;h["default"]=e})},"esri/layers/mixins/OperationalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/MultiOriginJSONSupport ../../core/Error ../../core/urlUtils ../../core/accessorSupport/read".split(" "),function(e,h,d,a,b,c,m,k,l,g){e=function(a){function b(){var b=
null!==a&&a.apply(this,arguments)||this;return b.title="Layer",b}return d(b,a),b.prototype.writeListMode=function(a,b){a&&(b.listMode=a)},b.prototype.writeTitle=function(a,b){b.title=a||"Layer"},b.prototype.writeUrl=function(a,b){a&&l.isProtocolRelative(a)&&(a="https:"+a);b.url=a?l.normalize(a):a},b.prototype.writeOperationalLayerType=function(a,b){a&&(b.layerType=a)},b.prototype.readOpacity=function(a,b,c){return void 0===b.opacity||c&&"web-map"!==c.origin&&"web-scene"!==c.origin?c&&"service"!==
c.origin||!b.drawingInfo||void 0===b.drawingInfo.transparency?b.layerDefinition&&b.layerDefinition.drawingInfo&&void 0!==b.layerDefinition.drawingInfo.transparency?1-b.layerDefinition.drawingInfo.transparency/100:void 0:1-b.drawingInfo.transparency/100:b.opacity},b.prototype.readVisible=function(a,b){return!!b.visibility},b.prototype.read=function(a,b){var c=this,d=arguments;return b&&(b.layer=this),g.readLoadable(this,a,function(b){return c.inherited(d,[a,b])},b),this},b.prototype.write=function(a,
b){if(b&&b.origin){var c=b.origin+"/"+(b.layerContainerType||"operational-layers"),d=u[c];if(d&&!d[this.operationalLayerType])return b.messages&&b.messages.push(new k("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+c+"'",{layer:this})),null;if(!this.url&&!n[this.operationalLayerType])return b.messages&&b.messages.push(new k("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to a '"+
b.origin+"'",{layer:this})),null}return this.inherited(arguments,[a,b])},b}(b.declared(c,m));a([b.property({json:{write:{ignoreOrigin:!0}}})],e.prototype,"id",void 0);a([b.property()],e.prototype,"listMode",void 0);a([b.writer("listMode")],e.prototype,"writeListMode",null);a([b.property({json:{write:{ignoreOrigin:!0,allowNull:!0}}})],e.prototype,"title",void 0);a([b.writer("title")],e.prototype,"writeTitle",null);a([b.property({json:{write:{ignoreOrigin:!0}}})],e.prototype,"url",void 0);a([b.writer("url")],
e.prototype,"writeUrl",null);a([b.property({json:{write:{target:"layerType",ignoreOrigin:!0}}})],e.prototype,"operationalLayerType",void 0);a([b.writer("operationalLayerType")],e.prototype,"writeOperationalLayerType",null);a([b.property({json:{write:{ignoreOrigin:!0}}})],e.prototype,"opacity",void 0);a([b.reader("opacity",["opacity","layerDefinition.drawingInfo.transparency","drawingInfo.transparency"])],e.prototype,"readOpacity",null);a([b.property({json:{write:{target:"visibility",ignoreOrigin:!0}}})],
e.prototype,"visible",void 0);a([b.reader("visible",["visibility"])],e.prototype,"readVisible",null);e=a([b.subclass("esri.layers.mixins.OperationalLayer")],e);var n={GroupLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,ArcGISFeatureLayer:!0,CSV:!0,VectorTileLayer:!0},u={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,GroupLayer:!0,
IntegratedMeshLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,VectorTileLayer:!0},"web-scene/basemap":{ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0},"web-map/operational-layers":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,
ArcGSFeatureLayer:!0,CSV:!0,GeoRSS:!0,KML:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,bingLayer:!0}};return e})},"esri/layers/mixins/PortalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Error ../../core/Logger ../../core/requireUtils ../../core/promiseUtils ../../core/urlUtils ../../portal/PortalItem ../../portal/Portal".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r){var t=k.getLogger("esri.layers.Layer");h=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),Object.defineProperty(b.prototype,"portalItem",{set:function(a){a!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",a))},enumerable:!0,configurable:!0}),b.prototype.writePortalItem=function(a,b){a&&a.id&&(b.itemId=a.id)},b.prototype.loadFromPortal=function(a){var b=this;return this.portalItem&&this.portalItem.id?
l.when(e,"../../portal/support/layersLoader").then(function(f){return f.load({instance:b,supportedTypes:a.supportedTypes,validateItem:a.validateItem,supportsData:a.supportsData}).otherwise(function(a){throw t.warn("Failed to load layer ("+b.title+", "+b.id+") portal item ("+b.portalItem.id+")\n  "+a),a;})}):g.resolve()},b.prototype.read=function(a,b){return b&&(b.layer=this),this.inherited(arguments)},b.prototype.write=function(a,b){var f=b&&b.portal,c=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||
r.getDefault());return f&&c&&!n.hasSamePortal(c.restUrl,f.restUrl)?(b.messages&&b.messages.push(new m("layer:cross-portal","The layer '"+this.title+" ("+this.id+")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer",{layer:this})),null):this.inherited(arguments)},b}(b.declared(c));return a([b.property({type:u})],h.prototype,
"portalItem",null),a([b.writer("portalItem")],h.prototype,"writePortalItem",null),h=a([b.subclass("esri.layers.mixins.PortalLayer")],h)})},"esri/layers/support/rasterFormats/LercCodec":function(){define([],function(){var e={defaultNoDataValue:-3.4027999387901484E38,decode:function(d,a){var b;a=a||{};var c=a.inputOffset||0,m=a.encodedMaskData||null===a.encodedMaskData,k={},l=new Uint8Array(d,c,10);if(k.fileIdentifierString=String.fromCharCode.apply(null,l),"CntZImage"!=k.fileIdentifierString.trim())throw"Unexpected file identifier string: "+
k.fileIdentifierString;c+=10;l=new DataView(d,c,24);if(k.fileVersion=l.getInt32(0,!0),k.imageType=l.getInt32(4,!0),k.height=l.getUint32(8,!0),k.width=l.getUint32(12,!0),k.maxZError=l.getFloat64(16,!0),c+=24,!m)if(l=new DataView(d,c,16),k.mask={},k.mask.numBlocksY=l.getUint32(0,!0),k.mask.numBlocksX=l.getUint32(4,!0),k.mask.numBytes=l.getUint32(8,!0),k.mask.maxValue=l.getFloat32(12,!0),c+=16,0<k.mask.numBytes){var m=new Uint8Array(Math.ceil(k.width*k.height/8)),l=new DataView(d,c,k.mask.numBytes),
g=l.getInt16(0,!0),n=2,u=0;do{if(0<g)for(;g--;)m[u++]=l.getUint8(n++);else for(var r=l.getUint8(n++),g=-g;g--;)m[u++]=r;g=l.getInt16(n,!0);n+=2}while(n<k.mask.numBytes);if(-32768!==g||u<m.length)throw"Unexpected end of mask RLE encoding";k.mask.bitset=m;c+=k.mask.numBytes}else 0===(k.mask.numBytes|k.mask.numBlocksY|k.mask.maxValue)&&(m=new Uint8Array(Math.ceil(k.width*k.height/8)),k.mask.bitset=m);l=new DataView(d,c,16);k.pixels={};k.pixels.numBlocksY=l.getUint32(0,!0);k.pixels.numBlocksX=l.getUint32(4,
!0);k.pixels.numBytes=l.getUint32(8,!0);k.pixels.maxValue=l.getFloat32(12,!0);c+=16;m=k.pixels.numBlocksX;l=k.pixels.numBlocksY;m+=0<k.width%m?1:0;g=l+(0<k.height%l?1:0);k.pixels.blocks=Array(m*g);n=1E9;for(r=u=0;g>r;r++)for(var t=0;m>t;t++){var w=0,l=new DataView(d,c,Math.min(10,d.byteLength-c)),q={};k.pixels.blocks[u++]=q;var v=l.getUint8(0);if(w++,q.encoding=63&v,3<q.encoding)throw"Invalid block encoding ("+q.encoding+")";if(2!==q.encoding){if(0!==v&&2!==v){if(v>>=6,q.offsetType=v,2===v)q.offset=
l.getInt8(1),w++;else if(1===v)q.offset=l.getInt16(1,!0),w+=2;else{if(0!==v)throw"Invalid block offset type";q.offset=l.getFloat32(1,!0);w+=4}if(n=Math.min(q.offset,n),1===q.encoding)if(v=l.getUint8(w),w++,q.bitsPerPixel=63&v,v>>=6,q.numValidPixelsType=v,2===v)q.numValidPixels=l.getUint8(w),w++;else if(1===v)q.numValidPixels=l.getUint16(w,!0),w+=2;else{if(0!==v)throw"Invalid valid pixel count type";q.numValidPixels=l.getUint32(w,!0);w+=4}}if(c+=w,3!=q.encoding)if(0===q.encoding){l=(k.pixels.numBytes-
1)/4;if(l!==Math.floor(l))throw"uncompressed block has invalid length";w=new ArrayBuffer(4*l);v=new Uint8Array(w);v.set(new Uint8Array(d,c,4*l));w=new Float32Array(w);for(v=0;v<w.length;v++)n=Math.min(n,w[v]);q.rawData=w;c+=4*l}else 1===q.encoding&&(l=Math.ceil(q.numValidPixels*q.bitsPerPixel/8),w=new ArrayBuffer(4*Math.ceil(l/4)),v=new Uint8Array(w),v.set(new Uint8Array(d,c,l)),q.stuffedData=new Uint32Array(w),c+=l)}else c++,n=Math.min(n,0)}d=(k.pixels.minValue=n,k.eofOffset=c,k);var c=null!=a.noDataValue?
a.noDataValue:e.defaultNoDataValue,m=a.encodedMaskData,q=a.returnMask,l=0,g=d.pixels.numBlocksX,n=d.pixels.numBlocksY,u=Math.floor(d.width/g),r=Math.floor(d.height/n),t=2*d.maxZError,m=m||(d.mask?d.mask.bitset:null),x,k=new (a.pixelType||Float32Array)(d.width*d.height);q&&m&&(x=new Uint8Array(d.width*d.height));for(var f,p,q=new Float32Array(u*r),w=0;n>=w;w++)if(v=w!==n?r:d.height%n,0!==v)for(var z=0;g>=z;z++){var y=z!==g?u:d.width%g;if(0!==y){var A,B,D=w*d.width*r+z*u,F=d.width-y,C=d.pixels.blocks[l];
if(2>C.encoding){if(0===C.encoding)A=C.rawData;else{A=C.stuffedData;B=C.bitsPerPixel;f=C.numValidPixels;p=C.offset;var E=t,G=q,K=d.pixels.maxValue,L=void 0,H=void 0,I=void 0,N=(1<<B)-1,S=0,M=0,ca=Math.ceil((K-p)/E);A[A.length-1]<<=8*(4*A.length-Math.ceil(B*f/8));for(L=0;f>L;L++)(0===M&&(I=A[S++],M=32),M>=B)?(H=I>>>M-B&N,M-=B):(M=B-M,H=(I&N)<<M&N,I=A[S++],M=32-M,H+=I>>>M),G[L]=ca>H?p+H*E:K;A=q}B=0}else b=2===C.encoding?0:C.offset;var O;if(m)for(p=0;v>p;p++){7&D&&(O=m[D>>3],O<<=7&D);for(f=0;y>f;f++)7&
D||(O=m[D>>3]),128&O?(x&&(x[D]=1),k[D++]=2>C.encoding?A[B++]:b):(x&&(x[D]=0),k[D++]=c),O<<=1;D+=F}else if(2>C.encoding)for(p=0;v>p;p++){for(f=0;y>f;f++)k[D++]=A[B++];D+=F}else for(p=0;v>p;p++){for(f=0;y>f;f++)k[D++]=b;D+=F}if(1===C.encoding&&B!==C.numValidPixels)throw"Block and Mask do not match";l++}}b=x;x={width:d.width,height:d.height,pixelData:k,minValue:d.pixels.minValue,maxValue:d.pixels.maxValue,noDataValue:c};b&&(x.maskData=b);a.returnEncodedMask&&d.mask&&(x.encodedMaskData=d.mask.bitset?
d.mask.bitset:null);if(a.returnFileInfo&&(x.fileInfo=h(d),a.computeUsedBitDepths)){a=x.fileInfo;b=d.pixels.numBlocksX*d.pixels.numBlocksY;O={};for(A=0;b>A;A++)B=d.pixels.blocks[A],0===B.encoding?O.float32=!0:1===B.encoding?O[B.bitsPerPixel]=!0:O[0]=!0;b=Object.keys(O);a.bitDepths=b}return x}},h=function(d){return{fileIdentifierString:d.fileIdentifierString,fileVersion:d.fileVersion,imageType:d.imageType,height:d.height,width:d.width,maxZError:d.maxZError,eofOffset:d.eofOffset,mask:d.mask?{numBlocksX:d.mask.numBlocksX,
numBlocksY:d.mask.numBlocksY,numBytes:d.mask.numBytes,maxValue:d.mask.maxValue}:null,pixels:{numBlocksX:d.pixels.numBlocksX,numBlocksY:d.pixels.numBlocksY,numBytes:d.pixels.numBytes,maxValue:d.pixels.maxValue,minValue:d.pixels.minValue,noDataValue:this.noDataValue}}};return e})},"esri/views/MapView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/promise/all ../core/accessorSupport/decorators ../core/HandleRegistry ../core/promiseUtils ./MapViewBase ./DOMContainer ../geometry/ScreenPoint ./ui/2d/DefaultUI2D ./2d/engine/Stage ./2d/layers/support/GraphicsView2D ./2d/input/MapViewInputManager ./2d/navigation/MapViewNavigation ./support/screenshotUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v){e=function(a){function f(b){b=a.call(this,b)||this;return b._graphicsView=null,b._mapViewHandles=new m,b._stage=null,b.inputManager=new w({view:b}),b.navigation=null,b.ui=null,b.rendering=!1,b}return d(f,a),Object.defineProperty(f.prototype,"interacting",{get:function(){return this.navigation&&this.navigation.interacting||!1},enumerable:!0,configurable:!0}),f.prototype.hitTest=function(a,f){if(!this.ready)return null;var c;c=null!=a&&a.x?a:new n({x:a,y:f});
var d=this.toMap(c);a=[this._graphicsView];return a.push.apply(a,this.allLayerViews.toArray().reverse()),b(a.map(function(a){return a&&a.hitTest?a.hitTest(c.x,c.y):null})).then(function(a){return{screenPoint:c,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:d,graphic:a}})}})},f.prototype.takeScreenshot=function(a){return this.ready?(a=v.adjustScreenshotSettings(a,this),this._stage.takeScreenshot(a)):k.reject("Map view cannot be used before it is ready")},f.prototype.on=
function(a,b,f){var c=this.inputManager&&this.inputManager.viewEvents.register(a,b,f);return c?c:this.inherited(arguments)},f.prototype.destroyLayerViews=function(){this.inherited(arguments);this._stage&&(this._stage.destroy(),this._stage=null)},f.prototype._startup=function(){var a=this;this.inherited(arguments);var b=new r(this.surface),f=new t({view:this,graphics:this.graphics}),c=new q({view:this,animationManager:this.animationManager});this._stage=b;this._graphicsView=f;this._set("navigation",
c);this._mapViewHandles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!0===a.rendering}))}),this.watch("stationary",function(a){return b.stationary=a},!0),this.watch("state.viewpoint",function(f){return b.state=a.state},!0)]);b.state=this.state;this._updateStageChildren()},f.prototype._tearDown=function(){this._setup&&(this._graphicsView.destroy(),this._mapViewHandles.removeAll(),
this._stage.destroy(),this.navigation.destroy(),this._stage=null,this._graphicsView=null,this._set("navigation",null),this.inherited(arguments))},f.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(function(a){return null!=a.container}).forEach(function(b,f){a._stage.addChildAt(b.container,f)});this._stage.addChild(this._graphicsView.container)},f}(c.declared(l,g));return a([c.property({readOnly:!0})],e.prototype,"inputManager",void 0),
a([c.property({readOnly:!0})],e.prototype,"navigation",void 0),a([c.property({dependsOn:["navigation.interacting"],type:Boolean})],e.prototype,"interacting",null),a([c.property({type:u})],e.prototype,"ui",void 0),a([c.property({readOnly:!0})],e.prototype,"rendering",void 0),e=a([c.subclass("esri.views.MapView")],e)})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../core/accessorSupport/decorators ../core/HandleRegistry ../core/Logger ../core/promiseUtils ../Viewpoint ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/SpatialReference ../geometry/support/scaleUtils ../geometry/support/webMercatorUtils ./View ./ViewAnimation ./2d/FrameTask ./2d/PaddedViewState ./2d/MapViewConstraints ./2d/AnimationManager ./2d/viewpointUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y,A){var B=k.getLogger("esri.views.MapView");e=function(a){function c(b){var c=a.call(this,b)||this;c._frameTask=new f(c);c._mapViewBaseHandles=new m;c._setup=!1;c.fullOpacity=1;c.interacting=!1;c.initialExtent=null;c.resizeAlign="center";c.type="2d";c.constraints=new z;c.padding={top:0,right:0,bottom:0,left:0};var d=function(){this._set("updating",this.layerViewManager.factory.working||this.allLayerViews.some(function(a){return!0===a.updating}))}.bind(c),
e=c._mapViewBaseHandles;return e.add([c.watch("viewpoint",function(a){return c._flipStationary()},!0),c.on("resize",function(a){return c._resizeHandler(a)}),c.watch("animationManager.animation",function(a){c.animation=a}),c.allLayerViews.on("change",function(){d();e.remove("layerViewsUpdating");e.add(c.allLayerViews.map(function(a){return a.watch("updating",d)}).toArray(),"layerViewsUpdating")})]),c.watch("ready",function(a){a?c._startup():c._tearDown()}),c}return d(c,a),c.prototype.destroy=function(){this.destroyed||
(this._set("ready",!1),this._mapViewBaseHandles.removeAll(),this.layerViewManager.empty(),this._frameTask.destroy(),this._tearDown(),this._gotoTask=this._mapViewBaseHandles=this._frameTask=null)},Object.defineProperty(c.prototype,"animation",{set:function(a){var b=this,f=this._get("animation");if(a!==f){if(f&&f.stop(),!a||a.isFulfilled())return void this._set("animation",null);this._set("animation",a);f=function(){a===b._get("animation")&&(b._set("animation",null),b._frameTask.requestFrame())};a.then(f,
f,function(a){b.state&&(b.state.viewpoint=a)})}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var a=this.content.center;return new n({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a){if(!this._normalizeInput(a))return void B.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference));
if(!this.ready)return this._set("center",a),void this.notifyChange("initialExtentRequired");var b=this.viewpoint;A.centerAt(b,b,a);this.viewpoint=b}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"constraints",{set:function(a){var b=this,f=this._get("constraints");f&&(this._mapViewBaseHandles.remove("constraints"),f.destroy());this._set("constraints",a);a&&(this.ready&&(a.view=this,this.state.viewpoint=a.fit(this.content.viewpoint)),this._mapViewBaseHandles.add(a.on("update",function(){b.ready&&
b.state&&(b.state.viewpoint=a.fit(b.content.viewpoint))}),"constraints"))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"extent",{get:function(){return this.ready?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);if(!b)return void B.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference));if(!b.width||!b.height)return void B.error("#extent",
"invalid extent size");if(!this.ready)return this._set("extent",b),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");a=this.viewpoint;A.setExtent(a,a,b,this.size,{constraints:this.constraints});this.viewpoint=a}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,f=this.scale,c=this.viewpoint,d=this.zoom;return this.get("map.initialViewProperties.viewpoint")?
!1:a?!1:!b||0===f&&-1===d?c?!1:!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){return this.ready?(this.state.padding=a,void this._set("padding",this.state.padding)):void this._set("padding",a)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rotation",{get:function(){return this.ready?this.content.rotation:this._get("rotation")},set:function(a){if(!isNaN(a)){if(!this.ready)return void this._set("rotation",
a);var b=this.viewpoint;A.rotateTo(b,b,a);this.viewpoint=b}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"scale",{get:function(){return this.ready?this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a)){if(!this.ready)return this._set("scale",a),this._set("zoom",-1),a=this._get("extent"),a&&(this._set("extent",null),this._set("center",a.center)),void this.notifyChange("initialExtentRequired");var b=this.viewpoint;A.scaleTo(b,b,a);this.viewpoint=b}},enumerable:!0,
configurable:!0}),Object.defineProperty(c.prototype,"stationary",{get:function(){return!(this.animation||this.interacting||this._get("resizing")||this._stationaryTimer)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"viewpoint",{get:function(){return this.ready?this.content.viewpoint.clone():this._get("viewpoint")},set:function(a){if(null!=a){var b=this._normalizeInput(a);if(!b)return void(!a.scale||isNaN(a.scale)?B.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?
B.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):B.error("#viewpoint","geometry not defined"));if(!this.ready)return this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");a=A.create();A.copy(a,b);this.constraints.constrain(a,this.content.viewpoint);this.state.viewpoint=
a;this._frameTask.requestFrame();this._set("viewpoint",a)}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"zoom",{get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&(b=this.viewpoint,A.scaleTo(b,
b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0}),c.prototype.goTo=function(a,f){if(!this.ready)return void B.error("#goTo()","MapView cannot be used before it is ready");f=b.mixin({animate:!0},f);a=A.createAsync(a,this);return this._gotoTask={},f.animate?this._gotoAnimated(a,f):this._gotoImmediate(a,f)},c.prototype.hitTest=function(a,b){return l.reject("Should be implemented by subclasses")},c.prototype.toMap=
function(a,b,f){if(!this.ready)return null;a&&null!=a.x&&(f=b,b=a.y,a=a.x);var c=[0,0];return this.state.toMap(c,[a,b]),f=f||new n,f.x=c[0],f.y=c[1],f.spatialReference=this.spatialReference,f},c.prototype.isTileInfoRequired=function(){return!0},c.prototype.toScreen=function(a,b,f,c){if(!this.ready)return null;a&&null!=a.x&&(c=b,b=a.y,a=a.x);c=f||c||new u;a=[a,b];return this.state.toScreen(a,a),c.x=a[0],c.y=a[1],c},c.prototype.pixelSizeAt=function(a,b){return this.ready?(a&&null!=a.x&&(b=a.y,a=a.x),
this.content.pixelSizeAt([a,b])):NaN},c.prototype.requestLayerViewUpdate=function(a){this.ready&&this._frameTask.requestLayerViewUpdate(a)},c.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null},c.prototype.isSpatialReferenceSupported=function(a,b){if(b||this._get("ready"))return!0;b=this._normalizeInput(this._get("center"),a);var f=this._normalizeInput(this._get("extent"),a),c=this._normalizeInput(this._get("viewpoint"),
a),d=this._userSpatialReference,e=null,g=null;(c=c&&c.targetGeometry)&&("extent"===c.type?e=c:"point"===c.type&&(g=c));c=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"),a);a=this._normalizeInput(this.initialExtent,a);a=f||e||c||a;return b||g||a&&a.center?!0:(d&&B.error("The view could not be initialized with the spatialReference "+d.wkid+".","Try specifying an extent or a center and scale"),!1)},c.prototype._gotoImmediate=function(a,b){var f=this,c=this._gotoTask;
return!this.animation||"running"!==this.animation.state&&"waiting-for-target"!==this.animation.state?this.animation=new x({target:a}):this.animation.target=a,a.then(function(a){c===f._gotoTask&&(f.viewpoint=f.animation.target=a,f.animation.finish())}),this.animation},c.prototype._gotoAnimated=function(a,b){var f=this;!this.animation||"running"!==this.animation.state&&"waiting-for-target"!==this.animation.state?this.animation=new x({target:a}):this.animation.target=a;var c=this.animation;return c.state=
"waiting-for-target",a.then(function(d){c.target===a&&f.animation===c&&(c.target=d,c.state="running",f.animationManager.animate(c,f.viewpoint,b),c.state===x.State.STOPPED&&c.stop())}).otherwise(function(){c.target===a&&f.animation===c&&(f.animation=null,c.finish())}),c},c.prototype._resizeHandler=function(a){var b=this.state;if(b){var f=this.content.viewpoint,c=this.content.size.concat();b.size=[a.width,a.height];A.resize(f,f,c,this.content.size,this.resizeAlign);f=this.constraints.constrain(f,null);
this.state.viewpoint=f}},c.prototype._startup=function(){if(!this._setup){this._setup=!0;var a=this.constraints,b=this._get("zoom"),f=this._get("scale"),c=this._normalizeInput(this._get("center")),d=this._normalizeInput(this._get("extent")),e=this._get("rotation"),k=this._normalizeInput(this._get("viewpoint"));a.view=this;a.effectiveLODs?-1!==b&&(f=a.zoomToScale(b)):b=-1;var l=null,m=null,n=0,b=k&&k.rotation,v=k&&k.targetGeometry;v&&("extent"===v.type?l=v:"point"===v.type&&(m=v,n=k.scale));k=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));
v=this._normalizeInput(this.initialExtent);d=d||l||k||v;c=c||m||d&&d.center;f=f||n||d&&w.getScale({width:this.size[0]},d);e=new g({targetGeometry:c,scale:f,rotation:e||b||0});a.fit(e);this._set("animationManager",new y);this._set("state",new p({padding:this._get("padding"),size:this.size,viewpoint:e}));this._set("content",this.state.content)}},c.prototype._tearDown=function(){this._setup&&(this._setup=!1,this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary")),
this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this._set("content",null),this.animation=null)},c.prototype._flipStationary=function(){var a=this;this._stationaryTimer&&clearTimeout(this._stationaryTimer);this._stationaryTimer=setTimeout(function(){a._stationaryTimer=null;a.notifyChange("stationary")},160);this.notifyChange("stationary")},c.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var f=a&&a.targetGeometry||
a;return b?f?b.equals(f.spatialReference)?a:q.canProject(f,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=q.project(f,b),a):q.project(f,b):null:null:a},c}(c.declared(v));return a([c.property()],e.prototype,"animation",null),a([c.property({readOnly:!0})],e.prototype,"animationManager",void 0),a([c.property({value:null,type:n,dependsOn:["content.center"]})],e.prototype,"center",null),a([c.property({type:z})],e.prototype,"constraints",null),a([c.property({readOnly:!0})],e.prototype,"content",
void 0),a([c.property({value:null,type:r,dependsOn:["content.extent"]})],e.prototype,"extent",null),a([c.property()],e.prototype,"fullOpacity",void 0),a([c.property({readOnly:!0})],e.prototype,"interacting",void 0),a([c.property({type:r})],e.prototype,"initialExtent",void 0),a([c.property({dependsOn:["map.initialViewProperties.viewpoint"]})],e.prototype,"initialExtentRequired",null),a([c.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return b.mixin({top:0,right:0,bottom:0,left:0},
a)}})],e.prototype,"padding",null),a([c.property()],e.prototype,"resizeAlign",void 0),a([c.property({value:0,type:Number,dependsOn:["content.rotation"]})],e.prototype,"rotation",null),a([c.property({value:0,type:Number,dependsOn:["content.scale"]})],e.prototype,"scale",null),a([c.property({type:t,dependsOn:["map.initialViewProperties.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],e.prototype,"spatialReference",void 0),a([c.property({readOnly:!0})],e.prototype,"state",void 0),a([c.property()],
e.prototype,"stationary",null),a([c.property({readOnly:!0})],e.prototype,"type",void 0),a([c.property({value:null,type:g,dependsOn:["content.viewpoint"]})],e.prototype,"viewpoint",null),a([c.property({value:-1,dependsOn:["content.scale"]})],e.prototype,"zoom",null),e=a([c.subclass("esri.views.MapViewBase")],e)})},"esri/Viewpoint":function(){define(["./core/JSONSupport","./Camera","./core/lang","./geometry/support/jsonUtils"],function(e,h,d,a){var b=e.createSubclass({declaredClass:"esri.Viewpoint",
properties:{rotation:{value:0,cast:function(a){return a%=360,0>a&&(a+=360),a}},scale:0,targetGeometry:{value:null,json:{read:function(b){return a.fromJSON(b)}}},camera:{value:null,type:h}},toJSON:function(){var a={scale:this.scale,rotation:this.rotation,targetGeometry:this.targetGeometry?this.targetGeometry.toJSON():void 0,camera:this.camera?this.camera.toJSON():void 0};return a.camera&&delete a.camera.fov,d.fixJson(a)},clone:function(){return new b({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?
this.targetGeometry.clone():null,camera:this.camera?this.camera.clone():null})}});return b})},"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/lang ./geometry/Point ./views/3d/support/mathUtils ./core/accessorSupport/decorators".split(" "),function(e,h,d,a,b,c,m,k,l){e=g=function(a){function b(b){b=a.call(this)||this;return b.position=null,b.heading=0,b.tilt=0,b.fov=55,b}return d(b,a),b.prototype.getDefaults=
function(a){return a.position?void 0:{position:new m([0,0,0])}},b.prototype.normalizeCtorArgs=function(a,b,c,d){return a&&"object"==typeof a&&("x"in a||Array.isArray(a))?(a={position:a},null!=b&&(a.heading=b),null!=c&&(a.tilt=c),null!=d&&(a.fov=d),a):a},b.prototype.equals=function(a){return a?this.tilt===a.tilt&&this.heading===a.heading&&this.fov===a.fov&&this.position.equals(a.position):!1},b.prototype.clone=function(){return new g({position:this.position.clone(),heading:this.heading,tilt:this.tilt,
fov:this.fov})},b.prototype.toJSON=function(){var a={position:this.position.toJSON(),heading:this.heading,tilt:this.tilt};return c.fixJson(a)},b}(l.declared(b));a([l.property({type:m})],e.prototype,"position",void 0);a([l.property(),l.cast(k.cyclicalDeg.normalize)],e.prototype,"heading",void 0);a([l.property(),l.cast(function(a){return k.clamp(a,-180,180)})],e.prototype,"tilt",void 0);a([l.property({json:{read:!1,write:!1}})],e.prototype,"fov",void 0);e=g=a([l.subclass("esri.Camera")],e);var g;return e})},
"esri/views/3d/support/mathUtils":function(){define(["require","exports","../lib/glMatrix"],function(e,h,d){function a(a){return Math.acos(1<a?1:-1>a?-1:a)}function b(a,b,c){return b>a?b:a>c?c:a}function c(a){for(var b in a){var c=a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(h,"__esModule",{value:!0});h.deg2rad=function(a){return a*Math.PI/180};h.rad2deg=function(a){return 180*a/Math.PI};h.asin=function(a){return Math.asin(1<a?1:-1>a?-1:a)};h.acos=a;h.log2=Math.log2||
function(a){return Math.log(a)/Math.LN2};h.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};h.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};h.lerp=function(a,b,c){return a+(b-a)*c};h.bilerp=function(a,b,c,d,e,g){a+=(b-a)*e;return a+(c+(d-c)*e-a)*g};h.slerp=function(a,b,c,e){void 0===e&&(e=a);var g=d.vec3d.length(a),l=d.vec3d.length(b),n=d.vec3d.dot(a,b)/g/l;.999999999999>n&&(d.vec3d.cross(a,b,m),d.mat4d.identity(k),d.mat4d.rotate(k,c*Math.acos(n),m),d.mat4d.multiplyVec3(k,
a,e));return d.vec3d.scale(e,((1-c)*g+c*l)/g),e};h.slerpOrLerp=function(a,b,c,e,g){var l=d.vec3d.length(a),n=d.vec3d.length(b);(d.vec3d.cross(a,b,m),d.vec3d.length(m)/l/n>g)?(b=Math.acos(d.vec3d.dot(a,b)/l/n),d.mat4d.identity(k),d.mat4d.rotate(k,c*b,m),d.mat4d.multiplyVec3(k,a,e),d.vec3d.scale(e,((1-c)*l+c*n)/l)):d.vec3d.lerp(a,b,c,e);return e};h.angle=function(b,c,e){b=d.vec3d.normalize(b,l);c=d.vec3d.normalize(c,g);var k=a(d.vec3d.dot(b,c));return e&&(b=d.vec3d.cross(b,c,m),0>d.vec3d.dot(b,e))?
-k:k};h.clamp=b;h.isFinite=Number.isFinite||function(a){return"number"==typeof a&&window.isFinite(a)};h.isNaN=Number.isNaN||function(a){return a!==a};h.makePiecewiseLinearFunction=function(a){var b=a.length;return function(c){var d=0;if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(;c>a[d][0];)d++;var e=a[d][0];c=(e-c)/(e-a[d-1][0]);return c*a[d-1][1]+(1-c)*a[d][1]}};h.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==
b[c])return!1;return!0};h.floatEqualRelative=function(a,b,c){if(void 0===c&&(c=1E-6),h.isNaN(a)||h.isNaN(b))return!1;if(a===b)return!0;var d=Math.abs(a-b),e=Math.abs(a),g=Math.abs(b);if(0===a||0===b||1E-12>e&&1E-12>g){if(d>.01*c)return!1}else if(d/(e+g)>c)return!1;return!0};h.floatEqualAbsolute=function(a,b,c){return(void 0===c&&(c=1E-6),h.isNaN(a)||h.isNaN(b))?!1:c>=(a>b?a-b:b-a)};e=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}return a.prototype.ndiff=function(a,b){return void 0===
b&&(b=0),Math.ceil((a-b)/this.range)*this.range+b},a.prototype._normalize=function(a,b,c,d){return void 0===d&&(d=0),c-=d,a>c?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b)),c+d},a.prototype.normalize=function(a,b){return this._normalize(this.min,this.max,a,b)},a.prototype.clamp=function(a,c){return void 0===c&&(c=0),b(a-c,this.min,this.max)+c},a.prototype.monotonic=function(a,b,c){return b>a?b:b+this.ndiff(a-b,c)},a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,
c)},a.prototype.center=function(a,b,c){return b=this.monotonic(a,b,c),this.normalize((a+b)/2,c)},a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a},a.prototype.contains=function(a,b,c){return b=this.minimalMonotonic(a,b),c=this.minimalMonotonic(a,c),c>a&&b>c},a}();h.Cyclical=e;h.cyclical2PI=c(new e(0,2*Math.PI));h.cyclicalPI=c(new e(-Math.PI,Math.PI));h.cyclicalDeg=c(new e(0,360));var m=d.vec3d.create(),k=d.mat4d.create(),l=d.vec3d.create(),g=d.vec3d.create()})},"esri/views/3d/lib/glMatrix":function(){define([],
function(){var e={};return function(e,d){d(e,!0);d(e,!1)}(e,function(e,d){var a={};!function(){if("undefined"!=typeof Float32Array){var b=new Float32Array(1),c=new Int32Array(b.buffer);a.invsqrt=function(a){b[0]=a;c[0]=1597463007-(c[0]>>1);var f=b[0];return f*(1.5-.5*a*f*f)}}else a.invsqrt=function(a){return 1/Math.sqrt(a)}}();var b=Array;"undefined"!=typeof Float32Array&&(b=d?Float32Array:Array);var c={create:function(a){var f=new b(3);return a?(f[0]=a[0],f[1]=a[1],f[2]=a[2]):f[0]=f[1]=f[2]=0,f},
createFrom:function(a,c,d){var f=new b(3);return f[0]=a,f[1]=c,f[2]=d,f},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},set3:function(a,b,c,d){return d[0]=a,d[1]=b,d[2]=c,d},add:function(a,b,c){return c&&a!==c?(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c):(a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a)},subtract:function(a,b,c){return c&&a!==c?(c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c):(a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a)},multiply:function(a,b,c){return c&&a!==c?(c[0]=a[0]*b[0],c[1]=a[1]*
b[1],c[2]=a[2]*b[2],c):(a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a)},max:function(a,b,c){return c[0]=Math.max(a[0],b[0]),c[1]=Math.max(a[1],b[1]),c[2]=Math.max(a[2],b[2]),c},min:function(a,b,c){return c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b},scale:function(a,b,c){return c&&a!==c?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c):(a[0]*=b,a[1]*=b,a[2]*=b,a)},normalize:function(a,b){b||(b=a);var f=a[0],c=a[1];
a=a[2];var d=Math.sqrt(f*f+c*c+a*a);return d?1===d?(b[0]=f,b[1]=c,b[2]=a,b):(d=1/d,b[0]=f*d,b[1]=c*d,b[2]=a*d,b):(b[0]=0,b[1]=0,b[2]=0,b)},cross:function(a,b,c){c||(c=a);var f=a[0],d=a[1];a=a[2];var e=b[0],g=b[1];b=b[2];return c[0]=d*b-a*g,c[1]=a*e-f*b,c[2]=f*g-d*e,c},length:function(a){var b=a[0],f=a[1];a=a[2];return Math.sqrt(b*b+f*f+a*a)},length2:function(a){var b=a[0],f=a[1];a=a[2];return b*b+f*f+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var f=
a[0]-b[0],d=a[1]-b[1];a=a[2]-b[2];return(b=Math.sqrt(f*f+d*d+a*a))?(b=1/b,c[0]=f*b,c[1]=d*b,c[2]=a*b,c):(c[0]=0,c[1]=0,c[2]=0,c)},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d},dist:function(a,b){var f=b[0]-a[0],c=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(f*f+c*c+a*a)},dist2:function(a,b){var f=b[0]-a[0],c=b[1]-a[1];a=b[2]-a[2];return f*f+c*c+a*a}},m=null,k=new b(4);c.unproject=function(a,b,c,d,e){e||(e=a);m||(m=w.create());var f=m;return k[0]=
2*(a[0]-d[0])/d[2]-1,k[1]=2*(a[1]-d[1])/d[3]-1,k[2]=2*a[2]-1,k[3]=1,w.multiply(c,b,f),w.inverse(f)?(w.multiplyVec4(f,k),0===k[3]?null:(e[0]=k[0]/k[3],e[1]=k[1]/k[3],e[2]=k[2]/k[3],e)):null};var l=c.createFrom(1,0,0),g=c.createFrom(0,1,0),n=c.createFrom(0,0,1);c.rotationTo=function(a,b,d){d||(d=q.create());var f=c.dot(a,b),e=c.create();if(1<=f)q.set(v,d);else if(-.999999>f)c.cross(l,a,e),1E-6>e.length&&c.cross(g,a,e),1E-6>e.length&&c.cross(n,a,e),c.normalize(e),q.fromAxisAngle(e,Math.PI,d);else{var f=
Math.sqrt(2*(1+f)),p=1/f;c.cross(a,b,e);d[0]=e[0]*p;d[1]=e[1]*p;d[2]=e[2]*p;d[3]=.5*f;q.normalize(d)}return 1<d[3]?d[3]=1:-1>d[3]&&(d[3]=-1),d};var h=c.create(),r=c.create();c.project=function(a,b,d,e){e||(e=a);c.direction(b,d,h);c.subtract(a,b,r);a=c.dot(h,r);c.scale(h,a,e);c.add(e,b,e)};c.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var t={create:function(a){var f=new b(9);return a?(f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],f[4]=a[4],f[5]=a[5],f[6]=a[6],f[7]=a[7],f[8]=a[8]):f[0]=f[1]=f[2]=
f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=0,f},createFrom:function(a,c,d,e,g,k,l,m,n){var f=new b(9);return f[0]=a,f[1]=c,f[2]=d,f[3]=e,f[4]=g,f[5]=k,f[6]=l,f[7]=m,f[8]=n,f},determinant:function(a){var b=a[3],f=a[4],c=a[5],d=a[6],e=a[7],g=a[8];return a[0]*(g*f-c*e)+a[1]*(-g*b+c*d)+a[2]*(e*b-f*d)},inverse:function(a,b){var f,c=a[0],d=a[1],e=a[2],g=a[3],p=a[4],k=a[5],l=a[6],m=a[7];a=a[8];var n=a*p-k*m,v=-a*g+k*l,h=m*g-p*l,u=c*n+d*v+e*h;return u?(f=1/u,b||(b=t.create()),b[0]=n*f,b[1]=(-a*d+e*m)*f,b[2]=(k*d-e*p)*
f,b[3]=v*f,b[4]=(a*c-e*l)*f,b[5]=(-k*c+e*g)*f,b[6]=h*f,b[7]=(-m*c+d*l)*f,b[8]=(p*c-d*g)*f,b):null},multiply:function(a,b,c){c||(c=a);var f=a[0],d=a[1],e=a[2],g=a[3],p=a[4],k=a[5],l=a[6],m=a[7];a=a[8];var n=b[0],v=b[1],h=b[2],u=b[3],q=b[4],x=b[5],z=b[6],t=b[7];b=b[8];return c[0]=n*f+v*g+h*l,c[1]=n*d+v*p+h*m,c[2]=n*e+v*k+h*a,c[3]=u*f+q*g+x*l,c[4]=u*d+q*p+x*m,c[5]=u*e+q*k+x*a,c[6]=z*f+t*g+b*l,c[7]=z*d+t*p+b*m,c[8]=z*e+t*k+b*a,c},add:function(a,b,c){return c||(c=a),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=
a[2]+b[2],c[3]=a[3]+b[3],c[4]=a[4]+b[4],c[5]=a[5]+b[5],c[6]=a[6]+b[6],c[7]=a[7]+b[7],c[8]=a[8]+b[8],c},subtract:function(a,b,c){return c||(c=a),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],c[4]=a[4]-b[4],c[5]=a[5]-b[5],c[6]=a[6]-b[6],c[7]=a[7]-b[7],c[8]=a[8]-b[8],c},multiplyVec2:function(a,b,c){c||(c=b);var f=b[0];b=b[1];return c[0]=f*a[0]+b*a[3]+a[6],c[1]=f*a[1]+b*a[4]+a[7],c},multiplyVec3:function(a,b,c){c||(c=b);var f=b[0],d=b[1];b=b[2];return c[0]=f*a[0]+d*a[3]+b*a[6],c[1]=f*a[1]+
d*a[4]+b*a[7],c[2]=f*a[2]+d*a[5]+b*a[8],c},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},identity:function(a){return a||(a=t.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},transpose:function(a,b){if(!b||a===b){b=a[1];var f=a[2],c=a[5];return a[1]=a[3],a[2]=a[6],a[3]=b,a[5]=a[7],a[6]=f,a[7]=c,a}return b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8],b},toMat4:function(a,
b){return b||(b=w.create()),b[15]=1,b[14]=0,b[13]=0,b[12]=0,b[11]=0,b[10]=a[8],b[9]=a[7],b[8]=a[6],b[7]=0,b[6]=a[5],b[5]=a[4],b[4]=a[3],b[3]=0,b[2]=a[2],b[1]=a[1],b[0]=a[0],b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},w={create:function(a){var f=new b(16);return 4===arguments.length?(f[0]=arguments[0],f[1]=arguments[1],f[2]=arguments[2],f[3]=arguments[3],f[4]=arguments[4],f[5]=arguments[5],f[6]=arguments[6],f[7]=arguments[7],
f[8]=arguments[8],f[9]=arguments[9],f[10]=arguments[10],f[11]=arguments[11],f[12]=arguments[12],f[13]=arguments[13],f[14]=arguments[14],f[15]=arguments[15]):a&&(f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],f[4]=a[4],f[5]=a[5],f[6]=a[6],f[7]=a[7],f[8]=a[8],f[9]=a[9],f[10]=a[10],f[11]=a[11],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]),f},createFrom:function(a,c,d,e,g,k,l,m,n,v,h,u,q,x,t,r){var f=new b(16);return f[0]=a,f[1]=c,f[2]=d,f[3]=e,f[4]=g,f[5]=k,f[6]=l,f[7]=m,f[8]=n,f[9]=v,f[10]=h,f[11]=u,f[12]=
q,f[13]=x,f[14]=t,f[15]=r,f},createFromMatrixRowMajor:function(a){var f=new b(16);return f[0]=a[0],f[4]=a[1],f[8]=a[2],f[12]=a[3],f[1]=a[4],f[5]=a[5],f[9]=a[6],f[13]=a[7],f[2]=a[8],f[6]=a[9],f[10]=a[10],f[14]=a[11],f[3]=a[12],f[7]=a[13],f[11]=a[14],f[15]=a[15],f},createFromMatrix:function(a){var f=new b(16);return f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],f[4]=a[4],f[5]=a[5],f[6]=a[6],f[7]=a[7],f[8]=a[8],f[9]=a[9],f[10]=a[10],f[11]=a[11],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15],f},set:function(a,
b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},setRowMajor:function(a,b){return b[0]=a[0],b[4]=a[1],b[8]=a[2],b[12]=a[3],b[1]=a[4],b[5]=a[5],b[9]=a[6],b[13]=a[7],b[2]=a[8],b[6]=a[9],b[10]=a[10],b[14]=a[11],b[3]=a[12],b[7]=a[13],b[11]=a[14],b[15]=a[15],b},identity:function(a){return a||(a=w.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,
a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},transpose:function(a,b){if(!b||a===b){b=a[1];var f=a[2],c=a[3],d=a[6],e=a[7],g=a[11];return a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=b,a[6]=a[9],a[7]=a[13],a[8]=f,a[9]=d,a[11]=a[14],a[12]=c,a[13]=e,a[14]=g,a}return b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15],b},determinant:function(a){var b=a[0],f=a[1],c=a[2],d=a[3],e=
a[4],g=a[5],k=a[6],l=a[7],m=a[8],n=a[9],v=a[10],h=a[11],u=a[12],q=a[13],x=a[14];a=a[15];return u*n*k*d-m*q*k*d-u*g*v*d+e*q*v*d+m*g*x*d-e*n*x*d-u*n*c*l+m*q*c*l+u*f*v*l-b*q*v*l-m*f*x*l+b*n*x*l+u*g*c*h-e*q*c*h-u*f*k*h+b*q*k*h+e*f*x*h-b*g*x*h-m*g*c*a+e*n*c*a+m*f*k*a-b*n*k*a-e*f*v*a+b*g*v*a},inverse:function(a,b){b||(b=a);var f,c=a[0],d=a[1],e=a[2],g=a[3],k=a[4],p=a[5],l=a[6],m=a[7],n=a[8],v=a[9],h=a[10],u=a[11],q=a[12],x=a[13],t=a[14];a=a[15];var r=c*p-d*k,w=c*l-e*k,P=c*m-g*k,W=d*l-e*p,aa=d*m-g*p,R=e*
m-g*l,T=n*x-v*q,ba=n*t-h*q,U=n*a-u*q,ea=v*t-h*x,Z=v*a-u*x,fa=h*a-u*t,ja=r*fa-w*Z+P*ea+W*U-aa*ba+R*T;return ja?(f=1/ja,b[0]=(p*fa-l*Z+m*ea)*f,b[1]=(-d*fa+e*Z-g*ea)*f,b[2]=(x*R-t*aa+a*W)*f,b[3]=(-v*R+h*aa-u*W)*f,b[4]=(-k*fa+l*U-m*ba)*f,b[5]=(c*fa-e*U+g*ba)*f,b[6]=(-q*R+t*P-a*w)*f,b[7]=(n*R-h*P+u*w)*f,b[8]=(k*Z-p*U+m*T)*f,b[9]=(-c*Z+d*U-g*T)*f,b[10]=(q*aa-x*P+a*r)*f,b[11]=(-n*aa+v*P-u*r)*f,b[12]=(-k*ea+p*ba-l*T)*f,b[13]=(c*ea-d*ba+e*T)*f,b[14]=(-q*W+x*w-t*r)*f,b[15]=(n*W-v*w+h*r)*f,b):null},toRotationMat:function(a,
b){return b||(b=w.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},toMat3:function(a,b){return b||(b=t.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[4],b[4]=a[5],b[5]=a[6],b[6]=a[8],b[7]=a[9],b[8]=a[10],b},toInverseMat3:function(a,b){var f,c=a[0],d=a[1],e=a[2],g=a[4],k=a[5],p=a[6],l=a[8],m=a[9];a=a[10];var n=a*k-p*m,v=-a*g+p*l,h=m*g-k*l,u=c*n+d*v+e*h;return u?(f=1/u,b||(b=t.create()),
b[0]=n*f,b[1]=(-a*d+e*m)*f,b[2]=(p*d-e*k)*f,b[3]=v*f,b[4]=(a*c-e*l)*f,b[5]=(-p*c+e*g)*f,b[6]=h*f,b[7]=(-m*c+d*l)*f,b[8]=(k*c-d*g)*f,b):null},multiply:function(a,b,c){c||(c=a);var f=a[0],d=a[1],e=a[2],g=a[3],k=a[4],p=a[5],l=a[6],m=a[7],n=a[8],v=a[9],h=a[10],u=a[11],q=a[12],x=a[13],t=a[14];a=a[15];var z=b[0],r=b[1],w=b[2],W=b[3],aa=b[4],R=b[5],T=b[6],ba=b[7],U=b[8],ea=b[9],Z=b[10],fa=b[11],ja=b[12],ta=b[13],ra=b[14];b=b[15];return c[0]=z*f+r*k+w*n+W*q,c[1]=z*d+r*p+w*v+W*x,c[2]=z*e+r*l+w*h+W*t,c[3]=
z*g+r*m+w*u+W*a,c[4]=aa*f+R*k+T*n+ba*q,c[5]=aa*d+R*p+T*v+ba*x,c[6]=aa*e+R*l+T*h+ba*t,c[7]=aa*g+R*m+T*u+ba*a,c[8]=U*f+ea*k+Z*n+fa*q,c[9]=U*d+ea*p+Z*v+fa*x,c[10]=U*e+ea*l+Z*h+fa*t,c[11]=U*g+ea*m+Z*u+fa*a,c[12]=ja*f+ta*k+ra*n+b*q,c[13]=ja*d+ta*p+ra*v+b*x,c[14]=ja*e+ta*l+ra*h+b*t,c[15]=ja*g+ta*m+ra*u+b*a,c},multiplyVec3:function(a,b,c){c||(c=b);var f=b[0],d=b[1];b=b[2];return c[0]=a[0]*f+a[4]*d+a[8]*b+a[12],c[1]=a[1]*f+a[5]*d+a[9]*b+a[13],c[2]=a[2]*f+a[6]*d+a[10]*b+a[14],c},multiplyVec4:function(a,b,
c){c||(c=b);var f=b[0],d=b[1],e=b[2];b=b[3];return c[0]=a[0]*f+a[4]*d+a[8]*e+a[12]*b,c[1]=a[1]*f+a[5]*d+a[9]*e+a[13]*b,c[2]=a[2]*f+a[6]*d+a[10]*e+a[14]*b,c[3]=a[3]*f+a[7]*d+a[11]*e+a[15]*b,c},translate:function(a,b,c){var f,d,e,g,k,l,p,m,n,v,h,u,q=b[0],x=b[1];b=b[2];return c&&a!==c?(f=a[0],d=a[1],e=a[2],g=a[3],k=a[4],l=a[5],p=a[6],m=a[7],n=a[8],v=a[9],h=a[10],u=a[11],c[0]=f,c[1]=d,c[2]=e,c[3]=g,c[4]=k,c[5]=l,c[6]=p,c[7]=m,c[8]=n,c[9]=v,c[10]=h,c[11]=u,c[12]=f*q+k*x+n*b+a[12],c[13]=d*q+l*x+v*b+a[13],
c[14]=e*q+p*x+h*b+a[14],c[15]=g*q+m*x+u*b+a[15],c):(a[12]=a[0]*q+a[4]*x+a[8]*b+a[12],a[13]=a[1]*q+a[5]*x+a[9]*b+a[13],a[14]=a[2]*q+a[6]*x+a[10]*b+a[14],a[15]=a[3]*q+a[7]*x+a[11]*b+a[15],a)},scale:function(a,b,c){var f=b[0],d=b[1];b=b[2];return c&&a!==c?(c[0]=a[0]*f,c[1]=a[1]*f,c[2]=a[2]*f,c[3]=a[3]*f,c[4]=a[4]*d,c[5]=a[5]*d,c[6]=a[6]*d,c[7]=a[7]*d,c[8]=a[8]*b,c[9]=a[9]*b,c[10]=a[10]*b,c[11]=a[11]*b,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c):(a[0]*=f,a[1]*=f,a[2]*=f,a[3]*=f,a[4]*=d,a[5]*=d,
a[6]*=d,a[7]*=d,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a)},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,d){var f,e,g,k,l,p,m,n,v,h,u,q,x,t,r,z,w,y,aa,R,T,ba,U,ea,Z=c[0],fa=c[1];c=c[2];var ja=Math.sqrt(Z*Z+fa*fa+c*c);return ja?(1!==ja&&(ja=1/ja,Z*=ja,fa*=ja,c*=ja),f=Math.sin(b),e=Math.cos(b),g=1-e,k=a[0],l=a[1],p=a[2],m=a[3],n=a[4],v=a[5],h=a[6],u=a[7],q=
a[8],x=a[9],t=a[10],r=a[11],z=Z*Z*g+e,w=fa*Z*g+c*f,y=c*Z*g-fa*f,aa=Z*fa*g-c*f,R=fa*fa*g+e,T=c*fa*g+Z*f,ba=Z*c*g+fa*f,U=fa*c*g-Z*f,ea=c*c*g+e,d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a,d[0]=k*z+n*w+q*y,d[1]=l*z+v*w+x*y,d[2]=p*z+h*w+t*y,d[3]=m*z+u*w+r*y,d[4]=k*aa+n*R+q*T,d[5]=l*aa+v*R+x*T,d[6]=p*aa+h*R+t*T,d[7]=m*aa+u*R+r*T,d[8]=k*ba+n*U+q*ea,d[9]=l*ba+v*U+x*ea,d[10]=p*ba+h*U+t*ea,d[11]=m*ba+u*U+r*ea,d):null},rotateX:function(a,b,c){var f=Math.sin(b);b=Math.cos(b);var d=a[4],e=a[5],
g=a[6],k=a[7],l=a[8],p=a[9],m=a[10],n=a[11];return c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[4]=d*b+l*f,c[5]=e*b+p*f,c[6]=g*b+m*f,c[7]=k*b+n*f,c[8]=d*-f+l*b,c[9]=e*-f+p*b,c[10]=g*-f+m*b,c[11]=k*-f+n*b,c},rotateY:function(a,b,c){var f=Math.sin(b);b=Math.cos(b);var d=a[0],e=a[1],g=a[2],k=a[3],l=a[8],p=a[9],m=a[10],n=a[11];return c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=d*
b+l*-f,c[1]=e*b+p*-f,c[2]=g*b+m*-f,c[3]=k*b+n*-f,c[8]=d*f+l*b,c[9]=e*f+p*b,c[10]=g*f+m*b,c[11]=k*f+n*b,c},rotateZ:function(a,b,c){var f=Math.sin(b);b=Math.cos(b);var d=a[0],e=a[1],g=a[2],k=a[3],l=a[4],p=a[5],m=a[6],n=a[7];return c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=d*b+l*f,c[1]=e*b+p*f,c[2]=g*b+m*f,c[3]=k*b+n*f,c[4]=d*-f+l*b,c[5]=e*-f+p*b,c[6]=g*-f+m*b,c[7]=k*-f+n*b,c},frustum:function(a,b,c,d,e,g,k){k||(k=w.create());var f=
b-a,l=d-c,p=g-e;return k[0]=2*e/f,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=2*e/l,k[6]=0,k[7]=0,k[8]=(b+a)/f,k[9]=(d+c)/l,k[10]=-(g+e)/p,k[11]=-1,k[12]=0,k[13]=0,k[14]=-(g*e*2)/p,k[15]=0,k},perspective:function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b*=a;return w.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,g,k){k||(k=w.create());var f=b-a,l=d-c,p=g-e;return k[0]=2/f,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=2/l,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=-2/p,k[11]=0,k[12]=-(a+b)/f,k[13]=-(d+c)/l,k[14]=-(g+e)/p,k[15]=
1,k},lookAt:function(a,b,c,d){d||(d=w.create());var f,e,g,k,l,p,m,n,v,h,u=a[0],q=a[1];a=a[2];var x=c[0],t=c[1];c=c[2];var r=b[0],z=b[1];b=b[2];return u===r&&q===z&&a===b?w.identity(d):(m=u-r,n=q-z,v=a-b,h=1/Math.sqrt(m*m+n*n+v*v),m*=h,n*=h,v*=h,f=t*v-c*n,e=c*m-x*v,g=x*n-t*m,h=Math.sqrt(f*f+e*e+g*g),h?(h=1/h,f*=h,e*=h,g*=h):(f=0,e=0,g=0),k=n*g-v*e,l=v*f-m*g,p=m*e-n*f,h=Math.sqrt(k*k+l*l+p*p),h?(h=1/h,k*=h,l*=h,p*=h):(k=0,l=0,p=0),d[0]=f,d[1]=k,d[2]=m,d[3]=0,d[4]=e,d[5]=l,d[6]=n,d[7]=0,d[8]=g,d[9]=
p,d[10]=v,d[11]=0,d[12]=-(f*u+e*q+g*a),d[13]=-(k*u+l*q+p*a),d[14]=-(m*u+n*q+v*a),d[15]=1,d)},fromRotationTranslation:function(a,b,c){c||(c=w.create());var f=a[0],d=a[1],e=a[2],g=a[3],k=f+f,l=d+d,p=e+e;a=f*k;var m=f*l,f=f*p,n=d*l,d=d*p,e=e*p,k=g*k,l=g*l,g=g*p;return c[0]=1-(n+e),c[1]=m+g,c[2]=f-l,c[3]=0,c[4]=m-g,c[5]=1-(a+e),c[6]=d+k,c[7]=0,c[8]=f+l,c[9]=d-k,c[10]=1-(a+n),c[11]=0,c[12]=b[0],c[13]=b[1],c[14]=b[2],c[15]=1,c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+
a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},q={create:function(a){var f=new b(4);return a?(f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3]):f[0]=f[1]=f[2]=f[3]=0,f},createFrom:function(a,c,d,e){var f=new b(4);return f[0]=a,f[1]=c,f[2]=d,f[3]=e,f},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},identity:function(a){return a||(a=q.create()),a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}},v=q.identity();q.calculateW=function(a,b){var f=
a[0],c=a[1],d=a[2];return b&&a!==b?(b[0]=f,b[1]=c,b[2]=d,b[3]=-Math.sqrt(Math.abs(1-f*f-c*c-d*d)),b):(a[3]=-Math.sqrt(Math.abs(1-f*f-c*c-d*d)),a)};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};q.inverse=function(a,b){var f=a[0],c=a[1],d=a[2],e=a[3],f=(f=f*f+c*c+d*d+e*e)?1/f:0;return b&&a!==b?(b[0]=-a[0]*f,b[1]=-a[1]*f,b[2]=-a[2]*f,b[3]=a[3]*f,b):(a[0]*=-f,a[1]*=-f,a[2]*=-f,a[3]*=f,a)};q.conjugate=function(a,b){return b&&a!==b?(b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b):(a[0]*=
-1,a[1]*=-1,a[2]*=-1,a)};q.length=function(a){var b=a[0],f=a[1],c=a[2];a=a[3];return Math.sqrt(b*b+f*f+c*c+a*a)};q.normalize=function(a,b){b||(b=a);var f=a[0],c=a[1],d=a[2];a=a[3];var e=Math.sqrt(f*f+c*c+d*d+a*a);return 0===e?(b[0]=0,b[1]=0,b[2]=0,b[3]=0,b):(e=1/e,b[0]=f*e,b[1]=c*e,b[2]=d*e,b[3]=a*e,b)};q.add=function(a,b,c){return c&&a!==c?(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c):(a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a)};q.multiply=function(a,b,c){c||(c=a);var f=a[0],
d=a[1],e=a[2];a=a[3];var g=b[0],k=b[1],l=b[2];b=b[3];return c[0]=f*b+a*g+d*l-e*k,c[1]=d*b+a*k+e*g-f*l,c[2]=e*b+a*l+f*k-d*g,c[3]=a*b-f*g-d*k-e*l,c};q.multiplyVec3=function(a,b,c){c||(c=b);var f=b[0],d=b[1],e=b[2];b=a[0];var g=a[1],k=a[2];a=a[3];var l=a*f+g*e-k*d,p=a*d+k*f-b*e,m=a*e+b*d-g*f,f=-b*f-g*d-k*e;return c[0]=l*a+f*-b+p*-k-m*-g,c[1]=p*a+f*-g+m*-b-l*-k,c[2]=m*a+f*-k+l*-g-p*-b,c};q.scale=function(a,b,c){return c&&a!==c?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c):(a[0]*=b,a[1]*=b,a[2]*=
b,a[3]*=b,a)};q.toMat3=function(a,b){b||(b=t.create());var f=a[0],c=a[1],d=a[2],e=a[3],g=f+f,k=c+c,l=d+d;a=f*g;var p=f*k,f=f*l,m=c*k,c=c*l,d=d*l,g=e*g,k=e*k,e=e*l;return b[0]=1-(m+d),b[1]=p+e,b[2]=f-k,b[3]=p-e,b[4]=1-(a+d),b[5]=c+g,b[6]=f+k,b[7]=c-g,b[8]=1-(a+m),b};q.toMat4=function(a,b){b||(b=w.create());var f=a[0],c=a[1],d=a[2],e=a[3],g=f+f,k=c+c,l=d+d;a=f*g;var p=f*k,f=f*l,m=c*k,c=c*l,d=d*l,g=e*g,k=e*k,e=e*l;return b[0]=1-(m+d),b[1]=p+e,b[2]=f-k,b[3]=0,b[4]=p-e,b[5]=1-(a+d),b[6]=c+g,b[7]=0,b[8]=
f+k,b[9]=c-g,b[10]=1-(a+m),b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};q.slerp=function(a,b,c,d){d||(d=a);var f,e,g,k,l=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];return 1<=Math.abs(l)?(d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d):(f=Math.acos(l),e=Math.sqrt(1-l*l),.001>Math.abs(e)?(d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d):(g=Math.sin((1-c)*f)/e,k=Math.sin(c*f)/e,d[0]=a[0]*g+b[0]*k,d[1]=a[1]*g+b[1]*k,d[2]=a[2]*g+b[2]*k,d[3]=a[3]*g+b[3]*k,d))};q.fromRotationMatrix=
function(a,b){b||(b=q.create());var f,c=a[0]+a[4]+a[8];if(0<c)f=Math.sqrt(c+1),b[3]=.5*f,f=.5/f,b[0]=(a[7]-a[5])*f,b[1]=(a[2]-a[6])*f,b[2]=(a[3]-a[1])*f;else{f=q.fromRotationMatrix.s_iNext=q.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var d=f[c],e=f[d];f=Math.sqrt(a[3*c+c]-a[3*d+d]-a[3*e+e]+1);b[c]=.5*f;f=.5/f;b[3]=(a[3*e+d]-a[3*d+e])*f;b[d]=(a[3*d+c]+a[3*c+d])*f;b[e]=(a[3*e+c]+a[3*c+e])*f}return b};t.toQuat4=q.fromRotationMatrix;(function(){var a=t.create();q.fromAxes=
function(b,f,c,d){return a[0]=f[0],a[3]=f[1],a[6]=f[2],a[1]=c[0],a[4]=c[1],a[7]=c[2],a[2]=b[0],a[5]=b[1],a[8]=b[2],q.fromRotationMatrix(a,d)}})();q.identity=function(a){return a||(a=q.create()),a[0]=0,a[1]=0,a[2]=0,a[3]=1,a};q.fromAngleAxis=function(a,b,c){c||(c=q.create());a*=.5;var f=Math.sin(a);return c[3]=Math.cos(a),c[0]=f*b[0],c[1]=f*b[1],c[2]=f*b[2],c};q.toAngleAxis=function(b,c){c||(c=b);var f=b[0]*b[0]+b[1]*b[1]+b[2]*b[2];0<f?(c[3]=2*Math.acos(b[3]),f=a.invsqrt(f),c[0]=b[0]*f,c[1]=b[1]*f,
c[2]=b[2]*f):(c[3]=0,c[0]=1,c[1]=0,c[2]=0);return c};q.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var x={create:function(a){var c=new b(4);return a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]):c[0]=c[1]=c[2]=c[3]=0,c},createFrom:function(a,c,d,e){var f=new b(4);return f[0]=a,f[1]=c,f[2]=d,f[3]=e,f},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},identity:function(a){return a||(a=x.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},transpose:function(a,b){return b&&a!==
b?(b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3],b):(b=a[1],a[1]=a[2],a[2]=b,a)},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],f=a[1],d=a[2];a=a[3];var e=c*a-d*f;return e?(e=1/e,b[0]=a*e,b[1]=-f*e,b[2]=-d*e,b[3]=c*e,b):null},multiply:function(a,b,c){c||(c=a);var f=a[0],d=a[1],e=a[2];a=a[3];return c[0]=f*b[0]+d*b[2],c[1]=f*b[1]+d*b[3],c[2]=e*b[0]+a*b[2],c[3]=e*b[1]+a*b[3],c},rotate:function(a,b,c){c||(c=a);var f=a[0],d=a[1],e=a[2];a=a[3];var g=Math.sin(b);
b=Math.cos(b);return c[0]=f*b+d*g,c[1]=f*-g+d*b,c[2]=e*b+a*g,c[3]=e*-g+a*b,c},multiplyVec2:function(a,b,c){c||(c=b);var f=b[0];b=b[1];return c[0]=f*a[0]+b*a[1],c[1]=f*a[2]+b*a[3],c},scale:function(a,b,c){c||(c=a);var f=a[1],d=a[2],e=a[3],g=b[0];b=b[1];return c[0]=a[0]*g,c[1]=f*b,c[2]=d*g,c[3]=e*b,c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};d=d?"":"d";e["glMath"+d]=a;e["vec2"+d]={create:function(a){var c=new b(2);return a?(c[0]=a[0],c[1]=a[1]):(c[0]=0,c[1]=0),c},createFrom:function(a,
c){var f=new b(2);return f[0]=a,f[1]=c,f},add:function(a,b,c){return c||(c=b),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c},subtract:function(a,b,c){return c||(c=b),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c},multiply:function(a,b,c){return c||(c=b),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c},divide:function(a,b,c){return c||(c=b),c[0]=a[0]/b[0],c[1]=a[1]/b[1],c},scale:function(a,b,c){return c||(c=a),c[0]=a[0]*b,c[1]=a[1]*b,c},dist:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-
a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){return b[0]=a[0],b[1]=a[1],b},set2:function(a,b,c){return c[0]=a,c[1]=b,c},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];return 0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0,b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];return c?(c[0]=c[1]=0,c[2]=a,c):a},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},
direction:function(a,b,c){c||(c=a);var f=a[0]-b[0];a=a[1]-b[1];return(b=f*f+a*a)?(b=1/Math.sqrt(b),c[0]=f*b,c[1]=a*b,c):(c[0]=0,c[1]=0,c[2]=0,c)},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};e["vec3"+d]=c;e["vec4"+d]={create:function(a){var c=new b(4);return a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]):(c[0]=0,c[1]=0,c[2]=0,c[3]=0),c},createFrom:function(a,c,d,e){var f=new b(4);return f[0]=a,f[1]=c,f[2]=d,f[3]=
e,f},add:function(a,b,c){return c||(c=b),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c},subtract:function(a,b,c){return c||(c=b),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],c},multiply:function(a,b,c){return c||(c=b),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c[2]=a[2]*b[2],c[3]=a[3]*b[3],c},divide:function(a,b,c){return c||(c=b),c[0]=a[0]/b[0],c[1]=a[1]/b[1],c[2]=a[2]/b[2],c[3]=a[3]/b[3],c},scale:function(a,b,c){return c||(c=a),c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c},
dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},set4:function(a,b,c,d,e){return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d[3]=a[3]+c*(b[3]-a[3]),d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};e["mat2"+d]=x;e["mat3"+
d]=t;e["mat4"+d]=w;e["quat4"+d]=q}),e})},"esri/geometry/support/jsonUtils":function(){define(["../Point","../Polyline","../Polygon","../Multipoint","../Extent"],function(e,h,d,a,b){function c(c){return c&&c?void 0!==c.x&&void 0!==c.y?e.fromJSON(c):void 0!==c.paths?h.fromJSON(c):void 0!==c.rings?d.fromJSON(c):void 0!==c.points?a.fromJSON(c):void 0!==c.xmin&&void 0!==c.ymin&&void 0!==c.xmax&&void 0!==c.ymax?b.fromJSON(c):null:null}var m={esriGeometryPoint:e,esriGeometryPolyline:h,esriGeometryPolygon:d,
esriGeometryEnvelope:b,esriGeometryMultipoint:a};return{fromJSON:c,fromJson:function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(l){console.warn(l.stack)}return c(a)},getJsonType:function(c){return c instanceof e?"esriGeometryPoint":c instanceof h?"esriGeometryPolyline":c instanceof d?"esriGeometryPolygon":c instanceof b?"esriGeometryEnvelope":c instanceof a?"esriGeometryMultipoint":null},getGeometryType:function(a){return a&&m[a]||null}}})},"esri/geometry/Polyline":function(){define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/zmUtils".split(" "),
function(e,h,d,a,b,c,m){var k=a.createSubclass({declaredClass:"esri.geometry.Polyline",type:"polyline",getDefaults:function(a){return{paths:[]}},normalizeCtorArgs:function(a,b){var c,e,g=null,k=null;return a&&!Array.isArray(a)?(g=a.paths?a.paths:null,b||(a.spatialReference?b=a.spatialReference:a.paths||(b=a)),c=a.hasZ,e=a.hasM):g=a,g=g||[],b=b||d.WGS84,g.length&&g[0]&&null!=g[0][0]&&"number"==typeof g[0][0]&&(g=[g]),k=g[0]&&g[0][0],k&&(void 0===c&&void 0===e?(c=2<k.length,e=!1):void 0===c?c=!e&&3<
k.length:void 0===e&&(e=!c&&3<k.length)),{paths:g,spatialReference:b,hasZ:c,hasM:e}},_path:0,properties:{cache:{dependsOn:["hasM","hasZ","paths"]},extent:{dependsOn:["cache"],readOnly:!0,get:function(){function a(a){return function(b,c){return void 0===b?c:void 0===c?b:a(b,c)}}var b=this.paths,d=b.length;if(!d||!b[0].length)return null;var e,k,m,h,q,v,x,f,p,z,y,A,B,D,F,C,E,G,K,L,H,I,N,S=x=b[0][0][0],M=f=b[0][0][1],ca=a(Math.min),O=a(Math.max),P=this.spatialReference,W=[],aa=this.hasZ,R=this.hasM,
T=aa?3:2;for(y=0;d>y;y++){e=b[y];C=E=e[0]&&e[0][0];G=K=e[0]&&e[0][1];B=e.length;I=N=L=H=void 0;for(A=0;B>A;A++)k=e[A],m=k[0],h=k[1],S=ca(S,m),M=ca(M,h),x=O(x,m),f=O(f,h),C=ca(C,m),G=ca(G,h),E=O(E,m),K=O(K,h),aa&&2<k.length&&(q=k[2],D=ca(D,q),p=O(p,q),L=ca(L,q),H=O(H,q)),R&&k.length>T&&(v=k[T],F=ca(F,q),z=O(z,q),I=ca(I,v),N=O(N,v));W.push(new c({xmin:C,ymin:G,zmin:L,mmin:I,xmax:E,ymax:K,zmax:H,mmax:N,spatialReference:P?P.clone():null}))}b=new c({xmin:S,ymin:M,xmax:x,ymax:f,spatialReference:P?P.toJSON():
null});return aa&&(b.zmin=D,b.zmax=p),R&&(b.mmin=F,b.mmax=z),b.cache._partwise=1<W.length?W:null,b}},paths:null},addPath:function(a){return this.clearCache(),this._path=this.paths.length,this.paths[this._path]=[],a.forEach(this._addPoint,this),this},clone:function(){var a=new k;return a.spatialReference=this.spatialReference,a.paths=e.clone(this.paths),a.hasZ=this.hasZ,a.hasM=this.hasM,a},getPoint:function(a,c){if(this._validateInputs(a,c)){a=this.paths[a][c];c=this.hasZ;var d=this.hasM;return c&&
d?new b(a[0],a[1],a[2],a[3],this.spatialReference):c?new b(a[0],a[1],a[2],void 0,this.spatialReference):d?new b(a[0],a[1],void 0,a[2],this.spatialReference):new b(a[0],a[1],this.spatialReference)}},insertPoint:function(a,b,c){return this._validateInputs(a)&&h.isDefined(b)&&0<=b&&b<=this.paths[a].length?(this.clearCache(),m.updateSupportFromPoint(this,c),Array.isArray(c)||(c=c.toArray()),this.paths[a].splice(b,0,c),this):void 0},removePath:function(a){if(this._validateInputs(a,null)){this.clearCache();
var c=this.paths.splice(a,1)[0],d=c.length,e=this.spatialReference;for(a=0;d>a;a++)c[a]=new b(c[a],e);return c}},removePoint:function(a,c){return this._validateInputs(a,c)?(this.clearCache(),new b(this.paths[a].splice(c,1)[0],this.spatialReference)):void 0},setPoint:function(a,b,c){return this._validateInputs(a,b)?(this.clearCache(),m.updateSupportFromPoint(this,c),Array.isArray(c)||(c=c.toArray()),this.paths[a][b]=c,this):void 0},toJSON:function(){var a=this.spatialReference,a={paths:this.paths,
spatialReference:a&&a.toJSON()};return this.hasZ&&(a.hasZ=!0),this.hasM&&(a.hasM=!0),a},_initPathPointsToArray:function(a){for(var b=0;b<a.paths.length;b++)a.paths[b]=a.paths[b].map(function(b){return m.updateSupportFromPoint(a,b,!0),Array.isArray(b)||(a.spatialReference||(a.spatialReference=b.spatialReference),b=b.toArray()),b});return a},_addPoint:function(a){Array.isArray(a)?this.paths[this._path].push(a):this.paths[this._path].push(a.toArray());m.updateSupportFromPoint(this,a)},_insertPoints:function(a,
b){this.clearCache();this._path=b;this.paths[this._path]||(this.paths[this._path]=[]);a.forEach(this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.paths.length)?!1:null!==b&&void 0!==a&&(0>b||b>=this.paths[a].length)?!1:!0}});return k})},"esri/geometry/support/zmUtils":function(){define([],function(){return{updateSupportFromPoint:function(e,h,d){var a=e.hasZ,b=e.hasM;Array.isArray(h)?4!==h.length||b||a?3===h.length&&d&&!b?(a=!0,b=!1):3===h.length&&b&&a&&
(b=!1,a=!1):(b=!0,a=!0):(a=!a&&h.hasZ&&(!b||h.hasM),b=!b&&h.hasM&&(!a||h.hasZ));e.hasZ=a;e.hasM=b}}})},"esri/geometry/Polygon":function(){define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/coordsUtils ./support/mathUtils ./support/webMercatorUtils ./support/zmUtils".split(" "),function(e,h,d,a,b,c,m,k,l,g){var n=function(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}},u=n(Math.min),r=n(Math.max),t=a.createSubclass({declaredClass:"esri.geometry.Polygon",
type:"polygon",getDefaults:function(a){return{rings:[]}},normalizeCtorArgs:function(a,b){var c,e,f=null,g=null;return a&&!Array.isArray(a)?(f=a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),c=a.hasZ,e=a.hasM):f=a,f=f||[],b=b||d.WGS84,f.length&&f[0]&&null!=f[0][0]&&"number"==typeof f[0][0]&&(f=[f]),g=f[0]&&f[0][0],g&&(void 0===c&&void 0===e?(c=2<g.length,e=!1):void 0===c?c=!e&&3<g.length:void 0===e&&(e=!c&&3<g.length)),{rings:f,spatialReference:b,hasZ:c,hasM:e}},_ring:0,
properties:{cache:{dependsOn:["hasM","hasZ","rings"]},centroid:{readOnly:!0,dependsOn:["cache"],get:function(a){var c=m.centroid([],this.rings,this.hasZ);return isNaN(c[0])||isNaN(c[1])||this.hasZ&&isNaN(c[2])?null:(a=a||new b,a.x=c[0],a.y=c[1],a.spatialReference=this.spatialReference,this.hasZ&&(a.z=c[2]),a)}},extent:{dependsOn:["cache"],readOnly:!0,get:function(){var a=this.rings,b=a.length;if(!b||!a[0].length)return null;var d,e,f,g,k,l,m,n,h,t,C,E,G,K,L,H,I,N,S,M,ca,O,P,W=m=a[0][0][0],aa=n=a[0][0][1],
R=this.spatialReference,T=[],ba=this.hasZ,U=this.hasM,ea=ba?3:2;for(C=0;b>C;C++){d=a[C];H=I=d[0]&&d[0][0];N=S=d[0]&&d[0][1];G=d.length;O=P=M=ca=void 0;for(E=0;G>E;E++)e=d[E],f=e[0],g=e[1],W=u(W,f),aa=u(aa,g),m=r(m,f),n=r(n,g),H=u(H,f),N=u(N,g),I=r(I,f),S=r(S,g),ba&&2<e.length&&(k=e[2],K=u(K,k),h=r(h,k),M=u(M,k),ca=r(ca,k)),U&&e.length>ea&&(l=e[ea],L=u(K,l),t=r(h,l),O=u(M,l),P=r(ca,l));T.push(new c({xmin:H,ymin:N,zmin:M,mmin:O,xmax:I,ymax:S,zmax:ca,mmax:P,spatialReference:R}))}a=new c;return a.xmin=
W,a.ymin=aa,a.xmax=m,a.ymax=n,a.spatialReference=R,ba&&(a.zmin=K,a.zmax=h),U&&(a.mmin=L,a.mmax=t),a.cache._partwise=1<T.length?T:null,a}},isSelfIntersecting:{dependsOn:["cache"],readOnly:!0,get:function(){var a,b,c,d,f,e,g,l,m,n=this.rings,h=n.length;for(d=0;h>d;d++){a=n[d];for(b=0;b<a.length-1;b++)for(e=[[a[b][0],a[b][1]],[a[b+1][0],a[b+1][1]]],c=d+1;h>c;c++)for(f=0;f<n[c].length-1;f++)if(g=[[n[c][f][0],n[c][f][1]],[n[c][f+1][0],n[c][f+1][1]]],l=k._getLineIntersection2(e,g),l&&!(l[0]===e[0][0]&&
l[1]===e[0][1]||l[0]===g[0][0]&&l[1]===g[0][1]||l[0]===e[1][0]&&l[1]===e[1][1]||l[0]===g[1][0]&&l[1]===g[1][1]))return!0;if(m=a.length,!(4>=m))for(b=0;m-3>b;b++)for(f=m-1,0===b&&(f=m-2),e=[[a[b][0],a[b][1]],[a[b+1][0],a[b+1][1]]],c=b+2;f>c;c++)if(g=[[a[c][0],a[c][1]],[a[c+1][0],a[c+1][1]]],l=k._getLineIntersection2(e,g),l&&!(l[0]===e[0][0]&&l[1]===e[0][1]||l[0]===g[0][0]&&l[1]===g[0][1]||l[0]===e[1][0]&&l[1]===e[1][1]||l[0]===g[1][0]&&l[1]===g[1][1]))return!0}return!1}},rings:null},addRing:function(a){if(a){this.clearCache();
var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{var d=[];b[c]=d;b=0;for(c=a.length;c>b;b++)d[b]=a[b].toArray()}return this}},clone:function(){var a=new t;return a.spatialReference=this.spatialReference,a.rings=e.clone(this.rings),a.hasZ=this.hasZ,a.hasM=this.hasM,a},contains:function(a){return a?(l.canProject(a,this.spatialReference)&&(a=l.project(a,this.spatialReference)),m.contains(this.rings,m.fromGeom(a))):!1},isClockwise:function(a){var b,c,d,f,e=0,g=0,k=0,l=a.length,
m=this.hasZ,n=this.hasM;for(b=0;l>b;b++)c=a[b],d=a[(b+1)%l],Array.isArray(c)?(e+=c[0]*d[1]-d[0]*c[1],f=2,2<c.length&&2<d.length&&m&&(g+=c[0]*d[2]-d[0]*c[2],f=3),c.length>f&&d.length>f&&n&&(k+=c[0]*d[f]-d[0]*c[f])):(e+=c.x*d.y-d.x*c.y,c.hasZ&&d.hasZ&&(g+=c.x*d.z-d.x*c.z),c.hasM&&d.hasM&&(k+=c.x*d.m-d.x*c.m));return 0>=e&&0>=g&&0>=k},getPoint:function(a,c){if(this._validateInputs(a,c)){a=this.rings[a][c];c=this.hasZ;var d=this.hasM;return c&&!d?new b(a[0],a[1],a[2],void 0,this.spatialReference):d&&
!c?new b(a[0],a[1],void 0,a[2],this.spatialReference):c&&d?new b(a[0],a[1],a[2],a[3],this.spatialReference):new b(a[0],a[1],this.spatialReference)}},insertPoint:function(a,b,c){return this._validateInputs(a)&&h.isDefined(b)&&0<=b&&b<=this.rings[a].length?(this.clearCache(),g.updateSupportFromPoint(this,c),Array.isArray(c)||(c=c.toArray()),this.rings[a].splice(b,0,c),this):void 0},removePoint:function(a,c){return this._validateInputs(a,c)?(this.clearCache(),new b(this.rings[a].splice(c,1)[0],this.spatialReference)):
void 0},removeRing:function(a){if(this._validateInputs(a,null)){this.clearCache();var c=this.rings.splice(a,1)[0],d=c.length,e=this.spatialReference;for(a=0;d>a;a++)c[a]=new b(c[a],e);return c}},setPoint:function(a,b,c){return this._validateInputs(a,b)?(this.clearCache(),g.updateSupportFromPoint(this,c),Array.isArray(c)||(c=c.toArray()),this.rings[a][b]=c,this):void 0},toJSON:function(){var a=this.spatialReference,a={rings:this.rings,spatialReference:a&&a.toJSON()};return this.hasZ&&(a.hasZ=!0),this.hasM&&
(a.hasM=!0),a},_insertPoints:function(a,b){this.clearCache();this._ring=b;this.rings[this._ring]||(this.rings[this._ring]=[]);a.forEach(this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.rings.length)?!1:null!==b&&void 0!==a&&(0>b||b>=this.rings[a].length)?!1:!0}});return t.createEllipse=function(a){var b,c,d=a.center.x,f=a.center.y,e=a.center.z,g=a.center.m,k=a.longAxis,l=a.shortAxis,m=a.numberOfPoints,n=a.map,h=[],u=2*Math.PI/m;for(a=0;m>a;a++)b=Math.cos(a*
u),c=Math.sin(a*u),b=n.toMap({x:k*b+d,y:l*c+f}),null==e||b.hasZ||(b.z=e),null==g||b.hasM||(b.m=g),h.push(b);return h.push(h[0]),new t({rings:[h],spatialReference:n.spatialReference})},t.createCircle=function(a){return t.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,map:a.map})},t.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,d=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(d=!0)});b={rings:b.map(function(a){var b=[[a.xmin,
a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var f=(a.zmax-a.zmin)/2,e=0;e<b.length;e++)b[e].push(f);if(d&&a.hasM)for(a=(a.mmax-a.mmin)/2,e=0;e<b.length;e++)b[e].push(a);return b}),spatialReference:a?a.toJSON():null};return c&&(b.hasZ=!0),d&&(b.hasM=!0),new t(b)},t})},"esri/geometry/support/coordsUtils":function(){define([],function(){var e=function(a,b,c){for(var d,e,l,g=c[0],n=c[1],h=0,r=0,t=b.length;t>r;r++)h++,h===t&&(h=0),c=b[r][0],d=b[h][0],e=b[r][1],
l=b[h][1],(n>e&&l>=n||n>l&&e>=n)&&g>c+(n-e)/(l-e)*(d-c)&&(a=!a);return a},h=function(a,b,c){for(var d,e,l,g,n,h,r,t,w,q=0,v=0,x=0,f=0,p=0,z=0,y=b.length-1;y>z;z++)d=b[z],e=d[0],l=d[1],g=d[2],n=b[z+1],h=n[0],r=n[1],t=n[2],w=e*r-h*l,f+=w,q+=(e+h)*w,v+=(l+r)*w,c&&2<d.length&&2<n.length&&(w=e*t-h*g,x+=(g+t)*w,p+=w);return 0<f&&(f*=-1),0<p&&(p*=-1),f?(a[0]=q,a[1]=v,a[2]=.5*f,c?(a[3]=x,a[4]=.5*p):a.length=3):a.length=0,a},d=function(a,b){for(var c,d,e,l=0,g=0,n=0,h=0,r=b?[0,0,0]:[0,0],t=b?[0,0,0]:[0,0],
w=0,q=a.length;q-1>w;w++)if(c=a[w],d=a[w+1],c&&d){r[0]=c[0];r[0]=c[1];t[0]=d[0];t[0]=d[1];b&&2<c.length&&2<d.length&&(r[2]=c[2],t[2]=d[2]);e=t[0]-r[0];var v=t[1]-r[1],x=0;if(e=(1<r.length&&1<t.length&&(x=r[2]-t[2]),Math.sqrt(e*e+v*v+x*x)))l+=e,x=c[0]+.5*(d[0]-c[0]),v=c[1]+.5*(d[1]-c[1]),c=2<c.length&&2<d.length?[x,v,c[2]+.5*(d[2]-c[2])]:[x,v],g+=e*c[0],n+=e*c[1],b&&2<c.length&&(h+=e*c[2])}return 0<l?b?[g/l,n/l,h/l]:[g/l,n/l]:a.length?a[0]:null};return{fromGeom:function(a){if(!a)return null;if(Array.isArray(a))return a;
var b=a.hasZ,c=a.hasM;return"point"===a.type?c&&b?[a.x,a.y,a.z,a.m]:b?[a.x,a.y,a.z]:c?[a.x,a.y,a.m]:[a.x,a.y]:"polygon"===a.type?a.rings.slice(0):"polyline"===a.type?a.path.slice(0):"multipoint"===a.type?a.points.slice(0):"extent"===a.type?(a=a.clone().normalize())?(b=c=!1,a.map(function(a){a.hasZ&&(b=!0);a.hasM&&(c=!0)}),a.map(function(a){var d=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(b&&a.hasZ)for(var e=.5*(a.zmax-a.zmin),g=0;g<d.length;g++)d[g].push(e);
if(c&&a.hasM)for(a=.5*(a.mmax-a.mmin),g=0;g<d.length;g++)d[g].push(a);return d})):null:null},contains:function(a,b){if(!a)return!1;if(!Array.isArray(a[0][0]))return e(!1,a,b);for(var c=!1,d=0,k=a.length;k>d;d++)c=e(c,a[d],b);return c},centroid:function(a,b,c){for(var e,k=[],l=0,g=b.length;g>l;l++)e=h([],b[l],c),e.length&&k.push(e);(k.sort(function(a,b){var d=a[2]-b[2];return 0===d&&c&&(d=a[4]-b[4]),d}),c?a.length=3:a.length=2,k.length)?(b=6*k[0][2],a[0]=k[0][0]/b,a[1]=k[0][1]/b,c&&(b=6*k[0][4],0!==
b?a[2]=k[0][3]/b:a[2]=0)):(k=b[0]&&b[0].length?d(b[0]):null)&&(a[0]=k[0],a[1]=k[1],c&&2<k.length&&(a[2]=k[2]));return a},isClockwise:function(a){for(var b=0,c=0,d=c+1,e=a.length;e>c;c++,d+=1%e)b+=a[c][0]*a[d][1]-a[d][0]*a[c][1];return 0>=.5*b}}})},"esri/geometry/Multipoint":function(){define("dojo/_base/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/zmUtils".split(" "),function(e,h,d,a,b,c){var m=d.createSubclass({declaredClass:"esri.geometry.Multipoint",type:"multipoint",getDefaults:function(a){return{points:[]}},
normalizeCtorArgs:function(a,b){var c,d,e=null,k=null;return a&&!Array.isArray(a)?a.wkid?b=a:(e=a.points||null,b=a.spatialReference||null,c=a.hasZ,d=a.hasM):e=a,e=e||[],b=b||h.WGS84,k=e[0],k&&(void 0===c&&void 0===d?(c=2<k.length,d=!1):void 0===c?c=3<k.length:void 0===d&&(d=3<k.length)),{points:e,spatialReference:b,hasZ:c,hasM:d}},properties:{cache:{dependsOn:["points","hasZ","hasM"]},extent:{dependsOn:["cache"],get:function(a){function c(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}
if(!this.points.length)return null;var d,e,k,m,h,w,q,v,x,f,p,z=a||new b,y=this.points,A=this.hasZ,B=this.hasM,D=y[0],F=c(Math.min),C=c(Math.max),E=a=D[0],G=k=D[1],K=A?3:2;f=0;for(p=y.length;p>f;f++)D=y[f],w=D[0],q=D[1],E=F(E,w),G=F(G,q),a=C(a,w),k=C(k,q),A&&2<D.length&&(v=D[2],d=F(d,v),m=C(m,v)),B&&D.length>K&&(x=D[K],e=F(e,x),h=C(h,x));return z.xmin=E,z.ymin=G,z.xmax=a,z.ymax=k,z.spatialReference=this.spatialReference,A?(z.zmin=d,z.zmax=m):(z.zmin=null,z.zmax=null),B?(z.mmin=e,z.mmax=h):(z.mmin=
null,z.mmax=null),z}},points:null},addPoint:function(a){return this.clearCache(),c.updateSupportFromPoint(this,a),Array.isArray(a)?this.points.push(a):this.points.push(a.toArray()),this},clone:function(){var a={points:e.clone(this.points),spatialReference:this.spatialReference};return this.hasZ&&(a.hasZ=!0),this.hasM&&(a.hasM=!0),new m(a)},getPoint:function(b){if(this._validateInputs(b)){var c,d;b=this.points[b];var e=2;return this.hasZ&&(c=b[2],e=3),this.hasM&&(d=b[e]),new a({x:b[0],y:b[1],z:c,m:d,
spatialReference:this.spatialReference})}},removePoint:function(b){return this._validateInputs(b)?(this.clearCache(),new a(this.points.splice(b,1)[0],this.spatialReference)):void 0},setPoint:function(a,b){return this._validateInputs(a)?(this.clearCache(),c.updateSupportFromPoint(b),this.points[a]=b.toArray(),this):void 0},toJSON:function(){var a=this.spatialReference,a={points:e.clone(this.points),spatialReference:a&&a.toJSON()};return this.hasZ&&(a.hasZ=!0),this.hasM&&(a.hasM=!0),a},_pointsToArrays:function(a){for(var b=
0;b<a.points.length;b++){var d=a.points[b];c.updateSupportFromPoint(a,d,!0);Array.isArray(d)||(a.spatialReference||(a.spatialReference=d.spatialReference),a.points[b]=d.toArray())}return a},_validateInputs:function(a){return null!=a&&0<=a&&a<this.points.length}});return m})},"esri/geometry/ScreenPoint":function(){define(["./Point"],function(e){return e.createSubclass({declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}})})},"esri/views/View":function(){define("dojo/_base/lang ../Graphic ../core/Accessor ../core/Collection ../core/CollectionFlattener ../core/Evented ../core/HandleRegistry ../core/Promise ../core/watchUtils ../core/promiseUtils ../core/Scheduler ../geometry/Extent ../geometry/HeightModelInfo ../geometry/SpatialReference ./BreakpointsOwner ./LayerViewManager ./BasemapView ./GroundView ./support/DefaultsFromMap".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f){return d.createSubclass([k,c,w],{declaredClass:"esri.views.View",properties:{allLayerViews:{readOnly:!0},basemapView:{},animation:{},resizing:{},interacting:{},graphics:{type:a.ofType(h)},groundView:{},defaultsFromMap:f,heightModelInfo:{type:r,dependsOn:["defaultsFromMap.heightModelInfo"]},initialExtent:{readOnly:!0,type:u,dependsOn:["defaultsFromMap.extent"]},initialExtentRequired:{},layerViews:{type:a},map:{},ready:{readOnly:!0,dependsOn:"map spatialReference width height initialExtentRequired initialExtent defaultsFromMap.isSpatialReferenceDone heightModelInfo defaultsFromMap.isHeightModelInfoDone map.loaded".split(" ")},
size:{readOnly:!0,dependsOn:["width","height"],get:function(){return[this.width,this.height]}},spatialReference:{type:t,dependsOn:["defaultsFromMap.spatialReference"]},stationary:{dependsOn:["animation","interacting","resizing"]},type:{},updating:{},padding:{},width:{},height:{}},constructor:function(a){this._viewHandles=new m;this._viewHandles.add(this.watch("ready",function(a,b){a?this._currentSpatialReference=this.spatialReference:this._currentSpatialReference=null;this.notifyChange("spatialReference");
!a&&b&&this.layerViewManager.empty()}.bind(this)));this.allLayerViews=new b({root:this,rootCollectionNames:["basemapView.baseLayerViews","groundView.layerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(a){return a.layerViews}});this.defaultsFromMap=new f({view:this})},getDefaults:function(){return e.mixin(this.inherited(arguments),{layerViews:[],graphics:[],padding:{left:0,top:0,right:0,bottom:0}})},initialize:function(){var a=this.validate().then(function(){return this._isValid=
!0,this.notifyChange("ready"),l.whenOnce(this,"ready")}.bind(this));this.addResolvingPromise(a);this.basemapView=new v({view:this});this.groundView=new x({view:this});this.layerViewManager=new q({view:this});this._resetInitialViewPropertiesFromContent()},destroy:function(){this.destroyed||(this.basemapView.destroy(),this.groundView.destroy(),this.destroyLayerViews(),this.defaultsFromMap.destroy(),this.defaultsFromMap=null,this._viewHandles.destroy(),this.map=null)},destroyLayerViews:function(){this.layerViewManager.destroy()},
_viewHandles:null,_isValid:!1,_readyCycleForced:!1,_userSpatialReference:null,_currentSpatialReference:null,_userHeightModelInfo:null,animation:null,basemapView:null,groundView:null,graphics:null,_graphicsSetter:function(a){this._graphicsView&&(this._graphicsView.graphics=a);this._set("graphics",a)},heightModelInfo:null,_heightModelInfoGetter:function(){return this.getHeightModelInfoWithOverride()},_heightModelInfoSetter:function(a){this.setHeightModelInfoOverride(a)},interacting:!1,layerViews:null,
map:null,_mapSetter:function(a){var b=this._get("map");a!==b&&(a&&a.load&&a.load(),this._forceReadyCycle(),this._resetInitialViewPropertiesFromContent(),this._set("map",a))},padding:null,_readyGetter:function(){return!!(this._isValid&&!this._readyCycleForced&&this.map&&0!==this.width&&0!==this.height&&this.spatialReference&&(!this.map.load||this.map.loaded)&&(this._currentSpatialReference||!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isSpatialReferenceDone)&&
(this.heightModelInfo||this.defaultsFromMap&&this.defaultsFromMap.isHeightModelInfoDone)&&this.defaultsFromMap&&this.defaultsFromMap.isTileInfoDone&&this.isSpatialReferenceSupported(this.spatialReference))},spatialReference:null,_spatialReferenceGetter:function(){return this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null},_spatialReferenceSetter:function(a){this._userSpatialReference=a;this._set("spatialReference",a)},stationary:!0,_stationaryGetter:function(){return!this.animation&&
!this.interacting&&!this.resizing},type:null,updating:!1,initialExtentRequired:!0,initialExtent:null,_initialExtentGetter:function(){return this.defaultsFromMap&&this.defaultsFromMap.extent},whenLayerView:function(a){return this.layerViewManager.whenLayerView(a)},getDefaultSpatialReference:function(){return this.get("defaultsFromMap.spatialReference")},getDefaultHeightModelInfo:function(){return this.get("defaultsFromMap.heightModelInfo")},getHeightModelInfoWithOverride:function(){return this._userHeightModelInfo||
this.getDefaultHeightModelInfo()||null},setHeightModelInfoOverride:function(a){this._userHeightModelInfo=a;this.notifyChange("heightModelInfo")},validate:function(){return g.resolve()},isSpatialReferenceSupported:function(){return!0},isHeightModelInfoRequired:function(){return!1},isTileInfoRequired:function(){return!1},_resetInitialViewPropertiesFromContent:function(){if(this.defaultsFromMap){var a=this.defaultsFromMap.start.bind(this.defaultsFromMap);this.defaultsFromMap.reset();this._currentSpatialReference=
null;this.notifyChange("spatialReference");this._viewHandles.remove("defaultsFromMap");this._viewHandles.add([l.watch(this,"spatialReference",a),l.watch(this,"initialExtentRequired",a),n.schedule(a)],"defaultsFromMap")}},_forceReadyCycle:function(){this.ready&&(this._readyCycleForced=!0,l.whenFalseOnce(this,"ready",function(){this._readyCycleForced=!1;this.notifyChange("ready")}.bind(this)),this.notifyChange("ready"))}})})},"esri/Graphic":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/accessorSupport/decorators dojo/_base/lang ./core/lang ./core/JSONSupport ./PopupTemplate ./geometry/support/jsonUtils ./symbols/support/jsonUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){var u=0;e=r=function(a){function b(b,c,d,f){b=a.call(this,b,c,d,f)||this;return b.layer=null,b.popupTemplate=null,Object.defineProperty(b,"uid",{value:u++}),b}return d(b,a),b.prototype.normalizeCtorArgs=function(a,b,c,f){return a&&!a.declaredClass?a:{geometry:a,symbol:b,attributes:c,popupTemplate:f}},Object.defineProperty(b.prototype,"attributes",{set:function(a){var b=this._get("attributes");b!==a&&(this._set("attributes",a),this._notifyLayer("attributes",b,a))},enumerable:!0,
configurable:!0}),Object.defineProperty(b.prototype,"geometry",{set:function(a){var b=this._get("geometry");b!==a&&(this._set("geometry",a),this._notifyLayer("geometry",b,a))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"symbol",{set:function(a){var b=this._get("symbol");b!==a&&(this._set("symbol",a),this._notifyLayer("symbol",b,a))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"visible",{set:function(a){var b=this._get("visible");b!==a&&(this._set("visible",
a),this._notifyLayer("visible",b,a))},enumerable:!0,configurable:!0}),b.prototype.getAttribute=function(a){return this.attributes&&this.attributes[a]},b.prototype.setAttribute=function(a,b){if(this.attributes){var c=this.getAttribute(a);this.attributes[a]=b;this._notifyLayer("attributes",c,b,a)}else this.attributes=(c={},c[a]=b,c),this._notifyLayer("attributes",void 0,b,a)},b.prototype.getEffectivePopupTemplate=function(){return this.popupTemplate||this.layer&&this.layer.popupTemplate},b.prototype.toJSON=
function(){return{geometry:this.geometry&&this.geometry.toJSON(),symbol:this.symbol&&this.symbol.toJSON(),attributes:c.mixin({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}},b.prototype.clone=function(){return new r({attributes:m.clone(this.attributes),geometry:this.geometry&&this.geometry.clone()||null,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),symbol:this.symbol&&this.symbol.clone()||null,visible:this.visible})},b.prototype._notifyLayer=function(a,
b,c,f){this.layer&&(a={graphic:this,property:a,oldValue:b,newValue:c},f&&(a.attributeName=f),this.layer.graphicChanged(a))},b}(b.declared(k));a([b.property({value:null})],e.prototype,"attributes",null);a([b.property({value:null,json:{read:g.fromJSON}})],e.prototype,"geometry",null);a([b.property()],e.prototype,"layer",void 0);a([b.property({type:l})],e.prototype,"popupTemplate",void 0);a([b.property({value:null,json:{read:n.read}})],e.prototype,"symbol",null);a([b.property({value:!0,set:function(a){}})],
e.prototype,"visible",null);e=r=a([b.subclass("esri.Graphic")],e);var r;return e})},"esri/PopupTemplate":function(){define(["./core/JSONSupport","./core/kebabDictionary","./core/Collection","./core/lang","./support/Action"],function(e,h,d,a,b){var c=h({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),m=h({shortDate:"short-date",shortDateLE:"short-date-le",longDate:"long-date",dayShortMonthYear:"day-short-month-year",longMonthDayYear:"long-month-day-year",shortDateLongTime:"short-date-long-time",
shortDateLELongTime:"short-date-le-long-time",shortDateShortTime:"short-date-short-time",shortDateLEShortTime:"short-date-le-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLongTime24:"short-date-long-time-24",shortDateLELongTime24:"short-date-le-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year"}),k=h({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"}),
l=e.createSubclass({properties:{actions:{type:d.ofType(b)},content:{value:null,json:{read:{source:["description","popupElements","mediaInfos","showAttachments"]}}},expressionInfos:{value:null},fieldInfos:{value:null},overwriteActions:{value:!1},title:{value:""},relatedRecordsInfo:{value:null}},declaredClass:"esri.PopupTemplate",actions:null,content:"",expressionInfos:null,fieldInfos:null,_fieldInfosReader:function(a){return this._readFieldInfos(a)},overwriteActions:!1,title:"",relatedRecordsInfo:null,
_relatedRecordsInfoReader:function(b){return b?a.clone(b):b},_dateFormatKebabDict:m,clone:function(){var b=this.actions;return b&&(b=a.clone(b.toArray())),new l({actions:b||[],content:Array.isArray(this.content)?a.clone(this.content):this.content,fieldInfos:this.fieldInfos?a.clone(this.fieldInfos):null,overwriteActions:this.overwriteActions,relatedRecordsInfo:this.relatedRecordsInfo?a.clone(this.relatedRecordsInfo):null,title:this.title})},toJSON:function(){var b={showAttachments:!1,title:this.title};
this.expressionInfos&&(b.expressionInfos=a.clone(this.expressionInfos));this.fieldInfos&&(b.fieldInfos=this._writeFieldInfos(a.clone(this.fieldInfos)));this.relatedRecordsInfo&&(b.relatedRecordsInfo=a.clone(this.relatedRecordsInfo));var c=this.content;return"string"==typeof c?b.description=c:Array.isArray(c)&&(b.popupElements=a.clone(c),b.popupElements.forEach(function(c){return"attachments"!==c.type||b.showAttachments?"media"!==c.type||b.mediaInfos?"text"!==c.type||b.description?"fields"!==c.type||
b.fieldInfos||(c.fieldInfos&&(b.fieldInfos=this._writeFieldInfos(a.clone(c.fieldInfos))),delete c.fieldInfos):(c.text&&(b.description=c.text),delete c.text):(c.mediaInfos&&(b.mediaInfos=a.clone(c.mediaInfos),b.mediaInfos.forEach(function(a){a.type=k.toJSON(a.type)})),delete c.mediaInfos):b.showAttachments=!0,c}.bind(this))),b},_contentReader:function(a,b){a=b.description;var c=[],d=b.popupElements;return d&&d.length?c=d.map(function(a){return"text"!==a.type||a.text?"media"===a.type&&(a.mediaInfos||
b.mediaInfos)&&(a.mediaInfos||(a.mediaInfos=b.mediaInfos),a.mediaInfos=this._readMediaInfos(a.mediaInfos)):a.text=b.description,a}.bind(this)):(b.description?c.push({type:"text",text:b.description}):c.push({type:"fields"}),b.mediaInfos&&b.mediaInfos.length&&c.push({type:"media",mediaInfos:this._readMediaInfos(b.mediaInfos)}),b.showAttachments&&c.push({type:"attachments",displayType:"list"})),c.length&&(a=c),a},_readFieldInfos:function(a){return a&&a.forEach(function(a){var b=a.format&&a.format.dateFormat,
d=a.stringFieldOption;b&&(a.format.dateFormat=m.fromJSON(b));d&&(a.stringFieldOption=c.fromJSON(d))}),a},_writeFieldInfos:function(a){return a.forEach(function(a){var b=a.format&&a.format.dateFormat,d=a.stringFieldOption;b&&(a.format.dateFormat=m.toJSON(b));d&&(a.stringFieldOption=c.toJSON(d));a.format||delete a.format}),a},_readMediaInfos:function(a){return a.forEach(function(a){a.type=k.fromJSON(a.type)}),a}});return l})},"esri/support/Action":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Identifiable ../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m){e=k=function(a){function b(b){b=a.call(this)||this;return b.className="",b.temporary=!1,b.image="",b.id="",b.title="",b.visible=!0,b}return d(b,a),b.prototype.clone=function(){return new k({className:this.className,image:this.image,id:this.id,title:this.title,visible:this.visible})},b}(m.declared(b,c));a([m.property()],e.prototype,"className",void 0);a([m.property()],e.prototype,"temporary",void 0);a([m.property()],e.prototype,"image",void 0);a([m.property()],e.prototype,"id",
void 0);a([m.property()],e.prototype,"title",void 0);a([m.property()],e.prototype,"visible",void 0);e=k=a([m.subclass("esri.support.Action")],e);var k;return e})},"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../Symbol3D ../SimpleLineSymbol ../SimpleMarkerSymbol ../PictureMarkerSymbol ../PictureFillSymbol ../SimpleFillSymbol ../TextSymbol ../PointSymbol3D ../LineSymbol3D ../PolygonSymbol3D ../MeshSymbol3D ../LabelSymbol3D ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f){Object.defineProperty(h,"__esModule",{value:!0});var p={esriSMS:m,esriPMS:k,esriTS:n,esriSLS:c,esriSFS:g,esriPFS:l,PointSymbol3D:u,LineSymbol3D:r,PolygonSymbol3D:t,MeshSymbol3D:w,LabelSymbol3D:q,styleSymbolReference:v};h.read=function(b,c,f){return(c=b?p[b.type]||null:null)?(c=new c,c.read(b,f),c):(f&&f.messages&&b&&f.messages.push(new a("symbol:unsupported","Symbols of type '"+(b.type||"unknown")+"' are not supported",{definition:b,context:f})),null)};
h.write=function(a,c,e){if(!a)return null;if(!e||"web-scene"!==e.origin||a.isInstanceOf(b)||a.isInstanceOf(v))return a.write(c,e);var g=f.to3D(a);return g.symbol?g.symbol.write(c,e):(e.messages&&e.messages.push(new d("symbol:unsupported","Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:a,context:e,error:g.error})),null)};h.fromJSON=function(a,b){var c=a?p[a.type]||null:null;return c?c.fromJSON(a,b):null};
h.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new x}return c&&c.read(a,b),c}})},"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Logger ../core/collectionUtils ../core/Warning ../core/urlUtils ./Symbol ./Symbol3DLayer ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./LineSymbol3DLayer ./PathSymbol3DLayer ./FillSymbol3DLayer ./ExtrudeSymbol3DLayer ./TextSymbol3DLayer ./support/Thumbnail ./support/StyleOrigin ../portal/Portal ../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y){var A={icon:u,object:r,line:t,path:w,fill:q,extrude:v,text:x},B=b.ofType(n),D=c.getLogger("esri.symbols.Symbol3D");e=function(a){function b(b){b=a.call(this)||this;return b.styleOrigin=null,b.thumbnail=null,b.type=null,b._set("symbolLayers",b._createSymbolLayersCollection()),b}return d(b,a),Object.defineProperty(b.prototype,"symbolLayers",{set:function(a){var b=this._get("symbolLayers");b?(b.removeAll(),b.addMany(a)):(b=this._createSymbolLayersCollection(a),
this._set("symbolLayers",b))},enumerable:!0,configurable:!0}),b.prototype.readSymbolLayers=function(a,b,c){b=this._createSymbolLayersCollection();for(var f=0;f<a.length;f++){var d=a[f],e=n.typeJSONDictionary.read(d.type),g=A[e];g?(d=new g,d.read(a[f],c),b.add(d)):(D.warn("Unknown symbol layer type: "+e),c&&c.messages&&c.messages.push(new k("symbol-layer:unsupported","Symbol layers of type '"+(e||"unknown")+"' are not supported",{definition:d,context:c})))}return b},b.prototype.readStyleOrigin=function(a,
b,c){return a.styleUrl&&a.name?(b=l.read(a.styleUrl,c),new p({styleUrl:b,name:a.name})):a.styleName&&a.name?new p({portal:c&&c.portal||z.getDefault(),styleName:a.styleName,name:a.name}):void(c&&c.messages&&c.messages.push(new k("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:c,definition:a})))},b.prototype.writeStyleOrigin=function(a,b,c,f){a.styleUrl&&a.name?(c=l.write(a.styleUrl,f),b.styleOrigin={styleUrl:c,name:a.name}):
a.styleName&&a.name&&(a.portal&&f&&f.portal&&!l.hasSamePortal(a.portal.restUrl,f.portal.restUrl)?f&&f.messages&&f.messages.push(new k("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):b.styleOrigin={styleName:a.styleName,name:a.name})},b.prototype.normalizeCtorArgs=function(a){return a instanceof n?{symbolLayers:this._createSymbolLayersCollection([a])}:Array.isArray(a)?{symbolLayers:this._createSymbolLayersCollection(a)}:
a},b.prototype._createSymbolLayersCollection=function(a){var b=this;a=new B(a);return a.on("before-add",function(a){return b._onSymbolLayersBeforeAdd(a)}),a},b.prototype._onSymbolLayersBeforeAdd=function(a){0>this._allowedLayerTypes.indexOf(a.item.type)&&(D.error("Symbol layer of type '"+a.item.type+"' is not allowed for symbol of type '"+this.type+"'"),a.preventDefault())},b}(y.declared(g));return a([y.property({json:{write:!1}})],e.prototype,"color",void 0),a([y.property({type:B,json:{write:!0}}),
y.cast(m.castForReferenceSetter)],e.prototype,"symbolLayers",null),a([y.reader("symbolLayers")],e.prototype,"readSymbolLayers",null),a([y.property({type:p})],e.prototype,"styleOrigin",void 0),a([y.reader("styleOrigin")],e.prototype,"readStyleOrigin",null),a([y.writer("styleOrigin")],e.prototype,"writeStyleOrigin",null),a([y.property({type:f["default"],json:{read:!1}})],e.prototype,"thumbnail",void 0),a([y.property({type:String,readOnly:!0,json:{read:!1}})],e.prototype,"type",void 0),e=a([y.subclass("esri.symbols.Symbol3D")],
e)})},"esri/symbols/Symbol":function(){define(["../core/lang","../core/kebabDictionary","../core/JSONSupport","../Color"],function(e,h,d,a){var b=h({esriSMS:"simple-marker-symbol",esriPMS:"picture-marker-symbol",esriSLS:"simple-line-symbol",esriSFS:"simple-fill-symbol",esriPFS:"picture-fill-symbol",esriTS:"text-symbol",esriSHD:"shield-label-symbol",PointSymbol3D:"point-symbol-3d",LineSymbol3D:"line-symbol-3d",PolygonSymbol3D:"polygon-symbol-3d",MeshSymbol3D:"mesh-symbol-3d",LabelSymbol3D:"label-symbol-3d"}),
c=0;return d.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+c++},properties:{type:{type:String,value:null,json:{read:b.fromJSON,write:{ignoreOrigin:!0,writer:function(a,c){c.type=b.toJSON(this.type)}}}},color:{type:a,value:new a([0,0,0,1]),json:{read:function(a){return a&&e.isDefined(a[0])?[a[0],a[1],a[2],a[3]/255]:a},write:!0}}}})})},"esri/Color":function(){define(["./core/declare","dojo/colors"],function(e,h){var d=e([h],{declaredClass:"esri.Color",toJSON:function(){return[this.r,
this.g,this.b,1<this.a?this.a:Math.round(255*this.a)]},clone:function(){return new d(this.toRgba())}});d.toJSON=function(a){return a&&[a.r,a.g,a.b,1<a.a?a.a:Math.round(255*a.a)]};d.fromJSON=function(a){return a&&new d([a[0],a[1],a[2],a[3]/255])};d.toUnitRGB=function(a){return[a.r/255,a.g/255,a.b/255]};d.toUnitRGBA=function(a){return[a.r/255,a.g/255,a.b/255,null!=a.a?a.a:1]};var a="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(e=0;e<a.length;e++)d[a[e]]=h[a[e]];return d.named.rebeccapurple=
[102,51,153],d})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(e,h,d,a){var b={};h.setObject("dojo.colors",b);var c=function(a,b,c){0>c&&++c;1<c&&--c;var d=6*c;return 1>d?a+(b-a)*d:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a};e.colorFromRgb=d.fromRgb=function(b,e){var g=b.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(g){b=g[2].split(/\s*,\s*/);var k=b.length,g=g[1];if("rgb"==g&&3==k||"rgba"==g&&4==k)return g=b[0],"%"==g.charAt(g.length-
1)?(g=a.map(b,function(a){return 2.56*parseFloat(a)}),4==k&&(g[3]=b[3]),d.fromArray(g,e)):d.fromArray(b,e);if("hsl"==g&&3==k||"hsla"==g&&4==k){var g=(parseFloat(b[0])%360+360)%360/360,l=parseFloat(b[1])/100,m=parseFloat(b[2])/100,l=.5>=m?m*(l+1):m+l-m*l,m=2*m-l,g=[256*c(m,l,g+1/3),256*c(m,l,g),256*c(m,l,g-1/3),1];4==k&&(g[3]=b[3]);return d.fromArray(g,e)}}return null};var m=function(a,b,c){a=Number(a);return isNaN(a)?c:a<b?b:a>c?c:a};d.prototype.sanitize=function(){this.r=Math.round(m(this.r,0,255));
this.g=Math.round(m(this.g,0,255));this.b=Math.round(m(this.b,0,255));this.a=m(this.a,0,1);return this};b.makeGrey=d.makeGrey=function(a,b){return d.fromArray([a,a,a,b])};h.mixin(d.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,
80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,
206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,
240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,
0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,
232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,
250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return d})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ./support/Symbol3DMaterial ./support/ElevationInfo ../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l){e=c({Icon:"icon",Object:"object",Line:"line",Path:"path",Fill:"fill",Extrude:"extrude",Text:"text"});b=function(a){function b(b){b=a.call(this)||this;return b.enabled=!0,b.material=null,b.type=null,b}return d(b,a),b.prototype.writeEnabled=function(a,b){a||(b.enabled=a)},b}(l.declared(b));a([l.property()],b.prototype,"enabled",void 0);a([l.writer("enabled")],b.prototype,"writeEnabled",null);a([l.property({type:k,json:{read:!1,write:!1}})],b.prototype,"elevationInfo",void 0);
a([l.property({type:m["default"],json:{write:!0}})],b.prototype,"material",void 0);a([l.property({type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:e.write}}})],b.prototype,"type",void 0);b=a([l.subclass("esri.symbols.Symbol3DLayer")],b);(b||(b={})).typeJSONDictionary=e;return b})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ./materialUtils ../../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m){Object.defineProperty(h,"__esModule",{value:!0});e=k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.clone=function(){return new k({color:this.color?this.color.clone():null,colorMixMode:this.colorMixMode})},b}(m.declared(b));a([m.property(c.colorAndTransparencyProperty)],e.prototype,"color",void 0);a([m.property({type:String,json:{read:!0,write:!0}})],e.prototype,"colorMixMode",void 0);e=k=a([m.subclass("esri.symbols.support.Symbol3DMaterial")],
e);h.Symbol3DMaterial=e;h["default"]=e;var k})},"esri/symbols/support/materialUtils":function(){define(["require","exports","../../Color","../../core/screenUtils"],function(e,h,d,a){function b(a){return Math.max(0,Math.min(Math.round(100*(1-a)),100))}function c(a){return Math.max(0,Math.min(1-a/100,1))}function m(a,b){a=null!=b.transparency?c(b.transparency):1;return(b=b.color)&&Array.isArray(b)?new d([b[0]||0,b[1]||0,b[2]||0,a]):void 0}function k(a,c){c.color=[l(a.r),l(a.g),l(a.b)];a=b(a.a);0!==
a&&(c.transparency=a)}function l(a){return Math.max(0,Math.min(Math.round(a),255))}Object.defineProperty(h,"__esModule",{value:!0});h.opacityToTransparency=b;h.transparencyToOpacity=c;h.readColorAndTransparency=m;h.writeColorAndTransparency=k;h.colorAndTransparencyProperty={type:d,json:{read:{source:["color","transparency"],reader:m},write:{writer:k}}};h.screenSizeProperty={type:Number,cast:a.toPt,json:{write:!0}}})},"esri/core/screenUtils":function(){define(["require","exports"],function(e,h){function d(a){return a?
72*a/h.DPI:0}Object.defineProperty(h,"__esModule",{value:!0});var a=/^(\d+(\.\d+)?)\s*((px)|(pt))?$/i;h.DPI=96;h.pt2px=function(a){return a?a/72*h.DPI:0};h.px2pt=d;h.toPt=function(b){if("string"==typeof b){if(a.test(b)){b=b.match(a);var c=Number(b[1]);return"px"===(b[3]&&b[3].toLowerCase())?d(c):c}return console.warn("screenUtils.toPt: input not recognized!"),null}return b}})},"esri/symbols/support/ElevationInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport ../../core/kebabDictionary".split(" "),
function(e,h,d,a,b,c,m){e=m({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"});h=k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.clone=function(){return new k({value:this.value})},b}(b.declared(c));a([b.property({type:Number,json:{write:!0}})],h.prototype,"value",void 0);h=k=a([b.subclass("esri.layers.support.FeatureExpression")],h);c=l=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.write=function(a,b){return this.offset||this.mode||this.featureExpression?this.inherited(arguments):null},b.prototype.clone=function(){return new l({mode:this.mode,offset:this.offset,featureExpression:this.featureExpression?this.featureExpression.clone():void 0})},b}(b.declared(c));a([b.property({type:h,json:{write:!0}})],c.prototype,"featureExpression",void 0);a([b.property({type:String,json:{read:e.read,write:e.write}})],c.prototype,"mode",
void 0);a([b.property({type:Number,json:{write:!0}})],c.prototype,"offset",void 0);c=l=a([b.subclass("esri.layers.support.ElevationInfo")],c);var k,l;return c})},"esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/urlUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/Symbol3DOutline ./support/Symbol3DMaterial ./support/Symbol3DResource ./support/materialUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u){e=b({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right"},{ignoreUnknown:!0});n=r=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.readHref=function(a,b,f){return a?c.read(a,f):b.dataURI},b.prototype.writeHref=function(a,b,f,d){a&&(c.isDataProtocol(a)?b.dataURI=a:b.href=c.write(a,d))},b.prototype.clone=function(){return new r({href:this.href,
primitive:this.primitive})},b}(m.declared(n["default"]));a([m.property({json:{write:!0,read:{source:["href","dataURI"]}}})],n.prototype,"href",void 0);a([m.reader("href")],n.prototype,"readHref",null);a([m.writer("href")],n.prototype,"writeHref",null);n=r=a([m.subclass("esri.symbols.support.IconSymbol3DLayerResource")],n);k=t=function(a){function b(b){b=a.call(this)||this;return b.material=null,b.resource=null,b.type="icon",b.size=void 0,b.anchor=void 0,b.outline=void 0,b}return d(b,a),b.prototype.clone=
function(){return new t({anchor:this.anchor,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:this.resource&&this.resource.clone(),size:this.size})},b}(m.declared(k));a([m.property({type:g["default"]})],k.prototype,"material",void 0);a([m.property({type:n,json:{write:!0}})],k.prototype,"resource",void 0);a([m.property()],k.prototype,"type",void 0);a([m.property(u.screenSizeProperty)],
k.prototype,"size",void 0);a([m.property({type:String,json:{read:e.read,write:e.write}})],k.prototype,"anchor",void 0);a([m.property({type:l["default"],json:{write:!0}})],k.prototype,"outline",void 0);k=t=a([m.subclass("esri.symbols.IconSymbol3DLayer")],k);var r,t;return k})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../Color ./materialUtils ../../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k){Object.defineProperty(h,"__esModule",{value:!0});e=l=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.color=new c([0,0,0,1]),b.size=1,b}return d(b,a),b.prototype.clone=function(){return new l({color:this.color?this.color.clone():null,size:this.size})},b}(k.declared(b));a([k.property(m.colorAndTransparencyProperty)],e.prototype,"color",void 0);a([k.property(m.screenSizeProperty)],e.prototype,"size",void 0);e=l=a([k.subclass("esri.symbols.support.Symbol3DOutline")],
e);h.Symbol3DOutline=e;h["default"]=e;var l})},"esri/symbols/support/Symbol3DResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/urlUtils ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators".split(" "),function(e,h,d,a,b,c,m,k){Object.defineProperty(h,"__esModule",{value:!0});var l=m({invertedCone:"inverted-cone"});e=g=function(a){function c(){return null!==a&&a.apply(this,arguments)||
this}return d(c,a),c.prototype.readHref=function(a,c,d){return b.read(a,d)},c.prototype.writeHref=function(a,c,d,e){a&&(c.href=b.write(a,e))},c.prototype.readPrimitive=function(a){return l.fromJSON(a)},c.prototype.writePrimitive=function(a,b){b.primitive=l.toJSON(a)},c.prototype.clone=function(){return new g({href:this.href,primitive:this.primitive})},c}(k.declared(c));a([k.property({json:{write:!0}})],e.prototype,"href",void 0);a([k.reader("href")],e.prototype,"readHref",null);a([k.writer("href")],
e.prototype,"writeHref",null);a([k.property({json:{write:!0}})],e.prototype,"primitive",void 0);a([k.reader("primitive")],e.prototype,"readPrimitive",null);a([k.writer("primitive")],e.prototype,"writePrimitive",null);e=g=a([k.subclass("esri.symbols.support.Symbol3DResource")],e);h.Symbol3DResource=e;h["default"]=e;var g})},"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ./Symbol3DLayer ./support/Symbol3DMaterial ./support/Symbol3DResource ../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l){e=b({center:"center",bottom:"bottom",origin:"origin"},{ignoreUnknown:!0});c=g=function(a){function b(b){b=a.call(this)||this;return b.material=null,b.resource=null,b.type="object",b.width=void 0,b.height=void 0,b.depth=void 0,b.anchor=void 0,b.heading=void 0,b.tilt=void 0,b.roll=void 0,b}return d(b,a),b.prototype.clone=function(){return new g({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,depth:this.depth,enabled:this.enabled,elevationInfo:this.elevationInfo&&
this.elevationInfo.clone(),height:this.height,material:this.material&&this.material.clone(),resource:this.resource&&this.resource.clone(),width:this.width})},Object.defineProperty(b.prototype,"isPrimitive",{get:function(){return!this.resource||"string"!=typeof this.resource.href},enumerable:!0,configurable:!0}),b}(l.declared(c));a([l.property({type:m["default"]})],c.prototype,"material",void 0);a([l.property({type:k["default"],json:{write:!0}})],c.prototype,"resource",void 0);a([l.property()],c.prototype,
"type",void 0);a([l.property({json:{write:!0}})],c.prototype,"width",void 0);a([l.property({json:{write:!0}})],c.prototype,"height",void 0);a([l.property({json:{write:!0}})],c.prototype,"depth",void 0);a([l.property({type:String,json:{read:e.read,write:e.write}})],c.prototype,"anchor",void 0);a([l.property({json:{write:!0}})],c.prototype,"heading",void 0);a([l.property({json:{write:!0}})],c.prototype,"tilt",void 0);a([l.property({json:{write:!0}})],c.prototype,"roll",void 0);a([l.property({readOnly:!0,
dependsOn:["resource","resource.href"]})],c.prototype,"isPrimitive",null);c=g=a([l.subclass("esri.symbols.ObjectSymbol3DLayer")],c);var g;return c})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ./support/materialUtils ../core/accessorSupport/decorators".split(" "),function(e,h,d,a,b,c,m){e=k=function(a){function b(b){b=a.call(this)||this;return b.material=null,b.type="line",b.size=1,b}return d(b,
a),b.prototype.clone=function(){return new k({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})},b}(m.declared(b));a([m.property()],e.prototype,"material",void 0);a([m.property()],e.prototype,"type",void 0);a([m.property(c.screenSizeProperty)],e.prototype,"size",void 0);e=k=a([m.subclass("esri.symbols.LineSymbol3DLayer")],e);var k;return e})},"esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c){e=m=function(a){function b(b){b=a.call(this)||this;return b.material=null,b.type="path",b.size=void 0,b}return d(b,a),b.prototype.readSize=function(a,b){return a||b.width||0},b.prototype.clone=function(){return new m({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})},b}(c.declared(b));a([c.property()],e.prototype,"material",void 0);a([c.property()],e.prototype,"type",void 0);a([c.property({json:{write:!0}})],
e.prototype,"size",void 0);a([c.reader("size",["size","width"])],e.prototype,"readSize",null);e=m=a([c.subclass("esri.symbols.PathSymbol3DLayer")],e);var m;return e})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ./support/Symbol3DOutline ../core/accessorSupport/decorators".split(" "),function(e,h,d,a,b,c,m){e=k=function(a){function b(b){b=a.call(this)||this;return b.type="fill",b.material=
null,b.outline=null,b}return d(b,a),b.prototype.clone=function(){return new k({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone()})},b}(m.declared(b));a([m.property()],e.prototype,"type",void 0);a([m.property()],e.prototype,"material",void 0);a([m.property({type:c["default"],json:{write:!0}})],e.prototype,"outline",void 0);e=k=a([m.subclass("esri.symbols.FillSymbol3DLayer")],e);
var k;return e})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ../core/accessorSupport/decorators".split(" "),function(e,h,d,a,b,c){e=m=function(a){function b(b){b=a.call(this)||this;return b.type="extrude",b.size=void 0,b.material=null,b}return d(b,a),b.prototype.clone=function(){return new m({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&
this.material.clone(),size:this.size})},b}(c.declared(b));a([c.property()],e.prototype,"type",void 0);a([c.property({json:{write:!0}})],e.prototype,"size",void 0);a([c.property()],e.prototype,"material",void 0);e=m=a([c.subclass("esri.symbols.ExtrudeSymbol3DLayer")],e);var m;return e})},"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3DLayer ./support/Symbol3DHalo ./support/materialUtils ../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l){e=g=function(a){function c(b){b=a.call(this)||this;return b.font=null,b.halo=null,b.material=null,b.size=void 0,b.text=void 0,b.type="text",b}return d(c,a),c.prototype.writeFont=function(a,c){a&&(c.font=b.clone(a))},c.prototype.clone=function(){return new g({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),font:this.font&&b.clone(this.font),halo:this.halo&&b.clone(this.halo),material:this.material&&this.material.clone(),size:this.size,text:this.text})},
c}(l.declared(c));a([l.property()],e.prototype,"font",void 0);a([l.writer("font")],e.prototype,"writeFont",null);a([l.property({type:m["default"],json:{write:!0}})],e.prototype,"halo",void 0);a([l.property()],e.prototype,"material",void 0);a([l.property(k.screenSizeProperty)],e.prototype,"size",void 0);a([l.property({json:{write:!0}})],e.prototype,"text",void 0);a([l.property()],e.prototype,"type",void 0);e=g=a([l.subclass("esri.symbols.TextSymbol3DLayer")],e);var g;return e})},"esri/symbols/support/Symbol3DHalo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ./materialUtils ../../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l){Object.defineProperty(h,"__esModule",{value:!0});e=g=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;return c.color=new b([0,0,0,1]),c.size=0,c}return d(c,a),c.prototype.clone=function(){return new g({color:m.clone(this.color),size:this.size})},c}(l.declared(c));a([l.property(k.colorAndTransparencyProperty)],e.prototype,"color",void 0);a([l.property(k.screenSizeProperty)],e.prototype,"size",void 0);e=g=a([l.subclass("esri.symbols.support.Symbol3DHalo")],
e);h.Symbol3DHalo=e;h["default"]=e;var g})},"esri/symbols/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor".split(" "),function(e,h,d,a,b,c){Object.defineProperty(h,"__esModule",{value:!0});e=m=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.clone=function(){return new m({url:this.url})},b}(b.declared(c));a([b.property({type:String})],
e.prototype,"url",void 0);e=m=a([b.subclass("esri.symbols.support.Thumbnail")],e);h.Thumbnail=e;h["default"]=e;var m})},"esri/symbols/support/StyleOrigin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../portal/Portal".split(" "),function(e,h,d,a,b,c,m){e=k=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.portal=null,b}return d(b,a),b.prototype.clone=
function(){return new k({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})},b}(b.declared(c));a([b.property({type:String})],e.prototype,"name",void 0);a([b.property({type:String})],e.prototype,"styleUrl",void 0);a([b.property({type:String})],e.prototype,"styleName",void 0);a([b.property({type:m})],e.prototype,"portal",void 0);e=k=a([b.subclass("esri.symbols.support.StyleOrigin")],e);var k;return e})},"esri/symbols/SimpleLineSymbol":function(){define(["../core/declare",
"dojo/_base/lang","../core/lang","../core/screenUtils","./LineSymbol"],function(e,h,d,a,b){var c={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",
JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},m={color:[0,0,0,1],style:c.STYLE_SOLID,width:.75,cap:c.CAP_BUTT,join:c.JOIN_MITER,miterLimit:7.5},k=e(b,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line-symbol",style:{value:c.STYLE_SOLID,json:{read:function(a,b){return d.valueOf(this._jsonStyles,a)||void 0},write:function(a,b){b.style=this._jsonStyles[a]}}},cap:{value:c.CAP_BUTT,json:{read:!1,write:!1}},join:{value:c.JOIN_MITER,json:{read:!1,write:!1}},miterLimit:{value:7.5,cast:a.toPt,
json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return h.mixin(this.inherited(arguments),m)},
normalizeCtorArgs:function(b,c,d,e,k,m){if(b&&"string"!=typeof b)return b;var g={};return null!=b&&(g.style=b),null!=c&&(g.color=c),null!=d&&(g.width=a.toPt(d)),null!=e&&(g.cap=e),null!=k&&(g.join=k),null!=m&&(g.miterLimit=a.toPt(m)),g},clone:function(){return new k({color:d.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});return h.mixin(k,c),k.defaultProps=m,k})},"esri/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils",
"./Symbol"],function(e,h,d){return e(d,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line-symbol",width:{value:.75,cast:h.toPt,json:{write:!0}}}})})},"esri/symbols/SimpleMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(e,h,d,a,b,c){var m={style:"circle",color:[255,255,255,.25],outline:new c,size:12,angle:0,xoffset:0,yoffset:0},k=e(b,{declaredClass:"esri.symbols.SimpleMarkerSymbol",
properties:{color:{json:{write:function(a,b){a&&"x"!==this.style&&"cross"!==this.style&&(b.color=a.toJSON())}}},type:"simple-marker-symbol",size:{value:12},style:{type:String,value:"circle",json:{read:function(a){return d.valueOf(this._styles,a)},write:function(a,b){b.style=this._styles[a]}}},path:{type:String,value:null,set:function(a){this.style="path";this._set("path",a)},json:{write:!0}},outline:{type:c,json:{write:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",
x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},getDefaults:function(){return h.mixin(this.inherited(arguments),m)},normalizeCtorArgs:function(b,c,d,e){if(b&&"string"!=typeof b)return b;var g={};return b&&(g.style=b),null!=c&&(g.size=a.toPt(c)),d&&(g.outline=d),e&&(g.color=e),g},clone:function(){return new k({angle:this.angle,color:d.clone(this.color),outline:this.outline&&this.outline.clone(),size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},_setDim:function(b,
c,d){this._targetWidth=a.toPt(b);this._targetHeight=a.toPt(c);this._spikeSize=a.toPt(d)}});return h.mixin(k,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"}),k.defaultProps=m,k})},"esri/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(e,h,d){return e(d,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(a){return a&&
-1*a},write:function(a,b){b.angle=a&&-1*a}}},type:{},xoffset:{value:0,cast:h.toPt,json:{write:!0}},yoffset:{value:0,cast:h.toPt,json:{write:!0}},size:{value:9,cast:function(a){return"auto"===a?a:h.toPt(a)},json:{write:!0}}}})})},"esri/symbols/PictureMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./support/urlUtils".split(" "),function(e,h,d,a,b,c){var m={width:12,height:12,angle:0,xoffset:0,yoffset:0},k=e(b,{declaredClass:"esri.symbols.PictureMarkerSymbol",
properties:{color:{json:{write:!1}},type:"picture-marker-symbol",url:c.urlPropertyDefinition,source:c.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(a,b){return b.size||a}},write:!0},cast:a.toPt},width:{json:{read:{source:["width","size"],reader:function(a,b){return b.size||a}},write:!0},cast:a.toPt},size:{json:{write:!1}}},getDefaults:function(){return h.mixin(this.inherited(arguments),m)},normalizeCtorArgs:function(b,c,d){if(b&&"string"!=typeof b&&null==b.imageData)return b;
var e={};return b&&(e.url=b),null!=c&&(e.width=a.toPt(c)),null!=d&&(e.height=a.toPt(d)),e},clone:function(){var a=new k({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return a._set("source",d.clone(this.source)),a}});return k.defaultProps=m,k})},"esri/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(e,h,d){function a(a,c,e){return c.imageData?d.makeData({mediaType:c.contentType||"image/png",
isBase64:!0,data:c.imageData}):b(c.url,e)}function b(a,b){return!b||"service"!==b.origin&&"portal-item"!==b.origin||!b.layer||"feature"!==b.layer.type&&"stream"!==b.layer.type||d.isAbsolute(a)||!b.layer.parsedUrl?d.read(a,b):d.join(b.layer.parsedUrl.path,"images",a)}function c(a,b,c,e){d.isDataProtocol(a)?(a=d.dataComponents(a),b.contentType=a.mediaType,b.imageData=a.data,c&&c.imageData===b.imageData&&c.url&&(b.url=m(c.url,e))):b.url=m(a,e)}function m(a,b){return d.write(a,b)}Object.defineProperty(h,
"__esModule",{value:!0});h.readImageDataOrUrl=a;h.read=b;h.writeImageDataAndUrl=c;h.write=m;h.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:a},write:{writer:function(a,b,d,e){c(a,b,this.source,e)}}}};h.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(a,c,d){a={};return c.imageData&&(a.imageData=c.imageData),c.contentType&&(a.contentType=c.contentType),c.url&&(a.url=b(c.url,d)),a}}}}})},"esri/symbols/PictureFillSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./FillSymbol ./support/urlUtils".split(" "),
function(e,h,d,a,b,c){var m={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,height:12},k=e(b,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill-symbol",url:c.urlPropertyDefinition,xscale:{value:1,json:{write:!0}},yscale:{value:1,json:{write:!0}},width:{value:12,cast:a.toPt,json:{write:!0}},height:{value:12,cast:a.toPt,json:{write:!0}},xoffset:{value:0,cast:a.toPt,json:{write:!0}},yoffset:{value:0,cast:a.toPt,json:{write:!0}},source:c.sourcePropertyDefinition},getDefaults:function(){return h.mixin(this.inherited(arguments),
m)},normalizeCtorArgs:function(b,c,d,e){if(b&&"string"!=typeof b&&null==b.imageData)return b;var g={};return b&&(g.url=b),c&&(g.outline=c),null!=d&&(g.width=a.toPt(d)),null!=e&&(g.height=a.toPt(e)),g},clone:function(){var a=new k({color:d.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return a._set("source",d.clone(this.source)),a}});return k.defaultProps=
m,k})},"esri/symbols/FillSymbol":function(){define(["../core/declare","./Symbol","./SimpleLineSymbol"],function(e,h,d){return e(h,{declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:d,json:{write:!0}},type:null}})})},"esri/symbols/SimpleFillSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/lang","./FillSymbol","./SimpleLineSymbol"],function(e,h,d,a,b){var c={style:"solid",outline:new b,color:[0,0,0,.25]},m=e(a,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},
type:"simple-fill-symbol",style:{value:"solid",type:String,json:{read:function(a){return d.valueOf(this._styles,a)||void 0},write:function(a,b){b.style=this._styles[a]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return h.mixin(this.inherited(arguments),c)},normalizeCtorArgs:function(a,
b,c){if(a&&"string"!=typeof a)return a;var d={};return a&&(d.style=a),b&&(d.outline=b),c&&(d.color=c),d},clone:function(){return new m({color:d.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});return h.mixin(m,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"}),m.defaultProps=c,
m})},"esri/symbols/TextSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),function(e,h,d,a,b,c,m){var k={x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},l=e(c,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:b,json:{write:!0}},borderLineColor:{type:b,json:{write:!0}},borderLineSize:{type:Number,json:{write:!0}},color:{},font:{type:m,
json:{write:!0}},horizontalAlignment:{value:"center",json:{write:!0}},kerning:{value:!0,json:{write:!0}},haloColor:{type:b,json:{write:!0}},haloSize:{type:Number,cast:a.toPt,json:{write:!0}},rightToLeft:{json:{write:!0}},rotated:{value:!1,json:{write:!0}},text:{type:String,json:{write:!0}},type:"text-symbol",verticalAlignment:{type:String,json:{write:!0}},xoffset:{value:0,type:Number,cast:a.toPt,json:{write:!0}},yoffset:{value:0,type:Number,cast:a.toPt,json:{write:!0}},angle:{type:Number,value:0,
json:{read:function(a){return a&&-1*a},write:function(a,b){b.angle=a&&-1*a}}},width:{json:{write:!0}}},getDefaults:function(){return h.mixin(this.inherited(arguments),k)},normalizeCtorArgs:function(a,b,c){if(a&&"string"!=typeof a)return a;var d={};return a&&(d.text=a),b&&(d.font=b),c&&(d.color=c),d},clone:function(){return new l({angle:this.angle,backgroundColor:d.clone(this.backgroundColor),borderLineColor:d.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:d.clone(this.color),
font:this.font&&this.font.clone(),haloColor:d.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});return h.mixin(l,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"}),
l.defaultProps=k,l})},"esri/symbols/Font":function(){define(["dojo/_base/lang","../core/JSONSupport","../core/lang","../core/screenUtils"],function(e,h,d,a){var b={style:"normal",variant:"normal",weight:"normal",size:9,family:"serif",decoration:"none"},c=h.createSubclass({declaredClass:"esri.symbols.Font",properties:{decoration:{},family:{},size:{cast:a.toPt},style:{},variant:{},weight:{}},getDefaults:function(){return b},normalizeCtorArgs:function(b,c,d,e,h){if(b&&"string"!=typeof b)return b;var g=
{};return null!=b&&(g.size=a.toPt(b)),null!=c&&(g.style=c),null!=d&&(g.variant=d),null!=e&&(g.weight=e),h&&(g.family=h),g},toJSON:function(){return d.fixJson({size:this.size,style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family})},clone:function(){return new c({decoration:this.decoration,family:this.family,size:this.size,style:this.style,variant:this.variant,weight:this.weight})}});return c.defaultProps=b,e.mixin(c,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",
STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"}),c})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ./support/Symbol3DVerticalOffset ./callouts/calloutUtils ../core/accessorSupport/decorators".split(" "),function(e,h,d,a,b,c,m,k,l){e=g=function(a){function c(b){b=a.call(this)||
this;return b.verticalOffset=null,b.callout=null,b.type="point-symbol-3d",b}return d(c,a),c.prototype.supportsCallout=function(){if(1!==(this.symbolLayers?this.symbolLayers.length:0))return!1;switch(this.symbolLayers.getItemAt(0).type){case "icon":case "text":case "object":return!0}return!1},c.prototype.hasVisibleCallout=function(){return k.hasVisibleCallout(this)},c.prototype.hasVisibleVerticalOffset=function(){return k.hasVisibleVerticalOffset(this)},c.prototype.clone=function(){return new g({verticalOffset:b.clone(this.verticalOffset),
callout:b.clone(this.callout),styleOrigin:b.clone(this.styleOrigin),symbolLayers:b.clone(this.symbolLayers),thumbnail:b.clone(this.thumbnail)})},c}(l.declared(c));a([l.property({type:m["default"],json:{write:!0}})],e.prototype,"verticalOffset",void 0);a([l.property(k.calloutProperty)],e.prototype,"callout",void 0);a([l.property()],e.prototype,"type",void 0);a([l.shared(["icon","object","text"])],e.prototype,"_allowedLayerTypes",void 0);e=g=a([l.subclass("esri.symbols.PointSymbol3D")],e);var g;return e})},
"esri/symbols/support/Symbol3DVerticalOffset":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(e,h,d,a,b,c,m){Object.defineProperty(h,"__esModule",{value:!0});e=k=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.screenLength=0,b.minWorldLength=0,b}return d(b,a),b.prototype.writeMinWorldLength=function(a,b,c){a&&
(b[c]=a)},b.prototype.clone=function(){return new k({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})},b}(c.declared(b));a([c.property(m.screenSizeProperty)],e.prototype,"screenLength",void 0);a([c.property({type:Number,json:{write:!0}})],e.prototype,"minWorldLength",void 0);a([c.writer("minWorldLength")],e.prototype,"writeMinWorldLength",null);a([c.property({type:Number,json:{write:!0}})],e.prototype,"maxWorldLength",void 0);e=k=a([c.subclass("esri.symbols.support.Symbol3DVerticalOffset")],
e);h.Symbol3DVerticalOffset=e;h["default"]=e;var k})},"esri/symbols/callouts/calloutUtils":function(){define("require exports ../../core/Logger ../../core/accessorSupport/ensureType ./Callout3D ./LineCallout3D".split(" "),function(e,h,d,a,b,c){function m(a){return a?(a=a.verticalOffset)?0>=a.screenLength||0>=a.maxWorldLength?!1:!0:!1:!1}function k(d,e){if(void 0===e&&(e=null),!a.requiresType(b,d))return d;switch(d.type){case "line":case null:case void 0:return a.ensureType(c,d)}return g.error("calloutUtils#cast",
"Trying to assign invalid value type to property of type esri/symbols/callouts/Callout3D"),e}function l(a,b,d){if(!a)return a;switch(a.type){case "line":return b=new c,b.read(a,d),b}}Object.defineProperty(h,"__esModule",{value:!0});var g=d.getLogger("esri.symbols.Callout3D");h.hasVisibleVerticalOffset=m;h.hasVisibleCallout=function(a){if(!a||!a.supportsCallout||!a.supportsCallout())return!1;var b=a.callout;return b&&b.visible&&m(a)?!0:!1};h.isCalloutSupport=function(a){return"point-symbol-3d"===a.type||
"label-symbol-3d"===a.type};h.cast=k;h.read=l;h.calloutProperty={type:b,cast:function(a){return k(a,this.callout)},json:{read:l,write:!0}}})},"esri/symbols/callouts/Callout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,h,d,a,b,c,m){e=function(a){function c(b){b=a.call(this)||this;return b.visible=!0,b}return d(c,a),c.prototype.normalizeCtorArgs=
function(a){return a&&a.type?(a=b.mixin({},a),delete a.type,a):a},c.prototype.clone=function(){},c}(m.declared(c));return a([m.property({type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],e.prototype,"type",void 0),a([m.property({readOnly:!0})],e.prototype,"visible",void 0),e=a([m.subclass("esri.symbols.callouts.Callout3D")],e)})},"esri/symbols/callouts/LineCallout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ./Callout3D ../support/materialUtils ./LineCallout3DBorder".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){e=u=function(a){function e(c){c=a.call(this)||this;return c.type="line",c.color=new b([0,0,0,1]),c.size=m.px2pt(1),c.border=null,c}return d(e,a),Object.defineProperty(e.prototype,"visible",{get:function(){return 0<this.size&&0<this.color.a},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new u({color:c.clone(this.color),size:this.size,border:c.clone(this.border)})},e}(k.declared(l));a([k.property({type:String})],e.prototype,"type",void 0);a([k.property(g.colorAndTransparencyProperty)],
e.prototype,"color",void 0);a([k.property(g.screenSizeProperty)],e.prototype,"size",void 0);a([k.property({type:n["default"],json:{write:!0}})],e.prototype,"border",void 0);a([k.property({dependsOn:["size","color"],readOnly:!0})],e.prototype,"visible",null);e=u=a([k.subclass("esri.symbols.callouts.LineCallout3D")],e);var u;return e})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(e,h,d,a,b,c,m,k,l){Object.defineProperty(h,"__esModule",{value:!0});e=g=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;return c.color=new b("white"),c}return d(c,a),c.prototype.clone=function(){return new g({color:m.clone(this.color)})},c}(k.declared(c));a([k.property(l.colorAndTransparencyProperty)],e.prototype,"color",void 0);e=g=a([k.subclass("esri.symbols.support.LineCallout3DBorder")],e);h.LineCallout3DBorder=e;h["default"]=e;var g})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m){e=k=function(a){function c(b){b=a.call(this)||this;return b.type="line-symbol-3d",b}return d(c,a),c.prototype.clone=function(){return new k({styleOrigin:b.clone(this.styleOrigin),symbolLayers:b.clone(this.symbolLayers),thumbnail:b.clone(this.thumbnail)})},c}(m.declared(c));a([m.property()],e.prototype,"type",void 0);a([m.shared(["line","path","text"])],e.prototype,"_allowedLayerTypes",void 0);e=k=a([m.subclass("esri.symbols.LineSymbol3D")],e);var k;return e})},"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m){e=k=function(a){function c(b){b=a.call(this)||this;return b.type="polygon-symbol-3d",b}return d(c,a),c.prototype.clone=function(){return new k({styleOrigin:b.clone(this.styleOrigin),symbolLayers:b.clone(this.symbolLayers),thumbnail:b.clone(this.thumbnail)})},c.fromJSON=function(a){var b=new k;if(b.read(a),2===b.symbolLayers.length&&"fill"===b.symbolLayers.getItemAt(0).type&&"line"===b.symbolLayers.getItemAt(1).type){var c=b.symbolLayers.getItemAt(0),d=b.symbolLayers.getItemAt(1);
!d.enabled||a.symbolLayers&&a.symbolLayers[1]&&!1===a.symbolLayers[1].enable||(c.outline={size:d.size,color:d.material.color});b.symbolLayers.removeAt(1)}return b},c}(m.declared(c));a([m.property()],e.prototype,"type",void 0);a([m.shared("extrude fill line icon object text".split(" "))],e.prototype,"_allowedLayerTypes",void 0);e=k=a([m.subclass("esri.symbols.PolygonSymbol3D")],e);var k;return e})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m){e=k=function(a){function c(b){b=a.call(this)||this;return b.type="mesh-symbol-3d",b}return d(c,a),c.prototype.clone=function(){return new k({styleOrigin:b.clone(this.styleOrigin),symbolLayers:b.clone(this.symbolLayers),thumbnail:b.clone(this.thumbnail)})},c}(m.declared(c));a([m.property()],e.prototype,"type",void 0);a([m.shared(["fill"])],e.prototype,"_allowedLayerTypes",void 0);e=k=a([m.subclass("esri.symbols.MeshSymbol3D")],e);var k;return e})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ./support/Symbol3DVerticalOffset ./callouts/calloutUtils ../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l){e=g=function(a){function c(b){b=a.call(this)||this;return b.verticalOffset=null,b.callout=null,b.type="label-symbol-3d",b}return d(c,a),c.prototype.supportsCallout=function(){return!0},c.prototype.hasVisibleCallout=function(){return k.hasVisibleCallout(this)},c.prototype.hasVisibleVerticalOffset=function(){return k.hasVisibleVerticalOffset(this)},c.prototype.clone=function(){return new g({styleOrigin:b.clone(this.styleOrigin),symbolLayers:b.clone(this.symbolLayers),thumbnail:b.clone(this.thumbnail),
callout:b.clone(this.callout),verticalOffset:b.clone(this.verticalOffset)})},c}(l.declared(c));a([l.property({type:m["default"],json:{write:!0}})],e.prototype,"verticalOffset",void 0);a([l.property(k.calloutProperty)],e.prototype,"callout",void 0);a([l.property()],e.prototype,"type",void 0);a([l.shared(["text"])],e.prototype,"_allowedLayerTypes",void 0);e=g=a([l.subclass("esri.symbols.LabelSymbol3D")],e);var g;return e})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/urlUtils ../core/Logger ../core/requireUtils ./Symbol ../portal/Portal".split(" "),
function(e,h,d,a,b,c,m,k,l,g){var n=m.getLogger("esri.symbols.WebStyleSymbol");h=u=function(a){function b(b){b=a.call(this,b)||this;return b.styleName=null,b.portal=null,b.styleUrl=null,b.name=null,b.type="web-style-symbol",b}return d(b,a),b.prototype._readStyleUrl=function(a,b,d){return c.read(a,d)},b.prototype._writeStyleUrl=function(a,b,d,e){b.styleUrl=c.write(a,e)},b.prototype._writeType=function(a,b,c,d){b.type="styleSymbolReference"},b.prototype.read=function(a,b){return this.portal=b?b.portal:
void 0,this.inherited(arguments,[a,b]),this},b.prototype.clone=function(){return new u({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})},b.prototype.fetchSymbol=function(){var a=this;return k.when(e,"./support/symbolUtils").then(function(b){b=b.fetchStyleSymbol(a,{portal:a.portal});return b.otherwise(function(a){n.error("#fetchSymbol()","Failed to create symbol from style",a)}),b})},b}(b.declared(l));a([b.property({json:{write:!1}})],h.prototype,"color",void 0);
a([b.property({type:String,json:{write:!0}})],h.prototype,"styleName",void 0);a([b.property({type:g,json:{write:!1}})],h.prototype,"portal",void 0);a([b.property({type:String,json:{write:!0}})],h.prototype,"styleUrl",void 0);a([b.reader("styleUrl")],h.prototype,"_readStyleUrl",null);a([b.writer("styleUrl")],h.prototype,"_writeStyleUrl",null);a([b.property({type:String,json:{write:!0}})],h.prototype,"name",void 0);a([b.property({type:String,readOnly:!0,json:{read:!1}})],h.prototype,"type",void 0);
a([b.writer("type")],h.prototype,"_writeType",null);h=u=a([b.subclass("esri.symbols.WebStyleSymbol")],h);var u;return h})},"esri/symbols/support/symbolConversion":function(){define("require exports dojo/_base/lang ../../core/lang ../../core/Error ../Font ../SimpleLineSymbol ../SimpleMarkerSymbol ../PictureMarkerSymbol ../SimpleFillSymbol ../TextSymbol ../WebStyleSymbol ../Symbol3D ../LineSymbol3D ../PointSymbol3D ../PolygonSymbol3D ../LabelSymbol3D ../LineSymbol3DLayer ../IconSymbol3DLayer ../FillSymbol3DLayer ../TextSymbol3DLayer ../../Color".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y){function A(a){var b,c,d,e=a.color?a.color.clone():new y([255,255,255]);a instanceof l?(a.color&&0===a.color.r&&0===a.color.g&&0===a.color.b&&(e=new y([255,255,255])),b={href:a.url},c=a.width<=a.height?a.height:a.width):(b=a.style,b={primitive:b in B?B[b]:(console.log(b+' cannot be mapped to Icon symbol. Fallback to "circle"'),"circle")},c=a.size,a.outline&&a.outline.color&&0<a.outline.width&&(d={size:a.outline.width,color:a.outline.color.clone()}));
return new w(new f({size:c,screenOffset:[a.xoffset,a.yoffset],resource:b,material:{color:e},outline:d}))}Object.defineProperty(h,"__esModule",{value:!0});var B={};B[k.STYLE_CIRCLE]="circle";B[k.STYLE_CROSS]="cross";B[k.STYLE_DIAMOND]="kite";B[k.STYLE_SQUARE]="square";B[k.STYLE_X]="x";h.to3D=function(f,e,h,B){if(void 0===e&&(e=!1),void 0===h&&(h=!1),void 0===B&&(B=!0),!f)return{symbol:null};if(f instanceof r||f instanceof u)B=f.clone();else if(f instanceof m)B=new t(new x({size:f.width||1,material:{color:f.color?
f.color.clone():[255,255,255]}}));else if(f instanceof k)B=A(f);else if(f instanceof l)B=A(f);else if(f instanceof g)B=new p({material:{color:f.color?f.color.clone():[255,255,255]}}),B=(f.outline&&f.outline.color&&(B.outline={size:f.outline.width||0,color:f.outline.color}),new q(B));else{if(!(f instanceof n))return{error:new b("symbol-conversion:unsupported-2d-symbol","Unsupported 2D symbol of tyoe '"+(f.type||f.declaredClass)+"'",{symbol:f})};var y;switch(f.verticalAlignment){case "top":y="top";
break;case "middle":y="center";break;case "bottom":y="bottom";break;default:y="center"}switch(f.horizontalAlignment){case "left":y+="Left";break;case "center":y+="Center";break;case "right":y+="Right";break;default:y+="Center"}var D=d.clone(c.defaultProps);f.font&&d.mixin(D,f.font);var F;F=f.haloColor;var C=f.haloSize;F=F&&0<C?{color:a.clone(F),size:C}:null;B=new (B?v:w)(new z({size:D.size,font:{family:D.family,weight:D.weight,style:D.style},halo:F,material:{color:f.color.clone()},placement:y,screenOffset:[f.xoffset,
f.yoffset],text:f.text}))}if(e&&(B.id=f.id),h&&B.isInstanceOf(r))for(f=0;f<B.symbolLayers.length;++f)B.symbolLayers.getItemAt(f)._ignoreDrivers=!0;return{symbol:B}}})},"esri/geometry/HeightModelInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators ./support/scaleUtils".split(" "),function(e,h,d,a,b,c,m,k){e=c({gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"});
c=c({meter:"meter",foot:"foot",foot_us:"foot-us",foot_clarke:"foot-clarke",yard_clarke:"yard-clarke",link_clarke:"link-clarke",yard_sears:"yard-sears",foot_sears:"foot-sears",chain_sears:"chain-sears",chain_benoit_1895_b:"chain-benoit-1895-b",yard_indian:"yard-indian",yard_indian_1937:"yard-indian-1937",foot_gold_coast:"foot-gold-coast",chain_sears_1922_truncated:"chain-sears-1922-truncated","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});b=l=function(a){function b(){var b=null!==
a&&a.apply(this,arguments)||this;return b.ellipsoid=null,b}return d(b,a),b.prototype.clone=function(){return new l({heightModel:this.heightModel,heightUnit:this.heightUnit,ellipsoid:this.ellipsoid})},b.deriveUnitFromSR=function(a,b){a=a.clone();return a.heightUnit=k.getVerticalUnitStringForSR(b),a},b.fromJSON=function(a){if(!a)return null;var b=new l;return b.read(a),b},b}(m.declared(b));a([m.property({json:{read:e.read,write:e.write}})],b.prototype,"heightModel",void 0);a([m.property({json:{read:c.read,
write:c.write}})],b.prototype,"heightUnit",void 0);a([m.property({json:{write:!0}})],b.prototype,"ellipsoid",void 0);b=l=a([m.subclass("esri.HeightModelInfo")],b);var l;return b})},"esri/views/BreakpointsOwner":function(){define("../core/Accessor ../core/ArrayPool ../core/HandleRegistry ../core/watchUtils dojo/_base/lang dojo/dom-class".split(" "),function(e,h,d,a,b,c){var m={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;var c=this.values;return b<=a.xsmall?c.xsmall:b<=
a.small?c.small:b<=a.medium?c.medium:b<=a.large?c.large:c.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",
large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var c=this.values;return b<=a.xsmall?c.xsmall:b<=a.small?c.small:b<=a.medium?c.medium:
b<=a.large?c.large:c.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",
large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},
valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},k={xsmall:544,small:768,medium:992,large:1200};return e.createSubclass({properties:{breakpoints:{},orientation:{},widthBreakpoint:{},heightBreakpoint:{}},constructor:function(){this._breakpointsHandles=new d},getDefaults:function(){return b.mixin(this.inherited(arguments),{breakpoints:k})},initialize:function(){this._breakpointsHandles.add(a.init(this,"size",this._updateClassNames))},destroy:function(){this.destroyed||
(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=this.view=null)},_breakpointsHandles:null,_breakpointsSetter:function(a){var c=this._get("breakpoints");if(a!==c){var d;(c=(c=a)&&c.xsmall<c.small&&c.small<c.medium&&c.medium<c.large)||(d=JSON.stringify(k,null,2),console.warn("provided breakpoints are not valid, using defaults:"+d));a=c?a:k;this._set("breakpoints",b.mixin({},a))}},_updateClassNames:function(){if(this.container){var a,b,c,d=h.acquire(),e=h.acquire(),
k=!1;for(a in m)b=this[a],c=m[a].getValue({viewSize:this.size,breakpoints:this.breakpoints}),b!==c&&(k=!0,this[a]=c,e.push(m[a].valueToClassName[b]),d.push(m[a].valueToClassName[c]));k&&(this._applyClassNameChanges(d,e),h.release(d),h.release(e))}},_applyClassNameChanges:function(a,b){var d=this.container;d&&(c.remove(d,b),c.add(d,a))},_removeActiveClassNames:function(){var a,b=this.container;if(b)for(a in m)c.remove(b,m[a].valueToClassName[this[a]])}})})},"esri/views/LayerViewManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor ../core/Error ../core/HandleRegistry ../core/Scheduler ../core/promiseUtils ../core/watchUtils ./LayerViewFactory".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u){e=function(a){function b(){var b=a.call(this)||this;return b._promisesMap=new Map,b._layerViewsMap=new Map,b._handles=new k,b.factory=new u,b.ready=!1,b.layersToLayerViews=function(){var a=new Map;return a.set("view.map.basemap.baseLayers","view.basemapView.baseLayerViews"),a.set("view.map.ground.layers","view.groundView.layerViews"),a.set("view.map.layers","view.layerViews"),a.set("view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"),a}(),b._doWork=
b._doWork.bind(b),b.refresh=b.refresh.bind(b),b._handles.add(n.init(b,"view.ready",function(a){return b.ready=a})),b._handles.add(b.watch(["view.map.basemap","view.map.ground","view.map.layers","ready"],b.refresh),"watcher"),b}return d(b,a),b.prototype.destroy=function(){this._handles&&(this.empty(),this.view=null,this.factory.destroy(),this.factory=null,this._handles.destroy(),this._handles=null,this._promisesMap=null,this._layerViewsMap=null,this._map=null)},b.prototype.empty=function(){this._layerViewsMap.forEach(this._disposeLayerView,
this);this._promisesMap.forEach(function(a){return a.cancel()});this._layerViewsMap.clear();this._promisesMap.clear();this._refreshCollections()},b.prototype.refresh=function(){var a=this._handles;a.remove("refresh");a.add(l.schedule(this._doWork),"refresh")},b.prototype.whenLayerView=function(a){return this.refresh(),this._doWork(),this._promisesMap.has(a)?this._promisesMap.get(a):g.reject(new m("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:a}))},b.prototype._doWork=
function(){var a=this,b=this._handles,c=this.get("view.map");if(this._map!==c&&(this.empty(),this._map=c),b.has("refresh")){b.remove("refresh");b.remove("collection-change");this.factory.paused=!this.ready;var d=this._map&&this._map.allLayers;d&&(d.forEach(this._createLayerView,this),this._refreshCollections(),this._promisesMap.forEach(function(b,c){d.includes(c)||a._disposeLayerView(a._layerViewsMap.get(c),c)}),b.add(d.on("change",this.refresh),"collection-change"))}},b.prototype._refreshCollections=
function(){var a=this;this.layersToLayerViews.forEach(function(b,c){a._populateLayerViewsOwners(a.get(c),a.get(b),a.view)})},b.prototype._populateLayerViewsOwners=function(a,b,c){var d=this;if(!a||!b)return void(b&&b.removeAll());var f=0;a.forEach(function(a){var e=d._layerViewsMap.get(a);e&&(e.layer=a,e.parent=c,b.getItemAt(f)!==e&&b.splice(f,0,e),a.layers&&d._populateLayerViewsOwners(a.layers,e.layerViews,e),f+=1)});f<b.length&&b.splice(f,b.length)},b.prototype._createLayerView=function(a){var b=
this,c=this.view,d=this.factory,f=this._layerViewsMap,e=this._promisesMap;if(f.has(a))return void a.load();e.has(a)||(d=d.create(c,a).then(function(d){if(!b._map||!b._map.allLayers.some(function(b){return a===b}))throw new m("view:no-layerview-for-layer","The layer has been removed from the map",{layer:a});return f.set(a,d),b._refreshCollections(),a.emit("layerview-create",{view:c,layerView:d}),c.emit("layerview-create",{layer:a,layerView:d}),g.resolve(d)}),e.set(a,d),d.always(this.refresh))},b.prototype._disposeLayerView=
function(a,b){if(this._promisesMap.has(b)&&(this._promisesMap.get(b).cancel(),this._promisesMap["delete"](b),a)){b=a.layer;var c=a.view;this.factory.dispose(a);a.layer=a.parent=a.view=null;this._layerViewsMap["delete"](b);b.emit("layerview-destroy",{view:c,layerView:a});c.emit("layerview-destroy",{layer:b,layerView:a})}},b}(b.declared(c));return a([b.property()],e.prototype,"ready",void 0),a([b.property()],e.prototype,"view",void 0),e=a([b.subclass("esri.views.LayerViewManager")],e)})},"esri/views/LayerViewFactory":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators dojo/Deferred dojo/when ../core/Accessor ../core/Collection ../core/Error ../core/watchUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.creationRequests=new l,b.paused=!0,b}return d(b,a),b.prototype.initialize=function(){var a=this;n.whenFalse(this,"paused",function(){a.creationRequests.toArray().forEach(a._processRequest,a)},!0)},b.prototype.destroy=function(){this.creationRequests.drain(function(a){return a.deferred.cancel(void 0)})},Object.defineProperty(b.prototype,"working",{get:function(){return 0<this.creationRequests.length},
enumerable:!0,configurable:!0}),b.prototype.create=function(a,b){var d=this.getLayerViewPromise(b);if(d)return d;var e=this.creationRequests,k={deferred:new c(function(){var a=new g("cancelled:layerview-create","layerview creation cancelled",{layer:b});return e.remove(k),k.creationPromise&&k.creationPromise.cancel(a),a}),view:a,layer:b,started:!1,creationPromise:null};return e.push(k),this.paused||this._processRequest(k),k.deferred.promise},b.prototype.dispose=function(a){a.layer.destroyLayerView(a)},
b.prototype.getLayerViewPromise=function(a){var b=this.creationRequests&&this.creationRequests.find(function(b){return b.layer===a});return b&&b.deferred.promise},b.prototype._processRequest=function(a){var b=this;if(!a.started){a.started=!0;var c=a.deferred,d=a.layer,e=a.view;d.load().then(function(b){return c.isCanceled()?void 0:(a.creationPromise=b.createLayerView(e),a.creationPromise)}).then(function(b){return c.isCanceled()?b:a.creationPromise=m(b)}).otherwise(function(a){c.isCanceled()||c.reject(new g("layerview:create-error",
"layerview creation failed",{layer:d,error:a}))}).then(function(f){return b.creationRequests&&b.creationRequests.remove(a),c.isFulfilled()?f&&b.dispose(f):c.resolve(f),f})}},b}(b.declared(k));return a([b.property()],e.prototype,"creationRequests",void 0),a([b.property()],e.prototype,"paused",void 0),a([b.property()],e.prototype,"view",void 0),a([b.property({dependsOn:["paused","creationRequests.length"],readOnly:!0})],e.prototype,"working",null),e=a([b.subclass("esri.views.LayerViewFactory")],e)})},
"esri/views/BasemapView":function(){define(["../core/Accessor","../core/Collection","../core/watchUtils"],function(e,h,d){return e.createSubclass({declaredClass:"esri.views.BasemapView",properties:{view:{},baseLayerViews:{type:h},referenceLayerViews:{type:h}},constructor:function(){this._loadingHdl=d.init(this,"view.map.basemap",this._loadBasemap)},getDefaults:function(){return{baseLayerViews:[],referenceLayerViews:[]}},destroy:function(){this.view=null;this._loadingHdl&&(this._loadingHdl.remove(),
this._loadingHdl=null)},_suspendedGetter:function(){return this.view?this.view.suspended:!0},_loadBasemap:function(a){a&&a.load()}})})},"esri/views/GroundView":function(){define(["../core/Accessor","../core/Collection"],function(e,h){return e.createSubclass({declaredClass:"esri.views.GroundView",properties:{view:{},layerViews:{type:h},suspended:{get:function(){return this.view?this.view.suspended:!0}}},getDefaults:function(){return{layerViews:[]}},destroy:function(){this.view=null}})})},"esri/views/support/DefaultsFromMap":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators dojo/_base/lang ../../core/lang ../../core/watchUtils ../../core/Accessor ../../core/HandleRegistry ../../geometry/HeightModelInfo".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){function u(a){switch(a.type){case "elevation":case "integrated-mesh":case "point-cloud":case "scene":return!0;default:return void 0!==a.hasZ}}e=r=function(a){function b(b){b=a.call(this)||this;return b.isSpatialReferenceDone=!1,b.isHeightModelInfoDone=!1,b.isTileInfoDone=!1,b.spatialReference=null,b.extent=null,b.heightModelInfo=null,b.mapCollectionPaths=r.DefaultMapCollectionPaths.slice(),b.tileInfo=null,b._handles=new g,b._waitTask=null,b._isStarted=!1,b}return d(b,
a),b.prototype.normalizeCtorArgs=function(a){return a=c.mixin({},a),this._set("view",a.view),delete a.view,a},b.prototype.initialize=function(){var a=this;this.watch("mapCollectionPaths",function(){a._isStarted&&(a.reset(),a.start())})},b.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null,this._isStarted=!1);this._cancelLoading()},b.prototype.reset=function(){this._handles.removeAll();this._isStarted=!1;this._set("isSpatialReferenceDone",!1);this._set("isHeightModelInfoDone",
!1);this._set("isTileInfoDone",!1);this._set("spatialReference",null);this._set("extent",null);this._set("heightModelInfo",null);this._set("tileInfo",null)},b.prototype.start=function(){this._handles.removeAll();this._isStarted=!0;for(var a=this._updateLayerChange.bind(this),b=0,c=this.mapCollectionPaths;b<c.length;b++)this._handles.add(k.on(this.view,"map."+c[b],"change",a,a,a))},b.prototype.supportedSpatialReferenceForLayer=function(a){return a.spatialReference&&this.view.isSpatialReferenceSupported(a.spatialReference,
a)?a.spatialReference:void 0},b.prototype._ownerNameFromCollectionName=function(a){var b=a.lastIndexOf(".");return-1===b?"view":"view."+a.slice(0,b)},b.prototype._ensureLoadedOwnersFromCollectionName=function(a){var b;a=this._ownerNameFromCollectionName(a).split(".");for(var c=0;c<a.length&&(b=this.get(a.slice(0,c+1).join(".")),b);c++)if(b.load&&!b.isFulfilled())return{owner:null,loading:b.load()};return{owner:b}},b.prototype._cancelLoading=function(){this._waitTask=null},b.prototype._updateWhen=
function(a){var b=this,c=!0,d=!1,e=a.always(function(){c?d=!0:e===b._waitTask&&b._update()});return c=!1,d||(this._waitTask=e),d},b.prototype._updateLayerChange=function(){this.isSpatialReferenceDone&&!this.spatialReference&&this._set("isSpatialReferenceDone",!1);this._update()},b.prototype._update=function(){var a=this;if(this._cancelLoading(),!this.isSpatialReferenceDone){var b=this._processMapCollections(function(b){return a._processSpatialReferenceSource(b)});b||this._set("isSpatialReferenceDone",
!0);this.isSpatialReferenceDone&&!this.spatialReference&&this.defaultSpatialReference&&this._set("spatialReference",this.defaultSpatialReference)}null==this.heightModelInfo&&(b=!1,this.view.isHeightModelInfoRequired()&&(b=this._processMapCollections(function(b){return a._processHeightModelInfoSource(b)},function(a){return null!=a.layers||u(a)||void 0!==a.heightModelInfo})),b||this._set("isHeightModelInfoDone",!0));null==this.tileInfo&&(b=!1,this.view.isTileInfoRequired()&&(b=this._deriveTileInfo()),
b||this._set("isTileInfoDone",!0))},b.prototype._processMapCollections=function(a,b){for(var c=0,d=this.mapCollectionPaths;c<d.length;c++){var e="map."+d[c],g=this._ensureLoadedOwnersFromCollectionName(e);if(g.loading&&!this._updateWhen(g.loading))return!0;g=g.owner;if(!(!g||g.isRejected&&g.isRejected())&&(e=this.view.get(e))&&this._processMapCollection(e,a,b))return!0}return!1},b.prototype._processMapCollection=function(a,b,c){for(var f=0;f<a.length;f++){var d=a.getItemAt(f),e=null!=c&&!c(d);if(!e&&
d.load&&!d.isFulfilled()&&!this._updateWhen(d.load())||!e&&(!d.load||d.isResolved())&&(b(d)||d.layers&&this._processMapCollection(d.layers,b)))return!0}return!1},b.prototype._processSpatialReferenceSource=function(a){var b=a.fullExtent;a=this.supportedSpatialReferenceForLayer(a);return!a&&this.extent||!b||this._set("extent",b),a?(this._set("spatialReference",a),this._set("isSpatialReferenceDone",!0),!0):!1},b.prototype._processHeightModelInfoSource=function(a){return(a=a.heightModelInfo?a.heightModelInfo:
(null!=a.hasZ?a.hasZ:u(a))?m.clone(t):null)?(this._set("heightModelInfo",a),this._set("isHeightModelInfoDone",!0),!0):!1},b.prototype._deriveTileInfo=function(){if(!this.isSpatialReferenceDone)return!0;var a=this.get("view.map");if(!a)return!0;var b=a.basemap,c=b&&b.get("baseLayers.0"),a=a.get("layers.0"),d=!1,e=null;return b?b.loaded?c?c.loaded?e=c.tileInfo:(this._updateWhen(c.load()),d=!0):a?a.loaded?e=a.tileInfo:(this._updateWhen(a.load()),d=!0):d=!0:(this._updateWhen(b.load()),d=!0):a&&(a.loaded?
e=a.tileInfo:(this._updateWhen(a.load()),d=!0)),e&&!e.spatialReference.equals(this.spatialReference)&&(e=null),d||this._set("tileInfo",e),d},b}(b.declared(l));e.DefaultMapCollectionPaths=["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"];a([b.property({readOnly:!0})],e.prototype,"isSpatialReferenceDone",void 0);a([b.property({readOnly:!0})],e.prototype,"isHeightModelInfoDone",void 0);a([b.property({readOnly:!0})],e.prototype,"isTileInfoDone",void 0);a([b.property({readOnly:!0})],
e.prototype,"view",void 0);a([b.property({readOnly:!0})],e.prototype,"spatialReference",void 0);a([b.property({readOnly:!0})],e.prototype,"extent",void 0);a([b.property({readOnly:!0})],e.prototype,"heightModelInfo",void 0);a([b.property()],e.prototype,"mapCollectionPaths",void 0);a([b.property()],e.prototype,"defaultSpatialReference",void 0);a([b.property({readOnly:!0})],e.prototype,"tileInfo",void 0);e=r=a([b.subclass("esri.views.support.DefaultsFromMap")],e);var r,t=new n({heightModel:"gravity-related-height"});
return e})},"esri/views/ViewAnimation":function(){define("../core/declare dojo/Deferred ../core/Accessor ../core/Promise ../core/Scheduler ../core/Error".split(" "),function(e,h,d,a,b,c){var m={RUNNING:"running",FINISHED:"finished",STOPPED:"stopped"};e=e([d,a],{declaredClass:"esri.views.ViewAnimation",properties:{state:{value:null},target:{value:null}},constructor:function(){this._dfd=new h;this.addResolvingPromise(this._dfd.promise)},initialize:function(){this.state=m.RUNNING},stop:function(){this.state!==
m.STOPPED&&this.state!==m.FINISHED&&(this.state=m.STOPPED,b.schedule(this._dfd.reject.bind(this._dfd,new c("ViewAnimation stopped"))))},finish:function(){this.state!==m.STOPPED&&this.state!==m.FINISHED&&(this.state=m.FINISHED,b.schedule(this._dfd.resolve))}});return e.State=m,e})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/Scheduler","./FrameBudget"],function(e,h,d,a){return function(){function b(b){var c=this;this.view=b;this._frameTaskHandle=null;this._budget=new a(6);
this.budget=6;this.updateEnabled=this.stationary=!0;this.prepare=function(){c._updateParameters.state=c.view.state;c._updateParameters.stationary=c.view.stationary;c._updateParameters.devicePixelRatio=window.devicePixelRatio;c._budget.reset(c.budget)};this.update=function(){if(c.updateEnabled){for(var a=c._budget,b=c.view,d=b.allLayerViews.toArray().filter(function(a){return a.isFulfilled()&&null==a.layerViews}),e=d.length,m=b.state,h=0;h<d.length;h++)if(b=d[h],b.attached){var t=c._layerViewsState[b.uid];
null!=t&&(c.stationary||b.moving)||(b.moving=!0,b.moveStart());t!==m.id&&b.viewChange();c.stationary&&b.moving&&(b.moving=!1,b.moveEnd());c._layerViewsState[b.uid]=m.id}m=c._layerViewsTrash;for(h=0;h<m.length;h++)b=m[h],c._detachLayerView(b);for(h=m.length=0;e>h;h++)b=d[h],b.isFulfilled()&&!b.attached&&c._attachLayerView(b);d=c._layerViewsToUpdate;e=d.slice();b=c._updateParameters;for(c._layerViewsToUpdate.length=0;!a.done&&0<e.length;)e.shift().processUpdate(b);0<e.length&&d.unshift.apply(d,e);0===
d.length&&0===m.length&&c._frameTaskHandle.pause()}};b.watch("ready",function(a){a?c.start():c.stop()})}return b.prototype.destroy=function(){this.stop()},b.prototype.start=function(){var a=this;this._updateParameters={budget:this._budget,state:this.view.state,devicePixelRatio:window.devicePixelRatio,stationary:!0};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._layerViewsState={};this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(b){Array.prototype.push.apply(a._layerViewsTrash,
b.removed);a.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(b){a.stationary=b;a.requestFrame()});this._frameTaskHandle=d.addFrameTask(this)},b.prototype.stop=function(){var a=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(b){return a._detachLayerView(b)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=
this._layerViewsTrash=this._layerViewsToUpdate=this._layerViewsState=null,this.stationary=!0)},b.prototype.requestLayerViewUpdate=function(a){this._layerViewsToUpdate.push(a);this.requestFrame()},b.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.isPaused()&&this._frameTaskHandle.resume()},b.prototype._attachLayerView=function(a){a.attached||(a.attached=!0,a.moving=!1,a.attach())},b.prototype._detachLayerView=function(a){a.attached&&(a.detach(),a.attached=!1,a.moving=
!1)},b}()})},"esri/views/2d/FrameBudget":function(){define(["require","exports","../../core/now"],function(e,h,d){return function(){function a(a){void 0===a&&(a=Number.MAX_VALUE);this._budget=this._begin=0;this.enabled=!0;this.reset(a)}return a.now=function(){return d()},Object.defineProperty(a.prototype,"done",{get:function(){return this.enabled&&this.elapsed>=this._budget},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"elapsed",{get:function(){return d()-this._begin},enumerable:!0,
configurable:!0}),Object.defineProperty(a.prototype,"remaining",{get:function(){return Math.max(this._budget-this.elapsed,0)},enumerable:!0,configurable:!0}),a.prototype.reset=function(a){void 0===a&&(a=Number.MAX_VALUE);this._begin=d();this._budget=this.enabled?a:Number.MAX_VALUE},a}()})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./viewpointUtils ./ViewState ./libs/gl-matrix/vec2 ./libs/gl-matrix/mat2d ./libs/gl-matrix/common ../../core/Accessor".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){var u=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.left=0,b.top=0,b.right=0,b.bottom=0,b}return d(b,a),b}(b.declared(n)),u=a([b.subclass("esri.views.2d.PaddedViewState.Padding")],u);e=function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;return b.content=new m,b.padding=new u,b.size=k.fromValues(0,0),b}return d(b,a),Object.defineProperty(b.prototype,"clipRect",{get:function(){var a=
this.worldScreenWidth;if(!a)return null;var b=g.toRadian(this.rotation),c=this.width*Math.abs(Math.cos(b))+this.height*Math.abs(Math.sin(b));if(a>c)return null;var d=k.clone(this.screenCenter),f=l.fromTranslation(l.create(),d);return l.rotate(f,f,b),k.negate(d,d),l.translate(f,f,d),k.transformMat2d(d,this.paddedScreenCenter,f),{top:-Math.round(c),left:Math.round(d[0]-.5*a),right:Math.round(d[0]+.5*a),bottom:+Math.round(c)}},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"padding",
{set:function(a){this._set("padding",a||new u);this._updateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"size",{set:function(a){this._set("size",a);this._updateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"paddedScreenCenter",{get:function(){var a=this.content.size,b=this.padding,a=k.scale(k.create(),a,.5);return a[0]+=b.left,a[1]+=b.top,a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"viewpoint",{set:function(a){var b=
a.clone();this.content.viewpoint=a;c.addPadding(b,a,this._get("size"),this._get("padding"));this._set("viewpoint",c.addPadding(b.clone(),a,this._get("size"),this._get("padding")))},enumerable:!0,configurable:!0}),b.prototype._updateContent=function(){var a=k.create(),b=this._get("size"),c=this._get("padding");if(b&&c){var d=this.content;k.set(a,c.left+c.right,c.top+c.bottom);k.subtract(a,b,a);d.size=a;(a=d.viewpoint)&&(this.viewpoint=a)}},b}(b.declared(m));return a([b.shared({transform:{dependsOn:["padding"]}})],
e.prototype,"properties",void 0),a([b.property({dependsOn:["worldScreenWidth","rotation","paddedScreenCenter","screenCenter"],readOnly:!0})],e.prototype,"clipRect",null),a([b.property()],e.prototype,"content",void 0),a([b.property({type:u})],e.prototype,"padding",null),a([b.property()],e.prototype,"size",null),a([b.property({dependsOn:["size","padding"],readOnly:!0})],e.prototype,"paddedScreenCenter",null),a([b.property()],e.prototype,"viewpoint",null),e=a([b.subclass("esri.views.2d.PaddedViewState")],
e)})},"esri/views/2d/viewpointUtils":function(){define("require exports ./libs/gl-matrix/common ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2 ../../Viewpoint ../../core/promiseUtils ../../core/Error ../../geometry/SpatialReference ../../geometry/Geometry ../../geometry/Point ../../geometry/Extent ../../geometry/support/webMercatorUtils ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u,
r,t,w,q){function v(a,c,f,e){e&&f&&!e.equals(f)&&r.canProject(e,f)&&e.isWebMercator?e.isWebMercator?(f=c[1],a=(89.99999<f?f=89.99999:-89.99999>f&&(f=-89.99999),f=Math.sin(d.toRadian(f)),b.set(a,d.toRadian(c[0])*I,.5*I*Math.log((1+f)/(1-f))))):(f=d.toDegree(c[0]/I),a=b.set(a,f-360*Math.floor((f+180)/360),d.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*c[1]/I))))):a=b.copy(a,c);return a}function x(a){return a.wkid?a:a.spatialReference||l.WGS84}function f(a,c){return c.type?b.set(a,c.x,c.y):b.copy(a,c)}
function p(a,b){return Math.max(a.width/b[0],a.height/b[1])*E(a.spatialReference)}function z(a,b,c){var f;if(!a)return null;if(Array.isArray(a)&&2===a.length&&"number"==typeof a[0]&&"number"==typeof a[1])return new n(a);if(a.reduce)return a.reduce(function(a,c){return z(c,b,a)},c);if(a instanceof g?f=a:a.geometry&&(f=a.geometry),!f)return null;var d;if(d="point"===f.type?new u({xmin:f.x,ymin:f.y,xmax:f.x,ymax:f.y,spatialReference:f.spatialReference}):f.extent,!d)return null;a=r.canProject(d,b);if(!d.spatialReference.equals(b)&&
a)d=r.project(d,b);else if(!a)return null;return c=c?c.union(d):d.clone()}function y(a,d){if(!a)return new c({targetGeometry:new n,scale:0,rotation:0});var e=d.spatialReference,k=d.size,l=d.viewpoint,m=d.constraints,h=null;"esri.Viewpoint"===a.declaredClass?h=a:a.viewpoint?h=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(h=a.target);var u=null;h&&h.targetGeometry?u=h.targetGeometry:a instanceof g?u=a:(a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target")))&&
(u=z(a.center,e)||z(a.extent,e)||z(a.target,e)||z(a,e));!u&&l&&l.targetGeometry?u=l.targetGeometry:!u&&d.extent&&(u=d.extent);var t=x(u);if(e||(e=x(d.spatialReference||d.extent||u)),!q.canProject(u,e)&&t&&!t.equals(e))return null;var r=f(b.create(),u.center?u.center:u),e=new n(v(r,r,t,e),e),t=null,t=h&&h.targetGeometry&&"point"===h.targetGeometry.type?h.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&m&&m.effectiveLODs?m.zoomToScale(a.zoom):Array.isArray(u)||
"point"===u.type||"extent"===u.type&&0===u.width&&0===u.height?d.extent?p(d.extent,k):l.scale:p(u.extent,k);d=0;return h?d=h.rotation:a.hasOwnProperty("rotation")?d=a.rotation:l&&(d=l.rotation),m&&(m.rotationEnabled||(d=0),m.snapToZoom&&(t=m.snapScale(t)),0!==m.effectiveMinScale&&(t=Math.min(m.effectiveMinScale,t)),0!==m.effectiveMaxScale&&(t=Math.max(m.effectiveMaxScale,t))),new c({targetGeometry:e,scale:t,rotation:d})}function A(a,b){var c=a.targetGeometry,f=b.targetGeometry;return c.x=f.x,c.y=
f.y,c.spatialReference=f.spatialReference,a.scale=b.scale,a.rotation=b.rotation,a}function B(a,c,f){return f?b.set(a,.5*(c[0]-f.right+f.left),.5*(c[1]-f.bottom+f.top)):b.scale(a,c,.5)}function D(b,c,f,d){return h.getTransform(b,c,f,d),a.invert(b,b)}function F(a,c,f){var e=d.toRadian(c.rotation)||0;c=Math.abs(Math.cos(e));e=Math.abs(Math.sin(e));return b.set(a,Math.round(f[1]*e+f[0]*c),Math.round(f[1]*c+f[0]*e))}function C(a){return a.scale*(1/((t.getUnitValueForSR(a.targetGeometry.spatialReference)||
H)*L*96))}function E(a){return(t.getUnitValueForSR(a)||H)*L*96}function G(a){return a.isWrappable?(a=w.getInfo(a),a.valid[1]-a.valid[0]):0}function K(a,b){return Math.round(G(a)/b)}Object.defineProperty(h,"__esModule",{value:!0});var L=39.37,H=6370997*Math.PI/180,I=6378137,N=180/Math.PI;h.create=y;h.copy=A;h.getAnchor=B;h.getExtent=function(){var a=b.create();return function(b,c,d){var e=c.targetGeometry;f(a,e);c=.5*C(c);return b.xmin=a[0]-c*d[0],b.ymin=a[1]-c*d[1],b.xmax=a[0]+c*d[0],b.ymax=a[1]+
c*d[1],b.spatialReference=e.spatialReference,b}}();h.setExtent=function(a,b,c,f,d){return h.centerAt(a,b,c.center),a.scale=p(c,f),d&&d.constraints&&d.constraints.constrain(a),a};h.getOuterExtent=function(){var a=b.create(),c=b.create();return function(b,d,e){f(a,d.targetGeometry);F(c,d,e);e=.5*C(d);return b.set({xmin:a[0]-e*c[0],ymin:a[1]-e*c[1],xmax:a[0]+e*c[0],ymax:a[1]+e*c[1],spatialReference:d.targetGeometry.spatialReference}),b}}();h.getClippedExtent=function(){var a=b.create(),c=b.create();
return function(b,d,e){var g=C(d),k=d.targetGeometry.spatialReference,l=K(k,g);f(a,d.targetGeometry);F(c,d,e);k.isWrappable&&c[0]>l&&(c[0]=l);d=.5*g;return b.set({xmin:a[0]-d*c[0],ymin:a[1]-d*c[1],xmax:a[0]+d*c[0],ymax:a[1]+d*c[1],spatialReference:k}),b}}();h.getOuterSize=F;h.getPaddingScreenTranslation=function(){var a=b.create();return function(c,f,d){return b.sub(c,b.scale(c,f,.5),B(a,f,d))}}();var S=function(){var c=a.create(),f=b.create();return function(e,g,k,l){var m=C(g);g=d.toRadian(g.rotation)||
0;return b.set(f,m,m),a.fromScaling(c,f),a.rotate(c,c,g),a.translate(c,c,h.getPaddingScreenTranslation(f,k,l)),a.translate(c,c,[0,l.top-l.bottom]),b.set(e,c[4],c[5])}}();h.getResolution=C;h.getResolutionToScaleFactor=E;h.getMatrix=function(){var c=b.create(),f=b.create(),d=b.create();return function(e,g,k,l,m,p){return b.negate(c,g),b.scale(f,k,.5*p),b.set(d,1/l*p,-1/l*p),a.identity(e),a.translate(e,e,f),m&&a.rotate(e,e,m),a.scale(e,e,d),a.translate(e,e,c),e}}();h.getTransform=function(){var a=b.create();
return function(b,c,e,g){var k=C(c),l=d.toRadian(c.rotation)||0;return f(a,c.targetGeometry),h.getMatrix(b,a,e,k,l,g)}}();h.getTransformNoRotation=function(){var a=b.create();return function(b,c,d,e){var g=C(c);return f(a,c.targetGeometry),h.getMatrix(b,a,d,g,0,e)}}();h.getWorldWidth=G;h.getWorldScreenWidth=K;h.createAsync=function(a,b){if(a=y(a,b))return m.resolve(a);a=new k("viewpointUtils-createAsync:different-spatialReference","Target spatialReference cannot be projected and is different from out spatialReference");
return m.reject(a)};h.angleBetween=function(){var a=b.create(),c=b.create(),f=b.create();return function(d,e,g){b.subtract(a,d,e);b.normalize(a,a);b.subtract(c,d,g);b.normalize(c,c);b.cross(f,a,c);d=Math.acos(b.dot(a,c)/(b.length(a)*b.length(c)))*N;return 0>f[2]&&(d=-d),isNaN(d)&&(d=0),d}}();h.addPadding=function(){var a=b.create();return function(b,c,f,d){var e=b.targetGeometry;return A(b,c),S(a,c,f,d),e.x+=a[0],e.y+=a[1],b}}();h.removePadding=function(){var a=b.create();return function(b,c,f,d){var e=
b.targetGeometry;return A(b,c),S(a,c,f,d),e.x-=a[0],e.y-=a[1],b}}();h.centerAt=function(){var a=b.create();return function(b,c,d){A(b,c);c=b.targetGeometry;var e=x(d),g=x(c);return f(a,d),v(a,a,e,g),c.x=a[0],c.y=a[1],b}}();h.pixelSizeAt=function(a,b,c){return C(b)};h.resize=function(){var a=b.create();return function(c,f,d,e,g){g||(g="center");b.sub(a,d,e);b.scale(a,a,.5);d=a[0];e=a[1];switch(g){case "center":b.set(a,0,0);break;case "left":b.set(a,-d,0);break;case "top":b.set(a,0,e);break;case "right":b.set(a,
d,0);break;case "bottom":b.set(a,0,-e);break;case "top-left":b.set(a,-d,e);break;case "bottom-left":b.set(a,-d,-e);break;case "top-right":b.set(a,d,e);break;case "bottom-right":b.set(a,d,-e)}return h.translateBy(c,f,a),c}}();h.rotateBy=function(a,b,c){return A(a,b),a.rotation+=c,a};h.rotateTo=function(a,b,c){return A(a,b),a.rotation=c,a};h.scaleBy=function(){var a=b.create();return function(c,f,d,e,g){return A(c,f),0!==d&&(h.toMap(a,e,f,g),c.scale=f.scale*d,h.toScreen(a,a,c,g),h.translateBy(c,c,b.set(a,
a[0]-e[0],e[1]-a[1]))),c}}();h.scaleTo=function(a,b,c){return A(a,b),a.scale=c,a};h.scaleAndRotateBy=function(){var a=b.create();return function(c,f,d,e,g,k){return A(c,f),0!==d&&(h.toMap(a,g,f,k),c.scale=f.scale*d,c.rotation+=e,h.toScreen(a,a,c,k),h.translateBy(c,c,b.set(a,a[0]-g[0],g[1]-a[1]))),c}}();h.padAndScaleAndRotateBy=function(){var a=b.create(),c=b.create();return function(f,d,e,g,k,l,m){return h.getPaddingScreenTranslation(c,l,m),b.add(a,k,c),g?h.scaleAndRotateBy(f,d,e,g,a,l):h.scaleBy(f,
d,e,a,l)}}();h.toMap=function(){var c=a.create();return function(a,f,d,e){return b.transformMat2d(a,f,D(c,d,e,1))}}();h.toScreen=function(){var c=a.create();return function(a,f,d,e){return b.transformMat2d(a,f,h.getTransform(c,d,e,1))}}();h.translateBy=function(){var c=b.create(),f=a.create();return function(e,g,k){A(e,g);var l=C(g),m=e.targetGeometry;return a.fromRotation(f,d.toRadian(g.rotation)||0),a.scale(f,f,b.fromValues(l,l)),b.transformMat2d(c,k,f),m.x+=c[0],m.y+=c[1],e}}()})},"esri/views/2d/libs/gl-matrix/common":function(){define([],
function(){if(!e)var e=1E-6;if(!h)var h="undefined"!=typeof Float32Array?Float32Array:Array;if(!d)var d=Math.random;var a={GLMAT_EPSILON:e,GLMAT_ARRAY_TYPE:h,GLMAT_RANDOM:d,setMatrixArrayType:function(b){a.GLMAT_ARRAY_TYPE=b}},b=Math.PI/180,c=180/Math.PI;return a.toRadian=function(a){return a*b},a.toDegree=function(a){return a*c},a.setMatrixArrayType(Array),a})},"esri/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],function(e){var h=e.GLMAT_ARRAY_TYPE;e={};return e.create=function(){var d=
new h(6);return d[0]=1,d[1]=0,d[2]=0,d[3]=1,d[4]=0,d[5]=0,d},e.clone=function(d){var a=new h(6);return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=d[4],a[5]=d[5],a},e.copy=function(d,a){return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=a[4],d[5]=a[5],d},e.identity=function(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=1,d[4]=0,d[5]=0,d},e.invert=function(d,a){var b=a[0],c=a[1],e=a[2],k=a[3],l=a[4];a=a[5];var g=b*k-c*e;return g?(g=1/g,d[0]=k*g,d[1]=-c*g,d[2]=-e*g,d[3]=b*g,d[4]=(e*a-k*l)*g,d[5]=(c*l-b*a)*
g,d):null},e.determinant=function(d){return d[0]*d[3]-d[1]*d[2]},e.multiply=function(d,a,b){var c=a[0],e=a[1],k=a[2],l=a[3],g=a[4];a=a[5];var h=b[0],u=b[1],r=b[2],t=b[3],w=b[4];b=b[5];return d[0]=c*h+k*u,d[1]=e*h+l*u,d[2]=c*r+k*t,d[3]=e*r+l*t,d[4]=c*w+k*b+g,d[5]=e*w+l*b+a,d},e.mul=e.multiply,e.rotate=function(d,a,b){var c=a[0],e=a[1],k=a[2],l=a[3],g=a[4];a=a[5];var h=Math.sin(b);b=Math.cos(b);return d[0]=c*b+k*h,d[1]=e*b+l*h,d[2]=c*-h+k*b,d[3]=e*-h+l*b,d[4]=g,d[5]=a,d},e.scale=function(d,a,b){var c=
a[1],e=a[2],k=a[3],l=a[4],g=a[5],h=b[0];b=b[1];return d[0]=a[0]*h,d[1]=c*h,d[2]=e*b,d[3]=k*b,d[4]=l,d[5]=g,d},e.translate=function(d,a,b){var c=a[0],e=a[1],k=a[2],l=a[3],g=a[4];a=a[5];var h=b[0];b=b[1];return d[0]=c,d[1]=e,d[2]=k,d[3]=l,d[4]=c*h+k*b+g,d[5]=e*h+l*b+a,d},e.fromRotation=function(d,a){var b=Math.sin(a);a=Math.cos(a);return d[0]=a,d[1]=b,d[2]=-b,d[3]=a,d[4]=0,d[5]=0,d},e.fromScaling=function(d,a){return d[0]=a[0],d[1]=0,d[2]=0,d[3]=a[1],d[4]=0,d[5]=0,d},e.fromTranslation=function(d,a){return d[0]=
1,d[1]=0,d[2]=0,d[3]=1,d[4]=a[0],d[5]=a[1],d},e.str=function(d){return"mat2d("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")"},e.frob=function(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)+Math.pow(d[3],2)+Math.pow(d[4],2)+Math.pow(d[5],2)+1)},e})},"esri/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(e){var h=e.GLMAT_ARRAY_TYPE,d=e.GLMAT_RANDOM,a={};return a.create=function(){var a=new h(2);return a[0]=0,a[1]=0,a},a.clone=function(a){var b=
new h(2);return b[0]=a[0],b[1]=a[1],b},a.fromValues=function(a,c){var b=new h(2);return b[0]=a,b[1]=c,b},a.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a},a.set=function(a,c,d){return a[0]=c,a[1]=d,a},a.add=function(a,c,d){return a[0]=c[0]+d[0],a[1]=c[1]+d[1],a},a.subtract=function(a,c,d){return a[0]=c[0]-d[0],a[1]=c[1]-d[1],a},a.sub=a.subtract,a.multiply=function(a,c,d){return a[0]=c[0]*d[0],a[1]=c[1]*d[1],a},a.mul=a.multiply,a.divide=function(a,c,d){return a[0]=c[0]/d[0],a[1]=c[1]/d[1],a},a.div=
a.divide,a.min=function(a,c,d){return a[0]=Math.min(c[0],d[0]),a[1]=Math.min(c[1],d[1]),a},a.max=function(a,c,d){return a[0]=Math.max(c[0],d[0]),a[1]=Math.max(c[1],d[1]),a},a.scale=function(a,c,d){return a[0]=c[0]*d,a[1]=c[1]*d,a},a.scaleAndAdd=function(a,c,d,e){return a[0]=c[0]+d[0]*e,a[1]=c[1]+d[1]*e,a},a.distance=function(a,c){var b=c[0]-a[0];a=c[1]-a[1];return Math.sqrt(b*b+a*a)},a.dist=a.distance,a.squaredDistance=function(a,c){var b=c[0]-a[0];a=c[1]-a[1];return b*b+a*a},a.sqrDist=a.squaredDistance,
a.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},a.len=a.length,a.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a},a.sqrLen=a.squaredLength,a.negate=function(a,c){return a[0]=-c[0],a[1]=-c[1],a},a.inverse=function(a,c){return a[0]=1/c[0],a[1]=1/c[1],a},a.normalize=function(a,c){var b=c[0],d=c[1],b=b*b+d*d;return 0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b),a},a.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]},a.cross=function(a,c,d){c=c[0]*d[1]-c[1]*d[0];return a[0]=a[1]=
0,a[2]=c,a},a.lerp=function(a,c,d,e){var b=c[0];c=c[1];return a[0]=b+e*(d[0]-b),a[1]=c+e*(d[1]-c),a},a.random=function(a,c){c=c||1;var b=2*d()*Math.PI;return a[0]=Math.cos(b)*c,a[1]=Math.sin(b)*c,a},a.transformMat2=function(a,c,d){var b=c[0];c=c[1];return a[0]=d[0]*b+d[2]*c,a[1]=d[1]*b+d[3]*c,a},a.transformMat2d=function(a,c,d){var b=c[0];c=c[1];return a[0]=d[0]*b+d[2]*c+d[4],a[1]=d[1]*b+d[3]*c+d[5],a},a.transformMat3=function(a,c,d){var b=c[0];c=c[1];return a[0]=d[0]*b+d[3]*c+d[6],a[1]=d[1]*b+d[4]*
c+d[7],a},a.transformMat4=function(a,c,d){var b=c[0];c=c[1];return a[0]=d[0]*b+d[4]*c+d[12],a[1]=d[1]*b+d[5]*c+d[13],a},a.forEach=function(){var b=a.create();return function(a,d,e,l,g,h){d||(d=2);e||(e=0);for(l=l?Math.min(l*d+e,a.length):a.length;l>e;e+=d)b[0]=a[e],b[1]=a[e+1],g(b,b,h),a[e]=b[0],a[e+1]=b[1];return a}}(),a.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},a})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../geometry/Extent ./viewpointUtils ./libs/gl-matrix/vec2 ./libs/gl-matrix/mat2d".split(" "),
function(e,h,d,a,b,c,m,k,l,g){e=n=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.pixelRatio=1,b.size=[0,0],b}return d(b,a),Object.defineProperty(b.prototype,"center",{get:function(){var a=this.viewpoint.targetGeometry;return l.set(l.create(),a.x,a.y)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"extent",{get:function(){return k.getExtent(new m,this.viewpoint,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",
{get:function(){return this.size?this.size[1]:0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"id",{get:function(){return this._get("id")+1},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"inverseTransform",{get:function(){return g.invert(g.create(),this.transform)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"latitude",{get:function(){return this.viewpoint.targetGeometry.latitude},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,
"longitude",{get:function(){return this.viewpoint.targetGeometry.longitude},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"resolution",{get:function(){return k.getResolution(this.viewpoint)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"rotation",{get:function(){return this.viewpoint.rotation},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"scale",{get:function(){return this.viewpoint.scale},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,
"screenCenter",{get:function(){return l.scale(l.create(),this.size,.5)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"spatialReference",{get:function(){return this.viewpoint.targetGeometry.spatialReference},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"transform",{get:function(){return k.getTransform(g.create(),this.viewpoint,this.size,this.pixelRatio)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"transformNoRotation",{get:function(){return k.getTransformNoRotation(g.create(),
this.viewpoint,this.size,this.pixelRatio)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"clippedExtent",{get:function(){return k.getClippedExtent(new m,this.viewpoint,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"width",{get:function(){return this.size?this.size[0]:0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"worldScreenWidth",{get:function(){return k.getWorldScreenWidth(this.spatialReference,this.resolution)},enumerable:!0,
configurable:!0}),Object.defineProperty(b.prototype,"worldWidth",{get:function(){return k.getWorldWidth(this.spatialReference)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"wrappable",{get:function(){return!!this.spatialReference&&this.spatialReference.isWrappable},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"x",{get:function(){return this.center[0]},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.center[1]},
enumerable:!0,configurable:!0}),b.prototype.copy=function(a){return this.viewpoint&&this.size?(this._set("viewpoint",k.copy(this.viewpoint,a.viewpoint)),this._set("size",l.copy(this.size,a.size))):(this.viewpoint=a.viewpoint.clone(),l.copy(this.size,a.size)),this._set("pixelRatio",a.pixelRatio),this},b.prototype.clone=function(){return new n({viewpoint:this.viewpoint.clone(),size:l.clone(this.size)})},b.prototype.toMap=function(a,b){return l.transformMat2d(a,b,this.inverseTransform)},b.prototype.toScreen=
function(a,b){return l.transformMat2d(a,b,this.transform)},b.prototype.pixelSizeAt=function(a){return k.pixelSizeAt(a,this.viewpoint,this.size)},b}(b.declared(c));a([b.property({dependsOn:["viewpoint"]})],e.prototype,"center",null);a([b.property({readOnly:!0,dependsOn:["viewpoint","size"]})],e.prototype,"extent",null);a([b.property({readOnly:!0,dependsOn:["size"]})],e.prototype,"height",null);a([b.property({value:0,readOnly:!0,dependsOn:["transform"]})],e.prototype,"id",null);a([b.property({readOnly:!0,
dependsOn:["transform"]})],e.prototype,"inverseTransform",null);a([b.property({readOnly:!0,dependsOn:["viewpoint"]})],e.prototype,"latitude",null);a([b.property({readOnly:!0,dependsOn:["viewpoint"]})],e.prototype,"longitude",null);a([b.property()],e.prototype,"pixelRatio",void 0);a([b.property({readOnly:!0,dependsOn:["viewpoint"]})],e.prototype,"resolution",null);a([b.property({readOnly:!0,dependsOn:["viewpoint"]})],e.prototype,"rotation",null);a([b.property({readOnly:!0,dependsOn:["viewpoint"]})],
e.prototype,"scale",null);a([b.property({readOnly:!0,dependsOn:["size"]})],e.prototype,"screenCenter",null);a([b.property()],e.prototype,"size",void 0);a([b.property({readOnly:!0,dependsOn:["viewpoint"]})],e.prototype,"spatialReference",null);a([b.property({readOnly:!0,dependsOn:["viewpoint","size","pixelRatio"]})],e.prototype,"transform",null);a([b.property({readOnly:!0,dependsOn:["viewpoint","size","pixelRatio"]})],e.prototype,"transformNoRotation",null);a([b.property()],e.prototype,"viewpoint",
void 0);a([b.property({readOnly:!0,dependsOn:["viewpoint","size"]})],e.prototype,"clippedExtent",null);a([b.property({readOnly:!0,dependsOn:["size"]})],e.prototype,"width",null);a([b.property({readOnly:!0,dependsOn:["worldWidth","resolution"]})],e.prototype,"worldScreenWidth",null);a([b.property({readOnly:!0,dependsOn:["spatialReference"]})],e.prototype,"worldWidth",null);a([b.property({readOnly:!0,dependsOn:["spatialReference"]})],e.prototype,"wrappable",null);a([b.property({readOnly:!0,dependsOn:["center"]})],
e.prototype,"x",null);a([b.property({readOnly:!0,dependsOn:["center"]})],e.prototype,"y",null);e=n=a([b.subclass("esri.views.2d.ViewState")],e);var n;return e})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Evented ../../layers/support/LOD ./constraints/ZoomConstraint ./constraints/RotationConstraint".split(" "),function(e,h,d,
a,b,c,m,k,l,g){e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.enabled=!0,b.lods=null,b.minScale=0,b.maxScale=0,b.minZoom=-1,b.maxZoom=-1,b.rotationEnabled=!0,b.snapToZoom=!0,b}return d(b,a),b.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)},b.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)},Object.defineProperty(b.prototype,"_rotation",{get:function(){return new g({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"_zoom",{get:function(){return new l({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0}),b.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b},b.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||b>=a},b.prototype.constrain=function(a,b){return this.enabled?(this._zoom.constrain(a,b),this._rotation.constrain(a,b),a):a},b.prototype.fit=function(a){return this.enabled&&this.snapToZoom?(this._zoom.fit(a),a):a},b.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)},b.prototype.scaleToZoom=function(a){return this._zoom.scaleToZoom(a)},
b.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)},b.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)},b.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)},b}(b.declared(c,m));return a([b.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],e.prototype,"effectiveLODs",void 0),a([b.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],e.prototype,"effectiveMinScale",void 0),a([b.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],
e.prototype,"effectiveMaxScale",void 0),a([b.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],e.prototype,"effectiveMinZoom",void 0),a([b.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],e.prototype,"effectiveMaxZoom",void 0),a([b.property()],e.prototype,"enabled",void 0),a([b.property({type:[k]})],e.prototype,"lods",void 0),a([b.property()],e.prototype,"minScale",void 0),a([b.property()],e.prototype,"maxScale",void 0),a([b.property()],e.prototype,"minZoom",void 0),a([b.property()],
e.prototype,"maxZoom",void 0),a([b.property()],e.prototype,"rotationEnabled",void 0),a([b.property()],e.prototype,"snapToZoom",void 0),a([b.property()],e.prototype,"view",void 0),a([b.property({type:g,dependsOn:["rotationEnabled"]})],e.prototype,"_rotation",null),a([b.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],e.prototype,"_defaultLODs",null),a([b.property({readOnly:!0,type:l,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],
e.prototype,"_zoom",null),e=a([b.subclass("esri.views.2d.MapViewConstraints")],e)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../layers/support/LOD".split(" "),function(e,h,d,a,b,c,m){e=k=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b._lodByScale={},b._scales=[],b.effectiveLODs=
null,b.effectiveMinZoom=-1,b.effectiveMaxZoom=-1,b.effectiveMinScale=0,b.effectiveMaxScale=0,b.enabled=!0,b.lods=null,b.minZoom=-1,b.maxZoom=-1,b.minScale=0,b.maxScale=0,b.snapToZoom=!0,b}return d(b,a),b.prototype.initialize=function(){var a=this,b=this.lods,c=this.minScale,d=this.maxScale,e=this.minZoom,g=this.maxZoom,k=-1,l=-1,f=!1,m=!1;if(0!==c&&0!==d&&d>c&&(y=[d,c],c=y[0],d=y[1]),!b||!b.length)return this._set("effectiveMinScale",c),void this._set("effectiveMaxScale",d);b=b.map(function(a){return a.clone()});
b.sort(function(a,b){return b.scale-a.scale});b.forEach(function(a,b){return a.level=b});for(var h,y=0,A=b;y<A.length;y++){var B=A[y];!f&&0<c&&c>=B.scale&&(k=B.level,f=!0);!m&&0<d&&d>=B.scale&&(l=h?h.level:-1,m=!0);h=B}-1===e&&(e=0===c?0:k);-1===g&&(g=0===d?b.length-1:l);e=Math.max(e,0);e=Math.min(e,b.length-1);g=Math.max(g,0);g=Math.min(g,b.length-1);e>g&&(D=[g,e],e=D[0],g=D[1]);c=b[e].scale;d=b[g].scale;b.splice(0,e);b.splice(g-e+1,b.length);b.forEach(function(b,c){a._lodByScale[b.scale]=b;a._scales[c]=
b.scale});this._set("effectiveLODs",b);this._set("effectiveMinZoom",e);this._set("effectiveMaxZoom",g);this._set("effectiveMinScale",c);this._set("effectiveMaxScale",d);var y,D},b.prototype.constrain=function(a,b){if(!this.enabled||b&&a.scale===b.scale)return a;var c=this.effectiveMinScale,d=this.effectiveMaxScale,e=a.targetGeometry,g=b&&b.targetGeometry,k=0!==c&&a.scale>c;if(0!==d&&a.scale<d||k)c=k?c:d,g&&(b=(c-b.scale)/(a.scale-b.scale),e.x=g.x+(e.x-g.x)*b,e.y=g.y+(e.y-g.y)*b),a.scale=c;return this.snapToZoom&&
this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale)),a},b.prototype.fit=function(a){if(!this.effectiveLODs)return this.constrain(a,null);var b=a.scale,c=Math.round(this.scaleToZoom(b));return.95<Math.abs(c-Math.round(c))?a.scale=this.snapToPreviousScale(b):a.scale=this.zoomToScale(Math.round(c)),a},b.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var c=Math.round(a);
return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])},b.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b,c,d=this._scales,e=0,g=d.length-1;for(e;g>e;e++){if(b=d[e],c=d[e+1],a>=b)return e+this.effectiveMinZoom;if(c===a)return e+1+this.effectiveMinZoom;if(b>a&&a>c)return e+1-(a-c)/(b-c)+this.effectiveMinZoom}return e},b.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))},b.prototype.snapToNextScale=function(a,
b){if(void 0===b&&(b=.5),!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)},b.prototype.snapToPreviousScale=function(a,b){if(void 0===b&&(b=2),!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)},b.prototype.clone=function(){return new k({enabled:this.enabled,lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})},b.prototype._getClosestScale=function(a){return this._lodByScale[a]?
this._lodByScale[a].scale:(a=this._scales.reduce(function(b,c,d,e){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]),this._lodByScale[a].scale)},b}(b.declared(c));a([b.property({readOnly:!0})],e.prototype,"effectiveLODs",void 0);a([b.property({readOnly:!0})],e.prototype,"effectiveMinZoom",void 0);a([b.property({readOnly:!0})],e.prototype,"effectiveMaxZoom",void 0);a([b.property({readOnly:!0})],e.prototype,"effectiveMinScale",void 0);a([b.property({readOnly:!0})],e.prototype,"effectiveMaxScale",
void 0);a([b.property()],e.prototype,"enabled",void 0);a([b.property({type:[m]})],e.prototype,"lods",void 0);a([b.property()],e.prototype,"minZoom",void 0);a([b.property()],e.prototype,"maxZoom",void 0);a([b.property()],e.prototype,"minScale",void 0);a([b.property()],e.prototype,"maxScale",void 0);a([b.property()],e.prototype,"snapToZoom",void 0);e=k=a([b.subclass("esri.views.2d.constraints.ZoomConstraint")],e);var k;return e})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor".split(" "),
function(e,h,d,a,b,c){e=m=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.enabled=!0,b.rotationEnabled=!0,b}return d(b,a),b.prototype.constrain=function(a,b){return this.enabled?(this.rotationEnabled||(a.rotation=0),a):a},b.prototype.clone=function(){return new m({enabled:this.enabled,rotationEnabled:this.rotationEnabled})},b}(b.declared(c));a([b.property()],e.prototype,"enabled",void 0);a([b.property()],e.prototype,"rotationEnabled",void 0);e=m=a([b.subclass("esri.views.2d.constraints.RotationConstraint")],
e);var m;return e})},"esri/views/2d/AnimationManager":function(){define("../../core/Accessor ../../core/Scheduler ../../core/now ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(e,h,d,a,b,c){var m=function(a,c,d,e){var g=a.targetGeometry,k=c.targetGeometry;e?"string"==typeof e&&(e=b.parse(e)||b.ease):e=b.ease;this.easing=e;this.duration=d;this.sCenterX=g.x;this.sCenterY=g.y;this.sScale=a.scale;this.sRotation=a.rotation;this.tCenterX=k.x;this.tCenterY=k.y;this.tScale=c.scale;this.tRotation=
c.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};m.prototype.applyRatio=function(a,b){var c,d,e,k,l=this.easing(b);1<=b?(c=this.tCenterX,d=this.tCenterY,e=this.tRotation,k=this.tScale):(c=this.sCenterX+l*this.dCenterX,d=this.sCenterY+l*this.dCenterY,e=this.sRotation+l*this.dRotation,k=this.sScale+
l*this.dScale);a.targetGeometry.x=c;a.targetGeometry.y=d;a.scale=k;a.rotation=e};return e.createSubclass({constructor:function(){this._updateTask=h.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},getDefaults:function(){return{viewpoint:c.create()}},properties:{animation:null,duration:{value:200},transition:{value:null},easing:{value:b.ease},viewpoint:null},animate:function(a,b,e){this.stop();return c.copy(this.viewpoint,b),this.transition=new m(this.viewpoint,a.target,
e&&e.duration||this.duration,e&&e.easing||this.easing),a.always(function(){this.animation===a&&this._updateTask&&(this._updateTask.pause(),this.animation=null,this.updateFunction=null)}.bind(this)),this._startTime=d(),this._updateTask.resume(),this.animation=a,a},animateContinous:function(b,c){this.stop();this.updateFunction=c;this.viewpoint=b;var e=new a({target:b.clone()});return e.always(function(){this.animation===e&&this._updateTask&&(this._updateTask.pause(),this.animation=null,this.updateFunction=
null)}.bind(this)),this._startTime=d(),this._updateTask.resume(),this.animation=e,e},stop:function(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)},_postRender:function(b){var c=this.animation;if(!c||c.state===a.STOPPED)return void this._updateTask.pause();this.updateFunction?this.updateFunction(this.viewpoint,b.deltaTime):(b=(d()-this._startTime)/this.transition.duration,c=1<=b,this.transition.applyRatio(this.viewpoint,b),c&&this.animation.finish());this.animation._dfd.progress(this.viewpoint)}})})},
"esri/views/2d/unitBezier":function(){define([],function(){var e=function(d,a,b,c){function e(a,b){var c,d,e,f,m;b=null==b?1E-6:b;e=a;for(m=0;8>m;m++){if(f=((g*e+l)*e+k)*e-a,Math.abs(f)<b)return e;if(d=(3*g*e+2*l)*e+k,1E-6>Math.abs(d))break;e-=f/d}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c&&!(f=((g*e+l)*e+k)*e,Math.abs(f-a)<b);)a>f?c=e:d=e,e=.5*(d-c)+c;return e}var k=3*d,l=3*(b-d)-k,g=1-k-l,h=3*a,u=3*(c-a)-h,r=1-h-u;return function(a,b){a=e(a,b);return((r*a+u)*a+h)*a}},h=/^cubic-bezier\((.*)\)/;
return e.parse=function(d){var a=e[d]||null;!a&&(d=h.exec(d))&&(d=d[1].split(",").map(function(a){return parseFloat(a.trim())}),4!==d.length||d.some(function(a){return isNaN(a)})||(a=e.apply(e,d)));return a},e.ease=e(.25,.1,.25,1),e.linear=e(0,0,1,1),e.easeIn=e["ease-in"]=e(.42,0,1,1),e.easeOut=e["ease-out"]=e(0,0,.58,1),e.easeInOut=e["ease-in-out"]=e(.42,0,.58,1),e})},"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang dojo/on dojo/dom dojo/dom-construct ../core/Accessor ../core/HandleRegistry ../core/Scheduler ../core/watchUtils ../widgets/Popup ./PopupManager ./ui/DefaultUI ../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q){var v=[0,0];e=function(a){function f(){var b=a.call(this)||this;return b.height=0,b.position=null,b.resizing=!1,b.root=null,b.surface=null,b.suspended=!0,b.width=0,Object.defineProperty(b,"_measureInfo",{enumerable:!1,writable:!1,value:{task:null,freq:16,time:750}}),b._domHandles=new g,b.watch("interacting",function(a){var c=b.surface;c&&c.setAttribute("data-interacting",a.toString())}),b}return d(f,a),f.prototype.getDefaults=function(){return b.mixin(this.inherited(arguments),
{popup:{},ui:{}})},f.prototype.initialize=function(){var a=this,b=this._measureInfo,f=null;u.init(this,"container",function(d,e,g,k){if(null!=d||null!=e)f&&(f.remove(),f=null,b.freq=16,b.time=750),b.task&&(b.task.remove(),b.task=null),d?(f=c(window,"resize",function(){b.freq=16;b.time=750}),b.task=n.addFrameTask({prepare:function(b){var c=a._measureInfo;(c.time+=b.deltaTime,c.time<c.freq)||(c.time=0,a._measure()?(c.freq=16,a._set("resizing",!0)):(c.freq=Math.min(750,2*c.freq),512<=c.freq&&a._set("resizing",
!1)))}})):a._set("resizing",!1),a._measure(),d=a.root,e=a.surface,g=a.width,k=a.height,d&&e&&g&&k&&(d.style.width=e.style.width=g+"px",d.style.height=e.style.height=k+"px")})},f.prototype.destroy=function(){this.ui.destroy();this.popup&&this.popup.destroy();this.container=null},Object.defineProperty(f.prototype,"container",{set:function(a){var b=this._get("container");if(b!==a){if(b&&(b.classList.remove("esri-view"),this.popupManager.destroy(),this.popupManager=null,k.destroy(this.root),this._set("root",
null)),a){a.classList.add("esri-view");b=document.createElement("div");b.className="esri-view-root";a.insertBefore(b,a.firstChild);this._set("root",b);var c=document.createElement("div");c.className="esri-view-surface";m.setSelectable(c,!1);b.appendChild(c);this._set("surface",c);this._forceReadyCycle();this.popupManager=new t({enabled:!0,view:this})}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null);this._set("container",
a)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"popup",{set:function(a){var b=this._get("popup");a!==b&&(this._domHandles.remove("view-popup"),b&&b.destroy(),a&&(a.viewModel.view=this,a._started||a.startup(),this._domHandles.add([u.init(this,"root",function(b,c){var f=a.domNode;m.isDescendant(f.parentNode,c)&&f.parentNode.removeChild(f);b&&!f.parentNode&&a.placeAt(b)})],"view-popup")),this._set("popup",a))},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,
"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"ui",{set:function(a){var b=this._get("ui");a!==b&&(this._domHandles.remove("ui"),b&&b.destroy(),a&&(a.view=this,this._domHandles.add([u.init(this,"root",function(b){a.container=b?k.create("div",null,b):null})],"ui")),this._set("ui",a))},enumerable:!0,configurable:!0}),f.prototype.pageToContainer=function(a,b,c){var f=this.position;return a-=f[0],b-=f[1],c?(c[0]=a,c[1]=b):c=[a,
b],c},f.prototype.containerToPage=function(a,b,c){var f=this.position;return a+=f[0],b+=f[1],c?(c[0]=a,c[1]=b):c=[a,b],c},f.prototype._measure=function(){var a=this.container,b=a?a.clientWidth:0,c=a?a.clientHeight:0;if(0===b||0===c||"hidden"===window.getComputedStyle(a).visibility)return this._set("suspended",!0),!1;var f=this.root,d=this.surface,e=this.width,g=this.height,k=this.position;if(b===e&&c===g)return this._set("suspended",!1),!1;f&&d&&(f.style.width=d.style.width=b+"px",f.style.height=
d.style.height=c+"px");this._set("width",b);this._set("height",c);this._set("suspended",!1);f=(a.ownerDocument||window.document).defaultView;a=a.getBoundingClientRect();a=(v[0]=a.left+f.pageXOffset,v[1]=a.top+f.pageYOffset,v);return k&&a[0]===k[0]&&a[1]===k[1]||this._set("position",a.slice()),this.emit("resize",{oldWidth:e,oldHeight:g,width:b,height:c}),!0},f}(q.declared(l));return a([q.property({value:null,cast:function(a){return m.byId(a)}})],e.prototype,"container",null),a([q.property({readOnly:!0})],
e.prototype,"height",void 0),a([q.property({type:r})],e.prototype,"popup",null),a([q.property({readOnly:!0})],e.prototype,"position",void 0),a([q.property({readOnly:!0})],e.prototype,"resizing",void 0),a([q.property({readOnly:!0})],e.prototype,"root",void 0),a([q.property({value:null,dependsOn:["width","height"],readOnly:!0})],e.prototype,"size",null),a([q.property({readOnly:!0})],e.prototype,"surface",void 0),a([q.property({readOnly:!0})],e.prototype,"suspended",void 0),a([q.property({type:w})],
e.prototype,"ui",null),a([q.property({readOnly:!0})],e.prototype,"width",void 0),e=a([q.subclass("esri.views.DOMContainer")],e)})},"esri/widgets/Popup":function(){define("./support/viewModelWiring ./Widgette ./Popup/PopupViewModel ../core/HandleRegistry ../core/watchUtils ../views/2d/viewpointUtils dijit/a11yclick dijit/_TemplatedMixin dojo/keys dojo/on dojo/query dojo/Deferred dojo/i18n!./Popup/nls/Popup dojo/text!./Popup/templates/Popup.html ../core/lang dojo/_base/lang dojo/dom-class dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style ./Popup/PopupRenderer ./Popup/PopupRendererViewModel ./Spinner require".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y,A,B,D){var F=D.toUrl("./Popup/images/default-action.svg"),C={hidden:"esri-hidden",invisible:"esri-invisible",iconText:"esri-icon-font-fallback-text",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",
iconPaginationMenu:"esri-icon-layer-list",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-rotating esri-icon-loading-indicator",iconZoom:"esri-icon-zoom-in-magnifying-glass",base:"esri-popup",container:"esri-popup__position-container",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",shadow:"esri-popup--shadow",showDock:"esri-popup--dock-button-visible",showContent:"esri-popup--content-visible",showFooter:"esri-popup--footer-visible",showTitle:"esri-popup--title-visible",
showPagination:"esri-popup--pagination-visible",hasPopupRenderer:"esri-popup--has-popup-renderer",hasPromiseFeatures:"esri-popup--has-promise-features",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",
canDockToLeft:"esri-popup--can-dock-to-left",canDockToRight:"esri-popup--can-dock-to-right",canDockToTop:"esri-popup--can-dock-to-top",canDockToBottom:"esri-popup--can-dock-to-bottom",hasPaginationMenuOpen:"esri-popup--feature-menu-open",alignTop:"esri-popup--top-aligned",alignBottom:"esri-popup--bottom-aligned",alignLeftTop:"esri-popup--left-top-aligned",alignLeftBottom:"esri-popup--left-bottom-aligned",alignRightTop:"esri-popup--right-top-aligned",alignRightBottom:"esri-popup--right-bottom-aligned",
hasPendingPromises:"esri-popup--has-pending-promises",isPendingPromisesResult:"esri-popup--is-pending-promises-result",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",button:"esri-popup__button",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",actions:"esri-popup__actions",action:"esri-popup__action",
actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",pagination:"esri-popup__pagination",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",
paginationText:"esri-popup__pagination-page-text",paginationDocked:"esri-popup__pagination-docked",paginationDockedButtons:"esri-popup__pagination-docked-buttons",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",
featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title"},E={auto:"auto",topLeft:"top-left",topCenter:"top-center",topRight:"top-right",bottomLeft:"bottom-left",bottomCenter:"bottom-center",bottomRight:"bottom-right"},G={buttonEnabled:!0,position:E.auto,breakpoint:{width:544}},K={popupRenderer:"popup-renderer",acions:"actions",actionsChange:"actions-change",paginationTitles:"pagination-titles",view:"view"};return h.createSubclass([k],{declaredClass:"esri.widgets.Popup",
baseClass:C.base,templateString:t,constructor:function(){this._handleRegistry=new a;this._contentStorage=f.create("div");this._repositionTimeoutHandle=0},postCreate:function(){var a=this;this.inherited(arguments);var c=this.viewModel;this.own(b.init(c,"visible",function(a){v.remove(this._containerNode,C.hasPaginationMenuOpen);v.toggle(this.domNode,C.invisible,!a);this._togglePopupLocationRepositioning(a);this._toggleContentVisibility(a);this._autoAlign();this.reposition()}.bind(this)),b.watch(this,
"viewModel.view",function(a,b){a&&b&&(this.close(),this.clear())}.bind(this)),b.watch(this,"viewModel.view.ready",function(a,b){a?this._wireUpView(this.viewModel.view):b&&(this.close(),this.clear())}.bind(this)),b.init(c,"pendingPromisesCount,featureCount,promises,location",function(){var a=this.viewModel;this._displayPendingFeaturesStatus(a.pendingPromisesCount,a.featureCount,a.promises,a.location)}.bind(this)),b.init(c,"features",this._updateFeatures.bind(this)),b.init(c,"selectedFeatureIndex,selectedFeature",
function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateActions(a.actions,a.features,a.selectedFeature);this._updatePageText(a.features,a.selectedFeatureIndex);this._createPaginationNodes(a.features,a.selectedFeatureIndex);this._bodyContentNode.scrollTop=0}.bind(this)),b.init(c,"title",function(a){this._updateTitle(a);this.reposition()}.bind(this)),b.watch(this,"viewModel.waitingForResult, _popupRenderer.viewModel.waitingForContent",function(){this._repositionTimeoutHandle||
(this._repositionTimeoutHandle=setTimeout(function(){this._repositionTimeoutHandle=0;this._autoAlign();this.reposition()}.bind(this),50))}.bind(this)),b.init(c,"actions",function(a){var b=this.viewModel;this._updateActions(a,b.features,b.selectedFeature);this._actionChangeListener(a)}.bind(this)),b.init(c,"content",function(a){this._updateContent(a);this.reposition()}.bind(this)),b.init(c,"location",function(a){this._togglePopupLocationRepositioning(this.visible);this._autoAlign();this.reposition()}.bind(this)),
g(this._dockNode,m,this._toggleDock.bind(this)),g(this._closeNode,m,this.close.bind(this)),g(this._previousNode,m,c.previous.bind(c)),g(this._previousDockedNode,m,c.previous.bind(c)),g(this._nextNode,m,c.next.bind(c)),g(this._nextDockedNode,m,c.next.bind(c)),g(this._pageMenuNode,m,this._togglePageMenu.bind(this)),g(this._pageMenuDockedNode,m,this._togglePageMenu.bind(this)),g(this._pageMenuInfoNode,m,this._togglePageMenu.bind(this)),g(this._paginationNode,g.selector("li",m),function(){a._selectFeature(this)}),
g(this._paginationNode,g.selector("li","keyup"),function(b){a._keyupFeature(b,this)}),g(this._actionsNode,g.selector("[data-action-index]",m),function(){a._actionEvent(this)}),g(c,"trigger-action",function(a){a.action&&"zoom-to"===a.action.id&&this.viewModel.zoomToLocation()}.bind(this)));e.setUpEventDelegates(this,"trigger-action")},destroy:function(){this._destroyPopupRendererVMs();this._destroySpinner();this._destroyPopupRenderer();this._handleRegistry.destroy();this._handleRegistry=null;this._repositionTimeoutHandle&&
(clearTimeout(this._repositionTimeoutHandle),this._repositionTimeoutHandle=0);this._repositionTimeoutHandle=0},properties:{_popupRenderer:{readOnly:!0,value:null},actions:{aliasOf:"viewModel.actions"},alignment:{value:"top",set:function(a){this._set("alignment",a);this.reposition()}},autoPanEnabled:!0,autoAlignmentEnabled:!1,content:{aliasOf:"viewModel.content"},closeOnViewChangeEnabled:!1,currentDockPosition:{readOnly:!0,value:null},dockOptions:{value:G,set:function(a){var b=q.clone(G),c=this.viewModel.get("view.breakpoints"),
f={};c&&(f.width=c.xsmall,f.height=c.xsmall);a=q.mixin({},b,a);b=q.mixin({},b.breakpoint,f);!0===a.breakpoint?a.breakpoint=b:"object"===typeof a.breakpoint&&(a.breakpoint=q.mixin({},b,a.breakpoint));this._set("dockOptions",a);this._toggleDockButton(a)}},dockEnabled:{value:!1,set:function(a){this._set("dockEnabled",a);this._togglePopupDocking(a);this._togglePopupLocationRepositioning(this.visible);this._autoAlign();this.reposition()}},featureCount:{aliasOf:"viewModel.featureCount"},features:{aliasOf:"viewModel.features"},
highlightEnabled:{aliasOf:"viewModel.highlightEnabled"},location:{aliasOf:"viewModel.location"},paginationEnabled:{value:!0,set:function(a){var b=this.viewModel;this._set("paginationEnabled",a);this._updatePagination(b.features,b.selectedFeatureIndex);this._updateFooterVisibility(b.features,b.actions);this.reposition()}},promises:{aliasOf:"viewModel.promises"},selectedFeature:{aliasOf:"viewModel.selectedFeature"},selectedFeatureIndex:{aliasOf:"viewModel.selectedFeatureIndex"},spinnerEnabled:{value:!0,
set:function(a){this._set("spinnerEnabled",a);this._createSpinner(a,this.viewModel.view)}},title:{aliasOf:"viewModel.title"},view:{aliasOf:"viewModel.view"},viewModel:{type:d},visible:{aliasOf:"viewModel.visible"}},_css:C,_i18n:r,_hideActionsTextNum:3,_animationDelay:10,_pointerOffset:16,_popupRendererVMs:[],clear:e.createMethodDelegate("clear"),close:function(){this.set("visible",!1)},next:e.createMethodDelegate("next"),previous:e.createMethodDelegate("previous"),reposition:function(){this._positionPopup();
return this._moveIntoView()},open:function(a){var b=q.mixin({updateLocationEnabled:!1},a);this.viewModel.set(b);a&&a.promises?this.set("visible",!1):this.set("visible",!0)},triggerAction:e.createMethodDelegate("triggerAction"),_actionChangeListener:function(a){this._handleRegistry.remove(K.actionsChange);a&&this._handleRegistry.add([a.on("change",function(){var a=this.viewModel;this._updateActions(a.actions,a.features,a.selectedFeature)}.bind(this))],K.actionsChange)},_actionEvent:function(a){var b=
this.viewModel;if(a=x.get(a,"data-action-index"))a=parseInt(a,10),b.triggerAction(a)},_addContent:function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateContent(a.content);this._updateTitle(a.title);this._updatePageText(a.features,a.selectedFeatureIndex)},_updateActions:function(a,b,c){this._updateActionButtons(a,c);this._updateFooterVisibility(b,a);this.reposition()},_contentIsPopupRenderer:function(){var a=this.get("viewModel.content"),b=this.get("_popupRenderer.domNode");
return!(!a||!b||a!==b)},_updateActionButtons:function(a,c){this._handleRegistry.remove(K.actions);if(this._actionsNode){var d=document.createDocumentFragment(),e=a.length;e&&a.forEach(function(a,g){"zoom-to"===a.id&&(a.title=this._i18n.zoom,a.className=C.iconZoom);var k=a.title,l=a.className,m=a.image;m||l||(m=F);var h=c&&c.attributes;h&&(k=k?w.substitute(h,k):"",l=l?w.substitute(h,l):null,m=m?w.substitute(h,m):null);var p=f.create("div",{tabindex:"0",title:k},d);x.set(p,"data-action-index",g);v.add(p,
[C.button,C.action]);var n=f.create("span",{"aria-hidden":!0},p);v.add(n,C.icon);l&&v.add(n,l);m&&(v.add(n,C.actionImage),z.set(n,"background-image","url("+m+")"));g={className:C.actionText,textContent:k};e>=this._hideActionsTextNum&&(g.className=C.iconText);var u=f.create("span",g,p);this._handleRegistry.add([b.init(a,"visible",function(a){v.toggle(p,C.hidden,!a)}),b.init(a,"className",function(a,b){h&&(a=w.substitute(h,a),b=w.substitute(h,b));v.remove(n,b);v.add(n,a)}),b.init(a,"image",function(a){h&&
(a=w.substitute(h,a));v.toggle(n,C.actionImage,!!a);z.set(n,"background-image",a?"url("+a+")":"")}),b.init(a,"title",function(a){h&&(a=w.substitute(h,a));a=a||"";x.set(p,"title",a);x.set(u,"textContent",a)})],K.actions)},this);f.place(d,this._actionsNode,"only")}},_getLocationScreenPoint:function(){var a=this.viewModel,b;if(a.location&&this.visible){var c=a.location;c&&a.get("view.ready")&&(b=a.view.toScreen(c))}return b},_calculatePosition:function(a,b,c){var f=this.alignment,d,e=this._pointerOffset,
g=null,k=null,l=null,m=null;if(a&&b&&c){d=b.h;if("top"===f||"bottom"===f)d+=e;b=b.w;if("left-top"===f||"left-bottom"===f||"right-top"===f||"right-bottom"===f)b+=e,d+=e;var h=b/2,p=a.y,v=a.x,n=c.height-p,x=c.width-v,u=b;switch(f){case "bottom":g=p+e;k=v-h;u=h;break;case "left-top":l=n+e;m=x+e;break;case "left-bottom":g=p+e;m=x+e;break;case "right-top":l=n+e;k=v+e;break;case "right-bottom":g=p+e;k=v+e;break;default:l=n+e,k=v-h,u=h}c=c.padding;c=this.dockEnabled?{left:c.left?c.left+"px":"",top:c.top?
c.top+"px":"",right:c.right?c.right+"px":"",bottom:c.bottom?c.bottom+"px":""}:{top:null!==g?g+"px":"auto",left:null!==k?k+"px":"auto",bottom:null!==l?l+"px":"auto",right:null!==m?m+"px":"auto"};return{height:d,width:b,box:{top:null!==g?g:a.y-d,left:null!==k?k:a.x-u,bottom:null!==l?l:a.y+d,right:null!==m?m:a.x+u},style:c}}},_createPopupRendererVMs:function(a){this._destroyPopupRendererVMs();a&&1<a.length&&a.forEach(function(a,b){a=new A({contentEnabled:!1,graphic:a});this._popupRendererVMs.push(a)},
this)},_destroyPopupRendererVMs:function(){this._handleRegistry.remove(K.paginationTitles);this._popupRendererVMs.forEach(function(a){a.destroy()});this._popupRendererVMs.length=0},_createPaginationNodes:function(a,c){this._handleRegistry.remove(K.paginationTitles);if(a){var d=a.length;this._paginationNode&&x.set(this._paginationNode,"innerHTML","");1<d&&(d=w.substitute({total:d},this._i18n.selectedFeatures),x.set(this._pageMenuInfoNode,"textContent",d),a.forEach(function(a,d){a=this._i18n.untitled;
var e=f.create("li",{role:"menuitem",className:C.featureMenuItem},this._paginationNode);d===c?(x.set(e,"aria-label",r.selectedFeature),v.add(e,C.featureMenuSelected)):x.set(e,"data-feature-index",d);var g=f.create("span",{className:C.featureMenuTitle,innerHTML:a},e);if(a=this._popupRendererVMs[d])a=b.init(a,"title",function(a){x.set(g,"innerHTML",a)}),this._handleRegistry.add(a,K.paginationTitles);d===c&&f.create("span",{className:C.iconCheckMark},g)},this))}},_createSpinner:function(a,b){this._destroySpinner();
a&&b&&(this._spinner=new B({container:document.createElement("div"),view:b}),f.place(this._spinner.container,b.root))},_updateContent:function(a){a&&a.nodeName?(f.place(a,this._contentStorage),f.place(a,this._bodyContentNode,"only")):"string"===typeof a&&(this._destroyPopupRenderer(),x.set(this._bodyContentNode,"innerHTML",a));this._bodyContentNode.scrollTop=0;v.toggle(this._containerNode,C.hasPopupRenderer,this._contentIsPopupRenderer());v.toggle(this._containerNode,C.showContent,!!a);v.remove(this._containerNode,
C.hasPaginationMenuOpen);this._autoAlign()},_destroyPopupRenderer:function(){this._popupRenderer&&!this._popupRenderer._destroyed&&(this._handleRegistry.remove(K.popupRenderer),this._popupRenderer.destroy(),this._set("_popupRenderer",null))},_destroySpinner:function(){this._spinner&&(this._spinner.destroy(),this._spinner=null)},_setDockEnabledForViewSize:function(a){a.breakpoint&&this.set("dockEnabled",this._shouldDockAtCurrentViewSize(a))},_togglePopupDocking:function(a){v.remove(this._containerNode,
C.hasPaginationMenuOpen);v.toggle(this._containerNode,C.isDocked,!!a);x.set(this._dockNode,"title",a?this._i18n.undock:this._i18n.dock);this._updateDockPosition(this.dockOptions)},_dockingThresholdCrossed:function(a,b,c){var f=a[0];a=a[1];var d=b[0];b=b[1];var e=c.width;c=c.height;return f<=e&&d>e||f>e&&d<=e||a<=c&&b>c||a>c&&b<=c},_determineDockPosition:function(a){var b=this.viewModel,c=b.view,f=c&&c.padding,f=c&&c.width-f.left-f.right;return(b=c&&b.get("view.breakpoints"))&&f<=b.xsmall?a.bottomCenter:
this.isLeftToRight()?a.topRight:a.topLeft},_updateDockPosition:function(a){v.remove(this._containerNode,[C.isDockedTopLeft,C.isDockedTopCenter,C.isDockedTopRight,C.isDockedBottomLeft,C.isDockedBottomCenter,C.isDockedBottomRight,C.canDockToTop,C.canDockToBottom,C.canDockToLeft,C.canDockToRight]);var b,c,f;b=a.position;b=b===E.auto?this._determineDockPosition(E):"function"===typeof b?b.call(this):b;switch(b){case E.topLeft:c=C.isDockedTopLeft;f=C.canDockToLeft;break;case E.topCenter:c=C.isDockedTopCenter;
f=C.canDockToTop;break;case E.bottomLeft:c=C.isDockedBottomLeft;f=C.canDockToLeft;break;case E.bottomCenter:c=C.isDockedBottomCenter;f=C.canDockToBottom;break;case E.bottomRight:c=C.isDockedBottomRight;f=C.canDockToRight;break;default:c=C.isDockedTopRight,f=C.canDockToRight}v.toggle(this._containerNode,f,!!a.buttonEnabled);this.dockEnabled?(v.add(this._containerNode,c),this._set("currentDockPosition",b)):this._set("currentDockPosition",null);this._popupRenderer&&this._popupRenderer.resize();this.reposition()},
_toggleDockButton:function(a){var b=this._containerNode;v.toggle(b,C.showDock,!!a.buttonEnabled);v.toggle(b,C.isDocked,!!this.dockEnabled);this._updateDockPosition(a)},_updateFooterVisibility:function(a,b){a=this._isPaginationEnabled(a)||b&&b.length;v.toggle(this._containerNode,C.showFooter,!!a)},_isPaginationEnabled:function(a){return this.paginationEnabled&&a&&1<a.length},_updatePagination:function(a,b){this._updatePageText(a,b);this._createPaginationNodes(a,b);v.toggle(this._containerNode,C.showPagination,
this._isPaginationEnabled(a))},_displayPendingFeaturesStatus:function(a,b,c,f){var d=0<a&&0===b;c=c&&c.length;a&&c&&a===c&&this.set("visible",!1);v.toggle(this._containerNode,C.hasPendingPromises,!!a);v.toggle(this._containerNode,C.isPendingPromisesResult,!!d);v.toggle(this._containerNode,C.hasPromiseFeatures,!!b);d?this._spinner&&this._spinner.show({location:f}):(this._spinner&&this._spinner.hide(),c&&b&&!this.visible?this.set("visible",!0):c&&!b&&this.visible&&this.set("visible",!1))},_moveIntoView:function(){var a=
new u;setTimeout(a.resolve.bind(this),this._animationDelay);return a.then(function(){if(!this._destroyed){var a=this.viewModel,b=this.get("viewModel.view");if(a&&b&&b.stationary){var f=this._getLocationScreenPoint();if(f){var d=this._sizePopup(),d=this._calculatePosition(f,d,b),e=b.width,g=b.height,k=b.padding,l=b.ui.padding;if(this.autoPanEnabled&&!this.autoAlignmentEnabled){if(f.y<k.top||f.y>g-k.bottom||f.x<k.left||f.x>e-k.right)return a.centerAtLocation();if(!this.dockEnabled&&d&&d.width<b.width&&
d.height<b.height){var m=f=0;d.box.top<k.top?m=-d.box.top+l.top+k.top:d.box.bottom>g-k.bottom&&(m=-(d.box.bottom-g+k.bottom)-l.bottom);d.box.left<k.left?f=d.box.left-l.left-k.left:d.box.right>e-k.right&&(f=d.box.right-e+k.right+l.right);if(f||m)return d=c.translateBy(c.create(),b.viewpoint,[f,m]),b.goTo(d,a.animationOptions)}}}}}}.bind(this))},_isScreenPointWithinView:function(a,b){return b&&a&&-1<a.x&&-1<a.y&&a.x<=b.width&&a.y<=b.height},_autoAlign:function(){if(this.autoAlignmentEnabled&&this.visible){var a=
this.get("viewModel.view"),b=this._getLocationScreenPoint();if(this._isScreenPointWithinView(b,a)){var c=this._sizePopup(),f=this._pointerOffset,d=c.h+f,c=(c.w+f)/2,e,g,k,l,f=a.padding;b.x-c<0+f.left&&(g=!0);b.x+c>a.width-f.right&&(e=!0);b.y-d<0+f.top&&(k=!0);b.y+d>a.height-f.bottom&&(l=!0);g?this._set("alignment",k?"right-bottom":"right-top"):e?this._set("alignment",k?"left-bottom":"left-top"):k?this._set("alignment",l?"top":"bottom"):this._set("alignment","top")}}},_positionPopup:function(){var a=
this.viewModel.view;if(a){v.remove(this._containerNode,[C.alignTop,C.alignBottom,C.alignLeftTop,C.alignLeftBottom,C.alignRightTop,C.alignRightBottom]);this._triggerOffset();var b;switch(this.alignment){case "bottom":b=C.alignBottom;break;case "right-top":b=C.alignRightTop;break;case "right-bottom":b=C.alignRightBottom;break;case "left-top":b=C.alignLeftTop;break;case "left-bottom":b=C.alignLeftBottom;break;default:b=C.alignTop}v.add(this._containerNode,b);b=this._getLocationScreenPoint();var c=this._sizePopup();
(a=(a=this._calculatePosition(b,c,a))&&a.style)&&z.set(this._containerNode,a)}},_removeContent:function(){this._destroyPopupRenderer();x.set(this._bodyContentNode,"innerHTML","");x.set(this._titleNode,"innerHTML","");x.set(this._pageTextNode,"innerHTML","");x.set(this._pageTextDockedNode,"innerHTML","");v.remove(this._containerNode,[C.showTitle,C.showContent])},_keyupFeature:function(a,b){var c=a.keyCode;if(c===l.UP_ARROW||c===l.DOWN_ARROW){a.stopPropagation();a.preventDefault();a=n("li",this._paginationNode);
var f=a.length;b=a.indexOf(b);var d;c===l.UP_ARROW?d=b-1:c===l.DOWN_ARROW&&(d=b+1);0>d?d=f-1:d>=f&&(d=0);a[d].focus()}},_selectFeature:function(a){var b=this.viewModel,c=-1;(a=x.get(a,"data-feature-index"))&&(c=parseInt(a,10));-1!==c&&(b.selectedFeatureIndex=c);v.remove(this._containerNode,C.hasPaginationMenuOpen);this._pageMenuNode.focus()},_updateSelectedFeature:function(a){var c=this.viewModel,d,e="",k="";if(a){if(d=a.layer)e=d.id||"",k=d.title||"";if(!this._popupRenderer||this._popupRenderer&&
this._popupRenderer._destroyed){this._handleRegistry.remove(K.popupRenderer);this._set("_popupRenderer",new y({container:f.create("div")}));d=b.init(this._popupRenderer.viewModel,"title",function(a){c.title=a});var l=b.init(this._popupRenderer.viewModel,"content",function(a){c.content=this._popupRenderer.domNode}.bind(this)),m=g(this._popupRenderer,"resize",this.reposition.bind(this));this._handleRegistry.add([d,l,m],K.popupRenderer)}this._popupRenderer.graphic=a}this._toggleFeatureUpdatedClass();
x.set(this._containerNode,"data-layer-title",k);x.set(this._containerNode,"data-layer-id",e);this.reposition()},_updateFeatures:function(a){var b=this.viewModel;this._createPopupRendererVMs(a);this._updatePagination(a,b.selectedFeatureIndex);this._updateFooterVisibility(a,b.actions);this.reposition()},_shouldDockAtCurrentViewSize:function(a){var b=this.viewModel;a=a.breakpoint;return b.view&&(a.hasOwnProperty("width")&&b.view.ui.width<=a.width||a.hasOwnProperty("height")&&b.view.ui.height<=a.height)},
_sizePopup:function(){return p.getContentBox(this._containerNode)},_updateTitle:function(a){a=a||"";x.set(this._titleNode,"innerHTML",a);v.toggle(this._containerNode,C.showTitle,!!a);v.remove(this._containerNode,C.hasPaginationMenuOpen)},_toggleDock:function(){this.set("dockEnabled",!this.dockEnabled)},_togglePageMenu:function(){v.toggle(this._containerNode,C.hasPaginationMenuOpen);var a=v.contains(this._containerNode,C.hasPaginationMenuOpen);x.set(this._pageMenuSectionNode,"aria-hidden",!a);var b=
n("li",this._paginationNode),c=b[0];b.forEach(function(b){x.set(b,"tabIndex",a?"0":"")});a?c&&c.focus():this._pageMenuNode.focus()},_updatePageText:function(a,b){var c="";this._isPaginationEnabled(a)&&(c=w.substitute({index:b+1,total:a.length},this._i18n.pageText));this._pageTextNode&&x.set(this._pageTextNode,{textContent:c});this._pageTextDockedNode&&x.set(this._pageTextDockedNode,{textContent:c})},_triggerOffset:function(){this._containerNode.offsetWidth=this._containerNode.offsetWidth},_toggleFeatureUpdatedClass:function(){v.remove(this._containerNode,
C.hasFeatureUpdated);this._triggerOffset();v.add(this._containerNode,C.hasFeatureUpdated)},_viewPointChanged:function(){this.closeOnViewChangeEnabled?this.close():this._positionPopup()},_wireUpView:function(a){this._handleRegistry.remove(K.view);this._viewPointEvent=null;if(a){var c="viewpoint";"3d"===a.type&&(c="camera");this._viewPointEvent=b.pausable(a,c,this._viewPointChanged.bind(this));this._handleRegistry.add([a.watch("padding",this.reposition.bind(this)),a.watch("size",this._updateDockEnabledForViewSize.bind(this)),
g(a,"resize",this.reposition.bind(this)),this._viewPointEvent],K.view);this._togglePopupLocationRepositioning(this.visible);this._createSpinner(this.spinnerEnabled,a);this._setDockEnabledForViewSize(this.dockOptions);this._toggleDockButton(this.dockOptions);this.reposition()}},_updateDockEnabledForViewSize:function(a,b){var c=this.get("viewModel.view.padding"),f=c.left+c.right,d=c.top+c.bottom,c=[],e=[];c[0]=a[0]-f;c[1]=a[1]-d;e[0]=b[0]-f;e[1]=b[1]-d;a=this.dockOptions;this._dockingThresholdCrossed(c,
e,a.breakpoint)&&this._setDockEnabledForViewSize(a);this._updateDockPosition(a)},_togglePopupLocationRepositioning:function(a){var b=this.viewModel;this._viewPointEvent&&(a&&b.location&&!this.dockEnabled?this._viewPointEvent.resume():this._viewPointEvent.pause())},_toggleContentVisibility:function(a){a?this._addContent():this._removeContent()}})})},"esri/widgets/support/viewModelWiring":function(){define(["../../core/watchUtils"],function(e){function h(d,a){return Array.isArray(a)||(a=[a]),a.map(function(a){return d.viewModel.on(a,
function(b){d.emit(a,b)})})}return{createGetterDelegate:function(d){var a="viewModel."+d;return function(){return this.get(a)}},createSetterDelegate:function(d){return function(a){var b=this.get("viewModel");b&&b.set(d,a)}},createMethodDelegate:function(d){var a="viewModel."+d;return function(){var b=this.get(a);return b?b.apply(this.viewModel,arguments):void 0}},setUpEventDelegates:function(d,a){var b=h(d,a),c=e.init(d,"viewModel",function(c,e){b.forEach(function(a){a.remove()});b.length=0;c&&(b=
h(d,a));d.own.apply(d,b)});d.own(c)}}})},"esri/widgets/Widgette":function(){define("../core/Accessor ../core/declare ../core/accessorSupport/metadata dijit/_WidgetBase dijit/Destroyable dijit/registry dojo/_base/lang dojo/_base/window dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/on".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u,r){function t(a){return function(b){this._set(a,b)}}function w(a,b){return function(c){q.call(this,a,b,c);this._set(a,c)}}function q(a,b,c){(Array.isArray(b)?b:[b]).forEach(function(b){var f=
this[b.node||b||"domNode"];switch(b.type||"attribute"){case "attribute":m.isFunction(c)&&(c=c.bind(this));b=b.attribute?b.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;f.tagName?n.set(f,b,c):f.set(b,c);break;case "innerText":f.innerHTML="";f.appendChild(this.ownerDocument.createTextNode(c));break;case "innerHTML":f.innerHTML=c;break;case "class":b=this._get(a),u.replace(f,c,b)}},this)}function v(a,b,c){l.around(a,b,function(b){return function(){c(a)||b.apply(a)}})}h.before(function(a,b){if(b.declaredClass===
x||h.hasMixin(a,x)){var c=d.getPropertiesMetadata(b);Object.keys(c).forEach(function(a){var b=c[a],f=b.set;a="function"==typeof f?f:null===f?t(b.name):"string"==typeof f||"object"==typeof f?w(a,f):void 0;b.set=a})}});var x="esri.widgets._WidgetBase";return e.createSubclass([b],{declaredClass:x,postscript:function(a){var b,f=this.__accessor__;a=f.ctorArgs||a;if(b=this.getDefaults?a?this.getDefaults(a):this.getDefaults({}):null,b&&Object.getOwnPropertyNames(b).forEach(function(a){f.set(a,b[a])},this),
this.postMixInProperties(),this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document),this.ownerDocumentBody=k.body(this.ownerDocument),c.add(this),this.buildRendering(),f.initialize(),a&&(this.set(a),f.ctorArgs=null),f.initialize(),this.initialize(),this.postCreate(),this.domNode){var d;(a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),d=!0);n.set(this.domNode,{widgetId:this.id,id:this.id});d&&(this.srcNodeRef=null)}this._created=
!0;this.notifyChange("container");v(this,"startup",function(a){return a._started});v(this,"destroy",function(a){return a._beingDestroyed||a._destroyed});this.autoStart&&this.startup()},getDefaults:function(a){var b={};b.id=a.id?a.id:a.srcNodeRef&&a.srcNodeRef.id||c.getUniqueId(this.declaredClass.replace(/\./g,"_"));delete a.id;return a.srcNodeRef&&(b.srcNodeRef=a.srcNodeRef,delete a.srcNodeRef),m.mixin(this.inherited(arguments),b)},normalizeCtorArgs:function(a,b){a=a||{};b=a.container||a.srcNodeRef||
b;return b&&(a.srcNodeRef=g.byId(b)),a},destroy:function(){this._customWidgetBaseDestroy()},postMixInProperties:a.prototype.postMixInProperties,buildRendering:a.prototype.buildRendering,postCreate:a.prototype.postCreate,startup:a.prototype.startup,_beingDestroyed:!1,_destroyed:!1,_created:!1,properties:{autoStart:!0,"class":{value:"",set:{node:"domNode",type:"class"}},domNode:{value:null},focused:!1,id:{value:""},srcNodeRef:{value:null},style:{value:null,set:a.prototype._setStyleAttr},widgetId:{}},
destroyDescendants:a.prototype.destroyDescendants,destroyRecursive:a.prototype.destroyRecursive,destroyRendering:a.prototype.destroyRendering,emit:a.prototype.emit,on:function(a,b){return this.own(r(this.domNode,a,b))[0]},toString:a.prototype.toString,getChildren:a.prototype.getChildren,getParent:a.prototype.getParent,isLeftToRight:a.prototype.isLeftToRight,placeAt:a.prototype.placeAt,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()},dojoAttachEvent:"",
dojoAttachPoint:"",_customWidgetBaseDestroy:function(a){function b(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.domNode&&c.findWidgets(this.domNode,this.containerNode).forEach(b);this.destroyRendering(a);c.remove(this.id);this._destroyed=!0}}).createSubclass({declaredClass:"esri.widgets.Widgette",getDefaults:function(){return m.mixin(this.inherited(arguments),{viewModel:{}})},buildRendering:function(){this.inherited(arguments);u.add(this.domNode,
"esri-widget")},destroy:function(){this.viewModel.destroy&&this.viewModel.destroy();this.viewModel=null},properties:{container:{get:function(){return this._created?this.domNode:this._get("container")},set:function(a){var b=this._get("container");this._created||b||!a||this._set("container",g.byId(a))}},viewModel:{value:null},visible:{value:!0,set:function(a){this._set("visible",a);u.toggle(this.domNode,"esri-hidden",!a)}}}})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/HandleRegistry ../../core/promiseUtils ../../core/watchUtils ../../geometry/support/webMercatorUtils ../../geometry/Point ../../support/Action dojo/fx/easing dojo/_base/lang".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u){function r(a,b){return b.allLayerViews.find(function(b){return b.layer===a})}var t={id:"zoom-to"};return e.createSubclass([a],{declaredClass:"esri.widgets.Popup.PopupViewModel",properties:{actions:{type:h.ofType(g)},animationOptions:{},content:{},featureCount:{readOnly:!0},features:{},location:{type:l},pendingPromisesCount:{readOnly:!0},promises:{},selectedFeature:{readOnly:!0},selectedFeatureIndex:{},state:{dependsOn:["view.ready"],readOnly:!0},title:{},updateLocationEnabled:{},
view:{},visible:{},waitingForResult:{dependsOn:["pendingPromisesCount","featureCount"],readOnly:!0},zoomFactor:{},zoomScale:{readOnly:!0}},_handles:null,constructor:function(){this._handles=new b},getDefaults:function(a){return u.mixin(this.inherited(arguments),{actions:[t],animationOptions:{duration:300,easing:n.quadInOut},promises:[]})},initialize:function(){this._handles.add([m.init(this,"view.scale",this._scaleWatcher),m.whenFalse(this,"visible",this._visibleWatcher)])},destroy:function(){this._handles.destroy();
this.view=this._handles=null},actions:[t],animationOptions:{duration:300,easing:n.quadInOut},content:null,featureCount:0,features:null,_featuresSetter:function(a){this._set("features",a);this._updateFeatureCount(a);this.pendingPromisesCount||(this.selectedFeatureIndex=-1,a.length&&(this.selectedFeatureIndex=0))},highlightEnabled:!0,_highlightEnabledSetter:function(a){this._set("highlightEnabled",a);this._highlightFeature(this.selectedFeature,this.view)},location:null,_locationSetter:function(a){var b=
this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&b&&(a=k.geographicToWebMercator(a));this._set("location",a)},pendingPromisesCount:0,waitingForResult:!1,_waitingForResultGetter:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},promises:[],_promisesSetter:function(a){var b=this._get("promises");b&&b.forEach(function(a){a.cancel()});this.features=[];this._set("pendingPromisesCount",0);this._set("promises",a);a&&a.length&&(this._set("pendingPromisesCount",
a.length),a=a.slice(0),a.forEach(function(a){a.always(function(b){a.isCanceled()||(this._set("pendingPromisesCount",this.pendingPromisesCount-1),this._updateFeatures(a,b))}.bind(this))},this))},selectedFeature:null,selectedFeatureIndex:-1,_selectedFeatureIndexSetter:function(a){(isNaN(a)||-1>a)&&(a=-1);var b=null,c=this.features;c&&c.length&&(a=(a+c.length)%c.length,b=c[a]);this._set("selectedFeature",b);this._set("selectedFeatureIndex",a);this._selectedFeatureChange(b,this.updateLocationEnabled)},
state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},title:null,updateLocationEnabled:!1,_updateLocationEnabledSetter:function(a){this._selectedFeatureChange(this.selectedFeature,a);this._set("updateLocationEnabled",a)},view:null,visible:!1,zoomFactor:4,_zoomFactorSetter:function(a){var b=this.view;b&&null!=b.scale&&this._setZoomScale(b.scale,a);this._set("zoomFactor",a)},zoomScale:0,centerAtLocation:function(){return this.location&&this.view?this.view.goTo({target:this.location,
scale:this.view.scale},this.animationOptions):c.reject(new d(this.declaredClass+"::Cannot center at location without a location and view."))},clear:function(){this.set({promises:[],features:[],content:null,title:null,location:null})},triggerAction:function(a){(a=this.actions.getItemAt(a))&&this.emit("trigger-action",{action:a})},next:function(){return this.selectedFeatureIndex+=1,this},previous:function(){return--this.selectedFeatureIndex,this},zoomToLocation:function(){var a=this.view,b=this.location,
e=this.zoomScale;if(!b||!a)return c.reject(new d(this.declaredClass+"::Cannot zoom to location without a location and view."));var g,f=this.selectedFeature,k=f&&f.geometry,l=f&&"3d"===a.type;return k||l?(g={target:f},k&&"point"===k.type&&this._isScreenSize(f)&&(g.scale=e,this.location=k)):g={target:b,scale:e},a.goTo(g,this.animationOptions)},_isScreenSize:function(a){if("3d"!==this.view.type||"esri.Graphic"!==a.declaredClass)return!0;var b=!0,c=this.view.getViewForGraphic(a);return c&&c.whenGraphicBounds&&
c.whenGraphicBounds(a).then(function(a){b=!a||a[0]===a[3]&&a[1]===a[4]&&a[2]===a[5]}),b},_getSelectedFeatureActions:function(){this._originalActions&&(this.actions=this._originalActions,this._originalActions=null);var a=this.actions.filter(function(a){return!a.temporary},this),b=a,c=this.selectedFeature.getEffectivePopupTemplate();if(c&&c.actions){for(var d=c.actions,f=0;f<d.length;f++)d.getItemAt(f).temporary=!0;c.overwriteActions?(this._originalActions=a,b=d):b=a.concat(d)}this.actions=b},_scaleWatcher:function(a){null!=
a&&this._setZoomScale(a,this.zoomFactor)},_getPointFromGeometry:function(a){switch(a&&a.type){case "point":return a;case "extent":return a.center;case "polygon":return a.centroid;case "multipoint":case "polyline":return a.extent.center;default:return null}},_visibleWatcher:function(a){this._handles.remove("highlight")},_highlightFeature:function(a,b){if(this._handles.remove("highlight"),a&&b&&this.highlightEnabled){var c=a.layer,d=b.type;c&&"3d"===d&&(b=r(c,b))&&"function"==typeof b.highlight&&(c=
c.objectIdField,d=a.attributes,a=b.highlight(d&&d[c]||a),this._handles.add(a,"highlight"))}},_selectedFeatureChange:function(a,b){this._highlightFeature(a,this.view);a&&(b&&(this.location=this._getPointFromGeometry(this.selectedFeature.geometry)),this._getSelectedFeatureActions())},_updateFeatureCount:function(a){var b=0;a&&a.length&&(b=a.length);this._set("featureCount",b)},_setZoomScale:function(a,b){this._set("zoomScale",a/b)},_updateFeatures:function(a,b){a&&this.promises&&!(!this._validatePromise(a)||
b instanceof d||b instanceof Error)&&b&&b.length&&(a={},this.features&&this.features.length?(b=b.filter(function(a){return-1===this.features.indexOf(a)},this),a.features=this.features.concat(b)):(a.features=b,a.selectedFeatureIndex=0),this.set(a))},_validatePromise:function(a){return-1<this.promises.indexOf(a)}})})},"dojo/fx/easing":function(){define(["../_base/lang"],function(e){var h={linear:function(d){return d},quadIn:function(d){return Math.pow(d,2)},quadOut:function(d){return d*(d-2)*-1},quadInOut:function(d){d*=
2;return 1>d?Math.pow(d,2)/2:-1*(--d*(d-2)-1)/2},cubicIn:function(d){return Math.pow(d,3)},cubicOut:function(d){return Math.pow(d-1,3)+1},cubicInOut:function(d){d*=2;return 1>d?Math.pow(d,3)/2:(Math.pow(d-2,3)+2)/2},quartIn:function(d){return Math.pow(d,4)},quartOut:function(d){return-1*(Math.pow(d-1,4)-1)},quartInOut:function(d){d*=2;return 1>d?Math.pow(d,4)/2:-.5*(Math.pow(d-2,4)-2)},quintIn:function(d){return Math.pow(d,5)},quintOut:function(d){return Math.pow(d-1,5)+1},quintInOut:function(d){d*=
2;return 1>d?Math.pow(d,5)/2:(Math.pow(d-2,5)+2)/2},sineIn:function(d){return-1*Math.cos(Math.PI/2*d)+1},sineOut:function(d){return Math.sin(Math.PI/2*d)},sineInOut:function(d){return-1*(Math.cos(Math.PI*d)-1)/2},expoIn:function(d){return 0==d?0:Math.pow(2,10*(d-1))},expoOut:function(d){return 1==d?1:-1*Math.pow(2,-10*d)+1},expoInOut:function(d){if(0==d)return 0;if(1==d)return 1;d*=2;if(1>d)return Math.pow(2,10*(d-1))/2;--d;return(-1*Math.pow(2,-10*d)+2)/2},circIn:function(d){return-1*(Math.sqrt(1-
Math.pow(d,2))-1)},circOut:function(d){return Math.sqrt(1-Math.pow(d-1,2))},circInOut:function(d){d*=2;return 1>d?-.5*(Math.sqrt(1-Math.pow(d,2))-1):.5*(Math.sqrt(1-Math.pow(d-2,2))+1)},backIn:function(d){return Math.pow(d,2)*(2.70158*d-1.70158)},backOut:function(d){--d;return Math.pow(d,2)*(2.70158*d+1.70158)+1},backInOut:function(d){d*=2;if(1>d)return Math.pow(d,2)*(3.5949095*d-2.5949095)/2;d-=2;return(Math.pow(d,2)*(3.5949095*d+2.5949095)+2)/2},elasticIn:function(d){if(0==d||1==d)return d;--d;
return-1*Math.pow(2,10*d)*Math.sin(2*(d-.075)*Math.PI/.3)},elasticOut:function(d){return 0==d||1==d?d:Math.pow(2,-10*d)*Math.sin(2*(d-.075)*Math.PI/.3)+1},elasticInOut:function(d){if(0==d)return 0;d*=2;if(2==d)return 1;var a=.3*1.5,b=a/4;if(1>d)return--d,-.5*Math.pow(2,10*d)*Math.sin(2*(d-b)*Math.PI/a);--d;return.5*Math.pow(2,-10*d)*Math.sin(2*(d-b)*Math.PI/a)+1},bounceIn:function(d){return 1-h.bounceOut(1-d)},bounceOut:function(d){return d<1/2.75?7.5625*Math.pow(d,2):d<2/2.75?7.5625*Math.pow(d-1.5/
2.75,2)+.75:d<2.5/2.75?7.5625*Math.pow(d-2.25/2.75,2)+.9375:7.5625*Math.pow(d-2.625/2.75,2)+.984375},bounceInOut:function(d){return.5>d?h.bounceIn(2*d)/2:h.bounceOut(2*d-1)/2+.5}};e.setObject("dojo.fx.easing",h);return h})},"esri/widgets/Popup/nls/Popup":function(){define({root:{zoom:"Zoom to",next:"Next feature",previous:"Previous feature",close:"Close",dock:"Dock",undock:"Undock",menu:"Menu",untitled:"Untitled",pageText:"{index} of {total}",noFeaturesFound:"No features found",selectedFeature:"Selected feature",
selectedFeatures:"{total} results",loading:"Loading"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/widgets/Popup/PopupRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/widget ../Widget ./PopupRendererViewModel ../../core/requireUtils dojo/i18n!./nls/PopupRenderer".split(" "),
function(e,h,d,a,b,c,m,k,l,g){function n(a,b){return void 0===b?r+"__"+a:r+"__"+a+"-"+b}var u=/^\s*(https?:\/\/[^\s]+)\s*$/i,r="esri-popup-renderer";h=function(a){function b(b){b=a.call(this)||this;return b._chartMap=new Map,b._activeMediaMap=new Map,b._chartRequirePromise=null,b._chartResizeTimer=null,b.graphic=null,b.title=null,b.viewModel=new k,b}return d(b,a),b.prototype.destroy=function(){clearTimeout(this._chartResizeTimer);this._chartResizeTimer=null;this._activeMediaMap.clear();this._activeMediaMap=
null;this._cancelChartModules();this._destroyCharts()},b.prototype.resize=function(){this._resizeCharts();this.emit("resize")},b.prototype.render=function(){var a=c.tsx("div",{key:n("loading-container"),"class":"esri-popup-renderer__loading-container"},c.tsx("span",{"class":c.join("esri-icon-loading-indicator esri-rotating","esri-popup-renderer__loading-spinner")})),a=this.viewModel.waitingForContent?a:this._renderContent();return c.tsx("div",{"class":"esri-popup-renderer"},c.tsx("div",{"class":"esri-popup-renderer__size-container"},
c.tsx("div",{"class":"esri-popup-renderer__main-container"},a)))},b.prototype.goToMedia=function(a,b){this._activeMediaMap.set(a,b);this.scheduleRender()},b.prototype.nextMedia=function(a){this._pageContentElementMedia(a,"next")},b.prototype.previousMedia=function(a){this._pageContentElementMedia(a,"previous")},b.prototype._cancelChartModules=function(){this._chartRequirePromise&&this._chartRequirePromise.cancel()},b.prototype._destroyChart=function(a){var b=this._chartMap.get(a);b&&(b.chart.destroy(),
b.tooltip.destroy());this._chartMap["delete"](a)},b.prototype._destroyCharts=function(){this._chartMap.forEach(function(a){a.chart.destroy();a.tooltip.destroy()});this._chartMap.clear()},b.prototype._resizeCharts=function(){this._chartMap.forEach(function(a){a=a.chart;var b=a.node;b&&b.offsetWidth&&b.offsetHeight&&a.resize()})},b.prototype._renderContent=function(){this._destroyCharts();var a=this.viewModel.content;if("string"==typeof a){var b=document.createElement("div");return b.innerHTML=a,c.tsx("div",
{key:n("content"),bind:b,afterCreate:this._attachToNode})}return a&&a.isInstanceOf&&a.isInstanceOf(m)?c.tsx("div",{key:n("content")},a.render()):a instanceof HTMLElement?c.tsx("div",{key:n("content"),bind:a,afterCreate:this._attachToNode}):a&&"function"==typeof a.postMixInProperties&&"function"==typeof a.buildRendering&&"function"==typeof a.postCreate&&"function"==typeof a.startup?c.tsx("div",{key:n("content"),bind:a.domNode,afterCreate:this._attachToNode}):Array.isArray(a)?a.length?c.tsx("div",{key:n("content")},
a.map(this._renderContentElement,this)):null:void 0},b.prototype._renderContentElement=function(a,b){var c=this.viewModel.contentTypes;switch(a.type){case c.attachments:return this._renderAttachments(a,b);case c.fields:return this._renderFields(a,b);case c.media:return this._renderMedia(a,b);case c.text:return this._renderText(a,b);default:return null}},b.prototype._renderAttachmentInfo=function(a,b){return c.tsx("li",{"class":"esri-popup-renderer__attachments-item",key:n("attachment",b)},c.tsx("a",
{"class":"esri-popup-renderer__attachments-item-link",href:a.url,target:"_blank"},c.tsx("span",{"class":c.join("esri-icon-download","esri-popup-renderer__attachments-item-icon")}),c.tsx("span",{"class":"esri-popup-renderer__attachments-item-title"},a.name||g.noTitle)))},b.prototype._renderAttachments=function(a,b){return(a=a.attachmentInfos)&&a.length?c.tsx("div",{key:n("attachments-element"),"class":c.join("esri-popup-renderer__attachments","esri-popup-renderer__content-element")},c.tsx("div",{"class":"esri-popup-renderer__attachments-title"},
g.attach),c.tsx("ul",{"class":"esri-popup-renderer__attachments-items"},a.map(this._renderAttachmentInfo))):null},b.prototype._renderFieldInfo=function(a,b){var d=this.viewModel,f=d.formattedAttributes.content[b]||d.formattedAttributes.global,e=a.fieldName,d=a.label||e,f=null==f[e]?"":f[e];a=!(!a.format||!a.format.dateFormat);e='\x3ca target\x3d"_blank" href\x3d"$1" title\x3d"'+d+'"\x3e'+g.view+"\x3c/a\x3e";f=f&&"string"==typeof f?f.replace(u,e):f;a=(k={},k["esri-popup-renderer__field-data--date"]=
a,k);return c.tsx("tr",{key:n("fields-element-info-row",b)},c.tsx("th",{key:n("fields-element-info-row-header",b),"class":"esri-popup-renderer__field-header"},d),c.tsx("td",{key:n("fields-element-info-row-data",b),"class":"esri-popup-renderer__field-data",classes:a,innerHTML:f}));var k},b.prototype._renderFields=function(a,b){var d=this;return(a=a.fieldInfos)?c.tsx("div",{key:n("fields-element",b),"class":c.join("esri-popup-renderer__fields","esri-popup-renderer__content-element")},c.tsx("table",
{summary:g.fieldsSummary,key:n("fields-element-table",b)},c.tsx("tbody",{key:n("fields-element-table-body",b)},a.map(function(a){return d._renderFieldInfo(a,b)})))):null},b.prototype._shouldOpenInNewTab=function(a){void 0===a&&(a="");return!/^(?:mailto:|tel:)/.test(a.trim().toLowerCase())},b.prototype._renderMediaInfoType=function(a,b){var d=a.value,f=a.title,f=void 0===f?"":f,e=a.type,g=d.sourceURL,d=d.linkURL,k=this._shouldOpenInNewTab(d)?"_self":"_blank";return"image"===e?(a=c.tsx("img",{alt:f,
src:g}),(b=d?c.tsx("a",{title:f,href:d,target:k},a):null)?b:a):-1!==e.indexOf("chart")?c.tsx("div",{key:n("chart",b),bind:this,"data-media-info":a,"data-content-element-index":b,"class":"esri-popup-renderer__media-chart",afterCreate:this._getChartDependencies,afterUpdate:this._getChartDependencies}):void 0},b.prototype._getChartDependencies=function(a){var b=this,c=a["data-media-info"],f=a["data-content-element-index"],d=c.value,g=d.theme||"Claro",k=c.type,c=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],
m=g;"string"==typeof g&&(m=g.replace(/\./g,"/"),-1===m.indexOf("/")&&(m="dojox/charting/themes/"+m));c.push(m);this._cancelChartModules();this._chartRequirePromise=l.when(e,c).then(function(c){b._renderChart(a,f,k,d,c[0],c[1],c[2]);clearTimeout(b._chartResizeTimer);b._chartResizeTimer=setTimeout(function(){return b.resize()},0);b._chartRequirePromise=null})},b.prototype._renderChart=function(a,b,c,f,d,e,g){a=new d(a,{margins:{l:4,t:4,r:4,b:4}});switch(g&&a.setTheme(g),c){case "pie-chart":a.addPlot("default",
{type:"Pie",labels:!1});a.addSeries("Series A",f.fields);break;case "line-chart":a.addPlot("default",{type:"Markers"});a.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});f.fields.forEach(function(a,b){a.x=b+1});a.addSeries("Series A",f.fields);break;case "column-chart":a.addPlot("default",{type:"Columns",gap:3});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});a.addSeries("Series A",f.fields);break;
case "bar-chart":a.addPlot("default",{type:"Bars",gap:3}),a.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),a.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),a.addSeries("Series A",f.fields)}c=new e(a);a.render();this._chartMap.set(b,{chart:a,tooltip:c})},b.prototype._renderMediaInfo=function(a,b){this._destroyChart(b);var d=this._renderMediaInfoType(a,b),f=a.title?c.tsx("div",{key:n("media-title",b),"class":"esri-popup-renderer__media-item-title",
innerHTML:a.title}):null;a=a.caption?c.tsx("div",{key:n("media-caption",b),"class":"esri-popup-renderer__media-item-caption",innerHTML:a.caption}):null;return c.tsx("div",{key:n("media-container",b),"class":"esri-popup-renderer__media-item-container",bind:this,afterCreate:this.resize,afterUpdate:this.resize},c.tsx("div",{key:n("media-itme-container",b),"class":"esri-popup-renderer__media-item"},d),f,a)},b.prototype._renderMediaStatsItem=function(a,b,d){d="chart"===d?c.join("esri-popup-renderer__media-chart-icon",
"esri-icon-chart"):c.join("esri-popup-renderer__media-image-icon","esri-icon-media");return c.tsx("li",{"class":"esri-popup-renderer__media-image-summary"},c.tsx("span",{"class":"esri-popup-renderer__media-count","aria-label":a},"("+b+")"),c.tsx("span",{"aria-hidden":"true","class":d}))},b.prototype._renderMediaPageButton=function(a,b){var d=(a="previous"===a)?g.previous:g.next,f=a?c.join("esri-popup-renderer__button","esri-popup-renderer__media-previous"):c.join("esri-popup-renderer__button","esri-popup-renderer__media-next"),
e=a?c.join("esri-popup-renderer__icon","esri-popup-renderer__media-previous-icon","esri-icon-left-triangle-arrow"):c.join("esri-popup-renderer__icon","esri-popup-renderer__media-next-icon","esri-icon-right-triangle-arrow"),k=a?c.join("esri-popup-renderer__icon","esri-popup-renderer__media-previous-icon--rtl","esri-icon-right-triangle-arrow"):c.join("esri-popup-renderer__icon","esri-popup-renderer__media-next-icon--rtl","esri-icon-left-triangle-arrow"),l=a?this._previousClick:this._nextClick;return c.tsx("div",
{key:n(a?"previous":"next",b),title:d,tabIndex:0,role:"button","class":f,"data-content-element-index":b,bind:this,onclick:l},c.tsx("span",{"aria-hidden":"true","class":e}),c.tsx("span",{"aria-hidden":"true","class":k}),c.tsx("span",{"class":"esri-icon-font-fallback-text"},d))},b.prototype._renderMedia=function(a,b){a=a.mediaInfos;var d=this._getMediaStats(a),f=d.total,e=(k={},k["esri-popup-renderer--media-pagination-visible"]=1<d.total,k),k=this._renderMediaStatsItem(g.numImages,d.images,"image"),
d=this._renderMediaStatsItem(g.numCharts,d.charts,"chart"),l=this._renderMediaPageButton("previous",b),m=this._renderMediaPageButton("next",b),h=this._activeMediaMap.get(b);return isNaN(h)&&(this._activeMediaMap.set(b,0),h=0),f?c.tsx("div",{key:n("media-element",b),"class":c.join("esri-popup-renderer__media","esri-popup-renderer__content-element"),classes:e},c.tsx("ul",{"class":"esri-popup-renderer__media-summary"},k,d),c.tsx("div",{key:n("media-element-container",b),"class":"esri-popup-renderer__media-container"},
l,this._renderMediaInfo(a[h],b),m)):null;var k},b.prototype._renderText=function(a,b){return a.text?c.tsx("div",{key:n("text-element",b),innerHTML:a.text,"class":c.join("esri-popup-renderer__text","esri-popup-renderer__content-element")}):null},b.prototype._attachToNode=function(a){a.appendChild(this)},b.prototype._getMediaStats=function(a){var b=0,c=0;return a.forEach(function(a){a=a.type;"image"===a?b++:-1!==a.indexOf("chart")&&c++}),{total:c+b,images:b,charts:c}},b.prototype._pageContentElementMedia=
function(a,b){var c=this.viewModel.content;(c=(c=c&&c[a])&&c.mediaInfos)&&c.length&&(b="previous"===b?-1:1,b=(this._activeMediaMap.get(a)+b+c.length)%c.length,this._activeMediaMap.set(a,b),this.scheduleRender())},b.prototype._previousClick=function(a){this.previousMedia(a.currentTarget["data-content-element-index"])},b.prototype._nextClick=function(a){this.nextMedia(a.currentTarget["data-content-element-index"])},b}(b.declared(m));return a([b.aliasOf("viewModel.graphic")],h.prototype,"graphic",void 0),
a([b.aliasOf("viewModel.title")],h.prototype,"title",void 0),a([b.property({type:k}),c.renderable(["viewModel.waitingForContent","viewModel.content"])],h.prototype,"viewModel",void 0),a([c.accessibleHandler()],h.prototype,"_previousClick",null),a([c.accessibleHandler()],h.prototype,"_nextClick",null),h=a([b.subclass("esri.widgets.Popup.PopupRenderer")],h)})},"esri/widgets/support/widget":function(){define(["require","exports","./decorators","./jsxFactory","./widgetUtils"],function(e,h,d,a,b){function c(a){for(var b in a)h.hasOwnProperty(b)||
(h[b]=a[b])}Object.defineProperty(h,"__esModule",{value:!0});c(d);c(a);c(b)})},"esri/widgets/support/decorators":function(){define("require exports ./decorators/accessibleHandler ./decorators/renderable ./decorators/triggerWithSpaceOrEnter ./decorators/vmEvent ./decorators/vmMethod ./decorators/vmProperty".split(" "),function(e,h,d,a,b,c,m,k){function l(a){for(var b in a)h.hasOwnProperty(b)||(h[b]=a[b])}Object.defineProperty(h,"__esModule",{value:!0});l(d);l(a);l(b);l(c);l(m);l(k)})},"esri/widgets/support/decorators/accessibleHandler":function(){define(["require",
"exports","dojo/keys"],function(e,h,d){function a(a){return function(b){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];e=b.type;return b instanceof KeyboardEvent||"keyup"===e||"keydown"===e||"keypress"===e?void((b.keyCode===d.ENTER||b.keyCode===d.SPACE)&&(b.preventDefault(),b.target.click())):void a.call.apply(a,[this,b].concat(c))}}Object.defineProperty(h,"__esModule",{value:!0});h.accessibleHandler=function(){return function(b,c){return{value:a(b[c])}}}})},"esri/widgets/support/decorators/renderable":function(){define(["require",
"exports","./propUtils"],function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});h.renderable=function(a){var b="string"==typeof a?d.splitProps(a):a;return function(a,e){a._renderableProps||(a._renderableProps=[]);a=a._renderableProps;return b?void a.push.apply(a,d.normalizePropNames(b,e)):void a.push(e)}}})},"esri/widgets/support/decorators/propUtils":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});h.splitProps=function(d){return d.split(",").map(function(a){return a.trim()})};
h.normalizePropNames=function(d,a){return d.map(function(b){return 0===b.indexOf(a)?b:a+"."+b})}})},"esri/widgets/support/decorators/triggerWithSpaceOrEnter":function(){define(["require","exports","../../../core/Logger","./accessibleHandler"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});h.triggerWithSpaceOrEnter=function(){return d.getLogger("esri.widgets.support.decorators.triggerWithSpaceOrEnter").warn("@triggerWithSpaceOrEnter is deprecated, use @accessibleHandler instead."),
a.accessibleHandler.apply(this,arguments)}})},"esri/widgets/support/decorators/vmEvent":function(){define(["require","exports","./propUtils"],function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});h.vmEvent=function(a){return function(b){b._delegatedEventNames||(b._delegatedEventNames=[]);var c=Array.isArray(a)?a:d.splitProps(a);b._delegatedEventNames=b._delegatedEventNames.concat(c)}}})},"esri/widgets/support/decorators/vmMethod":function(){define(["require","exports","../../../core/accessorSupport/get"],
function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});h.vmMethod=function(){return console.warn("@vmMethod is deprecated, use @aliasOf instead"),function(a,b,c){var e,k="viewModel."+b;c.value=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(b=d["default"](this,k))?(e||(e=k.split(".").slice(0,-1).join(".")),b=b.bind(d["default"](this,e)),b.call.apply(b,[this].concat(a))):void 0}}}})},"esri/widgets/support/decorators/vmProperty":function(){define(["require","exports",
"../../../core/accessorSupport/decorators"],function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});h.vmProperty=function(a){var b=this;return console.warn("@vmProperty is deprecated, use @aliasOf instead"),function(c,e){d.property.call(b,{aliasOf:"viewModel."+(a||e)}).call(b,c,e)}}})},"esri/widgets/support/jsxFactory":function(){define(["require","exports","../libs/maquette/maquette"],function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});h.tsx=d.h})},"esri/widgets/libs/maquette/maquette":function(){!function(e,
h){"function"==typeof define&&define.amd?define(["exports"],h):h("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:e.maquette={})}(this,function(e){var h,d,a=[],b=function(a,b){var c={};return Object.keys(a).forEach(function(b){c[b]=a[b]}),b&&Object.keys(b).forEach(function(a){c[a]=b[a]}),c},c=function(a,b){return a.vnodeSelector!==b.vnodeSelector?!1:a.properties&&b.properties?a.properties.key!==b.properties.key?!1:a.properties.bind===b.properties.bind:!a.properties&&!b.properties},
m=function(a){return{vnodeSelector:"",properties:void 0,children:void 0,text:a.toString(),domNode:null}},k=function(a,b,c){for(var f=0,d=b.length;d>f;f++){var e=b[f];Array.isArray(e)?k(a,e,c):null!==e&&void 0!==e&&(e.hasOwnProperty("vnodeSelector")||(e=m(e)),c.push(e))}},l=function(){throw Error("Provide a transitions object to the projectionOptions to do animations");},g={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(a,b,c){a.style[b]=c},transitions:{enter:l,exit:l}},n=function(a){if("string"!=
typeof a)throw Error("Style values must be strings");},u=function(a,b,c){if(b)for(var f=c.eventHandlerInterceptor,d=Object.keys(b),e=d.length,g=function(e){e=d[e];var g=b[e];if("className"===e)throw Error('Property "className" is not supported, use "class".');if("class"===e)g.split(/\s+/).forEach(function(b){return a.classList.add(b)});else if("classes"===e){var k=Object.keys(g),l=k.length;for(e=0;l>e;e++){var m=k[e];g[m]&&a.classList.add(m)}}else if("styles"===e)for(k=Object.keys(g),l=k.length,e=
0;l>e;e++){var m=k[e],h=g[m];h&&(n(h),c.styleApplyer(a,m,h))}else"key"!==e&&null!==g&&void 0!==g&&(k=typeof g,"function"===k?0===e.lastIndexOf("on",0)&&(f&&(g=f(e,g,a,b)),"oninput"===e&&!function(){var a=g;g=function(b){b.target["oninput-value"]=b.target.value;a.apply(this,[b])}}(),a[e]=g):"string"===k&&"value"!==e&&"innerHTML"!==e?"http://www.w3.org/2000/svg"===c.namespace&&"href"===e?a.setAttributeNS("http://www.w3.org/1999/xlink",e,g):a.setAttribute(e,g):a[e]=g)},k=0;e>k;k++)g(k)},r=function(a,
b){var c=a.domNode;if(a.properties){var d=a.properties.exitAnimation;if(d){c.style.pointerEvents="none";var e=function(){c.parentNode&&c.parentNode.removeChild(c)};return"function"==typeof d?void d(c,e,a.properties):void b.exit(a.domNode,a.properties,d,e)}}c.parentNode&&c.parentNode.removeChild(c)},t=function(a,b,f,d){var e=a[b];if(""!==e.vnodeSelector){var g=e.properties;if(!(g&&(void 0===g.key?g.bind:g.key)))for(g=0;g<a.length;g++)if(g!==b&&c(a[g],e))throw"added"===d?Error(f.vnodeSelector+" had a "+
e.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable."):Error(f.vnodeSelector+" had a "+e.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.");}},w=function(a,b,c){var f=b.children;if(f)for(var d=0;d<f.length;d++)h(f[d],a,void 0,c);b.text&&(a.textContent=b.text);u(a,b.properties,c);b.properties&&b.properties.afterCreate&&b.properties.afterCreate.apply(b.properties.bind||
b.properties,[a,c,b.vnodeSelector,b.properties,b.children])};h=function(a,c,f,d){var e,g,k,l,m,h=0,p=a.vnodeSelector;if(""===p)e=a.domNode=document.createTextNode(a.text),void 0!==f?c.insertBefore(e,f):c.appendChild(e);else{for(g=0;g<=p.length;++g)k=p.charAt(g),(g===p.length||"."===k||"#"===k)&&(l=p.charAt(h-1),m=p.slice(h,g),"."===l?e.classList.add(m):"#"===l?e.id=m:("svg"===m&&(d=b(d,{namespace:"http://www.w3.org/2000/svg"})),void 0!==d.namespace?e=a.domNode=document.createElementNS(d.namespace,
m):(e=a.domNode=document.createElement(m),"input"===m&&a.properties&&void 0!==a.properties.type&&e.setAttribute("type",a.properties.type)),void 0!==f?c.insertBefore(e,f):c.appendChild(e)),h=g+1);w(e,a,d)}};d=function(e,g,f){var k=e.domNode,l=!1;if(e===g)return!1;var m=!1;if(""===g.vnodeSelector){if(g.text!==e.text)return e=document.createTextNode(g.text),k.parentNode.replaceChild(e,k),g.domNode=e,l=!0}else{0===g.vnodeSelector.lastIndexOf("svg",0)&&(f=b(f,{namespace:"http://www.w3.org/2000/svg"}));
e.text!==g.text&&(m=!0,void 0===g.text?k.removeChild(k.firstChild):k.textContent=g.text);var v;v=e.children;var u=g.children,x=f;if(v===u)v=!1;else{v=v||a;for(var u=u||a,q,w=v.length,E=u.length,G=x.transitions,K=q=0,L=!1;E>K;){var H=w>q?v[q]:void 0,I=u[K];if(void 0!==H&&c(H,I))L=d(H,I,x)||L,q++;else{b:{var H=v,N=I;if(""!==N.vnodeSelector)for(var S=q+1;S<H.length;S++)if(c(H[S],N)){H=S;break b}H=-1}if(0<=H){for(;H>q;q++)r(v[q],G),t(v,q,g,"removed");L=d(v[H],I,x)||L;q=H+1}else h(I,k,w>q?v[q].domNode:
void 0,x),H=G,I.properties&&(N=I.properties.enterAnimation)&&("function"==typeof N?N(I.domNode,I.properties):H.enter(I.domNode,I.properties,N)),t(u,K,g,"added")}K++}if(w>q)for(;w>q;q++)r(v[q],G),t(v,q,g,"removed");v=L}m=v||m;v=e.properties;u=g.properties;x=f;if(u){L=!1;w=Object.keys(u);E=w.length;for(G=0;E>G;G++)if(I=w[G],K=u[I],q=v[I],"class"===I){if(q!==K)throw Error('"class" property may not be updated. Use the "classes" property for conditional css classes.');}else if("classes"===I)for(H=k.classList,
N=Object.keys(K),S=N.length,I=0;S>I;I++){var M=N[I],ca=!!K[M];ca!==!!q[M]&&(L=!0,ca?H.add(M):H.remove(M))}else if("styles"===I)for(H=Object.keys(K),N=H.length,I=0;N>I;I++)S=H[I],M=K[S],M!==q[S]&&(L=!0,M?(n(M),x.styleApplyer(k,S,M)):x.styleApplyer(k,S,""));else if(K||"string"!=typeof q||(K=""),"value"===I)H=k[I],H!==K&&(k["oninput-value"]?H===k["oninput-value"]:K!==q)&&(k[I]=K,k["oninput-value"]=void 0),K!==q&&(L=!0);else if(K!==q){L=typeof K;if("function"===L)throw Error("Functions may not be updated on subsequent renders (property: "+
I+"). Hint: declare event handler functions outside the render() function.");"string"===L&&"innerHTML"!==I?"http://www.w3.org/2000/svg"===x.namespace&&"href"===I?k.setAttributeNS("http://www.w3.org/1999/xlink",I,K):"role"===I&&""===K?k.removeAttribute(I):k.setAttribute(I,K):k[I]!==K&&(k[I]=K);L=!0}v=L}else v=void 0;m=v||m;g.properties&&g.properties.afterUpdate&&g.properties.afterUpdate.apply(g.properties.bind||g.properties,[k,f,g.vnodeSelector,g.properties,g.children])}return m&&g.properties&&g.properties.updateAnimation&&
g.properties.updateAnimation(k,g.properties,e.properties),g.domNode=e.domNode,l};var q=function(a,b){return{update:function(c){if(a.vnodeSelector!==c.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");d(a,c,b);a=c},domNode:a.domNode}};e.h=function(a){var b=arguments[1];if("string"!=typeof a)throw Error();var c=1;!b||b.hasOwnProperty("vnodeSelector")||Array.isArray(b)||"object"!=typeof b?b=void 0:c=
2;var d,e,g=arguments.length;if(g===c+1){var l=arguments[c];"string"==typeof l?d=l:void 0!==l&&null!==l&&1===l.length&&"string"==typeof l[0]&&(d=l[0])}if(void 0===d)for(e=[];g>c;c++)l=arguments[c],null===l||void 0===l||(Array.isArray(l)?k(a,l,e):l.hasOwnProperty("vnodeSelector")?e.push(l):e.push(m(l)));return{vnodeSelector:a,properties:b,children:e,text:""===d?void 0:d,domNode:null}};e.dom={create:function(a,c){return c=b(g,c),h(a,document.createElement("div"),void 0,c),q(a,c)},append:function(a,
c,f){return f=b(g,f),h(c,a,void 0,f),q(c,f)},insertBefore:function(a,c,f){return f=b(g,f),h(c,a.parentNode,a,f),q(c,f)},merge:function(a,c,f){return f=b(g,f),c.domNode=a,w(a,c,f),q(c,f)},replace:function(a,c,f){return f=b(g,f),h(c,a.parentNode,a,f),a.parentNode.removeChild(a),q(c,f)}};e.createCache=function(){var a,b;return{invalidate:function(){a=b=void 0},result:function(c,d){if(a)for(var f=0;f<c.length;f++)a[f]!==c[f]&&(b=void 0);return b||(b=d(),a=c),b}}};e.createMapping=function(a,b,c){var f=
[],d=[];return{results:d,map:function(e){for(var g=e.map(a),k=d.slice(),l=0,m=0;m<e.length;m++){var h=e[m],p=g[m];if(p===f[l])d[m]=k[l],c(h,k[l],m),l++;else{for(var n=!1,v=1;v<f.length+1;v++){var u=(l+v)%f.length;if(f[u]===p){d[m]=k[u];c(e[m],k[u],m);l=u+1;n=!0;break}}n||(d[m]=b(h,m))}}d.length=e.length;f=g}}};e.createProjector=function(a){var c,f=b(g,a);f.eventHandlerInterceptor=function(a,b,f,d){return function(){return c.scheduleRender(),b.apply(d.bind||this,arguments)}};var d,k=!0,l=!1,m=[],h=
[],n=function(){if(d=void 0,k){k=!1;for(var a=0;a<m.length;a++){var b=h[a]();m[a].update(b)}k=!0}};return c={renderNow:n,scheduleRender:function(){d||l||(d=requestAnimationFrame(n))},stop:function(){d&&(cancelAnimationFrame(d),d=void 0);l=!0},resume:function(){l=!1;k=!0;c.scheduleRender()},append:function(a,b){m.push(e.dom.append(a,b(),f));h.push(b)},insertBefore:function(a,b){m.push(e.dom.insertBefore(a,b(),f));h.push(b)},merge:function(a,b){m.push(e.dom.merge(a,b(),f));h.push(b)},replace:function(a,
b){m.push(e.dom.replace(a,b(),f));h.push(b)},detach:function(a){for(var b=0;b<h.length;b++)if(h[b]===a)return h.splice(b,1),m.splice(b,1)[0];throw Error("renderMaquetteFunction was not found");}}}})},"esri/widgets/support/widgetUtils":function(){define(["require","exports","../../core/Logger"],function(e,h,d){function a(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return a.join(" ")}Object.defineProperty(h,"__esModule",{value:!0});h.classes=function(){return d.getLogger("esri.widgets.support.widgetUtils").warn("classes is deprecated, use join instead."),
a.apply(this,arguments)};h.join=a;h.isRtl=function(){return"rtl"===document.head.dir}})},"esri/widgets/Widget":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor ../core/Evented ../core/HandleRegistry ../core/Logger ../core/watchUtils dojo/_base/lang dojo/dom ./libs/maquette/maquette ../core/Collection".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u,r,t){var w=l.getLogger("esri.widgets.Widget"),
q=0;e=function(a){function b(b,c){b=a.call(this)||this;return b._attached=!1,b.className="",b.destroyed=!1,b.domNode=null,b.visible=!0,b._projector=r.createProjector({}),b._handles=new k,b.render=b.render.bind(b),b}return d(b,a),b.prototype.normalizeCtorArgs=function(a,b){a=n.mixin({},a);return b&&(a.container=b),a},b.prototype.initialize=function(){var a=this;this._handles.add(this._renderableProps.map(function(b){return g.init(a,b,function(a,c){var f=this;if(t.isCollection(c)&&this._handles.remove(this.declaredClass+
":"+b+"-collection-change-event-listener"),t.isCollection(a))a=a.on("change",function(){return f.scheduleRender()}),this._handles.add(a,this.declaredClass+":"+b+"-collection-change-event-listener");this.scheduleRender()})}));this._delegatedEventNames.length&&this._handles.add(g.init(this,"viewModel",function(){a._get("viewModel")&&a._handles.remove("delegated-events");a._delegatedEventNames.map(function(b){return a.viewModel.on(b,function(c){a.emit(b,c)})})}),"delegated-events");this.postInitialize();
this._handles.add(g.whenOnce(this,"container",function(b){return a._attach(b)}))},b.prototype.postInitialize=function(){},b.prototype.destroy=function(){this.destroyed||(this.viewModel&&this.viewModel.destroy(),this._detach(this.container),this._handles.destroy(),this._set("destroyed",!0))},b.prototype.startup=function(){w.warn("Widget.startup() is deprecated and no longer needed")},Object.defineProperty(b.prototype,"container",{set:function(a){this._get("container")||this._set("container",a)},enumerable:!0,
configurable:!0}),b.prototype.castContainer=function(a){return u.byId(a)},Object.defineProperty(b.prototype,"id",{get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+q++},set:function(a){a&&this._set("id",a)},enumerable:!0,configurable:!0}),b.prototype.scheduleRender=function(){this._projector.scheduleRender()},b.prototype.on=function(a,b){var c=this.inherited(arguments);return this._handles.add(c),c},b.prototype.own=function(a){1<arguments.length&&
(a=Array.prototype.slice.call(arguments));this._handles.add(a)},b.prototype.renderNow=function(){this._projector.renderNow()},b.prototype._attach=function(a){a&&(this._projector.merge(a,this.render),this._attached=!0)},b.prototype._detach=function(a){a&&this._attached&&(this._projector.detach(this.render),a.parentNode&&a.parentNode.removeChild(a),this._attached=!1)},b}(b.declared(c,m));return a([b.shared([])],e.prototype,"_renderableProps",void 0),a([b.shared([])],e.prototype,"_delegatedEventNames",
void 0),a([b.property({value:null})],e.prototype,"container",null),a([b.cast("container")],e.prototype,"castContainer",null),a([b.property({readOnly:!0})],e.prototype,"destroyed",void 0),a([b.property({aliasOf:"container"})],e.prototype,"domNode",void 0),a([b.property({dependsOn:["container"]})],e.prototype,"id",null),a([b.property()],e.prototype,"viewModel",void 0),a([b.property()],e.prototype,"visible",void 0),e=a([b.subclass("esri.widgets.Widget")],e)})},"esri/widgets/Popup/PopupRendererViewModel":function(){define("../Widget ../../core/Accessor ../../core/Error ../../core/HandleRegistry ../../core/lang ../../core/urlUtils ../../core/promiseUtils ../../core/watchUtils ../../request ../../tasks/support/StatisticDefinition ../../tasks/support/Query ../../tasks/QueryTask ../../renderers/support/arcadeUtils dojo/_base/lang dojo/promise/all dojo/i18n!dojo/cldr/nls/number dojox/html/entities".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v){var x=/\'/g,f=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,p=/^\s*expression\//i,z=/(\{([^\{\r\n]+)\})/g,y={attachments:"attachments",fields:"fields",media:"media",text:"text"},A={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",
"short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
"short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};return h.createSubclass({declaredClass:"esri.widgets.Popup.PopupRendererViewModel",
properties:{content:{readOnly:!0},contentEnabled:!0,contentTypes:{readOnly:!0},formattedAttributes:{readOnly:!0},graphic:{},title:{readOnly:!0},waitingForContent:{readOnly:!0}},constructor:function(){this._handles=new a},initialize:function(){this._handles.add([k.init(this,"graphic",function(a){this._updateGraphic(a,this.contentEnabled)}.bind(this)),k.init(this,"contentEnabled",function(a){this._updateGraphic(this.graphic,a)}.bind(this))])},destroy:function(){this._handles.destroy();this._handles=
null;this._clearRelatedInfo();this._cancelPromises();this.graphic=null;this._set("title",null);this._set("content",null);this._set("waitingForContent",null)},content:null,contentEnabled:!0,contentTypes:y,formattedAttributes:null,graphic:null,title:"",waitingForContent:!1,_handles:null,_contentPromise:null,_contentElementPromises:null,_relatedRecordsPromise:null,_relatedRecordsQueryPromises:[],_relatedRecordsLayerPromises:[],_relatedLayersInfo:null,_relatedInfo:null,_dateFormats:A,_addValuesToHref:function(a,
c,f,d){return c=this._trimString(c),b.substitute((c?0!==c.indexOf("${"):1)?d:f,a)},_cancelPromises:function(){this._contentElementPromises&&(this._contentElementPromises.forEach(function(a){a.cancel()},this),this._contentElementPromises=null);this._contentPromise&&(this._contentPromise.cancel(),this._contentPromise=null);this._relatedRecordsQueryPromises.forEach(function(a){a.cancel()});this._relatedRecordsQueryPromises.length=0;this._relatedRecordsLayerPromises.length&&(this._relatedRecordsLayerPromises.forEach(function(a){a.cancel()}),
this._relatedRecordsLayerPromises.length=0);this._relatedRecordsPromise&&(this._relatedRecordsPromise.cancel(),this._relatedRecordsPromise=null)},_clearRelatedInfo:function(){this._relatedInfo=this._relatedLayersInfo=null},_compileContent:function(a,b){var c=a.content;if(c&&(c.nodeName||c&&c&&"function"==typeof c.postMixInProperties&&"function"==typeof c.buildRendering&&"function"==typeof c.postCreate&&"function"==typeof c.startup||c&&c.isInstanceOf&&c.isInstanceOf(e)))return c;if("string"==typeof c)return this._compileText(a,
{type:y.text,text:c}).text;if(Array.isArray(c))return c.map(function(c,f){f=(f=b&&b[f])&&f.value;switch(c.type){case y.attachments:return this._proxyAttachments(c,f);case y.fields:return this._compileFields(a,c);case y.media:return this._compileMedia(a,c);case y.text:return this._compileText(a,c)}},this);if(c)try{throw new d(this.declaredClass+"::invalid content type.");}catch(C){console.warn(C.stack)}},_compileFields:function(a,b){b=t.clone(b);var c=(a=a.template)&&a.expressionInfos;a=a&&t.clone(a.fieldInfos);
var f=[];return(b.fieldInfos||a).forEach(function(a){var b=a.fieldName.toLowerCase();if(a.hasOwnProperty("visible")?a.visible:1)b=this._isExpressionField(b)?this._getExpressionInfo(c,b):null,a.label=b?b.title:a.label,f.push(a)},this),b.fieldInfos=f,b},_compileMedia:function(a,c){var f,d;c=t.clone(c);var e=c.mediaInfos,g=a.attributes,k=a.layer,l=this.formattedAttributes.global,m=a.substOptions;return e&&(f=[],e.forEach(function(c){d=0;var e=c.value;switch(c.type){case "image":var h=e.sourceURL,h=h&&
this._trimString(b.substitute(g,this._fixTokens(h,k)));d=!!h;break;case "pie-chart":case "line-chart":case "column-chart":case "bar-chart":var p,h=e.normalizeField;e.fields=e.fields.map(function(a){return p=this._getLayerFieldInfo(k,a),p?p.name:a},this);h&&(p=this._getLayerFieldInfo(k,h),e.normalizeField=p?p.name:h);d=e.fields.some(function(a){return b.isDefined(g[a])||-1!==a.indexOf("relationships/")&&this._relatedInfo},this);break;default:return}if(d){c=t.clone(c);var e=c.value,h=c.title?this._processFieldsInLinks(this._fixTokens(c.title,
k),g):"",n=c.caption?this._processFieldsInLinks(this._fixTokens(c.caption,k),g):"";if(c.title=h?this._trimString(b.substitute(l,h,m)):"",c.caption=n?this._trimString(b.substitute(l,n,m)):"","image"===c.type)e.sourceURL=b.substitute(g,this._fixTokens(e.sourceURL,k)),e.linkURL&&(e.linkURL=this._trimString(b.substitute(g,this._fixTokens(e.linkURL,k))));else{var v,u=(h=a.template)&&h.fieldInfos;e.fields.forEach(function(a,b){if(-1!==a.indexOf("relationships/"))a=this._getRelatedChartInfos(k,u,a,e,g,m),
Array.isArray(a)?e.fields=a:e.fields[b]=a;else{var c=g[a],c=void 0===c?null:c;v=g[e.normalizeField]||0;c&&v&&(c/=v);var f=u&&this._getFieldInfo(u,a);e.fields[b]={y:c,tooltip:(f&&f.label||a)+":"+this._formatValue(c,{fieldInfos:u,fieldName:a,layer:k,substOptions:m,preventPlacesFormatting:!!v})}}},this)}f.push(c)}},this)),c.mediaInfos=f,c},_compileText:function(a,c){if((c=t.clone(c))&&c.text){var f=a.attributes,d=this.formattedAttributes.global,e=a.substOptions;a=this._processFieldsInLinks(this._fixTokens(c.text,
a.layer),f);c.text=this._trimString(b.substitute(d,a,e))}return c},_compileTitle:function(a){var c="",f=a.title,d=a.layer,e=a.attributes,g=a.substOptions,k=this.formattedAttributes.global;f&&("function"==typeof f&&(f=f.call(null,{graphic:a.graphic})),"string"==typeof f)&&-1===f.indexOf("{relationships/")&&(a=this._processFieldsInLinks(this._fixTokens(f,d),e),c=this._trimString(b.substitute(k,a,g)));return c},_getExpressionInfo:function(a,b){if(this._isExpressionField(b)){b=b.replace(p,"");b=b.toLowerCase();
var c;return a.some(function(a){return a.name.toLowerCase()===b&&(c=a),!!c}),c}},_createGraphicInfo:function(a,b){var c=a.getEffectivePopupTemplate(),f=c&&c.title,d=c&&c.content,e=a.layer,g=e&&e._getDateOpts&&e._getDateOpts().properties,k=t.clone(a.attributes)||{};return{graphic:a,template:c,title:f,content:d,contentEnabled:b,layer:e,attributes:k,properties:g,substOptions:{dateFormat:{properties:g,formatter:"DateFormat"+A["short-date-short-time"]}}}},_fixTokens:function(a,b){return a.replace(z,function(a,
c,f){return(a=this._getLayerFieldInfo(b,f))?"{"+a.name+"}":c}.bind(this))},_encodeAttributes:function(a){var b=t.clone(a)||{};return Object.keys(b).forEach(function(a){var c=b[a];"string"==typeof c&&(c=encodeURIComponent(c).replace(x,"\x26apos;"),b[a]=c)}),b},_formatAttributesToFieldInfos:function(a,b,c,f,d){a.forEach(function(e){var g=e.fieldName,k=this._getLayerFieldInfo(b,g);k&&(g=e.fieldName=k.name);if(d[g]=this._formatValue(d[g],{fieldInfos:a,fieldName:g,layer:b,substOptions:c}),f&&e.format&&
e.format.dateFormat)e=f.indexOf(g),-1<e&&f.splice(e,1)},this)},_formatAttributes:function(a,c,f,d,e,g,k,l){var m=t.clone(e);if(k&&k.forEach(function(a){var b="expression/"+a.name;a=l[a.name];a=r.executeFunction(a&&a.compiledFunc,r.createExecContext(g));"string"==typeof a&&(a=v.encode(a));m[b]=a}),this._relatedInfo&&Object.keys(this._relatedInfo).forEach(function(a){var b=this._relatedInfo[a];a=this._relatedLayersInfo[a];b&&(b.relatedFeatures.forEach(this._relatedFeaturesAttributes.bind(this,a,e,m)),
b.relatedStatsFeatures.forEach(this._relatedStatsAttributes.bind(this,a,e,m)))},this),a&&this._formatAttributesToFieldInfos(a,c,f,d,m),c){var h=c.typeIdField;Object.keys(e).forEach(function(a){if(-1===a.indexOf("relationships/")){var f=e[a];if(b.isDefined(f)){var d=this._getDomainName(c,g,a,f);b.isDefined(d)?m[a]=d:a===h&&(f=this._getTypeName(c,g,f),b.isDefined(f)&&(m[a]=f))}}},this)}return m},_formatValue:function(a,c){var f=c.fieldInfos,d=c.fieldName,e=c.substOptions,f=f&&this._getFieldInfo(f,d),
g=t.clone(f),f=c.preventPlacesFormatting;(c=this._getLayerFieldInfo(c.layer,d))&&"date"===c.type&&(c=g.format||{},c.dateFormat=c.dateFormat||"short-date-short-time",g.format=c);c=g&&g.format;d="number"==typeof a&&e.dateFormat.properties&&-1===e.dateFormat.properties.indexOf(d)&&(!c||!c.dateFormat);if(!b.isDefined(a)||!g||!b.isDefined(c))return d?this._forceLTR(a):a;var k="",l=[],g=c.hasOwnProperty("places")||c.hasOwnProperty("digitSeparator"),m=c.hasOwnProperty("digitSeparator")?c.digitSeparator:
!0;if(g)k="NumberFormat",b.isDefined(c.places)&&(!f||0<c.places)&&(l.push("places: "+Number(c.places)),k+="("+l.join(",")+")");else{if(!c.dateFormat)return d?this._forceLTR(a):a;k="DateFormat"+A[c.dateFormat]||A["short-date-short-time"]}a=b.substitute({myKey:a},"{myKey:"+k+"}",e)||"";return g&&!m&&q.group&&(a=a.replace(new RegExp("\\"+q.group,"g"),"")),d?this._forceLTR(a):a},_forceLTR:function(a){return"\x26lrm;"+a},_getDomainName:function(a,b,c,f){return(a=a.getDomain&&a.getDomain(c,{feature:b}))&&
a.codedValues?a.getName(f):null},_getFieldInfo:function(a,b){var c;b=b.toLowerCase();for(var f=0;f<a.length;f++){var d=a[f];if(d.fieldName&&d.fieldName.toLowerCase()===b){c=d;break}}return c},_getLayerFieldInfo:function(a,b){return b&&a&&a.getField?a.getField(b):null},_getTypeName:function(a,b){return(a=a.getType&&a.getType(b))&&a.name},_processFieldsInLinks:function(a,b){var c=this._encodeAttributes(b);return a&&(a=a.replace(f,function(a,f){return this._addValuesToHref(a,f,b,c)}.bind(this))),a},
_proxyAttachments:function(a,b){a=t.clone(a);b&&!(b instanceof d)&&b.attachmentInfos&&b.attachmentInfos.length&&(b=b.attachmentInfos.map(function(a){return a.url=c.addProxy(a.url),a},this),a.attachmentInfos=b);return a},_queryAttachments:function(a){var b=a.layer;if(!b)return m.resolve();"scene"===b.type&&b.companionFeatureLayer&&(b=b.companionFeatureLayer);var c=a.attributes;a=b&&b.objectIdField;c=c&&a&&c[a];return a&&b.get("capabilities.data.supportsAttachment")&&c?this._queryAttachmentInfos(b,
c):void 0},_queryAttachmentInfos:function(a,b){var c=a.url+"/"+a.layerId+"/"+b+"/attachments",f=a.token||"";return l(c,{query:{f:"json",token:f},callbackParamName:"callback"}).then(function(a){a=a.data;return a.attachmentInfos.forEach(function(a){a.url=c+"/"+a.id;f&&(a.url+="?token\x3d"+f);a.objectId=b}),a})},_queryContentElements:function(a){var b=a.content;if(!Array.isArray(b))return m.resolve();var c=[],f={};return b.forEach(function(b,d){b.type===y.attachments&&(b=this._queryAttachments(a))&&
(f[d]=b,c.push(b))},this),this._contentElementPromises=c,0===c.length?m.resolve():m.eachAlways(f).always(function(a){return this._contentElementPromises=null,a}.bind(this))},_trimString:function(a){return(a||"").trim()},_getContent:function(a){var b=a.template,b=b&&b.content;return"function"==typeof b&&(b=b.call(null,{graphic:a.graphic})),b&&"function"==typeof b.then?b:m.resolve(b)},_updateContent:function(a){if(!a.contentEnabled)return m.resolve();var b=this._getContent(a).then(function(b){return a.content=
b,this._queryContentElements(a)}.bind(this)).then(function(b){this._set("content",this._compileContent(a,b))}.bind(this)).otherwise(function(a){console.log(this.declaredClass+"::error loading template",a)}.bind(this)).then(function(){this._contentPromise=null}.bind(this));return this._contentPromise=b,b},_isExpressionField:function(a){return p.test(a)},_compileExpressions:function(a){if(a){var b={};return a.forEach(function(a){b[a.name]={compiledFunc:r.createFunction(a.expression)}}),b}},_createFormattedAttributes:function(a){var b=
a.graphic,c=a.attributes,f=a.layer,d=a.template,e=d&&d.fieldInfos,g=d&&d.expressionInfos,k=this._compileExpressions(g),l=a.substOptions,m=a.properties,h={global:this._formatAttributes(e,f,l,m,c,b,g,k),content:[]};a=d&&d.content;return Array.isArray(a)&&a.forEach(function(a,d){a.type===y.fields&&a.fieldInfos&&(h.content[d]=this._formatAttributes(a.fieldInfos,f,l,m,c,b,g,k))},this),h},_queryGraphicInfo:function(a,b){var c=this._createGraphicInfo(a,b);return this._checkForRelatedRecords(c).then(function(){return this._set("formattedAttributes",
this._createFormattedAttributes(c)),this._set("title",this._compileTitle(c)),this._updateContent(c)}.bind(this))},_updateGraphic:function(a,b){this._handles&&(this._clearRelatedInfo(),this._cancelPromises(),this._set("title",""),this._set("content",null),this._set("formattedAttributes",null),this._set("waitingForContent",!1),a)&&(this._set("waitingForContent",!0),this._relatedRecordsPromise=this._queryGraphicInfo(a,b).always(function(){this._relatedRecordsPromise=null;this._relatedRecordsLayerPromises.length=
0;this._relatedRecordsQueryPromises.length=0;this._set("waitingForContent",!1)}.bind(this)))},_getAllFieldInfos:function(a){var b=[],c=a.template,f=c&&c.fieldInfos;a=a.contentEnabled;if(f&&(b=b.concat(f)),a)c=c&&c.content,Array.isArray(c)&&c.forEach(function(a){b=b.concat(a&&a.fieldInfos)},this);return b},_checkForRelatedRecords:function(a){var b=this._getAllFieldInfos(a).filter(function(a){return a&&a.fieldName&&-1!==a.fieldName.indexOf("relationships/")},this);return a.layer&&b&&0<b.length?this._getRelatedRecords({graphic:a.graphic,
fieldsInfo:b}):m.resolve()},_relatedFeaturesAttributes:function(a,b,c,f){Object.keys(f.attributes).forEach(function(d){if("esriRelCardinalityOneToOne"===a.relation.cardinality){var e=this._toRelatedFieldName([a.relation.id,d]);b[e]=c[e]=f.attributes[d]}},this)},_relatedStatsAttributes:function(a,b,c,f){Object.keys(f.attributes).forEach(function(d){var e=this._toRelatedFieldName([a.relation.id,d]);b[e]=c[e]=f.attributes[d]},this)},_getRelatedChartInfos:function(a,b,c,f,d,e){var g,k,l,m,h,p,n;return g=
[],n=this._fromRelatedFieldName(c),h=n[0],k=this._relatedInfo[h],p=this._relatedLayersInfo[h],k&&k.relatedFeatures.forEach(function(k){var h,p=k.attributes;Object.keys(p).forEach(function(k){k===n[1]&&((h={},m=p[k],f.normalizeField&&(l=-1!==f.normalizeField.indexOf("relationships/")?p[this._fromRelatedFieldName(f.normalizeField)[1]]:d[f.normalizeField]),m&&l&&(m/=l),f.tooltipField)?-1!==f.tooltipField.indexOf("relationships/")?(k=this._fromRelatedFieldName(f.tooltipField)[1],k=p[k],h.tooltip=k+": "+
this._formatValue(m,{fieldInfos:b,fieldName:k,layer:a,substOptions:e,preventPlacesFormatting:!!l})):((k=this._getLayerFieldInfo(a,c))&&(c=k.name),h.tooltip=c+": "+this._formatValue(m,{fieldInfos:b,fieldName:f.tooltipField,layer:a,substOptions:e,preventPlacesFormatting:!!l})):h.tooltip=m,h.y=m,g.push(h))},this)},this),"esriRelCardinalityOneToMany"===p.relation.cardinality||"esriRelCardinalityManyToMany"===p.relation.cardinality?g:g[0]},_getRelatedRecords:function(a){var b=a.graphic;return this._relatedLayersInfo?
this._queryRelatedLayers(b).then(function(a){return this._setRelatedRecords(a),a}.bind(this)):this._getRelatedLayersInfo(a).then(function(a){return Object.keys(a).forEach(function(b){a[b]&&(this._relatedLayersInfo[b].relatedLayerInfo=a[b].data)},this),this._queryRelatedLayers(b).then(function(a){return this._setRelatedRecords(a),a}.bind(this))}.bind(this))},_getRelatedLayersInfo:function(a){var b,c=a.fieldsInfo,f={};return b=a.graphic.layer,this._relatedLayersInfo||(this._relatedLayersInfo={}),c.forEach(function(a){var c,
f,d,e,k;if(c=this._fromRelatedFieldName(a.fieldName),f=c[0],d=c[1],f)this._relatedLayersInfo[f]||((c=b&&b.relationships)&&c.some(function(a){return a.id==f?(k=a,!0):void 0}),k&&(this._relatedLayersInfo[f]={relation:k,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[f]&&(this._relatedLayersInfo[f].relatedFields.push(d),a.statisticType&&(e=new g({statisticType:a.statisticType,onStatisticField:d,outStatisticFieldName:d}),this._relatedLayersInfo[f].outStatistics.push(e)))},this),Object.keys(this._relatedLayersInfo).forEach(function(a){var c,
d;this._relatedLayersInfo[a]&&(c=this._relatedLayersInfo[a].relation,d=b.url+"/"+c.relatedTableId,this._relatedLayersInfo[a].relatedLayerUrl=d,f[a]=l(d,{query:{f:"json"},callbackParamName:"callback"}))},this),Object.keys(f).forEach(function(a){this._relatedRecordsLayerPromises.push(f[a])},this),w(f)},_queryRelatedLayers:function(a){var b={};return Object.keys(this._relatedLayersInfo).forEach(function(c){b[c]=this._queryRelatedLayer({graphic:a,relatedInfo:this._relatedLayersInfo[c]})},this),w(b)},
_queryRelatedLayer:function(a){var b,c,f,d,e,g,k,l,m,h,p,v,t,x;return b=a.graphic,c=b.layer,f=c.layerId,v=a.relatedInfo,d=v.relatedLayerInfo,t=v.relatedLayerUrl,x=v.relation,d&&d.relationships&&d.relationships.some(function(a){return a.relatedTableId===parseInt(f,10)?(e=a,!0):void 0}),e&&(d.fields.some(function(a){if(a.name===e.keyField)return g=-1!==["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"].indexOf(a.type)?"number":"string",!0}),h="string"===
g?e.keyField+"\x3d'"+b.attributes[x.keyField]+"'":e.keyField+"\x3d"+b.attributes[x.keyField],k=new n({where:h,outFields:v.relatedFields}),v.outStatistics&&0<v.outStatistics.length&&d.supportsStatistics&&(p=new n({where:k.where,outFields:k.outFields,outStatistics:v.outStatistics})),l=new u({url:t}),m=[l.execute(k)],p&&m.push(l.execute(p))),this._relatedRecordsQueryPromises=this._relatedRecordsQueryPromises.concat(m),w(m)},_setRelatedRecords:function(a){this._relatedInfo=[];Object.keys(a).forEach(function(c){if(a[c]){var f=
a[c];this._relatedInfo[c]={relatedFeatures:f[0].features};b.isDefined(f[1])&&(this._relatedInfo[c].relatedStatsFeatures=f[1].features)}},this)},_fromRelatedFieldName:function(a){return-1!==a.indexOf("relationships/")?a.split("/").slice(1):[]},_toRelatedFieldName:function(a){return a&&0<a.length?"relationships/"+a[0]+"/"+a[1]:""}})})},"esri/tasks/support/StatisticDefinition":function(){define(["../../core/Accessor"],function(e){return e.createSubclass({declaredClass:"esri.tasks.support.StatisticDefinition",
properties:{maxPointCount:null,maxRecordCount:null,maxVertexCount:null,onStatisticField:null,outStatisticFieldName:null,statisticType:null},toJSON:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}})})},"esri/tasks/support/Query":function(){define(["../../core/Accessor","../../core/kebabDictionary","../../core/lang",
"../../geometry/support/jsonUtils","dojo/_base/array"],function(e,h,d,a,b){var c=h({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),m=h({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",
esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),k=h({upperLeft:"upper-left",lowerLeft:"lower-left"});return e.createSubclass({declaredClass:"esri.tasks.support.Query",properties:{spatialRelationship:"intersects",text:null,where:"",geometry:null,geometryPrecision:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnDistinctValues:!1,returnJSON:!1,maxAllowableOffset:null,multipatchOption:null,num:null,start:null,
orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:"meters",resultOffset:null,resultRecordCount:null,quantizationParameters:null,sqlFormat:null},toJSON:function(e){var g={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:c.toJSON(this.spatialRelationship),maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision,returnZ:this.returnZ,returnM:this.returnM,
sqlFormat:this.sqlFormat},l=e&&e.geometry||this.geometry,h=this.objectIds,r=this.outFields,t=this.outSpatialReference,w=this.groupByFieldsForStatistics,q=this.orderByFields,v=this.outStatistics;e=this.distance;if(l&&(g.geometry=l,g.geometryType=a.getJsonType(l),g.inSR=l.spatialReference.wkid||JSON.stringify(l.spatialReference.toJSON())),h&&(g.objectIds=h.join(",")),r&&(g.outFields=r.join(",")),this.returnDistinctValues&&(g.returnDistinctValues=!0),w&&(g.groupByFieldsForStatistics=w.join(",")),q&&
(g.orderByFields=q.join(",")),v){var x=[];b.forEach(v,function(a){x.push(a.toJSON())});g.outStatistics=JSON.stringify(x)}t?g.outSR=t.wkid||JSON.stringify(t.toJSON()):l&&(g.outSR=l.spatialReference.wkid||JSON.stringify(l.spatialReference.toJSON()));l=this.timeExtent;g.time=l?l.toJSON().join(","):null;l=this.relationParam;if(l&&g.spatialRel===c.toJSON("relation")&&(g.relationParam=l),e&&(g.distance=this.distance,g.units=m.toJSON(this.units)),this.hasOwnProperty("start")&&(g.resultOffset=this.start,
g.resultRecordCount=10,""===g.where&&(g.where="1\x3d1")),this.hasOwnProperty("num")&&(g.resultRecordCount=this.num),g.pixelSize=this.pixelSize?JSON.stringify(this.pixelSize.toJSON()):null,g.multipatchOption=this.multipatchOption,this.quantizationParameters)e=d.clone(this.quantizationParameters),e.originPosition&&(e.originPosition=k.toJSON(e.originPosition)),g.quantizationParameters=JSON.stringify(e);return g._ts=this._ts,g}})})},"esri/tasks/QueryTask":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/accessorSupport/decorators dojo/_base/lang ../request ./Task ./support/FeatureSet ./support/Query ../geometry/Extent ../geometry/support/normalizeUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r){e=function(a){function b(b){b=a.call(this,b)||this;return b.gdbVersion=null,b.source=null,b}return d(b,a),b.prototype.execute=function(a,b){var c=this;return r.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(function(f){f=c._encode(m.mixin({},c.parsedUrl.query,{f:"json"},a.toJSON({geometry:f&&f[0]})));if(c.source){var d={source:c.source.toJSON()};f.layer=JSON.stringify(d)}c.gdbVersion&&(f.gdbVersion=c.gdbVersion);f={query:f,callbackParamName:"callback"};
return(c.requestOptions||b)&&(f=m.mixin({},c.requestOptions,b,f)),k(c.parsedUrl.path+"/query",f)}).then(function(b){return a.returnJSON?b.data:c._handleExecuteResponse(b)})},b.prototype.executeRelationshipQuery=function(a,b){a=this._encode(m.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);a={query:a,callbackParamName:"callback"};return(this.requestOptions||b)&&(a=m.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/queryRelatedRecords",
a).then(this._handleExecuteRelationshipQueryResponse)},b.prototype.executeForIds=function(a,b){var c=this;return r.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(function(f){f=c._encode(m.mixin({},c.parsedUrl.query,{f:"json",returnIdsOnly:!0},a.toJSON({geometry:f&&f[0]})));if(c.source){var d={source:c.source.toJSON()};f.layer=JSON.stringify(d)}c.gdbVersion&&(f.gdbVersion=c.gdbVersion);f={query:f,callbackParamName:"callback"};return(c.requestOptions||b)&&(f=m.mixin({},c.requestOptions,b,
f)),k(c.parsedUrl.path+"/query",f)}).then(this._handleExecuteForIdsResponse)},b.prototype.executeForCount=function(a,b){var c=this;return r.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(function(f){f=c._encode(m.mixin({},c.parsedUrl.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},a.toJSON({geometry:f&&f[0]})));if(c.source){var d={source:c.source.toJSON()};f.layer=JSON.stringify(d)}c.gdbVersion&&(f.gdbVersion=c.gdbVersion);f={query:f,callbackParamName:"callback"};return(c.requestOptions||
b)&&(f=m.mixin({},c.requestOptions,b,f)),k(c.parsedUrl.path+"/query",f)}).then(this._handleExecuteForCountResponse)},b.prototype.executeForExtent=function(a,b){var c=this;return r.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(function(f){f=c._encode(m.mixin({},c.parsedUrl.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},a.toJSON({geometry:f&&f[0]})));if(c.source){var d={source:c.source.toJSON()};f.layer=JSON.stringify(d)}c.gdbVersion&&(f.gdbVersion=c.gdbVersion);f={query:f,callbackParamName:"callback"};
return(c.requestOptions||b)&&(f=m.mixin({},c.requestOptions,b,f)),k(c.parsedUrl.path+"/query",f)}).then(this._handleExecuteForExtentResponse)},b.prototype._handleExecuteResponse=function(a){return g.fromJSON(a.data)},b.prototype._handleExecuteRelationshipQueryResponse=function(a){a=a.data;var b=a.geometryType,c=a.spatialReference,f={};return a.relatedRecordGroups.forEach(function(a){var d=g.fromJSON({geometryType:b,spatialReference:c,features:a.relatedRecords});if(null!=a.objectId)f[a.objectId]=d;
else for(var e in a)a.hasOwnProperty(e)&&"relatedRecords"!==e&&(f[a[e]]=d)}),f},b.prototype._handleExecuteForIdsResponse=function(a){return a.data.objectIds},b.prototype._handleExecuteForCountResponse=function(a){a=a.data;var b=a.features,c=a.objectIds;if(c)a=c.length;else{if(b)throw Error("Unable to perform query. Please check your parameters.");a=a.count}return a},b.prototype._handleExecuteForExtentResponse=function(a){a=a.data;if(a.hasOwnProperty("extent"))a.extent=u.fromJSON(a.extent);else{if(a.features)throw Error("Layer does not support extent calculation.");
if(a.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");}return a},b}(c.declared(l));return a([c.property()],e.prototype,"gdbVersion",void 0),a([c.property()],e.prototype,"source",void 0),a([b(0,c.cast(n))],e.prototype,"execute",null),a([b(0,c.cast(n))],e.prototype,"executeForIds",null),a([b(0,c.cast(n))],e.prototype,"executeForCount",null),a([b(0,c.cast(n))],e.prototype,"executeForExtent",null),e=a([c.subclass("esri.tasks.QueryTask")],e)})},"esri/tasks/Task":function(){define(["dojo/_base/lang",
"../core/Accessor","../core/urlUtils"],function(e,h,d){return h.createSubclass({declaredClass:"esri.tasks.Task",normalizeCtorArgs:function(a,b){if("string"!=typeof a)return a;var c={};return a&&(c.url=a),b&&e.mixin(c,b),c},properties:{normalization:{value:!0},parsedUrl:{value:null,readOnly:!0,dependsOn:["url"],get:function(){return this._parseUrl(this.url)}},requestOptions:{value:null},url:{value:null,type:String}},_parseUrl:function(a){return a?d.urlToObject(a):null},_useSSL:function(){var a=this.parsedUrl,
b=/^http:/i;this.url&&this.set("url",this.url.replace(b,"https:"));a&&a.path&&(a.path=a.path.replace(b,"https:"))},_encode:function(a,b,c){var d,k,l,g,h,u={};for(l in a)if("declaredClass"!==l&&(d=a[l],k=typeof d,null!==d&&void 0!==d&&"function"!==k))if(e.isArray(d))for(u[l]=[],h=d.length,g=0;h>g;g++)u[l][g]=this._encode(d[g]);else"object"===k?d.toJSON&&(g=d.toJSON(c&&c[l]),"esri.tasks.support.FeatureSet"===d.declaredClass&&g.spatialReference&&(g.sr=g.spatialReference,delete g.spatialReference),u[l]=
b?g:JSON.stringify(g)):u[l]=d;return u}})})},"esri/tasks/support/FeatureSet":function(){define("../../core/kebabDictionary ../../core/JSONSupport ../../core/lang ../../Graphic ../../layers/support/Field ../../geometry/SpatialReference ../../geometry/support/graphicsUtils ../../geometry/support/jsonUtils dojo/_base/lang".split(" "),function(e,h,d,a,b,c,m,k,l){e=e({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"});
return h.createSubclass({declaredClass:"esri.tasks.support.FeatureSet",getDefaults:function(){return l.mixin(this.inherited(arguments),{features:[]})},properties:{displayFieldName:null,exceededTransferLimit:null,features:{value:null,json:{read:function(b,d){var e,g=c.fromJSON(d.spatialReference);return e=b.map(function(b){var c=a.fromJSON(b);b=b.geometry&&b.geometry.spatialReference;return c.geometry&&!b&&(c.geometry.spatialReference=g),c}),d.transform&&this._hydrate(d.transform,d.geometryType,e),
e}}},fields:{value:null,type:[b]},geometryType:{value:null,json:{read:e.fromJSON}},spatialReference:{type:c}},toJSON:function(a){var b={hasZ:this.hasZ,hasM:this.hasM};return this.displayFieldName&&(b.displayFieldName=this.displayFieldName),this.fields&&(b.fields=this.fields.map(function(a){return a.toJSON()})),this.spatialReference?b.spatialReference=this.spatialReference.toJSON():this.features[0]&&this.features[0].geometry&&(b.spatialReference=this.features[0].geometry.spatialReference.toJSON()),
this.features[0]&&(this.features[0].geometry&&(b.geometryType=k.getJsonType(this.features[0].geometry)),b.features=m._encodeGraphics(this.features,a)),b.exceededTransferLimit=this.exceededTransferLimit,b.transform=this.transform,d.fixJson(b)},quantize:function(a){var b,c,d=a.translate[0],e=a.translate[1],g=a.scale[0],k=a.scale[1],l=this.features,m=function(a,b,c){var f,d,e,g,k,l,m,h=[];f=0;for(d=a.length;d>f;f++)e=a[f],0<f?(l=b(e[0]),m=c(e[1]),(l!==g||m!==k)&&(h.push([l-g,m-k]),g=l,k=m)):(g=b(e[0]),
k=c(e[1]),h.push([g,k]));return 0<h.length?h:null},f=function(a,b,c){return"point"===a?function(a){return a.x=b(a.x),a.y=c(a.y),a}:"polyline"===a||"polygon"===a?function(a){var f,d,e,g,k;e=a.rings||a.paths;k=[];f=0;for(d=e.length;d>f;f++)g=e[f],(g=m(g,b,c))&&k.push(g);return 0<k.length?(a.rings?a.rings=k:a.paths=k,a):null}:"multipoint"===a?function(a){var f;return f=m(a.points,b,c),0<f.length?(a.points=f,a):null}:"extent"===a?function(a){return a}:void 0}(this.geometryType,function(a){return Math.round((a-
d)/g)},function(a){return Math.round((e-a)/k)});b=0;for(c=l.length;c>b;b++)f(l[b].geometry)||(l.splice(b,1),b--,c--);return this.transform=a,this},_hydrate:function(a,b,c){if(a){var d=a.translate[0],e=a.translate[1],g=a.scale[0],k=a.scale[1],l=function(a,b,c){return"esriGeometryPoint"===a?function(a){a.x=b(a.x);a.y=c(a.y)}:"esriGeometryPolyline"===a||"esriGeometryPolygon"===a?function(a){var f,d,e,g,k,l,m,h=a.rings||a.paths;a=0;for(f=h.length;f>a;a++)for(g=h[a],d=0,e=g.length;e>d;d++)k=g[d],0<d?(l+=
k[0],m+=k[1]):(l=k[0],m=k[1]),k[0]=b(l),k[1]=c(m)}:"esriGeometryEnvelope"===a?function(a){a.xmin=b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)}:"esriGeometryMultipoint"===a?function(a){var f,d,e,g,k=a.points;a=0;for(f=k.length;f>a;a++)d=k[a],0<a?(e+=d[0],g+=d[1]):(e=d[0],g=d[1]),d[0]=b(e),d[1]=c(g)}:void 0}(b,function(a){return a*g+d},function(a){return e-a*k});a=0;for(b=c.length;b>a;a++)c[a].geometry&&l(c[a].geometry)}}})})},"esri/layers/support/Field":function(){define(["../../core/kebabDictionary",
"../../core/JSONSupport","./CodedValueDomain","./RangeDomain"],function(e,h,d,a){var b=e({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"}),c=h.createSubclass({declaredClass:"esri.layers.support.Field",
properties:{alias:null,domain:{value:null,json:{read:function(b,c){c=b&&b.type;return"range"===c?new a(b):"codedValue"===c?new d(b):null}}},editable:!1,length:-1,name:null,nullable:!0,type:{json:{read:b.fromJSON}}},clone:function(){return c.fromJSON(this.toJSON())},toJSON:function(){return{alias:this.alias,domain:this.domain&&this.domain.toJSON(),editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:b.toJSON(this.type)}}});return c})},"esri/layers/support/CodedValueDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain ../../core/lang".split(" "),
function(e,h,d,a,b,c,m){e=function(a){function b(b){b=a.call(this,b)||this;return b.codedValues=null,b.type="coded-value",b}return d(b,a),b.prototype.writeCodedValues=function(a,b){var c=null;a&&(c=a.map(function(a){return m.fixJson(m.clone(a))}));b.codedValues=c},b.prototype.getName=function(a){var b=null;if(this.codedValues){var c=String(a);this.codedValues.some(function(a){return String(a.code)===c&&(b=a.name),!!b})}return b},b}(b.declared(c));return a([b.property({json:{write:!0}})],e.prototype,
"codedValues",void 0),a([b.writer("codedValues")],e.prototype,"writeCodedValues",null),a([b.property()],e.prototype,"type",void 0),e=a([b.subclass("esri.layers.support.CodedValueDomain")],e)})},"esri/layers/support/Domain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport ../../core/kebabDictionary".split(" "),function(e,h,d,a,b,c,m){var k=m({codedValue:"coded-value"});e=function(a){function b(b){b=
a.call(this,b)||this;return b.name=null,b.type=null,b}return d(b,a),b.prototype.writeType=function(a,b){b.type=k.toJSON(a)},b}(b.declared(c));return a([b.property({json:{write:!0}})],e.prototype,"name",void 0),a([b.property({json:{read:k.fromJSON,write:!0}})],e.prototype,"type",void 0),a([b.writer("type")],e.prototype,"writeType",null),e=a([b.subclass("esri.layers.support.Domain")],e)})},"esri/layers/support/RangeDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(e,h,d,a,b,c){e=function(a){function b(b){b=a.call(this,b)||this;return b.maxValue=null,b.minValue=null,b.type="range",b}return d(b,a),b}(b.declared(c));return a([b.property({json:{read:{source:"range",reader:function(a,b){return b.range&&b.range[1]}},write:{target:"range",writer:function(a,b,c){b[c]=[this.minValue,a]}}}})],e.prototype,"maxValue",void 0),a([b.property({json:{read:{source:"range",reader:function(a,b){return b.range&&b.range[0]}},write:{target:"range",writer:function(a,b,c){b[c]=
[a,this.maxValue]}}}})],e.prototype,"minValue",void 0),a([b.property()],e.prototype,"type",void 0),e=a([b.subclass("esri.layers.support.RangeDomain")],e)})},"esri/geometry/support/graphicsUtils":function(){define(["require","exports","dojo/_base/array","../Extent"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});h.graphicsExtent=function(b){var c=b[0].geometry,d=c.extent,e=c;null===d&&(d=new a(e.x,e.y,e.x,e.y,c.spatialReference));for(var l=1;l<b.length;l++){var e=c=b[l].geometry,
g=c.extent;null===g&&(g=new a(e.x,e.y,e.x,e.y,c.spatialReference));d=d.clone().union(g)}return 0>d.width&&0>d.height?null:d};h.getGeometries=function(a){return d.map(a,function(a){return a.geometry})};h._encodeGraphics=function(a,c){var b=[];return d.forEach(a,function(a,d){a=a.toJSON();var e={};if(a.geometry){var k=c&&c[d];e.geometry=k&&k.toJSON()||a.geometry}a.attributes&&(e.attributes=a.attributes);b[d]=e}),b}})},"esri/geometry/support/normalizeUtils":function(){define("dojo/_base/array dojo/Deferred ../../config ../../tasks/GeometryService ../Polyline ../Polygon ./webMercatorUtils ./spatialReferenceUtils ./jsonUtils".split(" "),
function(e,h,d,a,b,c,m,k,l){function g(a,b){return Math.ceil((a-b)/(2*b))}function n(a,b){var c,f,d,e=a.paths||a.rings,g=e.length;for(c=0;g>c;c++)for(d=e[c].length,f=0;d>f;f++){var k=a.getPoint(c,f);a.setPoint(c,f,k.clone().offset(b,0))}return a}function u(a,f){if(!(a instanceof b||a instanceof c))throw console.error("straightLineDensify: the input geometry is neither polyline nor polygon"),Error("straightLineDensify: the input geometry is neither polyline nor polygon");var d,g=a instanceof b,k=[];
return e.forEach(g?a.paths:a.rings,function(a){k.push(d=[]);d.push([a[0][0],a[0][1]]);var b,c,e,g,l,m,h,p,n,v,u,t;for(l=0;l<a.length-1;l++){if(b=a[l][0],c=a[l][1],e=a[l+1][0],g=a[l+1][1],h=Math.sqrt((e-b)*(e-b)+(g-c)*(g-c)),p=(g-c)/h,n=(e-b)/h,v=h/f,1<v){for(m=1;v-1>=m;m++)t=m*f,u=n*t+b,t=p*t+c,d.push([u,t]);m=(h+Math.floor(v-1)*f)/2;u=n*m+b;t=p*m+c;d.push([u,t])}d.push([e,g])}}),g?new b({paths:k,spatialReference:a.spatialReference}):new c({rings:k,spatialReference:a.spatialReference})}function r(a,
b,c){b&&(a=u(a,1E6),a=m.webMercatorToGeographic(a,!0));return c&&(a=n(a,c)),a}function t(a,b,c){var f,d=a.x||a[0];return d>b?(f=g(d,b),a.x?a=a.clone().offset(-2*f*b,0):a[0]=d+-2*f*b):c>d&&(f=g(d,c),a.x?a=a.clone().offset(-2*f*c,0):a[0]=d+-2*f*c),a}function w(a,b){var c=-1;return e.forEach(b.cutIndexes,function(f,d){var k=b.geometries[d];e.forEach(k.rings||k.paths,function(a,b){e.some(a,function(c){if(180>c[0])return!0;var f,d=0,e=a.length;for(c=0;e>c;c++)f=a[c][0],d=f>d?f:d;d=Number(d.toFixed(9));
f=-360*g(d,180);d=a.length;for(c=0;d>c;c++)e=k.getPoint(b,c),k.setPoint(b,c,e.clone().offset(f,0));return!0})});f===c?k.rings?e.forEach(k.rings,function(b){a[f]=a[f].addRing(b)}):e.forEach(k.paths,function(b){a[f]=a[f].addPath(b)}):(c=f,a[f]=k)}),a}function q(a){for(var b=[],c=0,d=0,e=Math.min,g=Math.max,k=0;k<a.length;k++){for(var l=a[k],m=null,h=0;h<l.length;h++)m=l[h],b.push(m),0===h?(c=m[0],d=c):(c=e(c,m[0]),d=g(d,m[0]));m&&b.push([(c+d)/2,0])}return b}var v;return{_straightLineDensify:u,normalizeCentralMeridian:function(u,
f){var p=new h;f||(f=(v||(v=new a({url:d.geometryServiceUrl})),v));var x,q,A,B,D,F,C,E,G=[],K=[],L=0;e.forEach(u,function(a){if(!a||(x||(x=a.spatialReference,q=k.getInfo(x),A=x.isWebMercator,B=A?2.0037508342788905E7:180,D=A?-2.0037508342788905E7:-180,F=A?102100:4326,C=new b({paths:[[[B,D],[B,B]]],spatialReference:{wkid:F}}),E=new b({paths:[[[D,D],[D,B]]],spatialReference:{wkid:F}})),!q))return void G.push(a);var f=l.fromJSON(a.toJSON()),d=a.extent;"point"===a.type?G.push(t(f,B,D)):"multipoint"===
a.type?(f.points=e.map(f.points,function(a){return t(a,B,D)}),G.push(f)):"extent"===a.type?(f=d.clone()._normalize(null,null,q),G.push(f.rings?new c(f):f)):d?(a=2*g(d.xmin,D)*B,f=0===a?f:n(f,a),d=d.clone().offset(a,0),d.intersects(C)&&d.xmax!==B?(L=d.xmax>L?d.xmax:L,f=r(f,A),K.push(f),G.push("cut")):d.intersects(E)&&d.xmin!==D?(L=2*d.xmax*B>L?2*d.xmax*B:L,f=r(f,A,360),K.push(f),G.push("cut")):G.push(f)):G.push(f)});for(var H=new b,I=g(L,B),N=-90,S=I;0<I;){var M=-180+360*I;H.addPath([[M,N],[M,-1*N]]);
N*=-1;I--}return 0<K.length&&0<S?f?f.cut(K,H).then(function(a){K=w(K,a);var b=[];e.forEach(G,function(a,c){"cut"===a&&(a=K.shift(),u[c].rings&&1<u[c].rings.length&&a.rings.length>=u[c].rings.length?(G[c]="simplify",b.push(a)):G[c]=!0===A?m.geographicToWebMercator(a):a)});0<b.length?f.simplify(b).then(function(a){e.forEach(G,function(b,c){"simplify"===b&&(G[c]=!0===A?m.geographicToWebMercator(a.shift()):a.shift())});p.resolve(G)}).otherwise(function(a){p.reject(a)}):p.resolve(G)}).otherwise(function(a){p.reject(a)}):
p.reject(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(e.forEach(G,function(a,b){"cut"===a&&(a=K.shift(),G[b]=!0===A?m.geographicToWebMercator(a):a)}),p.resolve(G)),p.promise},getDenormalizedExtent:function(a){if(!a)return null;var b=a.extent;if(!b)return null;var c=a.spatialReference&&k.getInfo(a.spatialReference);if(!c)return b;var d=c.valid[0],c=c.valid[1],e=b.width,g=b.xmax,l=b.xmin;if("extent"===a.type||0===e||c>=e||e>2*c||d>g||l>c)return b;var m;switch(a.type){case "polygon":if(!(1<
a.rings.length))return b;m=q(a.rings);break;case "polyline":if(!(1<a.paths.length))return b;m=q(a.paths);break;case "multipoint":m=a.points}a=Math.min;for(var d=Math.max,h=b.clone(),n=0;n<m.length;n++){var v=m[n][0];0>v?(v+=c,l=d(v,l)):(v-=c,g=a(v,g))}return h.xmin=g,h.xmax=l,h.width<e?(h.xmin-=c,h.xmax-=c,h):b}}})},"esri/tasks/GeometryService":function(){define("../core/kebabDictionary ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters dojo/_base/lang".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){var u=e({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),r=h.ensureType(g);e=l.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(a,b){a={query:n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,
b,d){var e=a[0].spatialReference;a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)}),callbackParamName:"callback"};return(this.requestOptions||d)&&(a=n.mixin({},this.requestOptions,d,a)),k(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new c({spatialReference:e,rings:a.rings})})})},
buffer:function(a,b){var d=n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.outSpatialReference||a.geometries[0].spatialReference;a={query:d,callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new c({spatialReference:e,rings:a.rings})})})},cut:function(a,b,c){var d=a[0].spatialReference,e=a.map(function(a){return a.toJSON()});a={query:n.mixin({},
this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),target:JSON.stringify({geometryType:m.getJsonType(a[0]),geometries:e}),cutter:JSON.stringify(b.toJSON())}),callbackParamName:"callback"};return(this.requestOptions||c)&&(a=n.mixin({},this.requestOptions,c,a)),k(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return m.fromJSON(a).set("spatialReference",d)})}})},convexHull:function(a,b){var c=a[0].spatialReference;
a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/convexHull",a).then(function(a){return m.fromJSON(a.data.geometry).set("spatialReference",c)})},densify:function(a,b){var c=n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};
return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/densify",a).then(function(a){return(a.data.geometries||[]).map(function(a){return m.fromJSON(a).set("spatialReference",d)})})},difference:function(a,b,c){var d=a[0].spatialReference;a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:m.getJsonType(b),geometry:b.toJSON()})}),callbackParamName:"callback"};
return(this.requestOptions||c)&&(a=n.mixin({},this.requestOptions,c,a)),k(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return m.fromJSON(a).set("spatialReference",d)})})},distance:function(a,b){a={query:n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},fromGeoCoordinateString:function(a,
b){var c={};n.isObject(a.sr)?c.sr=a.sr.wkid||JSON.stringify(a.sr.toJSON()):c.sr=a.sr;c.strings=JSON.stringify(a.strings);c.conversionType=u.toJSON(a.conversionType||"mgrs");c.conversionMode=a.conversionMode;a={query:n.mixin({},this.parsedUrl.query,{f:"json"},c),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/fromGeoCoordinateString",a).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var c=n.mixin({},
this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/generalize",a).then(function(a){return(a.data.geometries||[]).map(function(a){return m.fromJSON(a).set("spatialReference",d)})})},intersect:function(a,b,c){var d=a[0].spatialReference;a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:m.getJsonType(b),geometry:b.toJSON()})}),callbackParamName:"callback"};return(this.requestOptions||c)&&(a=n.mixin({},this.requestOptions,c,a)),k(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return m.fromJSON(a).set("spatialReference",d)})})},lengths:function(a,b){a={query:n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,
b,a)),k(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},labelPoints:function(a,b){var c=a.map(function(a){return a.toJSON()}),d=a[0].spatialReference;a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:d.wkid?d.wkid:JSON.stringify(d.toJSON()),polygons:JSON.stringify(c)}),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/labelPoints",a).then(function(a){return(a.data.labelPoints||[]).map(function(a){return m.fromJSON(a).set("spatialReference",
d)})})},offset:function(a,b){var c=n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),d=a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return m.fromJSON(a).set("spatialReference",d)})})},project:function(a,b){a=r(a);var c=n.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),d=a.outSpatialReference,
e=m.getJsonType(a.geometries[0]),f=this._decodeGeometries;a={query:c,callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/project",a).then(function(a){return f(a.data,e,d)})},relation:function(a,b){a={query:n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/relation",a).then(this._handleRelationResponse)},
reshape:function(a,b,c){var d=a.spatialReference;a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),target:JSON.stringify({geometryType:m.getJsonType(a),geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())}),callbackParamName:"callback"};return(this.requestOptions||c)&&(a=n.mixin({},this.requestOptions,c,a)),k(this.parsedUrl.path+"/reshape",a).then(function(a){return m.fromJSON(a.data.geometry).set("spatialReference",d)})},simplify:function(a,b){var c=a[0].spatialReference,
d=n.mixin({},this.parsedUrl.query,{f:"json",sr:c.wkid?c.wkid:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),e=m.getJsonType(a[0]),f=this._decodeGeometries;a={query:d,callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/simplify",a).then(function(a){return f(a.data,e,c)})},toGeoCoordinateString:function(a,b){var c={};n.isObject(a.sr)?c.sr=a.sr.wkid||JSON.stringify(a.sr.toJSON()):c.sr=a.sr;c.coordinates=
JSON.stringify(a.coordinates);c.conversionType=u.toJSON(a.conversionType||"mgrs");c.conversionMode=a.conversionMode;c.numOfDigits=a.numOfDigits;c.rounding=a.rounding;c.addSpaces=a.addSpaces;a={query:n.mixin({},this.parsedUrl.query,{f:"json"},c),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/toGeoCoordinateString",a).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,c){var d=n.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON()),e=a.sr;a={query:d,callbackParamName:"callback"};return(this.requestOptions||c)&&(a=n.mixin({},this.requestOptions,c,a)),k(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new b({spatialReference:e,paths:a.paths})})})},union:function(a,b){var c=a[0].spatialReference;a={query:n.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),callbackParamName:"callback"};
return(this.requestOptions||b)&&(a=n.mixin({},this.requestOptions,b,a)),k(this.parsedUrl.path+"/union",a).then(function(a){return m.fromJSON(a.data.geometry).set("spatialReference",c)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return a=a.data,a&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b,c=[],d=a.length;
for(b=0;d>b;b++)c.push(a[b].toJSON());return{geometryType:m.getJsonType(a[0]),geometries:c}},_decodeGeometries:function(a,b,c){var d=m.getGeometryType(b);a=a.geometries;var e=[],f={spatialReference:c.toJSON()},g=n.mixin;return a.forEach(function(a,b){e[b]=new d(g(a,f))}),e},_toProjectGeometry:function(a){var e=a.spatialReference.toJSON();return a instanceof d?new c({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:e}):new b({paths:[[].concat(a.points)],
spatialReference:e})},_fromProjectedGeometry:function(b,c,e){return"extent"===c?(b=b.rings[0],new d(b[0][0],b[0][1],b[2][0],b[2][1],e)):new a({points:b.paths[0],spatialReference:e.toJSON()})}});return n.mixin(e,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,
UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,
UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,
UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",
UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"}),e})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/lang ../../geometry/support/jsonUtils ../../core/JSONSupport ../../core/Logger".split(" "),function(e,h,d,a,b,c,m,k,l){var g=l.getLogger("esri.tasks.support.ProjectParameters");
e=function(a){function b(b){b=a.call(this)||this;return b.geometries=null,b.outSpatialReference=null,b.transformation=null,b.transformForward=null,b}return d(b,a),Object.defineProperty(b.prototype,"outSR",{get:function(){return g.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead."),this.outSpatialReference},set:function(a){g.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");this.outSpatialReference=a},enumerable:!0,configurable:!0}),b.prototype.toJSON=
function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],d={};return d.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),d.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON()),d.geometries=JSON.stringify({geometryType:m.getJsonType(b),geometries:a}),this.transformation&&(d.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),c.isDefined(this.transformForward)&&(d.transformForward=this.transformForward),
d},b}(b.declared(k));return a([b.property()],e.prototype,"geometries",void 0),a([b.property({json:{read:{source:"outSR"}}})],e.prototype,"outSpatialReference",void 0),a([b.property({json:{read:!1}})],e.prototype,"outSR",null),a([b.property()],e.prototype,"transformation",void 0),a([b.property()],e.prototype,"transformForward",void 0),e=a([b.subclass("esri.tasks.support.ProjectParameters")],e)})},"esri/renderers/support/arcadeUtils":function(){define(["require","exports","dojo/_base/lang","../../arcade/arcade",
"../../arcade/Dictionary"],function(e,h,d,a,b){function c(b){var c;try{c=b?a.parseScript(b):null}catch(n){c=null}return c}Object.defineProperty(h,"__esModule",{value:!0});var m=/^\$feature\./i,k={vars:{$feature:"any",$view:"any"}};h.createSyntaxTree=c;h.createFunction=function(b,e){e=e||d.clone(k);var g;b="string"==typeof b?c(b):b;try{g=b?a.compileScript(b,e):null}catch(u){g=null}return g};h.createExecContext=function(b,c){return{vars:{$feature:a.constructFeature(b),$view:c&&c.view},spatialReference:c&&
c.sr}};h.evalSyntaxTree=function(b,c){var d;try{d=a.executeScript(b,c,c.spatialReference)}catch(u){d=null}return d};h.executeFunction=function(a,b){var c;try{c=a?a(b,b.spatialReference):null}catch(u){c=null}return c};h.extractFieldNames=function(b){if(!b)return[];b="string"==typeof b?c(b):b;var d=[];return a.extractFieldLiterals(b).forEach(function(a){m.test(a)&&(a=a.replace(m,""),d.push(a))}),d.sort(),d.filter(function(a,b){return 0===b||d[b-1]!==a})};h.dependsOnView=function(b){return a.referencesMember(b,
"$view")};h.getViewInfo=function(a){return a&&a.viewingMode&&null!=a.scale&&a.spatialReference?{view:new b({viewingMode:a.viewingMode,scale:a.scale}),sr:a.spatialReference}:void 0}})},"esri/arcade/arcade":function(){define("require exports ./arcadeRuntime ./parser ./Feature ./arcadeCompiler dojo/has".split(" "),function(e,h,d,a,b,c,m){Object.defineProperty(h,"__esModule",{value:!0});h.compileScript=function(a,b){return m("csp-restrictions")?function(b,c){return d.executeScript(a,b,c)}:c.compileScript(a,
b)};h.constructFeature=function(a){return b.fromFeature(a)};h.parseScript=function(b){return a.parseScript(b)};h.validateScript=function(b,c){return a.validateScript(b,c,"simple")};h.scriptCheck=function(b,c,d){return a.scriptCheck(b,c,d,"full")};h.parseAndExecuteScript=function(b,c,e){return d.executeScript(a.parseScript(b),c,e)};h.executeScript=function(a,b,c){return d.executeScript(a,b,c)};h.referencesMember=function(a,b){return d.referencesMember(a,b)};h.referencesFunction=function(a,b){return d.referencesFunction(a,
b)};h.extractFieldLiterals=function(b,c){return void 0===c&&(c=!1),a.extractFieldLiterals(b,c)}})},"esri/arcade/arcadeRuntime":function(){define("require exports ../geometry/Polygon ../Graphic ../geometry/Polyline ../geometry/Point ../geometry/Extent ../geometry/Multipoint ../geometry/SpatialReference ./languageUtils ./treeAnalysis ./Dictionary ./Feature ./FunctionWrapper ./functions/date ./functions/string ./functions/maths ./functions/geometry ./functions/stats ./ImmutablePathArray ./ImmutablePointArray ../geometry/Geometry".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y){function A(a,b){for(var c=[],f=0;f<b.arguments.length;f++)c.push(D(a,b.arguments[f]));return c}function B(a,b,c){try{return c(a,b,A(a,b))}catch(Z){throw Z;}}function D(a,b){try{switch(b.type){case "EmptyStatement":return g.voidOperation;case "VariableDeclarator":var c=null===b.init?null:D(a,b.init);c===g.voidOperation&&(c=null);var f=b.id.name.toLowerCase();return null!==a.localScope?a.localScope[f]={value:c,valueset:!0,node:b.init}:a.globalScope[f]=
{value:c,valueset:!0,node:b.init},g.voidOperation;case "VariableDeclaration":for(var d=0;d<b.declarations.length;d++)D(a,b.declarations[d]);return g.voidOperation;case "BlockStatement":var e;a:{for(var k=g.voidOperation,d=0;d<b.body.length;d++)if(k=D(a,b.body[d]),k instanceof g.ReturnResult||k===g.breakResult||k===g.continueResult){e=k;break a}e=k}return e;case "FunctionDeclaration":var l=b.id.name.toLowerCase();return a.globalScope[l]={valueset:!0,node:null,value:new t(b,a)},g.voidOperation;case "ReturnStatement":var m;
if(null===b.argument)m=new g.ReturnResult(g.voidOperation);else{var h=D(a,b.argument);m=new g.ReturnResult(h)}return m;case "IfStatement":var p;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(n.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var v=D(a,b.test);if(!0===v)p=D(a,b.consequent);else if(!1===v)p=null!==b.alternate?D(a,b.alternate):g.voidOperation;else throw Error(n.nodeErrorMessage(b,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
return p;case "ExpressionStatement":var x;if("AssignmentExpression"===b.expression.type||"UpdateExpression"===b.expression.type)x=D(a,b.expression);else{var q=D(a,b.expression);x=q===g.voidOperation?g.voidOperation:new g.ImplicitResult(q)}return x;case "AssignmentExpression":var w;var z=D(a,b.right),d=null,y="";if("MemberExpression"===b.left.type){if(d=D(a,b.left.object),y=!0===b.left.computed?D(a,b.left.property):b.left.property.name,g.isArray(d)){if(!g.isNumber(y))throw Error("Invalid Parameter");
if(0>y&&(y=d.length+y),0>y||y>d.length)throw Error("Assignment outside of array bounds");if(y===d.length&&"\x3d"!==b.operator)throw Error("Invalid Parameter");d[y]=C(z,b.operator,d[y],b)}else{if(d instanceof u){if(!1===g.isString(y))throw Error("Dictionary accessor must be a string");}else{if(!(d instanceof r))throw g.isImmutableArray(d)?Error("Array is Immutable"):Error("Invalid Parameter");if(!1===g.isString(y))throw Error("Feature accessor must be a string");}if(!0===d.hasField(y))d.setField(y,
C(z,b.operator,d.field(y),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");d.setField(y,C(z,b.operator,null,b))}}w=g.voidOperation}else if(d=b.left.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[d])w=(a.localScope[d]={value:C(z,b.operator,a.localScope[d].value,b),valueset:!0,node:b.right},g.voidOperation);else if(void 0!==a.globalScope[d])w=(a.globalScope[d]={value:C(z,b.operator,a.globalScope[d].value,b),valueset:!0,node:b.right},g.voidOperation);else throw Error("Variable not recognised");
return w;case "UpdateExpression":var B,d=null;w="";if("MemberExpression"===b.argument.type){if(d=D(a,b.argument.object),w=!0===b.argument.computed?D(a,b.argument.property):b.argument.property.name,g.isArray(d)){if(!g.isNumber(w))throw Error("Invalid Parameter");if(0>w&&(w=d.length+w),0>w||w>=d.length)throw Error("Assignment outside of array bounds");B=g.toNumber(d[w]);d[w]="++"===b.operator?B+1:B-1}else{if(d instanceof u){if(!1===g.isString(w))throw Error("Dictionary accessor must be a string");}else{if(!(d instanceof
r))throw g.isImmutableArray(d)?Error("Array is Immutable"):Error("Invalid Parameter");if(!1===g.isString(w))throw Error("Feature accessor must be a string");}if(!0!==d.hasField(w))throw Error("Invalid Parameter");B=g.toNumber(d.field(w));d.setField(w,"++"===b.operator?B+1:B-1)}y=!1===b.prefix?B:"++"===b.operator?B+1:B-1}else if(d=b.argument.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[d])y=(B=g.toNumber(a.localScope[d].value),a.localScope[d]={value:"++"===b.operator?B+1:B-1,valueset:!0,
node:b},!1===b.prefix?B:"++"===b.operator?B+1:B-1);else if(void 0!==a.globalScope[d])y=(B=g.toNumber(a.globalScope[d].value),a.globalScope[d]={value:"++"===b.operator?B+1:B-1,valueset:!0,node:b},!1===b.prefix?B:"++"===b.operator?B+1:B-1);else throw Error("Variable not recognised");return y;case "BreakStatement":return g.breakResult;case "ContinueStatement":return g.continueResult;case "ForStatement":null!==b.init&&D(a,b.init);d={testResult:!0,lastAction:g.voidOperation};do a:{w=a;z=b;y=d;if(null!==
z.test){if(y.testResult=D(w,z.test),!1===y.testResult)break a;if(!0!==y.testResult)throw Error(n.nodeErrorMessage(z,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}y.lastAction=D(w,z.body);y.lastAction===g.breakResult?y.testResult=!1:y.lastAction instanceof g.ReturnResult?y.testResult=!1:null!==z.update&&D(w,z.update)}while(!0===d.testResult);return d.lastAction instanceof g.ReturnResult?d.lastAction:g.voidOperation;case "ForInStatement":return F(a,b);case "Identifier":var A;var U;try{var E=b.name.toLowerCase();
if(null!==a.localScope&&void 0!==a.localScope[E])A=(U=a.localScope[E],!0===U.valueset?U.value:(U.value=D(a,U.node),U.valueset=!0,U.value));else if(void 0!==a.globalScope[E])A=(U=a.globalScope[E],!0===U.valueset?U.value:(U.value=D(a,U.node),U.valueset=!0,U.value));else throw Error(n.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(Ea){throw Ea;}return A;case "MemberExpression":return G(a,b);case "Literal":return b.value;case "ThisExpression":throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));
case "CallExpression":return I(a,b);case "UnaryExpression":return K(a,b);case "BinaryExpression":return L(a,b);case "LogicalExpression":return H(a,b);case "ConditionalExpression":throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(d=[],w=0;w<b.elements.length;w++){var ba=D(a,b.elements[w]);if(g.isFunctionParameter(ba))throw Error(n.nodeErrorMessage(b,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));ba===g.voidOperation?d.push(null):d.push(ba)}}catch(Ea){throw Ea;}return d;
case "ObjectExpression":d={};for(w=0;w<b.properties.length;w++){var N=D(a,b.properties[w]);if(g.isFunctionParameter(N.value))throw Error("Illegal Argument");if(!1===g.isString(N.key))throw Error("Illegal Argument");N.value===g.voidOperation?d[N.key.toString()]=null:d[N.key.toString()]=N.value}var S=new u(d);return S.immutable=!1,S;case "Property":return{key:"Identifier"===b.key.type?b.key.name:D(a,b.key),value:D(a,b.value)};case "Array":throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));
default:throw Error(n.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(Ea){throw Ea;}}function F(a,b){var c=D(a,b.right);"VariableDeclaration"===b.left.type&&D(a,b.left);var f=null,d="VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name;if(null!==a.localScope&&void 0!==a.localScope[d]&&(f=a.localScope[d]),null===f&&void 0!==a.globalScope[d]&&(f=a.globalScope[d]),null===f)throw Error(n.nodeErrorMessage(b,"RUNTIME","VARIABLENOTDECLARED"));if(g.isArray(c)||g.isString(c)){for(var c=
c.length,e=0;c>e;e++){f.value=e;d=D(a,b.body);if(d===g.breakResult)break;if(d instanceof g.ReturnResult)return d}return g.voidOperation}if(g.isImmutableArray(c)){for(e=0;e<c.length();e++){f.value=e;d=D(a,b.body);if(d===g.breakResult)break;if(d instanceof g.ReturnResult)return d}return g.voidOperation}if(!(c instanceof u||c instanceof r))return g.voidOperation;c=c.keys();for(e=0;e<c.length;e++){f.value=c[e];d=D(a,b.body);if(d===g.breakResult)break;if(d instanceof g.ReturnResult)return d}}function C(a,
b,c,f){switch(b){case "\x3d":return a===g.voidOperation?null:a;case "/\x3d":return g.toNumber(c)/g.toNumber(a);case "*\x3d":return g.toNumber(c)*g.toNumber(a);case "-\x3d":return g.toNumber(c)-g.toNumber(a);case "+\x3d":return g.isString(c)||g.isString(a)?g.toString(c)+g.toString(a):g.toNumber(c)+g.toNumber(a);case "%\x3d":return g.toNumber(c)%g.toNumber(a);default:throw Error(n.nodeErrorMessage(f,"RUNTIME","OPERATORNOTRECOGNISED"));}}function E(a,b,c,f){switch(b=b.toLowerCase()){case "hasz":return a=
a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(c=!1),c&&(R++,a.spatialReference._arcadeCacheId=R,b=R)),a=new u({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=
a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=g.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(R++,b=R,g.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new p(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=
g.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(R++,b=R,g.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new p(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=g.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(R++,b=R,g.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new z(a.points,a.spatialReference,
!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(n.nodeErrorMessage(f,"RUNTIME","PROPERTYNOTFOUND"));}function G(a,b){try{var c=D(a,b.object);if(null===c)throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));if(!1===b.computed){if(c instanceof u||c instanceof r)return c.field(b.property.name);if(c instanceof y)return E(c,b.property.name,a,b);throw Error(n.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}var f=D(a,b.property);if(c instanceof u||c instanceof r){if(g.isString(f))return c.field(f);
throw Error(n.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(c instanceof y){if(g.isString(f))return E(c,f,a,b);throw Error(n.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isArray(c)){if(g.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){if(0>f&&(f=c.length+f),f>=c.length||0>f)throw Error(n.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c[f]}throw Error(n.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isString(c)){if(g.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){if(0>f&&(f=c.length+f),
f>=c.length||0>f)throw Error(n.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c[f]}throw Error(n.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isImmutableArray(c)&&g.isNumber(f)&&isFinite(f)&&Math.floor(f)===f){if(0>f&&(f=c.length()+f),f>=c.length()||0>f)throw Error(n.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c.get(f)}throw Error(n.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}catch(fa){throw fa;}}function K(a,b){try{var c=D(a,b.argument);if(g.isBoolean(c)){if("!"===b.operator)return!c;
if("-"===b.operator)return-1*g.toNumber(c);if("+"===b.operator)return 1*g.toNumber(c);throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b.operator)return-1*g.toNumber(c);if("+"===b.operator)return 1*g.toNumber(c);throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(Z){throw Z;}}function L(a,b){try{var c=[D(a,b.left),D(a,b.right)],f=c[0],d=c[1];switch(b.operator){case "\x3d\x3d":return g.equalityTest(f,d);case "\x3d":return g.equalityTest(f,
d);case "!\x3d":return!g.equalityTest(f,d);case "\x3c":return g.greaterThanLessThan(f,d,b.operator);case "\x3e":return g.greaterThanLessThan(f,d,b.operator);case "\x3c\x3d":return g.greaterThanLessThan(f,d,b.operator);case "\x3e\x3d":return g.greaterThanLessThan(f,d,b.operator);case "+":return g.isString(f)||g.isString(d)?g.toString(f)+g.toString(d):g.toNumber(f)+g.toNumber(d);case "-":return g.toNumber(f)-g.toNumber(d);case "*":return g.toNumber(f)*g.toNumber(d);case "/":return g.toNumber(f)/g.toNumber(d);
case "%":return g.toNumber(f)%g.toNumber(d);default:throw Error(n.nodeErrorMessage(b,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(ja){throw ja;}}function H(a,b){try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(n.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(n.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var c=D(a,b.left);
if(!g.isBoolean(c))throw Error(n.nodeErrorMessage(b,"RUNTIME","ONLYBOOLEAN"));switch(b.operator){case "||":if(!0===c)return c;var f=D(a,b.right);if(g.isBoolean(f))return f;throw Error(n.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===c)return c;f=D(a,b.right);if(g.isBoolean(f))return f;throw Error(n.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));default:throw Error(n.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));}}catch(fa){throw fa;}}function I(a,b){try{if("Identifier"!==b.callee.type)throw Error(n.nodeErrorMessage(b,
"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[b.callee.name.toLowerCase()]){var c=a.localScope[b.callee.name.toLowerCase()];if(c.value instanceof g.NativeFunction)return c.value.fn(a,b);if(c.value instanceof t)return P(a,b,c.value.definition);throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[b.callee.name.toLowerCase()]){c=a.globalScope[b.callee.name.toLowerCase()];if(c.value instanceof g.NativeFunction)return c.value.fn(a,b);if(c.value instanceof
t)return P(a,b,c.value.definition);throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(Z){throw Z;}}function N(a){return null==a?"":g.isArray(a)?"Array":g.isImmutableArray(a)?"Array":g.isDate(a)?"Date":g.isString(a)?"String":g.isBoolean(a)?"Boolean":g.isNumber(a)?"Number":a instanceof u?"Dictionary":a instanceof r?"Feature":a instanceof c?"Point":a instanceof d?"Polygon":a instanceof b?"Polyline":a instanceof k?"Multipoint":a instanceof
m?"Extent":g.isFunctionParameter(a)?"Function":a===g.voidOperation?"":"number"==typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function S(a,b,c,f){try{var d=D(a,b.arguments[c]);if(g.equalityTest(d,f))return D(a,b.arguments[c+1]);var e=b.arguments.length-c;return 1===e?D(a,b.arguments[c]):2===e?null:3===e?D(a,b.arguments[c+2]):S(a,b,c+2,f)}catch(ta){throw ta;}}function M(a,b,c,f){try{if(!0===f)return D(a,b.arguments[c+1]);if(3===b.arguments.length-c)return D(a,b.arguments[c+2]);var d=D(a,b.arguments[c+
2]);if(!1===g.isBoolean(d))throw Error("WHEN needs boolean test conditions");return M(a,b,c+2,d)}catch(ja){throw ja;}}function ca(a,b){var c=a.length,f=Math.floor(c/2);if(0===c)b=[];else if(1===c)b=[a[0]];else{var d=ca(a.slice(0,f),b);a=ca(a.slice(f,c),b);for(c=[];0<d.length||0<a.length;)0<d.length&&0<a.length?(f=b(d[0],a[0]),isNaN(f)&&(f=0),0>=f?(c.push(d[0]),d=d.slice(1)):(c.push(a[0]),a=a.slice(1))):0<d.length?(c.push(d[0]),d=d.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));b=c}return b}function O(a,
b,c){try{var f=a.body;if(c.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var d=0;d<c.length;d++)b.localScope[a.params[d].name.toLowerCase()]={d:null,value:c[d],valueset:!0,node:null};var e=D(b,f);if(e instanceof g.ReturnResult)return e.value;if(e===g.breakResult)throw Error("Cannot Break from a Function");if(e===g.continueResult)throw Error("Cannot Continue from a Function");return e instanceof g.ImplicitResult?e.value:e}catch(ta){throw ta;}}function P(a,b,c){return B(a,
b,function(b,f,d){b={spatialReference:a.spatialReference,applicationCache:void 0===a.applicationCache?null:a.applicationCache,globalScope:a.globalScope,depthCounter:a.depthCounter+1,console:a.console,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return O(c,b,d)})}function W(a){return function(){var b={applicationCache:void 0===a.context.applicationCache?null:a.context.applicationCache,spatialReference:a.context.spatialReference,console:a.context.console,localScope:{},
depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return O(a.definition,b,arguments)}}function aa(a){console.log(a)}Object.defineProperty(h,"__esModule",{value:!0});var R=0,T={};w.registerFunctions(T,B);q.registerFunctions(T,B);v.registerFunctions(T,B);x.registerFunctions(T,B);f.registerFunctions(T,B);T["typeof"]=function(a,b){return B(a,b,function(a,b,c){g.pcCheck(c,1,1);a=N(c[0]);if("Unrecognised Type"===
a)throw Error("Unrecognised Type");return a})};T.iif=function(a,b){try{g.pcCheck(null===b.arguments?[]:b.arguments,3,3);var c=D(a,b.arguments[0]);if(!1===g.isBoolean(c))throw Error("IF Function must have a boolean test condition");return!0===c?D(a,b.arguments[1]):D(a,b.arguments[2])}catch(Z){throw Z;}};T.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return D(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");
var c=D(a,b.arguments[0]);return S(a,b,1,c)}catch(Z){throw Z;}};T.when=function(a,b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");var c=D(a,b.arguments[0]);if(!1===g.isBoolean(c))throw Error("WHEN needs boolean test conditions");return M(a,b,0,c)}catch(Z){throw Z;}};T.top=function(a,b){return B(a,b,function(a,b,c){if(g.pcCheck(c,2,2),g.isArray(c[0]))return g.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,
g.toNumber(c[1]));if(g.isImmutableArray(c[0]))return g.toNumber(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};T.first=function(a,b){return B(a,b,function(a,b,c){return g.pcCheck(c,1,1),g.isArray(c[0])?0===c[0].length?null:c[0][0]:g.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};T.sort=function(a,b){return B(a,b,function(a,b,c){g.pcCheck(c,1,2);a=c[0];if(g.isImmutableArray(a)&&(a=a.toArray()),!1===g.isArray(a))throw Error("Illegal Argument");
if(1<c.length){if(!1===g.isFunctionParameter(c[1]))throw Error("Illegal Argument");var f=W(c[1]);return a=ca(a,function(a,b){return f(a,b)})}if(0===a.length)return[];c={};for(b=0;b<a.length;b++){var d=N(a[b]);""!==d&&(c[d]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Point||!0===c.Polygon||!0===c.Polyline||!0===c.Multipoint||!0===c.Extent||!0===c.Function)return a.slice(0);b=0;var d="",e;for(e in c)b++,d=e;return a=1<b||"String"===d?ca(a,function(a,b){if(null===a||void 0===a||a===
g.voidOperation)return null===b||void 0===b||b===g.voidOperation?0:1;if(null===b||void 0===b||b===g.voidOperation)return-1;a=g.toString(a);b=g.toString(b);return b>a?-1:a===b?0:1}):"Number"===d?ca(a,function(a,b){return a-b}):"Boolean"===d?ca(a,function(a,b){return a===b?0:b?-1:1}):"Date"===d?ca(a,function(a,b){return b-a}):a.slice(0)})};h.functionHelper={fixSpatialReference:g.fixSpatialReference,parseArguments:A,standardFunction:B};h.executeScript=function(b,c,f){f||(f=new l(102100));var d=c.vars,
e=c.customfunctions,k={};d||(d={});e||(e={});var m=new u({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});m.immutable=!1;k.textformatting={value:m,valueset:!0,node:null};k.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};k.pi={value:Math.PI,valueset:!0,node:null};for(var h in T)k[h]={value:new g.NativeFunction(T[h]),valueset:!0,node:null};for(h in e)k[h]={value:new g.NativeFunction(e[h]),"native":!0,valueset:!0,node:null};for(h in d)d[h]instanceof
a?k[h]={value:new r(d[h]),valueset:!0,node:null}:k[h]={value:d[h],valueset:!0,node:null};b=D({spatialReference:f,globalScope:k,localScope:null,console:c.console?c.console:aa,depthCounter:1,applicationCache:void 0===c.applicationCache?null:c.applicationCache},b.body[0].body);if(b instanceof g.ReturnResult&&(b=b.value),b instanceof g.ImplicitResult&&(b=b.value),b===g.voidOperation&&(b=null),b===g.breakResult)throw Error("Cannot return BREAK");if(b===g.continueResult)throw Error("Cannot return CONTINUE");
if(b instanceof t)throw Error("Cannot return FUNCTION");if(b instanceof g.NativeFunction)throw Error("Cannot return FUNCTION");return b};h.extractFieldLiterals=function(a,b){return void 0===b&&(b=!1),n.findFieldLiterals(a,b)};h.validateScript=function(a,b){return n.validateScript(a,b,"simple")};h.referencesMember=function(a,b){return n.referencesMember(a,b)};h.referencesFunction=function(a,b){return n.referencesFunction(a,b)}})},"esri/arcade/languageUtils":function(){define("require exports ../geometry/Geometry ../moment dojo/number ./ImmutableArray ../kernel ./ImmutablePointArray ./ImmutablePathArray dojo/_base/array ../geometry/Point ../geometry/Polyline ../geometry/Polygon ../geometry/Extent ../geometry/Multipoint ./FunctionWrapper".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q){function v(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function x(a){return a instanceof S||a instanceof q||a instanceof M}function f(a){return"string"==typeof a||a instanceof String}function p(a){return"boolean"==typeof a}function z(a){return"number"==typeof a}function y(a){return a instanceof Array}function A(a){return a instanceof Date}function B(a,c){return!1===isNaN(a)?void 0===c||
null===c||""===c?a.toString():(c=v(c,"\u2030",""),c=v(c,"\u00a4",""),b.format(a,{pattern:c})):a.toString()}function D(b,c){b=a(b);return void 0===c||null===c||""===c?b.format():b.format(F(c))}function F(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function C(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return b>a;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return b>=a}return!1}function E(a,b){if(a===b||null===a&&b===h.voidOperation||null===b&&a===h.voidOperation)return!0;
if(A(a)&&A(b))return a.getTime()===b.getTime();if(a instanceof l||a instanceof k)return a.equalityTest(b);if(a instanceof n&&b instanceof n){var c=void 0,f=void 0;if(h.isVersion4?(c=a.cache._arcadeCacheId,f=b.cache._arcadeCacheId):(c=a.getCacheValue("_arcadeCacheId"),f=b.getCacheValue("_arcadeCacheId")),void 0!==c&&null!==c)return c===f}return void 0!==a&&void 0!==b&&null!==a&&null!==b&&"object"==typeof a&&"object"==typeof b&&(a._arcadeCacheId===b._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==
a._arcadeCacheId||a._underlyingGraphic===b._underlyingGraphic&&void 0!==a._underlyingGraphic&&null!==a._underlyingGraphic)?!0:!1}function G(a,b){if(f(a))return a;if(null===a)return"";if(z(a))return B(a,b);if(p(a))return a.toString();if(A(a))return D(a,b);if(a instanceof d)return JSON.stringify(a.toJSON());if(y(a)){b=[];for(var e=0;e<a.length;e++)b[e]=L(a[e]);return"["+b.join(",")+"]"}if(a instanceof c){b=[];for(e=0;e<a.length();e++)b[e]=L(a.get(e));return"["+b.join(",")+"]"}return null!==a&&"object"==
typeof a&&void 0!==a.castToText?a.castToText():x(a)?"object, Function":(a===h.voidOperation,"")}function K(a,b){if(f(a))return a;if(null===a)return"";if(z(a))return B(a,b);if(p(a))return a.toString();if(A(a))return D(a,b);if(a instanceof d)return JSON.stringify(a.toJSON());if(y(a)){b=[];for(var e=0;e<a.length;e++)b[e]=L(a[e]);return"["+b.join(",")+"]"}if(a instanceof c){b=[];for(e=0;e<a.length();e++)b[e]=L(a.get(e));return"["+b.join(",")+"]"}return null!==a&&"object"==typeof a&&void 0!==a.castToText?
a.castToText():x(a)?"object, Function":(a===h.voidOperation,"")}function L(a){return null===a?"null":p(a)||z(a)||f(a)?JSON.stringify(a):a instanceof d||a instanceof c||a instanceof Array?K(a):a instanceof Date?JSON.stringify(D(a,"")):null!==a&&"object"==typeof a&&void 0!==a.castToText?a.castToText():"null"}function H(a,c){return z(a)?a:null===a?0:""===a?0:A(a)?NaN:p(a)?a?1:0:y(a)?NaN:""===a?NaN:void 0===a?NaN:void 0!==c&&f(a)?(c=v(c,"\u2030",""),c=v(c,"\u00a4",""),b.parse(a,{pattern:c})):a===h.voidOperation?
0:Number(a)}function I(a,b){var c;return g.some(b.fields,function(b){return b.name===a&&(c=b.domain),!!c}),c}Object.defineProperty(h,"__esModule",{value:!0});e=function(){return function(a){this.value=a}}();var N=function(){return function(a){this.value=a}}(),S=function(){return function(a){this.fn=a}}(),M=function(){return function(a){this.fn=a}}();h.NativeFunction=S;h.ImplicitResult=N;h.ReturnResult=e;h.SizzleFunction=M;h.isVersion4=0===m.version.indexOf("4.");h.voidOperation={type:"VOID"};h.breakResult=
{type:"BREAK"};h.continueResult={type:"CONTINUE"};h.multiReplace=v;h.isFunctionParameter=x;h.isSimpleType=function(a){return f(a)?!0:z(a)?!0:A(a)?!0:p(a)?!0:null===a?!0:a===h.voidOperation?!0:"number"==typeof a?!0:!1};h.defaultUndefined=function(a,b){return void 0===a?b:a};h.isString=f;h.isBoolean=p;h.isNumber=z;h.isArray=y;h.isFeatureCursor=function(a){return a&&void 0!==a.isFeatureCursor};h.isImmutableArray=function(a){return a instanceof c};h.isDate=A;h.pcCheck=function(a,b,c){if(a.length<b||a.length>
c)throw Error("Function called with wrong number of Parameters");};h.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:3&c|8).toString(16)})};h.formatNumber=B;h.formatDate=D;h.standardiseDateFormat=F;h.greaterThanLessThan=function(a,b,c){if(null===a){if(null===b||b===h.voidOperation)return C(null,null,c);if(z(b))return C(0,b,c);if(f(b)||p(b))return C(0,H(b),
c);if(A(b))return C(0,b.getTime(),c)}if(a===h.voidOperation){if(null===b||b===h.voidOperation)return C(null,null,c);if(z(b))return C(0,b,c);if(f(b)||p(b))return C(0,H(b),c);if(A(b))return C(0,b.getTime(),c)}else if(z(a)){if(z(b))return C(a,b,c);if(p(b))return C(a,H(b),c);if(null===b||b===h.voidOperation)return C(a,0,c);if(f(b))return C(a,H(b),c);if(A(b))return C(a,b.getTime(),c)}else if(f(a)){if(f(b))return C(G(a),G(b),c);if(A(b))return C(H(a),b.getTime(),c);if(z(b))return C(H(a),b,c);if(null===b||
b===h.voidOperation)return C(H(a),0,c);if(p(b))return C(H(a),H(b),c)}else if(A(a)){if(A(b))return C(a,b,c);if(null===b||b===h.voidOperation)return C(a.getTime(),0,c);if(z(b))return C(a.getTime(),b,c);if(p(b)||f(b))return C(a.getTime(),H(b),c)}else if(p(a)){if(p(b))return C(a,b,c);if(z(b))return C(H(a),H(b),c);if(A(b))return C(H(a),b.getTime(),c);if(null===b||b===h.voidOperation)return C(H(a),0,c);if(f(b))return C(H(a),H(b),c)}return!E(a,b)||"\x3c\x3d"!==c&&"\x3e\x3d"!==c?!1:!0};h.equalityTest=E;h.toString=
G;h.toNumberArray=function(a){var b=[];if(!1===y(a))return null;if(a instanceof c){for(var f=0;f<a.length();f++)b[f]=H(a.get(f));return b}for(f=0;f<a.length;f++)b[f]=H(a[f]);return b};h.toStringExplicit=K;h.toNumber=H;h.toDate=function(b,c){return A(b)?b:f(b)&&(b=a(b,[void 0===c||null===c||""===c?a.ISO_8601:c]),b.isValid())?b.toDate():null};h.toDateM=function(b,c){return A(b)?a(b):f(b)&&(b=a(b,[void 0===c||null===c||""===c?a.ISO_8601:c]),b.isValid())?b:null};h.toBoolean=function(a){return p(a)?a:
f(a)?(a=a.toLowerCase(),"true"===a?!0:!1):z(a)?0===a?!1:isNaN(a)?!1:!0:!1};h.fixSpatialReference=function(a,b){return null===a||void 0===a?null:((null===a.spatialReference||void 0===a.spatialReference)&&(a.spatialReference=b),a)};h.fixNullGeometry=function(a){return null===a?null:a instanceof n?"NaN"===a.x||null===a.x||isNaN(a.x)?null:a:a instanceof r?0===a.rings.length?null:a:a instanceof u?0===a.paths.length?null:a:a instanceof w?0===a.points.length?null:a:a instanceof t?"NaN"===a.xmin||null===
a.xmin||isNaN(a.xmin)?null:a:null};h.getDomainValue=function(a,b){if(!a||!a.domain)return null;var c=null;b="string"===a.field.type||"esriFieldTypeString"===a.field.type?G(b):H(b);for(var f=0;f<a.domain.codedValues.length;f++){var d=a.domain.codedValues[f];d.code===b&&(c=d)}return null===c?null:c.name};h.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=G(b);for(var f=0;f<a.domain.codedValues.length;f++){var d=a.domain.codedValues[f];d.name===b&&(c=d)}return null===c?null:c.code};
h.getDomain=function(a,b,c,f){if((void 0===c&&(c=null),!b)||!b.fields)return null;for(var d=null,e=0;e<b.fields.length;e++){var k=b.fields[e];k.name.toLowerCase()===a.toString().toLowerCase()&&(d=k)}if(null===d)return null;var l,m;return f||(f=c&&b.typeIdField&&c._field(b.typeIdField)),null!=f&&g.some(b.types,function(a){return a.id===f?(l=a.domains&&a.domains[d.name],l&&"inherited"===l.type&&(l=I(d.name,b),m=!0),!0):!1}),m||l||(l=I(a,b)),{field:d,domain:l}}})},"esri/moment":function(){define(["require",
"exports","./plugins/moment!"],function(e,h,d){return d})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});var b={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-nz":1,es:1,"es-do":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,
pl:1,pt:1,"pt-br":1,ro:1,ru:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1};h.load=function(c,e,k){c=d.locale;var l=c in b;if(!l){var g=c.split("-");1<g.length&&g[0]in b&&(c=g[0],l=!0)}l?e(["moment/locale/"+c],function(){k(a)}):k(a)}})},"moment/moment":function(){(function(e,h){"object"===typeof exports&&"undefined"!==typeof module?module.exports=h():"function"===typeof define&&define.amd?define(h):e.moment=h()})(this,function(){function e(){return Sb.apply(null,arguments)}function h(a){return a instanceof
Array||"[object Array]"===Object.prototype.toString.call(a)}function d(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function a(a){return void 0===a}function b(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}function c(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function m(a,b){var c=[],f;for(f=0;f<a.length;++f)c.push(b(a[f],f));return c}function k(a,b){return Object.prototype.hasOwnProperty.call(a,
b)}function l(a,b){for(var c in b)k(b,c)&&(a[c]=b[c]);k(b,"toString")&&(a.toString=b.toString);k(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function g(a,b,c,f){return Ka(a,b,c,f,!0).utc()}function n(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function u(a){if(null==a._isValid){var b=n(a),c=ec.call(b.parsedDateParts,
function(a){return null!=a}),c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function r(a){var b=g(NaN);null!=a?l(n(b),a):n(b).userInvalidated=!0;return b}function t(b,c){var f,d,e;a(c._isAMomentObject)||(b._isAMomentObject=
c._isAMomentObject);a(c._i)||(b._i=c._i);a(c._f)||(b._f=c._f);a(c._l)||(b._l=c._l);a(c._strict)||(b._strict=c._strict);a(c._tzm)||(b._tzm=c._tzm);a(c._isUTC)||(b._isUTC=c._isUTC);a(c._offset)||(b._offset=c._offset);a(c._pf)||(b._pf=n(c));a(c._locale)||(b._locale=c._locale);if(0<Fb.length)for(f=0;f<Fb.length;f++)d=Fb[f],e=c[d],a(e)||(b[d]=e);return b}function w(a){t(this,a);this._d=new Date(null!=a._d?a._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Gb&&(Gb=!0,e.updateOffset(this),
Gb=!1)}function q(a){return a instanceof w||null!=a&&null!=a._isAMomentObject}function v(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function x(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=v(a));return b}function f(a,b,c){var f=Math.min(a.length,b.length),d=Math.abs(a.length-b.length),e=0,g;for(g=0;g<f;g++)(c&&a[g]!==b[g]||!c&&x(a[g])!==x(b[g]))&&e++;return e+d}function p(a){!1===e.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function z(a,
b){var c=!0;return l(function(){null!=e.deprecationHandler&&e.deprecationHandler(null,a);if(c){for(var f=[],d,g=0;g<arguments.length;g++){d="";if("object"===typeof arguments[g]){d+="\n["+g+"] ";for(var k in arguments[0])d+=k+": "+arguments[0][k]+", ";d=d.slice(0,-2)}else d=arguments[g];f.push(d)}p(a+"\nArguments: "+Array.prototype.slice.call(f).join("")+"\n"+Error().stack);c=!1}return b.apply(this,arguments)},b)}function y(a,b){null!=e.deprecationHandler&&e.deprecationHandler(a,b);Tb[a]||(p(b),Tb[a]=
!0)}function A(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function B(a,b){var c=l({},a),f;for(f in b)k(b,f)&&(d(a[f])&&d(b[f])?(c[f]={},l(c[f],a[f]),l(c[f],b[f])):null!=b[f]?c[f]=b[f]:delete c[f]);for(f in a)k(a,f)&&!k(b,f)&&d(a[f])&&(c[f]=l({},c[f]));return c}function D(a){null!=a&&this.set(a)}function F(a,b){var c=a.toLowerCase();ob[c]=ob[c+"s"]=ob[b]=a}function C(a){return"string"===typeof a?ob[a]||ob[a.toLowerCase()]:void 0}function E(a){var b={},
c,f;for(f in a)k(a,f)&&(c=C(f))&&(b[c]=a[f]);return b}function G(a){var b=[],c;for(c in a)b.push({unit:c,priority:Da[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function K(a,b){return function(c){if(null!=c){if(this.isValid())this._d["set"+(this._isUTC?"UTC":"")+a](c);e.updateOffset(this,b);return this}return L(this,a)}}function L(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function H(a,b,c){var f=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,
b-f.length)).toString().substr(1)+f}function I(a,b,c,f){var d=f;"string"===typeof f&&(d=function(){return this[f]()});a&&(mb[a]=d);b&&(mb[b[0]]=function(){return H(d.apply(this,arguments),b[1],b[2])});c&&(mb[c]=function(){return this.localeData().ordinal(d.apply(this,arguments),a)})}function N(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function S(a){var b=a.match(Ub),c,f;c=0;for(f=b.length;c<f;c++)b[c]=mb[b[c]]?mb[b[c]]:N(b[c]);return function(c){var d="",e;for(e=0;e<
f;e++)d+=A(b[e])?b[e].call(c,a):b[e];return d}}function M(a,b){if(!a.isValid())return a.localeData().invalidDate();b=ca(b,a.localeData());Hb[b]=Hb[b]||S(b);return Hb[b](a)}function ca(a,b){function c(a){return b.longDateFormat(a)||a}var f=5;for(wb.lastIndex=0;0<=f&&wb.test(a);)a=a.replace(wb,c),wb.lastIndex=0,--f;return a}function O(a,b,c){Ib[a]=A(b)?b:function(a,f){return a&&c?c:b}}function P(a,b){return k(Ib,a)?Ib[a](b._strict,b._locale):new RegExp(W(a))}function W(a){return aa(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,
function(a,b,c,f,d){return b||c||f||d}))}function aa(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function R(a,c){var f,d=c;"string"===typeof a&&(a=[a]);b(c)&&(d=function(a,b){b[c]=x(a)});for(f=0;f<a.length;f++)Jb[a[f]]=d}function T(a,b){R(a,function(a,c,f,d){f._w=f._w||{};b(a,f._w,f,d)})}function ba(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()}function U(a,c){var f;if(!a.isValid())return a;if("string"===typeof c)if(/^\d+$/.test(c))c=x(c);else if(c=a.localeData().monthsParse(c),
!b(c))return a;f=Math.min(a.date(),ba(a.year(),c));a._d["set"+(a._isUTC?"UTC":"")+"Month"](c,f);return a}function ea(a){return null!=a?(U(this,a),e.updateOffset(this,!0),this):L(this,"Month")}function Z(){function a(a,b){return b.length-a.length}var b=[],c=[],f=[],d,e;for(d=0;12>d;d++)e=g([2E3,d]),b.push(this.monthsShort(e,"")),c.push(this.months(e,"")),f.push(this.months(e,"")),f.push(this.monthsShort(e,""));b.sort(a);c.sort(a);f.sort(a);for(d=0;12>d;d++)b[d]=aa(b[d]),c[d]=aa(c[d]);for(d=0;24>d;d++)f[d]=
aa(f[d]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+f.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+c.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")","i")}function fa(a){return 0===a%4&&0!==a%100||0===a%400}function ja(a,b,c,f,d,e,g){b=new Date(a,b,c,f,d,e,g);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function ta(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);
return b}function ra(a,b,c){c=7+b-c;return-((7+ta(a,0,c).getUTCDay()-b)%7)+c-1}function Aa(a,b,c,f,d){c=(7+c-f)%7;f=ra(a,f,d);f=1+7*(b-1)+c+f;0>=f?(b=a-1,a=(fa(b)?366:365)+f):f>(fa(a)?366:365)?(b=a+1,a=f-(fa(a)?366:365)):(b=a,a=f);return{year:b,dayOfYear:a}}function Fa(a,b,c){var f=ra(a.year(),b,c),f=Math.floor((a.dayOfYear()-f-1)/7)+1;1>f?(a=a.year()-1,b=f+pa(a,b,c)):f>pa(a.year(),b,c)?(b=f-pa(a.year(),b,c),a=a.year()+1):(a=a.year(),b=f);return{week:b,year:a}}function pa(a,b,c){var f=ra(a,b,c);b=
ra(a+1,b,c);return((fa(a)?366:365)-f+b)/7}function ib(a,b,c){var f,d;a=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],f=0;7>f;++f)d=g([2E3,1]).day(f),this._minWeekdaysParse[f]=this.weekdaysMin(d,"").toLocaleLowerCase(),this._shortWeekdaysParse[f]=this.weekdaysShort(d,"").toLocaleLowerCase(),this._weekdaysParse[f]=this.weekdays(d,"").toLocaleLowerCase();if(c)b="dddd"===b?Ca.call(this._weekdaysParse,a):"ddd"===b?Ca.call(this._shortWeekdaysParse,
a):Ca.call(this._minWeekdaysParse,a);else if("dddd"===b){b=Ca.call(this._weekdaysParse,a);if(-1!==b)return b;b=Ca.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=Ca.call(this._minWeekdaysParse,a)}else if("ddd"===b){b=Ca.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=Ca.call(this._weekdaysParse,a);if(-1!==b)return b;b=Ca.call(this._minWeekdaysParse,a)}else{b=Ca.call(this._minWeekdaysParse,a);if(-1!==b)return b;b=Ca.call(this._weekdaysParse,a);if(-1!==b)return b;b=Ca.call(this._shortWeekdaysParse,
a)}return-1!==b?b:null}function Ia(){function a(a,b){return b.length-a.length}var b=[],c=[],f=[],d=[],e,k,l,m;for(e=0;7>e;e++)k=g([2E3,1]).day(e),l=this.weekdaysMin(k,""),m=this.weekdaysShort(k,""),k=this.weekdays(k,""),b.push(l),c.push(m),f.push(k),d.push(l),d.push(m),d.push(k);b.sort(a);c.sort(a);f.sort(a);d.sort(a);for(e=0;7>e;e++)c[e]=aa(c[e]),f[e]=aa(f[e]),d[e]=aa(d[e]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i");this._weekdaysStrictRegex=
new RegExp("^("+f.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+c.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+b.join("|")+")","i")}function wa(){return this.hours()%12||12}function xa(a,b){I(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Ja(a,b){return b._meridiemParse}function Ua(a){return a?a.toLowerCase().replace("_","-"):a}function bb(a){var b=null;if(!va[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=
xb._abbr,require("./locale/"+a),za(b)}catch(Pc){}return va[a]}function za(b,c){b&&(b=a(c)?Ga(b):Na(b,c))&&(xb=b);return xb._abbr}function Na(a,b){if(null!==b){var c=Vb;b.abbr=a;if(null!=va[a])y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=va[a]._config;else if(null!=b.parentLocale)if(null!=
va[b.parentLocale])c=va[b.parentLocale]._config;else return pb[b.parentLocale]||(pb[b.parentLocale]=[]),pb[b.parentLocale].push({name:a,config:b}),null;va[a]=new D(B(c,b));pb[a]&&pb[a].forEach(function(a){Na(a.name,a.config)});za(a);return va[a]}delete va[a];return null}function Ga(a){var b;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return xb;if(!h(a)){if(b=bb(a))return b;a=[a]}a:{b=0;for(var c,d,e,g;b<a.length;){g=Ua(a[b]).split("-");c=g.length;for(d=(d=Ua(a[b+1]))?d.split("-"):null;0<
c;){if(e=bb(g.slice(0,c).join("-"))){a=e;break a}if(d&&d.length>=c&&f(g,d,!0)>=c-1)break;c--}b++}a=null}return a}function Ha(a){var b;(b=a._a)&&-2===n(a).overflow&&(b=0>b[Xa]||11<b[Xa]?Xa:1>b[Sa]||b[Sa]>ba(b[Pa],b[Xa])?Sa:0>b[ya]||24<b[ya]||24===b[ya]&&(0!==b[Qa]||0!==b[Ya]||0!==b[jb])?ya:0>b[Qa]||59<b[Qa]?Qa:0>b[Ya]||59<b[Ya]?Ya:0>b[jb]||999<b[jb]?jb:-1,n(a)._overflowDayOfYear&&(b<Pa||b>Sa)&&(b=Sa),n(a)._overflowWeeks&&-1===b&&(b=fc),n(a)._overflowWeekday&&-1===b&&(b=gc),n(a).overflow=b);return a}
function Ra(a){var b,c;b=a._i;var f=hc.exec(b)||ic.exec(b),d,e,g,k;if(f){n(a).iso=!0;b=0;for(c=yb.length;b<c;b++)if(yb[b][1].exec(f[1])){e=yb[b][0];d=!1!==yb[b][2];break}if(null==e)a._isValid=!1;else{if(f[3]){b=0;for(c=Kb.length;b<c;b++)if(Kb[b][1].exec(f[3])){g=(f[2]||" ")+Kb[b][0];break}if(null==g){a._isValid=!1;return}}if(d||null==g){if(f[4])if(jc.exec(f[4]))k="Z";else{a._isValid=!1;return}a._f=e+(g||"")+(k||"");Ba(a)}else a._isValid=!1}}else a._isValid=!1}function $a(a){var b,c,f,d,e={" GMT":" +0000",
" EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},g;b=a._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,"");if(b=kc.exec(b)){c=b[1]?"ddd"+(5===b[1].length?", ":" "):"";f="D MMM "+(10<b[2].length?"YYYY ":"YY ");d="HH:mm"+(b[4]?":ss":"");if(b[1]){var k="Sun Mon Tue Wed Thu Fri Sat".split(" ")[(new Date(b[2])).getDay()];if(b[1].substr(0,3)!==k){n(a).weekdayMismatch=!0;a._isValid=!1;return}}switch(b[5].length){case 2:0===
g?e=" +0000":(g="YXWVUTSRQPONZABCDEFGHIKLM".indexOf(b[5][1].toUpperCase())-12,e=(0>g?" -":" +")+(""+g).replace(/^-?/,"0").match(/..$/)[0]+"00");break;case 4:e=e[b[5]];break;default:e=e[" GMT"]}b[5]=e;a._i=b.splice(1).join("");a._f=c+f+d+" ZZ";Ba(a);n(a).rfc2822=!0}else a._isValid=!1}function Ea(a){var b=lc.exec(a._i);null!==b?a._d=new Date(+b[1]):(Ra(a),!1===a._isValid&&(delete a._isValid,$a(a),!1===a._isValid&&(delete a._isValid,e.createFromInputFallback(a))))}function Oa(a,b,c){return null!=a?a:
null!=b?b:c}function X(a){var b,c=[],f;if(!a._d){f=new Date(e.now());f=a._useUTC?[f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()]:[f.getFullYear(),f.getMonth(),f.getDate()];if(a._w&&null==a._a[Sa]&&null==a._a[Xa]){var d,g,k,l,m,h;d=a._w;if(null!=d.GG||null!=d.W||null!=d.E){if(m=1,h=4,g=Oa(d.GG,a._a[Pa],Fa(ga(),1,4).year),k=Oa(d.W,1),l=Oa(d.E,1),1>l||7<l)b=!0}else if(m=a._locale._week.dow,h=a._locale._week.doy,k=Fa(ga(),m,h),g=Oa(d.gg,a._a[Pa],k.year),k=Oa(d.w,k.week),null!=d.d){if(l=d.d,0>l||6<
l)b=!0}else if(null!=d.e){if(l=d.e+m,0>d.e||6<d.e)b=!0}else l=m;1>k||k>pa(g,m,h)?n(a)._overflowWeeks=!0:null!=b?n(a)._overflowWeekday=!0:(b=Aa(g,k,l,m,h),a._a[Pa]=b.year,a._dayOfYear=b.dayOfYear)}if(null!=a._dayOfYear){b=Oa(a._a[Pa],f[Pa]);if(a._dayOfYear>(fa(b)?366:365)||0===a._dayOfYear)n(a)._overflowDayOfYear=!0;b=ta(b,0,a._dayOfYear);a._a[Xa]=b.getUTCMonth();a._a[Sa]=b.getUTCDate()}for(b=0;3>b&&null==a._a[b];++b)a._a[b]=c[b]=f[b];for(;7>b;b++)a._a[b]=c[b]=null==a._a[b]?2===b?1:0:a._a[b];24===
a._a[ya]&&0===a._a[Qa]&&0===a._a[Ya]&&0===a._a[jb]&&(a._nextDay=!0,a._a[ya]=0);a._d=(a._useUTC?ta:ja).apply(null,c);null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[ya]=24)}}function Ba(a){if(a._f===e.ISO_8601)Ra(a);else if(a._f===e.RFC_2822)$a(a);else{a._a=[];n(a).empty=!0;var b=""+a._i,c,f,d,g,l,m=b.length,h=0;d=ca(a._f,a._locale).match(Ub)||[];for(c=0;c<d.length;c++){g=d[c];if(f=(b.match(P(g,a))||[])[0])l=b.substr(0,b.indexOf(f)),0<l.length&&n(a).unusedInput.push(l),
b=b.slice(b.indexOf(f)+f.length),h+=f.length;if(mb[g]){if(f?n(a).empty=!1:n(a).unusedTokens.push(g),l=a,null!=f&&k(Jb,g))Jb[g](f,l._a,l,g)}else a._strict&&!f&&n(a).unusedTokens.push(g)}n(a).charsLeftOver=m-h;0<b.length&&n(a).unusedInput.push(b);12>=a._a[ya]&&!0===n(a).bigHour&&0<a._a[ya]&&(n(a).bigHour=void 0);n(a).parsedDateParts=a._a.slice(0);n(a).meridiem=a._meridiem;b=a._a;c=ya;m=a._locale;d=a._a[ya];h=a._meridiem;null!=h&&(null!=m.meridiemHour?d=m.meridiemHour(d,h):null!=m.isPM&&((m=m.isPM(h))&&
12>d&&(d+=12),m||12!==d||(d=0)));b[c]=d;X(a);Ha(a)}}function ua(a){if(!a._d){var b=E(a._i);a._a=m([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});X(a)}}function ka(a){var b=a._i,f=a._f;a._locale=a._locale||Ga(a._l);if(null===b||void 0===f&&""===b)return r({nullInput:!0});"string"===typeof b&&(a._i=b=a._locale.preparse(b));if(q(b))return new w(Ha(b));if(c(b))a._d=b;else if(h(f)){var d,e,g;if(0===a._f.length)n(a).invalidFormat=!0,a._d=new Date(NaN);
else{for(b=0;b<a._f.length;b++)if(f=0,d=t({},a),null!=a._useUTC&&(d._useUTC=a._useUTC),d._f=a._f[b],Ba(d),u(d)&&(f+=n(d).charsLeftOver,f+=10*n(d).unusedTokens.length,n(d).score=f,null==g||f<g))g=f,e=d;l(a,e||d)}}else f?Ba(a):Ma(a);u(a)||(a._d=null);return a}function Ma(f){var g=f._i;a(g)?f._d=new Date(e.now()):c(g)?f._d=new Date(g.valueOf()):"string"===typeof g?Ea(f):h(g)?(f._a=m(g.slice(0),function(a){return parseInt(a,10)}),X(f)):d(g)?ua(f):b(g)?f._d=new Date(g):e.createFromInputFallback(f)}function Ka(a,
b,c,f,e){var g={};if(!0===c||!1===c)f=c,c=void 0;var k;if(k=d(a))a:{k=a;for(var l in k){k=!1;break a}k=!0}if(k||h(a)&&0===a.length)a=void 0;g._isAMomentObject=!0;g._useUTC=g._isUTC=e;g._l=c;g._i=a;g._f=b;g._strict=f;a=new w(Ha(ka(g)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function ga(a,b,c,f){return Ka(a,b,c,f,!1)}function cb(a,b){var c,f;1===b.length&&h(b[0])&&(b=b[0]);if(!b.length)return ga();c=b[0];for(f=1;f<b.length;++f)if(!b[f].isValid()||b[f][a](c))c=b[f];return c}function V(a){for(var b in a)if(-1===
qb.indexOf(b)||null!=a[b]&&isNaN(a[b]))return!1;b=!1;for(var c=0;c<qb.length;++c)if(a[qb[c]]){if(b)return!1;parseFloat(a[qb[c]])!==x(a[qb[c]])&&(b=!0)}return!0}function ma(a){a=E(a);var b=a.year||0,c=a.quarter||0,f=a.month||0,d=a.week||0,e=a.day||0,g=a.hour||0,k=a.minute||0,l=a.second||0,m=a.millisecond||0;this._isValid=V(a);this._milliseconds=+m+1E3*l+6E4*k+36E5*g;this._days=+e+7*d;this._months=+f+3*c+12*b;this._data={};this._locale=Ga();this._bubble()}function J(a){return a instanceof ma}function ia(a){return 0>
a?-1*Math.round(-1*a):Math.round(a)}function la(a,b){I(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+H(~~(a/60),2)+b+H(~~a%60,2)})}function na(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(mc)||["-",0,0];b=+(60*a[1])+x(a[2]);return 0===b?0:"+"===a[0]?b:-b}function da(a,b){return b._isUTC?(b=b.clone(),a=(q(a)||c(a)?a.valueOf():ga(a).valueOf())-b.valueOf(),b._d.setTime(b._d.valueOf()+a),e.updateOffset(b,!1),b):ga(a).local()}function ha(){return this.isValid()?
this._isUTC&&0===this._offset:!1}function Q(a,c){var f=a,d=null;J(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:b(a)?(f={},c?f[c]=a:f.milliseconds=a):(d=nc.exec(a))?(f="-"===d[1]?-1:1,f={y:0,d:x(d[Sa])*f,h:x(d[ya])*f,m:x(d[Qa])*f,s:x(d[Ya])*f,ms:x(ia(1E3*d[jb]))*f}):(d=oc.exec(a))?(f="-"===d[1]?-1:1,f={y:Wa(d[2],f),M:Wa(d[3],f),w:Wa(d[4],f),d:Wa(d[5],f),h:Wa(d[6],f),m:Wa(d[7],f),s:Wa(d[8],f)}):null==f?f={}:"object"===typeof f&&("from"in f||"to"in f)&&(d=ga(f.from),f=ga(f.to),d.isValid()&&f.isValid()?
(f=da(f,d),d.isBefore(f)?f=nb(d,f):(f=nb(f,d),f.milliseconds=-f.milliseconds,f.months=-f.months),d=f):d={milliseconds:0,months:0},f={},f.ms=d.milliseconds,f.M=d.months);f=new ma(f);J(a)&&k(a,"_locale")&&(f._locale=a._locale);return f}function Wa(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function nb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,
"M");return c}function lb(a,b){return function(c,f){var d;null===f||isNaN(+f)||(y(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),d=c,c=f,f=d);c=Q("string"===typeof c?+c:c,f);ub(this,c,a);return this}}function ub(a,b,c,f){var d=b._milliseconds,g=ia(b._days);b=ia(b._months);if(a.isValid()){f=null==f?!0:f;d&&a._d.setTime(a._d.valueOf()+d*c);if(g&&(d=L(a,"Date")+g*c,a.isValid()))a._d["set"+
(a._isUTC?"UTC":"")+"Date"](d);b&&U(a,L(a,"Month")+b*c);f&&e.updateOffset(a,g||b)}}function Va(a){if(void 0===a)return this._locale._abbr;a=Ga(a);null!=a&&(this._locale=a);return this}function sb(){return this._locale}function db(a,b){I(0,[a,a.length],0,b)}function vb(a,b,c,f,d){var e;if(null==a)return Fa(this,f,d).year;e=pa(a,f,d);b>e&&(b=e);a=Aa(a,b,c,f,d);a=ta(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function Ob(a,b){b[jb]=
x(1E3*("0."+a))}function kb(a){return a}function gb(a,b,c,f){var d=Ga();b=g().set(f,b);return d[c](b,a)}function Pb(a,c,f){b(a)&&(c=a,a=void 0);a=a||"";if(null!=c)return gb(a,c,f,"month");var d=[];for(c=0;12>c;c++)d[c]=gb(a,c,f,"month");return d}function Eb(a,c,f,d){"boolean"!==typeof a&&(f=c=a,a=!1);b(c)&&(f=c,c=void 0);c=c||"";var e=Ga();a=a?e._week.dow:0;if(null!=f)return gb(c,(f+a)%7,d,"day");e=[];for(f=0;7>f;f++)e[f]=gb(c,(f+a)%7,d,"day");return e}function Qb(a,b,c,f){b=Q(b,c);a._milliseconds+=
f*b._milliseconds;a._days+=f*b._days;a._months+=f*b._months;return a._bubble()}function Rb(a){return 0>a?Math.floor(a):Math.ceil(a)}function ab(a){return function(){return this.as(a)}}function hb(a){return function(){return this.isValid()?this._data[a]:NaN}}function dc(a,b,c,f,d){return d.relativeTime(b||1,!!c,a,f)}function tb(){if(!this.isValid())return this.localeData().invalidDate();var a=Lb(this._milliseconds)/1E3,b=Lb(this._days),c=Lb(this._months),f,d;f=v(a/60);d=v(f/60);a%=60;f%=60;var e=v(c/
12),c=c%12,g=this.asSeconds();return g?(0>g?"-":"")+"P"+(e?e+"Y":"")+(c?c+"M":"")+(b?b+"D":"")+(d||f||a?"T":"")+(d?d+"H":"")+(f?f+"M":"")+(a?a+"S":""):"P0D"}var Sb,ec=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,f=0;f<c;f++)if(f in b&&a.call(this,b[f],f,b))return!0;return!1},Fb=e.momentProperties=[],Gb=!1,Tb={};e.suppressDeprecationWarnings=!1;e.deprecationHandler=null;var pc=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)k(a,b)&&c.push(b);
return c},ob={},Da={},Ub=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,wb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hb={},mb={},Wb=/\d/,La=/\d\d/,Xb=/\d{3}/,Mb=/\d{4}/,zb=/[+-]?\d{6}/,sa=/\d\d?/,Yb=/\d\d\d\d?/,Zb=/\d\d\d\d\d\d?/,Ab=/\d{1,3}/,Nb=/\d{1,4}/,Bb=/[+-]?\d{1,6}/,qc=/\d+/,Cb=/[+-]?\d+/,rc=/Z|[+-]\d\d:?\d\d/gi,Db=/Z|[+-]\d\d(?::?\d\d)?/gi,rb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,
Ib={},Jb={},Pa=0,Xa=1,Sa=2,ya=3,Qa=4,Ya=5,jb=6,fc=7,gc=8,Ca=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};I("M",["MM",2],"Mo",function(){return this.month()+1});I("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});I("MMMM",0,0,function(a){return this.localeData().months(this,a)});F("month","M");Da.month=8;O("M",sa);O("MM",sa,La);O("MMM",function(a,b){return b.monthsShortRegex(a)});O("MMMM",function(a,
b){return b.monthsRegex(a)});R(["M","MM"],function(a,b){b[Xa]=x(a)-1});R(["MMM","MMMM"],function(a,b,c,f){f=c._locale.monthsParse(a,f,c._strict);null!=f?b[Xa]=f:n(c).invalidMonth=a});var $b=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;I("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});I(0,["YY",2],0,function(){return this.year()%100});I(0,["YYYY",4],0,"year");I(0,["YYYYY",5],0,"year");I(0,["YYYYYY",6,!0],0,"year");F("year","y");Da.year=1;O("Y",Cb);O("YY",sa,La);O("YYYY",Nb,Mb);O("YYYYY",Bb,zb);
O("YYYYYY",Bb,zb);R(["YYYYY","YYYYYY"],Pa);R("YYYY",function(a,b){b[Pa]=2===a.length?e.parseTwoDigitYear(a):x(a)});R("YY",function(a,b){b[Pa]=e.parseTwoDigitYear(a)});R("Y",function(a,b){b[Pa]=parseInt(a,10)});e.parseTwoDigitYear=function(a){return x(a)+(68<x(a)?1900:2E3)};var ac=K("FullYear",!0);I("w",["ww",2],"wo","week");I("W",["WW",2],"Wo","isoWeek");F("week","w");F("isoWeek","W");Da.week=5;Da.isoWeek=5;O("w",sa);O("ww",sa,La);O("W",sa);O("WW",sa,La);T(["w","ww","W","WW"],function(a,b,c,f){b[f.substr(0,
1)]=x(a)});I("d",0,"do","day");I("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});I("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});I("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});I("e",0,0,"weekday");I("E",0,0,"isoWeekday");F("day","d");F("weekday","e");F("isoWeekday","E");Da.day=11;Da.weekday=11;Da.isoWeekday=11;O("d",sa);O("e",sa);O("E",sa);O("dd",function(a,b){return b.weekdaysMinRegex(a)});O("ddd",function(a,b){return b.weekdaysShortRegex(a)});
O("dddd",function(a,b){return b.weekdaysRegex(a)});T(["dd","ddd","dddd"],function(a,b,c,f){f=c._locale.weekdaysParse(a,f,c._strict);null!=f?b.d=f:n(c).invalidWeekday=a});T(["d","e","E"],function(a,b,c,f){b[f]=x(a)});I("H",["HH",2],0,"hour");I("h",["hh",2],0,wa);I("k",["kk",2],0,function(){return this.hours()||24});I("hmm",0,0,function(){return""+wa.apply(this)+H(this.minutes(),2)});I("hmmss",0,0,function(){return""+wa.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)});I("Hmm",0,0,function(){return""+
this.hours()+H(this.minutes(),2)});I("Hmmss",0,0,function(){return""+this.hours()+H(this.minutes(),2)+H(this.seconds(),2)});xa("a",!0);xa("A",!1);F("hour","h");Da.hour=13;O("a",Ja);O("A",Ja);O("H",sa);O("h",sa);O("k",sa);O("HH",sa,La);O("hh",sa,La);O("kk",sa,La);O("hmm",Yb);O("hmmss",Zb);O("Hmm",Yb);O("Hmmss",Zb);R(["H","HH"],ya);R(["k","kk"],function(a,b,c){a=x(a);b[ya]=24===a?0:a});R(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});R(["h","hh"],function(a,b,c){b[ya]=x(a);n(c).bigHour=
!0});R("hmm",function(a,b,c){var f=a.length-2;b[ya]=x(a.substr(0,f));b[Qa]=x(a.substr(f));n(c).bigHour=!0});R("hmmss",function(a,b,c){var f=a.length-4,d=a.length-2;b[ya]=x(a.substr(0,f));b[Qa]=x(a.substr(f,2));b[Ya]=x(a.substr(d));n(c).bigHour=!0});R("Hmm",function(a,b,c){c=a.length-2;b[ya]=x(a.substr(0,c));b[Qa]=x(a.substr(c))});R("Hmmss",function(a,b,c){c=a.length-4;var f=a.length-2;b[ya]=x(a.substr(0,c));b[Qa]=x(a.substr(c,2));b[Ya]=x(a.substr(f))});var sc=K("Hours",!0),Vb={calendar:{sameDay:"[Today at] LT",
nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",
MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),meridiemParse:/[ap]\.?m?\.?/i},va={},pb={},xb,hc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
ic=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jc=/Z|[+-]\d\d(?::?\d\d)?/,yb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Kb=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],lc=/^\/?Date\((\-?\d+)/i,kc=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;e.createFromInputFallback=
z("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});e.ISO_8601=function(){};e.RFC_2822=function(){};var tc=z("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",
function(){var a=ga.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:r()}),uc=z("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=ga.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:r()}),qb="year quarter month week day hour minute second millisecond".split(" ");la("Z",":");la("ZZ","");O("Z",Db);O("ZZ",Db);R(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=na(Db,a)});var mc=/([\+\-]|\d\d)/gi;
e.updateOffset=function(){};var nc=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,oc=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Q.fn=ma.prototype;Q.invalid=function(){return Q(NaN)};var vc=lb(1,"add"),wc=lb(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var bc=z("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",
function(a){return void 0===a?this.localeData():this.locale(a)});I(0,["gg",2],0,function(){return this.weekYear()%100});I(0,["GG",2],0,function(){return this.isoWeekYear()%100});db("gggg","weekYear");db("ggggg","weekYear");db("GGGG","isoWeekYear");db("GGGGG","isoWeekYear");F("weekYear","gg");F("isoWeekYear","GG");Da.weekYear=1;Da.isoWeekYear=1;O("G",Cb);O("g",Cb);O("GG",sa,La);O("gg",sa,La);O("GGGG",Nb,Mb);O("gggg",Nb,Mb);O("GGGGG",Bb,zb);O("ggggg",Bb,zb);T(["gggg","ggggg","GGGG","GGGGG"],function(a,
b,c,f){b[f.substr(0,2)]=x(a)});T(["gg","GG"],function(a,b,c,f){b[f]=e.parseTwoDigitYear(a)});I("Q",0,"Qo","quarter");F("quarter","Q");Da.quarter=7;O("Q",Wb);R("Q",function(a,b){b[Xa]=3*(x(a)-1)});I("D",["DD",2],"Do","date");F("date","D");Da.date=9;O("D",sa);O("DD",sa,La);O("Do",function(a,b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});R(["D","DD"],Sa);R("Do",function(a,b){b[Sa]=x(a.match(sa)[0],10)});var cc=K("Date",!0);I("DDD",["DDDD",3],"DDDo","dayOfYear");
F("dayOfYear","DDD");Da.dayOfYear=4;O("DDD",Ab);O("DDDD",Xb);R(["DDD","DDDD"],function(a,b,c){c._dayOfYear=x(a)});I("m",["mm",2],0,"minute");F("minute","m");Da.minute=14;O("m",sa);O("mm",sa,La);R(["m","mm"],Qa);var xc=K("Minutes",!1);I("s",["ss",2],0,"second");F("second","s");Da.second=15;O("s",sa);O("ss",sa,La);R(["s","ss"],Ya);var yc=K("Seconds",!1);I("S",0,0,function(){return~~(this.millisecond()/100)});I(0,["SS",2],0,function(){return~~(this.millisecond()/10)});I(0,["SSS",3],0,"millisecond");
I(0,["SSSS",4],0,function(){return 10*this.millisecond()});I(0,["SSSSS",5],0,function(){return 100*this.millisecond()});I(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});I(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});I(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});I(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});F("millisecond","ms");Da.millisecond=16;O("S",Ab,Wb);O("SS",Ab,La);O("SSS",Ab,Xb);var eb;for(eb="SSSS";9>=eb.length;eb+="S")O(eb,
qc);for(eb="S";9>=eb.length;eb+="S")R(eb,Ob);var zc=K("Milliseconds",!1);I("z",0,0,"zoneAbbr");I("zz",0,0,"zoneName");var Y=w.prototype;Y.add=vc;Y.calendar=function(a,b){a=a||ga();var c=da(a,this).startOf("day"),c=e.calendarFormat(this,c)||"sameElse";b=b&&(A(b[c])?b[c].call(this,a):b[c]);return this.format(b||this.localeData().calendar(c,this,ga(a)))};Y.clone=function(){return new w(this)};Y.diff=function(a,b,c){var f;if(!this.isValid())return NaN;a=da(a,this);if(!a.isValid())return NaN;f=6E4*(a.utcOffset()-
this.utcOffset());b=C(b);if("year"===b||"month"===b||"quarter"===b){f=12*(a.year()-this.year())+(a.month()-this.month());var d=this.clone().add(f,"months"),e;0>a-d?(e=this.clone().add(f-1,"months"),a=(a-d)/(d-e)):(e=this.clone().add(f+1,"months"),a=(a-d)/(e-d));a=-(f+a)||0;"quarter"===b?a/=3:"year"===b&&(a/=12)}else a=this-a,a="second"===b?a/1E3:"minute"===b?a/6E4:"hour"===b?a/36E5:"day"===b?(a-f)/864E5:"week"===b?(a-f)/6048E5:a;return c?a:v(a)};Y.endOf=function(a){a=C(a);if(void 0===a||"millisecond"===
a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};Y.format=function(a){a||(a=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);a=M(this,a);return this.localeData().postformat(a)};Y.from=function(a,b){return this.isValid()&&(q(a)&&a.isValid()||ga(a).isValid())?Q({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};Y.fromNow=function(a){return this.from(ga(),a)};Y.to=function(a,b){return this.isValid()&&(q(a)&&
a.isValid()||ga(a).isValid())?Q({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};Y.toNow=function(a){return this.to(ga(),a)};Y.get=function(a){a=C(a);return A(this[a])?this[a]():this};Y.invalidAt=function(){return n(this).overflow};Y.isAfter=function(b,c){b=q(b)?b:ga(b);if(!this.isValid()||!b.isValid())return!1;c=C(a(c)?"millisecond":c);return"millisecond"===c?this.valueOf()>b.valueOf():b.valueOf()<this.clone().startOf(c).valueOf()};Y.isBefore=function(b,c){b=
q(b)?b:ga(b);if(!this.isValid()||!b.isValid())return!1;c=C(a(c)?"millisecond":c);return"millisecond"===c?this.valueOf()<b.valueOf():this.clone().endOf(c).valueOf()<b.valueOf()};Y.isBetween=function(a,b,c,f){f=f||"()";return("("===f[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===f[1]?this.isBefore(b,c):!this.isAfter(b,c))};Y.isSame=function(a,b){a=q(a)?a:ga(a);if(!this.isValid()||!a.isValid())return!1;b=C(b||"millisecond");if("millisecond"===b)return this.valueOf()===a.valueOf();a=a.valueOf();return this.clone().startOf(b).valueOf()<=
a&&a<=this.clone().endOf(b).valueOf()};Y.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};Y.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};Y.isValid=function(){return u(this)};Y.lang=bc;Y.locale=Va;Y.localeData=sb;Y.max=uc;Y.min=tc;Y.parsingFlags=function(){return l({},n(this))};Y.set=function(a,b){if("object"===typeof a){a=E(a);b=G(a);for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=C(a),A(this[a]))return this[a](b);return this};
Y.startOf=function(a){a=C(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};Y.subtract=wc;Y.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),
this.millisecond()]};Y.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};Y.toDate=function(){return new Date(this.valueOf())};Y.toISOString=function(){if(!this.isValid())return null;var a=this.clone().utc();return 0>a.year()||9999<a.year()?M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):A(Date.prototype.toISOString)?this.toDate().toISOString():M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")};
Y.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var a="["+a+'("]',c=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+(b+'[")]'))};Y.toJSON=function(){return this.isValid()?this.toISOString():null};Y.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};Y.unix=function(){return Math.floor(this.valueOf()/
1E3)};Y.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};Y.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};Y.year=ac;Y.isLeapYear=function(){return fa(this.year())};Y.weekYear=function(a){return vb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};Y.isoWeekYear=function(a){return vb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};Y.quarter=Y.quarters=function(a){return null==
a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};Y.month=ea;Y.daysInMonth=function(){return ba(this.year(),this.month())};Y.week=Y.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};Y.isoWeek=Y.isoWeeks=function(a){var b=Fa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};Y.weeksInYear=function(){var a=this.localeData()._week;return pa(this.year(),a.dow,a.doy)};Y.isoWeeksInYear=function(){return pa(this.year(),1,4)};Y.date=cc;Y.day=
Y.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};Y.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};Y.isoWeekday=function(a){if(!this.isValid())return null!=a?this:
NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};Y.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};Y.hour=Y.hours=sc;Y.minute=Y.minutes=xc;Y.second=Y.seconds=yc;Y.millisecond=Y.milliseconds=zc;Y.utcOffset=function(a,b,c){var f=this._offset||0,d;if(!this.isValid())return null!=a?this:NaN;if(null!=
a){if("string"===typeof a){if(a=na(Db,a),null===a)return this}else 16>Math.abs(a)&&!c&&(a*=60);!this._isUTC&&b&&(d=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=a;this._isUTC=!0;null!=d&&this.add(d,"m");f!==a&&(!b||this._changeInProgress?ub(this,Q(a-f,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?f:15*-Math.round(this._d.getTimezoneOffset()/15)};Y.utc=function(a){return this.utcOffset(0,
a)};Y.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};Y.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var a=na(rc,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this};Y.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?ga(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};Y.isDST=function(){return this.utcOffset()>
this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};Y.isLocal=function(){return this.isValid()?!this._isUTC:!1};Y.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};Y.isUtc=ha;Y.isUTC=ha;Y.zoneAbbr=function(){return this._isUTC?"UTC":""};Y.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};Y.dates=z("dates accessor is deprecated. Use date instead.",cc);Y.months=z("months accessor is deprecated. Use month instead",ea);Y.years=z("years accessor is deprecated. Use year instead",
ac);Y.zone=z("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});Y.isDSTShifted=z("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var b={};t(b,this);b=ka(b);if(b._a){var c=b._isUTC?g(b._a):ga(b._a);this._isDSTShifted=this.isValid()&&
0<f(b._a,c.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var qa=D.prototype;qa.calendar=function(a,b,c){a=this._calendar[a]||this._calendar.sameElse;return A(a)?a.call(b,c):a};qa.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};qa.invalidDate=function(){return this._invalidDate};qa.ordinal=function(a){return this._ordinal.replace("%d",
a)};qa.preparse=kb;qa.postformat=kb;qa.relativeTime=function(a,b,c,f){var d=this._relativeTime[c];return A(d)?d(a,b,c,f):d.replace(/%d/i,a)};qa.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return A(a)?a(b):a.replace(/%s/i,b)};qa.set=function(a){var b,c;for(c in a)b=a[c],A(b)?this[c]=b:this["_"+c]=b;this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};qa.months=function(a,b){return a?
h(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||$b).test(b)?"format":"standalone"][a.month()]:h(this._months)?this._months:this._months.standalone};qa.monthsShort=function(a,b){return a?h(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[$b.test(b)?"format":"standalone"][a.month()]:h(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};qa.monthsParse=function(a,b,c){var f,d;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=
[],this._longMonthsParse=[],this._shortMonthsParse=[],f=0;12>f;++f)d=g([2E3,f]),this._shortMonthsParse[f]=this.monthsShort(d,"").toLocaleLowerCase(),this._longMonthsParse[f]=this.months(d,"").toLocaleLowerCase();if(c)b="MMM"===b?Ca.call(this._shortMonthsParse,a):Ca.call(this._longMonthsParse,a);else if("MMM"===b){b=Ca.call(this._shortMonthsParse,a);if(-1!==b)break a;b=Ca.call(this._longMonthsParse,a)}else{b=Ca.call(this._longMonthsParse,a);if(-1!==b)break a;b=Ca.call(this._shortMonthsParse,a)}b=-1!==
b?b:null}return b}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(f=0;12>f;f++)if(d=g([2E3,f]),c&&!this._longMonthsParse[f]&&(this._longMonthsParse[f]=new RegExp("^"+this.months(d,"").replace(".","")+"$","i"),this._shortMonthsParse[f]=new RegExp("^"+this.monthsShort(d,"").replace(".","")+"$","i")),c||this._monthsParse[f]||(d="^"+this.months(d,"")+"|^"+this.monthsShort(d,""),this._monthsParse[f]=new RegExp(d.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[f].test(a)||
c&&"MMM"===b&&this._shortMonthsParse[f].test(a)||!c&&this._monthsParse[f].test(a))return f};qa.monthsRegex=function(a){if(this._monthsParseExact)return k(this,"_monthsRegex")||Z.call(this),a?this._monthsStrictRegex:this._monthsRegex;k(this,"_monthsRegex")||(this._monthsRegex=rb);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};qa.monthsShortRegex=function(a){if(this._monthsParseExact)return k(this,"_monthsRegex")||Z.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;
k(this,"_monthsShortRegex")||(this._monthsShortRegex=rb);return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};qa.week=function(a){return Fa(a,this._week.dow,this._week.doy).week};qa.firstDayOfYear=function(){return this._week.doy};qa.firstDayOfWeek=function(){return this._week.dow};qa.weekdays=function(a,b){return a?h(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:h(this._weekdays)?this._weekdays:
this._weekdays.standalone};qa.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin};qa.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};qa.weekdaysParse=function(a,b,c){var f,d;if(this._weekdaysParseExact)return ib.call(this,a,b,c);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(f=0;7>f;f++)if(d=g([2E3,1]).day(f),c&&!this._fullWeekdaysParse[f]&&(this._fullWeekdaysParse[f]=
new RegExp("^"+this.weekdays(d,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[f]=new RegExp("^"+this.weekdaysShort(d,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[f]=new RegExp("^"+this.weekdaysMin(d,"").replace(".",".?")+"$","i")),this._weekdaysParse[f]||(d="^"+this.weekdays(d,"")+"|^"+this.weekdaysShort(d,"")+"|^"+this.weekdaysMin(d,""),this._weekdaysParse[f]=new RegExp(d.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[f].test(a)||c&&"ddd"===b&&this._shortWeekdaysParse[f].test(a)||
c&&"dd"===b&&this._minWeekdaysParse[f].test(a)||!c&&this._weekdaysParse[f].test(a))return f};qa.weekdaysRegex=function(a){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||Ia.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;k(this,"_weekdaysRegex")||(this._weekdaysRegex=rb);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};qa.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||Ia.call(this),a?this._weekdaysShortStrictRegex:
this._weekdaysShortRegex;k(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=rb);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};qa.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||Ia.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;k(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=rb);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};qa.isPM=
function(a){return"p"===(a+"").toLowerCase().charAt(0)};qa.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};za("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===x(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});e.lang=z("moment.lang is deprecated. Use moment.locale instead.",za);e.langData=z("moment.langData is deprecated. Use moment.localeData instead.",Ga);var Za=Math.abs,Ac=ab("ms"),Bc=ab("s"),Cc=ab("m"),Dc=ab("h"),Ec=ab("d"),
Fc=ab("w"),Gc=ab("M"),Hc=ab("y"),Ic=hb("milliseconds"),Jc=hb("seconds"),Kc=hb("minutes"),Lc=hb("hours"),Mc=hb("days"),Nc=hb("months"),Oc=hb("years"),fb=Math.round,Ta={ss:44,s:45,m:45,h:22,d:26,M:11},Lb=Math.abs,oa=ma.prototype;oa.isValid=function(){return this._isValid};oa.abs=function(){var a=this._data;this._milliseconds=Za(this._milliseconds);this._days=Za(this._days);this._months=Za(this._months);a.milliseconds=Za(a.milliseconds);a.seconds=Za(a.seconds);a.minutes=Za(a.minutes);a.hours=Za(a.hours);
a.months=Za(a.months);a.years=Za(a.years);return this};oa.add=function(a,b){return Qb(this,a,b,1)};oa.subtract=function(a,b){return Qb(this,a,b,-1)};oa.as=function(a){if(!this.isValid())return NaN;var b,c=this._milliseconds;a=C(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*
b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*b)+c;default:throw Error("Unknown unit "+a);}};oa.asMilliseconds=Ac;oa.asSeconds=Bc;oa.asMinutes=Cc;oa.asHours=Dc;oa.asDays=Ec;oa.asWeeks=Fc;oa.asMonths=Gc;oa.asYears=Hc;oa.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*x(this._months/12):NaN};oa._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,f=this._data;0<=a&&0<=b&&0<=c||0>=a&&
0>=b&&0>=c||(a+=864E5*Rb(146097*c/4800+b),c=b=0);f.milliseconds=a%1E3;a=v(a/1E3);f.seconds=a%60;a=v(a/60);f.minutes=a%60;a=v(a/60);f.hours=a%24;b+=v(a/24);a=v(4800*b/146097);c+=a;b-=Rb(146097*a/4800);a=v(c/12);f.days=b;f.months=c%12;f.years=a;return this};oa.get=function(a){a=C(a);return this.isValid()?this[a+"s"]():NaN};oa.milliseconds=Ic;oa.seconds=Jc;oa.minutes=Kc;oa.hours=Lc;oa.days=Mc;oa.weeks=function(){return v(this.days()/7)};oa.months=Nc;oa.years=Oc;oa.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();
var b=this.localeData(),c;c=!a;var f=Q(this).abs(),d=fb(f.as("s")),e=fb(f.as("m")),g=fb(f.as("h")),k=fb(f.as("d")),l=fb(f.as("M")),f=fb(f.as("y")),d=d<=Ta.ss&&["s",d]||d<Ta.s&&["ss",d]||1>=e&&["m"]||e<Ta.m&&["mm",e]||1>=g&&["h"]||g<Ta.h&&["hh",g]||1>=k&&["d"]||k<Ta.d&&["dd",k]||1>=l&&["M"]||l<Ta.M&&["MM",l]||1>=f&&["y"]||["yy",f];d[2]=c;d[3]=0<+this;d[4]=b;c=dc.apply(null,d);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};oa.toISOString=tb;oa.toString=tb;oa.toJSON=tb;oa.locale=Va;oa.localeData=
sb;oa.toIsoString=z("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",tb);oa.lang=bc;I("X",0,0,"unix");I("x",0,0,"valueOf");O("x",Cb);O("X",/[+-]?\d+(\.\d{1,3})?/);R("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});R("x",function(a,b,c){c._d=new Date(x(a))});e.version="2.18.1";Sb=ga;e.fn=Y;e.min=function(){var a=[].slice.call(arguments,0);return cb("isBefore",a)};e.max=function(){var a=[].slice.call(arguments,0);return cb("isAfter",a)};e.now=function(){return Date.now?
Date.now():+new Date};e.utc=g;e.unix=function(a){return ga(1E3*a)};e.months=function(a,b){return Pb(a,b,"months")};e.isDate=c;e.locale=za;e.invalid=r;e.duration=Q;e.isMoment=q;e.weekdays=function(a,b,c){return Eb(a,b,c,"weekdays")};e.parseZone=function(){return ga.apply(null,arguments).parseZone()};e.localeData=Ga;e.isDuration=J;e.monthsShort=function(a,b){return Pb(a,b,"monthsShort")};e.weekdaysMin=function(a,b,c){return Eb(a,b,c,"weekdaysMin")};e.defineLocale=Na;e.updateLocale=function(a,b){if(null!=
b){var c=Vb;null!=va[a]&&(c=va[a]._config);b=B(c,b);b=new D(b);b.parentLocale=va[a];va[a]=b;za(a)}else null!=va[a]&&(null!=va[a].parentLocale?va[a]=va[a].parentLocale:null!=va[a]&&delete va[a]);return va[a]};e.locales=function(){return pc(va)};e.weekdaysShort=function(a,b,c){return Eb(a,b,c,"weekdaysShort")};e.normalizeUnits=C;e.relativeTimeRounding=function(a){return void 0===a?fb:"function"===typeof a?(fb=a,!0):!1};e.relativeTimeThreshold=function(a,b){if(void 0===Ta[a])return!1;if(void 0===b)return Ta[a];
Ta[a]=b;"s"===a&&(Ta.ss=b-1);return!0};e.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};e.prototype=Y;return e})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(e,h){return function(){function d(a){void 0===a&&(a=[]);this._elements=a}return d.prototype.length=function(){return this._elements.length},d.prototype.get=function(a){return this._elements[a]},d.prototype.toArray=
function(){for(var a=[],b=0;b<this.length();b++)a.push(this.get(b));return a},d}()})},"esri/arcade/ImmutablePointArray":function(){define("require exports ../core/tsSupport/extendsHelper ./ImmutableArray ../geometry/Point ../kernel".split(" "),function(e,h,d,a,b,c){var m=0===c.version.indexOf("4.");return function(a){function c(b,c,d,e,k,l){b=a.call(this,b)||this;return b._lazyPt=[],b._hasZ=!1,b._hasM=!1,b._spRef=c,b._hasZ=d,b._hasM=e,b._cacheId=k,b._partId=l,b}return d(c,a),c.prototype.get=function(a){if(void 0===
this._lazyPt[a]){var c=this._elements[a];if(void 0===c)return;var d=this._hasZ,e=this._hasM,g=null,g=d&&!e?new b(c[0],c[1],c[2],void 0,this._spRef):e&&d?new b(c[0],c[1],void 0,c[2],this._spRef):d&&e?new b(c[0],c[1],c[2],c[3],this._spRef):new b(c[0],c[1],this._spRef);m?g.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString():g.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString());this._lazyPt[a]=g}return this._lazyPt[a]},
c.prototype.equalityTest=function(a){return a===this?!0:null===a?!1:0==a instanceof c?!1:a.getUniqueHash()===this.getUniqueHash()},c.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()},c}(a)})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(e,h,d,a,b){return function(a){function c(b,c,d,e,m){b=a.call(this,b)||this;return b._lazyPath=[],b._hasZ=
!1,b._hasM=!1,b._hasZ=d,b._hasM=e,b._spRef=c,b._cacheId=m,b}return d(c,a),c.prototype.get=function(a){if(void 0===this._lazyPath[a]){var c=this._elements[a];if(void 0===c)return;this._lazyPath[a]=new b(c,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]},c.prototype.equalityTest=function(a){return a===this?!0:null===a?!1:0==a instanceof c?!1:a.getUniqueHash()===this.getUniqueHash()},c.prototype.getUniqueHash=function(){return this._cacheId.toString()},c}(a)})},"esri/arcade/FunctionWrapper":function(){define(["require",
"exports"],function(e,h){return function(){return function(d,a){this.context=this.definition=null;this.definition=d;this.context=a}}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(e,h){function d(a,b,c,d){return void 0!==a.fmin&&(a.min=a.fmin),void 0!==a.fmax&&(a.max=a.fmax),"0"!==a.min&&c.length<Number(a.min)?-2:"*"!==a.max&&c.length>Number(a.max)?-2:1}function a(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var f=c.localScope[a.toLowerCase()];
if("FormulaFunction"===f.type||"any"===f.type)return void 0===f.signature&&(f.signature={min:"0",max:"*"}),d(f.signature,a,b,c)}return void 0!==c.globalScope[a.toLowerCase()]&&(f=c.globalScope[a.toLowerCase()],"FormulaFunction"===f.type||"any"===f.type)?(void 0===f.signature&&(f.signature={min:"0",max:"*"}),d(f.signature,a,b,c)):-1}function b(a,c){void 0===c&&(c=!0);var f=r(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?
r(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?r(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?b(a.init,!1):"";case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(f=b(a.declarations[d],c),""!==f)return f;return"";case "ForInStatement":if(f=b(a.left,c),""!==f)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return r(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return r(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==
a.left.type)return r(a,"SYNTAX","LEFTNOTVAR");return f=b(a.right,c),""!==f?f:(f=b(a.body,c),""!==f?f:"");case "ForStatement":return null!==a.test&&(f=b(a.test,c),""!==f)?f:null!==a.init&&(f=b(a.init,c),""!==f)?f:null!==a.update&&(f=b(a.update,c),""!==f)?f:null!==a.body&&(f=b(a.body,c),""!==f)?f:"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":return f=b(a.test,c),""!==f?f:null!==a.consequent&&(f=b(a.consequent,!1),""!==f)?f:null!==
a.alternate&&(f=b(a.alternate,!1),""!==f)?f:"";case "BlockStatement":for(var e=[],d=0;d<a.body.length;d++)"EmptyStatement"!==a.body[d].type&&e.push(a.body[d]);a.body=e;for(d=0;d<a.body.length;d++)if(f=b(a.body[d],c),""!==f)return f;return"";case "FunctionDeclaration":return!1===c?r(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?r(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):b(a.body,!1);case "ReturnStatement":return null!==a.argument?b(a.argument,c):"";case "UpdateExpression":return"Identifier"!==
a.argument.type&&"MemberExpression"!==a.argument.type?r(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):b(a.argument,c);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return r(a,"SYNTAX","ASSIGNMENTTOVARSONLY");if(f=b(a.left,c),""!==f)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return r(a,"SYNTAX","OPERATORNOTRECOGNISED")}return b(a.right,!1);case "ExpressionStatement":return b(a.expression,!1);
case "Identifier":f="";break;case "MemberExpression":return f=b(a.object,c),""!==f?f:!0===a.computed?b(a.property,c):"";case "Literal":return"";case "ThisExpression":return r(a,"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==a.callee.type)return r(a,"SYNTAX","ONLYNODESSUPPORTED");f="";for(d=0;d<a.arguments.length;d++)if(f=b(a.arguments[d],c),""!==f)return f;return"";case "UnaryExpression":f=b(a.argument,c);break;case "BinaryExpression":if(f=b(a.left,c),""!==f)break;if(f=b(a.right,
c),""!==f)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return r(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":if(f=b(a.left,c),""!==f)break;if(f=b(a.right),""!==f)break;switch(a.operator){case "\x26\x26":case "||":break;default:return r(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return r(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":f=
"";for(d=0;d<a.elements.length&&(f=b(a.elements[d],c),""===f);d++);break;case "Array":return r(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":f="";for(d=0;d<a.properties.length;d++){if(f="",null!==a.properties[d].key&&("Literal"!==a.properties[d].key.type&&"Identifier"!==a.properties[d].key.type&&(f=r(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[d].key.type))e=a.properties[d].key.value,"string"==typeof e||e instanceof String||(f=r(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"));
if(""===f&&(f=b(a.properties[d],c)),""!==f)break}break;case "Property":return"Literal"!==a.key.type&&"Identifier"!==a.key.type?r(a,"SYNTAX","ONLYLITERAL"):"Identifier"!==a.key.type&&(f=b(a.key,c),""!==f)?f:f=b(a.value,c)}return f}catch(y){throw y;}}function c(b,d){var f=r(b,"SYNTAX","UNREOGNISED"),e=null,k="";try{switch(b.type){case "VariableDeclarator":if(null!==b.init&&"FunctionExpression"===b.init.type)return r(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");null!==d.localScope?void 0!==d.localScope[b.id.name.toLowerCase()]&&
b.id.name.toLowerCase():void 0!==d.globalScope[b.id.name.toLowerCase()]&&b.id.name.toLowerCase();var l=null===b.init?"":c(b.init,d);return""!==l?l:(null===d.localScope?d.globalScope[b.id.name.toLowerCase()]={type:"any"}:d.localScope[b.id.name.toLowerCase()]={type:"any"},"");case "FunctionDeclaration":return e=g(b.id.name.toLowerCase(),b,d),k=n(b,d),""!==k?k:null!==d.localScope?r(b,"SYNTAX","GLOBALFUNCTIONSONLY"):(e.isnative=!1,d.globalScope[b.id.name.toLowerCase()]={type:"FormulaFunction",signature:[e]},
"");case "VariableDeclaration":for(var f="",m=0;m<b.declarations.length&&(f=c(b.declarations[m],d),""===f);m++);break;case "IfStatement":return f=c(b.test,d),""!==f?f:"AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type?r(b.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):null!==b.consequent&&(f=c(b.consequent,d),""!==f)?f:null!==b.alternate&&(f=c(b.alternate,d),""!==f)?f:"";case "EmptyStatement":return"";case "BlockStatement":for(m=0;m<b.body.length;m++)if(f=c(b.body[m],d),""!==
f)return f;return"";case "ReturnStatement":return null!==b.argument?c(b.argument,d):"";case "ForInStatement":if("VariableDeclaration"===b.left.type){if(1<b.left.declarations.length)return r(b,"SYNTAX","ONLY1VAR");if(null!==b.left.declarations[0].init)return r(b,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==b.left.type)return r(b,"SYNTAX","LEFTNOTVAR");return f=c(b.left,d),""!==f?f:(f=c(b.right,d),""!==f?f:(f=c(b.body,d),""!==f?f:""));case "ForStatement":return null!==b.init&&(f=c(b.init,d),
""!==f)?f:null!==b.test&&(f=c(b.test,d),""!==f)?f:null!==b.body&&(f=c(b.body,d),""!==f)?f:null!==b.update&&(f=c(b.update,d),""!==f)?f:"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type)return r(b,"SYNTAX","ASSIGNMENTTOVARSONLY");var h=!1;return"MemberExpression"===b.argument.type?c(b.argument,d):(null!==d.localScope&&void 0!==d.localScope[b.argument.name.toLowerCase()]&&(h=!0),void 0!==
d.globalScope[b.argument.name.toLowerCase()]&&(h=!0),!1===h?"Identifier "+b.argument.name+" has not been declared.":"");case "AssignmentExpression":if("Identifier"!==b.left.type&&"MemberExpression"!==b.left.type)return r(b,"SYNTAX","ASSIGNMENTTOVARSONLY");var u=c(b.right,d);return""!==u?u:(h=!1,"MemberExpression"===b.left.type?(u=c(b.left,d),""!==u?u:""):(null!==d.localScope&&void 0!==d.localScope[b.left.name.toLowerCase()]&&(h=!0),void 0!==d.globalScope[b.left.name.toLowerCase()]&&(h=!0),!1===h?
"Identifier "+b.left.name+" has not been declared.":""));case "ExpressionStatement":return c(b.expression,d);case "Identifier":var v=b.name.toLowerCase();if(null!==d.localScope&&void 0!==d.localScope[v])return"";f=void 0!==d.globalScope[v]?"":r(b,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":return f=c(b.object,d),""!==f?f:!0===b.computed?c(b.property,d):"";case "Literal":return"";case "ThisExpression":f=r(b,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==b.callee.type)return r(b,
"SYNTAX","ONLYNODESSUPPORTED");f="";for(m=0;m<b.arguments.length;m++)if(f=c(b.arguments[m],d),""!==f)return f;var q=a(b.callee.name,b.arguments,d);-1===q&&(f=r(b,"SYNTAX","NOTFOUND"));-2===q&&(f=r(b,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":f=c(b.argument,d);break;case "BinaryExpression":return f=c(b.left,d),""!==f?f:(f=c(b.right,d),""!==f?f:"");case "LogicalExpression":return f=c(b.left,d),""!==f?f:"AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type?r(b.left,"SYNTAX",
"CANNOT_USE_ASSIGNMENT_IN_CONDITION"):(f=c(b.right,d),""!==f?f:"AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type?r(b.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"");case "ConditionalExpression":return r(b,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":f="";for(m=0;m<b.elements.length&&(f=c(b.elements[m],d),""===f);m++);break;case "ObjectExpression":f="";for(m=0;m<b.properties.length;m++){if(f="",null!==b.properties[m].key&&("Literal"!==b.properties[m].key.type&&"Identifier"!==
b.properties[m].key.type&&(f=r(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===b.properties[m].key.type)){var t=b.properties[m].key.value;"string"==typeof t||t instanceof String||(f=r(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}if(""===f&&(f=c(b.properties[m],d)),""!==f)break}break;case "Property":return"Literal"!==b.key.type&&"Identifier"!==b.key.type?r(b,"SYNTAX","ONLYLITERAL"):"Identifier"!==b.key.type&&(f=c(b.key,d),""!==f)?f:f=c(b.value,d);case "Array":return r(b,"SYNTAX","NOTSUPPORTED")}return f}catch(G){throw G;
}}function m(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?m(a.init,b):c;case "FunctionDeclaration":return m(a.body,b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(m(a.declarations[d],b))return!0;return c;case "IfStatement":return m(a.test,b)?!0:null!==a.consequent&&m(a.consequent,b)?!0:null!==a.alternate&&m(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(m(a.body[d],b))return!0;return c;
case "ReturnStatement":return null!==a.argument?m(a.argument,b):c;case "UpdateExpression":return m(a.argument,b);case "AssignmentExpression":return c=m(a.right,b),c?c:m(a.left,b);case "ExpressionStatement":return m(a.expression,b);case "ForInStatement":return(c=m(a.left,b))?c:(c=m(a.right,b))?c:(c=m(a.body,b),c);case "ForStatement":return null!==a.init&&(c=m(a.init,b))?c:null!==a.test&&(c=m(a.test,b))?c:null!==a.body&&(c=m(a.body,b))?c:(null!==a.update&&(c=m(a.update,b)),c);case "BreakStatement":return c;
case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return b.toLowerCase()===a.name.toLowerCase();case "MemberExpression":return(c=m(a.object,b))?c:(!0===a.computed&&(c=m(a.property,b)),c);case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(d=0;d<a.arguments.length;d++)m(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)m(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return m(a.argument,b);case "BinaryExpression":return(c=
m(a.left,b))?c:c=m(a.right,b);case "LogicalExpression":return(c=m(a.left,b))?c:c=m(a.right,b);case "ObjectExpression":for(d=0;d<a.properties.length;d++)m(a.properties[d],b)&&(c=!0);return c;case "Property":return c=m(a.value,b);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(z){throw z;}}function k(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?k(a.init,b):c;case "FunctionDeclaration":return k(a.body,b);case "VariableDeclaration":for(var d=
0;d<a.declarations.length;d++)if(k(a.declarations[d],b))return!0;return c;case "IfStatement":return k(a.test,b)?!0:null!==a.consequent&&k(a.consequent,b)?!0:null!==a.alternate&&k(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(k(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?k(a.argument,b):c;case "UpdateExpression":return k(a.argument,b);case "AssignmentExpression":return k(a.left,b)?!0:k(a.right,b);case "ExpressionStatement":return k(a.expression,
b);case "ForInStatement":return(c=k(a.left,b))?c:(c=k(a.right,b))?c:(c=k(a.body,b),c);case "ForStatement":return null!==a.init&&(c=k(a.init,b))?c:null!==a.test&&(c=k(a.test,b))?c:null!==a.body&&(c=k(a.body,b))?c:(null!==a.update&&(c=k(a.update,b)),c);case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":return(c=k(a.object,b))?c:(!0===a.computed&&(c=k(a.property,b)),c);case "Literal":return c;case "ThisExpression":return c;
case "CallExpression":if(a.callee.name.toLowerCase()===b.toLowerCase())return!0;for(d=0;d<a.arguments.length;d++)k(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)k(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return k(a.argument,b);case "BinaryExpression":return(c=k(a.left,b))?c:c=k(a.right,b);case "LogicalExpression":return(c=k(a.left,b))?c:c=k(a.right,b);case "ConditionalExpression":return c;case "ObjectExpression":for(d=0;d<a.properties.length;d++)k(a.properties[d],
b)&&(c=!0);return c;case "Property":return c=k(a.value,b);case "Array":return c;default:return c}}catch(z){throw z;}}function l(a,b){var c,d=[];try{switch(a.type){case "VariableDeclarator":return null!==a.init?l(a.init,b):d;case "FunctionDeclaration":return l(a.body,b);case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)c=l(a.declarations[e],b),d=d.concat(c);return d;case "ForInStatement":return c=l(a.left,b),d=d.concat(c),c=l(a.right,b),d=d.concat(c),c=l(a.body,b),d=d.concat(c);case "ForStatement":return null!==
a.init&&(c=l(a.init,b),d=d.concat(c)),null!==a.test&&(c=l(a.test,b),d=d.concat(c)),null!==a.body&&(c=l(a.body,b),d=d.concat(c)),null!==a.update&&(c=l(a.update,b),d=d.concat(c)),d;case "IfStatement":return c=l(a.test,b),d=d.concat(c),null!==a.consequent&&(c=l(a.consequent,b),d=d.concat(c)),null!==a.alternate&&(c=l(a.alternate,b),d=d.concat(c)),d;case "EmptyStatement":return d;case "BlockStatement":for(e=0;e<a.body.length;e++)c=l(a.body[e],b),d=d.concat(c);return d;case "ReturnStatement":return null!==
a.argument?l(a.argument,b):d;case "UpdateExpression":return l(a.argument,b);case "AssignmentExpression":return d=l(a.left,b),d=d.concat(l(a.right,b));case "ExpressionStatement":return l(a.expression,b);case "BreakStatement":return d;case "ContinueStatement":return d;case "Compound":return d;case "Identifier":return d;case "MemberExpression":if("Identifier"!==a.object.type)return d;if(!1===a.computed)d.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&
"string"==typeof a.property.value&&d.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(y){}return d;case "Literal":return d;case "ThisExpression":return d;case "CallExpression":for(e=0;e<a.arguments.length;e++)c=l(a.arguments[e],b),d=d.concat(c);return d;case "ArrayExpression":for(e=0;e<a.elements.length;e++)c=l(a.elements[e],b),d=d.concat(c);return d;case "UnaryExpression":return l(a.argument,b);case "ObjectExpression":for(e=0;e<a.properties.length;e++)c=l(a.properties[e],
b),d=d.concat(c);return d;case "Property":return l(a.value,b);case "BinaryExpression":return c=l(a.left,b),d=d.concat(c),c=l(a.right,b),d=d.concat(c);case "LogicalExpression":return c=l(a.left,b),d=d.concat(c),c=l(a.right,b),d=d.concat(c);case "ConditionalExpression":return d;case "Array":return d;default:return d}}catch(y){throw y;}}function g(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var f=0;f<b.params.length;f++)c.push("any");return{name:a,"return":"any",params:c}}function n(a,b){b=
{globalScope:b.globalScope,localScope:{}};for(var f=0;f<a.params.length;f++)b.localScope[a.params[f].name.toLowerCase()]={type:"any"};return c(a.body,b)}function u(a,b,c,d){var f={};void 0!==a&&null!==a||(a={});void 0!==c&&null!==c||(c={});f.infinity={type:"any"};f.textformatting={type:"any"};f.pi={type:"any"};for(var e in b)("simple"!==d||"simple"===d&&"a"===b[e].av)&&(f[e]={type:"FormulaFunction",signature:b[e]});for(b=0;b<c.length;b++)e=c[b],f[e.name]={type:"FormulaFunction",signature:e};for(e in a)f[e]=
a[e],f[e].type="any";return f}function r(a,b,c){var d="";switch(b){case "SYNTAX":d="Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":d+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":d+=" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+="Cannot find member property. ";d+=
!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?a.property.name:"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":d+="Property names must be literals or identifiers"}break;case "Literal":break;case "ThisExpression":d+="THIS construct is not supported.";
case "CallExpression":switch(c){case "WRONGSIGNATURE":d+="Function signature does not match: ";d+=a.callee.name;break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+=a.callee.name;break;case "NOTAFUNCTION":d+="Not a Function: ";d+=a.callee.name;break;case "NOTFOUND":d+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";
break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":d+="Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":d+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}case "ConditionalExpression":d+=
"Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=" Cannot Put Function inside Array."}break;case "Array":d+="Expression contains unrecognised array structure.";break;default:d+="Expression contains unrecognised code structures."}}catch(z){throw z;}return d}function t(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:r(a,b,c)}}function w(a,b,c,d,e){void 0===e&&(e=!0);b={globalScope:b.globalScope,localScope:{}};for(e=
0;e<a.params.length;e++)b.localScope[a.params[e].name.toLowerCase()]={type:"any"};q(a.body,b,c,d,!1)}function q(b,c,d,e,k){if(void 0===k&&(k=!0),null===b)throw Error("Unnexpexted Expression Syntax");r(b,"SYNTAX","UNREOGNISED");var f=null;try{switch(b.type){case "VariableDeclarator":return null!==b.init&&"FunctionExpression"===b.init.type?void e.push(t(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR")):("Identifier"!==b.id.type?e.push(t(b,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(null!==c.localScope?void 0!==
c.localScope[b.id.name.toLowerCase()]&&b.id.name.toLowerCase():void 0!==c.globalScope[b.id.name.toLowerCase()]&&b.id.name.toLowerCase(),null===c.localScope?c.globalScope[b.id.name.toLowerCase()]={type:"any"}:c.localScope[b.id.name.toLowerCase()]={type:"any"}),void(null===b.init?"":q(b.init,c,d,e,k)));case "FunctionDeclaration":return!1===k&&e.push(t(b,"SYNTAX","GLOBALFUNCTIONSONLY")),"Identifier"!==b.id.type&&e.push(t(b,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER")),f=g("",b,c),w(b,c,d,e,k),null!==c.localScope&&
e.push(t(b,"SYNTAX","GLOBALFUNCTIONSONLY")),f.isnative=!1,void("Identifier"===b.id.type&&(c.globalScope[b.id.name.toLowerCase()]={type:"FormulaFunction",signature:[f]}));case "VariableDeclaration":for(var l=0;l<b.declarations.length;l++)q(b.declarations[l],c,d,e,k);break;case "IfStatement":return null!==b.test&&(q(b.test,c,d,e,k),("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)&&e.push(t(b.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"))),null!==b.consequent&&q(b.consequent,
c,d,e,k),void(null!==b.alternate&&q(b.alternate,c,d,e,k));case "EmptyStatement":break;case "BlockStatement":if(null!==b.body)for(l=0;l<b.body.length;l++)q(b.body[l],c,d,e,k);break;case "ReturnStatement":return void(null!==b.argument&&q(b.argument,c,d,e,k));case "ForInStatement":return"VariableDeclaration"===b.left.type?(1<b.left.declarations.length&&e.push(t(b,"SYNTAX","ONLY1VAR")),null!==b.left.declarations[0].init&&e.push(t(b,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==b.left.type&&e.push(t(b,
"SYNTAX","LEFTNOTVAR")),q(b.left,c,d,e,k),q(b.right,c,d,e,k),void q(b.body,c,d,e,k);case "ForStatement":return null!==b.init&&q(b.init,c,d,e,k),null!==b.test&&q(b.test,c,d,e,k),null!==b.body&&q(b.body,c,d,e,k),void(null!==b.update&&q(b.update,c,d,e,k));case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type?e.push(t(b,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===b.argument.type&&(f=!1,!1===d&&(null!==
c.localScope&&void 0!==c.localScope[b.argument.name.toLowerCase()]&&(f=!0),void 0!==c.globalScope[b.argument.name.toLowerCase()]&&(f=!0),!1===f&&e.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Identifier "+b.argument.name+" has not been declared."}))),"MemberExpression"===b.argument.type&&q(b.argument,c,d,e,k));break;case "AssignmentExpression":switch("Identifier"!==b.left.type&&"MemberExpression"!==b.left.type&&e.push(t(b,"SYNTAX","ASSIGNMENTTOVARSONLY")),
b.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:e.push(t(b,"SYNTAX","OPERATORNOTRECOGNISED"))}q(b.right,c,d,e,k);f=!1;return"Identifier"===b.left.type&&(null!==c.localScope&&void 0!==c.localScope[b.left.name.toLowerCase()]&&(f=!0),void 0!==c.globalScope[b.left.name.toLowerCase()]&&(f=!0),!1===d&&!1===f&&e.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Identifier "+b.argument.name+" has not been declared."})),
void("MemberExpression"===b.left.type&&q(b.left,c,d,e,k));case "ExpressionStatement":return void q(b.expression,c,d,e,k);case "Identifier":var m=b.name.toLowerCase();if(null!==c.localScope&&void 0!==c.localScope[m])break;if(void 0!==c.globalScope[m])break;!1===d&&e.push(t(b,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":return q(b.object,c,d,e,k),void(!0===b.computed&&q(b.property,c,d,e,k));case "Literal":return"";case "ThisExpression":e.push(t(b,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==
b.callee.type&&e.push(t(b,"SYNTAX","ONLYNODESSUPPORTED"));for(l=0;l<b.arguments.length;l++)q(b.arguments[l],c,d,e,k);var h=a(b.callee.name,b.arguments,c);return!1===d&&-1===h&&e.push(t(b,"SYNTAX","NOTFOUND")),void(-2===h&&e.push(t(b,"SYNTAX","WRONGSIGNATURE")));case "UnaryExpression":return void q(b.argument,c,d,e,k);case "BinaryExpression":switch(q(b.left,c,d,e,k),q(b.right,c,d,e,k),b.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:e.push(t(b,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(b.operator){case "\x26\x26":case "||":break;default:e.push(t(b,"SYNTAX","OPERATORNOTRECOGNISED"))}return q(b.left,c,d,e,k),("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)&&e.push(t(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")),q(b.right,c,d,e,k),void(("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)&&e.push(t(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));
case "ConditionalExpression":e.push(t(b,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(l=0;l<b.elements.length;l++)q(b.elements[l],c,d,e,k);break;case "Array":e.push(t(b,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(l=0;l<b.properties.length;l++)q(b.properties[l],c,d,e,k);break;case "Property":return"Literal"!==b.key.type&&"Identifier"!==b.key.type&&e.push(t(b,"SYNTAX","ONLYLITERAL")),"Literal"===b.key.type&&q(b.key,c,d,e,k),void q(b.value,c,d,e,k);default:e.push(t(b,"SYNTAX",
"UNRECOGNISED"))}}catch(F){e.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Unnexpected Syntax"})}}Object.defineProperty(h,"__esModule",{value:!0});h.functionDecls={concatenate:{min:"0",max:"*",av:"a"},split:{min:"2",max:"4",av:"a"},guid:{min:"0",max:"1",av:"a"},today:{min:"0",max:"0",av:"a"},now:{min:"0",max:"0",av:"a"},timestamp:{min:"0",max:"0",av:"a"},day:{min:"1",max:"1",av:"a"},month:{min:"1",max:"1",av:"a"},year:{min:"1",max:"1",av:"a"},hour:{min:"1",
max:"1",av:"a"},second:{min:"1",max:"1",av:"a"},millisecond:{min:"1",max:"1",av:"a"},minute:{min:"1",max:"1",av:"a"},weekday:{min:"1",max:"1",av:"a"},toutc:{min:"1",max:"1",av:"a"},tolocal:{min:"1",max:"1",av:"a"},date:{min:"0",max:"7",av:"a"},datediff:{min:"2",max:"3",av:"a"},dateadd:{min:"2",max:"3",av:"a"},trim:{min:"1",max:"1",av:"a"},text:{min:"1",max:"2",av:"a"},left:{min:"2",max:"2",av:"a"},right:{min:"2",max:"2",av:"a"},mid:{min:"2",max:"3",av:"a"},upper:{min:"1",max:"1",av:"a"},proper:{min:"1",
max:"2",av:"a"},lower:{min:"1",max:"1",av:"a"},find:{min:"2",max:"3",av:"a"},iif:{min:"3",max:"3",av:"a"},decode:{min:"2",max:"*",av:"a"},when:{min:"2",max:"*",av:"a"},defaultvalue:{min:"2",max:"2",av:"a"},isempty:{min:"1",max:"1",av:"a"},maplayer:{min:"2",max:"3",av:"f"},domaincode:{min:"3",max:"4",av:"a"},domainname:{min:"2",max:"4",av:"a"},polygon:{min:"1",max:"1",av:"a"},point:{min:"1",max:"1",av:"a"},polyline:{min:"1",max:"1",av:"a"},extent:{min:"1",max:"1",av:"a"},multipoint:{min:"1",max:"1",
av:"a"},geometry:{min:"1",max:"1",av:"a"},featurelayer:{min:"1",max:"3",av:"f"},featurecollection:{min:"1",max:"1",av:"f"},buffer:{min:"2",max:"4",av:"f"},area:{min:"1",max:"2",av:"f"},sumarea:{min:"1",max:"2",av:"f"},length:{min:"1",max:"2",av:"f"},sumlength:{min:"1",max:"2",av:"f"},count:{min:"0",max:"*",av:"a"},filter:{min:"2",max:"2",av:"f"},envelopeintersects:{min:"2",max:"2",av:"f"},intersects:{min:"2",max:"2",av:"f"},contains:{min:"2",max:"2",av:"f"},overlaps:{min:"2",max:"2",av:"f"},within:{min:"2",
max:"2",av:"f"},touches:{min:"2",max:"2",av:"f"},crosses:{min:"2",max:"2",av:"f"},union:{min:"1",max:"2",av:"f",fmin:1},difference:{min:"2",max:"2",av:"f",fmin:2,fmax:3},intersection:{min:"2",max:"2",av:"f",fmin:2,fmax:3},symmetricdifference:{min:"2",max:"2",av:"f",fmin:2,fmax:3},number:{min:"1",max:"2",av:"a"},acos:{min:"1",max:"1",av:"a"},asin:{min:"1",max:"1",av:"a"},atan:{min:"1",max:"1",av:"a"},atan2:{min:"2",max:"2",av:"a"},ceil:{min:"1",max:"2",av:"a"},floor:{min:"1",max:"2",av:"a"},round:{min:"1",
max:"2",av:"a"},cos:{min:"1",max:"1",av:"a"},exp:{min:"1",max:"1",av:"a"},log:{min:"1",max:"1",av:"a"},min:{min:"0",max:"*",av:"a"},console:{min:"0",max:"*",av:"a"},max:{min:"0",max:"*",av:"a"},pow:{min:"2",max:"2",av:"a"},random:{min:"0",max:"0",av:"a"},sqrt:{min:"1",max:"1",av:"a"},sin:{min:"1",max:"1",av:"a"},tan:{min:"1",max:"1",av:"a"},abs:{min:"1",max:"1",av:"a"},isnan:{min:"1",max:"1",av:"a"},stdev:{min:"0",max:"*",av:"a"},average:{min:"0",max:"*",av:"a"},mean:{min:"0",max:"*",av:"a"},sum:{min:"0",
max:"*",av:"a"},variance:{min:"0",max:"*",av:"a"},distinct:{min:"0",max:"*",av:"a"},addfield:{min:"3",max:"3",av:"f"},removefield:{min:"2",max:"2",av:"f"},aggregate:{min:"3",max:"3",av:"f"},dissolve:{min:"2",max:"3",av:"f"},changeshape:{min:"2",max:"4",av:"f"},first:{min:"1",max:"1",av:"a"},top:{min:"2",max:"2",av:"a"},orderby:{min:"2",max:"2",av:"f"},"boolean":{min:"1",max:"1",av:"a"},dictionary:{min:"0",max:"*",av:"a"},servicearea:{min:"2",max:"*",av:"f"},equals:{min:"2",max:"2",av:"a"},"typeof":{min:"1",
max:"1",av:"a"},reverse:{min:"1",max:"1",av:"a"},replace:{min:"3",max:"4",av:"a"},sort:{min:"1",max:"2",av:"a"},feature:{min:"1",max:"*",av:"a"},haskey:{min:"2",max:"2",av:"a"},indexof:{min:"2",max:"2",av:"a"},centroid:{min:"1",max:"1",av:"f"},multiparttosinglepart:{min:"1",max:"1",av:"f"}};h.checkFunctionSignature=d;h.findFunction=a;h.validateLanguageNode=b;h.testValidityOfExpression=c;h.referencesMemberImpl=m;h.referencesMember=function(a,b){return!0===m(a.body[0].body,b.toLowerCase())?!0:!1};h.referencesFunctionImpl=
k;h.referencesFunction=function(a,b){return!0===k(a.body[0].body,b)?!0:!1};h.findFieldLiteralsImpl=l;h.findFieldLiterals=function(a,b){return l(a.body[0].body,b)};h.extractFunctionDeclaration=g;h.validateFunction=n;h.constructGlobalScope=u;h.validateScript=function(a,b,d){void 0===d&&(d="full");b={globalScope:u(b.vars,h.functionDecls,b.customFunctions,d),localScope:null};return c(a.body[0].body,b)};h.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":
b(a.body[0].body)};h.nodeErrorMessage=r;h.makeError=t;h.extractAllIssuesInFunction=w;h.extractAllIssues=q;h.checkScript=function(a,b,c,d){void 0===d&&(d="full");var f=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];null!==b&&void 0!==b||(b={vars:{},customFunctions:[]});b={globalScope:u(b.vars,h.functionDecls,b.customFunctions,d),localScope:null};try{q(a.body[0].body,b,c,f)}catch(y){}return f}})},"esri/arcade/Dictionary":function(){define(["require",
"exports","./languageUtils","../geometry/Geometry","./ImmutableArray"],function(e,h,d,a,b){return function(){function c(a){this.attributes=null;this.plain=!1;this.immutable=!0;a instanceof c?this.attributes=a.attributes:void 0===a?this.attributes={}:null===a?this.attributes={}:this.attributes=a}return c.prototype.field=function(a){var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];throw Error("Field not Found");
},c.prototype.setField=function(a,b){if(this.immutable)throw Error("Dictionary is Immutable");var c=a.toLowerCase();if(void 0!==this.attributes[a])return void(this.attributes[a]=b);for(var d in this.attributes)if(d.toLowerCase()===c)return void(this.attributes[d]=b);this.attributes[a]=b},c.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return!1},c.prototype.keys=function(){var a=[],b;for(b in this.attributes)a.push(b);
return a=a.sort()},c.prototype.castToText=function(){var c="",e;for(e in this.attributes){""!==c&&(c+=",");var l=this.attributes[e];null==l?l="null":d.isBoolean(l)||d.isNumber(l)||d.isString(l)?c+=JSON.stringify(e)+":"+JSON.stringify(l):l instanceof a?c+=JSON.stringify(e)+":"+d.toStringExplicit(l):l instanceof b?c+=JSON.stringify(e)+":"+d.toStringExplicit(l):l instanceof Array?c+=JSON.stringify(e)+":"+d.toStringExplicit(l):l instanceof Date?c+=JSON.stringify(e)+":"+JSON.stringify(l):null!==l&&"object"==
typeof l&&void 0!==l.castToText&&(c+=JSON.stringify(e)+":"+l.castToText())}return"{"+c+"}"},c}()})},"esri/arcade/Feature":function(){define("require exports dojo/_base/lang ../geometry/Geometry ../Graphic ../geometry/support/jsonUtils ./Dictionary ./languageUtils ./ImmutableArray ../geometry/Point".split(" "),function(e,h,d,a,b,c,m,k,l,g){return function(){function e(d,g,k){(this.geometry=null,this.attributes=null,this._layer=null,this._datesfixed=!0,this.immutable=!0,d instanceof e)?(this.attributes=
d.attributes,this.geometry=d.geometry,d._layer&&(this._layer=d._layer)):d instanceof b?(this.geometry=d.geometry,void 0===d.attributes?this.attributes={}:null===d.attributes?this.attributes={}:this.attributes=d.attributes,d._layer?(this._layer=d._layer,this._datesfixed=!1):d.layer&&(this._layer=d.layer,this._datesfixed=!1)):d instanceof m?(this.attributes=d.field("attributes"),null!==this.attributes&&(this.attributes instanceof m?this.attributes=this.attributes.attributes:this.attributes=null),this.geometry=
d.field("geometry"),null!==this.geometry&&(this.geometry instanceof m?this.geometry=e.parseGeometryFromDictionary(this.geometry):this.geometry instanceof a||(this.geometry=null))):(g instanceof a||null===g?(this.geometry=g,void 0===d?this.attributes={}:null===d?this.attributes={}:this.attributes=d):"string"==typeof d?(d=JSON.parse(d),null!==d.geometry&&void 0!==d.geometry&&(this.geometry=c.fromJSON(d.geometry)),void 0===d.attributes?this.attributes={}:null===d.attributes?this.attributes={}:this.attributes=
d.attributes):(void 0===d?this.attributes={}:null===d&&(this.attributes={}),this.geometry=null),void 0!==k&&(this._layer=k))}return e.prototype.castToText=function(){var b="",c;for(c in this.attributes){""!==b&&(b+=",");var d=this.attributes[c];null==d?d="null":k.isBoolean(d)||k.isNumber(d)||k.isString(d)?b+=JSON.stringify(c)+":"+JSON.stringify(d):d instanceof a?b+=JSON.stringify(c)+":"+k.toStringExplicit(d):d instanceof l?b+=JSON.stringify(c)+":"+k.toStringExplicit(d):d instanceof Array?b+=JSON.stringify(c)+
":"+k.toStringExplicit(d):d instanceof Date?b+=JSON.stringify(c)+":"+JSON.stringify(d):null!==d&&"object"==typeof d&&void 0!==d.castToText&&(b+=JSON.stringify(c)+":"+d.castToText())}return'{"geometry":'+(null===this.geometry?"null":k.toStringExplicit(this.geometry))+',"attributes":{'+b+"}}"},e.prototype._fixDates=function(){for(var a=[],b=0;b<this._layer.fields.length;b++){var c=this._layer.fields[b];"date"!==c.type&&"esriFieldTypeDate"!==c.type||a.push(c.name)}0<a.length&&this._fixDateFields(a);
this._datesfixed=!0},e.prototype._fixDateFields=function(a){this.attributes=d.mixin({},this.attributes);for(var b=0;b<a.length;b++){var c=this.attributes[a[b]];if(null!==c)if(void 0===c)for(var e in this.attributes){if(e.toLowerCase()===a[b]){c=this.attributes[e];null!==c&&(c instanceof Date||(this.attributes[e]=new Date(c)));break}}else c instanceof Date||(this.attributes[a[b]]=new Date(c))}},e.prototype.field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];
if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");},e.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(var b=0;b<this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===a)return!0;return!1},e.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===
b)return this.attributes[c];return null},e.prototype.setField=function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===k.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");var c=a.toLowerCase();if(void 0!==this.attributes[a])return void(this.attributes[a]=b);for(var d in this.attributes)if(d.toLowerCase()===c)return void(this.attributes[d]=b);this.attributes[a]=b},e.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===
b)return!0;return this._hasFieldDefinition(b)?!0:!1},e.prototype.keys=function(){var a=[],b={},c;for(c in this.attributes)a.push(c),b[c.toLowerCase()]=1;if(null!==this._layer)for(c=0;c<this._layer.fields.length;c++){var d=this._layer.fields[c];1!==b[d.name.toLowerCase()]&&a.push(d.name)}return a=a.sort()},e.fromFeature=function(a){return new e(a)},e.parseGeometryFromDictionary=function(a){a=e.convertDictionaryToJson(a,!0);return void 0!==a.spatialreference&&(a.spatialReference=a.spatialreference,
delete a.spatialreference),void 0!==a.rings&&(a.rings=this.fixPathArrays(a.rings,!0===a.hasZ,!0===a.hasM)),void 0!==a.paths&&(a.paths=this.fixPathArrays(a.paths,!0===a.hasZ,!0===a.hasM)),void 0!==a.points&&(a.points=this.fixPointArrays(a.points,!0===a.hasZ,!0===a.hasM)),c.fromJSON(a)},e.fixPathArrays=function(a,b,c){var d=[];if(a instanceof Array)for(var e=0;e<a.length;e++)d.push(this.fixPointArrays(a[e],b,c));else if(a instanceof l)for(e=0;e<a.length();e++)d.push(this.fixPointArrays(a.get(e),b,c));
return d},e.fixPointArrays=function(a,b,c){var d=[];if(a instanceof Array)for(var e=0;e<a.length;e++){var k=a[e];k instanceof g?b&&c?d.push([k.x,k.y,k.z,k.m]):b?d.push([k.x,k.y,k.z]):c?d.push([k.x,k.y,k.m]):d.push([k.x,k.y]):d.push(k)}else if(a instanceof l)for(e=0;e<a.length();e++)k=a.get(e),k instanceof g?b&&c?d.push([k.x,k.y,k.z,k.m]):b?d.push([k.x,k.y,k.z]):c?d.push([k.x,k.y,k.m]):d.push([k.x,k.y]):d.push(k);return d},e.convertDictionaryToJson=function(a,b){void 0===b&&(b=!1);var c={},d;for(d in a.attributes){var g=
a.attributes[d];g instanceof m&&(g=e.convertDictionaryToJson(g));b?c[d.toLowerCase()]=g:c[d]=g}return c},e.parseAttributesFromDictionary=function(a){var b={},c;for(c in a.attributes){var d=a.attributes[c];if(!k.isSimpleType(d))throw Error("Illegal Argument");b[c]=d}return b},e.fromJson=function(a){var b=null;null!==a.geometry&&void 0!==a.geometry&&(b=c.fromJSON(a.geometry));var d={};if(null!==a.attributes&&void 0!==a.attributes)for(var g in a.attributes){var l=a.attributes[g];if(!(k.isString(l)||
k.isNumber(l)||k.isBoolean(l)||k.isDate(l)))throw Error("Illegal Argument");d[g]=l}return new e(d,b)},e.prototype.domainValueLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;c=k.getDomain(a,this._layer,this,c);if(void 0===b)try{b=this.field(a)}catch(w){return null}return k.getDomainValue(c,b)},e.prototype.domainCodeLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;a=k.getDomain(a,this._layer,this,c);return k.getDomainCode(a,b)},e}()})},"esri/arcade/functions/date":function(){define(["require",
"exports","../../moment","../languageUtils"],function(e,h,d,a){function b(a){return null===a?a:isNaN(a.getTime())?null:a}Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(c,e){c.today=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,0,0);b=new Date;return b.setHours(0,0,0,0),b})};c.now=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,0,0);return new Date})};c.timestamp=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,0,0);b=new Date;return b=new Date(b.getUTCFullYear(),
b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};c.toutc=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,1,1);b=a.toDate(d[0]);return null===b?null:new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())})};c.tolocal=function(b,c){return e(b,c,function(b,c,e){a.pcCheck(e,1,1);b=a.toDate(e[0]);return null===b?null:d.utc([b.getFullYear(),b.getMonth(),b.getDate(),
b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds()]).toDate()})};c.day=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,1,1);b=a.toDate(d[0]);return null===b?NaN:b.getDate()})};c.month=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,1,1);b=a.toDate(d[0]);return null===b?NaN:b.getMonth()})};c.year=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,1,1);b=a.toDate(d[0]);return null===b?NaN:b.getFullYear()})};c.hour=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,
1,1);b=a.toDate(d[0]);return null===b?NaN:b.getHours()})};c.second=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,1,1);b=a.toDate(d[0]);return null===b?NaN:b.getSeconds()})};c.millisecond=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,1,1);b=a.toDate(d[0]);return null===b?NaN:b.getMilliseconds()})};c.minute=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,1,1);b=a.toDate(d[0]);return null===b?NaN:b.getMinutes()})};c.weekday=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,
1,1);b=a.toDate(d[0]);return null===b?NaN:b.getDay()})};c.date=function(c,l){return e(c,l,function(c,e,k){if(a.pcCheck(k,0,7),3===k.length)return b(new Date(a.toNumber(k[0]),a.toNumber(k[1]),a.toNumber(k[2]),0,0,0,0));if(4===k.length)return b(new Date(a.toNumber(k[0]),a.toNumber(k[1]),a.toNumber(k[2]),a.toNumber(k[3]),0,0,0));if(5===k.length)return b(new Date(a.toNumber(k[0]),a.toNumber(k[1]),a.toNumber(k[2]),a.toNumber(k[3]),a.toNumber(k[4]),0,0));if(6===k.length)return b(new Date(a.toNumber(k[0]),
a.toNumber(k[1]),a.toNumber(k[2]),a.toNumber(k[3]),a.toNumber(k[4]),a.toNumber(k[5]),0));if(7===k.length)return b(new Date(a.toNumber(k[0]),a.toNumber(k[1]),a.toNumber(k[2]),a.toNumber(k[3]),a.toNumber(k[4]),a.toNumber(k[5]),a.toNumber(k[6])));if(2===k.length){c=a.toString(k[1]);if(""===c)return null;c=a.standardiseDateFormat(c);k=d(a.toString(k[0]),c,!0);return!0===k.isValid()?k.toDate():null}if(1===k.length){if(a.isString(k[0])&&""===k[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;
c=a.toNumber(k[0]);return!1===isNaN(c)?b(new Date(c)):a.toDate(k[0])}return 0===k.length?new Date:void 0})};c.datediff=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,2,3);b=a.toDateM(d[0]);c=a.toDateM(d[1]);if(null===b||null===c)return NaN;switch(a.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return b.diff(c,"days",!0);case "months":case "month":return b.diff(c,"months",!0);case "minutes":case "minute":case "m":return"M"===d[2]?b.diff(c,"months",!0):b.diff(c,"minutes",!0);
case "seconds":case "second":case "s":return b.diff(c,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return b.diff(c);case "hours":case "hour":case "h":return b.diff(c,"hours",!0);case "years":case "year":case "y":return b.diff(c,"years",!0);default:return b.diff(c)}})};c.dateadd=function(b,c){return e(b,c,function(b,c,d){a.pcCheck(d,2,3);b=a.toDateM(d[0]);if(null===b)return null;c="milliseconds";switch(a.toString(d[2]).toLowerCase()){case "days":case "day":case "d":c="days";break;
case "months":case "month":c="months";break;case "minutes":case "minute":case "m":c="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":c="seconds";break;case "milliseconds":case "millisecond":case "ms":c="milliseconds";break;case "hours":case "hour":case "h":c="hours";break;case "years":case "year":case "y":c="years"}return b.add(a.toNumber(d[1]),c),b.toDate()})}}})},"esri/arcade/functions/string":function(){define(["require","exports","../languageUtils","../Feature"],function(e,
h,d,a){Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(b,c){b.trim=function(a,b){return c(a,b,function(a,b,c){return d.pcCheck(c,1,1),d.toString(c[0]).trim()})};b.upper=function(a,b){return c(a,b,function(a,b,c){return d.pcCheck(c,1,1),d.toString(c[0]).toUpperCase()})};b.proper=function(a,b){return c(a,b,function(a,b,c){d.pcCheck(c,1,2);a=1;2===c.length&&"firstword"===d.toString(c[1]).toLowerCase()&&(a=2);b=/\s/;c=d.toString(c[0]);for(var e="",g=!0,k=0;k<c.length;k++){var l=
c[k];b.test(l)?1===a&&(g=!0):l.toUpperCase()!==l.toLowerCase()&&(g?(l=l.toUpperCase(),g=!1):l=l.toLowerCase());e+=l}return e})};b.lower=function(a,b){return c(a,b,function(a,b,c){return d.pcCheck(c,1,1),d.toString(c[0]).toLowerCase()})};b.guid=function(a,b){return c(a,b,function(a,b,c){if(d.pcCheck(c,0,1),0<c.length)switch(d.toString(c[0]).toLowerCase()){case "digits":return d.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return d.generateUUID();
case "digits-hyphen-parentheses":return"("+d.generateUUID()+")"}return"{"+d.generateUUID()+"}"})};b.console=function(a,b){return c(a,b,function(b,c,e){return 0===e.length||(1===e.length?a.console(d.toString(e[0])):a.console(d.toString(e))),d.voidOperation})};b.mid=function(a,b){return c(a,b,function(a,b,c){d.pcCheck(c,2,3);a=d.toNumber(c[1]);if(isNaN(a))return"";if(0>a&&(a=0),2===c.length)return d.toString(c[0]).substr(a);b=d.toNumber(c[2]);return isNaN(b)?"":(0>b&&(b=0),d.toString(c[0]).substr(a,
b))})};b.find=function(a,b){return c(a,b,function(a,b,c){d.pcCheck(c,2,3);a=0;if(2<c.length){if(a=d.toNumber(d.defaultUndefined(c[2],0)),isNaN(a))return-1;0>a&&(a=0)}return d.toString(c[1]).indexOf(d.toString(c[0]),a)})};b.left=function(a,b){return c(a,b,function(a,b,c){d.pcCheck(c,2,2);a=d.toNumber(c[1]);return isNaN(a)?"":(0>a&&(a=0),d.toString(c[0]).substr(0,a))})};b.right=function(a,b){return c(a,b,function(a,b,c){d.pcCheck(c,2,2);a=d.toNumber(c[1]);return isNaN(a)?"":(0>a&&(a=0),d.toString(c[0]).substr(-1*
a,a))})};b.split=function(a,b){return c(a,b,function(a,b,c){d.pcCheck(c,2,4);var e;a=d.toNumber(d.defaultUndefined(c[2],-1));b=d.toBoolean(d.defaultUndefined(c[3],!1));if(-1===a||null===a||!0===b?e=d.toString(c[0]).split(d.toString(c[1])):(isNaN(a)&&(a=-1),-1>a&&(a=-1),e=d.toString(c[0]).split(d.toString(c[1]),a)),!1===b)return e;c=[];for(b=0;b<e.length&&!(-1!==a&&c.length>=a);b++)""!==e[b]&&void 0!==e[b]&&c.push(e[b]);return c})};b.text=function(a,b){return c(a,b,function(a,b,c){return d.pcCheck(c,
1,2),d.toStringExplicit(c[0],c[1])})};b.concatenate=function(a,b){return c(a,b,function(a,b,c){a=[];if(1>c.length)return"";if(d.isArray(c[0])){b=d.defaultUndefined(c[2],"");for(var e=0;e<c[0].length;e++)a[e]=d.toStringExplicit(c[0][e],b);return 1<c.length?a.join(c[1]):a.join("")}if(d.isImmutableArray(c[0])){b=d.defaultUndefined(c[2],"");for(e=0;e<c[0].length();e++)a[e]=d.toStringExplicit(c[0].get(e),b);return 1<c.length?a.join(c[1]):a.join("")}for(e=0;e<c.length;e++)a[e]=d.toStringExplicit(c[e]);
return a.join("")})};b.reverse=function(a,b){return c(a,b,function(a,b,c){if(d.pcCheck(c,1,1),d.isArray(c[0]))return a=c[0].slice(0),a.reverse(),a;if(d.isImmutableArray(c[0]))return a=c[0].toArray().slice(0),a.reverse(),a;throw Error("Invalid Parameter");})};b.replace=function(a,b){return c(a,b,function(a,b,c){d.pcCheck(c,3,4);a=d.toString(c[0]);b=d.toString(c[1]);var e=d.toString(c[2]);return(4===c.length?d.toBoolean(c[3]):1)?d.multiReplace(a,b,e):a.replace(b,e)})};b.domainname=function(b,e){return c(b,
e,function(b,c,e){if(d.pcCheck(e,2,4),e[0]instanceof a)return e[0].domainValueLookup(d.toString(e[1]),e[2],void 0===e[3]?void 0:d.toNumber(e[3]));throw Error("Invalid Parameter");})};b.domaincode=function(b,e){return c(b,e,function(b,c,e){if(d.pcCheck(e,3,4),e[0]instanceof a)return e[0].domainCodeLookup(d.toString(e[1]),e[2],void 0===e[3]?void 0:d.toNumber(e[3]));throw Error("Invalid Parameter");})}}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","dojo/number"],
function(e,h,d,a){function b(a,b,d){return"undefined"==typeof d||0===+d?Math[a](b):(b=+b,d=+d,isNaN(b)||"number"!=typeof d||0!==d%1?NaN:(b=b.toString().split("e"),b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-d:-d))),b=b.toString().split("e"),+(b[0]+"e"+(b[1]?+b[1]+d:d))))}Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(c,e){c.number=function(b,c){return e(b,c,function(b,c,e){d.pcCheck(e,1,2);b=e[0];return d.isNumber(b)?b:null===b?0:d.isDate(b)||d.isBoolean(b)?Number(b):d.isArray(b)?
NaN:""===b||void 0===b?Number(b):d.isString(b)?void 0!==e[1]?(e=d.multiReplace(e[1],"\u2030",""),e=d.multiReplace(e,"\u00a4",""),a.parse(b,{pattern:e})):Number(b.trim()):Number(b)})};c.abs=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,1,1),Math.abs(d.toNumber(c[0]))})};c.acos=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,1,1),Math.acos(d.toNumber(c[0]))})};c.asin=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,1,1),Math.asin(d.toNumber(c[0]))})};c.atan=
function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,1,1),Math.atan(d.toNumber(c[0]))})};c.atan2=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,2,2),Math.atan2(d.toNumber(c[0]),d.toNumber(c[1]))})};c.ceil=function(a,c){return e(a,c,function(a,c,e){return(d.pcCheck(e,1,2),2===e.length)?(a=d.toNumber(e[1]),isNaN(a)&&(a=0),b("ceil",d.toNumber(e[0]),-1*a)):Math.ceil(d.toNumber(e[0]))})};c.round=function(a,c){return e(a,c,function(a,c,e){return(d.pcCheck(e,1,2),2===e.length)?(a=
d.toNumber(e[1]),isNaN(a)&&(a=0),b("round",d.toNumber(e[0]),-1*a)):Math.round(d.toNumber(e[0]))})};c.floor=function(a,c){return e(a,c,function(a,c,e){return(d.pcCheck(e,1,2),2===e.length)?(a=d.toNumber(e[1]),isNaN(a)&&(a=0),b("floor",d.toNumber(e[0]),-1*a)):Math.floor(d.toNumber(e[0]))})};c.cos=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,1,1),Math.cos(d.toNumber(c[0]))})};c.isnan=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,1,1),"number"==typeof c[0]&&isNaN(c[0])})};
c.exp=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,1,1),Math.exp(d.toNumber(c[0]))})};c.log=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,1,1),Math.log(d.toNumber(c[0]))})};c.pow=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,2,2),Math.pow(d.toNumber(c[0]),d.toNumber(c[1]))})};c.random=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,0,0),Math.random()})};c.sin=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,1,1),Math.sin(d.toNumber(c[0]))})};
c.sqrt=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,1,1),Math.sqrt(d.toNumber(c[0]))})};c.tan=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,1,1),Math.tan(d.toNumber(c[0]))})};c.defaultvalue=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,2,2),null===c[0]?c[1]:""===c[0]?c[1]:void 0===c[0]?c[1]:c[0]})};c.isempty=function(a,b){return e(a,b,function(a,b,c){return d.pcCheck(c,1,1),null===c[0]?!0:""===c[0]?!0:void 0===c[0]?!0:!1})};c["boolean"]=function(a,
b){return e(a,b,function(a,b,c){d.pcCheck(c,1,1);return d.toBoolean(c[0])})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../../geometry/Geometry ../../geometry/Polygon ../../geometry/Polyline ../../geometry/Point ../../geometry/Extent ../../geometry/Multipoint ../../geometry/support/jsonUtils ../languageUtils ../Dictionary ../Feature".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u){Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(e,h){e.polygon=
function(b,c){return h(b,c,function(c,d,f){g.pcCheck(f,1,1);c=null;if(f[0]instanceof n){if(c=g.fixSpatialReference(u.parseGeometryFromDictionary(f[0]),b.spatialReference),0==c instanceof a)throw Error("Illegal Parameter");}else c=f[0]instanceof a?l.fromJSON(f[0].toJSON()):g.fixSpatialReference(new a(JSON.parse(f[0])),b.spatialReference);if(null!==c&&!1===c.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return g.fixNullGeometry(c)})};e.polyline=function(a,c){return h(a,c,function(c,d,f){g.pcCheck(f,1,1);c=null;if(f[0]instanceof n){if(c=g.fixSpatialReference(u.parseGeometryFromDictionary(f[0]),a.spatialReference),0==c instanceof b)throw Error("Illegal Parameter");}else c=f[0]instanceof b?l.fromJSON(f[0].toJSON()):g.fixSpatialReference(new b(JSON.parse(f[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return g.fixNullGeometry(c)})};e.point=function(a,b){return h(a,b,function(b,d,f){g.pcCheck(f,1,1);b=null;if(f[0]instanceof n){if(b=g.fixSpatialReference(u.parseGeometryFromDictionary(f[0]),a.spatialReference),0==b instanceof c)throw Error("Illegal Parameter");}else b=f[0]instanceof c?l.fromJSON(f[0].toJSON()):g.fixSpatialReference(new c(JSON.parse(f[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return g.fixNullGeometry(b)})};e.multipoint=function(a,b){return h(a,b,function(b,c,d){g.pcCheck(d,1,1);b=null;if(d[0]instanceof n){if(b=g.fixSpatialReference(u.parseGeometryFromDictionary(d[0]),a.spatialReference),0==b instanceof k)throw Error("Illegal Parameter");}else b=d[0]instanceof k?l.fromJSON(d[0].toJSON()):g.fixSpatialReference(new k(JSON.parse(d[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return g.fixNullGeometry(b)})};e.extent=function(d,e){return h(d,e,function(e,h,f){g.pcCheck(f,1,1);e=null;f[0]instanceof n?e=g.fixSpatialReference(u.parseGeometryFromDictionary(f[0]),d.spatialReference):f[0]instanceof c?(e={xmin:f[0].x,ymin:f[0].y,xmax:f[0].x,ymax:f[0].y,spatialReference:f[0].spatialReference.toJSON()},f[0].hasZ?(e.zmin=f[0].z,e.zmax=f[0].z):f[0].hasM&&(e.mmin=f[0].m,e.mmax=f[0].m),e=l.fromJSON(e)):e=f[0]instanceof a?l.fromJSON(f[0].extent.toJSON()):f[0]instanceof b?l.fromJSON(f[0].extent.toJSON()):
f[0]instanceof k?l.fromJSON(f[0].extent.toJSON()):f[0]instanceof m?l.fromJSON(f[0].toJSON()):g.fixSpatialReference(new m(JSON.parse(f[0])),d.spatialReference);if(null!==e&&!1===e.spatialReference.equals(d.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(e)})};e.geometry=function(a,b){return h(a,b,function(b,c,d){g.pcCheck(d,1,1);b=null;if(b=d[0]instanceof u?g.fixSpatialReference(d[0].geometry,
a.spatialReference):d[0]instanceof n?g.fixSpatialReference(u.parseGeometryFromDictionary(d[0]),a.spatialReference):g.fixSpatialReference(l.fromJSON(JSON.parse(d[0])),a.spatialReference),null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(b)})};e.feature=function(a,b){return h(a,b,function(b,c,f){if(0===f.length)throw Error("Missing Parameters");b=null;if(1===
f.length)if(g.isString(f[0]))b=u.fromJson(JSON.parse(f[0]));else if(f[0]instanceof u)b=new u(f[0]);else if(f[0]instanceof d)b=new u(null,f[0]);else{if(!(f[0]instanceof n))throw Error("Illegal Argument");b=f[0].hasField("geometry")?f[0].field("geometry"):null;c=f[0].hasField("attributes")?f[0].field("attributes"):null;null!==b&&b instanceof n&&(b=u.parseGeometryFromDictionary(b));null!==c&&(c=u.parseAttributesFromDictionary(c));b=new u(c,b)}else{if(2===f.length){c=b=null;if(null!==f[0])if(f[0]instanceof
d)b=f[0];else{if(!(b instanceof n))throw Error("Illegal Argument");b=u.parseGeometryFromDictionary(f[0])}if(null!==f[1]){if(!(f[1]instanceof n))throw Error("Illegal Argument");c=u.parseAttributesFromDictionary(f[1])}}else{b=null;c={};if(null!==f[0])if(f[0]instanceof d)b=f[0];else{if(!(b instanceof n))throw Error("Illegal Argument");b=u.parseGeometryFromDictionary(f[0])}for(var e=1;e<f.length;e+=2){var k=g.toString(f[e]),l=f[e+1];if(!(null===l||void 0===l||g.isString(l)||isNaN(l)||g.isDate(l)||g.isNumber(l)||
g.isBoolean(l)))throw Error("Illegal Argument");if(g.isFunctionParameter(l)||!1===g.isSimpleType(l))throw Error("Illegal Argument");l===g.voidOperation?c[k]=null:c[k]=l}}b=new u(c,b)}return b.geometry=g.fixSpatialReference(b.geometry,a.spatialReference),b.immutable=!1,b})};e.dictionary=function(a,b){return h(a,b,function(a,b,c){if(0===c.length)throw Error("Missing Parameters");if(0!==c.length%2)throw Error("Missing Parameters");a={};for(b=0;b<c.length;b+=2){var d=g.toString(c[b]),f=c[b+1];if(!(null===
f||void 0===f||g.isString(f)||isNaN(f)||g.isDate(f)||g.isNumber(f)||g.isBoolean(f)||g.isArray(f)||g.isImmutableArray(f)))throw Error("Illegal Argument");if(g.isFunctionParameter(f))throw Error("Illegal Argument");f===g.voidOperation?a[d]=null:a[d]=f}c=new n(a);return c.immutable=!1,c})};e.haskey=function(a,b){return h(a,b,function(a,b,c){g.pcCheck(c,2,2);a=g.toString(c[1]);if(c[0]instanceof u||c[0]instanceof n)return c[0].hasField(a);throw Error("Illegal Argument");})};e.indexof=function(a,b){return h(a,
b,function(a,b,c){g.pcCheck(c,2,2);a=c[1];if(g.isArray(c[0])){for(b=0;b<c[0].length;b++)if(g.equalityTest(a,c[0][b]))return b;return-1}if(g.isImmutableArray(c[0])){var d=c[0].length();for(b=0;d>b;b++)if(g.equalityTest(a,c[0].get(b)))return b;return-1}throw Error("Illegal Argument");})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(e,h,d,a){function b(b,e,k,l){if(1===l.length){if(d.isArray(l[0]))return a.calculateStat(b,l[0],-1);
if(d.isImmutableArray(l[0]))return a.calculateStat(b,l[0].toArray(),-1)}return a.calculateStat(b,l,-1)}Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(a,e){a.stdev=function(a,c){return e(a,c,function(a,c,d){return b("stdev",a,c,d)})};a.variance=function(a,c){return e(a,c,function(a,c,d){return b("variance",a,c,d)})};a.average=function(a,c){return e(a,c,function(a,c,d){return b("mean",a,c,d)})};a.mean=function(a,c){return e(a,c,function(a,c,d){return b("mean",a,c,d)})};
a.sum=function(a,c){return e(a,c,function(a,c,d){return b("sum",a,c,d)})};a.min=function(a,c){return e(a,c,function(a,c,d){return b("min",a,c,d)})};a.max=function(a,c){return e(a,c,function(a,c,d){return b("max",a,c,d)})};a.distinct=function(a,c){return e(a,c,function(a,c,d){return b("distinct",a,c,d)})};a.count=function(a,b){return e(a,b,function(a,b,c){if(d.pcCheck(c,1,1),d.isArray(c[0])||d.isString(c[0]))return c[0].length;if(d.isImmutableArray(c[0]))return c[0].length();throw Error("Invalid Parameters for Count");
})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(e,h,d){function a(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b/a.length}function b(b){for(var c=a(b),d=0,e=0;e<b.length;e++)d+=Math.pow(c-b[e],2);return d/b.length}Object.defineProperty(h,"__esModule",{value:!0});h.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";
case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};h.calculateStat=function(c,e,k){switch(void 0===k&&(k=1E3),c.toLowerCase()){case "distinct":a:{c=k;k=[];for(var l={},g=[],m=0;m<e.length;m++){if(void 0!==e[m]&&null!==e[m]&&e[m]!==d.voidOperation){var h=e[m];if(d.isNumber(h)||d.isString(h))void 0===l[h]&&(k.push(h),l[h]=1);else{for(var r=!1,t=0;t<g.length;t++)!0===d.equalityTest(g[t],h)&&(r=!0);!1===r&&(g.push(h),k.push(h))}}if(k.length>=
c&&-1!==c){e=k;break a}}e=k}return e;case "avg":case "mean":return a(d.toNumberArray(e));case "min":return Math.min.apply(Math,d.toNumberArray(e));case "sum":e=d.toNumberArray(e);for(k=c=0;k<e.length;k++)c+=e[k];return c;case "max":return Math.max.apply(Math,d.toNumberArray(e));case "stdev":case "stddev":return Math.sqrt(b(d.toNumberArray(e)));case "var":case "variance":return b(d.toNumberArray(e));case "count":return e.length}return 0}})},"esri/arcade/parser":function(){define(["require","exports",
"./treeAnalysis","./lib/esprima"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});h.parseScript=function(b){b=a.parse("function _() { "+b+"\n}");if(null===b.body||void 0===b.body)throw Error("No formula provided.");if(0===b.body.length)throw Error("No formula provided.");if(0===b.body.length)throw Error("No formula provided.");if("BlockStatement"!==b.body[0].body.type)throw Error("Invalid formula content.");var c=d.validateLanguage(b);if(""!==c)throw Error(c);return b};h.scriptCheck=
function(b,c,e,k){var l=[];try{var g=a.parse("function _() { "+b+"\n}",{tolerant:!0,loc:!0}),m=g.errors;if(0<m.length)for(var h=0;h<m.length;h++)l.push({line:m[h].lineNumber,character:m[h].column,reason:m[h].description});var r=d.checkScript(g,c,e,k);for(c=0;c<r.length;c++)l.push(r[c])}catch(t){try{"Unexpected token }"===t.description&&(t.index=("function _() { "+b+"\n}").length-1)?l.push({line:t.lineNumber,character:t.column,reason:"Unexpected end of script"}):l.push({line:t.lineNumber,character:t.column,
reason:t.description})}catch(w){}}return l};h.extractFieldLiterals=function(a,c){return void 0===c&&(c=!1),d.findFieldLiterals(a,c)};h.validateScript=function(a,c,e){return void 0===e&&(e="full"),d.validateScript(a,c,e)};h.referencesMember=function(a,c){return d.referencesMember(a,c)};h.referencesFunction=function(a,c){return d.referencesFunction(a,c)}})},"esri/arcade/lib/esprima":function(){!function(e,h){"function"==typeof define&&define.amd?define(["exports"],h):h("undefined"!=typeof exports?exports:
e.esprima={})}(this,function(e){function h(a,b){if(!a)throw Error("ASSERT: "+b);}function d(a){return 48<=a&&57>=a}function a(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function b(a){return 0<="01234567".indexOf(a)}function c(a){return 10===a||13===a||8232===a||8233===a}function m(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&cb.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function k(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||
128<=a&&cb.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function l(a){switch(a=a.toLowerCase(),a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function g(a,b,c,d,f){var e;h("number"==typeof c,"Comment must have valid position");ha.lastCommentStart>=c||(ha.lastCommentStart=c,e={type:a,value:b},Q.range&&(e.range=[c,
d]),Q.loc&&(e.loc=f),Q.comments.push(e),Q.attachComment&&(Q.leadingComments.push(e),Q.trailingComments.push(e)))}function n(a){var b,d,f,e;b=J-a;for(d={start:{line:ia,column:J-la-a}};na>J;)if(f=V.charCodeAt(J),++J,c(f))return Q.comments&&(e=V.slice(b+a,J-1),d.end={line:ia,column:J-la-1},g("Line",e,b,J-1,d)),13===f&&10===V.charCodeAt(J)&&++J,++ia,void(la=J);Q.comments&&(e=V.slice(b+a,J),d.end={line:ia,column:J-la},g("Line",e,b,J,d))}function u(){var a,b;for(b=0===J;na>J;)if(a=V.charCodeAt(J),32===
a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++J;else if(c(a))++J,13===a&&10===V.charCodeAt(J)&&++J,++ia,la=J,b=!0;else if(47===a)if(a=V.charCodeAt(J+1),47===a)++J,++J,n(2),b=!0;else{if(42!==a)break;++J;++J;a:{var d=void 0,f=void 0,e=void 0,k=void 0;for(Q.comments&&(d=J-2,f={start:{line:ia,column:J-la-2}});na>J;)if(e=V.charCodeAt(J),c(e))13===e&&10===V.charCodeAt(J+1)&&++J,++ia,++J,la=J,J>=na&&N();
else{if(42===e&&47===V.charCodeAt(J+1)){++J;++J;Q.comments&&(k=V.slice(d+2,J-2),f.end={line:ia,column:J-la},g("Block",k,d,J,f));break a}++J}N()}}else if(b&&45===a){if(45!==V.charCodeAt(J+1)||62!==V.charCodeAt(J+2))break;J+=3;n(3)}else{if(60!==a)break;if("!--"!==V.slice(J+1,J+4))break;++J;++J;++J;++J;n(4)}}function r(b){var c,d,f=0;c="u"===b?4:2;for(b=0;c>b;++b){if(!(na>J&&a(V[J])))return"";d=V[J++];f=16*f+"0123456789abcdef".indexOf(d.toLowerCase())}return String.fromCharCode(f)}function t(){var a,
b;a=V.charCodeAt(J++);b=String.fromCharCode(a);for(92===a&&(117!==V.charCodeAt(J)&&N(),++J,a=r("u"),a&&"\\"!==a&&m(a.charCodeAt(0))||N(),b=a);na>J&&(a=V.charCodeAt(J),k(a));)++J,b+=String.fromCharCode(a),92===a&&(b=b.substr(0,b.length-1),117!==V.charCodeAt(J)&&N(),++J,a=r("u"),a&&"\\"!==a&&k(a.charCodeAt(0))||N(),b+=a);return b}function w(){var a,b,c,d,f=J,e=V.charCodeAt(J),g=V[J];switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++J,
Q.tokenize&&(40===e?Q.openParenToken=Q.tokens.length:123===e&&(Q.openCurlyToken=Q.tokens.length)),{type:X.Punctuator,value:String.fromCharCode(e),lineNumber:ia,lineStart:la,start:f,end:J};default:if(a=V.charCodeAt(J+1),61===a)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return J+=2,{type:X.Punctuator,value:String.fromCharCode(e)+String.fromCharCode(a),lineNumber:ia,lineStart:la,start:f,end:J};case 33:case 61:return J+=2,61===V.charCodeAt(J)&&++J,{type:X.Punctuator,
value:V.slice(f,J),lineNumber:ia,lineStart:la,start:f,end:J}}}return d=V.substr(J,4),"\x3e\x3e\x3e\x3d"===d?(J+=4,{type:X.Punctuator,value:d,lineNumber:ia,lineStart:la,start:f,end:J}):(c=d.substr(0,3),"\x3e\x3e\x3e"===c||"\x3c\x3c\x3d"===c||"\x3e\x3e\x3d"===c?(J+=3,{type:X.Punctuator,value:c,lineNumber:ia,lineStart:la,start:f,end:J}):(b=c.substr(0,2),g===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(g)||"\x3d\x3e"===b?(J+=2,{type:X.Punctuator,value:b,lineNumber:ia,lineStart:la,start:f,end:J}):0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(g)?
(++J,{type:X.Punctuator,value:g,lineNumber:ia,lineStart:la,start:f,end:J}):void N()))}function q(){var c,f,e;if(e=V[J],h(d(e.charCodeAt(0))||"."===e,"Numeric literal must start with a decimal digit or a decimal point"),f=J,c="","."!==e){if(c=V[J++],e=V[J],"0"===c){if("x"===e||"X"===e){++J;for(var g="";na>J&&a(V[J]);)g+=V[J++];return 0===g.length&&N(),m(V.charCodeAt(J))&&N(),{type:X.NumericLiteral,value:parseInt("0x"+g,16),lineNumber:ia,lineStart:la,start:f,end:J}}if("b"===e||"B"===e){++J;for(c="";na>
J&&(g=V[J],"0"===g||"1"===g);)c+=V[J++];return 0===c.length&&N(),na>J&&(g=V.charCodeAt(J),(m(g)||d(g))&&N()),{type:X.NumericLiteral,value:parseInt(c,2),lineNumber:ia,lineStart:la,start:f,end:J}}if("o"===e||"O"===e||b(e)){var k,l;for(b(e)?(l=!0,k="0"+V[J++]):(l=!1,++J,k="");na>J&&b(V[J]);)k+=V[J++];return l||0!==k.length||N(),(m(V.charCodeAt(J))||d(V.charCodeAt(J)))&&N(),{type:X.NumericLiteral,value:parseInt(k,8),octal:l,lineNumber:ia,lineStart:la,start:f,end:J}}e&&d(e.charCodeAt(0))&&N()}for(;d(V.charCodeAt(J));)c+=
V[J++];e=V[J]}if("."===e){for(c+=V[J++];d(V.charCodeAt(J));)c+=V[J++];e=V[J]}if("e"===e||"E"===e)if(c+=V[J++],e=V[J],("+"===e||"-"===e)&&(c+=V[J++]),d(V.charCodeAt(J)))for(;d(V.charCodeAt(J));)c+=V[J++];else N();return m(V.charCodeAt(J))&&N(),{type:X.NumericLiteral,value:parseFloat(c),lineNumber:ia,lineStart:la,start:f,end:J}}function v(){da=null;u();L("Regular Expression language structures not supported")}function x(){u();v()}function f(){var a,b;if(a=Q.tokens[Q.tokens.length-1],!a)return x();if("Punctuator"===
a.type){if("]"===a.value)return w();if(")"===a.value)return b=Q.tokens[Q.openParenToken-1],!b||"Keyword"!==b.type||"if"!==b.value.toLowerCase()&&"while"!==b.value.toLowerCase()&&"for"!==b.value.toLowerCase()&&"with"!==b.value.toLowerCase()?w():x();if("}"===a.value){if(Q.tokens[Q.openCurlyToken-3]&&"Keyword"===Q.tokens[Q.openCurlyToken-3].type){if(b=Q.tokens[Q.openCurlyToken-4],!b)return w()}else{if(!Q.tokens[Q.openCurlyToken-4]||"Keyword"!==Q.tokens[Q.openCurlyToken-4].type)return w();if(b=Q.tokens[Q.openCurlyToken-
5],!b)return x()}return 0<=ua.indexOf(b.value)?w():x()}return x()}return"Keyword"===a.type&&"this"!==a.value?x():w()}function p(){var e;u();var g;if(J>=na)g={type:X.EOF,lineNumber:ia,lineStart:la,start:J,end:J};else if(e=V.charCodeAt(J),m(e)){var p,n;g=J;var v;if(92===V.charCodeAt(J))v=t();else a:{var x;for(v=J++;na>J;){if(x=V.charCodeAt(J),92===x){v=(J=v,t());break a}if(!k(x))break;++J}v=V.slice(v,J)}g=(p=v,n=1===p.length?X.Identifier:l(p)?X.Keyword:"null"===p.toLowerCase()?X.NullLiteral:"true"===
p.toLowerCase()||"false"===p.toLowerCase()?X.BooleanLiteral:X.Identifier,{type:n,value:p,lineNumber:ia,lineStart:la,start:g,end:J})}else if(40===e||41===e||59===e)g=w();else if(39===e||34===e){var z,y,B="",A=!1;x=ia;e=la;p=V[J];h("'"===p||'"'===p,"String literal must starts with a quote");n=J;for(++J;na>J;){if(g=V[J++],g===p){p="";break}if("\\"===g)if(g=V[J++],g&&c(g.charCodeAt(0)))++ia,"\r"===g&&"\n"===V[J]&&++J,la=J;else switch(g){case "u":case "x":if("{"===V[J]){++J;z=B;var D,F=D=void 0,B=y=void 0;
D=V[J];F=0;for("}"===D&&N();na>J&&(D=V[J++],a(D));)F=16*F+"0123456789abcdef".indexOf(D.toLowerCase());D=((1114111<F||"}"!==D)&&N(),65535>=F?String.fromCharCode(F):(y=(F-65536>>10)+55296,B=(F-65536&1023)+56320,String.fromCharCode(y,B)));B=z+D}else y=J,(z=r(g))?B+=z:(J=y,B+=g);break;case "n":B+="\n";break;case "r":B+="\r";break;case "t":B+="\t";break;case "b":B+="\b";break;case "f":B+="\f";break;case "v":B+="\x0B";break;default:b(g)?(v="01234567".indexOf(g),0!==v&&(A=!0),na>J&&b(V[J])&&(A=!0,v=8*v+
"01234567".indexOf(V[J++]),0<="0123".indexOf(g)&&na>J&&b(V[J])&&(v=8*v+"01234567".indexOf(V[J++]))),B+=String.fromCharCode(v)):B+=g}else{if(c(g.charCodeAt(0)))break;B+=g}}g=(""!==p&&N(),{type:X.StringLiteral,value:B,octal:A,startLineNumber:x,startLineStart:e,lineNumber:ia,lineStart:la,start:n,end:J})}else g=46===e?d(V.charCodeAt(J+1))?q():w():d(e)?q():Q.tokenize&&47===e?f():w();return g}function z(){var a,b,c,d;return u(),a={start:{line:ia,column:J-la}},b=p(),a.end={line:ia,column:J-la},b.type!==
X.EOF&&(c=V.slice(b.start,b.end),d={type:Ba[b.type],value:c,range:[b.start,b.end],loc:a},b.regex&&(d.regex={pattern:b.regex.pattern,flags:b.regex.flags}),Q.tokens.push(d)),b}function y(){var a;return a=da,J=a.end,ia=a.lineNumber,la=a.lineStart,da="undefined"!=typeof Q.tokens?z():p(),J=a.end,ia=a.lineNumber,la=a.lineStart,a}function A(){var a,b,c;a=J;b=ia;c=la;da="undefined"!=typeof Q.tokens?z():p();J=a;ia=b;la=c}function B(){this.line=ia;this.column=J-la}function D(){this.start=new B;this.end=null}
function F(a){a.type===X.StringLiteral?this.start={line:a.startLineNumber,column:a.start-a.startLineStart}:this.start={line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function C(){J=da.start;da.type===X.StringLiteral?(ia=da.startLineNumber,la=da.startLineStart):(ia=da.lineNumber,la=da.lineStart);Q.range&&(this.range=[J,0]);Q.loc&&(this.loc=new D)}function E(a){Q.range&&(this.range=[a.start,0]);Q.loc&&(this.loc=new F(a))}function G(){var a,b,c,d;return a=J,b=ia,c=la,u(),d=ia!==b,J=a,ia=
b,la=c,d}function K(a,b,c){var d=Error("Line "+a+": "+c);return d.index=b,d.lineNumber=a,d.column=b-la+1,d.description=c,d}function L(a){var b,c;throw b=Array.prototype.slice.call(arguments,1),c=a.replace(/%(\d)/g,function(a,c){return h(c<b.length,"Message reference must be in range"),b[c]}),K(ia,J,c);}function H(a){var b,c,d;if(b=Array.prototype.slice.call(arguments,1),c=a.replace(/%(\d)/g,function(a,c){return h(c<b.length,"Message reference must be in range"),b[c]}),d=K(ia,J,c),!Q.errors)throw d;
Q.errors.push(d)}function I(a,b){var c=ga.UnexpectedToken;a&&(c=b?b:a.type===X.EOF?ga.UnexpectedEOS:a.type===X.Identifier?ga.UnexpectedIdentifier:a.type===X.NumericLiteral?ga.UnexpectedNumber:a.type===X.StringLiteral?ga.UnexpectedString:ga.UnexpectedToken);return c=c.replace("%0",a?a.value:"ILLEGAL"),a&&"number"==typeof a.lineNumber?K(a.lineNumber,a.start,c):K(ia,J,c)}function N(a,b){throw I(a,b);}function S(a,b){a=I(a,b);if(!Q.errors)throw a;Q.errors.push(a)}function M(a){var b=y();b.type===X.Punctuator&&
b.value===a||N(b)}function ca(){var a;Q.errors?(a=da,a.type===X.Punctuator&&","===a.value?y():a.type===X.Punctuator&&";"===a.value?(y(),S(a)):S(a,ga.UnexpectedToken)):M(",")}function O(a){var b=y();b.type===X.Keyword&&b.value.toLowerCase()===a.toLowerCase()||N(b)}function P(a){return da.type===X.Punctuator&&da.value===a}function W(a){return da.type===X.Keyword&&da.value.toLowerCase()===a.toLowerCase()}function aa(){var a;return 59===V.charCodeAt(J)||P(";")?void y():(a=ia,u(),void(ia===a&&(da.type===
X.EOF||P("}")||N(da))))}function R(a){return a.type===ka.Identifier||a.type===ka.MemberExpression}function T(a,b){var c,d;b=new C;return c=ma,d=Na(),ma=c,b.finishFunctionExpression(null,a,[],d)}function ba(){var a,b,c;return a=ma,ma=!0,b=Ra(),c=T(b.params),ma=a,c}function U(){var a,b=new C;return a=y(),a.type===X.StringLiteral||a.type===X.NumericLiteral?(ma&&a.octal&&S(a,ga.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function ea(){var a,b,c,d,f,e=new C;if(a=da,a.type===X.Identifier)return c=
U(),"get"!==a.value||P(":")||P("(")?"set"!==a.value||P(":")||P("(")?P(":")?(y(),d=wa(),e.finishProperty("init",c,d,!1,!1)):P("(")?(d=ba(),e.finishProperty("init",c,d,!0,!1)):(d=c,e.finishProperty("init",c,d,!1,!0)):(b=U(),M("("),a=da,a.type!==X.Identifier?(M(")"),S(a),d=T([])):(f=[Ja()],M(")"),d=T(f,a)),e.finishProperty("set",b,d,!1,!1)):(b=U(),M("("),M(")"),d=T([]),e.finishProperty("get",b,d,!1,!1));if(a.type===X.EOF||a.type===X.Punctuator)N(a);else{if(b=U(),P(":"))return y(),d=wa(),e.finishProperty("init",
b,d,!1,!1);if(P("("))return d=ba(),e.finishProperty("init",b,d,!0,!1);N(y())}}function Z(a){var b,c,d=[],f={},e=String,g=new C;for(!0!==a&&M("{");!P("}");)a=ea(),b=a.key.type===ka.Identifier?a.key.name:e(a.key.value),c="init"===a.kind?Ka.Data:"get"===a.kind?Ka.Get:Ka.Set,b="$"+b,Object.prototype.hasOwnProperty.call(f,b)?(f[b]===Ka.Data?ma&&c===Ka.Data?H(ga.StrictDuplicateProperty):c!==Ka.Data&&H(ga.AccessorDataProperty):c===Ka.Data?H(ga.AccessorDataProperty):f[b]&c&&H(ga.AccessorGetSet),f[b]|=c):
f[b]=c,d.push(a),P("}")||ca();return M("}"),g.finishObjectExpression(d)}function fa(){var a,b,c,d;if(P("("))return M("("),P(")")?(y(),Ma.ArrowParameterPlaceHolder):(++ha.parenthesisCount,d=xa(),M(")"),d);if(P("[")){var f=[],e=new C;for(M("[");!P("]");)P(",")?(y(),f.push(null)):(f.push(wa()),P("]")||M(","));return y(),e.finishArrayExpression(f)}if(P("{"))return Z();if(a=da.type,d=new C,a===X.Identifier)c=d.finishIdentifier(y().value);else if(a===X.StringLiteral||a===X.NumericLiteral)ma&&da.octal&&
S(da,ga.StrictOctalLiteral),c=d.finishLiteral(y());else if(a===X.Keyword){if(W("function")){var g,k,l,m;a=null;b=[];c=[];d=new C;return O("function"),P("(")||(a=Ja()),k=Ra(e),b=k.params,c=k.defaults,f=k.stricted,e=k.firstRestricted,k.message&&(g=k.message),m=ma,l=Na(),ma&&e&&N(e,g),ma&&f&&S(f,g),ma=m,d.finishFunctionExpression(a,b,c,l)}W("this")?(y(),c=d.finishThisExpression()):N(y())}else a===X.BooleanLiteral?(b=y(),b.value="true"===b.value.toLowerCase(),c=d.finishLiteral(b)):a===X.NullLiteral?(b=
y(),b.value=null,c=d.finishLiteral(b)):P("/")||P("/\x3d")?(c="undefined"!=typeof Q.tokens?d.finishLiteral(x()):d.finishLiteral(v()),A()):N(y());return c}function ja(){var a=[];if(M("("),!P(")"))for(;na>J&&(a.push(wa()),!P(")"));)ca();return M(")"),a}function ta(){var a,b=new C;return a=y(),a.type===X.Identifier||a.type===X.Keyword||a.type===X.BooleanLiteral||a.type===X.NullLiteral||N(a),b.finishIdentifier(a.value)}function ra(){var a;return M("["),a=xa(),M("]"),a}function Aa(){var a,b,c=new C;O("new");
var d,f,e;h(ha.allowIn,"callee of new expression always allow in keyword.");e=da;for(d=W("new")?Aa():fa();;)if(P("["))f=ra(),d=(new E(e)).finishMemberExpression("[",d,f);else{if(!P("."))break;f=(M("."),ta());d=(new E(e)).finishMemberExpression(".",d,f)}return a=d,b=P("(")?ja():[],c.finishNewExpression(a,b)}function Fa(){var a,b,c=da,d,f,e,g=ha.allowIn;e=da;ha.allowIn=!0;for(d=W("new")?Aa():fa();;)if(P("."))f=(M("."),ta()),d=(new E(e)).finishMemberExpression(".",d,f);else if(P("("))f=ja(),d=(new E(e)).finishCallExpression(d,
f);else{if(!P("["))break;f=ra();d=(new E(e)).finishMemberExpression("[",d,f)}return a=(ha.allowIn=g,d),da.type===X.Punctuator&&(!P("++")&&!P("--")||G()||(R(a)||H(ga.InvalidLHSInAssignment),b=y(),a=(new E(c)).finishPostfixExpression(b.value,a))),a}function pa(){var a,b,c;return da.type!==X.Punctuator&&da.type!==X.Keyword?b=Fa():P("++")||P("--")?(c=da,a=y(),b=pa(),R(b)||H(ga.InvalidLHSInAssignment),b=(new E(c)).finishUnaryExpression(a.value,b)):P("+")||P("-")||P("~")||P("!")?(c=da,a=y(),b=pa(),b=(new E(c)).finishUnaryExpression(a.value,
b)):W("delete")||W("void")||W("typeof")?(c=da,a=y(),b=pa(),b=(new E(c)).finishUnaryExpression(a.value,b),ma&&"delete"===b.operator&&b.argument.type===ka.Identifier&&H(ga.StrictDelete)):b=Fa(),b}function ib(a,b){var c=0;if(a.type!==X.Punctuator&&a.type!==X.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=
7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function Ia(a){var b,c,d,f,e,g,k,l;f=[];e=[];g=0;k={paramSet:{}};b=0;for(c=a.length;c>b;b+=1)if(d=a[b],d.type===ka.Identifier)f.push(d),e.push(null),Ga(k,d,d.name);else{if(d.type!==ka.AssignmentExpression)return null;f.push(d.left);e.push(d.right);++g;Ga(k,d.left,d.left.name)}return k.message===ga.StrictParamDupe&&(l=ma?k.stricted:k.firstRestricted,
N(l,k.message)),0===g&&(e=[]),{params:f,defaults:e,rest:null,stricted:k.stricted,firstRestricted:k.firstRestricted,message:k.message}}function wa(){var a,b,c,d,f,e;a=ha.parenthesisCount;b=e=da;var g,k,l,m;c=da;var h;var p,n,u,q,r;if((h=da,p=pa(),p!==Ma.ArrowParameterPlaceHolder)&&(n=da,u=ib(n,ha.allowIn),0!==u)){n.prec=u;y();h=[h,da];r=pa();for(q=[p,n,r];0<(u=ib(da,ha.allowIn));){for(;2<q.length&&u<=q[q.length-2].prec;)r=q.pop(),n=q.pop().value,p=q.pop(),h.pop(),p=(new E(h[h.length-1])).finishBinaryExpression(n,
p,r),q.push(p);n=y();n.prec=u;q.push(n);h.push(da);p=pa();q.push(p)}u=q.length-1;p=q[u];for(h.pop();1<u;)p=(new E(h.pop())).finishBinaryExpression(q[u-1].value,q[u-2],p),u-=2}h=p;c=(g=h,g===Ma.ArrowParameterPlaceHolder?g:(P("?")&&(y(),k=ha.allowIn,ha.allowIn=!0,l=wa(),ha.allowIn=k,M(":"),m=wa(),g=(new E(c)).finishConditionalExpression(g,l,m)),g));if(c!==Ma.ArrowParameterPlaceHolder&&!P("\x3d\x3e")||ha.parenthesisCount!==a&&ha.parenthesisCount!==a+1||(c.type===ka.Identifier?f=Ia([c]):c.type===ka.AssignmentExpression?
f=Ia([c]):c.type===ka.SequenceExpression?f=Ia(c.expressions):c===Ma.ArrowParameterPlaceHolder&&(f=Ia([])),!f)){var t;e=((da.type!==X.Punctuator?!1:(t=da.value,"\x3d"===t||"*\x3d"===t||"/\x3d"===t||"%\x3d"===t||"+\x3d"===t||"-\x3d"===t||"\x3c\x3c\x3d"===t||"\x3e\x3e\x3d"===t||"\x3e\x3e\x3e\x3d"===t||"\x26\x3d"===t||"^\x3d"===t||"|\x3d"===t))&&(R(c)||H(ga.InvalidLHSInAssignment),b=y(),d=wa(),c=(new E(e)).finishAssignmentExpression(b.value,c,d)),c)}else{b=f;d=new E(e);var v,x;e=(M("\x3d\x3e"),v=ma,x=
P("{")?Na():wa(),ma&&b.firstRestricted&&N(b.firstRestricted,b.message),ma&&b.stricted&&S(b.stricted,b.message),ma=v,d.finishArrowFunctionExpression(b.params,b.defaults,x,x.type!==ka.BlockStatement))}return e}function xa(){var a,b=da;if(a=wa(),P(",")){for(a=[a];na>J&&P(",");)y(),a.push(wa());a=(new E(b)).finishSequenceExpression(a)}return a}function Ja(){var a,b=new C;return a=y(),a.type!==X.Identifier&&N(a),b.finishIdentifier(a.value)}function Ua(a){var b,c=null,d=new C;return b=Ja(),"const"===a?
(M("\x3d"),c=wa()):P("\x3d")&&(y(),c=wa()),d.finishVariableDeclarator(b,c)}function bb(a){var b=[];do{if(b.push(Ua(a)),!P(","))break;y()}while(na>J);return b}function za(a){var b,c,d,f,e=da.type;if(e===X.EOF&&N(da),e===X.Punctuator&&"{"===da.value){if(a){M("{");var g,k,l,h,p;g=da;g=(k=J,l=ia,h=la,y(),p=P(":"),da=g,J=k,ia=l,la=h,p);if(da.type!==X.Identifier&&da.type!==X.StringLiteral||!g){g=new C;for(var n=[];na>J&&!P("}")&&(f=Ea(),"undefined"!=typeof f);)n.push(f);g=(M("}"),g.finishBlockStatement(n))}else g=
Z(!0);return g}return Z()}if(f=new C,e===X.Punctuator)switch(da.value){case ";":return g=new C,M(";"),g.finishEmptyStatement();case "(":return g=xa(),aa(),f.finishExpressionStatement(g)}else if(e===X.Keyword)switch(da.value.toLowerCase()){case "break":var u;g=null;return O("break"),59===V.charCodeAt(J)?(y(),ha.inIteration||ha.inSwitch||L(ga.IllegalBreak),f.finishBreakStatement(null)):G()?(ha.inIteration||ha.inSwitch||L(ga.IllegalBreak),f.finishBreakStatement(null)):(da.type===X.Identifier&&(g=Ja(),
u="$"+g.name,Object.prototype.hasOwnProperty.call(ha.labelSet,u)||L(ga.UnknownLabel,g.name)),aa(),null!==g||ha.inIteration||ha.inSwitch||L(ga.IllegalBreak),f.finishBreakStatement(g));case "continue":var q;g=null;return O("continue"),59===V.charCodeAt(J)?(y(),ha.inIteration||L(ga.IllegalContinue),f.finishContinueStatement(null)):G()?(ha.inIteration||L(ga.IllegalContinue),f.finishContinueStatement(null)):(da.type===X.Identifier&&(g=Ja(),q="$"+g.name,Object.prototype.hasOwnProperty.call(ha.labelSet,
q)||L(ga.UnknownLabel,g.name)),aa(),null!==g||ha.inIteration||L(ga.IllegalContinue),f.finishContinueStatement(g));case "for":var r,t;h=ha.allowIn;p=k=l=null;O("for");M("(");if(P(";"))y();else{if(W("var")){ha.allowIn=!1;var v,x;p=new C;p=(v=y(),x=bb(),p.finishVariableDeclaration(x,v.value));ha.allowIn=h;1===p.declarations.length&&W("in")&&(y(),g=p,n=xa(),p=null)}else ha.allowIn=!1,p=xa(),ha.allowIn=h,W("in")&&(R(p)||H(ga.InvalidLHSInForIn),y(),g=p,n=xa(),p=null);"undefined"==typeof g&&M(";")}return"undefined"==
typeof g&&(P(";")||(k=xa()),M(";"),P(")")||(l=xa())),M(")"),t=ha.inIteration,ha.inIteration=!0,r=za(!0),ha.inIteration=t,"undefined"==typeof g?f.finishForStatement(p,k,l,r):f.finishForInStatement(g,n,r);case "function":return $a(f);case "if":var w,z,B;return O("if"),M("("),w=xa(),M(")"),z=za(!0),W("else")?(y(),B=za(!0)):B=null,f.finishIfStatement(w,z,B);case "return":return g=null,O("return"),ha.inFunctionBody||H(ga.IllegalReturn),32===V.charCodeAt(J)&&m(V.charCodeAt(J+1))?(g=xa(),aa(),f.finishReturnStatement(g)):
G()?f.finishReturnStatement(null):(P(";")||P("}")||da.type===X.EOF||(g=xa()),aa(),f.finishReturnStatement(g));case "var":var A;return O("var"),A=bb(),aa(),f.finishVariableDeclaration(A,"var")}return b=xa(),b.type===ka.Identifier&&P(":")?(y(),d="$"+b.name,Object.prototype.hasOwnProperty.call(ha.labelSet,d)&&L(ga.Redeclaration,"Label",b.name),ha.labelSet[d]=!0,c=za(!1),delete ha.labelSet[d],f.finishLabeledStatement(b,c)):(aa(),f.finishExpressionStatement(b))}function Na(){var a,b,c,d,f,e,g=[],k=new C;
for(M("{");na>J&&da.type===X.StringLiteral&&(b=da,a=Ea(),g.push(a),a.expression.type===ka.Literal);)c=V.slice(b.start+1,b.end-1),"use strict"===c?(ma=!0,d&&S(d,ga.StrictOctalLiteral)):!d&&b.octal&&(d=b);b=ha.labelSet;c=ha.inIteration;d=ha.inSwitch;f=ha.inFunctionBody;e=ha.parenthesizedCount;ha.labelSet={};ha.inIteration=!1;ha.inSwitch=!1;ha.inFunctionBody=!0;for(ha.parenthesizedCount=0;na>J&&!P("}")&&(a=Ea(),"undefined"!=typeof a);)g.push(a);return M("}"),ha.labelSet=b,ha.inIteration=c,ha.inSwitch=
d,ha.inFunctionBody=f,ha.parenthesizedCount=e,k.finishBlockStatement(g)}function Ga(a,b,c){c="$"+c;ma?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=ga.StrictParamDupe):a.firstRestricted||Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=ga.StrictParamDupe);a.paramSet[c]=!0}function Ha(a){var b,c,d;return b=da,c=Ja(),Ga(a,b,b.value),P("\x3d")&&(y(),d=wa(),++a.defaultCount),a.params.push(c),a.defaults.push(d),!P(")")}function Ra(a){if(a=
{params:[],defaultCount:0,defaults:[],firstRestricted:a},M("("),!P(")"))for(a.paramSet={};na>J&&Ha(a);)M(",");return M(")"),0===a.defaultCount&&(a.defaults=[]),{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function $a(){var a,b,c,d,f,e,g,k=[],l=[],m=new C;return O("function"),a=Ja(),d=Ra(f),k=d.params,l=d.defaults,c=d.stricted,f=d.firstRestricted,d.message&&(e=d.message),g=ma,b=Na(),ma&&f&&N(f,e),ma&&c&&S(c,e),ma=g,m.finishFunctionDeclaration(a,
k,l,b)}function Ea(){return da.type===X.Keyword?"function"===da.value.toLowerCase()?$a():za(!1):da.type!==X.EOF?za(!1):void 0}function Oa(){var a,b,c,d=[];for(a=0;a<Q.tokens.length;++a)b=Q.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),Q.range&&(c.range=b.range),Q.loc&&(c.loc=b.loc),d.push(c);Q.tokens=d}var X,Ba,ua,ka,Ma,Ka,ga,cb,V,ma,J,ia,la,na,da,ha,Q;X={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,
StringLiteral:8,RegularExpression:9};Ba={};Ba[X.BooleanLiteral]="Boolean";Ba[X.EOF]="\x3cend\x3e";Ba[X.Identifier]="Identifier";Ba[X.Keyword]="Keyword";Ba[X.NullLiteral]="Null";Ba[X.NumericLiteral]="Numeric";Ba[X.Punctuator]="Punctuator";Ba[X.StringLiteral]="String";Ba[X.RegularExpression]="RegularExpression";ua="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
ka={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Ma={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
Ka={Data:1,Get:2,Set:4};ga={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};cb={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
E.prototype=C.prototype={processComment:function(){var a,b,c,d,f,e=Q.bottomRightStack,g=e[e.length-1];if(!(this.type===ka.Program&&0<this.body.length)){if(0<Q.trailingComments.length){c=[];for(d=Q.trailingComments.length-1;0<=d;--d)f=Q.trailingComments[d],f.range[0]>=this.range[1]&&(c.unshift(f),Q.trailingComments.splice(d,1));Q.trailingComments=[]}else g&&g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1]&&(c=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=this.range[0];)a=
g,g=e.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<Q.leadingComments.length)for(b=[],d=Q.leadingComments.length-1;0<=d;--d)f=Q.leadingComments[d],f.range[1]<=this.range[0]&&(b.unshift(f),Q.leadingComments.splice(d,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);e.push(this)}},finish:function(){Q.range&&(this.range[1]=J);Q.loc&&(this.loc.end=
new B,Q.source&&(this.loc.source=Q.source));Q.attachComment&&this.processComment()},finishArrayExpression:function(a){return this.type=ka.ArrayExpression,this.elements=a,this.finish(),this},finishAssignmentExpression:function(a,b,c){return this.type=ka.AssignmentExpression,this.operator=a,this.left=b,this.right=c,this.finish(),this},finishBinaryExpression:function(a,b,c){return this.type="||"===a||"\x26\x26"===a?ka.LogicalExpression:ka.BinaryExpression,this.operator=a,this.left=b,this.right=c,this.finish(),
this},finishBlockStatement:function(a){return this.type=ka.BlockStatement,this.body=a,this.finish(),this},finishBreakStatement:function(a){return this.type=ka.BreakStatement,this.label=a,this.finish(),this},finishCallExpression:function(a,b){return this.type=ka.CallExpression,this.callee=a,this.arguments=b,this.finish(),this},finishConditionalExpression:function(a,b,c){return this.type=ka.ConditionalExpression,this.test=a,this.consequent=b,this.alternate=c,this.finish(),this},finishContinueStatement:function(a){return this.type=
ka.ContinueStatement,this.label=a,this.finish(),this},finishEmptyStatement:function(){return this.type=ka.EmptyStatement,this.finish(),this},finishExpressionStatement:function(a){return this.type=ka.ExpressionStatement,this.expression=a,this.finish(),this},finishForStatement:function(a,b,c,d){return this.type=ka.ForStatement,this.init=a,this.test=b,this.update=c,this.body=d,this.finish(),this},finishForInStatement:function(a,b,c){return this.type=ka.ForInStatement,this.left=a,this.right=b,this.body=
c,this.each=!1,this.finish(),this},finishFunctionDeclaration:function(a,b,c,d){return this.type=ka.FunctionDeclaration,this.id=a,this.params=b,this.defaults=c,this.body=d,this.rest=null,this.generator=!1,this.expression=!1,this.finish(),this},finishFunctionExpression:function(a,b,c,d){return this.type=ka.FunctionExpression,this.id=a,this.params=b,this.defaults=c,this.body=d,this.rest=null,this.generator=!1,this.expression=!1,this.finish(),this},finishIdentifier:function(a){return this.type=ka.Identifier,
this.name=a,this.finish(),this},finishIfStatement:function(a,b,c){return this.type=ka.IfStatement,this.test=a,this.consequent=b,this.alternate=c,this.finish(),this},finishLiteral:function(a){return this.type=ka.Literal,this.value=a.value,this.raw=V.slice(a.start,a.end),a.regex&&(this.regex=a.regex),this.finish(),this},finishMemberExpression:function(a,b,c){return this.type=ka.MemberExpression,this.computed="["===a,this.object=b,this.property=c,this.finish(),this},finishObjectExpression:function(a){return this.type=
ka.ObjectExpression,this.properties=a,this.finish(),this},finishPostfixExpression:function(a,b){return this.type=ka.UpdateExpression,this.operator=a,this.argument=b,this.prefix=!1,this.finish(),this},finishProgram:function(a){return this.type=ka.Program,this.body=a,this.finish(),this},finishProperty:function(a,b,c,d,f){return this.type=ka.Property,this.key=b,this.value=c,this.kind=a,this.method=d,this.shorthand=f,this.finish(),this},finishReturnStatement:function(a){return this.type=ka.ReturnStatement,
this.argument=a,this.finish(),this},finishUnaryExpression:function(a,b){return this.type="++"===a||"--"===a?ka.UpdateExpression:ka.UnaryExpression,this.operator=a,this.argument=b,this.prefix=!0,this.finish(),this},finishVariableDeclaration:function(a,b){return this.type=ka.VariableDeclaration,this.declarations=a,this.kind=b,this.finish(),this},finishVariableDeclarator:function(a,b){return this.type=ka.VariableDeclarator,this.id=a,this.init=b,this.finish(),this}};e.version="2.0.0-dev";e.tokenize=function(a,
b){var c,d;c=String;"string"==typeof a||a instanceof String||(a=c(a));V=a;J=0;ia=0<V.length?1:0;la=0;na=V.length;da=null;ha={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};Q={};b=b||{};b.tokens=!0;Q.tokens=[];Q.tokenize=!0;Q.openParenToken=-1;Q.openCurlyToken=-1;Q.range="boolean"==typeof b.range&&b.range;Q.loc="boolean"==typeof b.loc&&b.loc;"boolean"==typeof b.comment&&b.comment&&(Q.comments=[]);"boolean"==typeof b.tolerant&&b.tolerant&&(Q.errors=[]);try{if(A(),
da.type===X.EOF)return Q.tokens;for(y();da.type!==X.EOF;)try{y()}catch(Va){if(Q.errors){Q.errors.push(Va);break}throw Va;}Oa();d=Q.tokens;"undefined"!=typeof Q.comments&&(d.comments=Q.comments);"undefined"!=typeof Q.errors&&(d.errors=Q.errors)}catch(Va){throw Va;}finally{Q={}}return d};e.parse=function(a,b){var c,d;d=String;"string"==typeof a||a instanceof String||(a=d(a));V=a;J=0;ia=0<V.length?1:0;la=0;na=V.length;da=null;ha={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,
inSwitch:!1,lastCommentStart:-1};Q={};"undefined"!=typeof b&&(Q.range="boolean"==typeof b.range&&b.range,Q.loc="boolean"==typeof b.loc&&b.loc,Q.attachComment="boolean"==typeof b.attachComment&&b.attachComment,Q.loc&&null!==b.source&&void 0!==b.source&&(Q.source=d(b.source)),"boolean"==typeof b.tokens&&b.tokens&&(Q.tokens=[]),"boolean"==typeof b.comment&&b.comment&&(Q.comments=[]),"boolean"==typeof b.tolerant&&b.tolerant&&(Q.errors=[]),Q.attachComment&&(Q.range=!0,Q.comments=[],Q.bottomRightStack=
[],Q.trailingComments=[],Q.leadingComments=[]));try{var f;u();A();f=new C;ma=!1;var e,g,k,l;for(a=[];na>J&&(g=da,g.type===X.StringLiteral)&&(e=Ea(),a.push(e),e.expression.type===ka.Literal);)k=V.slice(g.start+1,g.end-1),"use strict"===k?(ma=!0,l&&S(l,ga.StrictOctalLiteral)):!l&&g.octal&&(l=g);for(;na>J&&(e=Ea(),"undefined"!=typeof e);)a.push(e);c=f.finishProgram(a);"undefined"!=typeof Q.comments&&(c.comments=Q.comments);"undefined"!=typeof Q.tokens&&(Oa(),c.tokens=Q.tokens);"undefined"!=typeof Q.errors&&
(c.errors=Q.errors)}catch(kb){throw kb;}finally{Q={}}return c};e.Syntax=function(){var a,b={};"function"==typeof Object.create&&(b=Object.create(null));for(a in ka)ka.hasOwnProperty(a)&&(b[a]=ka[a]);return"function"==typeof Object.freeze&&Object.freeze(b),b}()})},"esri/arcade/arcadeCompiler":function(){define("require exports ../geometry/Polygon ../Graphic ../geometry/Polyline ../geometry/Point ../geometry/Extent ../geometry/Multipoint ../geometry/SpatialReference ./languageUtils ./treeAnalysis ./Dictionary ./Feature ./functions/date ./functions/string ./functions/maths ./functions/geometry ./functions/stats ./ImmutablePathArray ./ImmutablePointArray ../geometry/Geometry".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z){function y(a,b,c){try{return c(a,null,b)}catch(Z){throw Z;}}function A(a,b){try{switch(b.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return E(a,b);case "VariableDeclaration":for(var c=[],d=0;d<b.declarations.length;d++)c.push(A(a,b.declarations[d]));return c.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return C(a,b);case "FunctionDeclaration":var f=b.id.name.toLowerCase(),e={applicationCache:void 0===
a.applicationCache?null:a.applicationCache,spatialReference:a.spatialReference,console:a.console,symbols:a.symbols,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<e.depthCounter)throw Error("Exceeded maximum function depth");for(var c="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; var lscope \x3d [];\n ",g=0;g<b.params.length;g++){var k=b.params[g].name.toLowerCase(),l=S(k,a);e.localScope._SymbolsMap[k]=
l;c+="lscope['"+l+"']\x3darguments["+g.toString()+"];\n"}(c+=C(e,b.body)+"\n return lastStatement; }, runtimeCtx))",c+="\n lastStatement \x3d lc.voidOperation; \n",void 0!==a.globalScope[f])?d="gscope['"+f+"']\x3d"+c:void 0!==a.globalScope._SymbolsMap[f]?d="gscope['"+a.globalScope._SymbolsMap[f]+"']\x3d"+c:(l=S(f,a),d=(a.globalScope._SymbolsMap[f]=l,"gscope['"+l+"']\x3d"+c));return d;case "ReturnStatement":var m;m=null===b.argument?"return lc.voidOperation;":"return "+A(a,b.argument)+";";return m;
case "IfStatement":if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(n.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var h=A(a,b.test),p=M(a),u="var "+p+" \x3d "+h+";\n if ("+p+" \x3d\x3d\x3d true) {\n"+F(a,b.consequent)+"\n }\n";return u+=null!==b.alternate?"else if ("+p+"\x3d\x3d\x3dfalse)   { \n"+F(a,b.alternate)+"}\n":"else if ("+p+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n",u+="else { lang.error({type: '"+
b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":return"AssignmentExpression"===b.expression.type?"lastStatement \x3d lc.voidOperation; "+A(a,b.expression)+" \n ":"lastStatement \x3d "+A(a,b.expression)+";";case "AssignmentExpression":return D(a,b);case "UpdateExpression":return B(a,b);case "BreakStatement":return"break;";case "ContinueStatement":return"continue;";case "ForStatement":c="lastStatement \x3d lc.voidOperation; \n";null!==b.init&&(c+=A(a,b.init));
var q=M(a),r=M(a);return c+="var "+q+" \x3d true;",c+="\n do { ",null!==b.update&&(c+=" if ("+q+"\x3d\x3d\x3dfalse) {\n "+A(a,b.update)+"  \n}\n "+q+"\x3dfalse; \n"),null!==b.test&&(c+="var "+r+" \x3d "+A(a,b.test)+";",c+="if ("+r+"\x3d\x3d\x3dfalse) { break; } else if ("+r+"!\x3d\x3dtrue) { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n"),c+=A(a,b.body),null!==b.update&&(c+="\n "+A(a,b.update)),c+="\n"+q+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation;";
case "ForInStatement":var t=M(a),v=M(a),x=M(a),w="var "+t+" \x3d "+A(a,b.right)+";\n";"VariableDeclaration"===b.left.type&&(w+=A(a,b.left));var z="VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name,z=z.toLowerCase(),c="";return null!==a.localScope&&(void 0!==a.localScope[z]?c="lscope['"+z+"']":void 0!==a.localScope._SymbolsMap[z]&&(c="lscope['"+a.localScope._SymbolsMap[z]+"']")),""===c&&(void 0!==a.globalScope[z]?c="gscope['"+z+"']":void 0!==a.globalScope._SymbolsMap[z]&&
(c="gscope['"+a.globalScope._SymbolsMap[z]+"']")),w+="if ("+t+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ",w+="else if (lc.isArray("+t+") || lc.isString("+t+")) {",w+="var "+v+"\x3d"+t+".length; \n",w+="for(var "+x+"\x3d0; "+x+"\x3c"+v+"; "+x+"++) {\n",w+=c+"\x3d"+x+";\n",w+=A(a,b.body),w+="\n}\n",w+=" lastStatement \x3d lc.voidOperation; \n",w+=" \n}\n",w+="else if (lc.isImmutableArray("+t+")) {",w+="var "+v+"\x3d"+t+".length(); \n",w+="for(var "+x+"\x3d0; "+x+"\x3c"+v+"; "+x+
"++) {\n",w+=c+"\x3d"+x+";\n",w+=A(a,b.body),w+="\n}\n",w+=" lastStatement \x3d lc.voidOperation; \n",w+=" \n}\n",w+="else if (( "+t+" instanceof lang.Dictionary) || ( "+t+" instanceof lang.Feature)) {",w+="var "+v+"\x3d"+t+".keys(); \n",w+="for(var "+x+"\x3d0; "+x+"\x3c"+v+".length; "+x+"++) {\n",w+=c+"\x3d"+v+"["+x+"];\n",w+=A(a,b.body),w+="\n}\n",w+=" lastStatement \x3d lc.voidOperation; \n",w+=" \n}\n",w+="else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return K(a,b);case "MemberExpression":var y;
try{c=void 0,y=(c=!0===b.computed?A(a,b.property):"'"+b.property.name+"'","lang.member("+A(a,b.object)+","+c+")")}catch(ua){throw ua;}return y;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "ThisExpression":throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==b.callee.type)throw Error(n.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));var H=b.callee.name.toLowerCase(),d="";if(null!==a.localScope&&(void 0!==
a.localScope[H]?d="lscope['"+H+"']":void 0!==a.localScope._SymbolsMap[H]&&(d="lscope['"+a.localScope._SymbolsMap[H]+"']")),""===d&&(void 0!==a.globalScope[H]?d="gscope['"+H+"']":void 0!==a.globalScope._SymbolsMap[H]&&(d="gscope['"+a.globalScope._SymbolsMap[H]+"']")),""!==d){f="[";for(e=0;e<b.arguments.length;e++)0<e&&(f+=", "),f+=A(a,b.arguments[e]);c=(f+="]","lang.callfunc("+d+","+f+",runtimeCtx)")}else throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(ua){throw ua;}return c;case "UnaryExpression":var I;
try{I="lang.unary("+A(a,b.argument)+",'"+b.operator+"')"}catch(ua){throw ua;}return I;case "BinaryExpression":var U;try{U="lang.binary("+A(a,b.left)+","+A(a,b.right)+",'"+b.operator+"')"}catch(ua){throw ua;}return U;case "LogicalExpression":var G;try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(n.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(n.nodeErrorMessage(b.right,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===b.operator||"||"===b.operator)G="(lang.logicalCheck("+A(a,b.left)+") "+b.operator+" lang.logicalCheck("+A(a,b.right)+"))";else throw Error(n.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}catch(ua){throw ua;}return G;case "ConditionalExpression":throw Error(n.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{c=[];for(d=0;d<b.elements.length;d++)"Literal"===b.elements[d].type?c.push(A(a,b.elements[d])):
c.push("lang.aCheck("+A(a,b.elements[d])+",'ArrayExpression')");g="["+c.join(",")+"]"}catch(ua){throw ua;}return g;case "ObjectExpression":c="lang.dictionary([";for(d=0;d<b.properties.length;d++){var N=b.properties[d],L="Identifier"===N.key.type?"'"+N.key.name+"'":A(a,N.key),ba=A(a,N.value);0<d&&(c+=",");c+="lang.strCheck("+L+",'ObjectExpression'),lang.aCheck("+ba+", 'ObjectExpression')"}return c+="])";case "Property":throw Error("Should not get here");case "Array":throw Error(n.nodeErrorMessage(b,
"RUNTIME","NOTSUPPORTED"));default:throw Error(n.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(ua){throw ua;}}function B(a,b){var c=null,d="";if("MemberExpression"===b.argument.type)return c=A(a,b.argument.object),d=!0===b.argument.computed?A(a,b.argument.property):"'"+b.argument.property.name+"'","lang.memberupdate("+c+","+d+",'"+b.operator+"',"+b.prefix+")";if(c=b.argument.name.toLowerCase(),null!==a.localScope){if(void 0!==a.localScope[c])return"lang.update(lscope, '"+c+"','"+b.operator+
"',"+b.prefix+")";if(void 0!==a.localScope._SymbolsMap[c])return"lang.update(lscope, '"+a.localScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[c])return"lang.update(gscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")";throw Error("Variable not recognised");}function D(a,b){var c=A(a,b.right),d=null,f="";if("MemberExpression"===b.left.type)return d=
A(a,b.left.object),f=!0===b.left.computed?A(a,b.left.property):"'"+b.left.property.name+"'","lang.assignmember("+d+","+f+",'"+b.operator+"',"+c+");";if(d=b.left.name.toLowerCase(),null!==a.localScope){if(void 0!==a.localScope[d])return"lscope['"+d+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+d+"']); ";if(void 0!==a.localScope._SymbolsMap[d])return"lscope['"+a.localScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[d]+"']); "}if(void 0!==a.globalScope[d])return"gscope['"+
d+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+d+"']); ";if(void 0!==a.globalScope._SymbolsMap[d])return"gscope['"+a.globalScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+a.globalScope._SymbolsMap[d]+"']); ";throw Error("Variable not recognised");}function F(a,b){return"BlockStatement"===b.type?A(a,b):"ReturnStatement"===b.type?A(a,b):"BreakStatement"===b.type?A(a,b):"ContinueStatement"===b.type?A(a,b):"UpdateExpression"===b.type?"lastStatement \x3d "+A(a,b)+";":
"ExpressionStatement"===b.type?A(a,b):"ObjectExpression"===b.type?"lastStatement \x3d "+A(a,b)+";":A(a,b)}function C(a,b){for(var c="",d=0;d<b.body.length;d++)c+="ReturnStatement"===b.body[d].type?A(a,b.body[d])+" \n":"BreakStatement"===b.body[d].type?A(a,b.body[d])+" \n":"ContinueStatement"===b.body[d].type?A(a,b.body[d])+" \n":"UpdateExpression"===b.body[d].type?"lastStatement \x3d "+A(a,b.body[d])+"; \n":"ObjectExpression"===b.body[d].type?"lastStatement \x3d "+A(a,b.body[d])+"; \n":A(a,b.body[d])+
" \n";return c}function E(a,b){var c=null===b.init?null:A(a,b.init);c===g.voidOperation&&(c=null);b=b.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[b])return"lscope['"+b+"']\x3d"+c+";";if(void 0!==a.localScope._SymbolsMap[b])return"lscope['"+a.localScope._SymbolsMap[b]+"']\x3d"+c+";";var d=S(b,a);return a.localScope._SymbolsMap[b]=d,"lscope['"+d+"']\x3d"+c+";"}if(void 0!==a.globalScope[b])return"gscope['"+b+"']\x3d"+c+";";if(void 0!==a.globalScope._SymbolsMap[b])return"gscope['"+
a.globalScope._SymbolsMap[b]+"']\x3d"+c+";";d=S(b,a);return a.globalScope._SymbolsMap[b]=d,"gscope['"+d+"']\x3d"+c+";"}function G(a,b,c){switch(b=b.toLowerCase()){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(c=!1),c&&(P++,a.spatialReference._arcadeCacheId=P,b=P)),a=new u({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),
void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=g.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(P++,b=P,g.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new f(a.rings,a.spatialReference,
!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=g.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(P++,b=P,g.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new f(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=
g.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(P++,b=P,g.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new p(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(n.nodeErrorMessage(c,"RUNTIME","PROPERTYNOTFOUND"));}function K(a,b){try{var c=b.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+c+"']";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+
a.localScope._SymbolsMap[c]+"']"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']";throw Error(n.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(Z){throw Z;}}function L(a){return null===a?"":g.isArray(a)?"Array":g.isImmutableArray(a)?"Array":g.isDate(a)?"Date":g.isString(a)?"String":g.isBoolean(a)?"Boolean":g.isNumber(a)?"Number":a instanceof u?"Dictionary":a instanceof r?"Feature":a instanceof
c?"Point":a instanceof d?"Polygon":a instanceof b?"Polyline":a instanceof k?"Multipoint":a instanceof m?"Extent":g.isFunctionParameter(a)?"Function":a===g.voidOperation?"":"number"==typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function H(a,b,c,d){try{if(g.equalityTest(b[c],d))return b[c+1];var f=b.length-c;return 1===f?b[c]:2===f?null:3===f?b[c+2]:H(a,b,c+2,d)}catch(ja){throw ja;}}function I(a,b,c,d){try{if(!0===d)return b[c+1];if(3===b.length-c)return b[c+2];var f=b[c+2];if(!1===g.isBoolean(f))throw Error("WHEN needs boolean test conditions");
return I(a,b,c+2,f)}catch(ja){throw ja;}}function N(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)b=[];else if(1===c)b=[a[0]];else{var f=N(a.slice(0,d),b);a=N(a.slice(d,c),b);for(c=[];0<f.length||0<a.length;)0<f.length&&0<a.length?(d=b(f[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(f[0]),f=f.slice(1)):(c.push(a[0]),a=a.slice(1))):0<f.length?(c.push(f[0]),f=f.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));b=c}return b}function S(a,b){return b.symbols.symbolCounter++,"_T"+b.symbols.symbolCounter.toString()}
function M(a){return a.symbols.symbolCounter++,"_Tvar"+a.symbols.symbolCounter.toString()}function ca(a,b,c){var d={};a||(a={});c||(c={});d._SymbolsMap={};d.textformatting=1;d.infinity=1;d.pi=1;for(var f in b)d[f]=1;for(f in c)d[f]=1;for(f in a)d[f]=1;return d}function O(a){console.log(a)}Object.defineProperty(h,"__esModule",{value:!0});var P=0,W={};t.registerFunctions(W,y);w.registerFunctions(W,y);q.registerFunctions(W,y);v.registerFunctions(W,y);x.registerFunctions(W,y);W["typeof"]=function(a,b){return y(a,
b,function(a,b,c){g.pcCheck(c,1,1);a=L(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};W.iif=function(a,b){try{return y(a,b,function(a,b,c){if(g.pcCheck(c,3,3),!1===g.isBoolean(c[0]))throw Error("IF Function must have a boolean test condition");return c[0]?c[1]:c[2]})}catch(ea){throw ea;}};W.decode=function(a,b){try{return y(a,b,function(b,c,d){if(2>d.length)throw Error("Missing Parameters");if(2===d.length)return d[1];if(0===(d.length-1)%2)throw Error("Must have a default value result.");
return H(a,d,1,d[0])})}catch(ea){throw ea;}};W.when=function(a,b){try{return y(a,b,function(b,c,d){if(3>d.length)throw Error("Missing Parameters");if(0===d.length%2)throw Error("Must have a default value result.");b=d[0];if(!1===g.isBoolean(b))throw Error("WHEN needs boolean test conditions");return I(a,d,0,b)})}catch(ea){throw ea;}};W.top=function(a,b){return y(a,b,function(a,b,c){if(g.pcCheck(c,2,2),g.isArray(c[0]))return g.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));
if(g.isImmutableArray(c[0]))return g.toNumber(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};W.first=function(a,b){return y(a,b,function(a,b,c){return g.pcCheck(c,1,1),g.isArray(c[0])?0===c[0].length?null:c[0][0]:g.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};W.sort=function(a,b){return y(a,b,function(a,b,c){g.pcCheck(c,1,2);b=c[0];if(g.isImmutableArray(b)&&(b=b.toArray()),!1===g.isArray(b))throw Error("Illegal Argument");
if(1<c.length){if(!1===g.isFunctionParameter(c[1]))throw Error("Illegal Argument");return b=N(b,function(b,d){return T.callfunc(c[1],[b,d],a)})}if(0===b.length)return[];for(var d={},f=0;f<b.length;f++){var e=L(b[f]);""!==e&&(d[e]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return b.slice(0);var f=0,e="",k;for(k in d)f++,e=k;return b=1<f||"String"===e?N(b,function(a,b){if(null===a||void 0===
a||a===g.voidOperation)return null===b||void 0===b||b===g.voidOperation?0:1;if(null===b||void 0===b||b===g.voidOperation)return-1;a=g.toString(a);b=g.toString(b);return b>a?-1:a===b?0:1}):"Number"===e?N(b,function(a,b){return a-b}):"Boolean"===e?N(b,function(a,b){return a===b?0:b?-1:1}):"Date"===e?N(b,function(a,b){return b-a}):b.slice(0)})};for(var aa in W)W[aa]=new g.NativeFunction(W[aa]);var R=function(){};R.prototype=W;h.functionHelper={fixSpatialReference:g.fixSpatialReference,parseArguments:function(a,
b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(A(a,b.arguments[d]));return c},standardFunction:y};h.executeScript=function(a,b,c){return a(b,c)};h.extractFieldLiterals=function(a,b){return void 0===b&&(b=!1),n.findFieldLiterals(a,b)};h.validateScript=function(a,b){return n.validateScript(a,b,"simple")};h.referencesMember=function(a,b){return n.referencesMember(a,b)};h.referencesFunction=function(a,b){return n.referencesFunction(a,b)};var T={error:function(a,b,c){throw Error(n.nodeErrorMessage(a,
b,c));},functionDepthchecker:function(a,b){return function(){if(b.depthCounte++,64<b.depthCounter)throw Error("Exceeded maximum function depth");var c=a.apply(this,arguments);return b.depthCounte--,c}},aCheck:function(a,b){if(g.isFunctionParameter(a))throw Error(n.nodeErrorMessage({type:b},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===g.voidOperation?null:a},Dictionary:u,Feature:r,dictionary:function(a){for(var b={},c=0;c<a.length;c+=2){if(g.isFunctionParameter(a[c+1]))throw Error("Illegal Argument");
if(!1===g.isString(a[c]))throw Error("Illegal Argument");a[c+1]===g.voidOperation?b[a[c].toString()]=null:b[a[c].toString()]=a[c+1]}a=new u(b);return a.immutable=!1,a},strCheck:function(a,b){if(!1===g.isString(a))throw Error("Illegal Argument");return a},unary:function(a,b){if(g.isBoolean(a)){if("!"===b)return!a;if("-"===b)return-1*g.toNumber(a);if("+"===b)return 1*g.toNumber(a);throw Error(n.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b)return-1*g.toNumber(a);
if("+"===b)return 1*g.toNumber(a);throw Error(n.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===g.isBoolean(a))throw Error(n.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));return a},logical:function(a,b,c){if(!g.isBoolean(a)||!g.isBoolean(b))throw Error(n.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));switch(c){case "||":return a||b;case "\x26\x26":return a&&b;default:throw Error(n.nodeErrorMessage("LogicalExpression",
"RUNTIME","ONLYORORAND"));}},binary:function(a,b,c){switch(c){case "\x3d\x3d":return g.equalityTest(a,b);case "\x3d":return g.equalityTest(a,b);case "!\x3d":return!g.equalityTest(a,b);case "\x3c":return g.greaterThanLessThan(a,b,c);case "\x3e":return g.greaterThanLessThan(a,b,c);case "\x3c\x3d":return g.greaterThanLessThan(a,b,c);case "\x3e\x3d":return g.greaterThanLessThan(a,b,c);case "+":return g.isString(a)||g.isString(b)?g.toString(a)+g.toString(b):g.toNumber(a)+g.toNumber(b);case "-":return g.toNumber(a)-
g.toNumber(b);case "*":return g.toNumber(a)*g.toNumber(b);case "/":return g.toNumber(a)/g.toNumber(b);case "%":return g.toNumber(a)%g.toNumber(b);default:throw Error(n.nodeErrorMessage({type:"BinaryExpression"},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(a,b,c){switch(b){case "\x3d":return a===g.voidOperation?null:a;case "/\x3d":return g.toNumber(c)/g.toNumber(a);case "*\x3d":return g.toNumber(c)*g.toNumber(a);case "-\x3d":return g.toNumber(c)-g.toNumber(a);case "+\x3d":return g.isString(c)||
g.isString(a)?g.toString(c)+g.toString(a):g.toNumber(c)+g.toNumber(a);case "%\x3d":return g.toNumber(c)%g.toNumber(a);default:throw Error(n.nodeErrorMessage("AssignmentExpression","RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,b,c,d){var f=g.toNumber(a[b]);return a[b]="++"===c?f+1:f-1,!1===d?f:"++"===c?f+1:f-1},memberupdate:function(a,b,c,d){var f;if(g.isArray(a)){if(!g.isNumber(b))throw Error("Invalid Parameter");if(0>b&&(b=a.length+b),0>b||b>=a.length)throw Error("Assignment outside of array bounds");
f=g.toNumber(a[b]);a[b]="++"===c?f+1:f-1}else{if(a instanceof u){if(!1===g.isString(b))throw Error("Dictionary accessor must be a string");}else{if(!(a instanceof r))throw g.isImmutableArray(a)?Error("Array is Immutable"):Error("Invalid Parameter");if(!1===g.isString(b))throw Error("Feature accessor must be a string");}if(!0!==a.hasField(b))throw Error("Invalid Parameter");f=g.toNumber(a.field(b));a.setField(b,"++"===c?f+1:f-1)}return!1===d?f:"++"===c?f+1:f-1},assignmember:function(a,b,c,d){if(g.isArray(a)){if(!g.isNumber(b))throw Error("Invalid Parameter");
if(0>b&&(b=a.length+b),0>b||b>a.length)throw Error("Assignment outside of array bounds");if(b===a.length&&"\x3d"!==c)throw Error("Invalid Parameter");a[b]=this.assign(d,c,a[b])}else{if(a instanceof u){if(!1===g.isString(b))throw Error("Dictionary accessor must be a string");}else{if(!(a instanceof r))throw g.isImmutableArray(a)?Error("Array is Immutable"):Error("Invalid Parameter");if(!1===g.isString(b))throw Error("Feature accessor must be a string");}if(!0===a.hasField(b))a.setField(b,this.assign(d,
c,a.field(b)));else{if("\x3d"!==c)throw Error("Invalid Parameter");a.setField(b,this.assign(d,c,null))}}},member:function(a,b){if(null===a)throw Error(n.nodeErrorMessage("MemberExpression","RUNTIME","NOTFOUND"));if(a instanceof u||a instanceof r){if(g.isString(b))return a.field(b);throw Error(n.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));}if(a instanceof z){if(g.isString(b))return G(a,b,"MemberExpression");throw Error(n.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));
}if(g.isArray(a)){if(g.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){if(0>b&&(b=a.length+b),b>=a.length||0>b)throw Error(n.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[b]}throw Error(n.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));}if(g.isString(a)){if(g.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){if(0>b&&(b=a.length+b),b>=a.length||0>b)throw Error(n.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[b]}throw Error(n.nodeErrorMessage("MemberExpression",
"RUNTIME","INVALIDTYPE"));}if(g.isImmutableArray(a)&&g.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){if(0>b&&(b=a.length()+b),b>=a.length()||0>b)throw Error(n.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a.get(b)}throw Error(n.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));},callfunc:function(a,b,c){return a instanceof g.NativeFunction?a.fn(c,b):a instanceof g.SizzleFunction?a.fn.apply(this,b):a.apply(this,b)}};h.compileScript=function(b,c){void 0===c&&(c=null);
null===c&&(c={vars:{},customfunctions:{}});c={globalScope:ca(c.vars,W,c.customfunctions),localScope:null,console:O,symbols:{symbolCounter:0}};b=A(c,b.body[0].body);""===b&&(b="lc.voidOperation;");c={lc:g,lang:T,postProcess:function(a){if(a instanceof g.ReturnResult&&(a=a.value),a instanceof g.ImplicitResult&&(a=a.value),a===g.voidOperation&&(a=null),a===g.breakResult)throw Error("Cannot return BREAK");if(a===g.continueResult)throw Error("Cannot return CONTINUE");if(g.isFunctionParameter(a))throw Error("Cannot return FUNCTION");
return a},prepare:function(b,c){c||(c=new l(102100));var d=b.vars,f=b.customfunctions,e=new R;d||(d={});f||(f={});var g=new u({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});g.immutable=!1;e._SymbolsMap={textformatting:1,infinity:1,pi:1};e.textformatting=g;e.infinity=Number.POSITIVE_INFINITY;e.pi=Math.PI;for(var k in f)e[k]=f[k],e._SymbolsMap[k]=1;for(k in d)e._SymbolsMap[k]=1,d[k]instanceof a?e[k]=new r(d[k]):e[k]=d[k];return{spatialReference:c,globalScope:e,
localScope:null,console:b.console?b.console:O,symbols:{symbolCounter:0},depthCounter:1,applicationCache:void 0===b.applicationCache?null:b.applicationCache}}};return(new Function("context","spatialReference","var runtimeCtx\x3dthis.prepare(context, spatialReference);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+b+"\n return lastStatement; } \n return this.postProcess(mainBody());")).bind(c)}})},
"dojox/html/entities":function(){define(["dojo/_base/lang"],function(e){var h=e.getObject("dojox.html.entities",!0),d=function(a,c){var b,d;if(c._encCache&&c._encCache.regexp&&c._encCache.mapper&&c.length==c._encCache.length)b=c._encCache.mapper,d=c._encCache.regexp;else{b={};d=["["];var e;for(e=0;e<c.length;e++)b[c[e][0]]="\x26"+c[e][1]+";",d.push(c[e][0]);d.push("]");d=new RegExp(d.join(""),"g");c._encCache={mapper:b,regexp:d,length:c.length}}return a=a.replace(d,function(a){return b[a]})},a=function(a,
c){var b,d;if(c._decCache&&c._decCache.regexp&&c._decCache.mapper&&c.length==c._decCache.length)b=c._decCache.mapper,d=c._decCache.regexp;else{b={};d=["("];var e;for(e=0;e<c.length;e++){var g="\x26"+c[e][1]+";";e&&d.push("|");b[g]=c[e][0];d.push(g)}d.push(")");d=new RegExp(d.join(""),"g");c._decCache={mapper:b,regexp:d,length:c.length}}return a=a.replace(d,function(a){return b[a]})};h.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];h.latin=[["\u00a1","iexcl"],["\u00a2",
"cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],
["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],
["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1",
"ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],
["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],
["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],
["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],
["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665",
"hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039",
"lsaquo"],["\u203a","rsaquo"]];h.encode=function(a,c){a&&(c?a=d(a,c):(a=d(a,h.html),a=d(a,h.latin)));return a};h.decode=function(b,c){b&&(c?b=a(b,c):(b=a(b,h.html),b=a(b,h.latin)));return b};return h})},"esri/widgets/Popup/nls/PopupRenderer":function(){define({root:{attach:"Attachments",fields:"Fields",fieldsSummary:"List of attributes and values",media:"Media",next:"Next",numCharts:"Number of charts",numImages:"Number of images",noTitle:"Untitled",previous:"Previous",view:"View"},ar:1,bs:1,cs:1,
da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,hr:1,he:1,hi:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/widgets/Spinner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./support/widget ../core/accessorSupport/decorators ./Widget ../core/promiseUtils ../core/watchUtils ./support/AnchorElementViewModel".split(" "),function(e,h,d,a,b,c,m,k,l,g){e=function(a){function c(b){b=
a.call(this)||this;return b._animationDelay=500,b._animationPromise=null,b.location=null,b.view=null,b.visible=!1,b.viewModel=new g,b}return d(c,a),c.prototype.postInitialize=function(){var a=this;this.own([l.watch(this,"visible",function(b){return a._visibleChange(b)})])},c.prototype.destroy=function(){this._cancelAnimationPromise()},c.prototype.show=function(a){var b=this,c=a.location;a=a.promise;c&&(this.viewModel.location=c);this.visible=!0;a&&a.always(function(){return b.hide()})},c.prototype.hide=
function(){this.visible=!1},c.prototype.render=function(){var a=this.visible,c=!!this.viewModel.screenLocation,a=(d={},d["esri-spinner--start"]=a&&c,d["esri-spinner--finish"]=!a&&c,d),d=this._getPositionStyles();return b.tsx("div",{"class":"esri-spinner",classes:a,styles:d});var d},c.prototype._cancelAnimationPromise=function(){this._animationPromise&&(this._animationPromise.cancel(),this._animationPromise=null)},c.prototype._visibleChange=function(a){var b=this;return a?void(this.viewModel.screenLocationEnabled=
!0):(this._cancelAnimationPromise(),void(this._animationPromise=k.after(this._animationDelay).then(function(){b.viewModel.screenLocationEnabled=!1;b._animationPromise=null})))},c.prototype._getPositionStyles=function(){var a=this.viewModel.screenLocation;return a?{left:a.x+"px",top:a.y+"px"}:{}},c}(c.declared(m));return a([c.aliasOf("viewModel.location")],e.prototype,"location",void 0),a([c.aliasOf("viewModel.view")],e.prototype,"view",void 0),a([c.property(),b.renderable()],e.prototype,"visible",
void 0),a([c.property({type:g}),b.renderable(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],e.prototype,"viewModel",void 0),e=a([c.subclass("esri.widgets.Spinner")],e)})},"esri/widgets/support/AnchorElementViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ../../core/Accessor ../../core/Evented ../../core/HandleRegistry ../../core/watchUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g){e=function(a){function b(){var b=a.call(this)||this;return b._handles=new l,b.location=null,b.screenLocation=null,b.screenLocationEnabled=!1,b.view=null,b._handles.add([g.watch(b,"screenLocationEnabled,location",function(){return b._updateScreenPointAndHandle()}),g.watch(b,"view, view.ready",function(){return b._wireUpView()})]),b}return d(b,a),b.prototype.destroy=function(){this.view=null;this._handles.destroy();this._viewpointHandle=this._handles=null},b.prototype._wireUpView=
function(){var a=this;this._handles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var b=this.view,b=c.pausable(b,"3d"===b.type?"camera":"viewpoint",function(){return a._viewpointChange()});this._handles.add(b,"view");this._viewpointHandle=b;this._toggleWatchingViewpoint()}},b.prototype._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")},b.prototype._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()},
b.prototype._toggleWatchingViewpoint=function(){var a=this._viewpointHandle,b=this.location,c=this.screenLocationEnabled;a&&(b&&c?a.resume():a.pause())},b.prototype._setScreenLocation=function(){var a=this.location,b=this.view,c=this.screenLocationEnabled,d=this.get("view.ready"),a=c&&a&&d?b.toScreen(a.x,a.y,a.z):null;this._set("screenLocation",a)},b}(b.declared(m,k));return a([b.property()],e.prototype,"location",void 0),a([b.property({readOnly:!0})],e.prototype,"screenLocation",void 0),a([b.property()],
e.prototype,"screenLocationEnabled",void 0),a([b.property()],e.prototype,"view",void 0),e=a([b.subclass("esri.widgets.support.AnchorElementViewModel")],e)})},"esri/views/PopupManager":function(){define("require ../core/promiseUtils dojo/_base/array dojo/on dojo/Deferred dojo/promise/all ../layers/support/layerUtils ../geometry/support/scaleUtils ../geometry/Extent ../tasks/support/Query ../layers/GroupLayer ../core/Accessor".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u){var r;return u.createSubclass({declaredClass:"esri.views.PopupManager",
properties:{map:{dependsOn:["view.map"],readOnly:!0}},constructor:function(){this._featureLayersCache={}},destroy:function(){this._featureLayersCache={};this.view=null},_clickHandle:null,_featureLayersCache:null,enabled:!1,_enabledSetter:function(a){this._clickHandle&&(a?this._clickHandle.resume():this._clickHandle.pause());this._set("enabled",a)},_mapGetter:function(){return this.get("view.map")||null},view:null,_viewSetter:function(b){this._clickHandle&&(this._clickHandle.remove(),this._clickHandle=
null);b&&(this._clickHandle=a.pausable(b,"click",this._clickHandler.bind(this)),this.enabled||this._clickHandle.pause());this._set("view",b)},getMapLayer:function(a){var b;if(a&&(b=a.findLayerById())&&(a=b.id,this._featureLayersCache[a])){var c=a.lastIndexOf("_");-1<c&&(a=a.substring(0,c),b=this.map.findLayerById(a))}return b},_closePopup:function(){var a=this.get("view.popup");a&&(a.clear(),a.close())},_showPopup:function(a,c){function e(a){return f.allLayerViews.find(function(b){return b.layer===
a})}function m(a){if(null==a)return!1;var b=e(a);return null==b?!1:a.loaded&&!b.suspended&&(a.popupEnabled&&a.popupTemplate||"graphics"===a.type||b.getPopupData)}function u(a){return(a=e(a))&&a.hasDraped}var f=this.view,p=f.popup,t=this,r=[],w="3d"===f.type;if(d.forEach(this.map.layers.toArray(),function(a){a.isInstanceOf(n)?d.forEach(a.layers.toArray(),function(a){!m(a)||w&&!u(a)||r.push(a)}):!m(a)||w&&!u(a)||r.push(a)}),0<f.graphics.length&&r.push(f.graphics),!c||c.popupTemplate||m(c.layer)||(c=
null),!r.length&&!c)return void t._closePopup();var B=[],D=!!c,F=t._calculateClickTolerance(r),C=a.mapPoint;if(!C)return void t._closePopup();var E=1;f.state&&(E=f.state.resolution);var G=f.basemapTerrain;G&&G.overlayManager&&(E=G.overlayManager.overlayPixelSizeInMapUnits(C));F*=E;G&&!G.spatialReference.equals(f.spatialReference)&&(F*=k.getUnitValueForSR(G.spatialReference)/k.getUnitValueForSR(f.spatialReference));var G=C.clone().offset(-F,-F),C=C.clone().offset(F,F),K=new l(Math.min(G.x,C.x),Math.min(G.y,
C.y),Math.max(G.x,C.x),Math.max(G.y,C.y),f.spatialReference),C=function(b){var d;if("imagery"===b.type){d=new g;d.geometry=a.mapPoint;var f=e(b),k={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0};k.layerView=f;d=b.queryVisibleRasters(d,k).then(function(a){return D=D||0<a.length,a})}else if("csv"===b.type||!t._featureLayersCache[b.id]&&"function"!=typeof b.queryFeatures){if("map-image"===b.type)return f=e(b),f.getPopupData(K);var l,m=[];"esri.core.Collection\x3cesri.Graphic\x3e"===
b.declaredClass?(k=b,l=!0):"graphics"===b.type?(k=b.graphics,l=!0):(f=e(b),k=f&&f.loadedGraphics,l=!1);k&&(m=k.filter(function(a){return a&&(!l||a.popupTemplate)&&a.visible&&K.intersects(a.geometry)}).toArray());0<m.length&&(D=!0,d="scene"===b.type?t._fetchSceneAttributes(b,m):h.resolve(m))}else f=b.createQuery(),f.geometry=K,d=b.queryFeatures(f).then(function(a){a=a.features;if(c&&c.layer===b&&b.objectIdField){var d=b.objectIdField,f=c.attributes[d];a=a.filter(function(a){return a.attributes[d]!==
f})}return D=D||0<a.length,a});return d};if(w&&!c||!w)var B=r.map(C).filter(function(a){return!!a}),L=function(a){return a.reduce(function(a,b){return a.concat(b.items?L(b.items):b)},[])},B=L(B);c&&(c.layer&&"scene"===c.layer.type?B.unshift(this._fetchSceneAttributes(c.layer,[c])):c.getEffectivePopupTemplate()&&(C=new b,B.unshift(C.resolve([c]))));return d.some(B,function(a){return!a.isFulfilled()})||D?void(B.length&&p.open({promises:B,location:a.mapPoint})):void t._closePopup()},_fetchSceneAttributes:function(a,
b){return this.view.whenLayerView(a).then(function(c){var d=this._getOutFields(a.popupTemplate),e=b.map(function(a){return c.whenGraphicAttributes(a,d).otherwise(function(){return a})});return h.eachAlways(e)}.bind(this)).then(function(a){return a.map(function(a){return a.value})})},_getSubLayerFeatureLayers:function(g,k){var l=k||new b,h=[];k=g.length;var n=Math.floor(this.view.extent.width/this.view.width),f=this.view.scale,p=!1,u=this,t=0;a:for(;k>t;t++){var w=g[t],B=w.dynamicLayerInfos||w.layerInfos;
if(B){var D=null;w._params&&(w._params.layers||w._params.dynamicLayers)&&(D=w.visibleLayers);for(var D=m._getVisibleLayers(B,D),F=m._getLayersForScale(f,B),C=B.length,E=0;C>E;E++){var G=B[E],K=G.id,L=w.popupTemplates[K];if(!G.subLayerIds&&L&&L.popupTemplate&&-1<d.indexOf(D,K)&&-1<d.indexOf(F,K)){if(!r){p=!0;break a}var H=w.id+"_"+K,I=this._featureLayersCache[H];I&&I.loadError||(I||((I=L.layerUrl)||(I=G.source?this._getLayerUrl(w.url,"/dynamicLayer"):this._getLayerUrl(w.url,K)),I=new r(I,{id:H,drawMode:!1,
mode:r.MODE_SELECTION,outFields:this._getOutFields(L.popupTemplate),resourceInfo:L.resourceInfo,source:G.source}),this._featureLayersCache[H]=I),I.setDefinitionExpression(w.layerDefinitions&&w.layerDefinitions[K]),I.setGDBVersion(w.gdbVersion),I.popupTemplate=L.popupTemplate,I.setMaxAllowableOffset(n),I.setUseMapTime(!!w.useMapTime),w.layerDrawingOptions&&w.layerDrawingOptions[K]&&w.layerDrawingOptions[K].renderer&&I.setRenderer(w.layerDrawingOptions[K].renderer),h.push(I))}}}}if(p){var N=new b;e(["../layers/FeatureLayer"],
function(a){r=a;N.resolve()});N.then(function(){u._getSubLayerFeatureLayers(g,l)})}else{var S=[];d.forEach(h,function(c){if(!c.loaded){var d=new b;a.once(c,"load, error",function(){d.resolve()});S.push(d.promise)}});S.length?c(S).then(function(){h=d.filter(h,function(a){return!a.loadError&&a.isVisibleAtScale(f)});l.resolve(h)}):(h=d.filter(h,function(a){return a.isVisibleAtScale(f)}),l.resolve(h))}return l.promise},_getLayerUrl:function(a,b){var c=a.indexOf("?");return-1===c?a+"/"+b:a.substring(0,
c)+"/"+b+a.substring(c)},_getOutFields:function(a){var b;return"esri.PopupTemplate"===a.declaredClass&&a.fieldInfos?(b=[],d.forEach(a.fieldInfos,function(a){var c=a.fieldName&&a.fieldName.toLowerCase();c&&"shape"!==c&&0!==c.indexOf("relationships/")&&b.push(a.fieldName)})):b=["*"],b},_calculateClickTolerance:function(a){var b=6;return d.forEach(a,function(a){if(a=a.renderer)"simple"===a.type?((a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset))),a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))):
"uniqueValue"!==a.type&&"classBreaks"!==a.type||d.forEach(a.uniqueValueInfos||a.classBreakInfos,function(a){(a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset)));a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))})}),b},_clickHandler:function(a){function b(a){return c.allLayerViews.find(function(b){return b.layer===a})}var c=this.view,d=c.popup,e=c.map,f=a.screenPoint,g=this;if(0===a.button&&d&&c.ready){var k="3d"===c.type,l=e.allLayers.some(function(a){if(a.isInstanceOf(n))a=!1;else{var c;
null==a?c=!1:(c=b(a),c=null==c?!1:a.loaded&&!c.suspended&&(a.popupEnabled&&a.popupTemplate||"graphics"===a.type||c.getPopupData));!(c=!c)&&(c=k)&&(a=b(a),c=!(a&&a.hasDraped));a=c?!1:!0}return a});return null!=f?void this.view.hitTest(f.x,f.y).then(function(b){l||0<b.results.length?g._showPopup(a,0<b.results.length?b.results[0].graphic:null):g._closePopup()}):void g._showPopup(a)}}})})},"esri/layers/support/layerUtils":function(){define(["dojo/_base/array"],function(e){return{_serializeLayerDefinitions:function(h){var d=
[],a=!1,b=/[:;]/;if(h&&(e.forEach(h,function(c,e){c&&(d.push([e,c]),!a&&b.test(c)&&(a=!0))}),0<d.length)){var c;return a?(c={},e.forEach(d,function(a){c[a[0]]=a[1]}),c=JSON.stringify(c)):(c=[],e.forEach(d,function(a){c.push(a[0]+":"+a[1])}),c=c.join(";")),c}return null},_serializeTimeOptions:function(h,d){if(h){var a=[];return e.forEach(h,function(b,c){b&&(b=b.toJSON(),d&&-1!==e.indexOf(d,c)&&(b.useTime=!1),a.push('"'+c+'":'+JSON.stringify(b)))}),a.length?"{"+a.join(",")+"}":void 0}},_getVisibleLayers:function(h,
d){var a,b,c=[];if(!h)return c;if(d)for(c=d.concat(),b=0;b<h.length;b++)d=h[b],a=e.indexOf(h,d.id),d.subLayerIds&&-1<a&&(c.splice(a,1),c=c.concat(d.subLayerIds));else c=this._getDefaultVisibleLayers(h);return c},_getDefaultVisibleLayers:function(h){var d,a=[];if(!h)return a;for(d=0;d<h.length;d++)0<=h[d].parentLayerId&&-1===e.indexOf(a,h[d].parentLayerId)&&e.some(h,function(a){return a.id===h[d].parentLayerId})||h[d].defaultVisibility&&a.push(h[d].id);return a},_getLayersForScale:function(h,d){var a=
[];if(0<h&&d){var b;for(b=0;b<d.length;b++)if(!(0<=d[b].parentLayerId&&-1===e.indexOf(a,d[b].parentLayerId)&&e.some(d,function(a){return a.id===d[b].parentLayerId}))&&0<=d[b].id){var c=!0,m=d[b].maxScale,k=d[b].minScale;(0<m||0<k)&&(0<m&&0<k?c=h>=m&&k>=h:0<m?c=h>=m:0<k&&(c=k>=h));c&&a.push(d[b].id)}}return a}}})},"esri/layers/GroupLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Layer ../core/MultiOriginJSONSupport ./mixins/PortalLayer ./mixins/OperationalLayer ../support/LayersMixin ../core/accessorSupport/utils ../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){e=function(a){function b(b){b=a.call(this)||this;return b._visibilityHandles={},b.fullExtent=void 0,b.operationalLayerType="GroupLayer",b.spatialReference=void 0,b.type="group",b._visibilityWatcher=b._visibilityWatcher.bind(b),b}return d(b,a),b.prototype.initialize=function(){this._enforceVisibility(this.visibilityMode,this.visible);this.watch("visible",this._visibleWatcher.bind(this),!0)},b.prototype._writeLayers=function(a,b,c,d){var e=[];return a?(a.forEach(function(a){a.write&&
(a=a.write(null,d))&&a.layerType&&e.push(a)}),void(b.layers=e)):e},Object.defineProperty(b.prototype,"visibilityMode",{set:function(a){var b=this._get("visibilityMode")!==a;this._set("visibilityMode",a);b&&this._enforceVisibility(a,this.visible)},enumerable:!0,configurable:!0}),b.prototype.load=function(){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]})),this},b.prototype.layerAdded=function(a,b){a.visible&&"exclusive"===
this.visibilityMode?this._turnOffOtherLayers(a):"inherited"===this.visibilityMode&&(a.visible=this.visible);this._visibilityHandles[a.uid]=a.watch("visible",this._visibilityWatcher,!0)},b.prototype.layerRemoved=function(a,b){(b=this._visibilityHandles[a.uid])&&(b.remove(),delete this._visibilityHandles[a.uid]);this._enforceVisibility(this.visibilityMode,this.visible)},b.prototype._turnOffOtherLayers=function(a){this.layers.forEach(function(b){b!==a&&(b.visible=!1)})},b.prototype._enforceVisibility=
function(a,b){if(g.getProperties(this).initialized){var c=this.layers,d=c.find(function(a){return a.visible});switch(a){case "exclusive":c.length&&!d&&(d=c.getItemAt(0),d.visible=!0);this._turnOffOtherLayers(d);break;case "inherited":c.forEach(function(a){a.visible=b})}}},b.prototype._visibleWatcher=function(a){"inherited"===this.visibilityMode&&this.layers.forEach(function(b){b.visible=a})},b.prototype._visibilityWatcher=function(a,b,c,d){switch(this.visibilityMode){case "exclusive":a?this._turnOffOtherLayers(d):
this._isAnyLayerVisible()||(d.visible=!0);break;case "inherited":d.visible=this.visible}},b.prototype._isAnyLayerVisible=function(){return this.layers.some(function(a){return a.visible})},b}(n.declared(b,l,c,k,m));return a([n.shared({"2d":"../views/layers/GroupLayerView","3d":"../views/layers/GroupLayerView"})],e.prototype,"viewModulePaths",void 0),a([n.property()],e.prototype,"fullExtent",void 0),a([n.property({json:{read:!1,write:{ignoreOrigin:!0}}})],e.prototype,"layers",void 0),a([n.writer("layers")],
e.prototype,"_writeLayers",null),a([n.property()],e.prototype,"operationalLayerType",void 0),a([n.property({json:{write:!1}})],e.prototype,"portalItem",void 0),a([n.property()],e.prototype,"spatialReference",void 0),a([n.property({json:{read:!1},readOnly:!0,value:"group"})],e.prototype,"type",void 0),a([n.property({json:{read:!1,write:!1}})],e.prototype,"url",void 0),a([n.property({value:"independent",json:{write:!0}})],e.prototype,"visibilityMode",null),e=a([n.subclass("esri.layers.GroupLayer")],
e)})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ./UI ./Component ../../widgets/Attribution ../../widgets/Compass ../../widgets/Zoom ../../widgets/NavigationToggle dojo/dom-geometry".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u,r){e=function(a){function b(b){b=a.call(this)||this;return b._defaultPositionLookup=null,b.components=[],b}return d(b,
a),b.prototype.initialize=function(){this._handles.add([c.init(this,"components",this._componentsWatcher.bind(this)),c.init(this,"view",this._updateViewAwareWidgets.bind(this))])},b.prototype._findComponentPosition=function(a){if(!this._defaultPositionLookup){var b=r.isBodyLtr();this._defaultPositionLookup={attribution:"manual",compass:b?"top-left":"top-right","navigation-toggle":b?"top-left":"top-right",zoom:b?"top-left":"top-right"}}return this._defaultPositionLookup[a]},b.prototype._removeComponents=
function(a){var b=this;a.forEach(function(a){(a=b.find(a))&&(b.remove(a),a.destroy())})},b.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b.find(c))&&c.widget)&&void 0!==c.view&&c.set("view",a)})},b.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a)},b.prototype._addComponents=function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),b._findComponentPosition(a))})},
b.prototype._createComponent=function(a){var b=this._createWidget(a);return b?new k({id:a,node:b}):void 0},b.prototype._createWidget=function(a){return"attribution"===a?this._createAttribution():"compass"===a?this._createCompass():"navigation-toggle"===a?this._createNavigationToggle():"zoom"===a?this._createZoom():void 0},b.prototype._createAttribution=function(){return new l({view:this.view})},b.prototype._createCompass=function(){return new g({view:this.view})},b.prototype._createNavigationToggle=
function(){return new u({view:this.view})},b.prototype._createZoom=function(){return new n({view:this.view})},b}(b.declared(m));return a([b.property()],e.prototype,"components",void 0),e=a([b.subclass("esri.views.ui.DefaultUI")],e)})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Component ../../core/Accessor ../../core/HandleRegistry ../../core/watchUtils dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r){function t(a){return"object"!=typeof a||a&&a.isInstanceOf&&a.isInstanceOf(c)||!("component"in a||"index"in a||"position"in a)?null:a}var w={left:0,top:0,bottom:0,right:0},q={bottom:30,top:15,right:15,left:15};e=function(a){function b(){var b=a.call(this)||this;return b._cornerNameToContainerLookup={},b._positionNameToContainerLookup={},b._components=[],b._handles=new k,b.padding=q,b.view=null,b._initContainers(),b}return d(b,a),b.prototype.initialize=function(){this._handles.add([l.init(this,
"view.padding, container",this._applyViewPadding.bind(this)),l.init(this,"padding",this._applyUIPadding.bind(this))])},b.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy()},Object.defineProperty(b.prototype,"container",{set:function(a){var b=this._get("container");a!==b&&(a&&(n.add(a,"esri-ui"),this._attachContainers(a)),b&&(n.remove(b,"esri-ui"),r.set(b,{top:"",bottom:"",left:"",right:""}),u.empty(b)),
this._set("container",a))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0}),b.prototype.castPadding=function(a){return"number"==typeof a?{bottom:a,top:a,right:a,left:a}:g.mixin({},q,a)},Object.defineProperty(b.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();
return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0}),b.prototype.add=function(a,b){var d,f=this;if(Array.isArray(a))return void a.forEach(function(a){return f.add(a,b)});var e=t(a);e&&(d=e.index,b=e.position,a=e.component);b&&"object"==typeof b&&(d=b.index,b=b.position);!a||b&&!this._isValidPosition(b)||(!!a&&a.isInstanceOf&&a.isInstanceOf(c)||(a=new c({node:a})),this._place({component:a,position:b,index:d}),this._components.push(a))},b.prototype.remove=function(a){if(a){if(Array.isArray(a))return a.map(this.remove,
this);if(a=this.find(a)){var b=this._components.indexOf(a);return a.node.parentNode&&a.node.parentNode.removeChild(a.node),this._components.splice(b,1)[0]}}},b.prototype.empty=function(a){var b=this;return Array.isArray(a)?a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)}):(a=a||"manual","manual"===a)?Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!n.contains(a,"esri-ui-corner")}).map(function(a){return b.remove(a)}):this._isValidPosition(a)?
Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,this):void 0},b.prototype.move=function(a,b){var c=this;if(Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)}),a){var d,f=t(a)||t(b);(f&&(d=f.index,b=f.position,a=f.component||a),!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}},b.prototype.find=function(a){return a?a&&a.isInstanceOf&&a.isInstanceOf(c)?this._findByComponent(a):"string"==typeof a?this._findById(a):
this._findByNode(a.domNode||a):null},b.prototype._getViewPadding=function(){return this.get("view.padding")||w},b.prototype._attachContainers=function(a){u.place(this._manualContainer,a);u.place(this._innerContainer,a)},b.prototype._initContainers=function(){var a=u.create("div",{className:"esri-ui-inner-container esri-ui-corner-container"}),b=u.create("div",{className:"esri-ui-inner-container esri-ui-manual-container"}),c=u.create("div",{className:"esri-ui-top-left esri-ui-corner"},a),d=u.create("div",
{className:"esri-ui-top-right esri-ui-corner"},a),e=u.create("div",{className:"esri-ui-bottom-left esri-ui-corner"},a),k=u.create("div",{className:"esri-ui-bottom-right esri-ui-corner"},a);this._innerContainer=a;this._manualContainer=b;this._cornerNameToContainerLookup={"top-left":c,"top-right":d,"bottom-left":e,"bottom-right":k};this._positionNameToContainerLookup=g.mixin({manual:b},this._cornerNameToContainerLookup)},b.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]},
b.prototype._place=function(a){var b,c=a.component,d=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];return-1<d?(b=Array.prototype.slice.call(a.children),0===d?void this._placeComponent(c,a,"first"):d>=b.length?void this._placeComponent(c,a,"last"):void this._placeComponent(c,b[d],"before")):void this._placeComponent(c,a,"last")},b.prototype._placeComponent=function(a,b,c){var d=a.widget;d&&!d._started&&"function"==typeof d.postMixInProperties&&"function"==typeof d.buildRendering&&
"function"==typeof d.postCreate&&"function"==typeof d.startup&&a.widget.startup();u.place(a.node,b,c)},b.prototype._applyViewPadding=function(){var a=this.container;a&&r.set(a,this._toPxPosition(this._getViewPadding()))},b.prototype._applyUIPadding=function(){this._innerContainer&&r.set(this._innerContainer,this._toPxPosition(this.padding))},b.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}},
b.prototype._toPxUnit=function(a){return 0===a?0:a+"px"},b.prototype._findByComponent=function(a){var b,c=null;return this._components.some(function(d){return b=d===a,b&&(c=d),b}),c},b.prototype._findById=function(a){var b,c=null;return this._components.some(function(d){return b=d.id===a,b&&(c=d),b}),c},b.prototype._findByNode=function(a){var b,c=null;return this._components.some(function(d){return b=d.node===a,b&&(c=d),b}),c},b}(b.declared(m));return a([b.property()],e.prototype,"container",null),
a([b.property()],e.prototype,"height",null),a([b.property()],e.prototype,"padding",void 0),a([b.cast("padding")],e.prototype,"castPadding",null),a([b.property()],e.prototype,"view",void 0),a([b.property()],e.prototype,"width",null),e=a([b.subclass("esri.views.ui.UI")],e)})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor dojo/dom dojo/dom-class".split(" "),
function(e,h,d,a,b,c,m,k){e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.widget=null,b}return d(b,a),b.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null},Object.defineProperty(b.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(a){this._set("id",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"node",{set:function(a){var b=this._get("node");a!==b&&(a&&k.add(a,"esri-component"),
b&&k.remove(b,"esri-component"),this._set("node",a))},enumerable:!0,configurable:!0}),b.prototype.castNode=function(a){return a?"string"==typeof a||a&&"nodeType"in a?(this._set("widget",null),m.byId(a)):(a&&"function"==typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div")),this._set("widget",a),a.domNode):(this._set("widget",null),null)},b}(b.declared(c));return a([b.property()],e.prototype,"id",null),a([b.property()],e.prototype,"node",null),a([b.cast("node")],e.prototype,"castNode",
null),a([b.property({readOnly:!0})],e.prototype,"widget",void 0),e=a([b.subclass("esri.views.ui.Component")],e)})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Attribution/AttributionViewModel".split(" "),function(e,h,d,a,b,c,m,k){e=function(a){function b(b){b=a.call(this)||this;return b._isOpen=!1,b._attributionTextOverflowed=!1,b._prevSourceNodeHeight=
0,b.view=null,b.viewModel=new k,b}return d(b,a),b.prototype.render=function(){var a=(b={},b["esri-attribution--open"]=this._isOpen,b);return c.tsx("div",{bind:this,"class":"esri-attribution esri-widget",classes:a,onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),c.tsx("div",{"class":"esri-attribution__powered-by"},"Powered by ",c.tsx("a",{target:"_blank",href:"http://www.esri.com/","class":"esri-attribution__link"},"Esri")));var b},b.prototype._renderSourcesNode=function(){var a=
this._isOpen,b=this._isInteractive(),d=b?0:-1,e=this.get("viewModel.attributionText"),a=(g={},g["esri-attribution__sources--open"]=a,g["esri-interactive"]=b,g);return c.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,"class":"esri-attribution__sources",classes:a,innerHTML:e,role:b?"button":void 0,tabIndex:d});var g},b.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth},b.prototype._afterSourcesNodeUpdate=function(a){var b=
!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;if(this._attributionTextOverflowed=a,d&&(b=!0),this._isOpen)a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0);b&&this.scheduleRender()},b.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)},b.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed},b}(b.declared(m));return a([b.aliasOf("viewModel.view")],
e.prototype,"view",void 0),a([b.property({type:k}),c.renderable(["attributionText","state","view.size"])],e.prototype,"viewModel",void 0),a([c.accessibleHandler()],e.prototype,"_toggleState",null),e=a([b.subclass("esri.widgets.Attribution")],e)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../geometry/support/webMercatorUtils ../../core/HandleRegistry ../../core/Accessor ../../core/lang ../../core/watchUtils ../../geometry/Extent".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){e=function(a){function b(b){b=a.call(this,b)||this;return b._handles=new m,b._pendingAttributionItemsByLayerId={},b._attributionDataByLayerId={},b.itemDelimiter=" | ",b.items=[],b.view=null,b._updateAttributionItems=b._updateAttributionItems.bind(b),b}return d(b,a),b.prototype.initialize=function(){this._handles.add(g.init(this,"view",this._viewWatcher))},b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null},Object.defineProperty(b.prototype,
"attributionText",{get:function(){return this.items.join(this.itemDelimiter)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0}),b.prototype._viewWatcher=function(a){var b=this,c=this._handles;c&&c.remove();a&&(c.add([a.allLayerViews.on("change",function(a){b._addLayerViews(a.added);0<a.removed.length&&(a.removed.forEach(function(a){c.remove(a.uid)}),b._updateAttributionItems())}),
g.init(a,"stationary",this._updateAttributionItems)]),this._addLayerViews(a.allLayerViews))},b.prototype._addLayerViews=function(a){var b=this;a.forEach(function(a){b._handles.has(a.uid)||b._handles.add(g.init(a,"suspended",b._updateAttributionItems),a.uid)})},b.prototype._updateAttributionItems=function(){var a=this,b=[];this._getActiveLayerViews().forEach(function(c){var d=c.layer;if(!d.hasAttributionData)return c=d.get("copyright"),void(a._isUnique(b,c)&&b.push(c));if(d&&d.tileInfo){var e=a._attributionDataByLayerId;
if(e[d.uid])return c=a._getDynamicAttribution(e[d.uid],a.view,d),void(a._isUnique(b,c)&&b.push(c));var f=a._pendingAttributionItemsByLayerId;a._inProgress(f[d.uid])||(f[d.uid]=d.fetchAttributionData().then(function(b){b=a._createContributionIndex(b,a._isBingLayer(d));delete f[d.uid];e[d.uid]=b;a._updateAttributionItems()}))}});this._itemsChanged(this.items,b)&&this._set("items",b)},b.prototype._itemsChanged=function(a,b){return a.length!==b.length||a.some(function(a,c){return a!==b[c]})},b.prototype._inProgress=
function(a){return a&&!a.isFulfilled()},b.prototype._getActiveLayerViews=function(){return this.get("view.allLayerViews").filter(function(a){return!a.suspended&&a.get("layer.attributionVisible")})},b.prototype._isUnique=function(a,b){return b&&-1===a.indexOf(b)},b.prototype._isBingLayer=function(a){return-1!==a.declaredClass.toLowerCase().indexOf("vetiledlayer")},b.prototype._createContributionIndex=function(a,b){a=a.contributors;var d={};return a?(a.forEach(function(a,e){var f=a.coverageAreas;f&&
f.forEach(function(f){var g=f.bbox,k=f.zoomMin-(b&&f.zoomMin?1:0),m=f.zoomMax-(b&&f.zoomMax?1:0);a={extent:c.geographicToWebMercator(new n({xmin:g[1],ymin:g[0],xmax:g[3],ymax:g[2]})),attribution:a.attribution||"",score:l.isDefined(f.score)?f.score:100,id:e};for(f=k;m>=f;f++)d[f]=d[f]||[],d[f].push(a)})}),d.maxKey=Math.max.apply(null,Object.keys(d)),d):d},b.prototype._getDynamicAttribution=function(a,b,c){var d=b.extent;b=c.tileInfo.scaleToZoom(b.scale);if(b=Math.min(a.maxKey,Math.round(b)),!d||!l.isDefined(b)||
-1>=b)return"";a=a[b];var e=d.center.clone().normalize(),f={};return a.filter(function(a){var b=!f[a.id]&&a.extent.contains(e);return b&&(f[a.id]=!0),b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", ")},b}(b.declared(k));return a([b.property({dependsOn:["items","itemDelimiter"],readOnly:!0})],e.prototype,"attributionText",null),a([b.property()],e.prototype,"itemDelimiter",void 0),a([b.property({readOnly:!0})],e.prototype,"items",
void 0),a([b.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"state",null),a([b.property()],e.prototype,"view",void 0),e=a([b.subclass("esri.widgets.Attribution.AttributionViewModel")],e)})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Compass/CompassViewModel dojo/i18n!./Compass/nls/Compass".split(" "),function(e,h,d,a,b,c,m,k,l){e=function(a){function b(b){b=
a.call(this)||this;return b.view=null,b.viewModel=new k,b}return d(b,a),b.prototype.reset=function(){},b.prototype.render=function(){var a=this.viewModel.orientation,b=this.viewModel.state,d="disabled"===b,e="compass"===("rotation"===b?"rotation":"compass"),b=(g={},g["esri-disabled"]=d,g["esri-interactive"]=!d,g),g=(k={},k["esri-icon-compass"]=e,k["esri-icon-dial"]=!e,k);return c.tsx("div",{bind:this,"class":"esri-compass esri-widget-button esri-widget",classes:b,onclick:this._reset,onkeydown:this._reset,
role:"button",tabIndex:d?-1:0},c.tsx("span",{"aria-hidden":"true","class":"esri-compass__icon",classes:g,styles:this._toRotationTransform(a),title:l.reset}),c.tsx("span",{"class":"esri-icon-font-fallback-text"},l.reset));var g,k},b.prototype._reset=function(){this.reset()},b.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+a.z+"deg)"}},b}(b.declared(m));return a([b.aliasOf("viewModel.view")],e.prototype,"view",void 0),a([b.property({type:k}),c.renderable(["viewModel.orientation",
"viewModel.state"])],e.prototype,"viewModel",void 0),a([b.aliasOf("viewModel.reset")],e.prototype,"reset",null),a([c.accessibleHandler()],e.prototype,"_reset",null),e=a([b.subclass("esri.widgets.Compass")],e)})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/HandleRegistry ../../core/Accessor ../../core/watchUtils".split(" "),function(e,h,d,a,b,
c,m,k){e=function(a){function b(b){b=a.call(this,b)||this;return b._handles=new c,b.orientation={x:0,y:0,z:0},b.view=null,b._updateForCamera=b._updateForCamera.bind(b),b._updateForRotation=b._updateForRotation.bind(b),b._updateRotationWatcher=b._updateRotationWatcher.bind(b),b}return d(b,a),b.prototype.initialize=function(){this._handles.add(k.init(this,"view",this._updateRotationWatcher))},b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null},Object.defineProperty(b.prototype,
"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return a&&(a.isWebMercator||4326===a.wkid)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0}),b.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.view.goTo(a)}},b.prototype._updateForRotation=function(a){void 0!==
a&&null!==a&&(this.orientation={z:a})},b.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})},b.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(k.init(this,"view.rotation",this._updateForRotation)):this._handles.add(k.init(this,"view.camera",this._updateForCamera)))},b}(b.declared(m));return a([b.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],e.prototype,
"canShowNorth",null),a([b.property()],e.prototype,"orientation",void 0),a([b.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],e.prototype,"state",null),a([b.property()],e.prototype,"view",void 0),e=a([b.subclass("esri.widgets.CompassViewModel")],e)})},"esri/widgets/Compass/nls/Compass":function(){define({root:{reset:"Reset compass orientation"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,
sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel dojo/i18n!./Zoom/nls/Zoom".split(" "),function(e,h,d,a,b,c,m,k,l,g){e=function(a){function b(b){b=a.call(this)||this;return b.layout="vertical",b.view=null,b.viewModel=new l,b}return d(b,a),b.prototype.postInitialize=
function(){this._zoomInButton=new k({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus",title:g.zoomIn});this._zoomOutButton=new k({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus",title:g.zoomOut})},b.prototype.render=function(){var a=this.viewModel,b=(d={},d["esri-zoom--horizontal"]="horizontal"===this.layout,d);return this._zoomInButton.enabled="ready"===a.state&&a.canZoomIn,this._zoomOutButton.enabled="ready"===a.state&&a.canZoomOut,c.tsx("div",{"class":"esri-zoom esri-widget",
classes:b},this._zoomInButton.render(),this._zoomOutButton.render());var d},b.prototype.zoomIn=function(){},b.prototype.zoomOut=function(){},b}(b.declared(m));return a([b.property(),c.renderable()],e.prototype,"layout",void 0),a([b.aliasOf("viewModel.view"),c.renderable()],e.prototype,"view",void 0),a([b.property({type:l}),c.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],e.prototype,"viewModel",void 0),a([b.aliasOf("viewModel.zoomIn")],e.prototype,"zoomIn",null),a([b.aliasOf("viewModel.zoomOut")],
e.prototype,"zoomOut",null),e=a([b.subclass("esri.widgets.Zoom")],e)})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/widget ../Widget".split(" "),function(e,h,d,a,b,c,m){e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.enabled=!0,b.iconClass="",b.title="",b}return d(b,a),b.prototype.render=function(){var a=this.enabled?
0:-1,b=(d={},d["esri-disabled"]=!this.enabled,d["esri-interactive"]=this.enabled,d),d=(e={},e[this.iconClass]=!!this.iconClass,e);return c.tsx("div",{bind:this,"class":"esri-widget-button esri-widget",classes:b,onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:a,title:this.title},c.tsx("span",{"aria-hidden":"true",role:"presentation","class":"esri-icon",classes:d}),c.tsx("span",{"class":"esri-icon-font-fallback-text"},this.title));var d,e},b.prototype._triggerAction=
function(){this.action.call(this)},b}(b.declared(m));return a([b.property()],e.prototype,"action",void 0),a([b.property(),c.renderable()],e.prototype,"enabled",void 0),a([b.property(),c.renderable()],e.prototype,"iconClass",void 0),a([b.property(),c.renderable()],e.prototype,"title",void 0),a([c.accessibleHandler()],e.prototype,"_triggerAction",null),e=a([b.subclass("esri.widgets.IconButton")],e)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor".split(" "),
function(e,h,d,a,b,c){e=function(a){function b(b){b=a.call(this,b)||this;return b.view=null,b.zoomIn=b.zoomIn.bind(b),b.zoomOut=b.zoomOut.bind(b),b}return d(b,a),b.prototype.destroy=function(){this.view=null},Object.defineProperty(b.prototype,"canZoomIn",{get:function(){if("2d"!==this.get("view.type"))return!0;var a=this.get("view.scale"),b=this.get("view.constraints.effectiveMaxScale");return 0===b||a>b},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"canZoomOut",{get:function(){if("2d"!==
this.get("view.type"))return!0;var a=this.get("view.scale"),b=this.get("view.constraints.effectiveMinScale");return 0===b||b>a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0}),b.prototype.zoomIn=function(){this.canZoomIn&&this._zoomToFactor(.5)},b.prototype.zoomOut=function(){this.canZoomOut&&this._zoomToFactor(2)},b.prototype._zoomToFactor=function(a){"ready"===this.state&&
this.view.goTo({scale:this.get("view.scale")*a})},b}(b.declared(c));return a([b.property({dependsOn:["view.ready","view.scale"],readOnly:!0})],e.prototype,"canZoomIn",null),a([b.property({dependsOn:["view.ready","view.scale"],readOnly:!0})],e.prototype,"canZoomOut",null),a([b.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"state",null),a([b.property()],e.prototype,"view",void 0),e=a([b.subclass("esri.widgets.Zoom.ZoomViewModel")],e)})},"esri/widgets/Zoom/nls/Zoom":function(){define({root:{zoomIn:"Zoom In",
zoomOut:"Zoom Out"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./NavigationToggle/NavigationToggleViewModel dojo/i18n!./NavigationToggle/nls/NavigationToggle".split(" "),
function(e,h,d,a,b,c,m,k,l){e=function(a){function b(b){b=a.call(this)||this;return b.view=null,b.viewModel=new k,b}return d(b,a),Object.defineProperty(b.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0}),b.prototype.toggle=function(){},b.prototype.render=function(){var a="disabled"===this.get("viewModel.state"),b="pan"===this.get("viewModel.navigationMode"),d=(e={},e["esri-disabled"]=a,e),e=(g={},g["esri-navigation-toggle__button--active"]=
b,g),b=(k={},k["esri-navigation-toggle__button--active"]=!b,k);return c.tsx("div",{bind:this,"class":"esri-navigation-toggle esri-widget",classes:d,onclick:this._toggle,onkeydown:this._toggle,tabIndex:a?-1:0,title:l.toggle},c.tsx("div",{"class":c.join("esri-navigation-toggle__button esri-widget-button","esri-navigation-toggle__button--pan"),classes:e},c.tsx("span",{"class":"esri-icon-pan"})),c.tsx("div",{"class":c.join("esri-navigation-toggle__button esri-widget-button","esri-navigation-toggle__button--rotate"),
classes:b},c.tsx("span",{"class":"esri-icon-rotate"})));var e,g,k},b.prototype._toggle=function(){this.toggle()},b}(b.declared(m));return a([b.property({value:"vertical"}),c.renderable()],e.prototype,"layout",null),a([b.aliasOf("viewModel.view"),c.renderable()],e.prototype,"view",void 0),a([b.property({type:k}),c.renderable(["viewModel.state","viewModel.navigationMode"])],e.prototype,"viewModel",void 0),a([b.aliasOf("viewModel.toggle")],e.prototype,"toggle",null),a([c.accessibleHandler()],e.prototype,
"_toggle",null),e=a([b.subclass("esri.widgets.NavigationToggle")],e)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ../../core/Accessor ../../core/HandleRegistry".split(" "),function(e,h,d,a,b,c,m,k){e=function(a){function b(b){b=a.call(this,b)||this;return b._handles=new k,b.navigationMode="pan",b.view=null,b.toggle=
b.toggle.bind(b),b}return d(b,a),b.prototype.initialize=function(){this._handles.add(c.when(this,"view.inputManager",this._setNavigationMode.bind(this)))},b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null},Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0}),b.prototype.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?
"pan":"rotate",this._setNavigationMode())},b.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"},b}(b.declared(m));return a([b.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"state",null),a([b.property()],e.prototype,"navigationMode",void 0),a([b.property()],e.prototype,"view",void 0),e=a([b.subclass("esri.widgets.NavigationToggleViewModel")],e)})},"esri/widgets/NavigationToggle/nls/NavigationToggle":function(){define({root:{toggle:"Toggle to pan or rotate in 3D"},
ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI dojo/_base/lang".split(" "),function(e,h,d,a,b,c,m){e=function(a){function b(){return a.call(this)||
this}return d(b,a),b.prototype.getDefaults=function(){return m.mixin(this.inherited(arguments),{components:["attribution","zoom"]})},b}(b.declared(c));return e=a([b.subclass("esri.views.ui.2d.DefaultUI2D")],e)})},"esri/views/2d/engine/Stage":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/promiseUtils ../../../core/Scheduler ../FrameBudget ./DOMContainer ./StageGL ./Container".split(" "),function(e,h,d,a,b,c,m,k,l){function g(a){if(a instanceof k)return a;if(a instanceof
l){var b=0;for(a=a.children;b<a.length;b++){var c=g(a[b]);if(c)return c}}return null}return function(e){function k(a){var d=e.call(this)||this;return d.element=a,d._budget=new c,d._renderParameters={budget:d._budget,state:d.state,devicePixelRatio:window.devicePixelRatio,stationary:!1},d._renderRequested=!1,d._taskHandle=b.addFrameTask({render:function(){return d.renderFrame()}}),d._stationary=!0,d.attached=!0,d._taskHandle.pause(),d}return d(k,e),k.prototype.destroy=function(){this.removeAllChildren();
this.renderFrame();this._taskHandle.remove();this._taskHandle=null},Object.defineProperty(k.prototype,"state",{get:function(){return this._state},set:function(a){this._state=a;this.requestRender()},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"stationary",{get:function(){return this._stationary},set:function(a){this._stationary!==a&&(this._stationary=a,this.requestRender())},enumerable:!0,configurable:!0}),k.prototype.start=function(){this._taskHandle.resume()},k.prototype.stop=
function(){this._taskHandle.isPaused()||this._taskHandle.pause()},k.prototype.requestRender=function(){this._renderRequested=!0;this._taskHandle&&this._taskHandle.isPaused()&&this._taskHandle.resume()},k.prototype.takeScreenshot=function(b){var c=g(this);return c?c.takeScreenshot(b):a.reject("Could not find an object capable of capturing screenshot!")},k.prototype.renderFrame=function(){this._renderRequested&&(this._renderRequested=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=
this.stationary,this._renderParameters.devicePixelRatio=window.devicePixelRatio,this.processRender(this._renderParameters));this._renderRequested||this._taskHandle.pause()},k}(m)})},"esri/views/2d/engine/DOMContainer":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Container"],function(e,h,d,a){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.createElement=function(){var a=document.createElement("div");return a.setAttribute("class",
"esri-display-object"),a},b.prototype.setElement=function(a){this.element=a},b.prototype.doRender=function(b){var c=this.element.style;return this.visible?(c.display="block",c.opacity=""+this.opacity,a.prototype.doRender.call(this,b),void 0):void(c.display="none")},b.prototype.prepareChildrenRenderParameters=function(a){return a},b.prototype.attachChild=function(a,b){var c=a.element;return c||(c=a.createElement(),a.setElement(c)),a.attach(b)},b.prototype.detachChild=function(a,b){a.detach(b);this.element.removeChild(a.element);
a.setElement(null)},b.prototype.renderChildren=function(b){for(var c=this.children,d=this.element.childNodes,e=0,m=c.length,h=0;m>h;h++)if(c[h].attached){var r=c[h].element;d[e]!==r&&(null!=d[e+1]?this.element.insertBefore(r,d[e]):this.element.appendChild(r));e+=1}a.prototype.renderChildren.call(this,b)},b}(a)})},"esri/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(e,h,d,a){var b;!function(a){a[a.BEFORE=0]="BEFORE";
a[a.ATTACHING=1]="ATTACHING";a[a.DETACHING=2]="DETACHING";a[a.RENDERING=3]="RENDERING";a[a.AFTER=4]="AFTER";a[a.DONE=5]="DONE"}(b||(b={}));return function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;return c._childrenSet=new Set,c._childrenToAttach=[],c._childrenToDetach=[],c._renderPhase=b.DONE,c.children=[],c}return d(c,a),Object.defineProperty(c.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),c.prototype.detach=function(a){var b=
this.children;a=this.prepareChildrenRenderParameters(a);for(var c=b.length,d=0;c>d;d++){var e=b[d];e.attached&&(this.detachChild(e,a),e.attached=!1,e.parent=null)}},c.prototype.doRender=function(a){var c=this.prepareChildrenRenderParameters(a);this._renderPhase=b.BEFORE;this.beforeRenderChildren(a,c);this._renderPhase=b.ATTACHING;this.attachChildren(c)||this.requestRender();this._renderPhase=b.DETACHING;for(var d=this._childrenToDetach;0<d.length;){var e=d.shift();this.detachChild(e,c);e.attached=
!1;e.parent=null}this._renderPhase=b.RENDERING;this.renderChildren(c);this._renderPhase=b.AFTER;this.afterRenderChildren(a,c);this._renderPhase=b.DONE},c.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)},c.prototype.addChildAt=function(a,c){if((void 0===c&&(c=this.numChildren),!a)||this.contains(a))return a;var d=a.parent;d&&d!==this&&d.removeChild(a);c>=this.numChildren?this.children.push(a):this.children.splice(c,0,a);this._childrenSet.add(a);c=this._childrenToDetach.indexOf(a);
return-1<c&&this._childrenToDetach.splice(c,1),this._childrenToAttach.push(a),this._renderPhase>=b.RENDERING&&this.requestRender(),a},c.prototype.contains=function(a){return this._childrenSet.has(a)},c.prototype.getChildIndex=function(a){return this.children.indexOf(a)},c.prototype.getChildAt=function(a){return 0>a||a>this.children.length?null:this.children[a]},c.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)},c.prototype.removeChild=function(a){return this.contains(a)?
this.removeChildAt(this.getChildIndex(a)):a},c.prototype.removeChildAt=function(a){if(0>a||a>=this.children.length)return null;a=this.children.splice(a,1)[0];this._childrenSet["delete"](a);if(a.attached)this._childrenToDetach.push(a),this._renderPhase>=b.RENDERING&&this.requestRender();else{var c=this._childrenToAttach.indexOf(a);-1<c&&this._childrenToAttach.splice(c,1)}return a},c.prototype.requestChildRender=function(a){a&&a.parent===this&&this._renderPhase>=b.RENDERING&&this.requestRender()},c.prototype.setChildIndex=
function(a,c){var d=this.getChildIndex(a);-1<d&&(this.children.splice(d,1),this.children.splice(c,0,a),this._renderPhase>=b.RENDERING&&this.requestRender())},c.prototype.sortChildren=function(a){return this._renderPhase>b.RENDERING&&this.requestRender(),this.children.sort(a)},c.prototype.attachChildren=function(a){var b=this._childrenToAttach;if(0===b.length)return!0;for(var c=0===b.length;!c;)c=b.shift(),this.attachChild(c,a)&&(c.attached=!0,c.parent=this),c=0===b.length;return 0===b.length},c.prototype.renderChildren=
function(a){for(var b=this.children,c=b.length,d=0;c>d;d++){var e=b[d];e.attached&&this.renderChild(e,a)}},c.prototype.beforeRenderChildren=function(a,b){},c.prototype.attachChild=function(a,b){return a.attach(b)},c.prototype.detachChild=function(a,b){a.detach(b)},c.prototype.renderChild=function(a,b){a.processRender(b)},c.prototype.afterRenderChildren=function(a,b){},c}(a)})},"esri/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Evented"],
function(e,h,d,a){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b._renderRequestedCalled=!1,b._attached=!1,b._opacity=1,b.renderRequested=!1,b._visible=!0,b}return d(b,a),Object.defineProperty(b.prototype,"attached",{get:function(){return this._attached},set:function(a){this._attached!==a&&(this._attached=a,a?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,
"opacity",{get:function(){return this._opacity},set:function(a){this._opacity!==a&&(this._opacity=a,this.requestRender())},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible!==a&&(this._visible=a,this.requestRender())},enumerable:!0,configurable:!0}),b.prototype.attach=function(a){return!0},b.prototype.detach=function(a){},b.prototype.processRender=function(a){this._renderRequestedCalled=!1;this.doRender(a);
this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")},b.prototype.requestRender=function(){var a=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);a!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")},b.prototype.dispose=function(){},b}(a.Evented)})},"esri/views/2d/engine/Evented":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"dojo/aspect","dojo/on"],function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});e=function(){function c(){}return c.prototype.on=function(b,c){return a.after(this,"on"+b,c,!0)},c.prototype.once=function(a,c){return b.once(this,a,c)},c.prototype.emit=function(a){b.emit(this,a,this)},c.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)},c}();h.Evented=e;h.EventedMixin=function(c){return function(c){function e(){return null!==c&&c.apply(this,arguments)||this}
return d(e,c),e.prototype.on=function(b,c){return a.after(this,"on"+b,c,!0)},e.prototype.once=function(a,c){return b.once(this,a,c)},e.prototype.emit=function(a,c){b.emit(this,a,c)},e.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)},e}(c)}})},"esri/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper ../libs/gl-matrix/common ../libs/gl-matrix/vec2 ../libs/gl-matrix/mat2d ./webgl/BitBlitRenderer ../../support/screenshotUtils ../../../core/promiseUtils ./Container ../../webgl/RenderingContext ../../webgl/FramebufferObject ../../webgl/webgl-utils ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject ./webgl/glShaderSnippets".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v){function x(a){return{budget:a.budget,state:a.state,devicePixelRatio:a.devicePixelRatio,stationary:a.stationary}}var f={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(e){function g(){var a=null!==e&&e.apply(this,arguments)||this;return a._clipData=new Float32Array(8),a._upperLeft=b.create(),a._upperRight=b.create(),a._lowerLeft=b.create(),a._lowerRight=b.create(),a._mat2=c.create(),a._clipRendererInitialized=!1,a}return d(g,e),g.prototype.createElement=
function(){var a=document.createElement("canvas");return a.setAttribute("class","esri-display-object"),a},g.prototype.setElement=function(a){this.element=a},g.prototype.attach=function(a){this._resizeCanvas(a);var b=r.setupWebGL(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0});return this._renderingContext=new n(b[0]),this.attached=!0,this._cachedRenderParams=x(a),e.prototype.attach.call(this,a)},g.prototype.detach=function(a){e.prototype.detach.call(this,a);this._renderingContext&&(this._renderingContext.dispose(),
this._renderingContext=null);this._cachedRenderParams=null},g.prototype.beforeRenderChildren=function(d,f){var e=d.state;if(!(e.spatialReference&&(e.spatialReference._isWrappable?e.spatialReference._isWrappable():e.spatialReference.isWrappable)))return void(this._clipFrame=!1);var g=e.width;f=e.height;var k=e.rotation,l=this._renderingContext,g=Math.round(g*d.devicePixelRatio);f=Math.round(f*d.devicePixelRatio);var h=a.toRadian(k),m=Math.abs(Math.cos(h)),p=Math.abs(Math.sin(h)),n=Math.round(e.worldScreenWidth);
if(n>=Math.round(g*m+f*p))return void(this._clipFrame=!1);this._clipFBO&&this._clipFBO.width===g&&this._clipFBO.height===f||(this._clipFBO=new u(l,{colorTarget:0,depthStencilTarget:3,width:g,height:f}));var q=.5*g,r=.5*f,e=1/g,v=1/f;d=.5*n*d.devicePixelRatio;var t=.5*(g*p+f*m),g=this._upperLeft,m=this._upperRight,p=this._lowerLeft,n=this._lowerRight;b.set(g,-d,-t);b.set(m,d,-t);b.set(p,-d,t);b.set(n,d,t);c.identity(this._mat2);c.translate(this._mat2,this._mat2,[q,r]);0!==k&&c.rotate(this._mat2,this._mat2,
h);b.transformMat2d(g,g,this._mat2);b.transformMat2d(m,m,this._mat2);b.transformMat2d(p,p,this._mat2);b.transformMat2d(n,n,this._mat2);k=this._clipData;k.set([2*p[0]*e-1,2*(f-p[1])*v-1,2*n[0]*e-1,2*(f-n[1])*v-1,2*g[0]*e-1,2*(f-g[1])*v-1,2*m[0]*e-1,2*(f-m[1])*v-1]);this._clipRendererInitialized||this._initializeClipRenderer(l);this._clipVBO.setData(k);this._boundFBO=l.getBoundFramebufferObject();l.bindFramebuffer(this._clipFBO);l.setDepthWriteEnabled(!0);l.setStencilWriteMask(255);l.setClearColor(0,
0,0,0);l.setClearDepth(1);l.setClearStencil(0);l.clear(l.gl.COLOR_BUFFER_BIT|l.gl.DEPTH_BUFFER_BIT|l.gl.STENCIL_BUFFER_BIT);l.setDepthWriteEnabled(!1);this._clipFrame=!0},g.prototype.afterRenderChildren=function(a,b){this._clipFrame&&this._clipRendererInitialized&&(a=this._renderingContext,a.bindFramebuffer(this._boundFBO),this._boundFBO=null,a.bindVAO(this._clipVAO),a.bindProgram(this._clipStencilProgram),a.setDepthWriteEnabled(!1),a.setDepthTestEnabled(!1),a.setStencilTestEnabled(!0),a.setBlendingEnabled(!1),
a.setColorMask(!1,!1,!1,!1),a.setStencilOp(7680,7680,7681),a.setStencilWriteMask(255),a.setStencilFunction(519,1,255),a.drawElements(4,6,5123,0),a.bindVAO(),a.setColorMask(!0,!0,!0,!0),a.setBlendingEnabled(!0),a.setStencilFunction(514,1,255),this._blitRenderer.render(a,this._clipFBO.colorTexture,9728,1),a.setStencilTestEnabled(!1))},g.prototype.doRender=function(a){var b=this.element.style;return this.visible?(b.display="block",b.opacity=""+this.opacity,this._resizeCanvas(a),e.prototype.doRender.call(this,
a),void(this._cachedRenderParams=x(a))):void(b.display="none")},g.prototype.takeScreenshot=function(a){void 0===a&&(a={});var b=a.pixelRatio||1;this._cachedRenderParams.devicePixelRatio=b;var c=Math.round(b*this._cachedRenderParams.state.width),d=Math.round(b*this._cachedRenderParams.state.height),e=0,g=0,h=c,m=d,p=c,n=d,p=a.area;(p&&(e=Math.round(b*p.x),g=Math.round(b*p.y),h=Math.round(b*p.width),m=Math.round(b*p.height)),void 0!==a.width&&void 0!==a.height)?(p=a.width/a.height,m*p<h?(p*=m,e+=Math.floor((h-
p)/2),h=Math.floor(p)):(p=h/p,g+=Math.floor((m-p)/2),m=Math.floor(p)),p=a.width,n=a.height):(p=h,n=m);b=document.createElement("canvas");b.width=p;b.height=n;var q=b.getContext("2d"),r=new Uint8Array(h*m*4),v=this._renderingContext,t=u.create(v,{colorTarget:1,depthStencilTarget:3,width:c,height:d});v.bindFramebuffer(t);v.setViewport(0,0,c,d);this._cachedRenderParams.budget&&this._cachedRenderParams.budget.reset(Number.MAX_VALUE);var x=this._cachedRenderParams,w=this._renderingContext.gl;if(this._renderingContext.setClearColor(0,
0,0,0),this._renderingContext.setClearDepth(1),this._renderingContext.setClearStencil(0),this._renderingContext.clear(w.COLOR_BUFFER_BIT|w.DEPTH_BUFFER_BIT|w.STENCIL_BUFFER_BIT),x.context=this._renderingContext,this.beforeRenderChildren(x,x),void 0!==a.rotation&&null!==a.rotation){var w=x.state,z=w.clone();z.viewpoint.rotation=a.rotation;x.state=z;this.renderChildren(x);x.state=w}else this.renderChildren(x);this.afterRenderChildren(x,x);t.readPixels(e,d-(g+m),h,m,6408,5121,r);v.bindFramebuffer();
v=q.getImageData(0,0,p,n);if(0!==e||0!==g||h!==c||m!==d||p!==c||n!==d)k.resampleHermite(r,h,m,v.data,p,n,!0);else{g=m-1;m=0;t=4*h;for(z=w=e=d=c=h=x=void 0;g>m;){w=m*t;z=g*t;for(x=0;t>x;x+=4)h=r[w+x],c=r[w+x+1],d=r[w+x+2],e=r[w+x+3],r[w+x]=r[z+x],r[w+x+1]=r[z+x+1],r[w+x+2]=r[z+x+2],r[w+x+3]=r[z+x+3],r[z+x]=h,r[z+x+1]=c,r[z+x+2]=d,r[z+x+3]=e;m++;g--}h=v.data;c=r.length;for(g=0;c>g;g++)h[g]=r[g]}r=v.data;m=r.length;for(g=0;m>g;g+=4)e=r[g+3],0<e&&(d=e/255,h=Math.floor(r[g+0]/d),c=Math.floor(r[g+1]/d),
d=Math.floor(r[g+2]/d),r[g+0]=255>=h?h:255,r[g+1]=255>=c?c:255,r[g+2]=255>=d?d:255);q.putImageData(v,0,0);q=f[a.format?a.format.toLowerCase():"png"];r=1;void 0!==a.quality&&(r=a.quality/100);a=b.toDataURL(q,r);return l.resolve({dataURL:a,x:0,y:0,width:p,height:n})},g.prototype.prepareChildrenRenderParameters=function(a){if(!this.attached||!this._renderingContext)return null;a=x(a);var b=this._renderingContext,c=b.gl;return b.setDepthWriteEnabled(!0),b.setStencilWriteMask(255),b.setClearColor(0,0,
0,0),b.setClearDepth(1),b.setClearStencil(0),b.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT|c.STENCIL_BUFFER_BIT),b.setViewport(0,0,this.element.width,this.element.height),b.setDepthWriteEnabled(!1),a.context=b,a},g.prototype.attachChild=function(a,b){return a.attach(b)},g.prototype.detachChild=function(a,b){return a.detach(b)},g.prototype.renderChild=function(a,b){return a.processRender(b)},g.prototype._resizeCanvas=function(a){var b=this.element,c=b.style,d=a.state,f=a.devicePixelRatio;a=Math.round(d.width*
f);f=Math.round(d.height*f);(b.width!==a||b.height!==f)&&(b.width=a,b.height=f);c.width=d.width+"px";c.height=d.height+"px"},g.prototype._initializeClipRenderer=function(a){if(this._clipRendererInitialized)return!0;this._blitRenderer=new m;var b={a_pos:0},c=new t(a,v.stencilVS,v.stencilFS,b);if(!c)return!1;var d=q.createVertex(a,35040,32),f=new Uint16Array([0,1,2,2,1,3]),f=q.createIndex(a,35044,f);a=new w(a,b,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},
{geometry:d},f);return this._clipStencilProgram=c,this._clipVBO=d,this._clipVAO=a,this._clipRendererInitialized=!0,!0},g}(g)})},"esri/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ../../../webgl/Program ../../../webgl/VertexArrayObject ../../../webgl/BufferObject ./glShaderSnippets".split(" "),function(e,h,d,a,b,c){return function(){function e(){this._initialized=!1}return e.prototype.render=function(a,b,c,d){a&&b&&(this._initialized||this._initialize(a),a.setBlendFunctionSeparate(1,
771,1,771),a.bindVAO(this._vertexArrayObject),a.bindProgram(this._program),b.setSamplingMode(c),a.bindTexture(b,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",d),a.drawArrays(5,0,4),a.bindVAO())},e.prototype._initialize=function(e){if(this._initialized)return!0;var k={a_pos:0,a_tex:1},g=new d(e,c.bitblitVS,c.bitblitFS,k);if(!g)return!1;var h=new Int8Array(16);h[0]=-1;h[1]=-1;h[2]=0;h[3]=0;h[4]=1;h[5]=-1;h[6]=1;h[7]=0;h[8]=-1;h[9]=1;h[10]=0;h[11]=1;h[12]=1;h[13]=1;
h[14]=1;h[15]=1;e=new a(e,k,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:b.createVertex(e,35044,h)});return this._program=g,this._vertexArrayObject=e,this._initialized=!0,!0},e}()})},"esri/views/webgl/Program":function(){define(["require","exports","dojo/has"],function(e,h,d){var a=d("dojo-debug-messages");e=function(){function b(a,d,e,l,g){if(void 0===g&&(g={}),this._context=
null,this._glName=null,this._locations={},this._id=void 0,this._initialized=!1,this._vShader=null,this._fShader=null,this._defines={},this._nameToUniformLocation={},this._nameToAttribLocation={},this._nameToUniform1={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},a||console.error("RenderingContext isn't initialized!"),0===d.length&&console.error("Shaders source should not be empty!"),this._context=a,this._vertexShaderSource=
d,this._fragmentShaderSource=e,Array.isArray(g))for(a=0;a<g.length;a++)this._defines[g[a]]="1";else this._defines=g;this._id=b._nextId++;this._locations=l}return Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0}),b.prototype.getDefine=
function(a){return this._defines[a]},b.prototype.dispose=function(){if(this._context){var a=this._context.gl;this._vShader&&(a.deleteShader(this._vShader),this._vShader=null);this._fShader&&(a.deleteShader(this._fShader),this._fShader=null);this._glName&&(a.deleteProgram(this._glName),this._glName=null);this._context=null}},b.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");
var a=this._context.gl,b=a.createProgram();a.attachShader(b,this._vShader);a.attachShader(b,this._fShader);for(var d in this._locations)a.bindAttribLocation(b,this._locations[d],d);a.linkProgram(b);a.getProgramParameter(b,a.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+a.getProgramParameter(b,a.VALIDATE_STATUS)+", gl error ["+a.getError()+"]infoLog: "+a.getProgramInfoLog(b));this._glName=b;this._initialized=!0}},b.prototype.getUniformLocation=function(a){return this.initialize(),
void 0===this._nameToUniformLocation[a]&&(this._nameToUniformLocation[a]=this._context.gl.getUniformLocation(this._glName,a)),this._nameToUniformLocation[a]},b.prototype.hasUniform=function(a){return null!==this.getUniformLocation(a)},b.prototype.getAttribLocation=function(a){return this.initialize(),void 0===this._nameToAttribLocation[a]&&(this._nameToAttribLocation[a]=this._context.gl.getAttribLocation(this._glName,a)),this._nameToAttribLocation[a]},b.prototype.setUniform1i=function(a,b){var c=
this._nameToUniform1[a];if(void 0===c||b!==c)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(a),b),this._nameToUniform1[a]=b},b.prototype.setUniform1f=function(a,b){var c=this._nameToUniform1[a];if(void 0===c||b!==c)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(a),b),this._nameToUniform1[a]=b},b.prototype.setUniform1fv=function(a,d){var c=this._nameToUniform2[a];void 0!==c&&b._arraysEqual(d,c)||(this._context.bindProgram(this),
this._context.gl.uniform1fv(this.getUniformLocation(a),d),void 0===c?this._nameToUniform2[a]=new Float32Array(d):c.set(d))},b.prototype.setUniform2f=function(a,b,d){var c=this._nameToUniform2[a];if(void 0===c||b!==c[0]||d!==c[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(a),b,d),void 0===c?this._nameToUniform2[a]=new Float32Array([b,d]):(c[0]=b,c[1]=d)},b.prototype.setUniform2fv=function(c,d){a&&0!==d.length%2&&console.error("Value array must have even number of elements!");
var e=this._nameToUniform2[c];void 0!==e&&b._arraysEqual(d,e)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(c),d),void 0===e?this._nameToUniform2[c]=new Float32Array(d):e.set(d))},b.prototype.setUniform3f=function(a,b,d,e){var c=this._nameToUniform3[a];if(void 0===c||b!==c[0]||d!==c[1]||e!==c[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(a),b,d,e),void 0===c?this._nameToUniform3[a]=new Float32Array([b,d,e]):(c[0]=b,c[1]=
d,c[2]=e)},b.prototype.setUniform3fv=function(c,d){a&&0!==d.length%3&&console.error("Value array must contain sets of three values!");var e=this._nameToUniform3[c];void 0!==e&&b._arraysEqual(d,e)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(c),d),void 0===e?this._nameToUniform3[c]=new Float32Array(d):e.set(d))},b.prototype.setUniform4f=function(a,b,d,e,g){var c=this._nameToUniform4[a];if(void 0===c||b!==c[0]||d!==c[1]||e!==c[2]||g!==c[3])this._context.bindProgram(this),
this._context.gl.uniform4f(this.getUniformLocation(a),b,d,e,g),void 0===c?this._nameToUniform4[a]=new Float32Array([b,d,e,g]):(c[0]=b,c[1]=d,c[2]=e,c[3]=g)},b.prototype.setUniform4fv=function(c,d){a&&0!==d.length%4&&console.error("Value array must contain sets of four values!");var e=this._nameToUniform4[c];void 0!==e&&b._arraysEqual(d,e)||(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(c),d),void 0===e?this._nameToUniform4[c]=new Float32Array(d):e.set(d))},b.prototype.setUniformMatrix3fv=
function(c,d,e){void 0===e&&(e=!1);a&&0!==d.length%9&&console.error("Matrix array must contain sets ot 9 elements!");var k=this._nameToUniformMatrix3[c];void 0!==k&&(9===k.length?b._matrix3Equal(k,d):b._arraysEqual(d,k))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(c),e,d),void 0===k?this._nameToUniformMatrix3[c]=new Float32Array(d):k.set(d))},b.prototype.setUniformMatrix4fv=function(c,d,e){void 0===e&&(e=!1);a&&0!==d.length%16&&console.error("Matrix array must contain sets ot 16 elements!");
var k=this._nameToUniformMatrix4[c];void 0!==k&&(16===k.length?b._matrix4Equal(k,d):b._arraysEqual(d,k))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(c),e,d),void 0===k?this._nameToUniformMatrix4[c]=new Float32Array(d):k.set(d))},b._padToThree=function(a){var b=a.toString();return 1E3>a&&(b=("  "+a).slice(-3)),b},b.prototype._addLineNumbers=function(a){var c=2;return a.replace(/\n/g,function(){return"\n"+b._padToThree(c++)+":"})},b.prototype._loadShader=
function(a){var b=35633===a?this._vertexShaderSource:this._fragmentShaderSource,c="",d;for(d in this._defines)c+="#define "+d+" "+this._defines[d]+"\n";b=c+b;c=this._context.gl;a=c.createShader(a);return c.shaderSource(a,b),c.compileShader(a),c.getShaderParameter(a,c.COMPILE_STATUS)||(console.error(c.getShaderInfoLog(a)),console.error(this._addLineNumbers(b))),a},b._matrix4Equal=function(b,d){return a&&(16!==b.length||16!==d.length)&&console.error("Matrix object must contain 16 elements!"),b[0]===
d[0]&&b[1]===d[1]&&b[2]===d[2]&&b[3]===d[3]&&b[4]===d[4]&&b[5]===d[5]&&b[6]===d[6]&&b[7]===d[7]&&b[8]===d[8]&&b[9]===d[9]&&b[10]===d[10]&&b[11]===d[11]&&b[12]===d[12]&&b[13]===d[13]&&b[14]===d[14]&&b[15]===d[15]},b._matrix3Equal=function(b,d){return a&&(9!==b.length||9!==d.length)&&console.error("Matrix object must contain 16 elements!"),b[0]===d[0]&&b[1]===d[1]&&b[2]===d[2]&&b[3]===d[3]&&b[4]===d[4]&&b[5]===d[5]&&b[6]===d[6]&&b[7]===d[7]&&b[8]===d[8]},b._arraysEqual=function(a,b){if(a.length!==b.length)return!1;
for(var c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0},b}();return e._nextId=0,e})},"esri/views/webgl/VertexArrayObject":function(){define(["require","exports"],function(e,h){e=function(){function d(a,b,c,e,k){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=a;this._layout=c;this._buffers=e;this._locations=b;k&&(this._indexBuffer=k);this._id=d._nextId++}return Object.defineProperty(d.prototype,"id",{get:function(){return this._id},
enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,
"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0}),d.prototype.dispose=function(a){if(void 0===a&&(a=!0),this._context){var b=this._context.extensions.vao;b&&this._glName&&(b.deleteVertexArrayOES(this._glName),this._glName=null);if(this._context.getBoundVAO()===this&&this._context.bindVAO(null),a){for(var c in this._buffers)this._buffers[c].dispose(),delete this._buffers[c];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}this._context=null}},
d.prototype.initialize=function(){if(!this._initialized){var a=this._context.extensions.vao;if(a){var b=a.createVertexArrayOES();a.bindVertexArrayOES(b);this._bindLayout();a.bindVertexArrayOES(null);this._glName=b}this._initialized=!0}},d.prototype.bind=function(){this.initialize();var a=this._context.extensions.vao;a?a.bindVertexArrayOES(this.glName):(this._context.bindVAO(null),this._bindLayout())},d.prototype._bindLayout=function(){var a=this._buffers,b=this._context.extensions.vao,c=this._layout,
d=this._indexBuffer;a||console.error("Vertex buffer dictionary is empty!");var e,h,g=this._context.gl,n=0,u;for(u in a)for((e=a[u])||console.error("Vertex buffer is uninitialized!"),(h=c[u])||console.error("Vertex element descriptor is empty!"),this._context.bindBuffer(e),n=0;n<h.length;++n){e=h[n];var r=this._locations[e.name],t=e.baseInstance?e.baseInstance*e.stride:0;if(void 0===r&&console.error("There is no location for vertex attribute '"+e.name+"' defined."),e.baseInstance&&!e.divisor&&console.error("Vertex attribute '"+
e.name+"' uses baseInstanceOffset without divisor."),4>=e.count){if(g.enableVertexAttribArray(r),g.vertexAttribPointer(r,e.count,e.type,e.normalized,e.stride,e.offset+t),e.divisor&&0<e.divisor){var w=this._context.extensions.angleInstancedArrays;w&&w.vertexAttribDivisorANGLE(r,e.divisor)}}else if(16===e.count&&5126===e.type)for(var q=0;4>q;q++)(g.enableVertexAttribArray(r+q),g.vertexAttribPointer(r+q,4,e.type,e.normalized,e.stride,e.offset+16*q+t),e.divisor&&0<e.divisor)&&(w=this._context.extensions.angleInstancedArrays)&&
w.vertexAttribDivisorANGLE(r+q,e.divisor);else console.error("Unsupported vertex attribute element count: "+e.count)}d&&(b?g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,d.glName):this._context.bindBuffer(d))},d.prototype.unbind=function(){this.initialize();var a=this._context.extensions.vao;a?a.bindVertexArrayOES(null):this._unbindLayout()},d.prototype._unbindLayout=function(){var a=this._buffers,b=this._layout,c=this._locations,d=this._context;a||console.error("Vertex buffer dictionary is empty!");var e,h,
g,n=d.gl,u=0,r=0,t;for(t in a){(e=a[t])||console.error("Vertex buffer is uninitialized!");h=b[t];u=0;for(r=h.length;r>u;++u)g=h[u],n.disableVertexAttribArray(c[g.name]);d.unbindBuffer(e.bufferType)}(a=this._indexBuffer)&&d.unbindBuffer(a.bufferType)},d}();return e._nextId=0,e})},"esri/views/webgl/BufferObject":function(){define(["require","exports"],function(e,h){e=function(){function d(a,b,c,e){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=
void 0;this._context=a;this._bufferType=b;this._usage=c;this._id=d._nextId++;this._glName=this._context.gl.createBuffer();e&&this.setData(e)}return d.createIndex=function(a,b,c){return new d(a,34963,b,c)},d.createVertex=function(a,b,c){return new d(a,34962,b,c)},Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,
"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"byteSize",{get:function(){return 34962===this._bufferType?
this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0}),d.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context=null)},d.prototype.setData=function(a){if(a){if("number"==typeof a)0>a&&console.error("Buffer size cannot be negative!"),this._size=a;else{var b=a.byteLength;a instanceof Uint16Array&&(b/=2,this._indexType=5123);a instanceof Uint32Array&&(b/=4,this._indexType=5125);this._size=
b}b=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,a,this._usage);this._context.bindVAO(b)}},d.prototype.setSubData=function(a,b,c,d){if(void 0===b&&(b=0),void 0===c&&(c=0),a){(0>b||b>=this._size)&&console.error("offset is out of range!");var e=b,h=c,g=d,m=a.byteLength;a instanceof Uint16Array&&(m/=2,e*=2,h*=2,g*=2);a instanceof Uint32Array&&(m/=4,e*=4,h*=4,g*=2);void 0===d&&(d=m-1);c>=d&&console.error("end must be bigger than start!");
b+c-d>this._size&&console.error("An attempt to write beyond the end of the buffer!");b=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferSubData(this._bufferType,e,(a instanceof ArrayBuffer?a:a.buffer).slice(h,g));this._context.bindVAO(b)}},d}();return e._nextId=0,e})},"esri/views/2d/engine/webgl/glShaderSnippets":function(){define("require exports ../../../webgl/ShaderSnippets dojo/text!./Shaders.xml dojo/text!./bitblit.vs.glsl dojo/text!./bitblit.fs.glsl dojo/text!./stencil.vs.glsl dojo/text!./stencil.fs.glsl".split(" "),
function(e,h,d,a,b,c,m,k){function l(a,b){g+='\x3csnippet name\x3d"'+a+'"\x3e\x3c![CDATA[';g+=b;g+="]]\x3e\x3c/snippet\x3e"}var g="",g=g+'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e',g=g+"\x3csnippets\x3e";l("bitblitVS",b);l("bitblitFS",c);l("stencilVS",m);l("stencilFS",k);g+="\x3c/snippets\x3e";e=new d;return d.parse(g,e),d.parse(a,e),e})},"esri/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(e,h,d){return function(){function a(a){if(a)for(var b in a)this[b]=
a[b]}return a.parse=function(a,c){a=d.parse(a).getElementsByTagName("snippet");for(var b=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,e=/[\$\s]+/g,h=/\(([^\(\)]*)\)/,g=0;g<a.length;g++){for(var n=a[g].getAttribute("name"),u=a[g].textContent,r=void 0;null!==(r=u.match(b));){var t=r[0].replace(e,""),w=t.match(h),q=void 0;w&&(q=w[1].split(",").map(function(a){return a.trim()}));t=t.replace(h,"");q=c._instantiate(t,q);u=u.replace(r[0],q)}c[n]=u}},a.prototype._instantiate=function(a,c){a=this[a];c||
(c=[]);for(var b;b=a.match(/\$(\d+)/);){var d=parseInt(b[1],10);a=a.replace(b[0],c[d])}return a},a}()})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(e){e.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(h,d){var a=e.doc,b;d=d||"text/xml";if(h&&e.trim(h)&&"DOMParser"in e.global){b=(new DOMParser).parseFromString(h,d);h=b.documentElement;if("parsererror"==h.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==
h.namespaceURI){if(a=h.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0])a=a.firstChild.data;throw Error("Error parsing text "+h.firstChild.data+" \n"+a);}return b}if("ActiveXObject"in e.global){a=function(a){return"MSXML"+a+".DOMDocument"};a=["Microsoft.XMLDOM",a(6),a(4),a(3),a(2)];e.some(a,function(a){try{b=new ActiveXObject(a)}catch(k){return!1}return!0});if(h&&b&&(b.async=!1,b.loadXML(h),h=b.parseError,0!==h.errorCode))throw Error("Line: "+h.line+"\nCol: "+
h.linepos+"\nReason: "+h.reason+"\nError Code: "+h.errorCode+"\nSource: "+h.srcText);if(b)return b}else if(a.implementation&&a.implementation.createDocument){if(h&&e.trim(h)&&a.createElement){d=a.createElement("xml");d.innerHTML=h;var c=a.implementation.createDocument("foo","",null);e.forEach(d.childNodes,function(a){c.importNode(a,!0)});return c}return a.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(h,d){if(1<arguments.length)return dojox.xml.parser.replaceChildren(h,
(h.ownerDocument||e.doc).createTextNode(d)),d;if(void 0!==h.textContent)return h.textContent;var a="";h&&e.forEach(h.childNodes,function(b){switch(b.nodeType){case 1:case 5:a+=dojox.xml.parser.textContent(b);break;case 3:case 2:case 4:a+=b.nodeValue}});return a};dojox.xml.parser.replaceChildren=function(h,d){var a=[];e.isIE&&e.forEach(h.childNodes,function(b){a.push(b)});dojox.xml.parser.removeChildren(h);e.forEach(a,e.destroy);e.isArray(d)?e.forEach(d,function(a){h.appendChild(a)}):h.appendChild(d)};
dojox.xml.parser.removeChildren=function(e){for(var d=e.childNodes.length;e.hasChildNodes();)e.removeChild(e.firstChild);return d};dojox.xml.parser.innerXML=function(e){return e.innerXML?e.innerXML:e.xml?e.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(e):null};return dojox.xml.parser})},"esri/views/support/screenshotUtils":function(){define(["require","exports","dojo/_base/lang"],function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});h.adjustScreenshotSettings=
function(a,b){a=d.mixin({format:"png",quality:100},a||{});var c,e;a.includePadding?(c=b.width,e=b.height):(c=b.width-b.padding.left-b.padding.right,e=b.height-b.padding.top-b.padding.bottom);var k=c/e;return void 0!==a.width&&void 0===a.height?a.height=a.width/k:void 0!==a.height&&void 0===a.width&&(a.width=k*a.height),void 0!==a.height&&(a.height=Math.floor(a.height)),void 0!==a.width&&(a.width=Math.floor(a.width)),a.area||a.includePadding||(a.area={x:b.padding.left,y:b.padding.top,width:c,height:e}),
a};h.resampleHermite=function(a,b,c,d,e,h,g){void 0===g&&(g=!0);var k=b/e;c/=h;for(var l=Math.ceil(k/2),m=Math.ceil(c/2),t=0;h>t;t++)for(var w=0;e>w;w++){for(var q=4*(w+(g?h-t-1:t)*e),v=0,x=0,f=0,p=0,z=0,y=0,A=0,B=(t+.5)*c,D=Math.floor(t*c);(t+1)*c>D;D++)for(var F=Math.abs(B-(D+.5))/m,C=(w+.5)*k,F=F*F,E=Math.floor(w*k);(w+1)*k>E;E++){var G=Math.abs(C-(E+.5))/l,K=Math.sqrt(F+G*G);-1<=K&&1>=K&&(v=2*K*K*K-3*K*K+1,0<v&&(G=4*(E+D*b),A+=v*a[G+3],f+=v,255>a[G+3]&&(v=v*a[G+3]/250),p+=v*a[G],z+=v*a[G+1],y+=
v*a[G+2],x+=v))}d[q]=p/x;d[q+1]=z/x;d[q+2]=y/x;d[q+3]=A/f}}})},"esri/views/webgl/RenderingContext":function(){define(["require","exports","./enums","./Extensions"],function(e,h,d,a){e=function(){function b(b,d){this.gl=null;this._extensions=void 0;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=
!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,
zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.gl=b;this._extensions=new a(b,d);d=b.getParameter(b.VIEWPORT);this._viewport={x:d[0],y:d[1],width:d[2],height:d[3]};d=this.extensions.textureFilterAnisotropic;this._parameters={versionString:b.getParameter(b.VERSION),maxVertexTextureImageUnits:b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
maxVertexAttributes:b.getParameter(b.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:d?b.getParameter(d.MAX_TEXTURE_MAX_ANISOTROPY_EXT):void 0,maxTextureImageUnits:b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS)};this.enforceState()}return Object.defineProperty(b.prototype,"extensions",{get:function(){return this._extensions},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,
"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0}),b.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};this.gl=null},b.prototype.setBlendingEnabled=function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=a)},b.prototype.setBlendColor=function(a,b,d,e){(a!==this._blendColorState.r||b!==this._blendColorState.g||d!==this._blendColorState.b||
e!==this._blendColorState.a)&&(this.gl.blendColor(a,b,d,e),this._blendColorState.r=a,this._blendColorState.g=b,this._blendColorState.b=d,this._blendColorState.a=e)},b.prototype.setBlendFunction=function(a,b){(a!==this._blendFunctionState.srcRGB||b!==this._blendFunctionState.dstRGB)&&(this.gl.blendFunc(a,b),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=b)},b.prototype.setBlendFunctionSeparate=function(a,b,d,
e){(this._blendFunctionState.srcRGB!==a||this._blendFunctionState.srcAlpha!==d||this._blendFunctionState.dstRGB!==b||this._blendFunctionState.dstAlpha!==e)&&(this.gl.blendFuncSeparate(a,b,d,e),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=d,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=e)},b.prototype.setBlendEquation=function(a){this._blendEquationState.mode!==a&&(this.gl.blendEquation(a),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=
a)},b.prototype.setBlendEquationSeparate=function(a,b){(this._blendEquationState.mode!==a||this._blendEquationState.modeAlpha!==b)&&(this.gl.blendEquationSeparate(a,b),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=b)},b.prototype.setColorMask=function(a,b,d,e){(this._colorMaskState.r!==a||this._colorMaskState.g!==b||this._colorMaskState.b!==d||this._colorMaskState.a!==e)&&(this.gl.colorMask(a,b,d,e),this._colorMaskState.r=a,this._colorMaskState.g=b,this._colorMaskState.b=d,this._colorMaskState.a=
e)},b.prototype.setClearColor=function(a,b,d,e){(this._clearColor.r!==a||this._clearColor.g!==b||this._clearColor.b!==d||this._clearColor.a!==e)&&(this.gl.clearColor(a,b,d,e),this._clearColor.r=a,this._clearColor.g=b,this._clearColor.b=d,this._clearColor.a=e)},b.prototype.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=a)},b.prototype.setPolygonOffsetFillEnabled=function(a){this._polygonOffsetFillEnabled!==
a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a)},b.prototype.setPolygonOffset=function(a,b){this._polygonOffset[0]===a&&this._polygonOffset[1]===b||(this._polygonOffset[0]=a,this._polygonOffset[1]=b,this.gl.polygonOffset(a,b))},b.prototype.setCullFace=function(a){this._cullFace!==a&&(this.gl.cullFace(a),this._cullFace=a)},b.prototype.setFrontFace=function(a){this._frontFace!==a&&(this.gl.frontFace(a),this._frontFace=
a)},b.prototype.setScissorTestEnabled=function(a){this._scissorTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=a)},b.prototype.setScissorRect=function(a,b,d,e){(this._scissorRect.x!==a||this._scissorRect.y!==b||this._scissorRect.width!==d||this._scissorRect.height!==e)&&(this.gl.scissor(a,b,d,e),this._scissorRect.x=a,this._scissorRect.y=b,this._scissorRect.width=d,this._scissorRect.height=e)},b.prototype.setDepthTestEnabled=
function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a)},b.prototype.setClearDepth=function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),this._clearDepth=a)},b.prototype.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a)},b.prototype.setDepthWriteEnabled=function(a){this._depthWriteEnabled!==a&&(this.gl.depthMask(a),this._depthWriteEnabled=a)},b.prototype.setDepthRange=
function(a,b){(this._depthRange.zNear!==a||this._depthRange.zFar!==b)&&(this.gl.depthRange(a,b),this._depthRange.zNear=a,this._depthRange.zFar=b)},b.prototype.setStencilTestEnabled=function(a){this._stencilTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a)},b.prototype.setClearStencil=function(a){a!==this._clearStencil&&(this.gl.clearStencil(a),this._clearStencil=a)},b.prototype.setStencilFunction=function(a,b,d){(this._stencilFunction.func!==
a||this._stencilFunction.ref!==b||this._stencilFunction.mask!==d)&&(this.gl.stencilFunc(a,b,d),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=b,this._stencilFunction.mask=d)},b.prototype.setStencilFunctionSeparate=function(a,b,d,e){(this._stencilFunction.face!==a||this._stencilFunction.func!==b||this._stencilFunction.ref!==d||this._stencilFunction.mask!==e)&&(this.gl.stencilFuncSeparate(a,b,d,e),this._stencilFunction.face=a,this._stencilFunction.func=b,this._stencilFunction.ref=
d,this._stencilFunction.mask=e)},b.prototype.setStencilWriteMask=function(a){this._stencilWriteMask!==a&&(this.gl.stencilMask(a),this._stencilWriteMask=a)},b.prototype.setStencilOp=function(a,b,d){(this._stencilOperation.fail!==a||this._stencilOperation.zFail!==b||this._stencilOperation.zPass!==d)&&(this.gl.stencilOp(a,b,d),this._stencilOperation.face=1032,this._stencilOperation.fail=a,this._stencilOperation.zFail=b,this._stencilOperation.zPass=d)},b.prototype.setStencilOpSeparate=function(a,b,d,
e){(this._stencilOperation.face!==a||this._stencilOperation.fail!==b||this._stencilOperation.zFail!==d||this._stencilOperation.zPass!==e)&&(this.gl.stencilOpSeparate(a,b,d,e),this._stencilOperation.face=a,this._stencilOperation.face=a,this._stencilOperation.fail=b,this._stencilOperation.zFail=d,this._stencilOperation.zPass=e)},b.prototype.setLineWidth=function(a){var b=this._lineWidth;return this._lineWidth!==a&&(this.gl.lineWidth(a),this._lineWidth=a),b},b.prototype.setActiveTexture=function(a){var b=
this._activeTextureUnit;return 0<=a&&a!==this._activeTextureUnit&&(this.gl.activeTexture(d.BASE_TEXTURE_UNIT+a),this._activeTextureUnit=a),b},b.prototype.clear=function(a){a&&this.gl.clear(a)},b.prototype.drawArrays=function(a,b,d){this.gl.drawArrays(a,b,d)},b.prototype.drawElements=function(a,b,d,e){return 5123===d?void this.gl.drawElements(a,b,d,e):void(5125===d&&this._extensions.elementIndexUint?this.gl.drawElements(a,b,d,e):console.warn("Data type is uint however extension OES_Element_index_unit is not supported therefore this draw call cannot be made"))},
b.prototype.drawArraysInstanced=function(a,b,d,e){this._extensions.angleInstancedArrays?this._extensions.angleInstancedArrays.drawArraysInstancedANGLE(a,b,d,e):console.error("Extension ANGLE_instanced_arrays isn't supported!")},b.prototype.drawElementsInstanced=function(a,b,d,e,g){this._extensions.angleInstancedArrays?this._extensions.angleInstancedArrays.drawElementsInstancedANGLE(a,b,d,e,g):console.error("Extension ANGLE_instanced_arrays isn't supported!")},b.prototype.setViewport=function(a,b,
d,e){var c=this._viewport;c.x===a&&c.y===b&&c.width===d&&c.height===e||(c.x=a,c.y=b,c.width=d,c.height=e,this.gl.viewport(a,b,d,e))},b.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}},b.prototype.bindProgram=function(a){return a?void(this._activeShaderProgram!==a&&(a.initialize(),this.gl.useProgram(a.glName),this._activeShaderProgram=a)):(this.gl.useProgram(null),void(this._activeShaderProgram=null))},b.prototype.bindTexture=
function(a,d){void 0===d&&(d=0);-1===b._MAX_TEXTURE_IMAGE_UNITS&&(b._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(d>=b._MAX_TEXTURE_IMAGE_UNITS||0>d)&&console.error("Input texture unit is out of range of available units!");var c=this._textureUnitMap[d];return this.setActiveTexture(d),null==a||null==a.glName?(null!=c&&(this.gl.bindTexture(c.descriptor.target,null),c.setBoundToUnit(d,!1)),void(this._textureUnitMap[d]=null)):c&&c.id===a.id?void a.applyChanges():(this.gl.bindTexture(a.descriptor.target,
a.glName),a.setBoundToUnit(d,!0),a.applyChanges(),void(this._textureUnitMap[d]=a))},b.prototype.bindFramebuffer=function(a){return a?void(this._activeFramebuffer!==a&&(a.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.glName),this._activeFramebuffer=a)):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),void(this._activeFramebuffer=null))},b.prototype.bindBuffer=function(a){a&&(34962===a.bufferType?this._activeVertexBuffer=b._bindBuffer(this.gl,a,a.bufferType,this._activeVertexBuffer):
this._activeIndexBuffer=b._bindBuffer(this.gl,a,a.bufferType,this._activeIndexBuffer))},b.prototype.unbindBuffer=function(a){34962===a?this._activeVertexBuffer=b._bindBuffer(this.gl,null,a,this._activeVertexBuffer):this._activeIndexBuffer=b._bindBuffer(this.gl,null,a,this._activeIndexBuffer)},b.prototype.bindVAO=function(a){return a?void(this._activeVertexArrayObject&&this._activeVertexArrayObject.id===a.id||(a.bind(),this._activeVertexArrayObject=a)):void(this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),
this._activeVertexArrayObject=null))},b.prototype.getBoundTexture=function(a){return this._textureUnitMap[a]},b.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer},b.prototype.getBoundVAO=function(){return this._activeVertexArrayObject},b.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var a=0;a<this.parameters.maxTextureImageUnits;a++)this.bindTexture(null,a);this.setBlendingEnabled(!1);
this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);
this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)},b.prototype.enforceState=function(){var a=this.gl,b=this._extensions.vao;b&&b.bindVertexArrayOES(null);for(var e=0;e<this.parameters.maxVertexAttributes;e++)a.disableVertexAttribArray(e);if(this._activeVertexBuffer?a.bindBuffer(this._activeVertexBuffer.bufferType,
this._activeVertexBuffer.glName):a.bindBuffer(34962,null),this._activeIndexBuffer?a.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):a.bindBuffer(34963,null),b&&this._activeVertexArrayObject)(b=this._activeVertexArrayObject)&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null),this.bindVAO(b);a.bindFramebuffer(a.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);a.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:
null);a.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);!0===this._blendEnabled?a.enable(this.gl.BLEND):a.disable(this.gl.BLEND);a.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);a.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);a.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,
this._clearColor.a);a.clearDepth(this._clearDepth);a.clearStencil(this._clearStencil);a.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);a.cullFace(this._cullFace);a.depthFunc(this._depthFunction);a.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);a.depthMask(this._depthWriteEnabled);a.frontFace(this._frontFace);a.lineWidth(this._lineWidth);!0===this._polygonCullingEnabled?
a.enable(a.CULL_FACE):a.disable(a.CULL_FACE);a.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?a.enable(a.POLYGON_OFFSET_FILL):a.disable(a.POLYGON_OFFSET_FILL);a.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?a.enable(a.SCISSOR_TEST):a.disable(a.SCISSOR_TEST);a.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);a.stencilOpSeparate(this._stencilOperation.face,
this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST);a.stencilMask(this._stencilWriteMask);for(b=0;b<this.parameters.maxTextureImageUnits;b++)a.activeTexture(d.BASE_TEXTURE_UNIT+b),a.bindTexture(3553,null),(e=this._textureUnitMap[b])&&a.bindTexture(e.descriptor.target,e.glName);a.activeTexture(d.BASE_TEXTURE_UNIT+this._activeTextureUnit);a.viewport(this._viewport.x,this._viewport.y,this._viewport.width,
this._viewport.height)},b._bindBuffer=function(a,b,d,e){return b?e===b?e:(a.bindBuffer(d,b.glName),b):(a.bindBuffer(d,null),null)},b}();return e._MAX_TEXTURE_IMAGE_UNITS=-1,e})},"esri/views/webgl/enums":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});h.BASE_TEXTURE_UNIT=33984})},"esri/views/webgl/Extensions":function(){define(["require","exports"],function(e,h){return function(){function d(a,b){if(this._vaoInit=!1,this._angleInstancedArraysInit=
!1,this._standardDerivativesInit=!1,this._elementIndexUintInit=!1,this._depthTextureInit=!1,this._textureFilterAnisotropicInit=!1,this._shaderTextureLODInit=!1,this._compressedTextureS3TCInit=!1,this._disjointTimerQueryInit=!1,this._gl=a,b&&b.disabledExtensions)a=b.disabledExtensions,a.vao&&(this._vao=null,this._vaoInit=!0),a.angleInstancedArrays&&(this._angleInstancedArrays=null,this._angleInstancedArraysInit=!0),a.standardDerivatives&&(this._standardDerivatives=null,this._standardDerivativesInit=
!0),a.elementIndexUint&&(this._elementIndexUint=null,this._elementIndexUintInit=!0),a.depthTexture&&(this._depthTexture=null,this._depthTextureInit=!0),a.textureFilterAnisotropic&&(this._textureFilterAnisotropic=null,this._textureFilterAnisotropicInit=!0),a.compressedTextureS3TC&&(this._compressedTextureS3TC=null,this._compressedTextureS3TCInit=!0),a.shaderTextureLOD&&(this._shaderTextureLOD=null,this._shaderTextureLODInit=!0),a.disjointTimerQuery&&(this._disjointTimerQuery=null,this._disjointTimerQueryInit=
!0)}return Object.defineProperty(d.prototype,"vao",{get:function(){return this._vaoInit||(this._vao=this._gl.getExtension("OES_vertex_array_object")||this._gl.getExtension("MOZ_OES_vertex_array_object")||this._gl.getExtension("WEBKIT_OES_vertex_array_object"),this._vaoInit=!0),this._vao},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"angleInstancedArrays",{get:function(){return this._angleInstancedArraysInit||(this._angleInstancedArrays=this._gl.getExtension("ANGLE_instanced_arrays"),
this._angleInstancedArraysInit=!0),this._angleInstancedArrays},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"standardDerivatives",{get:function(){return this._standardDerivativesInit||(this._standardDerivatives=this._gl.getExtension("OES_standard_derivatives"),this._standardDerivativesInit=!0),this._standardDerivatives},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"elementIndexUint",{get:function(){return this._elementIndexUintInit||(this._elementIndexUint=
this._gl.getExtension("OES_element_index_uint"),this._elementIndexUintInit=!0),this._elementIndexUint},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"depthTexture",{get:function(){return this._depthTextureInit||(this._depthTexture=this._gl.getExtension("WEBGL_depth_texture")||this._gl.getExtension("MOZ_WEBGL_depth_texture")||this._gl.getExtension("WEBKIT_WEBGL_depth_texture"),this._depthTextureInit=!0),this._depthTexture},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,
"textureFilterAnisotropic",{get:function(){return this._textureFilterAnisotropicInit||(this._textureFilterAnisotropic=this._gl.getExtension("EXT_texture_filter_anisotropic")||this._gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this._gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this._textureFilterAnisotropicInit=!0),this._textureFilterAnisotropic},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"shaderTextureLOD",{get:function(){return this._shaderTextureLODInit||
(this._shaderTextureLOD=this._gl.getExtension("EXT_shader_texture_lod"),this._shaderTextureLODInit=!0),this._shaderTextureLOD},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"compressedTextureS3TC",{get:function(){return this._compressedTextureS3TCInit||(this._compressedTextureS3TC=this._gl.getExtension("WEBGL_compressed_texture_s3tc"),this._compressedTextureS3TCInit=!0),this._compressedTextureS3TC},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"disjointTimerQuery",
{get:function(){return this._disjointTimerQueryInit||(this._disjointTimerQuery=this._gl.getExtension("EXT_disjoint_timer_query"),this._disjointTimerQueryInit=!0),this._disjointTimerQuery},enumerable:!0,configurable:!0}),d}()})},"esri/views/webgl/FramebufferObject":function(){define(["require","exports","./Texture"],function(e,h,d){e=function(){function a(b,c,e,k){if(this._context=null,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachment=null,this._initialized=
!1,this._context=b,this._desc={colorTarget:c.colorTarget,depthStencilTarget:c.depthStencilTarget,width:c.width,height:c.height,multisampled:c.multisampled},this._id=a._nextId++,e)b=void 0,e instanceof d?(this._colorAttachment=e,b=e.descriptor):(b=e,this._colorAttachment=new d(this._context,b)),0!==this._desc.colorTarget&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),a._validateTextureDimensions(b,this._desc);k&&(this._context.extensions.depthTexture||
console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),e=void 0,k instanceof d?(this._depthStencilTexture=k,e=this._depthStencilTexture.descriptor):(e=k,this._depthStencilTexture=new d(this._context,e)),a._validateTextureDimensions(e,this._desc))}return a.create=function(b,c){return new a(b,c)},a.createWithAttachments=function(b,c,d,e){return new a(b,d,c,e)},Object.defineProperty(a.prototype,"id",{get:function(){return this._id},
enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof d?this._colorAttachment:null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},
enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){this._context&&this._glName&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),this._context.gl.deleteFramebuffer(this._glName),this._glName=null)},a.prototype.attachColorTexture=function(b){if(b){if(a._validateTextureDimensions(b.descriptor,
this._desc),this._disposeColorAttachment(),this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,b.glName,0)}this._colorAttachment=b}},a.prototype.detachColorTexture=function(){var a=void 0;if(this._colorAttachment instanceof d){if(a=this._colorAttachment,this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;this._context.gl.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,
null,0)}this._colorAttachment=null}return a},a.prototype.attachDepthStencilTexture=function(b){if(b){var c=b.descriptor;if(34041!==c.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==c.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!"),this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),a._validateTextureDimensions(c,
this._desc),4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized)this._context.bindFramebuffer(this),c=this._context.gl,c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,b.glName,0);this._depthStencilTexture=b}},a.prototype.detachDepthStencilTexture=function(){var a=this._depthStencilTexture;if(a&&this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;this._context.gl.framebufferTexture2D(c.FRAMEBUFFER,
c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,null,0)}return this._depthStencilTexture=null,a},a.prototype.copyToTexture=function(a,c,d,e,h,g,n){(0>a||0>c||0>h||0>g)&&console.error("Offsets cannot be negative!");(0>=d||0>=e)&&console.error("Copy width and height must be greater than zero!");var b=this._desc,k=n.descriptor;3553!==n.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(a+d>b.width||c+e>b.height||h+d>k.width||g+e>k.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");
b=this._context;b.bindTexture(n);b.bindFramebuffer(this);b.gl.copyTexSubImage2D(3553,0,h,g,a,c,d,e)},a.prototype.readPixels=function(a,c,d,e,h,g,n){(0>=d||0>=e)&&console.error("Copy width and height must be greater than zero!");n||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(a,c,d,e,h,g,n)},a.prototype.resize=function(b,c){var e=this._desc;if(e.width!==b||e.height!==c){if(!this._initialized){if(e.width=b,e.height=c,this._colorAttachment instanceof
d)e=this._colorAttachment,e.resize(b,c);return void(this._depthStencilTexture&&this._depthStencilTexture.resize(b,c))}if(e.width=b,e.height=c,this._colorAttachment instanceof d){var e=this._colorAttachment,k=e.descriptor;k.width=b;k.height=c;this._colorAttachment.dispose();this._colorAttachment=new d(this._context,k);a._validateTextureDimensions(e.descriptor,this._desc)}else this._colorAttachment&&this._disposeColorAttachment();null!=this._depthStencilTexture?(k=this._depthStencilTexture.descriptor,
k.width=b,k.height=c,this._depthStencilTexture.dispose(),this._depthStencilTexture=new d(this._context,k)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments();this._initialized=!1}},a.prototype.initialize=function(){if(this._initialized)return!1;var a=this._context.gl;this._glName&&a.deleteFramebuffer(this._glName);var c=a.createFramebuffer(),e=this._desc;if(a.bindFramebuffer(a.FRAMEBUFFER,c),!this._colorAttachment)if(0===e.colorTarget)this._colorAttachment=new d(this._context,
{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height});else{var k=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,k);a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,e.width,e.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,k);this._colorAttachment=k}this._colorAttachment instanceof d&&a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._colorAttachment.glName,0);switch(e.depthStencilTarget){case 1:case 3:k=
a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,k);var h=1===e.depthStencilTarget?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT;a.renderbufferStorage(a.RENDERBUFFER,1===e.depthStencilTarget?a.DEPTH_COMPONENT16:a.DEPTH_STENCIL,e.width,e.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,h,a.RENDERBUFFER,k);this._depthAttachment=k;break;case 2:k=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,k);a.renderbufferStorage(a.RENDERBUFFER,a.STENCIL_INDEX8,e.width,e.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,
a.STENCIL_ATTACHMENT,a.RENDERBUFFER,k);this._stencilAttachment=k;break;case 4:this._depthStencilTexture||(this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new d(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height})),a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,
a.TEXTURE_2D,this._depthStencilTexture.glName,0)}return a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!"),this._glName=c,this._initialized=!0,!0},a.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof d){var a=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)}a.dispose()}else this._colorAttachment instanceof
WebGLRenderbuffer&&(a=this._colorAttachment,c=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(a));this._colorAttachment=null},a.prototype._disposeDepthStencilAttachments=function(){var a=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,1===this._desc.depthStencilTarget?
c.DEPTH_ATTACHMENT:c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,null)}a.deleteRenderbuffer(this._depthAttachment);this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),c=this._context.gl,c.framebufferRenderbuffer(c.FRAMEBUFFER,c.STENCIL_ATTACHMENT,c.RENDERBUFFER,null)),a.deleteRenderbuffer(this._stencilAttachment),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),a=this._context.gl,
a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)},a._validateTextureDimensions=function(a,c){console.assert(0<=a.width&&0<=a.height);3553!==a.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==c.width&&0<=c.width&&void 0!==c.height&&0<=c.height?(c.width!==a.width||c.height!==a.height)&&console.error("Color attachment texture must match the framebuffer's!"):(c.width=a.width,c.height=
a.height)},a}();return e._nextId=0,e})},"esri/views/webgl/Texture":function(){define(["require","exports"],function(e,h){e=function(){function d(a,b,c){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=a;this._desc={pixelFormat:b.pixelFormat,dataType:b.dataType,target:b.target?b.target:3553,samplingMode:b.samplingMode?b.samplingMode:9729,wrapMode:b.wrapMode?b.wrapMode:10497,maxAnisotropy:b.maxAnisotropy,
flipped:void 0!==b.flipped?b.flipped:!1,hasMipmap:void 0!==b.hasMipmap?b.hasMipmap:!1,level:void 0!==b.level?b.level:0,unpackAlignment:b.unpackAlignment?b.unpackAlignment:4,width:b.width,height:b.height,preMultiplyAlpha:void 0!==b.preMultiplyAlpha?b.preMultiplyAlpha:!1};this._id=++d._nextId;this.setData(c)}return Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!0,
configurable:!0}),Object.defineProperty(d.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),d.prototype.dispose=function(){var a=this;if(this._context){if(this._glName){var b=this._context.gl;this._boundToUnits.forEach(function(b){a._context.bindTexture(null,b)});b.deleteTexture(this._glName);this._glName=null}this._context=null}},d.prototype.resize=function(a,b){var c=this._desc;c.width===a&&c.height===b||(c.width=a,c.height=b,this.setData(null))},d.prototype.setData=
function(a){var b=this._context.gl;this._glName||(this._glName=b.createTexture());void 0===a&&(a=null);null===a&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var c=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var e=this._desc;d._validateTexture(e);b.pixelStorei(b.UNPACK_ALIGNMENT,e.unpackAlignment);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,e.flipped?1:0);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.preMultiplyAlpha);a instanceof ImageData||a instanceof
HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement?(e.width&&e.height&&console.assert(a.width===e.width&&a.height===e.height),b.texImage2D(b.TEXTURE_2D,e.level,e.pixelFormat,e.pixelFormat,e.dataType,a),void 0===this._desc.width&&(this._desc.width=a.width),void 0===this._desc.height&&(this._desc.height=a.height)):((null==e.width||null==e.height)&&console.error("Width and height must be specified!"),b.texImage2D(b.TEXTURE_2D,e.level,e.pixelFormat,e.width,e.height,0,e.pixelFormat,
e.dataType,a));e.hasMipmap&&this.generateMipmap();d._applySamplingMode(b,this._desc);d._applyWrapMode(b,this._desc);d._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(c,0)},d.prototype.updateData=function(a,b,c,d,e,h){h||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var g=this._context.gl,k=this._desc,l=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>b||
0>c||d>k.width||e>k.height||b+d>k.width||c+e>k.height)&&console.error("An attempt to update out of bounds of the texture!");h instanceof ImageData||h instanceof HTMLImageElement||h instanceof HTMLCanvasElement||h instanceof HTMLVideoElement?(console.assert(h.width===d&&h.height===e),g.texSubImage2D(g.TEXTURE_2D,a,b,c,k.pixelFormat,k.dataType,h)):g.texSubImage2D(g.TEXTURE_2D,a,b,c,d,e,k.pixelFormat,k.dataType,h);this._context.bindTexture(l,0)},d.prototype.generateMipmap=function(){var a=this._desc;
a.hasMipmap||(a.hasMipmap=!0,d._validateTexture(a));9729===a.samplingMode?(this._samplingModeDirty=!0,a.samplingMode=9985):9728===a.samplingMode&&(this._samplingModeDirty=!0,a.samplingMode=9984);a=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var b=this._context.gl;b.generateMipmap(b.TEXTURE_2D);this._context.bindTexture(a,0)},d.prototype.setSamplingMode=function(a){a!==this._desc.samplingMode&&(this._desc.samplingMode=a,d._validateTexture(this._desc),this._samplingModeDirty=
!0)},d.prototype.setWrapMode=function(a){a!==this._desc.wrapMode&&(this._desc.wrapMode=a,d._validateTexture(this._desc),this._wrapModeDirty=!0)},d.prototype.applyChanges=function(){var a=this._context.gl,b=this._desc;this._samplingModeDirty&&(d._applySamplingMode(a,b),this._samplingModeDirty=!1);this._wrapModeDirty&&(d._applyWrapMode(a,b),this._wrapModeDirty=!1)},d.prototype.setBoundToUnit=function(a,b){b?this._boundToUnits.add(a):this._boundToUnits["delete"](a)},d._isPowerOfTwo=function(a){return 0===
(a&a-1)},d._validateTexture=function(a){(0>a.width||0>a.height)&&console.error("Negative dimension parameters are not allowed!");d._isPowerOfTwo(a.width)&&d._isPowerOfTwo(a.height)||(33071!==a.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),a.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))},d._applySamplingMode=function(a,b){var c=b.samplingMode;9985===c||9987===c?c=9729:(9984===c||9986===c)&&(c=9728);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,b.samplingMode)},d._applyWrapMode=function(a,b){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,b.wrapMode);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,b.wrapMode)},d._applyAnisotropicFilteringParameters=function(a,b){if(null!=b.maxAnisotropy){var c=a.extensions.textureFilterAnisotropic;c&&(a=a.gl,a.texParameterf(a.TEXTURE_2D,c.TEXTURE_MAX_ANISOTROPY_EXT,b.maxAnisotropy))}},d}();return e._nextId=0,e})},"esri/views/webgl/webgl-utils":function(){define([],
function(){var e=function(e,d){for(var a=["webgl","experimental-webgl","webkit-3d","moz-webgl"],b=null,c=0;c<a.length;++c){try{b=e.getContext(a[c],d)}catch(m){}if(b)break}return b};return{create3DContext:e,setupWebGL:function(h,d){function a(a){var b=h.parentNode;b&&(b.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+a+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}
return window.WebGLRenderingContext?(d=e(h,d))?[d]:(a('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e']):(a('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),
[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'])},detectWebGL:function(){var h;try{h=window.WebGLRenderingContext}catch(a){h=[!1,0]}var d;try{d=e(document.createElement("canvas"))}catch(a){d=[!1,1]}h?d?(h=d,h=[!0,{VERSION:h.getParameter(h.VERSION),SHADING_LANGUAGE_VERSION:h.getParameter(h.SHADING_LANGUAGE_VERSION),VENDOR:h.getParameter(h.VENDOR),RENDERER:h.getParameter(h.RENDERER),EXTENSIONS:h.getSupportedExtensions(),
MAX_TEXTURE_SIZE:h.getParameter(h.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:h.getParameter(h.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:h.getParameter(h.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]):h=[!1,1]:h=[!1,0];return h}}})},"esri/views/2d/layers/support/GraphicsView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Collection ../../../../core/HandleRegistry ../../../../core/promiseUtils ../../../../Graphic ../../../layers/GraphicsView ../../engine/graphics/GFXSurface ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r){e=function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=a.apply(this,b)||this;return d._frontGroup=new u,d._handles=new m,d._objects=new Map,d.container=new n,d.container.addChild(d._frontGroup),d.watch("graphics",function(){return d._reset()},!0),d}return d(b,a),b.prototype.hitTest=function(a,b){if(!this.view||!this.view.position)return null;a+=this.view.position[0]-window.pageXOffset;b+=this.view.position[1]-window.pageYOffset;
return(a=this.container.hitTest(a,b))?k.resolve(a.graphic):null},b.prototype._reset=function(){var a=this;this._handles.remove("graphics");this.graphics&&(this.graphics.forEach(this._add,this),this._handles.add(this.graphics.on("change",function(b){return a._graphicsChangeHandler(b)}),"graphics"))},b.prototype._add=function(a){if(!this._objects.has(a)){var b=new r;b.graphic=a;b.renderingInfo={symbol:a.symbol};this._objects.set(a,b);this._frontGroup.addChild(b)}},b.prototype._remove=function(a){var b=
this._objects.get(a);b&&(this._objects["delete"](a),this._frontGroup.removeChild(b))},b.prototype._graphicsChangeHandler=function(a){for(var b=a.removed,c=0,d=a.added;c<d.length;c++)a=d[c],this._add(a);for(c=0;c<b.length;c++)a=b[c],this._remove(a)},b}(b.declared(g));return a([b.cast(c.ofType(l))],e.prototype,"graphics",void 0),a([b.property()],e.prototype,"view",void 0),e=a([b.subclass("esri.views.2d.layers.support.GraphicsView2D")],e)})},"esri/views/layers/GraphicsView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Collection ../../Graphic".split(" "),
function(e,h,d,a,b,c,m,k){e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.graphics=null,b.renderer=null,b.view=null,b}return d(b,a),b}(b.declared(c));return a([b.property({type:m.ofType(k)})],e.prototype,"graphics",void 0),a([b.property()],e.prototype,"renderer",void 0),a([b.property()],e.prototype,"view",void 0),e=a([b.subclass("esri.views.layers.GraphicsView")],e)})},"esri/views/2d/engine/graphics/GFXSurface":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../../libs/gl-matrix/mat2d ../../libs/gl-matrix/common ../../libs/gfx ../../viewpointUtils ../Container ./Projector ../cssUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){var u=b.identity(b.create());return function(e){function h(){var a=null!==e&&e.apply(this,arguments)||this;return a._transform=b.create(),a._projector=new g,a}return d(h,e),h.prototype.createElement=function(){var a=document.createElement("div");return a.setAttribute("class","esri-display-object"),a},h.prototype.setElement=function(a){this.surface&&(this.surface.destroy(),this.surface=null);(this.element=a)&&(this.surface=m.createSurface(this.element,400,400))},h.prototype.doRender=
function(a){var d=this.element.style;if(!this.visible)return void(d.display="none");d.display="block";d.opacity=""+this.opacity;var g=this._transform,h=a.state;if(a.stationary)k.getMatrix(g,h.center,h.size,h.resolution,c.toRadian(h.rotation),1),this.surface.setDimensions(h.size[0],h.size[1]),this._projector.update(g,h.resolution),this.children.forEach(function(a){a.g&&a.g.setTransform(u)}),e.prototype.doRender.call(this,a);else{var f=b.invert(b.create(),g);b.multiply(f,h.transform,f);this.children.forEach(function(a){a.g&&
a.g.setTransform(f)})}n.clip(d,h.clipRect);d.transform=n.cssMatrix3d(b.fromRotation(b.create(),c.toRadian(h.rotation)));this.surface.rawNode.style.transform=n.cssMatrix(b.fromRotation(b.create(),c.toRadian(-h.rotation)))},h.prototype.hitTest=function(a,b){if(!this.attached)return null;var c=this.surface.rawNode,c=c.parentElement||c.parentNode;c.style.zIndex="9000";a=document.elementFromPoint(a,b);return(a=(c.style.zIndex="",a))&&a.gfxObject||null},h.prototype.prepareChildrenRenderParameters=function(b){return a({},
b,{projector:this._projector,surface:this.surface})},h.prototype.beforeRenderChildren=function(a,b){this.surface.openBatch()},h.prototype.attachChild=function(a,b){return a.attach(b)},h.prototype.detachChild=function(a,b){return a.detach()},h.prototype.renderChild=function(a,b){return a.processRender(b)},h.prototype.afterRenderChildren=function(a,b){this.surface.closeBatch()},h}(l)})},"esri/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(e){for(var h,d=
1,a=arguments.length;a>d;d++){h=arguments[d];for(var b in h)Object.prototype.hasOwnProperty.call(h,b)&&(e[b]=h[b])}return e}})},"esri/views/2d/libs/gfx":function(){define("require exports ./gfx/svg ./gfx/Circle ./gfx/Group ./gfx/Path ./gfx/Image ./gfx/Rect ./gfx/Shape ./gfx/Surface ./gfx/Text".split(" "),function(e,h,d,a,b,c,m,k,l,g,n){Object.defineProperty(h,"__esModule",{value:!0});h.createSurface=d.createSurface;h.Circle=a["default"];h.Group=b["default"];h.Path=c["default"];h.Image=m["default"];
h.Rect=k["default"];h.Shape=l["default"];h.Surface=g["default"];h.Text=n["default"]})},"esri/views/2d/libs/gfx/svg":function(){define(["require","exports","dojo/dom","./Surface"],function(e,h,d,a){function b(a,b){return document.createElementNS?document.createElementNS(a,b):document.createElement(b)}Object.defineProperty(h,"__esModule",{value:!0});h.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};h.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,
1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};h._createElementNS=b;h._setAttributeNS=function(a,b,d,e){return a.setAttributeNS?a.setAttributeNS(b,d,e):a.setAttribute(d,e)};h._createTextNode=function(a){return document.createTextNode(a)};h._createFragment=function(){return document.createDocumentFragment()};h.getRef=function(a){return a&&"none"!==a?a.match(/^url\(#.+\)$/)?d.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?
d.byId(a.slice(1)):null:null};h.createSurface=function(c,e,k){var l=new a["default"];l.rawNode=b(h.xmlns.svg,"svg");l.rawNode.setAttribute("overflow","hidden");e&&l.rawNode.setAttribute("width",0>e?0:e);k&&l.rawNode.setAttribute("height",0>k?0:k);e=b(h.xmlns.svg,"defs");return l.rawNode.appendChild(e),l.defNode=e,l._parent=d.byId(c),l._parent.appendChild(l.rawNode),l}})},"esri/views/2d/libs/gfx/Surface":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/has dojo/_base/array dojo/dom-construct dojox/gfx/_base ./svg ./Container ./Circle ./Group ./Path ./Image ./Rect ./Text".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w){Object.defineProperty(h,"__esModule",{value:!0});var q=navigator.userAgent,v=534<function(){var a=/WebKit\/(\d*)/.exec(q);return a?parseInt(a[1],10):0}();e=function(e){function f(){var a=null!==e&&e.apply(this,arguments)||this;return a.rawNode=null,a._parent=null,a._nodes=[],a._events=[],a}return d(f,e),f.prototype.destroy=function(){if(b.forEach(this._nodes,c.destroy),this._nodes=[],b.forEach(this._events,function(a){a&&a.remove()}),this._events=[],this.rawNode=
null,a("ie"))for(;this._parent.lastChild;)c.destroy(this._parent.lastChild);else this._parent.innerHTML="";this.defNode=this._parent=null},f.prototype.setDimensions=function(a,b){if(!this.rawNode)return this;a=0>a?0:a;b=0>b?0:b;return this.rawNode.setAttribute("width",a),this.rawNode.setAttribute("height",b),v&&(this.rawNode.style.width=a,this.rawNode.style.height=b),this},f.prototype.getDimensions=function(){return this.rawNode?{width:m.normalizedLength(this.rawNode.getAttribute("width")),height:m.normalizedLength(this.rawNode.getAttribute("height"))}:
null},f.prototype.getEventSource=function(){return this.rawNode},f.prototype._getRealMatrix=function(){return null},f.prototype.createShape=function(a){switch(a.type){case m.defaultPath.type:return this.createPath(a);case m.defaultRect.type:return this.createRect(a);case m.defaultCircle.type:return this.createCircle(a);case m.defaultImage.type:return this.createImage(a);case m.defaultText.type:return this.createText(a)}return console.error("[gfx] unknown shape",a),null},f.prototype.createGroup=function(){return this.createObject(n["default"])},
f.prototype.createRect=function(a){return this.createObject(t["default"],a)},f.prototype.createCircle=function(a){return this.createObject(g["default"],a)},f.prototype.createImage=function(a){return this.createObject(r["default"],a)},f.prototype.createText=function(a){return this.createObject(w["default"],a)},f.prototype.createPath=function(a){return this.createObject(u["default"],a)},f.prototype.createObject=function(a,b){if(!this.rawNode)return null;var c=new a;a=k._createElementNS(k.xmlns.svg,
a.nodeType);return c.setRawNode(a),c.setShape(b),this.add(c),c},f}(l["default"]);h["default"]=e})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(e,h,d,a,b,c,m,k,l){var g=h.getObject("dojox.gfx",!0),n=g._base={};g._hasClass=function(a,b){return(a=a.getAttribute("className"))&&0<=(" "+a+" ").indexOf(" "+b+" ")};g._addClass=function(a,b){var c=
a.getAttribute("className")||"";(!c||0>(" "+c+" ").indexOf(" "+b+" "))&&a.setAttribute("className",c+(c?" ":"")+b)};g._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};n._getFontMeasurements=function(){var c={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},d,e;a("ie")&&(e=b.doc.documentElement.style.fontSize||"",e||(b.doc.documentElement.style.fontSize=
"100%"));var g=k.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},b.body());for(d in c)g.style.fontSize=d,c[d]=16*Math.round(12*g.offsetHeight/16)/12/1E3;a("ie")&&(b.doc.documentElement.style.fontSize=e);b.body().removeChild(g);return c};var u=null;n._getCachedFontMeasurements=function(a){if(a||!u)u=n._getFontMeasurements();return u};var r=null,t={};n._getTextBox=function(a,
c,d){var e,f,g=arguments.length,h;r||(r=k.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},b.body()));e=r;e.className="";f=e.style;f.borderWidth="0";f.margin="0";f.padding="0";f.outline="0";if(1<g&&c)for(h in c)h in t||(f[h]=c[h]);2<g&&d&&(e.className=d);e.innerHTML=a;e.getBoundingClientRect?(f=e.getBoundingClientRect(),f={l:f.left,t:f.top,w:f.width||f.right-f.left,h:f.height||f.bottom-f.top}):f=l.getMarginBox(e);e.innerHTML="";return f};n._computeTextLocation=
function(a,b,c,d){var e={};switch(a.align){case "end":e.x=a.x-b;break;case "middle":e.x=a.x-b/2;break;default:e.x=a.x}e.y=a.y-c*(d?.75:1);return e};n._computeTextBoundingBox=function(a){if(!g._base._isRendered(a))return{x:0,y:0,width:0,height:0};var b;b=a.getShape();var c=a.getFont()||g.defaultFont;a=a.getTextWidth();c=g.normalizedLength(c.size);b=n._computeTextLocation(b,a,c,!0);return{x:b.x,y:b.y,width:a,height:c}};n._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==
a};var w=0;n._getUniqueId=function(){var a;do a=e._scopeName+"xUnique"+ ++w;while(m.byId(a));return a};var q=a("pointer-events")?"touchAction":a("MSPointer")?"msTouchAction":null;n._fixMsTouchAction=q?function(a){a.rawNode.style[q]="none"}:function(){};h.mixin(g,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},
defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},
defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var c=a[b];if(c)return new c;c=a[b]=new Function;c.prototype=g["default"+b];return new c}}(),normalizeColor:function(a){return a instanceof d?a:new d(a)},normalizeParameters:function(a,
b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return h.delegate(a);var d={};for(c in a)c in d||(d[c]=h.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var d=c.indexOf(".");0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=
g.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=a[2];var c=a[3].indexOf("/");b.size=0>c?a[3]:a[3].substring(0,c);var d=4;0>c&&("/"==a[4]?d=6:"/"==a[4].charAt(0)&&(d=5));d<a.length&&(b.family=a.slice(d).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return g._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*g.px_in_pt()},px2pt:function(a){return a/g.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;
if(2<a.length){var b=g.px_in_pt(),c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return 72*c*b;case "pc":return 12*c*b;case "mm":return c*g.mm_in_pt*b;case "cm":return c*g.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b="string"==typeof a?g[a]:a;b&&(c.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),
function(a){g[a]=b[a]}),"string"==typeof a?g.renderer=a:c.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return g.renderer=g[a]&&g[a].Surface===g.Surface?a:null}))}});return g})},"esri/views/2d/libs/gfx/Container":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/matrix ./Shape ./svg".split(" "),function(e,h,d,a,b,c){Object.defineProperty(h,"__esModule",{value:!0});e=function(b){function e(){var a=null!==b&&b.apply(this,arguments)||this;
return a.children=[],a._batch=0,a}return d(e,b),e.prototype.openBatch=function(){return this._batch||(this.fragment=c._createFragment()),++this._batch,this},e.prototype.closeBatch=function(){return this._batch=0<this._batch?--this._batch:0,this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),this.fragment=null),this},e.prototype.add=function(a){if(this===a.getParent())return this;this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode);var b=a.getParent();
return b&&b.remove(a,!0),this.children.push(a),a._setParent(this,this._getRealMatrix()),this},e.prototype.remove=function(a,b){if(void 0===b&&(b=!1),this!==a.getParent())return this;this.rawNode===a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode);this.fragment&&this.fragment===a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode);for(var c=0;c<this.children.length;++c)if(this.children[c]===a){b||(a.parent=null,a.parentMatrix=null);this.children.splice(c,1);break}return this},e.prototype.clear=
function(a){void 0===a&&(a=!1);for(var b=this.rawNode;b.lastChild;)b.removeChild(b.lastChild);var c=this.defNode;if(c){for(;c.lastChild;)c.removeChild(c.lastChild);b.appendChild(c)}for(c=0;c<this.children.length;++c)b=this.children[c],b.parent=null,b.parentMatrix=null,a&&b.destroy();return this.children=[],this},e.prototype.getBoundingBox=function(){if(!this.children)return null;var b=null;return this.children.forEach(function(c){var d=c.getBoundingBox();d&&((c=c.getTransform())&&(d=a.multiplyRectangle(c,
d)),b?(b.x=Math.min(b.x,d.x),b.y=Math.min(b.y,d.y),b.endX=Math.max(b.endX,d.x+d.width),b.endY=Math.max(b.endY,d.y+d.height)):b={x:d.x,y:d.y,endX:d.x+d.width,endY:d.y+d.height,width:0,height:0})}),b&&(b.width=b.endX-b.x,b.height=b.endY-b.y),b},e.prototype._moveChildToFront=function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]===a){this.children.splice(b,1);this.children.push(a);break}return this},e.prototype._moveChildToBack=function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]===
a){this.children.splice(b,1);this.children.unshift(a);break}return this},e}(b["default"]);h["default"]=e})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(e,h){var d=e.matrix={},a={};d._degToRad=function(b){return a[b]||(a[b]=Math.PI*b/180)};d._radToDeg=function(a){return a/Math.PI*180};d.Matrix2D=function(a){if(a)if("number"==typeof a)this.xx=this.yy=a;else if(a instanceof Array){if(0<a.length){for(var b=d.normalize(a[0]),e=1;e<a.length;++e){var k=b,l=d.normalize(a[e]),
b=new d.Matrix2D;b.xx=k.xx*l.xx+k.xy*l.yx;b.xy=k.xx*l.xy+k.xy*l.yy;b.yx=k.yx*l.xx+k.yy*l.yx;b.yy=k.yx*l.xy+k.yy*l.yy;b.dx=k.xx*l.dx+k.xy*l.dy+k.dx;b.dy=k.yx*l.dx+k.yy*l.dy+k.dy}h.mixin(this,b)}}else h.mixin(this,a)};h.extend(d.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});h.mixin(d,{identity:new d.Matrix2D,flipX:new d.Matrix2D({xx:-1}),flipY:new d.Matrix2D({yy:-1}),flipXY:new d.Matrix2D({xx:-1,yy:-1}),translate:function(a,c){return 1<arguments.length?new d.Matrix2D({dx:a,dy:c}):new d.Matrix2D({dx:a.x,
dy:a.y})},scale:function(a,c){return 1<arguments.length?new d.Matrix2D({xx:a,yy:c}):"number"==typeof a?new d.Matrix2D({xx:a,yy:a}):new d.Matrix2D({xx:a.x,yy:a.y})},rotate:function(a){var b=Math.cos(a);a=Math.sin(a);return new d.Matrix2D({xx:b,xy:-a,yx:a,yy:b})},rotateg:function(a){return d.rotate(d._degToRad(a))},skewX:function(a){return new d.Matrix2D({xy:Math.tan(a)})},skewXg:function(a){return d.skewX(d._degToRad(a))},skewY:function(a){return new d.Matrix2D({yx:Math.tan(a)})},skewYg:function(a){return d.skewY(d._degToRad(a))},
reflect:function(a,c){1==arguments.length&&(c=a.y,a=a.x);var b=a*a,e=c*c,h=b+e,g=2*a*c/h;return new d.Matrix2D({xx:2*b/h-1,xy:g,yx:g,yy:2*e/h-1})},project:function(a,c){1==arguments.length&&(c=a.y,a=a.x);var b=a*a,e=c*c,h=b+e,g=a*c/h;return new d.Matrix2D({xx:b/h,xy:g,yx:g,yy:e/h})},normalize:function(a){return a instanceof d.Matrix2D?a:new d.Matrix2D(a)},isIdentity:function(a){return 1==a.xx&&0==a.xy&&0==a.yx&&1==a.yy&&0==a.dx&&0==a.dy},clone:function(a){var b=new d.Matrix2D,e;for(e in a)"number"==
typeof a[e]&&"number"==typeof b[e]&&b[e]!=a[e]&&(b[e]=a[e]);return b},invert:function(a){a=d.normalize(a);var b=a.xx*a.yy-a.xy*a.yx;return a=new d.Matrix2D({xx:a.yy/b,xy:-a.xy/b,yx:-a.yx/b,yy:a.xx/b,dx:(a.xy*a.dy-a.yy*a.dx)/b,dy:(a.yx*a.dx-a.xx*a.dy)/b})},_multiplyPoint:function(a,c,d){return{x:a.xx*c+a.xy*d+a.dx,y:a.yx*c+a.yy*d+a.dy}},multiplyPoint:function(a,c,e){a=d.normalize(a);return"number"==typeof c&&"number"==typeof e?d._multiplyPoint(a,c,e):d._multiplyPoint(a,c.x,c.y)},multiplyRectangle:function(a,
c){var b=d.normalize(a);c=c||{x:0,y:0,width:0,height:0};if(d.isIdentity(b))return{x:c.x,y:c.y,width:c.width,height:c.height};a=d.multiplyPoint(b,c.x,c.y);var e=d.multiplyPoint(b,c.x,c.y+c.height),h=d.multiplyPoint(b,c.x+c.width,c.y);c=d.multiplyPoint(b,c.x+c.width,c.y+c.height);var b=Math.min(a.x,e.x,h.x,c.x),g=Math.min(a.y,e.y,h.y,c.y);return{x:b,y:g,width:Math.max(a.x,e.x,h.x,c.x)-b,height:Math.max(a.y,e.y,h.y,c.y)-g}},multiply:function(a){for(var b=d.normalize(a),e=1;e<arguments.length;++e){var k=
b,h=d.normalize(arguments[e]),b=new d.Matrix2D;b.xx=k.xx*h.xx+k.xy*h.yx;b.xy=k.xx*h.xy+k.xy*h.yy;b.yx=k.yx*h.xx+k.yy*h.yx;b.yy=k.yx*h.xy+k.yy*h.yy;b.dx=k.xx*h.dx+k.xy*h.dy+k.dx;b.dy=k.yx*h.dx+k.yy*h.dy+k.dy}return b},_sandwich:function(a,c,e){return d.multiply(d.translate(c,e),a,d.translate(-c,-e))},scaleAt:function(a,c,e,k){switch(arguments.length){case 4:return d._sandwich(d.scale(a,c),e,k);case 3:return"number"==typeof e?d._sandwich(d.scale(a),c,e):d._sandwich(d.scale(a,c),e.x,e.y)}return d._sandwich(d.scale(a),
c.x,c.y)},rotateAt:function(a,c,e){return 2<arguments.length?d._sandwich(d.rotate(a),c,e):d._sandwich(d.rotate(a),c.x,c.y)},rotategAt:function(a,c,e){return 2<arguments.length?d._sandwich(d.rotateg(a),c,e):d._sandwich(d.rotateg(a),c.x,c.y)},skewXAt:function(a,c,e){return 2<arguments.length?d._sandwich(d.skewX(a),c,e):d._sandwich(d.skewX(a),c.x,c.y)},skewXgAt:function(a,c,e){return 2<arguments.length?d._sandwich(d.skewXg(a),c,e):d._sandwich(d.skewXg(a),c.x,c.y)},skewYAt:function(a,c,e){return 2<arguments.length?
d._sandwich(d.skewY(a),c,e):d._sandwich(d.skewY(a),c.x,c.y)},skewYgAt:function(a,c,e){return 2<arguments.length?d._sandwich(d.skewYg(a),c,e):d._sandwich(d.skewYg(a),c.x,c.y)}});e.Matrix2D=d.Matrix2D;return d})},"esri/views/2d/libs/gfx/Shape":function(){define("require exports dojox/gfx/_base dojo/_base/lang dojo/_base/Color dojo/dom dojo/dom-attr ./svg ./Surface ../gl-matrix/mat2d".split(" "),function(e,h,d,a,b,c,m,k,l,g){Object.defineProperty(h,"__esModule",{value:!0});e=function(){function e(){this.parentMatrix=
this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null}return e.prototype.destroy=function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=k.getRef(a))&&a.parentNode.removeChild(a)}this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},e.prototype.getNode=function(){return this.rawNode},e.prototype.getShape=function(){return this.shape},e.prototype.getTransform=function(){return this.matrix},
e.prototype.getFill=function(){return this.fillStyle},e.prototype.getStroke=function(){return this.strokeStyle},e.prototype.getParent=function(){return this.parent},e.prototype.getBoundingBox=function(){return this.bbox},e.prototype.setTransform=function(a){return this.matrix=this.matrix?g.copy(this.matrix,a):g.clone(a),this._applyTransform()},e.prototype.setFill=function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;
var b;if("object"==typeof a&&"type"in a){switch(a.type){case "linear":b=d.makeParameters(d.defaultLinearGradient,a);a=this._setFillObject(b,"linearGradient");a.setAttribute("x1",b.x1.toFixed(8));a.setAttribute("y1",b.y1.toFixed(8));a.setAttribute("x2",b.x2.toFixed(8));a.setAttribute("y2",b.y2.toFixed(8));break;case "radial":b=d.makeParameters(d.defaultRadialGradient,a);a=this._setFillObject(b,"radialGradient");a.setAttribute("cx",b.cx.toFixed(8));a.setAttribute("cy",b.cy.toFixed(8));a.setAttribute("r",
b.r.toFixed(8));break;case "pattern":b=d.makeParameters(d.defaultPattern,a),a=this._setFillObject(b,"pattern"),a.setAttribute("x",b.x.toFixed(8)),a.setAttribute("y",b.y.toFixed(8)),a.setAttribute("width",b.width.toFixed(8)),a.setAttribute("height",b.height.toFixed(8))}return this.fillStyle=b,this}return b=d.normalizeColor(a),this.fillStyle=b,this.rawNode.setAttribute("fill",b.toCss()),this.rawNode.setAttribute("fill-opacity",b.a),this.rawNode.setAttribute("fill-rule","evenodd"),this},e.prototype.setStroke=
function(c){var e=this.rawNode;if(!c)return this.strokeStyle=null,e.setAttribute("stroke","none"),e.setAttribute("stroke-opacity",0),this;("string"==typeof c||a.isArray(c)||c instanceof b)&&(c={color:c});c=this.strokeStyle=d.makeParameters(d.defaultStroke,c);if(c.color=d.normalizeColor(c.color),c){var g=0>c.width?0:c.width;e.setAttribute("stroke",c.color.toCss());e.setAttribute("stroke-opacity",c.color.a);e.setAttribute("stroke-width",g);e.setAttribute("stroke-linecap",c.cap);"number"==typeof c.join?
(e.setAttribute("stroke-linejoin","miter"),e.setAttribute("stroke-miterlimit",c.join)):e.setAttribute("stroke-linejoin",c.join);var h=c.style.toLowerCase();if(h in k.dasharray&&(h=k.dasharray[h]),h instanceof Array){for(var h=a._toArray(h),l=0;l<h.length;++l)h[l]*=g;if("butt"!==c.cap){for(l=0;l<h.length;l+=2)h[l]-=g,1>h[l]&&(h[l]=1);for(l=1;l<h.length;l+=2)h[l]+=g}h=h.join(",")}e.setAttribute("stroke-dasharray",h);e.setAttribute("dojoGfxStrokeStyle",c.style)}return this},e.prototype._getParentSurface=
function(){for(var a=this.parent;a&&!(a instanceof l["default"]);a=a.parent);return a},e.prototype._setFillObject=function(a,b){var c=k.xmlns.svg;this.fillStyle=a;var e=this._getParentSurface().defNode,g=this.rawNode.getAttribute("fill"),h=k.getRef(g);if(h)if(g=h,g.tagName.toLowerCase()!==b.toLowerCase())h=g.id,g.parentNode.removeChild(g),g=k._createElementNS(c,b),g.setAttribute("id",h),e.appendChild(g);else for(;g.childNodes.length;)g.removeChild(g.lastChild);else g=k._createElementNS(c,b),g.setAttribute("id",
d._base._getUniqueId()),e.appendChild(g);if("pattern"===b)g.setAttribute("patternUnits","userSpaceOnUse"),c=k._createElementNS(c,"image"),c.setAttribute("x",0),c.setAttribute("y",0),c.setAttribute("width",(0>a.width?0:a.width).toFixed(8)),c.setAttribute("height",(0>a.height?0:a.height).toFixed(8)),k._setAttributeNS(c,k.xmlns.xlink,"xlink:href",a.src),g.appendChild(c);else for(g.setAttribute("gradientUnits","userSpaceOnUse"),b=0;b<a.colors.length;++b){var e=a.colors[b],h=k._createElementNS(c,"stop"),
l=e.color=d.normalizeColor(e.color);h.setAttribute("offset",e.offset.toFixed(8));h.setAttribute("stop-color",l.toCss());h.setAttribute("stop-opacity",l.a);g.appendChild(h)}return this.rawNode.setAttribute("fill","url(#"+g.getAttribute("id")+")"),this.rawNode.removeAttribute("fill-opacity"),this.rawNode.setAttribute("fill-rule","evenodd"),g},e.prototype._applyTransform=function(){var a=this.matrix;return a?this.rawNode.setAttribute("transform","matrix("+a[0].toFixed(8)+","+a[1].toFixed(8)+","+a[2].toFixed(8)+
","+a[3].toFixed(8)+","+a[4].toFixed(8)+","+a[5].toFixed(8)+")"):this.rawNode.removeAttribute("transform"),this},e.prototype.setRawNode=function(a){a=this.rawNode=a;"image"!==this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this},e.prototype.setShape=
function(a){this.shape=d.makeParameters(this.shape,a);for(var b in this.shape)"type"!==b&&(a=this.shape[b],"width"!==b&&"height"!==b||(a=0>a?0:a),this.rawNode.setAttribute(b,a));return this.bbox=null,this},e.prototype._moveToFront=function(){return this.rawNode.parentNode.appendChild(this.rawNode),this},e.prototype._moveToBack=function(){return this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild),this},e.prototype._removeClipNode=function(){var a,b=m.get(this.rawNode,
"clip-path");return b&&(a=c.byId(b.match(/gfx_clip[\d]+/)[0]),a&&a.parentNode.removeChild(a)),a},e.prototype.moveToFront=function(){var a=this.getParent();return a&&(a._moveChildToFront(this),this._moveToFront()),this},e.prototype.moveToBack=function(){var a=this.getParent();return a&&(a._moveChildToBack(this),this._moveToBack()),this},e.prototype.removeShape=function(a){return this.parent&&this.parent.remove(this,a),this},e.prototype._setParent=function(a,b){return this.parent=a,this._updateParentMatrix(b)},
e.prototype._updateParentMatrix=function(a){return this.parentMatrix=a?g.clone(a):null,this._applyTransform()},e.prototype._getRealMatrix=function(){for(var a=g.clone(this.matrix||g.create()),b=this.parent;b;)b.matrix&&a&&g.multiply(a,b.matrix,a),b=b.parent;return a},e}();h["default"]=e})},"esri/views/2d/libs/gfx/Circle":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","./Shape","dojox/gfx/_base"],function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});
e=function(a){function c(c){var d=a.call(this)||this;return d.shape=b.getDefault("Circle"),d.rawNode=c,d}return d(c,a),c.prototype.getBoundingBox=function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox},c}(a["default"]);e.nodeType="circle";h["default"]=e})},"esri/views/2d/libs/gfx/Group":function(){define("require exports ../../../../core/tsSupport/extendsHelper ./Container dojox/gfx/_base ./svg ./Circle ./Path ./Image ./Rect ./Text".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){Object.defineProperty(h,"__esModule",{value:!0});e=function(a){function e(){return null!==a&&a.apply(this,arguments)||this}return d(e,a),e.prototype.setRawNode=function(a){this.rawNode=a;this.rawNode.__gfxObject__=this},e.prototype.destroy=function(){a.prototype.clear.call(this,!0);a.prototype.destroy.call(this)},e.prototype.createShape=function(a){switch(a.type){case b.defaultPath.type:return this.createPath(a);case b.defaultRect.type:return this.createRect(a);case b.defaultCircle.type:return this.createCircle(a);
case b.defaultImage.type:return this.createImage(a);case b.defaultText.type:return this.createText(a)}return console.error("[gfx] unknown shape",a),null},e.prototype.createGroup=function(){return this.createObject(e)},e.prototype.createRect=function(a){return this.createObject(g["default"],a)},e.prototype.createCircle=function(a){return this.createObject(m["default"],a)},e.prototype.createImage=function(a){return this.createObject(l["default"],a)},e.prototype.createText=function(a){return this.createObject(n["default"],
a)},e.prototype.createPath=function(a){return this.createObject(k["default"],a)},e.prototype.createObject=function(a,b){if(!this.rawNode)return null;var d=new a;a=c._createElementNS(c.xmlns.svg,a.nodeType);return d.setRawNode(a),d.setShape(b),this.add(d),d},e}(a["default"]);e.nodeType="g";h["default"]=e})},"esri/views/2d/libs/gfx/Path":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/_base/lang dojox/gfx/_base dojox/gfx/matrix ./Shape".split(" "),function(e,h,d,a,b,
c,m){Object.defineProperty(h,"__esModule",{value:!0});e=function(e){function k(c){var d=e.call(this)||this;return d.segments=[],d.tbbox=null,d.absolute=!0,d.last={},d.segmented=!1,d._validSegments={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},d._2PI=2*Math.PI,d.rawNode=c,d.shape=a.clone(b.defaultPath),d}return d(k,e),k.prototype.setAbsoluteMode=function(a){return this._confirmSegmented(),this.absolute="string"==typeof a?"absolute"===a:a,this},k.prototype.getAbsoluteMode=function(){return this._confirmSegmented(),
this.absolute},k.prototype.getBoundingBox=function(){return this._confirmSegmented(),this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},k.prototype._getRealBBox=function(){if(this._confirmSegmented(),this.tbbox)return this.tbbox;var a=this.bbox,b=this._getRealMatrix();this.bbox=null;for(var c=this.segments.length,d=0;c>d;++d)this._updateWithSegment(this.segments[d],b);b=this.bbox;return this.bbox=a,this.tbbox=b?[{x:b.l,y:b.t},
{x:b.r,y:b.t},{x:b.r,y:b.b},{x:b.l,y:b.b}]:null,this.tbbox},k.prototype.getLastPosition=function(){return this._confirmSegmented(),"x"in this.last?this.last:null},k.prototype._applyTransform=function(){return this.tbbox=null,e.prototype._applyTransform.call(this),this},k.prototype._updateBBox=function(a,b,d){d&&(b=c.multiplyPoint(d,a,b),a=b.x,b=b.y);this.bbox&&"l"in this.bbox?(this.bbox.l>a&&(this.bbox.l=a),this.bbox.r<a&&(this.bbox.r=a),this.bbox.t>b&&(this.bbox.t=b),this.bbox.b<b&&(this.bbox.b=
b)):this.bbox={l:a,b:b,r:a,t:b}},k.prototype._updateWithSegment=function(a,c){var d,e=a.args,g=e.length;switch(a.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(d=0;g>d;d+=2)this._updateBBox(e[d],e[d+1],c);this.last.x=e[g-2];this.last.y=e[g-1];this.absolute=!0;break;case "H":for(d=0;g>d;++d)this._updateBBox(e[d],this.last.y,c);this.last.x=e[g-1];this.absolute=!0;break;case "V":for(d=0;g>d;++d)this._updateBBox(this.last.x,e[d],c);this.last.y=e[g-1];this.absolute=!0;break;case "m":d=
0;"x"in this.last||(this._updateBBox(this.last.x=e[0],this.last.y=e[1],c),d=2);for(;g>d;d+=2)this._updateBBox(this.last.x+=e[d],this.last.y+=e[d+1],c);this.absolute=!1;break;case "l":case "t":for(d=0;g>d;d+=2)this._updateBBox(this.last.x+=e[d],this.last.y+=e[d+1],c);this.absolute=!1;break;case "h":for(d=0;g>d;++d)this._updateBBox(this.last.x+=e[d],this.last.y,c);this.absolute=!1;break;case "v":for(d=0;g>d;++d)this._updateBBox(this.last.x,this.last.y+=e[d],c);this.absolute=!1;break;case "c":for(d=
0;g>d;d+=6)this._updateBBox(this.last.x+e[d],this.last.y+e[d+1],c),this._updateBBox(this.last.x+e[d+2],this.last.y+e[d+3],c),this._updateBBox(this.last.x+=e[d+4],this.last.y+=e[d+5],c);this.absolute=!1;break;case "s":case "q":for(d=0;g>d;d+=4)this._updateBBox(this.last.x+e[d],this.last.y+e[d+1],c),this._updateBBox(this.last.x+=e[d+2],this.last.y+=e[d+3],c);this.absolute=!1;break;case "A":for(d=0;g>d;d+=7)this._updateBBox(e[d+5],e[d+6],c);this.last.x=e[g-2];this.last.y=e[g-1];this.absolute=!0;break;
case "a":for(d=0;g>d;d+=7)this._updateBBox(this.last.x+=e[d+5],this.last.y+=e[d+6],c);this.absolute=!1}a=[a.action];for(d=0;g>d;++d)a.push(b.formatNumber(e[d],!0));if("string"==typeof this.shape.path)this.shape.path+=a.join("");else for(d=0,g=a.length;g>d;++d)this.shape.path.push(a[d]);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},k.prototype._pushSegment=function(a,b){this.tbbox=null;var c,d=this._validSegments[a.toLowerCase()];"number"==typeof d&&(d?b.length>=
d&&(c={action:a,args:b.slice(0,b.length-b.length%d)},this.segments.push(c),this._updateWithSegment(c)):(c={action:a,args:[]},this.segments.push(c),this._updateWithSegment(c)))},k.prototype._collectArgs=function(a,b){for(var c=0;c<b.length;++c){var d=b[c];"boolean"==typeof d?a.push(d?1:0):"number"==typeof d?a.push(d):d instanceof Array?this._collectArgs(a,d):"x"in d&&"y"in d&&a.push(d.x,d.y)}},k.prototype._confirmSegmented=function(){if(!this.segmented){var a=this.shape.path;this.shape.path=[];this._setPath(a);
this.shape.path=this.shape.path.join("");this.segmented=!0}},k.prototype._setPath=function(c){c=a.isArray(c)?c:c.match(b.pathSvgRegExp);if(this.segments=[],this.absolute=!0,this.bbox={},this.last={},c){for(var d="",e=[],g=c.length,k=0;g>k;++k){var h=c[k],l=parseFloat(h);isNaN(l)?(d&&this._pushSegment(d,e),e=[],d=h):e.push(l)}this._pushSegment(d,e)}},k.prototype.setShape=function(a){return e.prototype.setShape.call(this,"string"==typeof a?{path:a}:a),this.segmented=!1,this.segments=[],this.shape.path?
this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d"),this},k}(m["default"]);e.nodeType="path";h["default"]=e})},"esri/views/2d/libs/gfx/Image":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/_base ./Shape ./svg".split(" "),function(e,h,d,a,b,c){Object.defineProperty(h,"__esModule",{value:!0});e=function(b){function e(c){var d=b.call(this)||this;return d.shape=a.getDefault("Image"),d.rawNode=c,d}return d(e,b),e.prototype.setShape=function(b){this.shape=
a.makeParameters(this.shape,b);this.bbox=null;b=this.rawNode;for(var d in this.shape)if("type"!==d&&"src"!==d){var e=this.shape[d];"width"!==d&&"height"!==d||(e=0>e?0:e);b.setAttribute(d,e)}return b.setAttribute("preserveAspectRatio","none"),c._setAttributeNS(b,c.xmlns.xlink,"xlink:href",this.shape.src),b.__gfxObject__=this,this},e.prototype.getBoundingBox=function(){return this.shape},e.prototype.setStroke=function(){return this},e.prototype.setFill=function(){return this},e}(b["default"]);e.nodeType=
"image";h["default"]=e})},"esri/views/2d/libs/gfx/Rect":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","dojox/gfx/_base","./Shape"],function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});e=function(b){function c(c){var d=b.call(this)||this;return d.shape=a.getDefault("Rect"),d.rawNode=c,d}return d(c,b),c.prototype.getBoundingBox=function(){return this.shape},c.prototype.setShape=function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;for(var c in this.shape)"type"!==
c&&"r"!==c&&(b=this.shape[c],"width"!==c&&"height"!==c||(b=0>b?0:b),this.rawNode.setAttribute(c,b));return null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r)),this},c}(b["default"]);e.nodeType="rect";h["default"]=e})},"esri/views/2d/libs/gfx/Text":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/has dojox/gfx/_base ./Shape ./svg".split(" "),function(e,h,d,a,b,c,m){Object.defineProperty(h,"__esModule",{value:!0});
e=a("android");var k=a("chrome")||e&&4<=e?"auto":"optimizeLegibility";a=function(a){function c(c){var d=a.call(this)||this;return d.fontStyle=null,d.shape=b.getDefault("Text"),d.rawNode=c,d}return d(c,a),c.prototype.getFont=function(){return this.fontStyle},c.prototype.setFont=function(a){return this.fontStyle="string"==typeof a?b.splitFontString(a):b.makeParameters(b.defaultFont,a),this._setFont(),this},c.prototype._setFont=function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);
this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)},c.prototype.setShape=function(a){this.shape=b.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;var c=this.shape;return a.setAttribute("x",c.x),a.setAttribute("y",c.y),a.setAttribute("text-anchor",c.align),a.setAttribute("text-decoration",c.decoration),a.setAttribute("rotate",c.rotated?90:0),
a.setAttribute("kerning",c.kerning?"auto":0),a.setAttribute("text-rendering",k),a.firstChild?a.firstChild.nodeValue=c.text:a.appendChild(m._createTextNode(c.text)),this},c.prototype.getTextWidth=function(){var a=this.rawNode,b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,d=a.firstChild.nodeValue;if(b.appendChild(a),""!==d)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width,10):68;return b.removeChild(a),c},c.prototype.getBoundingBox=function(){var a=null;if(this.getShape().text)try{a=
this.rawNode.getBBox()}catch(u){a={x:0,y:0,width:0,height:0}}return a},c}(c["default"]);a.nodeType="text";h["default"]=a})},"esri/views/2d/engine/graphics/Projector":function(){define(["require","exports"],function(e,h){function d(a,e,h,g,n){void 0===g&&(g=0);void 0===n&&(n=a.length);for(var k,l=a[g],m=a[n-1],w=0,q=0,v=g+1;n-1>v;v++){var x=a[v];k=x[0];var x=x[1],f=l[0],p=l[1],z=m[0],y=m[1];f===z?k=b(k-f):(z=(y-p)/(z-f),k=b(z*k-x+(p-z*f))/c(z*z+1));k>w&&(q=v,w=k)}w>e?(d(a,e,h,g,q+1),d(a,e,h,q,n)):
(h(l[0],l[1]),h(m[0],m[1]))}var a=Math.round,b=Math.abs,c=Math.sqrt;return function(){function b(){this._transform=null}return b.prototype.update=function(a,b){this._transform=a;this._resolution=b},b.prototype.toScreenPoint=function(a,b,c){return this.transformPoint(b.x+c*this._resolution,b.y,function(b,c){a.x=b;a.y=c}),a},b.prototype.toScreenPath=function(a,b){var c=this,e=null!=a.paths;a=e?a.paths:a.rings;var k="",h=function(a,d){a+=b*c._resolution;c.transformPoint(a,d,function(a,b){isNaN(a)||isNaN(b)||
(k+=a,k+=",",k+=b,k+=" ")})};if(a)for(var l=a.length,m=0;l>m;m++)k+="M ",d(a[m],this._resolution,h),e||(k+="Z ");return k},b.prototype.transformPoint=function(b,c,d){var e=this._transform,g=e[1],k=e[3],h=e[5];d(a(e[0]*b+e[2]*c+e[4]),a(g*b+k*c+h))},b}()})},"esri/views/2d/engine/cssUtils":function(){define(["require","exports","dojo/has"],function(e,h,d){function a(a){return"matrix3d(\n                    "+a[0].toFixed(10)+", "+a[1].toFixed(10)+", 0, 0,\n                    "+a[2].toFixed(10)+", "+
a[3].toFixed(10)+", 0, 0,\n                    0, 0, 1, 0,\n                    "+Math.round(a[4]).toFixed(10)+", "+Math.round(a[5]).toFixed(10)+", 0, 1\n                  )"}function b(a){return"translate("+Math.round(a[0])+"px, "+Math.round(a[1])+"px)"}function c(a){return"rotateZ( "+a+" deg)"}Object.defineProperty(h,"__esModule",{value:!0});e=d("ff");var m=d("ie"),k=d("webkit");d=d("opera");var l=k&&"-webkit-transform"||e&&"-moz-transform"||d&&"-o-transform"||m&&"-ms-transform"||"transform";h.clip=
function(a,b){b?a.clip="rect( "+b.top+"px, "+b.right+"px, "+b.bottom+"px, "+b.left+"px)":a.clip=""};h.setTransform=function(c,d){var e=null;2===d.length&&(e=b(d));6===d.length&&(e=a(d));c.transform=c[l]=e};h.setOrigin=function(a,b){a.transformOrigin=b[0]+"px "+b[1]+"px 0"};h.cssMatrix=function(a){return"matrix(\n                  "+a[0].toFixed(10)+", "+a[1].toFixed(10)+",\n                  "+a[2].toFixed(10)+", "+a[3].toFixed(10)+",\n                  "+a[4]+", "+a[5]+"\n                )"};h.cssMatrix3d=
a;h.translate=b;h.rotate=function(a){return c(a.toFixed(3))};h.rotateZ=c})},"esri/views/2d/engine/graphics/GFXGroup":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","dojo/_base/lang","../Container"],function(e,h,d,a,b){return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return d(c,b),c.prototype.attach=function(a){return this.g=a.surface.createGroup(),b.prototype.attach.call(this,a)},c.prototype.detach=function(a){b.prototype.detach.call(this,
a);this.g.destroy();this.g=null},c.prototype.prepareChildrenRenderParameters=function(b){return a.mixin({},b,{surface:this.g})},c.prototype.detachChild=function(a,b){return a.detach(b)},c.prototype.attachChild=function(a,b){return a.attach(b)},c.prototype.renderChild=function(a,b){return a.processRender(b)},c}(b)})},"esri/views/2d/engine/graphics/GFXObject":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../geometry/Extent ../../../../geometry/support/webMercatorUtils ../../../../geometry/support/spatialReferenceUtils ../DisplayObject ./gfxUtils".split(" "),
function(e,h,d,a,b,c,m,k){var l=new Set,g=[];return function(e){function h(){var a=null!==e&&e.apply(this,arguments)||this;return a.visible=!0,a}return d(h,e),Object.defineProperty(h.prototype,"graphic",{get:function(){return this._graphic},set:function(a){this._geometry=(this._graphic=a)&&a.geometry||null;this._projected=null;this.requestRender()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"geometry",{get:function(){return this._geometry},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,
"isPolygonMarkerSymbol",{get:function(){var a=this.renderingInfo.symbol.type,b=this.geometry;return b&&"polygon"===b.type&&("simple-marker-symbol"===a||"picture-marker-symbol"===a||"text-symbol"===a)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"renderingInfo",{get:function(){return this._renderingInfo},set:function(a){this._renderingInfo=a;this.requestRender()},enumerable:!0,configurable:!0}),h.prototype.detach=function(){this._removeShape();this._drawInfo=this._projected=null},
h.prototype.doRender=function(a){var b=a.surface,c=a.state,d=a.projector,e=this.visible&&this._projectGeometry(this.geometry,a.state.spatialReference);a=this._getScreenOffsets([],a.state);if(k.isShapeInvalid(this.renderingInfo.symbol,this._shape)&&this._removeShape(),!a.length)return void this._removeShape();var g=this._shape,f=e.type;(!g||this._showRedraw(a,c))&&("point"===f?(g=k.drawPoint(d,b,e,g,this.renderingInfo,c.rotation,a),k.stylePoint(g,this.renderingInfo)):"multipoint"===f?(g=k.drawMarkers(d,
b,e,g,this.renderingInfo,c.rotation,a),k.styleMarkers(g,this.renderingInfo)):(g=k.drawShape(d,b,e,g,a),k.styleShape(g,this.renderingInfo)),this._shape=g,g.getNode().gfxObject=this)},h.prototype._getScreenOffsets=function(a,b){var d=b.clippedExtent,e=this._projected.outExtent,k=b.spatialReference;if(a.length=0,!e)return a;if(k.isWrappable){var k=c.getInfo(k),h=e.cache._partwise,d=d._getParts(k);if(g.length=0,h&&h.length)for(e=0;e<h.length;e++)g.push.apply(g,h[e]._getParts(k));else g.push.apply(g,e._getParts(k));
b=b.worldScreenWidth;a.length=0;l.clear();e=g.length;for(k=0;e>k;k++)for(var f=g[k],h=f.extent,f=f.frameIds,m=f.length,n=d.length,r=0;n>r;r++){var t=d[r];if(t.extent.intersects(h))for(var u=m,D=0;u>D;D++){var F=(t.frameIds[0]-f[D])*b;l.has(F)||(a.push(F),l.add(F))}}a.sort()}else d.intersects(e)&&a.push(0);return a},h.prototype._projectGeometry=function(a,c){var d=this._projected;a=this.isPolygonMarkerSymbol?a.centroid:a;return d&&d.inGeometry===a&&d.outSpatialReference===c?d.outGeometry:a&&a.spatialReference.equals(c)?
(this._projected={inGeometry:a,outGeometry:a,outSpatialReference:c,outExtent:this._getExtent(a)},this._projected.outGeometry):b.canProject(a,c)?(this._projected={inGeometry:a,outGeometry:b.project(a,c),outSpatialReference:c,outExtent:this._getExtent(a)},this._projected.outGeometry):(this._projected={inGeometry:a,outGeometry:null,outSpatialReference:c,outExtent:null},this._projected.outGeometry)},h.prototype._getExtent=function(b){var c=b.extent;if(!c){var d=c=void 0;"esri.geometry.Point"===b.declaredClass?
(c=b.x,d=b.y):"esri.geometry.Multipoint"===b.declaredClass&&(c=b.points[0][0],d=b.points[0][1]);c=new a(c,d,c,d,b.spatialReference)}return c},h.prototype._removeShape=function(){var a=this._shape;a&&(a.removeShape(),a.getNode().gfxObject=null,a.destroy());this._shape=this._drawInfo=null},h.prototype._showRedraw=function(a,b){return!0},h}(m)})},"esri/views/2d/engine/graphics/gfxUtils":function(){define("require exports dojo/_base/lang ../../libs/gl-matrix/mat2d ../../libs/gl-matrix/mat2dExtras ../../../../core/screenUtils ../../../../geometry/Polygon ../../../../symbols/SimpleMarkerSymbol ../../../../symbols/support/gfxUtils".split(" "),
function(e,h,d,a,b,c,m,k,l){function g(a,b){return b.toRgba?(a[0]=b.r,a[1]=b.g,a[2]=b.b,a[3]=b.a):(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]),a}function n(a,b,c){return null!=c&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=c),a}function u(a,b,c){var d=b[0]/b[1];return a[0]=a[1]=1,isNaN(c)||(1<d?(a[0]=c/b[0],a[1]=c/d/b[1]):(a[1]=c/b[1],a[0]=c*d/b[0])),a}function r(d,e,g,h,m,p,n){var r,x,B=m.symbol;g=d.toScreenPoint(z,g,n[0]);n=[g.x,g.y];d=g.x;g=g.y;var D=m.heading;m=m.size&&m.size[0];a.identity(y);"number"==
typeof m&&(x=isFinite(m)&&m);x=(m=x&&isFinite(x)&&!isNaN(x))?c.pt2px(x):NaN;p&&b.rotategAt(y,y,p,n);D&&b.rotategAt(y,y,D,n);p=c.pt2px(B.xoffset);D=c.pt2px(B.yoffset);if((0!==p||0!==D)&&a.translate(y,y,[p,-D]),0!==B.angle&&b.rotategAt(y,y,B.angle,n),"simple-marker-symbol"===B.type)switch(r=B.style,p=Math.round,x=m?x:c.pt2px(B.size),m=void 0,r){case k.STYLE_SQUARE:case k.STYLE_CROSS:case k.STYLE_X:case k.STYLE_DIAMOND:m=isNaN(x)?16:.5*x;r=q(e,h,f(r,d,g,p(d-m),p(d+m),p(g-m),p(g+m)));break;case k.STYLE_PATH:r=
B=q(e,h,B.path);B=B.getBoundingBox();x=u(a.create(),[B.width,B.height],x);1===x[0]&&1===x[3]||b.scaleAt(y,y,x,n);a.translate(y,y,[-(B.x+.5*B.width)+d,-(B.y+.5*B.height)+g]);break;default:m=isNaN(x)?16:.5*x,r=w(e,h,{cx:d,cy:g,r:m})}else"picture-marker-symbol"===B.type?(r=m?x:c.pt2px(B.width),x=m?x:c.pt2px(B.height),r=t(e,h,{x:d-.5*r,y:g-.5*x,width:r,height:x,src:B.url})):"text-symbol"===B.type&&((n=B.font&&B.font.clone())&&(n.size=m?x:c.pt2px(n.size)),r=v(e,h,{type:"text",text:B.text,x:d,y:g,align:l.getSVGAlign(B),
decoration:B.decoration||n&&n.decoration,rotated:B.rotated,kerning:B.kerning}),n&&r.setFont(n),x=r.getNode(),e=l.getSVGBaseline(B),B=l.getSVGBaselineShift(B),x&&(x.setAttribute("dominant-baseline",e),B&&x.setAttribute("baseline-shift",B)));return r.setTransform(y),r}function t(a,b,c){return b?b.setShape(c):a.createImage(c)}function w(a,b,c){return b?b.setShape(c):a.createCircle(c)}function q(a,b,c){c=Array.isArray(c)?c.join(" "):c;return b?b.setShape(c):a.createPath(c)}function v(a,b,c){return b?
b.setShape(c):a.createText(c)}function x(a,b){b=b&&b.shape&&b.shape.type;var c=a&&a.type;a=a&&a.style;return c&&(a=A[c]||a),B[a]&&(a="path"),!(!b||!a||b===a)}function f(a,b,c,d,e,f,g,h){switch(a){case k.STYLE_SQUARE:return["M",d+","+f,e+","+f,e+","+g,d+","+g,"Z"];case k.STYLE_CROSS:return["M",b+","+f,b+","+g,"M",d+","+c,e+","+c];case k.STYLE_X:return["M",d+","+f,e+","+g,"M",d+","+g,e+","+f];case k.STYLE_DIAMOND:return["M",b+","+f,e+","+c,b+","+g,d+","+c,"Z"];case k.STYLE_TARGET:return["M",d+","+f,
e+","+f,e+","+g,d+","+g,d+","+f,"M",d-h+","+c,d+","+c,"M",b+","+(f-h),b+","+f,"M",e+h+","+c,e+","+c,"M",b+","+(g+h),b+","+g]}}function p(a,b){var c=b.symbol;if("picture-marker-symbol"!==c.type){var e=l.getFill(c);if("simple-marker-symbol"===c.type){var f=c.style,h=(c=l.getStroke(c))&&c.color,f=f===k.STYLE_X||f===k.STYLE_CROSS,m=b.opacity;(b=b.color||g([0,0,0,0],f?h:e))&&null!=m&&(b=n([0,0,0,0],b,m));b&&(f?b!==h&&(c=c?d.mixin({},c):{},c.color=b):b!==e&&(e=b));a.setFill(e).setStroke(c)}else"text-symbol"===
c.type&&(m=b.opacity,(b=b.color||g([0,0,0,0],e))&&null!=m&&(b=n([0,0,0,0],b,m)),b&&b!==e&&(e=b),a.setFill(e))}}Object.defineProperty(h,"__esModule",{value:!0});h.getScalingVector=u;var z={x:0,y:0},y=a.create();h.drawPoint=r;h.drawMarkers=function(a,b,c,d,e,f,g){var k=e.symbol;c=c.points;b=d||b.createGroup();d=[0];b.children[0]&&x(k,b.children[0])&&b.clear();for(var h=0,l=c.length,k=0;l>k;k++)for(var m=c[k],p=g.length,n=0;p>n;n++)d[0]=g[n],b.add(r(a,b,{x:m[0],y:m[1]},b.children[h++],e,f,d));a=b.children.length;
if(c.length*g.length<a)for(g=c.length*g.length,k=a-1;k>=g;k--)b.children[k].removeShape();return b};h.drawShape=function(a,b,c,d,e){var f=[];if("extent"===c.type&&(c=m.fromExtent(c)),"polyline"===c.type||"polygon"===c.type){for(var g=e.length,k=0;g>k;k++)f=f.concat(a.toScreenPath(c,e[k]));d=q(b,d,f)}return d};h.drawRect=function(a,b,c){return b?b.setShape(c):a.createRect(c)};h.drawImage=t;h.drawCircle=w;h.drawPath=q;h.drawText=v;var A={"picture-marker-symbol":"image","picture-fill-symbol":"path",
"simple-fill-symbol":"path","simple-line-symbol":"path","text-symbol":"text"},B={square:1,cross:1,x:1,diamond:1,target:1};h.isShapeInvalid=x;h.smsToPath=f;h.stylePoint=p;h.styleMarkers=function(a,b){for(var c=a.children.length,d=0;c>d;d++)p(a.children[d],b)};h.styleShape=function(a,b){var e,f=b.symbol,k=b.size,h=b.color;b=b.opacity;var m=l.getStroke(f),p=l.getFill(f),q=!1;"simple-line-symbol"===f.type?(q=!0,e="none"!==f.style):e=f.outline&&"none"!==f.outline.style;var r,t,x;k&&(x=isFinite(k[0])&&
k[0]);null!=k&&(x=c.pt2px(x));!h&&null==b||"picture-fill-symbol"===f.type||(q?(r=h||m&&m.color&&g([0,0,0,0],m.color),r&&null!=b&&(r=n(r,r,b))):p&&(t=h||g([0,0,0,0],p),t&&null!=b&&(t=n(t,t,b))));!e||null==k&&!r?a.setStroke(m):a.setStroke(d.mixin({},m,null!=x?{width:x}:null,r&&{color:r}));a.setFill(t||p);a.rawNode.setAttribute("vector-effect","non-scaling-stroke")}})},"esri/views/2d/libs/gl-matrix/mat2dExtras":function(){define(["require","exports","./mat2d","./vec2","./common"],function(e,h,d,a,b){Object.defineProperty(h,
"__esModule",{value:!0});var c=function(){var b=d.create(),c=a.create();return function(e,g,k){return d.fromTranslation(b,k),d.multiply(e,b,g),a.negate(c,k),d.translate(e,e,c),e}}();h.rotategAt=function(){var a=d.create();return function(e,h,g,m){return d.fromRotation(a,b.toRadian(g)),c(a,a,m),d.multiply(e,a,h),e}}();h.scaleAt=function(){var a=d.create();return function(b,e,g,h){return d.fromScaling(a,g),c(a,a,h),d.multiply(b,a,e),b}}()})},"esri/symbols/support/gfxUtils":function(){define("require exports dojo/_base/lang dojox/gfx/_base ../../Color ../../core/screenUtils".split(" "),
function(e,h,d,a,b,c){function m(b){var e=b.style,k=null;if(b){var h=b.constructor;switch(b.type){case u:e!==h.STYLE_CROSS&&e!==h.STYLE_X&&(k=b.color);break;case g:e===h.STYLE_SOLID?k=b.color:e!==h.STYLE_NULL&&(k=d.mixin({},a.defaultPattern,{src:t+e+".png",width:10,height:10}));break;case l:k=d.mixin({},a.defaultPattern,{src:b.url,width:c.pt2px(b.width)*b.xscale,height:c.pt2px(b.height)*b.yscale,x:c.pt2px(b.xoffset),y:c.pt2px(b.yoffset)});break;case r:k=b.color}}return k}function k(a){if(!a)return null;
var b,d=a.constructor,e=c.pt2px(a.width);switch(a.type){case g:case l:case u:b=k(a.outline);break;case n:a.style!==d.STYLE_NULL&&0!==e&&(b={color:a.color,style:v(a.style),width:e,cap:a.cap,join:a.join===d.JOIN_MITER?c.pt2px(a.miterLimit):a.join});break;default:b=null}return b}Object.defineProperty(h,"__esModule",{value:!0});var l="picture-fill-symbol",g="simple-fill-symbol",n="simple-line-symbol",u="simple-marker-symbol",r="text-symbol",t=e.toUrl("../../symbols/patterns/"),w={left:"start",center:"middle",
right:"end",justify:"start"},q={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"};h.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&w[a.toLowerCase()]||"middle"};h.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&q[a.toLowerCase()]||"alphabetic"};h.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};h.getFill=m;h.getStroke=k;var v=function(){var a={};return function(b){if(a[b])return a[b];var c=b.replace(/-/g,
"");return a[b]=c,c}}();h.getShapeDescriptors=function(a){if(!a)return{defaultShape:null,fill:null,font:null,stroke:null};var b={defaultShape:null,fill:m(a),font:null,stroke:k(a)},d=a.constructor,e=d.defaultProps,h=null;switch(a.type){case u:var q=a.style,e=.5*c.pt2px(a.size||e.size),t=-e,v=+e,x=-e,w=+e;switch(q){case d.STYLE_CIRCLE:h={type:"circle",cx:0,cy:0,r:e};break;case d.STYLE_CROSS:h={type:"path",path:"M "+t+",0 L "+v+",0 M 0,"+x+" L 0,"+w+" E"};break;case d.STYLE_DIAMOND:h={type:"path",path:"M "+
t+",0 L 0,"+x+" L "+v+",0 L 0,"+w+" L "+t+",0 Z"};break;case d.STYLE_SQUARE:h={type:"path",path:"M "+t+","+w+" L "+t+","+x+" L "+v+","+x+" L "+v+","+w+" L "+t+","+w+" Z"};break;case d.STYLE_X:h={type:"path",path:"M "+t+","+w+" L "+v+","+x+" M "+t+","+x+" L "+v+","+w+" E"};break;case d.STYLE_PATH:h={type:"path",path:a.path||""}}break;case n:h={type:"path",path:"M -15,0 L 15,0 E"};break;case l:case g:h={type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"};break;case "picture-marker-symbol":h=
{type:"image",x:-Math.round(c.pt2px(a.width)/2),y:-Math.round(c.pt2px(a.height)/2),width:c.pt2px(a.width),height:c.pt2px(a.height),src:a.url||""};break;case r:d=a.font,q=c.pt2px(d.size),h={type:"text",text:a.text,x:0,y:.25*q,align:"middle",decoration:a.decoration||d&&d.decoration,rotated:a.rotated,kerning:a.kerning},b.font=d&&{size:q+"px",style:d.style,variant:d.variant,weight:d.weight,family:d.family}}return b.defaultShape=h,b};h.defaultThematicColor=new b([128,128,128])})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/watchUtils ../../../core/Accessor ../../../core/HandleRegistry ../../../core/accessorSupport/decorators ../../input/InputManager ../../input/BrowserEventSource ../../input/ViewEvents ../../input/handlers/PreventContextMenu ../input/handlers/DoubleClickZoom ../input/handlers/DragPan ../input/handlers/DragRotate ../input/handlers/KeyPan ../input/handlers/KeyZoom ../input/handlers/KeyRotate ../input/handlers/MouseWheelZoom ../input/handlers/PinchAction".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p){var z={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},y={zoomIn:["\x3d","+"],zoomOut:["-","_"]},A={dragRotate:"Alt",clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};e=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b._handles=new m,b}return d(c,a),c.prototype.initialize=function(){var a=this;this.viewEvents=new n.ViewEvents(this.view);
this._handles.add([b.whenNot(this.view,"ready",function(){return a._disconnect()}),b.when(this.view,"ready",function(){return a._connect()})])},c.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect();this.viewEvents.destroy();this.viewEvents=null},c.prototype._disconnect=function(){this._inputManager&&(this.viewEvents.disconnect(),this._source.destroy(),this._inputManager.destroy(),this._source=null,this._inputManager=null)},c.prototype._connect=
function(){var a=new g.BrowserEventSource(this.view.surface),b=new l.InputManager(a);b.installHandlers("prevent-context-menu",[new u.PreventContextMenu]);b.installHandlers("navigation",[new p.PinchRotateAndZoom(this.view),new f.MouseWheelZoom(this.view),new r.DoubleClickZoom(this.view),new t.DragPan(this.view,"primary"),new q.KeyPan(this.view,z),new v.KeyZoom(this.view,y),new x.KeyRotate(this.view,A),new w.DragRotate(this.view,"secondary"),new r.DoubleClickZoom(this.view,["Ctrl"]),new w.DragRotate(this.view,
"primary",[A.dragRotate])]);this.viewEvents.connect(b);this._source=a;this._inputManager=b},c}(k.declared(c));return a([k.property()],e.prototype,"view",void 0),e=a([k.subclass("esri.views.2d.input.MapViewInputManager")],e)})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/now ./keys ./recognizers ../../core/Logger ./handlers/LatestPointerType".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){Object.defineProperty(h,"__esModule",{value:!0});var u=g.getLogger("esri.views.input");e=function(a){function b(b,c){b=a.call(this)||this;return b._pointerCaptures=new Map,b._nameToGroup={},b._handlers=[],b._currentPropagation=null,b._sourceEvents=new Set,b._keyModifiers=new Set,b._activeKeyModifiers=new Set,b.primaryKey=k.primaryKey,b.latestPointerType="mouse",b._installRecognizers(),b}return d(b,a),b.prototype.normalizeCtorArgs=function(a,b){return this._browserEvents=
a,this._browserEvents.onEventReceived=this._onEventReceived.bind(this),this._recognizers=b,this._recognizers||(this._recognizers=l.defaults.map(function(a){return new a})),{}},b.prototype.destroy=function(){for(var a=0,b=Object.keys(this._nameToGroup);a<b.length;a++)this.uninstallHandlers(b[a])},b.prototype.installHandlers=function(a,b){var c=this;if(this._nameToGroup[a])return void u.error("There is already an InputHandler group registered under the name `"+a+"`");if(0===b.length)return void u.error("Can't register a group of zero handlers");
var d={name:a,handlers:b.map(function(a,b){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[a]=d;a=function(a){var b=d.handlers[a];e._handlers.push(b);b.handler.onInstall({updateDependencies:function(){c.updateDependencies()},emit:function(a,d,e,f){c._emitInputEvent(b.priorityIndex,a,d,e,f)},setPointerCapture:function(a,e){c._setPointerCapture(d,b,a,e)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=
a}})};var e=this;for(b=d.handlers.length-1;0<=b;b--)a(b);this.updateDependencies()},b.prototype.uninstallHandlers=function(a){var b=this._nameToGroup[a];return b?(b.handlers.forEach(function(a){a.removed=!0;a.uninstallCallback()}),delete this._nameToGroup[a],void(this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers())):void u.error("There is no InputHandler group registered under the name `"+a+"`")},b.prototype.hasHandlers=function(a){return void 0!==
this._nameToGroup[a]},b.prototype.updateDependencies=function(){var a=new Set,b=new Set;this._handlersPriority=[];for(var c=this._handlers.length-1;0<=c;c--){var d=this._handlers[c];d.priorityIndex=c;this._handlersPriority.push(d)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(c=this._handlersPriority.length-1;0<=c;c--){d=this._handlersPriority[c];d.priorityIndex=c;var e=d.handler.hasSideEffects;if(!e)for(var g=0,h=d.handler.outgoingEventTypes;g<h.length;g++)if(a.has(h[g])){e=
!0;break}if(e)for(g=0,h=d.handler.incomingEventMatches;g<h.length;g++){var l=h[g];a.add(l.eventType);for(var m=0,l=l.keyModifiers;m<l.length;m++){var n=l[m];k.isSystemModifier(n)||b.add(n)}}d.active=e}this._sourceEvents=a;this._keyModifiers=b;0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)},b.prototype._setLatestPointerType=
function(a){this._set("latestPointerType",a)},b.prototype._onEventReceived=function(a,b){if("pointer-capture-lost"===a)this._pointerCaptures["delete"](b["native"].pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,b,b["native"].timestamp)},b.prototype._updateKeyModifiers=function(a,b){var c=this;if(b){var d=!1,e=function(){if(!d){var a=new Set;c._activeKeyModifiers.forEach(function(b){a.add(b)});c._activeKeyModifiers=a;d=!0}},g=function(a,b){b&&!c._activeKeyModifiers.has(a)?
(e(),c._activeKeyModifiers.add(a)):!b&&c._activeKeyModifiers.has(a)&&(e(),c._activeKeyModifiers["delete"](a))};if("key-down"===a||"key-up"===a){var k=b.key;this._keyModifiers.has(k)&&g(k,"key-down"===a)}a=b["native"];g("Alt",!(!a||!a.altKey));g("Ctrl",!(!a||!a.ctrlKey));g("Shift",!(!a||!a.shiftKey));g("Meta",!(!a||!a.metaKey));g("Primary",this._activeKeyModifiers.has(this.primaryKey))}},b.prototype._installRecognizers=function(){var a=this;this._latestPointerTypeHandler=new n.LatestPointerType(function(b){return a._setLatestPointerType(b)});
0<this._recognizers.length&&this.installHandlers("default",this._recognizers);this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler])},b.prototype._setPointerCapture=function(a,b,c,d){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures.get(c.pointerId)||new Set;this._pointerCaptures.set(c.pointerId,b);d?(b.add(a),1===b.size&&this._browserEvents&&this._browserEvents.setPointerCapture(c,!0)):(b["delete"](a),0===b.size&&(this._pointerCaptures["delete"](c.pointerId),this._browserEvents&&
this._browserEvents.setPointerCapture(c,!1)))},b.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()},b.prototype._emitInputEventFromSource=function(a,b,c){this._emitInputEvent(0,a,b,c)},b.prototype._emitInputEvent=function(a,b,c,d,e){d=d||(this._currentPropagation?this._currentPropagation.timestamp:m());b=new r(b,c,d,e||this._activeKeyModifiers);return this._currentPropagation?void this._currentPropagation.addedEvents.push(b):
void this._doNewPropagation(a,b)},b.prototype._doNewPropagation=function(a,b){for(a=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1,timestamp:b.timestamp};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=!0;else{b=a.events;var c=[];a.addedEvents=[];for(var d=0;d<b.length;d++){var e=b[d];a.currentHandler.active&&a.currentHandler.eventCallback(e);e.shouldStopPropagation()||c.push(e)}a.events=c.concat(a.addedEvents)}a.currentHandler=
this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null},b.prototype._compareHandlerPriority=function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?1:-1;for(var c=0,d=a.handler.incomingEventMatches;c<d.length;c++)for(var e=d[c],g=function(a){if(e.eventType!==a.eventType)return"continue";var b=e.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});
return b.length===e.keyModifiers.length!==(b.length===a.keyModifiers.length)?{value:e.keyModifiers.length>a.keyModifiers.length?-1:1}:void 0},k=0,h=b.handler.incomingEventMatches;k<h.length;k++){var l=g(h[k]);if("object"==typeof l)return l.value}return a.priorityIndex>b.priorityIndex?-1:1},b.prototype._sortHandlersPriority=function(a){for(var b=[],c=0;c<a.length;c++){for(var d=a[c],e=0;e<b.length&&0<=this._compareHandlerPriority(d,b[e]);)e++;b.splice(e,0,d)}return b},b}(b.declared(c));a([b.property({readOnly:!0})],
e.prototype,"latestPointerType",void 0);e=a([b.subclass("esri.views.input.InputManager")],e);h.InputManager=e;var r=function(){function a(a,b,c,d){this.type=a;this.data=b;this.timestamp=c;this.modifiers=d;this._stopPropagation=!1}return a.prototype.stopPropagation=function(){this._stopPropagation=!0},a.prototype.shouldStopPropagation=function(){return this._stopPropagation},a}()})},"esri/views/input/keys":function(){define(["require","exports","../../core/sniff"],function(e,h,d){Object.defineProperty(h,
"__esModule",{value:!0});h.primaryKey=d("mac")?"Meta":"Ctrl";var a={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(e=48;58>e;e++)a[e]=String.fromCharCode(e);for(e=1;25>e;e++)a[111+e]="F"+e;for(e=65;91>e;e++)a[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];var b={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown"};h.eventKey=function(c){if(void 0!==
c.key)return b[c.key]||c.key;var d=a[c.keyCode];return Array.isArray(d)?c.shiftKey?d[1]:d[0]:d};h.isSystemModifier=function(a){switch(a){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}}})},"esri/views/input/recognizers":function(){define("require exports ./recognizers/Drag ./recognizers/PointerClickHoldAndDrag ./recognizers/SingleAndDoubleClick ./recognizers/VerticalTwoFingerDrag".split(" "),function(e,h,d,a,b,c){Object.defineProperty(h,"__esModule",{value:!0});h.defaults=
[a.PointerClickHoldAndDrag,b.SingleAndDoubleClick,d.Drag,c.VerticalTwoFingerDrag]})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../InputHandler ./support ../../../core/now".split(" "),function(e,h,d,a,b,c){Object.defineProperty(h,"__esModule",{value:!0});e=function(a){function e(){var b=a.call(this,"recognizers.Drag",!1)||this;return b._startStateModifiers=new Set,b._activePointers=[],b._activePointerMap=new Map,b._isDragging=!1,b._drag=
b.registerOutgoing("drag"),b.registerIncoming("pointer-drag",b._handlePointerDrag.bind(b)),b.registerIncoming("pointer-down",b._handlePointerDown.bind(b)),b.registerIncoming("pointer-up",b._handlePointerUpAndPointerLost.bind(b)),b.registerIncoming("pointer-capture-lost",b._handlePointerUpAndPointerLost.bind(b)),b}return d(e,a),e.prototype._createPayload=function(a,b){return{action:a,pointers:this._activePointers.map(function(a){return a.data}),startState:this._startState,previousState:this._previousState,
currentState:b}},e.prototype._fitCircleLSQ=function(){var a=this._activePointers.map(function(a){return a.data.currentEvent});return b.fitCircleLSQ(a)},e.prototype._createDragState=function(){for(var a=this._fitCircleLSQ(),b=0,d=0,e=this._activePointers;d<e.length;d++){for(var k=e[d],h=this._pointerAngle(k,a),h=h-k.lastAngle;h>Math.PI;)h-=2*Math.PI;for(;h<-Math.PI;)h+=2*Math.PI;h=k.lastAngle+h;k.lastAngle=h;b+=h-k.initialAngle}return b/=this._activePointers.length,{angle:b,radius:a.radius,center:a.center,
timestamp:c()}},e.prototype._updateMultiPointer=function(a){var b=a.startEvent["native"].pointerId,c=this._activePointerMap.get(b),d=!c;d?(c={data:null,initialAngle:0,lastAngle:0},this._activePointers.push(c),this._activePointerMap.set(b,c),c.data={startEvent:a.startEvent,previousEvent:a.previousEvent,currentEvent:a.currentEvent},a=this._fitCircleLSQ(),c.initialAngle=this._pointerAngle(c,a),c.lastAngle=c.initialAngle):c.data={startEvent:c.data.startEvent,previousEvent:a.previousEvent,currentEvent:a.currentEvent};
return d&&this._isDragging&&this._updateInitialAngles(),c},e.prototype._pointerAngle=function(a,b){a=a.data.currentEvent;return Math.atan2(a.y-b.center.y,a.x-b.center.x)},e.prototype._updateInitialAngles=function(){for(var a=this._createDragState(),b=0,c=this._activePointers;b<c.length;b++){var d=c[b];d.initialAngle=this._pointerAngle(d,a)}},e.prototype._emitStart=function(a){this._updateInitialAngles();var b=this._createDragState();this._previousState=this._startState=b;this._startStateModifiers=
a.modifiers;this._isDragging=!0;for(var c=0,d=this._activePointers;c<d.length;c++){var e=d[c];e.data={previousEvent:e.data.currentEvent,startEvent:e.data.currentEvent,currentEvent:e.data.currentEvent}}this._drag.emit(this._createPayload("start",b),a.timestamp)},e.prototype._emitUpdate=function(a){a=this._createDragState();this._drag.emit(this._createPayload("update",a),void 0,this._startStateModifiers);this._previousState=a},e.prototype._emitEnd=function(){var a=this._createDragState();this._drag.emit(this._createPayload("end",
a),void 0,this._startStateModifiers);this._startState=this._previousState=null;this._isDragging=!1},e.prototype._handlePointerDown=function(a){a=a.data;this._isDragging&&this._emitEnd();this._updateMultiPointer({startEvent:a,previousEvent:a,currentEvent:a})},e.prototype._removeMultiPointer=function(a){var b=this,c=a["native"].pointerId,d=this._activePointerMap.get(c);if(d){var e=function(){b._activePointerMap["delete"](c);var a=b._activePointers.indexOf(d);b._activePointers.splice(a,1);b._isDragging&&
b._updateInitialAngles()};this._isDragging?(this._updateMultiPointer({startEvent:d.data.startEvent,previousEvent:d.data.currentEvent,currentEvent:a}),this._emitEnd(),e()):e()}},e.prototype._handlePointerUpAndPointerLost=function(a){this._removeMultiPointer(a.data)},e.prototype._handlePointerDrag=function(a){var b=a.data;switch(b.action){case "start":this._isDragging||this._emitStart(a);break;case "update":this._isDragging||this._emitStart(a),this._updateMultiPointer(b),this._emitUpdate(a)}},e}(a.InputHandler);
h.Drag=e})},"esri/views/input/InputHandler":function(){define(["require","exports","./EventMatch","../../core/Logger"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});var b=a.getLogger("esri.views.input");e=function(){function a(a,b){this._manager=null;this._incoming={};this._outgoing={};this._outgoingEventTypes=this._incomingEventTypes=this._incomingEventMatches=null;this._name=a;this._hasSideEffects=b}return Object.defineProperty(a.prototype,"incomingEventMatches",{get:function(){if(!this._incomingEventMatches){this._incomingEventMatches=
[];for(var a in this._incoming)for(var b=0,c=this._incoming[a];b<c.length;b++)this._incomingEventMatches.push(c[b].match)}return this._incomingEventMatches},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"incomingEventTypes",{get:function(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(function(a){return a.eventType})),this._incomingEventTypes},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"outgoingEventTypes",{get:function(){return this._outgoingEventTypes||
(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hasSideEffects",{get:function(){return this._hasSideEffects},enumerable:!0,configurable:!0}),a.prototype.onInstall=function(a){var c=this;return this._manager?void b.error("This InputHandler has already been registered with an InputManager"):(a.setEventCallback(function(a){return c._handleEvent(a)}),a.setUninstallCallback(function(){return c._onUninstall()}),
void(this._manager=a))},a.prototype.onUninstall=function(){},a.prototype.registerIncoming=function(a,b,e){var g,k=this;"function"==typeof b?(e=b,g=[]):g=b||[];a="string"==typeof a?new d.EventMatch(a,g):a;var h=function(){k._incomingEventTypes=null;k._incomingEventMatches=null};b=function(a){var b=k._incoming[a.match.eventType];b&&(a=b.indexOf(a),b.splice(a,1),h(),k._manager&&k._manager.updateDependencies())};e=new c(a,e,{onPause:b,onRemove:b,onResume:function(a){var b=k._incoming[a.match.eventType];
b&&-1===b.indexOf(a)&&(b.push(a),h(),k._manager&&k._manager.updateDependencies())}});b=this._incoming[a.eventType];return b||(b=[],this._incoming[a.eventType]=b),b.push(e),h(),this._manager&&this._manager.updateDependencies(),e},a.prototype.registerOutgoing=function(a){var b=this;if(this._outgoing[a])throw Error("There is already a callback registered for this outgoing InputEvent: "+a);var c=new m(a,{onEmit:function(a,c,d,e){b._manager.emit(a.eventType,c,d,e)},onRemove:function(a){delete b._outgoing[a.eventType];
b._manager.updateDependencies()}});return this._outgoing[a]=c,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),c},a.prototype.startCapturingPointer=function(a){this._manager.setPointerCapture(a,!0)},a.prototype.stopCapturingPointer=function(a){this._manager.setPointerCapture(a,!1)},a.prototype._onUninstall=function(){return this._manager?(this.onUninstall(),void(this._manager=null)):void b.error("This InputHandler is not registered with an InputManager")},a.prototype._handleEvent=
function(a){var b=this._incoming[a.type];if(b)for(var c=0;c<b.length;c++){var d=b[c];if(d.match.matches(a)&&(d.callback(a),a.shouldStopPropagation()))break}},a}();h.InputHandler=e;var c=function(){function a(a,b,c){this.match=a;this._callback=b;this._handler=c}return a.prototype.pause=function(){this._handler.onPause(this)},a.prototype.resume=function(){this._handler.onResume(this)},a.prototype.remove=function(){this._handler.onRemove(this)},Object.defineProperty(a.prototype,"callback",{get:function(){return this._callback},
enumerable:!0,configurable:!0}),a}(),m=function(){function a(a,b){this.eventType=a;this._removed=!1;this._handler=b}return a.prototype.emit=function(a,b,c){this._removed||this._handler.onEmit(this,a,b,c)},a.prototype.remove=function(){this._removed=!0;this._handler.onRemove(this)},a}()})},"esri/views/input/EventMatch":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});e=function(){function d(a,b){void 0===b&&(b=[]);this.eventType=a;this.keyModifiers=
b}return d.prototype.matches=function(a){if(a.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;a=a.modifiers;for(var b=0,c=this.keyModifiers;b<c.length;b++)if(!a.has(c[b]))return!1;return!0},d}();h.EventMatch=e})},"esri/views/input/recognizers/support":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});h.manhattanDistance=function(d,a){return Math.abs(a.x-d.x)+Math.abs(a.y-d.y)};h.fitCircleLSQ=function(d,a){if(a?(a.radius=
0,a.center.x=0,a.center.y=0):a={radius:0,center:{x:0,y:0}},0===d.length)return a;if(1===d.length)return a.center.x=d[0].x,a.center.y=d[0].y,a;if(2===d.length){var b=d[0];d=d[1];var c=[d.x-b.x,d.y-b.y],e=c[0],c=c[1];return a.radius=Math.sqrt(e*e+c*c)/2,a.center.x=(b.x+d.x)/2,a.center.y=(b.y+d.y)/2,a}for(var k=0,h=0,g=0;g<d.length;g++)k+=d[g].x,h+=d[g].y;for(var k=k/d.length,h=h/d.length,n=d.map(function(a){return a.x-k}),u=d.map(function(a){return a.y-h}),r=b=a=0,t=0,w=e=0,g=c=0;g<n.length;g++){var q=
n[g],v=u[g],x=q*q,f=v*v;a+=x;b+=f;r+=q*v;t+=x*q;e+=f*v;w+=q*f;c+=v*x}g=a;n=r;u=b;t=.5*(t+w);e=.5*(e+c);c=g*u-r*n;w=(t*u-e*n)/c;e=(g*e-r*t)/c;return{radius:Math.sqrt(w*w+e*e+(a+b)/d.length),center:{x:w+k,y:e+h}}}})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});e=function(a){function c(b,c,d){void 0===b&&(b=300);
void 0===c&&(c=1.5);void 0===d&&(d=500);var e=a.call(this,"recognizers.PointerClickHoldAndDrag",!1)||this;return e.maximumClickDelay=b,e.movementUntilDrag=c,e.holdDelay=d,e._pointerState=new Map,e._modifiers=new Set,e._pointerDrag=e.registerOutgoing("pointer-drag"),e._pointerClick=e.registerOutgoing("pointer-click"),e._pointerHold=e.registerOutgoing("hold"),e.registerIncoming("pointer-down",e._handlePointerDown.bind(e)),e.registerIncoming("pointer-up",e._handlePointerUpOrLost.bind(e)),e.registerIncoming("pointer-capture-lost",
e._handlePointerUpOrLost.bind(e)),e._moveHandle=e.registerIncoming("pointer-move",e._handlePointerMove.bind(e)),e._moveHandle.pause(),e}return d(c,a),c.prototype.onUninstall=function(){this._pointerState.forEach(function(a){0!==a.holdTimeout&&(clearTimeout(a.holdTimeout),a.holdTimeout=0)});a.prototype.onUninstall.call(this)},c.prototype._handlePointerDown=function(a){var b=this,c=a.data,d=c["native"].pointerId,e=0;0===this._pointerState.size&&(e=setTimeout(function(){var c=b._pointerState.get(d);
c&&(c.isDragging||(b._pointerHold.emit(c.previousEvent,void 0,a.modifiers),c.holdEmitted=!0),c.holdTimeout=0)},this.holdDelay));1===this._pointerState.size&&this._pointerState.forEach(function(a){0!==a.holdTimeout&&(clearTimeout(a.holdTimeout),a.holdTimeout=0)});this._pointerState.set(d,{startEvent:c,previousEvent:c,startTimestamp:a.timestamp,totalMovement:0,isDragging:!1,downButton:c["native"].button,holdTimeout:e});this.startCapturingPointer(c["native"]);this._moveHandle.resume()},c.prototype._createPointerDragData=
function(a,b,c){return{action:a,startEvent:b.startEvent,previousEvent:b.previousEvent,currentEvent:c}},c.prototype._handlePointerMove=function(a){var c=a.data,d=this._pointerState.get(c["native"].pointerId);d&&(d.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",d,c),void 0,this._modifiers):(d.totalMovement+=b.manhattanDistance(c,d.previousEvent),d.totalMovement>this.movementUntilDrag&&(d.isDragging=!0,d.previousEvent=d.startEvent,this._modifiers=a.modifiers,0!==d.holdTimeout&&
clearTimeout(d.holdTimeout),this._pointerDrag.emit(this._createPointerDragData("start",d,d.startEvent),d.startTimestamp),this._pointerDrag.emit(this._createPointerDragData("update",d,c)))),d.previousEvent=c)},c.prototype._handlePointerUpOrLost=function(a){var b=a.data,c=b["native"].pointerId,d=this._pointerState.get(c);d&&((0!==d.holdTimeout&&clearTimeout(d.holdTimeout),d.isDragging)?this._pointerDrag.emit(this._createPointerDragData("end",d,b),void 0,this._modifiers):d.downButton===b["native"].button&&
a.timestamp-d.startTimestamp<=this.maximumClickDelay&&!d.holdEmitted&&this._pointerClick.emit(b),this._pointerState["delete"](c),this.stopCapturingPointer(b["native"]),0===this._pointerState.size&&this._moveHandle.pause())},c}(a.InputHandler);h.PointerClickHoldAndDrag=e})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});
e=function(a){function c(b,c,d){void 0===b&&(b=250);void 0===c&&(c=10);void 0===d&&(d=35);var e=a.call(this,"recognizers.SingleAndDoubleClick",!1)||this;return e.maximumDoubleClickDelay=b,e.maximumDoubleClickDistance=c,e.maximumDoubleTouchDistance=d,e._pointerState=new Map,e._click=e.registerOutgoing("click"),e._doubleClick=e.registerOutgoing("double-click"),e.registerIncoming("pointer-click",e._handlePointerClick.bind(e)),e}return d(c,a),c.prototype._pointerId=function(a){a=a["native"];return"mouse"===
a.pointerType?a.pointerId+":"+a.button:""+a.pointerType},c.prototype._handlePointerClick=function(a){var c=a.data,d=this._pointerId(c),e=this._pointerState.get(d);if(e){clearTimeout(e.doubleClickTimeout);e.doubleClickTimeout=0;var k="touch"===c["native"].pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;b.manhattanDistance(e.event.data,c)>k?(this._doubleClickTimeoutExceeded(d),this._startClick(a)):(this._doubleClick.emit(c,void 0,e.event.modifiers),this._pointerState["delete"](d))}else this._startClick(a)},
c.prototype._startClick=function(a){var b=this,c=this._pointerId(a.data);this._pointerState.set(c,{event:a,doubleClickTimeout:setTimeout(function(){return b._doubleClickTimeoutExceeded(c)},this.maximumDoubleClickDelay)})},c.prototype._doubleClickTimeoutExceeded=function(a){var b=this._pointerState.get(a);this._click.emit(b.event.data,void 0,b.event.modifiers);b.doubleClickTimeout=0;this._pointerState["delete"](a)},c}(a.InputHandler);h.SingleAndDoubleClick=e})},"esri/views/input/recognizers/VerticalTwoFingerDrag":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});e=function(a){function b(b,c){void 0===b&&(b=20);void 0===c&&(c=40);var d=a.call(this,"recognizers.VerticalTwoFingerDrag",!1)||this;return d._threshold=b,d._maxDelta=c,d._failed=!1,d._active=!1,d._vertical=d.registerOutgoing("vertical-two-finger-drag"),d._artificalDragEnd=d.registerOutgoing("drag"),d.registerIncoming("drag",d._handleDrag.bind(d)),d}return d(b,a),
Object.defineProperty(b.prototype,"failed",{get:function(){return this._failed},enumerable:!0,configurable:!0}),b.prototype._handleDrag=function(a){if(2===a.data.pointers.length)switch(a.data.action){case "start":this._handleDragStart(a);break;case "update":this._handleDragUpdate(a);break;case "end":this._handleDragEnd(a)}},b.prototype._handleDragStart=function(a){this._failed=!1;this._dragStartCenter=a.data.currentState.center},b.prototype._handleDragUpdate=function(a){this._failed||(this._active?
(this._vertical.emit({delta:a.data.currentState.center.y-this._thresholdReachedCenter.y,action:"update"}),a.stopPropagation()):(this._failed=!this._checkDeltaConstraint(a.data),this._failed||this._checkThresholdReached(a.data)&&(this._active=!0,this._thresholdReachedCenter=a.data.currentState.center,this._artificalDragEnd.emit({action:"end",currentState:a.data.currentState,previousState:a.data.previousState,startState:a.data.startState,pointers:a.data.pointers}),this._vertical.emit({delta:a.data.currentState.center.y-
this._thresholdReachedCenter.y,action:"begin"}),a.stopPropagation())))},b.prototype._handleDragEnd=function(a){this._active&&(this._vertical.emit({delta:a.data.currentState.center.y-this._thresholdReachedCenter.y,action:"end"}),a.stopPropagation());this._active=!1},b.prototype._checkDeltaConstraint=function(a){var b=Math.abs(a.pointers[0].startEvent.x-a.pointers[1].startEvent.x),c=Math.abs(a.pointers[0].startEvent.y-a.pointers[1].startEvent.y),d=Math.abs(a.pointers[0].currentEvent.y-a.pointers[1].currentEvent.y),
e=Math.abs(a.pointers[0].currentEvent.x-a.pointers[1].currentEvent.x);return Math.abs(a.currentState.center.x-a.startState.center.x)<this._threshold&&Math.abs(e-b)<=this._maxDelta&&Math.abs(d-c)<=this._maxDelta},b.prototype._checkThresholdReached=function(a){return Math.min(Math.abs(a.pointers[0].currentEvent.y-a.pointers[0].startEvent.y),Math.abs(a.pointers[1].currentEvent.y-a.pointers[1].startEvent.y),Math.abs(a.currentState.center.y-a.startState.center.y))>=this._threshold},b}(a.InputHandler);
h.VerticalTwoFingerDrag=e})},"esri/views/input/handlers/LatestPointerType":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});e=function(a){function b(b){var c=a.call(this,"LatestPointerInteraction",!0)||this;return c._onChange=b,c._value="mouse",c.registerIncoming("pointer-down",function(a){c._setValue("touch"===a.data["native"].pointerType?"touch":"mouse")}),c._moveHandler=c.registerIncoming("pointer-move",
function(a){c._setValue("touch"===a.data["native"].pointerType?"touch":"mouse")}),c._moveHandler.pause(),c}return d(b,a),b.prototype._setValue=function(a){a!==this._value&&("touch"===a?this._moveHandler.resume():this._moveHandler.pause(),this._value=a,this._onChange(a))},b}(a.InputHandler);h.LatestPointerType=e})},"esri/views/input/BrowserEventSource":function(){define(["require","exports","./keys","../../core/libs/pep/pep","dojo/sniff"],function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});
var c=b("trident"),m=b("edge"),k=b("chrome"),l=b("ff"),g=b("safari");e=function(){function b(b){this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._element=b;a.applyLocal(b);b.getAttribute("tabindex")||b.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointerDown,"pointer-move":this._handlePointer,"pointer-up":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};
this._initialCssTouchAction=b.style.touchAction;b.style.touchAction="none"}return b.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._element.releasePointerCapture(b)});this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction},Object.defineProperty(b.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"activeEvents",
{set:function(a){var b=this,c;for(c in this._active)a&&a.has(c)||(this._element.removeEventListener(n[c],this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&n[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(n[a],c);b._active[a]=c}})},enumerable:!0,configurable:!0}),b.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._element.releasePointerCapture(a.pointerId),
this._activePointerCaptures["delete"](a.pointerId))},b.prototype._updateNormalizedPointerLikeEvent=function(a,b){var c=this._element.getBoundingClientRect();return b.x=a.clientX-Math.round(c.left),b.y=a.clientY-Math.round(c.top),b},b.prototype._handleKey=function(a,b){var c=d.eventKey(b);c&&"key-up"===a&&this._keyDownState["delete"](c);b={"native":b,key:c,repeat:c&&this._keyDownState.has(c)};c&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)},b.prototype._handlePointerDown=function(a,
b){b=this._updateNormalizedPointerLikeEvent(b,{"native":b,x:0,y:0});this._callback(a,b)},b.prototype._handlePointer=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{"native":b,x:0,y:0});b.preventDefault();this._callback(a,c)},b.prototype._handleMouseWheel=function(a,b){b.preventDefault();var d=b.deltaY;switch(b.deltaMode){case 0:(c||m)&&(d=d/document.documentElement.clientHeight*600);break;case 1:d*=30;break;case 2:d*=900}c||m?d*=.7:k||g?d*=.6:l&&(d*=1.375);var e=Math.abs(d);100<e&&(d=
d/e*200/(1+Math.exp(-.02*(e-100))));b=this._updateNormalizedPointerLikeEvent(b,{"native":b,x:0,y:0,deltaY:d});this._callback(a,b)},b.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures["delete"](b.pointerId);this._handleDefault(a,b)},b.prototype._handleDefault=function(a,b){var c={"native":b};b.preventDefault();this._callback(a,c)},b}();h.BrowserEventSource=e;var n={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove",
"mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu"}})},"esri/core/libs/pep/pep":function(){define([],function(){function e(a,b){b=b||Object.create(null);var c=document.createEvent("Event");c.initEvent(a,b.bubbles||!1,b.cancelable||!1);for(var d=2;d<g.length;d++)a=g[d],c[a]=b[a]||n[d];c.buttons=b.buttons||0;a=0;return a=b.pressure?b.pressure:c.buttons?.5:0,c.x=c.clientX,c.y=c.clientY,c.pointerId=b.pointerId||0,c.width=
b.width||0,c.height=b.height||0,c.pressure=a,c.tiltX=b.tiltX||0,c.tiltY=b.tiltY||0,c.pointerType=b.pointerType||"",c.hwTimestamp=b.hwTimestamp||0,c.isPrimary=b.isPrimary||!1,c}function h(){this.array=[];this.size=0}function d(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);A&&(this.observer=new A(this.mutationWatcher.bind(this)))}function a(a){return"body /shadow-deep/ "+b(a)}function b(a){return'[touch-action\x3d"'+a+'"]'}function c(a){return"{ -ms-touch-action: "+
a+"; touch-action: "+a+"; touch-action-delay: none; }"}function m(){if(C){D.forEach(function(d){String(d)===d?(F+=b(d)+c(d)+"\n",E&&(F+=a(d)+c(d)+"\n")):(F+=d.selectors.map(b)+c(d.rule)+"\n",E&&(F+=d.selectors.map(a)+c(d.rule)+"\n"))});var d=document.createElement("style");d.textContent=F;document.head.appendChild(d)}}function k(a){if(!v.pointermap.has(a))throw a=Error("InvalidPointerId"),a.name="InvalidPointerId",a;}function l(a){if(!a.ownerDocument.contains(a))throw a=Error("InvalidStateError"),
a.name="InvalidStateError",a;}var g="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),n=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],u=window.Map&&window.Map.prototype.forEach?Map:h;h.prototype={set:function(a,b){return void 0===b?this["delete"](a):(this.has(a)||this.size++,void(this.array[a]=b))},has:function(a){return void 0!==this.array[a]},"delete":function(a){this.has(a)&&(delete this.array[a],this.size--)},
get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var r="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),t=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,
0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],w={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},q="undefined"!=typeof SVGElementInstance,v={pointermap:new u,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b,c=this.eventSourceList.length,
d=0;c>d&&(b=this.eventSourceList[d]);d++)b.register.call(b,a)},unregister:function(a){for(var b,c=this.eventSourceList.length,d=0;c>d&&(b=this.eventSourceList[d]);d++)b.unregister.call(b,a)},contains:function(a,b){try{return a.contains(b)}catch(Z){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=!1;this.fireEvent("pointerenter",
a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&this.eventMap[b])&&b(a);a._handledByPE=
!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new e(a,b);return b.preventDefault&&(a.preventDefault=b.preventDefault),a._target=a._target||b.target,a},fireEvent:function(a,b){a=this.makeEvent(a,
b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b,c=Object.create(null),d=0;d<r.length;d++)b=r[d],c[b]=a[b]||t[d],!q||"target"!==b&&"relatedTarget"!==b||c[b]instanceof SVGElementInstance&&(c[b]=c[b].correspondingUseElement);return a.preventDefault&&(c.preventDefault=function(){a.preventDefault()}),c},getTarget:function(a){var b=this.captureInfo[a.pointerId];return b?a._target!==b&&a.type in w?void 0:b:a._target},propagate:function(a,b,c){for(var d=a.target,e=[];!d.contains(a.relatedTarget)&&
d!==document;)e.push(d),d=d.parentNode;c&&e.reverse();e.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b){this.captureInfo[a]&&this.releaseCapture(a);this.captureInfo[a]=b;var c=new e("gotpointercapture");c.pointerId=a;this.implicitRelease=this.releaseCapture.bind(this,a);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)},releaseCapture:function(a){var b=this.captureInfo[a];
if(b){var c=new e("lostpointercapture");c.pointerId=a;this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)}},dispatchEvent:function(a){var b=this.getTarget(a);return b?b.dispatchEvent(a):void 0},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};v.boundHandler=v.eventHandler.bind(v);var x={shadow:function(a){return a?a.shadowRoot||
a.webkitShadowRoot:void 0},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);return this.canTarget(a)?a:void 0},olderShadow:function(a){var b=a.olderShadowRoot;b||(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d,e=a.elementFromPoint(b,c);for(d=this.targetingShadow(e);d;){if(a=d.elementFromPoint(b,c))return d=
this.targetingShadow(a),this.searchRoot(d,b,c)||a;d=this.olderShadow(d)}return e}},owner:function(a){for(;a.parentNode;)a=a.parentNode;return a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document),a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);return a.elementFromPoint(b,c)||(a=document),this.searchRoot(a,b,c)}},f=Array.prototype.forEach.call.bind(Array.prototype.forEach),p=Array.prototype.map.call.bind(Array.prototype.map),z=Array.prototype.slice.call.bind(Array.prototype.slice),
y=Array.prototype.filter.call.bind(Array.prototype.filter),A=window.MutationObserver||window.WebKitMutationObserver,B={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};d.prototype={watchSubtree:function(a){this.observer&&x.canTarget(a)&&this.observer.observe(a,B)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){f(this.findElements(a),
this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(z(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===
Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=p(a,this.findElements,this);return b.push(y(a,this.isElement)),b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var D=["none","auto","pan-x",
"pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],F="",C=window.PointerEvent||window.MSPointerEvent,E=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,G=v.pointermap,K=[1,4,2,8,16],L=!1;try{L=1===(new MouseEvent("test",{buttons:1})).buttons}catch(U){}var H,I={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){v.listen(a,this.events)},unregister:function(a){v.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b,
c=this.lastTouches,d=a.clientX;a=a.clientY;for(var e=0,f=c.length;f>e&&(b=c[e]);e++){var g=Math.abs(a-b.y);if(25>=Math.abs(d-b.x)&&25>=g)return!0}},prepareEvent:function(a){var b=v.cloneEvent(a),c=b.preventDefault;return b.preventDefault=function(){a.preventDefault();c()},b.pointerId=this.POINTER_ID,b.isPrimary=!0,b.pointerType=this.POINTER_TYPE,b},prepareButtonsForMove:function(a,b){var c=G.get(this.POINTER_ID);0!==b.which&&c?a.buttons=c.buttons:a.buttons=0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
G.get(this.POINTER_ID),c=this.prepareEvent(a);L||(c.buttons=K[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);G.set(this.POINTER_ID,a);b&&0!==b.buttons?v.move(c):v.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);L||this.prepareButtonsForMove(b,a);b.button=-1;G.set(this.POINTER_ID,a);v.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=G.get(this.POINTER_ID),c=this.prepareEvent(a);if(!L){var d=K[c.button];c.buttons=
b?b.buttons&~d:0;a.buttons=c.buttons}G.set(this.POINTER_ID,a);c.buttons&=~K[c.button];0===c.buttons?v.up(c):v.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);L||this.prepareButtonsForMove(b,a);b.button=-1;G.set(this.POINTER_ID,a);v.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);L||this.prepareButtonsForMove(b,a);b.button=-1;v.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);v.cancel(a);
this.deactivateMouse()},deactivateMouse:function(){G["delete"](this.POINTER_ID)}},N=v.captureInfo,S=x.findTarget.bind(x),M=x.allShadows.bind(x),ca=v.pointermap,O={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){H.enableOnSubtree(a)},unregister:function(a){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,v.listen(a,this.events),M(a).forEach(function(a){a._scrollType=c;v.listen(a,this.events)},this))},
elementRemoved:function(a){a._scrollType=void 0;v.unlisten(a,this.events);M(a).forEach(function(a){a._scrollType=void 0;v.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,M(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},
touchActionToScrollType:function(a){var b=this.scrollTypes;return"none"===a?"none":a===b.XSCROLLER?"X":a===b.YSCROLLER?"Y":b.SCROLLER.exec(a)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){(0===ca.size||1===ca.size&&ca.has(1))&&(this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(a){a.isPrimary&&(this.firstTouch=
null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;return("touchstart"===a||"touchmove"===a)&&(b=1),b},touchToPointer:function(a){var b=this.currentTouchEvent,c=v.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=N[d]||S(c);c.bubbles=!0;c.cancelable=
!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=a.radiusX||a.webkitRadiusX||0;c.height=a.radiusY||a.webkitRadiusY||0;c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;var e=this;return c.preventDefault=function(){e.scrolling=!1;e.firstXY=null;b.preventDefault()},c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=
a;for(var d=0;d<c.length;d++)a=c[d],b.call(this,this.touchToPointer(a))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}return this.firstXY=null,b}},findTouch:function(a,b){for(var c,d=0,e=a.length;e>d&&(c=a[d]);d++)if(c.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(ca.size>=
b.length){var c=[];ca.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){ca.set(a.pointerId,{target:a.target,out:a,outTarget:a.target});v.enterOver(a);v.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,
this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=ca.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;v.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(v.leaveOut(c),v.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(v.up(a),v.leaveOut(a));
this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){v.cancel(a);v.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){ca["delete"](a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=I.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};H=new d(O.elementAdded,O.elementRemoved,
O.elementChanged,O);var P,W,aa=v.pointermap,R=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,T={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){v.listen(a,this.events)},unregister:function(a){v.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;return R&&(b=v.cloneEvent(a),b.pointerType=
this.POINTER_TYPES[a.pointerType]),b},cleanup:function(a){aa["delete"](a)},MSPointerDown:function(a){aa.set(a.pointerId,a);a=this.prepareEvent(a);v.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);v.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);v.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);v.leaveOut(a)},MSPointerOver:function(a){a=this.prepareEvent(a);v.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);v.cancel(b);this.cleanup(a.pointerId)},
MSLostPointerCapture:function(a){a=v.makeEvent("lostpointercapture",a);v.dispatchEvent(a)},MSGotPointerCapture:function(a){a=v.makeEvent("gotpointercapture",a);v.dispatchEvent(a)}};window.navigator.msPointerEnabled?(P=function(a){k(a);l(this);0!==v.pointermap.get(a).buttons&&this.msSetPointerCapture(a)},W=function(a){k(a);this.msReleasePointerCapture(a)}):(P=function(a){k(a);l(this);0!==v.pointermap.get(a).buttons&&v.setCapture(a,this)},W=function(a){k(a);v.releaseCapture(a,this)});var ba=window.PointerEvent||
window.MSPointerEvent;return{dispatcher:v,Installer:d,PointerEvent:e,PointerMap:u,targetFinding:x,applyGlobal:function(){m();window.PointerEvent||((window.PointerEvent=e,window.navigator.msPointerEnabled)?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,enumerable:!0}),v.registerSource("ms",T)):(v.registerSource("mouse",I),void 0!==window.ontouchstart&&v.registerSource("touch",O)),v.register(document));window.Element&&!Element.prototype.setPointerCapture&&
Object.defineProperties(Element.prototype,{setPointerCapture:{value:P},releasePointerCapture:{value:W}})},applyLocal:function(a){ba||(window.PointerEvent||(window.navigator.msPointerEnabled?v.registerSource("ms",T):(v.registerSource("mouse",I),void 0!==window.ontouchstart&&v.registerSource("touch",O)),v.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=P.bind(a),a.releasePointerCapture=W.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action",
"none"))}}})},"esri/views/input/ViewEvents":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./InputHandler","../../geometry/ScreenPoint"],function(e,h,d,a,b){function c(a){return!!l[a]}function m(a){for(var b=0;b<a.length;b++)if(!c(a[b]))return!1;return!0}Object.defineProperty(h,"__esModule",{value:!0});var k,l={click:!0,"double-click":!0,hold:!0,drag:!0,"key-down":!0,"key-up":!0,"pointer-down":!0,"pointer-move":!0,"pointer-up":!0,"mouse-wheel":!0};!function(a){a[a.Left=
0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right"}(k||(k={}));e=function(){function a(a){this.handlers=new Map;this.counter=0;this.view=a;this.inputManager=null}return a.prototype.connect=function(a){var b=this;a&&this.disconnect();this.inputManager=a;this.handlers.forEach(function(a,c){return b.inputManager.installHandlers(c,[a])})},a.prototype.disconnect=function(){var a=this;this.inputManager&&this.handlers.forEach(function(b,c){return a.inputManager.uninstallHandlers(c)});this.inputManager=
null},a.prototype.destroy=function(){this.disconnect();this.handlers.clear();this.view=null},a.prototype.register=function(a,b,d){var e=this;a=Array.isArray(a)?a:a.split(",");if(!m(a))return a.some(c)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;var k=Array.isArray(b)?b:[];d=Array.isArray(b)?d:b;var h=this.createUniqueGroupName();b=new g(this.view,a,k,d);return this.handlers.set(h,b),this.inputManager&&this.inputManager.installHandlers(h,
[b]),{remove:function(){return e.removeHandler(h)}}},a.prototype.removeHandler=function(a){this.handlers.has(a)&&this.handlers["delete"](a);this.inputManager&&this.inputManager.uninstallHandlers(a)},a.prototype.createUniqueGroupName=function(){return this.counter+=1,"viewEvents_"+this.counter},a}();h.ViewEvents=e;var g=function(a){function c(b,c,d,e){var g=a.call(this,"esri.views.input.ViewEventHandler",!0)||this;g.view=b;for(b=0;b<c.length;b++)switch(c[b]){case "click":g.registerIncoming("click",
d,function(a){return e(g.wrapClick(a))});break;case "double-click":g.registerIncoming("double-click",d,function(a){return e(g.wrapDoubleClick(a))});break;case "hold":g.registerIncoming("hold",d,function(a){return e(g.wrapHold(a))});break;case "drag":g.registerIncoming("drag",d,function(a){return e(g.wrapDrag(a))});break;case "key-down":g.registerIncoming("key-down",d,function(a){return e(g.wrapKeyDown(a))});break;case "key-up":g.registerIncoming("key-up",d,function(a){return e(g.wrapKeyUp(a))});break;
case "pointer-down":g.registerIncoming("pointer-down",d,function(a){return e(g.wrapPointer(a,"pointer-down"))});break;case "pointer-move":g.registerIncoming("pointer-move",d,function(a){return e(g.wrapPointer(a,"pointer-move"))});break;case "pointer-up":g.registerIncoming("pointer-up",d,function(a){return e(g.wrapPointer(a,"pointer-up"))});break;case "mouse-wheel":g.registerIncoming("mouse-wheel",d,function(a){return e(g.wrapMouseWheel(a))})}return g}return d(c,a),c.prototype.wrapClick=function(a){var c=
a.data.x,d=a.data.y;return{type:"click",button:"touch"===a.data["native"].pointerType?0:a.data["native"].button,x:c,y:d,"native":a.data["native"],timestamp:a.timestamp,screenPoint:new b(c,d),mapPoint:this.view.toMap(c,d),stopPropagation:function(){return a.stopPropagation()}}},c.prototype.wrapDoubleClick=function(a){var b=a.data.x,c=a.data.y;return{type:"double-click",button:"touch"===a.data["native"].pointerType?0:a.data["native"].button,x:b,y:c,"native":a.data["native"],timestamp:a.timestamp,mapPoint:this.view.toMap(b,
c),stopPropagation:function(){return a.stopPropagation()}}},c.prototype.wrapHold=function(a){var b=a.data.x,c=a.data.y;return{type:"hold",button:"touch"===a.data["native"].pointerType?0:a.data["native"].button,x:b,y:c,"native":a.data["native"],timestamp:a.timestamp,mapPoint:this.view.toMap(b,c),stopPropagation:function(){return a.stopPropagation()}}},c.prototype.wrapDrag=function(a){return{type:"drag",action:a.data.action,x:a.data.currentState.center.x,y:a.data.currentState.center.y,origin:{x:a.data.startState.center.x,
y:a.data.startState.center.y},"native":a.data.pointers[0].currentEvent["native"],timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}},c.prototype.wrapKeyDown=function(a){return{type:"key-down",key:a.data.key,repeat:a.data.repeat,"native":a.data["native"],timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}},c.prototype.wrapKeyUp=function(a){return{type:"key-up",key:a.data.key,"native":a.data["native"],timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}},
c.prototype.wrapPointer=function(a,b){return{type:b,x:a.data.x,y:a.data.y,pointerId:a.data["native"].pointerId,pointerType:a.data["native"].pointerType,"native":a.data["native"],timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}},c.prototype.wrapMouseWheel=function(a){return{type:"mouse-wheel",x:a.data.x,y:a.data.y,deltaY:a.data.deltaY,"native":a.data["native"],timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}},c}(a.InputHandler)})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});e=function(a){function b(){var b=a.call(this,"PreventContextMenu",!0)||this;return b.registerIncoming("context-menu",function(a){a.data["native"].preventDefault()}),b}return d(b,a),b}(a.InputHandler);h.PreventContextMenu=e;h["default"]=e})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../input/InputHandler","../../../input/handlers/support"],function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});e=function(a){function c(b,c){var d=a.call(this,"esri.views.2d.input.handlers.DoubleClickZoom",!0)||this;return d.view=b,d.registerIncoming("double-click",c,function(a){return d._handleDoubleClick(a,c)}),d}return d(c,a),c.prototype._handleDoubleClick=function(a,c){b.eventMatchesPointerType(a.data["native"],"primary")&&(a.stopPropagation(),c?this.view.navigation.zoomOut([a.data.x,
a.data.y]):this.view.navigation.zoomIn([a.data.x,a.data.y]))},c}(a.InputHandler);h.DoubleClickZoom=e})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});h.eventMatchesPointerType=function(d,a){switch(a){case "primary":return"touch"===d.pointerType||0===d.button;case "secondary":return"touch"!==d.pointerType&&2===d.button;case "tertiary":return"touch"!==d.pointerType&&1===d.button}}})},"esri/views/2d/input/handlers/DragPan":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});e=function(a){function c(b,c,d){var e=a.call(this,"esri.views.2d.input.handlers.DragPan - "+c,!0)||this;return e.view=b,e.pointerType=c,e.registerIncoming("drag",d,function(a){return e._handleDrag(a)}),e.registerIncoming("pointer-down",function(a){return e.stopMomentumNavigation()}),e}return d(c,a),c.prototype._handleDrag=
function(a){var c=a.data,d=this.view.navigation;if(1<c.pointers.length||d.pinch.zoomMomentum||d.pinch.rotateMomentum)return void this.stopMomentumNavigation();if(b.eventMatchesPointerType(c.pointers[0].startEvent["native"],this.pointerType)){d=d.pan;switch(c.action){case "start":d.begin(this.view,c);break;case "update":d.update(this.view,c);break;case "end":d.end(this.view,c)}a.stopPropagation()}},c.prototype.stopMomentumNavigation=function(){this.view.navigation.pan.stopMomentumNavigation()},c}(a.InputHandler);
h.DragPan=e})},"esri/views/2d/input/handlers/DragRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});e=function(a){function c(b,c,d){var e=a.call(this,"esri.views.2d.input.handlers.DragRotate - "+c,!0)||this;return e.view=b,e.pointerType=c,e.registerIncoming("drag",d,function(a){return e._handleDrag(a)}),e}return d(c,a),c.prototype._handleDrag=
function(a){var c=a.data;if(!(1<c.pointers.length)&&b.eventMatchesPointerType(c.pointers[0].startEvent["native"],this.pointerType)){var d=this.view.navigation.rotate;switch(c.action){case "start":d.begin(this.view,c);break;case "update":d.update(this.view,c);break;case "end":d.end(this.view,c)}a.stopPropagation()}},c}(a.InputHandler);h.DragRotate=e})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],
function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});e=function(a){function b(b,c,d){var e=a.call(this,"esri.views.2d.input.handlers.KeyPan",!0)||this;return e.view=b,e.keys=c,e._keyMap=(k={},k[c.left]="left",k[c.right]="right",k[c.up]="up",k[c.down]="down",k),e.registerIncoming("key-down",d,function(a){return e._handleKeyDown(a)}),e.registerIncoming("key-up",d,function(a){return e._handleKeyUp(a)}),e;var k}return d(b,a),b.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,
!0)},b.prototype._handleKeyUp=function(a){this._handleKey(a,!1)},b.prototype._handleKey=function(a,b){var c=this._keyMap[a.data.key];if(null!=c){if(b)switch(c){case "left":this.view.navigation.continousPanLeft();break;case "right":this.view.navigation.continousPanRight();break;case "up":this.view.navigation.continousPanUp();break;case "down":this.view.navigation.continousPanDown()}else this.view.navigation.stop();a.stopPropagation()}},b}(a.InputHandler);h.KeyPan=e})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});var b;!function(a){a[a.IN=0]="IN";a[a.OUT=1]="OUT"}(b||(b={}));e=function(a){function c(c,d,e){var g=a.call(this,"esri.views.2d.input.handlers.KeyZoom",!0)||this;return g.view=c,g.keys=d,g._keysToZoomAction={},g.registerIncoming("key-down",e,function(a){return g._handleKeyDown(a)}),d.zoomIn.forEach(function(a){return g._keysToZoomAction[a]=b.IN}),d.zoomOut.forEach(function(a){return g._keysToZoomAction[a]=
b.OUT}),g}return d(c,a),c.prototype._handleKeyDown=function(a){this._handleKey(a)},c.prototype._handleKey=function(a){var c=a.modifiers;0<c.size&&!c.has("Shift")||(c=this._keysToZoomAction[a.data.key],c===b.IN?(this.view.navigation.zoomIn(),a.stopPropagation()):c===b.OUT&&(this.view.navigation.zoomOut(),a.stopPropagation()))},c}(a.InputHandler);h.KeyZoom=e})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],
function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});e=function(a){function b(b,c,d){var e=a.call(this,"esri.views.2d.input.handlers.KeyRotate",!0)||this;return e.view=b,e.keys=c,e._keyToDirection=(k={},k[c.clockwiseOption1]="clockwise",k[c.clockwiseOption2]="clockwise",k[c.counterClockwiseOption1]="counterClockwise",k[c.counterClockwiseOption2]="counterClockwise",k[c.resetOption1]="reset",k[c.resetOption2]="reset",k),e.registerIncoming("key-down",d,function(a){return e._handleKeyDown(a)}),
e.registerIncoming("key-up",d,function(a){return e._handleKeyUp(a)}),e;var k}return d(b,a),b.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,!0)},b.prototype._handleKeyUp=function(a){this._handleKey(a,!1)},b.prototype._handleKey=function(a,b){var c=a.modifiers;0<c.size&&!c.has("Shift")||!this.view.constraints.rotationEnabled||(c=this._keyToDirection[a.data.key])&&(b?"clockwise"===c?this.view.navigation.continousRotateClockwise():"counterClockwise"===c?this.view.navigation.continousRotateCounterclockwise():
this.view.navigation.resetRotation():this.view.navigation.stop(),a.stopPropagation())},b}(a.InputHandler);h.KeyRotate=e})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});e=function(a){function b(b,c){var d=a.call(this,"esri.views.2d.input.handlers.MouseWheelZoom",!0)||this;return d.view=b,d._canZoom=!0,d.registerIncoming("mouse-wheel",
c,function(a){return d._handleMouseWheel(a)}),d}return d(b,a),b.prototype._handleMouseWheel=function(a){var b=this;if(this._canZoom){var c=a.data;(c=this.view.navigation.zoom(1/Math.pow(.6,1/60*c.deltaY),[c.x,c.y]))&&(this._canZoom=!1,c.always(function(){b._canZoom=!0}));a.stopPropagation()}},b}(a.InputHandler);h.MouseWheelZoom=e})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(e,
h,d,a){Object.defineProperty(h,"__esModule",{value:!0});e=function(a){function b(b){var c=a.call(this,"esri.views.2d.input.handlers.PinchZoom",!0)||this;return c.view=b,c.registerIncoming("drag",function(a){return c._handleDrag(a)}),c.registerIncoming("pointer-down",function(a){return c.stopMomentumNavigation()}),c}return d(b,a),b.prototype._handleDrag=function(a){var b=a.data;if(!(2>b.pointers.length)){var c=this.view.navigation.pinch;switch(b.action){case "start":c.begin(this.view,b);break;case "update":c.update(this.view,
b);break;case "end":c.end(this.view,b)}a.stopPropagation()}},b.prototype.stopMomentumNavigation=function(){this.view.navigation.pinch.stopMomentumNavigation()},b}(a.InputHandler);h.PinchRotateAndZoom=e})},"esri/views/2d/navigation/MapViewNavigation":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../Viewpoint ../../../geometry/Point ./actions/Pan ./actions/Rotate ./actions/Pinch ./ZoomBox ../viewpointUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r){var t=new m({targetGeometry:new k}),w=[0,0];e=function(a){function b(b){b=a.call(this)||this;return b.animationManager=null,b}return d(b,a),b.prototype.initialize=function(){this.pan=new l({navigation:this});this.rotate=new g({navigation:this});this.pinch=new n({navigation:this});this.zoomBox=new u({view:this.view,navigation:this})},b.prototype.destroy=function(){this.zoomBox.destroy();this.animationManager=this.zoomBox=null},b.prototype.begin=function(){this._set("interacting",
!0)},b.prototype.end=function(){this._set("interacting",!1)},b.prototype.zoom=function(a,b){return void 0===b&&(b=this._getDefaultAnchor()),this.stop(),this.begin(),this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs?1>a?this.zoomIn(b):this.zoomOut(b):void this.setViewpoint(b,a,0)},b.prototype.zoomIn=function(a){void 0===a&&(a=this._getDefaultAnchor());this.begin();var b=this.view,c=b.scale,d=b.constraints.snapToNextScale(c);a=b.goTo(this._scaleAndRotateViewpoint(t,a,d/c,0));return this.end(),
a},b.prototype.zoomOut=function(a){void 0===a&&(a=this._getDefaultAnchor());this.begin();var b=this.view,c=b.scale,d=b.constraints.snapToPreviousScale(c);a=b.goTo(this._scaleAndRotateViewpoint(t,a,d/c,0));return this.end(),a},b.prototype.setViewpoint=function(a,b,c){this.begin();this.view.state.viewpoint=this._scaleAndRotateViewpoint(t,a,b,c);this.end()},b.prototype.animateViewpoint=function(a,b,c){return this.view.goTo(this._scaleAndRotateViewpoint(t,a,b,c))},b.prototype.continousRotateClockwise=
function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){r.rotateBy(a,a,-1)})},b.prototype.continousRotateCounterclockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){r.rotateBy(a,a,1)})},b.prototype.resetRotation=function(){this.view.rotation=0},b.prototype.continousPanLeft=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){r.translateBy(a,a,[-10,0])})},b.prototype.continousPanRight=
function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){r.translateBy(a,a,[10,0])})},b.prototype.continousPanUp=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){r.translateBy(a,a,[0,10])})},b.prototype.continousPanDown=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){r.translateBy(a,a,[0,-10])})},b.prototype.stop=function(){this.pan.stopMomentumNavigation();this.animationManager.stop();
this.end()},b.prototype._getDefaultAnchor=function(){var a=this.view.size;return w[0]=.5*a[0],w[1]=.5*a[1],w},b.prototype._scaleAndRotateViewpoint=function(a,b,c,d){var e=this.view,f=e.size,g=e.padding,k=e.constraints,h=e.viewpoint,l=e.scale*c,e=k.canZoomInTo(l),k=k.canZoomOutTo(l);return 1<c&&!e||1>=c&&!k?h:r.padAndScaleAndRotateBy(a,h,c,d,b,f,g)},b}(b.declared(c));return a([b.property()],e.prototype,"animationManager",void 0),a([b.property({type:Boolean,readOnly:!0})],e.prototype,"interacting",
void 0),a([b.property()],e.prototype,"pan",void 0),a([b.property()],e.prototype,"pinch",void 0),a([b.property()],e.prototype,"rotate",void 0),a([b.property()],e.prototype,"view",void 0),a([b.property()],e.prototype,"zoomBox",void 0),e=a([b.subclass("esri.views.2d.navigation.MapViewNavigation")],e)})},"esri/views/2d/navigation/actions/Pan":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../../navigation/Momentum ../../../3d/lib/glMatrix".split(" "),
function(e,h,d,a,b,c,m,k,l){e=function(a){function b(b){var c=a.call(this)||this;return c.animationTime=0,c.momentumEstimator=new k.ScreenspaceMomentumEstimator(.05,600,6,.92),c.momentum=null,c.momentumVelocityX=0,c.momentumVelocityY=0,c.momentumFinished=!1,c.viewpoint=m.create(),c.watch("momentumFinished",function(a){a&&c.navigation.stop()}),c}return d(b,a),b.prototype.begin=function(a,b){this.navigation.begin();this.momentumEstimator.reset();this.addToEstimator(b)},b.prototype.update=function(a,
b){this.addToEstimator(b);var c=b.pointers[0];b=c.currentEvent.x;var d=c.currentEvent.y;b=(c=c.previousEvent)?c.x-b:-b;d=c?d-c.y:d;a.viewpoint=m.translateBy(this.viewpoint,a.viewpoint,[b||0,d||0])},b.prototype.end=function(a,b){this.addToEstimator(b);this.momentum=this.momentumEstimator.evaluateMomentum();this.animationTime=0;this.momentum&&(this.momentumVelocityX=(this.momentum.dataNewest[0]-this.momentum.dataOldest[0])/this.momentum.dataTimeDelta,this.momentumVelocityY=(this.momentum.dataNewest[1]-
this.momentum.dataOldest[1])/this.momentum.dataTimeDelta,this.onAnimationUpdate(a));this.navigation.end()},b.prototype.addToEstimator=function(a){var b=a.pointers[0],c=b.currentEvent.x,b=b.currentEvent.y;this.momentumEstimator.add(c,b,l.vec3.createFrom(c,b,0),.001*a.currentState.timestamp)},b.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,d){b.momentumFinished=!b.momentum||b.momentum.isFinished(b.animationTime);d*=.001;if(b.notifyChange("momentumFinished"),
!b.momentumFinished){var e=b.momentum.velocityFactor(b.animationTime);a.viewpoint=m.translateBy(c,c,[-(e*b.momentumVelocityX*d),e*b.momentumVelocityY*d])}b.animationTime+=d})},b.prototype.stopMomentumNavigation=function(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())},b}(b.declared(c));return a([b.property()],e.prototype,"viewpoint",void 0),a([b.property()],e.prototype,"navigation",void 0),e=a([b.subclass("esri.views.2d.navigation.actions.Pan")],e)})},"esri/views/navigation/Momentum":function(){define(["require",
"exports","../../core/tsSupport/extendsHelper","./ValueHistory","../3d/lib/glMatrix"],function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});var c=function(){function a(a,b,c){this._initialVelocity=a;this._stopVelocity=b;this._friction=c;this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}return Object.defineProperty(a.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),a.prototype.isFinished=
function(a){return a>this.duration},Object.defineProperty(a.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0}),a.prototype.value=function(a){a=Math.min(a,this.duration);var b=1-this._friction;return this._initialVelocity*(Math.pow(b,a)-1)/Math.log(b)},a.prototype.valueDelta=function(a,b){var c=this.value(a);return this.value(a+b)-c},a}();h.Momentum=c;e=function(){function b(b,c,d,e){void 0===b&&(b=.05);this._minimumInitialVelocity=c;this._stopVelocity=d;this._friction=
e;this._history=new a.ValueHistory(1E3*b)}return b.prototype.add=function(a,b){void 0!==b&&(b*=1E3);this._history.add(a,b)},b.prototype.reset=function(){this._history.reset()},Object.defineProperty(b.prototype,"stopVelocity",{get:function(){return this._stopVelocity},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0}),b.prototype.evaluateMomentum=function(){var a=this._evaluateVelocity();return null!==
a?new c(a,this._stopVelocity,this._friction):null},b.prototype._evaluateVelocity=function(){var a=this._history,b=a.oldest,a=a.newest;if(b&&a){var c=(a.timeStamp-b.timeStamp)/1E3;if(0<c&&(b=(a.value-b.value)/c,Math.abs(b)>=this._minimumInitialVelocity))return b}return null},b}();h.MomentumEstimator=e;var m=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}return d(b,a),b.prototype.value=function(b){b=a.prototype.value.call(this,b);return Math.exp(b)},b.prototype.valueDelta=function(b,
c){var d=a.prototype.value.call(this,b);b=a.prototype.value.call(this,b+c);return Math.exp(b-d)},b}(c);h.ZoomMomentum=m;var k=function(a){function b(b,c,d,e){return void 0===b&&(b=.05),void 0===c&&(c=4),void 0===d&&(d=.01),void 0===e&&(e=.95),a.call(this,b,c,d,e)||this}return d(b,a),b.prototype.add=function(b,c){a.prototype.add.call(this,Math.log(b),c)},b.prototype.evaluateMomentum=function(){var a=this._evaluateVelocity();return null!==a?new m(a,this.stopVelocity,this.friction):null},b}(e);h.ZoomMomentumEstimator=
k;e=function(a){function b(b,c,d,e){return void 0===b&&(b=.05),void 0===c&&(c=4),void 0===d&&(d=.01),void 0===e&&(e=.95),a.call(this,b,c,d,e)||this}return d(b,a),b.prototype.add=function(b,c){var d=this._history.newest;if(d){d=d.value;for(b-=d;b>Math.PI;)b-=2*Math.PI;for(;b<-Math.PI;)b+=2*Math.PI;b=d+b}a.prototype.add.call(this,b,c)},b}(e);h.RotationMomentumEstimator=e;var l=function(a){function b(b,c,d,e,g,k){b=a.call(this,b,c,d)||this;return b.dataOldest=e,b.dataNewest=g,b.dataTimeDelta=k,b}return d(b,
a),b.prototype.velocityFactor=function(a){return a=Math.min(a,this.duration),Math.pow(1-this.friction,a)},b.prototype.valueFromInitialVelocity=function(a,b){b=Math.min(b,this.duration);var c=1-this.friction;return a*(Math.pow(c,b)-1)/Math.log(c)},b}(c);h.ScreenspaceMomentum=l;e=function(){function c(b,c,d,e){void 0===b&&(b=.05);this._minimumInitialVelocity=c;this._stopVelocity=d;this._friction=e;this._entryPool=[];this._history=new a.ValueHistory(1E3*b)}return c.prototype.add=function(a,c,d,e){void 0!==
e&&(e*=1E3);var g;0!==this._entryPool.length?(g=this._entryPool.pop(),g.x=a,g.y=c,b.vec3d.set(d,g.data)):g={x:a,y:c,data:b.vec3d.create(d)};this._history.add(g,e)},c.prototype.reset=function(){for(var a=0,b=this._history.values;a<b.length;a++)this._entryPool.push(b[a].value);this._history.reset()},Object.defineProperty(c.prototype,"stopVelocity",{get:function(){return this._stopVelocity},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"friction",{get:function(){return this._friction},
enumerable:!0,configurable:!0}),c.prototype.evaluateMomentum=function(){var a=this._evaluateVelocity(),b=this._history.oldest,c=this._history.newest;return null!==a?new l(a,this._stopVelocity,this._friction,b.value.data,c.value.data,.001*(c.timeStamp-b.timeStamp)):null},c.prototype._evaluateVelocity=function(){var a=this._history,b=a.oldest,c=a.newest;if(b&&c&&(a=.001*(c.timeStamp-b.timeStamp),0<a)){var d=c.value.x-b.value.x,b=c.value.y-b.value.y,b=Math.sqrt(d*d+b*b)/a;if(Math.abs(b)>=this._minimumInitialVelocity)return b}return null},
c}();h.ScreenspaceMomentumEstimator=e})},"esri/views/navigation/ValueHistory":function(){define(["require","exports","../../core/now"],function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});e=function(){function a(a){this._maximumAge=a;this._values=[]}return Object.defineProperty(a.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),a.prototype.reset=function(){this._values=[]},a.prototype.add=function(a,c){c=void 0!==c?c:d();this._values.push({value:a,
timeStamp:c});this._cleanup(c)},Object.defineProperty(a.prototype,"newest",{get:function(){var a=this._values.length;return 0<a?this._values[a-1]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"oldest",{get:function(){return 0<this._values.length?this._values[0]:void 0},enumerable:!0,configurable:!0}),a.prototype._cleanup=function(a){for(;0<this._values.length&&this._values[0].timeStamp+this._maximumAge<a;)this._values.shift()},a}();h.ValueHistory=e})},"esri/views/2d/navigation/actions/Rotate":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../libs/gl-matrix/vec2".split(" "),
function(e,h,d,a,b,c,m,k){e=function(a){function b(b){b=a.call(this)||this;return b.animationTime=0,b.viewpoint=m.create(),b}return d(b,a),b.prototype.begin=function(a,b){this.navigation.begin()},b.prototype.update=function(a,b){var c=b.pointers[0];b=k.create();b=k.set(b,c.currentEvent.x,a.height-c.currentEvent.y);var c=c.previousEvent,d=k.create();k.set(d,c.x,a.height-c.y);b=m.angleBetween(a.state.paddedScreenCenter,b,d);a.viewpoint=m.rotateBy(this.viewpoint,a.content.viewpoint,b)},b.prototype.end=
function(a,b){this.navigation.end()},b}(b.declared(c));return a([b.property()],e.prototype,"viewpoint",void 0),a([b.property()],e.prototype,"navigation",void 0),e=a([b.subclass("esri.views.2d.actions.Rotate")],e)})},"esri/views/2d/navigation/actions/Pinch":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../../navigation/Momentum ../../libs/gl-matrix/vec2".split(" "),
function(e,h,d,a,b,c,m,k,l){e=function(a){function b(b){var c=a.call(this,b)||this;return c.animationTime=0,c.momentumFinished=!1,c.rotateMomentumEstimator=new k.RotationMomentumEstimator(.05,6,.15,.95),c.rotateMomentum=null,c.rotationDirection=1,c.zoomMomentumEstimator=new k.ZoomMomentumEstimator(.05),c.zoomMomentum=null,c.zoomDirection=1,c.viewpoint=m.create(),c.watch("momentumFinished",function(a){a&&c.navigation.stop()}),c}return d(b,a),b.prototype.begin=function(a,b){this.navigation.begin();
this.rotateMomentumEstimator.reset();this.zoomMomentumEstimator.reset();this.addToRotateEstimator(b,0);this.addToZoomEstimator(b,b.startState.radius/b.currentState.radius)},b.prototype.update=function(a,b){var c=b.currentState,d=c.angle,e=c.radius,c=c.center,g=b.previousState,k=g.radius,f=g.angle,g=b.startState.radius/e;k&&(e/=k,d=180*(d-f)/Math.PI,this.rotationDirection=0<=d?1:-1,this.zoomDirection=1<=e?1:-1,a.constraints.rotationEnabled||(d=0),this.addToRotateEstimator(b,d),this.addToZoomEstimator(b,
g),this.center=c,this.navigation.setViewpoint([c.x,c.y],1/e,d))},b.prototype.end=function(a,b){this.addToRotateEstimator(b,0);this.addToZoomEstimator(b,b.startState.radius/b.currentState.radius);this.rotateMomentum=this.rotateMomentumEstimator.evaluateMomentum();this.zoomMomentum=this.zoomMomentumEstimator.evaluateMomentum();this.animationTime=0;(this.rotateMomentum||this.zoomMomentum)&&this.onAnimationUpdate(a);this.navigation.end()},b.prototype.addToRotateEstimator=function(a,b){this.rotateMomentumEstimator.add(b,
.001*a.currentState.timestamp)},b.prototype.addToZoomEstimator=function(a,b){this.zoomMomentumEstimator.add(b,.001*a.currentState.timestamp)},b.prototype.canZoomIn=function(a){var b=a.scale;a=a.constraints.effectiveMaxScale;return 0===a||b>a},b.prototype.canZoomOut=function(a){var b=a.scale;a=a.constraints.effectiveMinScale;return 0===a||a>b},b.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,d){var e=!b.canZoomIn(a)&&1<b.zoomDirection||
!b.canZoomOut(a)&&1>b.zoomDirection;b.momentumFinished=!b.rotateMomentum||b.rotateMomentum.isFinished(b.animationTime)||e;d*=.001;if(b.notifyChange("momentumFinished"),!b.momentumFinished){var e=Math.abs(b.rotateMomentum.valueDelta(b.animationTime,d))*b.rotationDirection*2,g=b.zoomMomentum?Math.abs(b.zoomMomentum.valueDelta(b.animationTime,d)):1,k=l.create(),f=l.create();l.set(k,b.center.x,b.center.y);m.getPaddingScreenTranslation(f,a.size,a.padding);l.add(k,k,f);m.scaleAndRotateBy(c,a.viewpoint,
g,e,k,a.size)}b.animationTime+=d})},b.prototype.stopMomentumNavigation=function(){(this.rotateMomentum||this.zoomMomentum)&&(this.rotateMomentum&&(this.rotateMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this.zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop())},b}(b.declared(c));return a([b.property()],e.prototype,"viewpoint",void 0),a([b.property()],e.prototype,"navigation",void 0),e=a([b.subclass("esri.views.2d.navigation.actions.Pinch")],e)})},
"esri/views/2d/navigation/ZoomBox":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor".split(" "),function(e,h,d,a,b,c){e=function(a){function b(b){b=a.call(this,b)||this;return b._container=null,b._overlay=null,b._backgroundShape=null,b._boxShape=null,b._box={x:0,y:0,width:0,height:0},b._redraw=b._redraw.bind(b),b}return d(b,a),b.prototype.destroy=function(){this.view=
null},Object.defineProperty(b.prototype,"view",{set:function(a){var b=this;this._handles&&this._handles.forEach(function(a){a.remove()});this._handles=null;this._destroyOverlay();this._set("view",a);a&&(a.on("drag",["Shift"],function(a){return b._handleDrag(a,1)}),a.on("drag",["Shift","Ctrl"],function(a){return b._handleDrag(a,-1)}))},enumerable:!0,configurable:!0}),b.prototype._start=function(a,b,c,d){this._createContainer();this._createOverlay();this.navigation.begin()},b.prototype._update=function(a,
b,c,d){this._box.x=a;this._box.y=b;this._box.width=c;this._box.height=d;this._rafId||(this._rafId=requestAnimationFrame(this._redraw))},b.prototype._end=function(a,b,c,d,e){var g=this.view;a=g.toMap(a+.5*c,b+.5*d);c=Math.min(c/g.width,d/g.height);-1===e&&(c=1/c);this._destroyOverlay();this.navigation.end();g.goTo({center:a,scale:g.scale*c})},b.prototype._updateBox=function(a,b,c,d){var e=this._boxShape;e.setAttributeNS(null,"x",""+a);e.setAttributeNS(null,"y",""+b);e.setAttributeNS(null,"width",""+
c);e.setAttributeNS(null,"height",""+d);e.setAttributeNS(null,"class","esri-zoom-box__outline")},b.prototype._updateBackground=function(a,b,c,d){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(a,b,c,d,this.view.width,this.view.height))},b.prototype._createContainer=function(){var a=document.createElement("div");a.className="esri-zoom-box__container";this.view.root.appendChild(a);this._container=a},b.prototype._createOverlay=function(){var a=this.view.width,b=this.view.height,c=document.createElementNS("http://www.w3.org/2000/svg",
"path");c.setAttributeNS(null,"d","M 0 0 L "+a+" 0 L "+a+" "+b+" L 0 "+b+" Z");c.setAttributeNS(null,"class","esri-zoom-box__overlay-background");a=document.createElementNS("http://www.w3.org/2000/svg","rect");b=document.createElementNS("http://www.w3.org/2000/svg","svg");b.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");b.setAttributeNS(null,"class","esri-zoom-box__overlay");b.appendChild(c);b.appendChild(a);this._container.appendChild(b);this._backgroundShape=
c;this._boxShape=a;this._overlay=b},b.prototype._destroyOverlay=function(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=this._backgroundShape=this._boxShape=this._overlay=null},b.prototype._toSVGPath=function(a,b,c,d,e,k){c=a+c;d=b+d;return"M 0 0 L "+e+" 0 L "+e+" "+k+" L 0 "+k+" ZM "+a+" "+b+" L "+a+" "+d+" L "+c+" "+d+" L "+c+" "+b+" Z"},b.prototype._handleDrag=function(a,b){var c,d,e,g,k=a.x,h=a.y,l=a.origin.x,m=a.origin.y;
switch(k>l?(c=l,e=k-l):(c=k,e=l-k),h>m?(d=m,g=h-m):(d=h,g=m-h),a.action){case "start":this._start(c,d,e,g);break;case "update":this._update(c,d,e,g);break;case "end":this._end(c,d,e,g,b)}a.stopPropagation()},b.prototype._redraw=function(){if(this._rafId&&(this._rafId=null,this._overlay)){var a=this._box,b=a.x,c=a.y,d=a.width,a=a.height;this._updateBox(b,c,d,a);this._updateBackground(b,c,d,a);this._rafId=requestAnimationFrame(this._redraw)}},b}(b.declared(c));return a([b.property()],e.prototype,"navigation",
void 0),a([b.property()],e.prototype,"view",null),e=a([b.subclass("esri.views.2d.navigation.ZoomBox")],e)})},"esri/layers/FeatureLayer":function(){define("require dojo/_base/lang dojo/io-query ../Graphic ../PopupTemplate ../request ../core/kebabDictionary ../core/MultiOriginJSONSupport ../core/Collection ../core/Error ../core/Logger ../core/lang ../core/HandleRegistry ../core/promiseUtils ../core/requireUtils ../core/urlUtils ../geometry/Extent ../geometry/SpatialReference ../geometry/support/normalizeUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/support/jsonUtils ../symbols/support/ElevationInfo ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/support/arcadeUtils ../renderers/support/jsonUtils ../renderers/support/styleUtils ../tasks/support/FeatureSet ../tasks/support/Query ./Layer ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./mixins/ArcGISService ./graphics/sources/MemorySource ./support/Field ./support/fieldUtils ./support/FeatureType ./support/FeatureTemplate ./support/LabelClass ./support/labelingInfo ./support/arcgisLayerUrl ./support/commonProperties".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y,A,B,D,F,C,E,G,K,L,H,I,N,S,M,ca,O,P,W,aa,R,T,ba,U){m=m({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});var ea=n.getLogger("esri.layers.FeatureLayer");n=function(a,b){a=K.fromJSON(b.featureSet);return new ca({layer:this,items:a&&a.features||[]})};var Z=H.createSubclass([I,N,S,M,k],{declaredClass:"esri.layers.FeatureLayer",viewModulePaths:{"2d":"../views/2d/layers/FeatureLayerView2D",
"3d":"../views/3d/layers/FeatureLayerView3D"},constructor:function(){this._handles=new r},normalizeCtorArgs:function(a,b){return"string"==typeof a?h.mixin({},{url:a},b):a},load:function(){var a;a=this.source&&(Array.isArray(this.source)||this.source.isInstanceOf&&this.source.isInstanceOf(l));a=this.portalItem&&a?t.resolve():this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]}).always(function(){return this.url&&null==this.layerId&&/FeatureServer\/*$/i.test(this.url)?this._fetchFirstLayerId().then(function(a){null!=
a&&(this.layerId=a)}.bind(this)):void 0}.bind(this)).then(function(){if(!this.url&&!this._hasMemorySource())throw new g("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.createGraphicsSource().then(this._initLayerProperties.bind(this))}.bind(this));this.addResolvingPromise(a)},_handles:null,properties:{advancedQueryCapabilities:{json:{origins:{service:{read:{source:["advancedQueryCapabilities","supportsStatistics","supportsAdvancedQueries"],
reader:function(a,b){return this._readAdvancedQueryCapabilities(b)}}}},read:{source:["layerDefinition.supportsAdvancedQueries","layerDefinition.supportsStatistics"],reader:function(a,b){return this._readAdvancedQueryCapabilities(b.layerDefinition)}}}},featureReduction:{json:{origins:{webScene:{read:{source:"layerDefinition.featureReduction"},write:{target:"layerDefinition.featureReduction"}}}}},allowGeometryUpdates:{json:{origins:{service:{read:{reader:function(a){return this._readAllowGeometryUpdates(a)}}}},
read:{source:"layerDefinition.allowGeometryUpdates",reader:function(a){return this._readAllowGeometryUpdates(a)}}}},allRenderers:{readOnly:!0,dependsOn:["loaded","renderer","fields"],get:function(){return this._getAllRenderers(this.renderer)}},capabilities:{json:{origins:{service:{read:{source:"advancedQueryCapabilities supportsStatistics supportsAdvancedQueries hasAttachments hasM hasZ supportsCalculate supportsTruncate supportsValidateSql supportsCoordinatesQuantization useStandardizedQueries ownershipBasedAccessControlForFeatures allowGeometryUpdates supportsApplyEditsWithGlobalIds supportsRollbackOnFailureParameter allowUpdateWithoutMValues supportsAttachmentsByUploadId".split(" "),
reader:function(a,b){return this._readCapabilities(a,b)}}}},read:{source:"layerDefinition.capabilities layerDefinition.advancedQueryCapabilities layerDefinition.supportsStatistics layerDefinition.supportsAdvancedQueries layerDefinition.hasAttachments layerDefinition.hasM layerDefinition.hasZ layerDefinition.supportsCalculate layerDefinition.supportsTruncate layerDefinition.supportsValidateSql layerDefinition.supportsCoordinatesQuantization layerDefinition.useStandardizedQueries layerDefinition.ownershipBasedAccessControlForFeatures layerDefinition.allowGeometryUpdates layerDefinition.supportsApplyEditsWithGlobalIds layerDefinition.supportsRollbackOnFailureParameter layerDefinition.allowUpdateWithoutMValues layerDefinition.supportsAttachmentsByUploadId".split(" "),
reader:function(a,b){return this._readCapabilities(b.layerDefinition.capabilities,b.layerDefinition)}}},dependsOn:["loaded"],get:function(){var a=this._get("capabilities");return!a&&this.loaded&&this._hasMemorySource()&&(a={data:{supportsAttachment:!1,supportsM:!1,supportsZ:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!0,supportsDelete:!0,supportsEditing:!0,supportsQuery:!0,supportsUpdate:!0},query:{supportsStatistics:!1,supportsCentroid:!1,supportsDistance:!1,
supportsDistinct:!1,supportsExtent:!0,supportsGeometryProperties:!1,supportsOrderBy:!1,supportsPagination:!1,supportsQuantization:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsQueryByOthers:!1},queryRelated:{supportsPagination:!1,supportsCount:!1,supportsOrderBy:!1},editing:{supportsGeometryUpdate:!0,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,
supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}),a}},copyright:{value:null,json:{origins:{service:{read:{source:"copyrightText"}}},read:{source:"layerDefinition.copyrightText"}}},displayField:{value:null,json:{origins:{service:{read:{source:"displayField"}}},read:{source:"layerDefinition.displayField"}}},definitionExpression:{value:null,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}},defaultSymbol:{json:{read:A.read}},
elevationInfo:{type:B,value:null,json:{origins:{service:{read:{source:"elevationInfo"},write:{target:"elevationInfo",enabled:!1}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}},fields:{value:null,type:[O],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.fields"}}},fullExtent:{value:null,type:v,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}},gdbVersion:null,generalizeForScale:4E3,geometryType:{json:{origins:{service:{read:m.fromJSON}},
read:{source:"layerDefinition.geometryType",reader:m.fromJSON}}},hasAttachments:{value:!1,readOnly:!0,get:function(){return!this._hasMemorySource()&&this._get("hasAttachments")},json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasAttachments"}}},hasM:{value:!1,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}},hasZ:{value:!1,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}},id:{json:{origins:{service:{read:!1},portalItem:{read:!1}}}},isTable:{value:!1,
readOnly:!0,json:{origins:{service:{read:{source:"type",reader:function(a){return"Table"===a}}}},read:{source:"layerDefinition.type",reader:function(a){return"Table"===a}}}},labelsVisible:{value:!1,json:{read:{source:["showLabels"],reader:function(a,b){return!!b.showLabels}},write:function(a,b){b.showLabels=!!a}}},labelingInfo:{value:null,type:[R],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:T.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",
reader:T.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}},layerId:{json:{origins:{service:{read:{source:["id"],reader:function(a,b){return b.id}}}},read:!1}},legendEnabled:{value:!0,json:{read:{source:["showLegend"],reader:function(a,b){return null!=b.showLegend?b.showLegend:!0}},write:function(a,b){b.showLegend=!!a}}},maxRecordCount:{value:null,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.maxRecordCount"}}},minScale:{json:{origins:{service:{read:{source:["minScale",
"effectiveMinScale"],reader:function(a,b){return b.effectiveMinScale||a}},write:{target:["minScale"],enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},maxScale:{json:{origins:{service:{read:{source:["maxScale","effectiveMaxScale"],reader:function(a,b){return b.effectiveMaxScale||a}},write:{target:"maxScale",enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},objectIdField:{json:{origins:{service:{read:{source:["objectIdField",
"fields"],reader:function(a,b){return this._readObjectIdField(b)}}}},read:{source:["layerDefinition.objectIdField","layerDefinition.fields"],reader:function(a,b){return this._readObjectIdField(b.layerDefinition)}}}},operationalLayerType:"ArcGISFeatureLayer",outFields:{value:null,dependsOn:["requiredFields"],get:function(){var a=this._get("outFields"),b=this.requiredFields;return a?-1===a.indexOf("*")&&b.forEach(function(b){-1===a.indexOf(b)&&a.push(b)}):a=b,this.loaded&&(a=a.filter(function(a){return"*"===
a||!!this.getField(a)},this),a=a.map(function(a){return"*"===a?a:this.getField(a).name},this)),a},set:function(a){var b=this.requiredFields;a?-1===a.indexOf("*")&&b.forEach(function(b){-1===a.indexOf(b)&&a.push(b)}):a=b;this.loaded&&(a=a.filter(function(a){return"*"===a||!!this.getField(a)},this),a=a.map(function(a){return"*"===a?a:this.getField(a).name},this));this._set("outFields",a)}},parsedUrl:{dependsOn:["layerId"],get:function(){var a=this.url?q.urlToObject(this.url):null;return null!=this.layerId&&
null!=a&&(a.path=q.join(a.path,this.layerId.toString())),a}},popupEnabled:{value:!0,json:{read:{source:["disablePopup"],reader:function(a,b){return null!=b.disablePopup?!b.disablePopup:!0}},write:function(a,b){a||(b.disablePopup=!0)}}},popupTemplate:{value:null,type:b,json:{read:{source:["popupInfo"],reader:function(a,c){return c.popupInfo?b.fromJSON(c.popupInfo):null}},write:function(a,b){a&&(b.popupInfo=a.toJSON())}}},relationships:null,renderer:{set:function(a){var b=this._getAllRenderers(a);P.fixRendererFields(b,
this.fields);this._set("renderer",a)},json:{origins:{service:{read:{source:["drawingInfo.renderer","defaultSymbol","type"],reader:function(a,b,c){return this._readRenderer(null,b,c)}},write:{target:"drawingInfo.renderer",enabled:!1}}},read:{source:["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol","layerDefinition.type"],reader:function(a,b,c){return this._readRenderer(null,b.layerDefinition,c)}},write:{target:"layerDefinition.drawingInfo.renderer"}}},requiredFields:{dependsOn:["allRenderers"],
get:function(){var a=this.timeInfo,b=[this.objectIdField,this.typeIdField,this.editFieldsInfo&&this.editFieldsInfo.creatorField,a&&a.startTimeField,a&&a.endTimeField,this.trackIdField],c=P.rendererFields,d=[];return this.allRenderers.forEach(function(a){c.forEach(function(c){b.push(h.getObject(c,!1,a))});a.valueExpression&&(d=d.concat(C.extractFieldNames(a.valueExpression)));a.visualVariables&&a.visualVariables.forEach(function(a){P.visualVariableFields.forEach(function(c){b.push(a[c])});a.valueExpression&&
(d=d.concat(C.extractFieldNames(a.valueExpression)))},this)},this),b=b.concat(d),b=b.concat(this.dataAttributes),b.filter(function(a,b,c){return!!a&&c.indexOf(a)===b&&"function"!=typeof a})}},returnM:!1,returnZ:!1,screenSizePerspectiveEnabled:U.screenSizePerspectiveEnabled,source:{json:{origins:{portalItem:{read:{source:["featureSet"],reader:n}},webMap:{read:{source:["featureSet"],reader:n}}}},cast:function(a){return a&&(Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(l))?new ca({layer:this,items:a}):
a},set:function(a){var b=this._get("source");b!==a&&(b&&b.isInstanceOf&&b.isInstanceOf(ca)&&this._resetMemorySource(b),a&&a.isInstanceOf&&a.isInstanceOf(ca)&&this._initMemorySource(a),this._set("source",a))}},supportsCoordinatesQuantization:!1,serviceDefinitionExpression:{json:{origins:{service:{read:{source:["definitionExpression"],reader:function(a,b){return b.definitionExpression}}}}}},spatialReference:{json:{origins:{service:{read:{source:"extent",reader:function(a){return a&&a.spatialReference?
x.fromJSON(a.spatialReference):void 0}}}},read:{source:"layerDefinition.extent",reader:function(a){return a&&a.spatialReference?x.fromJSON(a.spatialReference):void 0}}}},templates:{type:[aa],json:{read:function(a,b){var c=b.editFieldsInfo;b=c&&c.creatorField;c=c&&c.editorField;return a=a&&a.map(function(a){return aa.fromJSON(a)}),this._fixTemplates(a,b),this._fixTemplates(a,c),a}}},title:{json:{origins:{portalItem:{read:{source:["layerDefinition.title","layerDefinition.name","title"],reader:function(a,
b){a=b.layerDefinition&&b.layerDefinition.name;b=b.title||b.layerDefinition&&b.layerDefinition.title;return a?this._readTitleFromName(a):"item-title"===this.sublayerTitleMode&&b?b:void 0}}},service:{read:{source:"name",reader:function(a,b){return this._readTitleFromName(a)}}}}}},sublayerTitleMode:{type:String,value:"item-title"},trackIdField:{json:{read:{source:["timeInfo.trackIdField"],reader:function(a,b){return b.timeInfo.trackIdField}}}},type:{value:"feature",json:{read:!1}},typeIdField:{json:{origins:{service:{read:function(a,
b){return this._readTypeIdField(a,b)}}},read:{source:"layerDefinition.typeIdField",reader:function(a,b){return this._readTypeIdField(a,b.layerDefinition)}}}},types:{json:{origins:{service:{read:function(a,b){return this._readTypes(a,b)}}},read:{source:"layerDefinition.types",reader:function(a,b){return this._readTypes(a,b.layerDefinition)}}}},url:{set:function(a){var b=q.urlToObject(a),c=ba.parse(b.path);c&&null!=c.sublayer&&(null==this.layerId&&(this.layerId=c.sublayer),b=d.objectToQuery(b.query),
a=c.url.path,b&&(a=a+"?"+b));this._set("url",a)},json:{write:function(a,b){(a&&q.isProtocolRelative(a)&&(a="https:"+a),a&&(a=q.normalize(a),b.url=a),null!=this.layerId)&&(a=q.urlToObject(a))&&(b.url=q.join(a.path,""+this.layerId),a.query&&Object.keys(a.query)&&(b.url+="?"+d.objectToQuery(a.query)))}}},userIsAdmin:!1,version:{json:{origins:{service:{read:{source:"currentVersion capabilities drawingInfo hasAttachments htmlPopupType relationships timeInfo typeIdField types".split(" "),reader:function(a,
b){return this._readVersion(b)}}},portalItem:{read:!1}},read:{source:"layerDefinition.currentVersion layerDefinition.capabilities layerDefinition.drawingInfo layerDefinition.hasAttachments layerDefinition.htmlPopupType layerDefinition.typeIdField layerDefinition.types".split(" "),reader:function(a,b){return this._readVersion(b.layerDefinition)}}}},visible:{json:{origins:{portalItem:{read:{source:["visibility","layerDefinition.defaultVisibility"],reader:function(a,b){return b.layerDefinition&&null!=
b.layerDefinition.defaultVisibility?!!b.layerDefinition.defaultVisibility:null!=b.visibility?!!b.visibility:void 0}},write:{target:"layerDefinition.defaultVisibility"}}}}}},applyEdits:function(a){return this.load().then(function(){return this.source.applyEdits?this._processApplyEditsParams(a).then(function(a){return this.source.applyEdits(a).then(function(a){var b=function(a){return a.filter(function(a){return!a.error}).map(function(a){return u.clone(a)})},b={addedFeatures:b(a.addFeatureResults),
updatedFeatures:b(a.updateFeatureResults),deletedFeatures:b(a.deleteFeatureResults)};return(b.addedFeatures.length||b.updatedFeatures.length||b.deletedFeatures.length)&&this.emit("edits",b),a}.bind(this))}.bind(this)):t.reject(new g("FeatureLayer","Layer source does not support applyEdits capability"))}.bind(this))},createGraphicsSource:function(){return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),t.resolve(this.source)):w.when(e,"./graphics/sources/FeatureLayerSource").then(function(a){return new a({layer:this})}.bind(this)).then(function(a){return this.emit("graphics-source-create",
{graphicsSource:a}),a}.bind(this))},createGraphicsController:function(b){var c,d=b.layerView,f=l.ofType(a),g=this.source,k=g&&g.isInstanceOf&&g.isInstanceOf(l),m=h.mixin(b.options||{},{layer:this,layerView:d,graphics:k?g:new f});return c=k?"./graphics/controllers/MemoryController":"2d"===d.view.type?"./graphics/controllers/AutoController2D":"./graphics/controllers/SnapshotController",w.when(e,c).then(function(a){return new a(m)}.bind(this)).then(function(a){return this.emit("graphics-controller-create",
{graphicsController:a}),a}.bind(this))},createQuery:function(){var a=new L,b=this.get("capabilities.data");return a.returnGeometry=!0,a.returnZ=b&&b.supportsZ&&this.returnZ||null,a.returnM=b&&b.supportsM&&this.returnM||null,a.outFields=this.outFields,a.where=this.definitionExpression||"1\x3d1",a.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,a},getFieldDomain:function(a,b){var c,d;b=(b=b&&b.feature)&&b.attributes;var e=this.typeIdField&&b&&b[this.typeIdField];return null!=e&&
this.types&&this.types.some(function(b){return b.id==e?(c=b.domains&&b.domains[a],c&&"inherited"===c.type&&(c=this._getLayerDomain(a),d=!0),!0):!1},this),d||c||(c=this._getLayerDomain(a)),c},getField:function(a,b){return P.getField(a,b||this.fields)},graphicChanged:function(a){this.emit("graphic-update",a)},queryFeatures:function(a){var b=this;return this.load().then(function(){return a=a||b.createQuery(),b.source.queryFeatures?b.source.queryFeatures(a):t.reject(new g("FeatureLayer","Layer source does not support queryFeatures capability"))}).then(function(c){if(a.returnJSON)return c;
if(c&&c.features){var d=b.popupTemplate;c.features.forEach(function(a){a.popupTemplate=d;a.layer=b})}return c})},queryObjectIds:function(a){var b=this;return this.load().then(function(){return a=a||b.createQuery(),b.source.queryObjectIds?b.source.queryObjectIds(a):t.reject(new g("FeatureLayer","Layer source does not support queryObjectIds capability"))})},queryFeatureCount:function(a){var b=this;return this.load().then(function(){return a=a||b.createQuery(),b.source.queryFeatureCount?b.source.queryFeatureCount(a):
t.reject(new g("FeatureLayer","Layer source does not support queryFeatureCount capability"))})},queryExtent:function(a){var b=this;return this.load().then(function(){return a=a||b.createQuery(),b.source.queryExtent?b.source.queryExtent(a):t.reject(new g("FeatureLayer","Layer source does not support queryExtent capability"))})},read:function(a,b){switch(b&&b.origin){case "web-map":this.inherited(arguments,[{outFields:["*"]},b]);break;case "web-scene":this.inherited(arguments,[{mode:Z.MODE_SNAPSHOT,
returnZ:!0,outFields:["*"]},b])}var c=a.featureCollection;if(c){var d=c.layers;d&&1===d.length&&(this.inherited(arguments,[d[0],b]),null!=c.showLegend&&this.inherited(arguments,[{showLegend:c.showLegend},b]))}return this.inherited(arguments,[a,b]),this},write:function(a,b){if(b&&"web-scene"===b.origin&&b.messages){if(!this.url)return b.messages.push(new g("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to web scenes",
{layer:this})),null;if(this.isTable)return b.messages.push(new g("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes",{layer:this})),null}return this.inherited(arguments)},_getLayerDomain:function(a){var b;return this.fields&&this.fields.some(function(c){return c.name===a&&(b=c.domain),!!b}),b},_fetchFirstLayerId:function(){return c(this.url,{query:{f:"json"},callbackParamName:"callback",responseType:"json"}).then(function(a){return a.data&&
Array.isArray(a.data.layers)&&0<a.data.layers.length?a.data.layers[0].id:void 0})},_initLayerProperties:function(a){return this.source||(this.source=a),a.url&&(this.url=a.url),a.layerDefinition&&this.read(a.layerDefinition,{origin:"service",url:this.parsedUrl}),this._verifySource(),this._verifyFields(),this._addSymbolUrlTokens(),P.fixRendererFields(this._getAllRenderers(this.renderer),this.fields),this.watch("token",function(){this._addSymbolUrlTokens()}.bind(this)),G.loadStyleRenderer(this,{origin:"service"})},
_findUrlBasedSymbols:function(){var a=this.renderer;if(!a)return[];var b=[];a.symbol&&b.push(a.symbol);a.defaultSymbol&&b.push(a.defaultSymbol);a=a.classBreakInfos||a.uniqueValueInfos;return a&&a.forEach(function(a){a.symbol&&b.push(a.symbol)}),b.filter(function(a){return!!a.url})},_addSymbolUrlTokens:function(){var a=this.token;!this._hasMemorySource()&&a&&this._findUrlBasedSymbols().forEach(function(b){var c=b.url;if(c&&-1!==c.search(/https?\:/i)&&!/[?&]token=/.test(c)){var d=-1===c.indexOf("?")?
"?":"\x26";b.url=c+d+"token\x3d"+a}})},_getAllRenderers:function(a){var b=[];a&&[a,a.trackRenderer,a.observationRenderer,a.latestObservationRenderer].forEach(function(a){a&&(b.push(a),a.rendererInfos&&a.rendererInfos.forEach(function(a){a.renderer&&b.push(a.renderer)}))});return b},_verifyFields:function(){var a=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+a+")");this.isTable||this._hasMemorySource()||
-1!==a.search(/\/FeatureServer\//i)||this.fields&&this.fields.some(function(a){return"geometry"===a.type})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+a+")")},_fixTemplates:function(a,b){a&&a.forEach(function(a){(a=a.prototype&&a.prototype.attributes)&&b&&delete a[b]})},_verifySource:function(){if(this._hasMemorySource()){if(this.url)throw new g("feature-layer:mixed-source-and-url",
"FeatureLayer cannot be created with both an in-memory source and a url");var a=["geometryType","fields","objectIdField"];if(!a.every(function(a){return this.hasOwnProperty(a)},this))throw new g("feature-layer:missing-property","FeatureLayer created as feature collection requires properties: "+a.join(),{requiredProperties:a});}else{if(this.isTable)throw new g("feature-layer:source-type-not-supported","The table feature service type is not yet supported",{sourceType:"Table"});if(!this.url)throw new g("feature-layer:source-or-url-required",
"FeatureLayer requires either a url, a valid portal item or a source");}},_initMemorySource:function(a){a.forEach(function(a){a.layer=this}.bind(this));this._handles.add([a.on("after-add",function(a){a.item.layer=this}.bind(this)),a.on("after-remove",function(a){a.item.layer=null}.bind(this))],"fl-source")},_resetMemorySource:function(a){a.forEach(function(a){a.layer=null}.bind(this));this._handles.remove("fl-source")},_hasMemorySource:function(){return!(this.url||!this.source)},_readTitleFromName:function(a){var b=
this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?ba.titleFromUrlAndName(this.url,a):a;if(a=a||this.url&&ba.parse(this.url).title)return"item-title-and-service-name"===this.sublayerTitleMode&&b&&(a=b+" - "+a),ba.cleanTitle(a)},_readAdvancedQueryCapabilities:function(a){return a.advancedQueryCapabilities||{supportsPagination:!1,supportsQueryWithDistance:!1,supportsReturningQueryExtent:!1,supportsStatistics:a.supportsStatistics,supportsOrderBy:a.supportsAdvancedQueries,
supportsDistinct:a.supportsAdvancedQueries}},_readAllowGeometryUpdates:function(a){return null==a?!0:a},_readCapabilities:function(a,b){return{data:this._readDataCapabilities(b),operations:this._readOperationsCapabilities(a,b),query:this._readQueryCapabilities(b),queryRelated:this._readQueryRelatedCapabilities(b),editing:this._readEditingCapabilities(b)}},_readBoolean:function(a,b,c){return!(a&&a.hasOwnProperty(b)?!a[b]:!c)},_readDataCapabilities:function(a){return{supportsAttachment:this._readBoolean(a,
"hasAttachments",!1),supportsM:this._readBoolean(a,"hasM",!1),supportsZ:this._readBoolean(a,"hasZ",!1)}},_readOperationsCapabilities:function(a,b){a=a?a.toLowerCase().split(",").map(function(a){return a.trim()}):[];var c=-1!==a.indexOf("editing"),d=c&&-1!==a.indexOf("create"),e=c&&-1!==a.indexOf("delete"),f=c&&-1!==a.indexOf("update");return c&&!(d||e||f)&&(d=e=f=!0),{supportsCalculate:this._readBoolean(b,"supportsCalculate",!1),supportsTruncate:this._readBoolean(b,"supportsTruncate",!1),supportsValidateSql:this._readBoolean(b,
"supportsValidateSql",!1),supportsAdd:d,supportsDelete:e,supportsEditing:c,supportsQuery:-1!==a.indexOf("query"),supportsUpdate:f}},_readQueryCapabilities:function(a){var b=a.advancedQueryCapabilities,c=a.ownershipBasedAccessControlForFeatures;return{supportsStatistics:this._readBoolean(b,"supportsStatistics",a.supportsStatistics),supportsCentroid:this._readBoolean(b,"supportsReturningGeometryCentroid",!1),supportsDistance:this._readBoolean(b,"supportsQueryWithDistance",!1),supportsDistinct:this._readBoolean(b,
"supportsDistinct",a.supportsAdvancedQueries),supportsExtent:this._readBoolean(b,"supportsReturningQueryExtent",!1),supportsGeometryProperties:this._readBoolean(b,"supportsReturningGeometryProperties",!1),supportsOrderBy:this._readBoolean(b,"supportsOrderBy",a.supportsAdvancedQueries),supportsPagination:this._readBoolean(b,"supportsPagination",!1),supportsQuantization:this._readBoolean(a,"supportsCoordinatesQuantization",!1),supportsResultType:this._readBoolean(b,"supportsQueryWithResultType",!1),
supportsSqlExpression:this._readBoolean(b,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:this._readBoolean(a,"useStandardizedQueries",!1),supportsQueryByOthers:this._readBoolean(c,"allowOthersToQuery",!0)}},_readQueryRelatedCapabilities:function(a){a=a.advancedQueryCapabilities;var b=this._readBoolean(a,"supportsAdvancedQueryRelated",!1);return{supportsPagination:this._readBoolean(a,"supportsQueryRelatedPagination",!1),supportsCount:b,supportsOrderBy:b}},_readEditingCapabilities:function(a){var b=
a.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:this._readBoolean(a,"allowGeometryUpdates",!0),supportsGlobalId:this._readBoolean(a,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:this._readBoolean(a,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:this._readBoolean(a,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:this._readBoolean(a,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:this._readBoolean(b,"allowAnonymousToDelete",
!0),supportsDeleteByOthers:this._readBoolean(b,"allowOthersToDelete",!0),supportsUpdateByAnonymous:this._readBoolean(b,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:this._readBoolean(b,"allowOthersToUpdate",!0)}},_readObjectIdField:function(a){if(a.objectIdField)return a.objectIdField;if(a.fields)for(var b=0;b<a.fields.length;b++){var c=a.fields[b];if("esriFieldTypeOID"===c.type)return c.name}},_readRenderer:function(a,b,c){var d;if(a=b.drawingInfo&&b.drawingInfo.renderer||void 0)(a=E.read(a,
b,c)||void 0)||ea.error("Failed to create renderer",{rendererDefinition:b.drawingInfo.renderer,layer:this,context:c});else if(b.defaultSymbol)A.read(b.defaultSymbol,b,c),b.types&&b.types.length?(a=new F({defaultSymbol:d,field:b.typeIdField}),b.types.forEach(function(b){a.addUniqueValueInfo(b.id,A.read(b.symbol,b,c))})):a=new D({symbol:d});else if("Table"!==b.type){switch(b.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":d=new p;break;case "esriGeometryPolyline":d=new z;break;
case "esriGeometryPolygon":d=new y}a=d&&new D({symbol:d})}return a},_readTypeIdField:function(a,b){a&&(b=this.getField(a,b.fields))&&(a=b.name);return a},_readTypes:function(a,b){var c=(b=b.editFieldsInfo)&&b.creatorField,d=b&&b.editorField;return a&&a.map(function(a){return a=new W(a),this._fixTemplates(a.templates,c),this._fixTemplates(a.templates,d),a},this)},_readVersion:function(a){return a.currentVersion?a.currentVersion:a.hasOwnProperty("capabilities")||a.hasOwnProperty("drawingInfo")||a.hasOwnProperty("hasAttachments")||
a.hasOwnProperty("htmlPopupType")||a.hasOwnProperty("relationships")||a.hasOwnProperty("timeInfo")||a.hasOwnProperty("typeIdField")||a.hasOwnProperty("types")?10:9.3},_processApplyEditsParams:function(b){if(!b)return t.reject(new g("feature-layer:missing-parameters","'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required"));if(b=h.mixin({},b),b.addFeatures=b.addFeatures||[],b.updateFeatures=b.updateFeatures||[],b.deleteFeatures=b.deleteFeatures||[],b.addFeatures.length||b.updateFeatures.length||
b.deleteFeatures.length){var c=function(b){var c=new a;return c.geometry=b.geometry,c.attributes=b.attributes,c};return b.addFeatures=b.addFeatures.map(c),b.updateFeatures=b.updateFeatures.map(c),this._normalizeGeometries(b).then(function(a){return t.resolve(a)})}return t.reject(new g("feature-layer:missing-parameters","'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required"))},_normalizeGeometries:function(a){var b=a.addFeatures,c=a.updateFeatures,d=b.concat(c).map(function(a){return a.geometry});
return f.normalizeCentralMeridian(d).then(function(d){var e=b.length,f=c.length;return d.slice(0,e).forEach(function(b,c){a.addFeatures[c].geometry=b}),d.slice(e,e+f).forEach(function(b,c){a.updateFeatures[c].geometry=b}),a})}});return Z})},"esri/renderers/SimpleRenderer":function(){define(["../core/declare","../core/lang","../symbols/support/jsonUtils","./Renderer"],function(e,h,d,a){var b=e(a,{declaredClass:"esri.renderers.SimpleRenderer",properties:{description:{value:null,json:{write:!0}},label:{value:null,
json:{write:!0}},symbol:{value:null,json:{read:d.read,write:function(a,b,e,h){b.symbol=d.write(a,{},h)}}},type:"simple"},getSymbol:function(a,b){return this.symbol},clone:function(){return new b({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:h.clone(this.visualVariables),authoringInfo:h.clone(this.authoringInfo)})}});return b})},"esri/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang ../core/Error dojo/_base/lang ../Color ./support/utils ./support/arcadeUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){var u=a({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),r=a({widthAndDepth:"width-and-depth"}),t=a({classedSize:"classed-size",classedColor:"classed-color",univariateColorSize:"univariate-color-size"}),w=a({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),q=a({percentTotal:"percent-of-total"}),
v=Math.PI;return e([h,d],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{value:null,json:{read:function(a,b){return a&&(a=c.clone(a),a.type&&(a.type=t.fromJSON(a.type)),a.classificationMethod&&(a.classificationMethod=w.fromJSON(a.classificationMethod)),a.visualVariables&&a.visualVariables.forEach(function(a){a.type&&(a.type=u.fromJSON(a.type));a.style&&(a.style=q.fromJSON(a.style))})),a},write:function(a,b){a&&(a=c.clone(a),a.type&&(a.type=t.toJSON(a.type)),a.classificationMethod&&
(a.classificationMethod=w.toJSON(a.classificationMethod)),a.visualVariables&&a.visualVariables.forEach(function(a){a.type&&(a.type=u.toJSON(a.type));a.style&&(a.style=q.toJSON(a.style))}));b.authoringInfo=a}}},requiredFields:{dependsOn:["visualVariables"],get:function(){var a=Object.create(null);return this.collectRequiredFields(a),Object.keys(a)}},type:{readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables","rotationType","rotationExpression"],
reader:function(a,b){return this._readVariables(a,b)}},write:function(a,b,c,d){var e=[];a.forEach(function(a,b){"size"===a.type?e.push(this._writeSizeInfo(a,d,b)):"color"===a.type?e.push(this._writeColorInfo(a,d,b)):"opacity"===a.type?e.push(this._writeOpacityInfo(a,d,b)):"rotation"===a.type&&e.push(this._writeRotationInfo(a,d,b))},this);b.visualVariables=e}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,_visualVariablesSetter:function(a){var b=
this._cache;this.visualVariables&&this.visualVariables.forEach(function(a,c){b.hasOwnProperty(c)&&(b[c]=null)},this);a&&a.some(function(a){return!!a.target})&&a.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});a&&a.forEach(function(a,c){"color"===a.type?b[c]=this._processColorInfo(a):"opacity"===a.type?b[c]=this._processOpacityInfo(a):"size"===a.type?b[c]=this._processSizeInfo(a):"rotation"===a.type&&(b[c]=this._processRotationInfo(a))},this);this._set("visualVariables",a)},getSymbol:function(a,
b){},getVisualVariableValues:function(a,b){var c,d=this.visualVariables;return d&&(c=d.map(function(c){var d,e=c.type,f=e+"Info";switch(b=k.mixin({},b),b[f]=c,e){case "size":d=this.getSize(a,b);break;case "color":d=this.getColor(a,b);break;case "opacity":d=this.getOpacity(a,b);break;case "rotation":d=this.getRotationAngle(a,b)}return{variable:c,value:d}},this).filter(function(a){return null!=a.value},this)),c},hasVisualVariables:function(a,b){return a?!!this.getVisualVariablesForType(a,b):!!(this.getVisualVariablesForType("size",
b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))},getVisualVariablesForType:function(a,b){var c,d=this.visualVariables;return d&&(c=d.filter(function(c){return c.type===a&&("string"==typeof b?c.target===b:!1===b?!c.target:!0)}),c&&0===c.length&&(c=void 0)),c},getSize:function(a,b){var c=this._getVarInfo(b&&b.sizeInfo,"size"),d=c.variable,c=this._cache[c.cacheKey],e=null;if(d)var f=d.minSize,e=d.maxSize,f="object"==
typeof f&&f?this._getSize(a,f,c&&c.minSize,b):f,e="object"==typeof e&&e?this._getSize(a,e,c&&c.maxSize,b):e,e=this._getSize(a,d,c&&c.root,b,[f,e]);return e},getSizeRangeAtScale:function(a,b){var c,d=this._getVarInfo(a,"size"),e=this._cache[d.cacheKey],f={scale:b};if(a=d.variable,a&&b)if(b=a.minSize,a=a.maxSize,b="object"==typeof b&&b?this._getSize({},b,e&&e.minSize,f):b,e="object"==typeof a&&a?this._getSize({},a,e&&e.maxSize,f):a,null!=b||null!=e)b>e&&(b=e=b),c={minSize:b,maxSize:e};return c},getColor:function(a,
b){var c=this._getVarInfo(b&&b.colorInfo,"color");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],b)},getOpacity:function(a,b){var c=this._getVarInfo(b&&b.opacityInfo,"opacity");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],b,!0)},getRotationAngle:function(a,b){var c=this._getVarInfo(b&&b.rotationInfo,"rotation"),d=c.variable,e=this._cache[c.cacheKey],f=d.axis||"heading",c="heading"===f&&"arithmetic"===d.rotationType?90:0,f="heading"===f&&"arithmetic"===d.rotationType?
-1:1,d=d.field,e=e&&e.compiledFunc,g=a.attributes,h=0;return(d||e)&&(e?h=n.executeFunction(e,n.createExecContext(a,n.getViewInfo(b))):k.isFunction(d)?h=d.apply(this,arguments):g&&(h=g[d]||0),h="number"!=typeof h||isNaN(h)?null:c+f*h),h},collectRequiredFields:function(a){var b=[];this.visualVariables&&(b=b.concat(this.visualVariables));b.forEach(function(b){b&&b.field&&(a[b.field]=!0);b&&b.normalizationField&&(a[b.normalizationField]=!0)})},_getVarInfo:function(a,b){var c;a&&a.type===b&&this.visualVariables?
(c=this.visualVariables.indexOf(a),a=this.visualVariables[c]):this.visualVariables&&(a=(a=this.getVisualVariablesForType(b))&&a[0],c=this.visualVariables.indexOf(a));return{variable:a,cacheKey:c}},_readSizeInfo:function(a){return a.axis&&(a.axis=r.fromJSON(a.axis)),a},_readColorInfo:function(a){return a&&(a.colors&&a.colors.forEach(function(b,c){k.isArray(b)?a.colors[c]=l.fromJSON(b):a.colors[c]=new l(b)}),a.stops&&a.stops.forEach(function(b,c){b.color&&k.isArray(b.color)?a.stops[c].color=l.fromJSON(b.color):
b.color&&(a.stops[c].color=new l(b.color))})),a},_readOpacityInfo:function(a){var b;return a&&(b=k.mixin({},a),b.transparencyValues&&(b.opacityValues=b.transparencyValues.map(function(a){return 1-a/100}),delete b.transparencyValues),b.stops&&(b.stops=b.stops.map(function(a){return a=k.mixin({},a),a.opacity=1-a.transparency/100,delete a.transparency,a}))),b},_readVariables:function(a,b){a&&(a=a.map(function(a){return a=c.clone(a),a.type=u.fromJSON(a.type),"size"===a.type?a=this._readSizeInfo(a):"color"===
a.type?a=this._readColorInfo(a):"opacity"===a.type&&(a=this._readOpacityInfo(a)),a},this));var d=b.rotationType;if(b=b.rotationExpression)d={type:"rotation",rotationType:d},(b=b.match(this._rotationRE))&&b[1]&&(d.field=b[1],a||(a=[]),a.push(d));return a},_createCache:function(a){var b=a&&a.valueExpression,c=n.createSyntaxTree(b),c=n.createFunction(c),d=!(!a||!a.expression)||this._viewScaleRE.test(b);return{ipData:this._interpolateData(a),hasExpr:!!b,compiledFunc:c,isScaleDriven:d}},_processColorInfo:function(a){return a&&
(a.colors&&a.colors.forEach(function(b,c){b instanceof l||(a.colors[c]=new l(b))}),a.stops&&a.stops.forEach(function(b,c){!b.color||b.color instanceof l||(a.stops[c].color=new l(b.color))}),this._sortStops(a.stops)),this._createCache(a)},_processOpacityInfo:function(a){return this._sortStops(a&&a.stops),this._createCache(a)},_processSizeInfo:function(a){return a.stops&&Array.isArray(a.stops)?a.stops=this._processSizeInfoStops(a.stops):(a.minSize=a.minSize&&this._processSizeInfoSize(a.minSize),a.maxSize=
a.maxSize&&this._processSizeInfoSize(a.maxSize)),{root:this._createCache(a),minSize:this._createCache(a.minSize),maxSize:this._createCache(a.maxSize)}},_processSizeInfoSize:function(a){return"object"==typeof a?a.stops=this._processSizeInfoStops(a.stops):a=b.toPt(a),a},_processSizeInfoStops:function(a){return a&&Array.isArray(a)&&(a.forEach(function(a){a.size=b.toPt(a.size)}),this._sortStops(a)),a},_sortStops:function(a){a&&Array.isArray(a)&&a.sort(function(a,b){return a.value-b.value})},_processRotationInfo:function(a){return this._createCache(a)},
_getSize:function(a,b,c,d,e){var f=a.attributes,h=b.field,l=b.stops,m=0,p=c&&c.hasExpr,q=c&&c.compiledFunc,t=c&&c.ipData,r=c&&c.isScaleDriven,u="number"==typeof a,z=u?a:null;if(h||r||p){var x,w=d&&d.scale,y=e?e[0]:b.minSize,M=e?e[1]:b.maxSize,ca=b.minDataValue,O=b.maxDataValue,P=b.valueUnit||"unknown",W=b.valueRepresentation,aa=b.scaleBy,R=b.normalizationField,T=f?parseFloat(f[R]):void 0,ba=d&&d.shape;if(r?z=null==w?this._getAverageValue(b):w:"number"!=typeof z&&(p?z=n.executeFunction(q,n.createExecContext(a,
n.getViewInfo(d))):k.isFunction(h)?z=h.apply(this,arguments):f&&(z=f[h])),null==z||R&&!u&&(isNaN(T)||0===T))return null;if(isNaN(T)||u||(z/=T),l){var U,ea,M=this._lookupData(z,t);x=M[0];y=M[1];x===y?m=l[x].size:(U=l[x].size,ea=l[y].size,m=U+(ea-U)*M[2])}else null!=y&&null!=M&&null!=ca&&null!=O?ca>=z?m=y:z>=O?m=M:(x=(z-ca)/(O-ca),"area"===aa&&ba)?(l=(m="circle"===ba)?v*Math.pow(y/2,2):y*y,l+=x*((m?v*Math.pow(M/2,2):M*M)-l),m=m?2*Math.sqrt(l/v):Math.sqrt(l)):m=y+x*(M-y):"unknown"===P?null!=y&&null!=
ca?(y&&ca?(x=z/ca,m="circle"===ba?2*Math.sqrt(x*Math.pow(y/2,2)):"square"===ba||"diamond"===ba||"image"===ba?Math.sqrt(x*Math.pow(y,2)):x*y):m=z+(y||ca),m=y>m?y:m,null!=M&&m>M&&(m=M)):m=z:(l=(d&&d.resolution?d.resolution:1)*g.meterIn[P],"area"===W?(m=Math.sqrt(z/v)/l,m*=2):(m=z/l,("radius"===W||"distance"===W)&&(m*=2)),null!=y&&y>m&&(m=y),null!=M&&m>M&&(m=M))}else b&&(m=l&&l[0]&&l[0].size,null==m&&(m=b.minSize));return m=isNaN(m)?0:m},_getAverageValue:function(a){var b,c,d=a.stops;return d?(b=d[0].value,
c=d[d.length-1].value):(b=a.minDataValue||0,c=a.maxDataValue||0),(b+c)/2},_getColorComponent:function(a,b,c,d,e,g){var f,h=a.attributes,l=b&&b.field,m="number"==typeof a,p=m?a:null,q=c&&c.hasExpr,v=c&&c.compiledFunc,t=c&&c.ipData;if(l||q){var r=b.normalizationField,u=h?parseFloat(h[r]):void 0;"number"!=typeof p&&(q?p=n.executeFunction(v,n.createExecContext(a,n.getViewInfo(d))):k.isFunction(l)?p=l.apply(this,arguments):h&&(p=h[l]));null==p||r&&!m&&(isNaN(u)||0===u)||(isNaN(u)||m||(p/=u),f=e?this._getOpacity(p,
b,t):this._getColor(p,b,t))}else b&&(h=b.stops,e?(f=h&&h[0]&&h[0].opacity,null==f&&(f=b.opacityValues&&b.opacityValues[0])):f=h&&h[0]&&h[0].color||b.colors&&b.colors[0]);return g&&(g.data=p,g.value=f),g||f},_interpolateData:function(a){var b;if(a)if(a.colors||a.opacityValues){var c=(a.colors||a.opacityValues).length,d=a.minDataValue,e=(a.maxDataValue-d)/(c-1);b=[];for(a=0;c>a;a++)b[a]=d+a*e}else a.stops&&(b=a.stops.map(function(a){return a.value}));return b},_getOpacity:function(a,b,c){var d;a=this._lookupData(a,
c);if(b=b||this.opacityInfo,a){var e,f;c=a[0];var g=a[1];c===g?d=this._getOpacValue(b,c):(e=this._getOpacValue(b,c),f=this._getOpacValue(b,g),d=e+(f-e)*a[2])}return d},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity},_getColor:function(a,b,c){var d;a=this._lookupData(a,c);if(b=b||this.colorInfo,a)d=a[0],c=a[1],d=d===c?this._getColorObj(b,d):l.blendColors(this._getColorObj(b,d),this._getColorObj(b,c),a[2]),d=new l(d);return d},_getColorObj:function(a,b){return a.colors?
a.colors[b]:a.stops[b].color},_lookupData:function(a,b){var c;if(b){var d=0,e=b.length-1;b.some(function(b,c){return b>a?(e=c,!0):(d=c,!1)});c=[d,e,(a-b[d])/(b[e]-b[d])]}return c},_processForContext:function(a,b,c){b&&"web-scene"===b.origin?(b.messages&&(a.expression&&b.messages.push(new m("property:unsupported",a.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".expression",context:b})),a.valueExpression&&
b.messages.push(new m("property:unsupported",a.type+"VisualVariable.valueExpression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".valueExpression",context:b})),a.valueExpressionTitle&&b.messages.push(new m("property:unsupported",a.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".valueExpressionTitle",context:b}))),delete a.expression,
delete a.valueExpression,delete a.valueExpressionTitle):"size"===a.type&&this._convertExpressionToArcade(a)},_writeRotationInfo:function(a,b,d){return a&&(a=k.mixin({},a),this._processForContext(a,b,"visualVariables["+d+"]"),a.type=u.toJSON(a.type),a=c.fixJson(a,!0)),a},_convertExpressionToArcade:function(a){a&&a.expression&&(a.valueExpression="$view.scale")},_writeSizeInfo:function(a,b,d){if(a){a=k.mixin({},a);this._processForContext(a,b,"string"==typeof d?d:"visualVariables["+d+"]");var e=a.minSize,
f=a.maxSize;e&&(a.minSize="number"==typeof e?e:this._writeSizeInfo(e,b,"visualVariables["+d+"].minSize"));f&&(a.maxSize="number"==typeof f?f:this._writeSizeInfo(f,b,"visualVariables["+d+"].maxSize"));b=a.legendOptions;d=a.axis;a.type=u.toJSON(a.type);d&&(a.axis=r.toJSON(d));b&&(a.legendOptions=k.mixin({},b),b=b.customValues,b&&(a.legendOptions.customValues=b.slice(0)));a.stops&&(a.stops=a.stops.map(function(a){return a=k.mixin({},a),null===a.label&&delete a.label,a}));a=c.fixJson(a,!0)}return a},
_writeColorInfo:function(a,b,d){return a&&(a=k.mixin({},a),this._processForContext(a,b,"visualVariables["+d+"]"),a.type=u.toJSON(a.type),a.colors&&(a.colors=a.colors.map(function(a){return l.toJSON(a)})),a.stops&&(a.stops=a.stops.map(function(a){return a=k.mixin({},a),a.color&&(a.color=l.toJSON(a.color)),null===a.label&&delete a.label,a})),a.legendOptions&&(a.legendOptions=k.mixin({},a.legendOptions)),a=c.fixJson(a,!0)),a},_writeOpacityInfo:function(a,b,d){var e;return a&&(e=k.mixin({},a),this._processForContext(e,
b,"visualVariables["+d+"]"),e.type=u.toJSON(e.type),e.opacityValues&&(e.transparencyValues=e.opacityValues.map(function(a){return 100*(1-a)}),delete e.opacityValues),e.stops&&(e.stops=e.stops.map(function(a){return a=k.mixin({},a),a.transparency=100*(1-a.opacity),delete a.opacity,null===a.label&&delete a.label,a})),e.legendOptions&&(e.legendOptions=k.mixin({},e.legendOptions)),e=c.fixJson(e,!0)),e}})})},"esri/renderers/support/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/date/locale ../../Color ../../core/numberUtils dojo/i18n!../nls/smartMapping dojo/i18n!dojo/cldr/nls/gregorian".split(" "),
function(e,h,d,a,b,c,m){function k(b){return b&&h.map(b,function(b){return new a(b)})}function l(a,b,c){var d="";return 0===b?d=n.lt+" ":b===c&&(d=n.gt+" "),d+a}var g={},n={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%"},u={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},r={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},
timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},t={formatLength:"short",fullYear:!0},w={formatLength:"short"};return e.mixin(g,{meterIn:{inches:39.3701,feet:3.28084,yards:1.09361,miles:6.21371E-4,"nautical-miles":5.39957E-4,millimeters:1E3,centimeters:100,decimeters:10,
meters:1,kilometers:.001,"decimal-degrees":180/20015077},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(a,b){var c,f=[];null==a||a instanceof Date||(a=new Date(a));b=b||{};b=e.mixin({},b);var g=b.selector?b.selector.toLowerCase():null,k=!g||-1<g.indexOf("time"),g=!g||-1<g.indexOf("date");return k&&(b.timeOptions=b.timeOptions||w,b.timeOptions&&(b.timeOptions=e.mixin({},b.timeOptions),b.timeOptions.selector=b.timeOptions.selector||"time",
f.push(b.timeOptions))),g&&(b.dateOptions=b.dateOptions||t,b.dateOptions&&(b.dateOptions=e.mixin({},b.dateOptions),b.dateOptions.selector=b.dateOptions.selector||"date",f.push(b.dateOptions))),f&&f.length?(f=h.map(f,function(b){return d.format(a,b)}),c=1==f.length?f[0]:m["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return f[b]})):c=d.format(a),c},createColorStops:function(a){var c=a.values,d=a.colors,e=a.labelIndexes,k=a.isDate,m=a.dateFormatOptions;return h.map(c,
function(a,f){var p=null;if(!e||-1<h.indexOf(e,f)){var n;(n=k?g.formatDate(a,m):b.format(a))&&(p=l(n,f,c.length-1))}return{value:a,color:d[f],label:p}})},updateColorStops:function(a){var c,d=a.stops,e=a.changes,k=a.isDate,m=a.dateFormatOptions,n=[],q=h.map(d,function(a){return a.value});h.forEach(e,function(a){n.push(a.index);q[a.index]=a.value});c=b.round(q,{indexes:n});h.forEach(d,function(a,e){if(a.value=q[e],null!=a.label){var f,h=null;(f=k?g.formatDate(c[e],m):b.format(c[e]))&&(h=l(f,e,d.length-
1));a.label=h}})},createClassBreakLabel:function(a){var d=a.minValue,e=a.maxValue,f=a.isFirstBreak?"":n.gt+" ";a="percent-of-total"===a.normalizationType?n.pct:"";return d=null==d?"":b.format(d),e=null==e?"":b.format(e),f+d+a+" "+c.minToMax+" "+e+a},setLabelsForClassBreaks:function(a){var c=a.classBreaks,d=a.classificationMethod,e=a.normalizationType,k=[];c&&c.length&&("standard-deviation"===d?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):
a.round?(k.push(c[0].minValue),h.forEach(c,function(a){k.push(a.maxValue)}),k=b.round(k),h.forEach(c,function(a,b){a.label=g.createClassBreakLabel({minValue:0===b?k[0]:k[b],maxValue:k[b+1],isFirstBreak:0===b,normalizationType:e})})):h.forEach(c,function(a,b){a.label=g.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===b,normalizationType:e})}))},updateClassBreak:function(a){var b,c=a.classBreaks,d=a.normalizationType,e=a.change,k=e.index,e=e.value,h=-1,l=-1,m=c.length;
return"standard-deviation"===a.classificationMethod?void console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):(0===k?h=k:k===m?l=k-1:(l=k-1,h=k),-1<h&&m>h&&(b=c[h],b.minValue=e,b.label=g.createClassBreakLabel({minValue:b.minValue,maxValue:b.maxValue,isFirstBreak:0===h,normalizationType:d})),void(-1<l&&m>l&&(b=c[l],b.maxValue=e,b.label=g.createClassBreakLabel({minValue:b.minValue,maxValue:b.maxValue,isFirstBreak:0===l,normalizationType:d}))))},
calculateDateFormatInterval:function(a){var b,c,d,e,g,k,l,m,n,q=a.length,t=1/0;a=h.map(a,function(a){return new Date(a)});for(b=0;q-1>b;b++){d=a[b];g=[];l=1/0;m="";for(c=b+1;q>c;c++)e=a[c],e=d.getFullYear()!==e.getFullYear()&&"year"||d.getMonth()!==e.getMonth()&&"month"||d.getDate()!==e.getDate()&&"day"||d.getHours()!==e.getHours()&&"hour"||d.getMinutes()!==e.getMinutes()&&"minute"||d.getSeconds()!==e.getSeconds()&&"second"||"millisecond",k=u[e],l>k&&(l=k,m=e),g.push(e);t>l&&(t=l,n=m)}return n},createUniqueValueLabel:function(a){var c=
a.value,d=a.fieldInfo,e=a.domain;a=a.dateFormatInterval;var k=String(c),e=e&&e.codedValues?e.getName(c):null;return e?k=e:"number"==typeof c&&(k=d&&"date"===d.type?g.formatDate(c,a&&r[a]):b.format(c)),k},cloneColorVariable:function(b){var c;return b&&(c=e.mixin({},b),c.colors=k(c.colors),c.stops=c.stops&&h.map(c.stops,function(b){return b=e.mixin({},b),b.color&&(b.color=new a(b.color)),b}),c.legendOptions&&(c.legendOptions=e.mixin({},c.legendOptions))),c},cloneOpacityVariable:function(a){var b;a&&
(b=e.mixin({},a),(a=b.opacityValues)&&(b.opacityValues=a.slice(0)),(a=b.stops)&&(b.stops=h.map(a,function(a){return e.mixin({},a)})),(a=b.legendOptions)&&(b.legendOptions=e.mixin({},a)));return b},cloneSizeVariable:function(a){var b;a&&(b=e.mixin({},a),b.stops&&(b.stops=h.map(b.stops,function(a){return e.mixin({},a)})),(a=b.minSize)&&"object"==typeof a&&(b.minSize=g.cloneSizeVariable(a)),(a=b.maxSize)&&"object"==typeof a&&(b.maxSize=g.cloneSizeVariable(a)),(a=b.legendOptions)&&(b.legendOptions=e.mixin({},
a),a=a.customValues,a&&(b.legendOptions.customValues=a.slice(0))));return b}}),g})},"esri/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],function(e,h){function d(a,b){return a-b}var a=/^-?(\d+)(\.(\d+))?$/i,b=new RegExp("\\"+h.decimal+"0+$","g"),c=/(\d)0*$/g,m={numDigits:function(b){var c=String(b),d=c.match(a);b={integer:0,fractional:0};if(d&&d[1])b.integer=d[1].split("").length,b.fractional=d[3]?d[3].split("").length:0;else if(-1<c.toLowerCase().indexOf("e")){var e,
k,d=c.split("e"),c=d[0],d=d[1];c&&d&&(c=Number(c),d=Number(d),k=0<d,k||(d=Math.abs(d)),e=m.numDigits(c),k?(e.integer+=d,d>e.fractional?e.fractional=0:e.fractional-=d):(e.fractional+=d,d>e.integer?e.integer=1:e.integer-=d),b=e)}return b},percentChange:function(a,b,c,d){var e,g,k,h={previous:null,next:null};return null!=c&&(e=a-c,g=b-c,k=g-e,h.previous=Math.floor(Math.abs(100*k/e))),null!=d&&(e=d-a,g=d-b,k=g-e,h.next=Math.floor(Math.abs(100*k/e))),h},round:function(a,b){var c,e,k,h,l,w,q,v,x,f;a=a.slice(0);
var p=b&&null!=b.tolerance?b.tolerance:2,z=b&&b.indexes,y=b&&null!=b.strictBounds?b.strictBounds:!1;if(z)z.sort(d);else for(z=[],q=0;q<a.length;q++)z.push(q);for(q=0;q<z.length;q++)if(f=z[q],c=a[f],b=0===f?null:a[f-1],e=f===a.length-1?null:a[f+1],k=m.numDigits(c),h=k.fractional){v=0;for(x=!1;h>=v&&!x;){w=c;x=v;var A=l=void 0;w=(l=Number(w.toFixed(x)),w>l?A=l+1/Math.pow(10,x):(A=l,l-=1/Math.pow(10,x)),l=Number(l.toFixed(x)),A=Number(A.toFixed(x)),[l,A]);l=y&&0===q?w[1]:w[0];x=p;w=A=void 0;var B=m.percentChange(c,
l,b,e);x=(A=null==B.previous||B.previous<=x,w=null==B.next||B.next<=x,A&&w||B.previous+B.next<=2*x);v++}x&&(a[f]=l)}return a},format:function(a,d){d=d||{places:20,round:-1};a=e.format(a,d);return a&&(a=a.replace(c,"$1").replace(b,"")),a}};return m})},"esri/renderers/nls/smartMapping":function(){define({root:{other:"Other",minToMax:"to"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,
"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/lang ../core/urlUtils ../core/Logger ../core/Error ../core/arrayUtils ../portal/Portal ../symbols/WebStyleSymbol ../symbols/support/jsonUtils ../symbols/support/symbolUtils ./Renderer ./support/arcadeUtils ./support/diffUtils".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v){var x=
k.getLogger("esri.renderers.UniqueValueRenderer");e=f=function(a){function b(b){b=a.call(this)||this;return b._valueInfoMap={},b._isDefaultSymbolDerived=!1,b.type="uniqueValue",b.field=null,b.field2=null,b.field3=null,b.valueExpression=null,b.valueExpressionTitle=null,b.legendOptions=null,b.defaultLabel=null,b.fieldDelimiter=null,b.portal=null,b.styleOrigin=null,b.diff={uniqueValueInfos:function(a,b){if(a||b){if(!a||!b)return{type:"complete",oldValue:a,newValue:b};for(var c=!1,d={type:"collection",
added:[],removed:[],changed:[],unchanged:[]},e=function(e){var f=g.find(a,function(a){return a.value===b[e].value});f?v.diff(f,b[e])?(d.changed.push({type:"complete",oldValue:f,newValue:b[e]}),c=!0):(d.unchanged.push({oldValue:f,newValue:b[e]}),c=!0):(d.added.push(b[e]),c=!0)},f=0;f<b.length;f++)e(f);e=function(e){g.find(b,function(b){return b.value===a[e].value})||(d.removed.push(a[e]),c=!0)};for(f=0;f<a.length;f++)e(f);return c?d:void 0}}},b._set("uniqueValueInfos",[]),b}return d(b,a),b.prototype.writeValueExpression=
function(a,b,c,d){d&&"web-scene"===d.origin?a&&d.messages&&d.messages.push(new l("property:unsupported",this.declaredClass+".valueExpression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"valueExpression",context:d})):b.valueExpression=a},b.prototype.writeValueExpressionTitle=function(a,b,c,d){d&&"web-scene"===d.origin?a&&d.messages&&d.messages.push(new l("property:unsupported",this.declaredClass+".valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",
{instance:this,propertyName:"valueExpressionTitle",context:d})):b.valueExpressionTitle=a},Object.defineProperty(b.prototype,"compiledFunc",{get:function(){return q.createFunction(this.valueExpression)},enumerable:!0,configurable:!0}),b.prototype.readLegendOptions=function(a){return c.clone(a)},b.prototype.writeLegendOptions=function(a,b,d,e){e&&"web-scene"===e.origin?a&&e.messages&&e.messages.push(new l("property:unsupported",this.declaredClass+".legendOptions is not supported in Web Scene. Please remove this property to save the Web Scene.",
{instance:this,propertyName:"legendOptions",context:e})):b.legendOptions=c.clone(a)},Object.defineProperty(b.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0}),b.prototype.readDefaultSymbol=function(a,b,c){return r.read(a,b,c)},b.prototype.writeDefaultSymbol=function(a,b,c,d){this._isDefaultSymbolDerived||(a=r.write(a,{},d))&&(b.defaultSymbol=a)},b.prototype.readPortal=function(a,b,c){return c.portal||n.getDefault()},
b.prototype.readStyleOrigin=function(a,b,c){if(b.styleName)return Object.freeze({styleName:b.styleName});if(b.styleUrl)return a=m.read(b.styleUrl,c),Object.freeze({styleUrl:a})},b.prototype.writeStyleOrigin=function(a,b,c,d){a.styleName?b.styleName=a.styleName:a.styleUrl&&(b.styleUrl=m.write(a.styleUrl,d))},Object.defineProperty(b.prototype,"uniqueValueInfos",{set:function(a){return this.styleOrigin?void x.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):
(this._set("uniqueValueInfos",a.slice(0)),void this._updateValueInfoMap())},enumerable:!0,configurable:!0}),b.prototype.readUniqueValueInfos=function(a,b,d){return Array.isArray(a)?a.map(function(a){return a=c.clone(a),a.symbol=r.read(a.symbol,b,d),a}):void 0},b.prototype.writeUniqueValueInfos=function(a,b,d,e){this.styleOrigin||(b.uniqueValueInfos=(this.uniqueValueInfos||[]).map(function(a){return a=c.clone(a),a.symbol&&(a.symbol=r.write(a.symbol,{},e)),a.value+="",c.fixJson(a)}))},b.prototype.addUniqueValueInfo=
function(a,b){if(this.styleOrigin)return void x.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");a="object"==typeof a?a:{value:a,symbol:b};this.uniqueValueInfos.push(a);this._valueInfoMap[a.value+""]=a},b.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)return void x.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value+
""==a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}},b.prototype.getUniqueValueInfo=function(a,b){var c;c=this.field;var d=a.attributes;if(this.valueExpression)c=q.executeFunction(this.compiledFunc,q.createExecContext(a,q.getViewInfo(b)));else if(this.field2){a=this.field2;b=this.field3;var e=[];c&&e.push(d[c]);a&&e.push(d[a]);b&&e.push(d[b]);c=e.join(this.fieldDelimiter||"")}else c=c&&"function"==typeof c?c(a):d[c];return this._valueInfoMap[c+""]},b.prototype.getSymbol=
function(a,b){return(a=this.getUniqueValueInfo(a,b))&&a.symbol||this.defaultSymbol},b.prototype.clone=function(){var a=new f({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:c.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:c.clone(this.visualVariables),legendOptions:c.clone(this.legendOptions),authoringInfo:c.clone(this.authoringInfo)});
this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=c.clone(this.uniqueValueInfos);return this.styleOrigin&&(a._set("styleOrigin",Object.freeze(c.clone(this.styleOrigin))),Object.freeze(b)),a._set("uniqueValueInfos",b),a._updateValueInfoMap(),a},b.prototype.collectRequiredFields=function(a){this.inherited(arguments);[this.field,this.field2,this.field3].forEach(function(b){b&&(a[b]=!0)})},b.prototype.populateFromStyle=function(){var a=this;return t.fetchStyle(this.styleOrigin,
{portal:this.portal}).then(function(b){var c=[];return a._valueInfoMap={},b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(d){var e=new u({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:d.name});a.defaultSymbol||d.name!==b.data.defaultItem||(a.defaultSymbol=e,a._isDefaultSymbolDerived=!0);e={value:d.name,symbol:e};c.push(e);a._valueInfoMap[d.name]=e}),a._set("uniqueValueInfos",Object.freeze(c)),!a.defaultSymbol&&a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,
a._isDefaultSymbolDerived=!0),a})},b.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=b})},b.fromPortalStyle=function(a,b){var c=new f(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||n.getDefault());b=c.populateFromStyle();return b.otherwise(function(b){x.error("#fromPortalStyle('"+a+"'[, ...])","Failed to create unique value renderer from style name",
b)}),b},b.fromStyleUrl=function(a,b){b=new f(b&&b.properties);b._set("styleOrigin",Object.freeze({styleUrl:a}));b=b.populateFromStyle();return b.otherwise(function(b){x.error("#fromStyleUrl('"+a+"'[, ...])","Failed to create unique value renderer from style URL",b)}),b},b}(b.declared(w));a([b.property()],e.prototype,"type",void 0);a([b.property({json:{read:{source:"field1"},write:{target:"field1"}}})],e.prototype,"field",void 0);a([b.property({json:{write:!0}})],e.prototype,"field2",void 0);a([b.property({json:{write:!0}})],
e.prototype,"field3",void 0);a([b.property({json:{write:!0}})],e.prototype,"valueExpression",void 0);a([b.writer("valueExpression")],e.prototype,"writeValueExpression",null);a([b.property({json:{write:!0}})],e.prototype,"valueExpressionTitle",void 0);a([b.writer("valueExpressionTitle")],e.prototype,"writeValueExpressionTitle",null);a([b.property({dependsOn:["valueExpression"]})],e.prototype,"compiledFunc",null);a([b.property({json:{write:!0}})],e.prototype,"legendOptions",void 0);a([b.reader("legendOptions")],
e.prototype,"readLegendOptions",null);a([b.writer("legendOptions")],e.prototype,"writeLegendOptions",null);a([b.property({json:{write:!0}})],e.prototype,"defaultLabel",void 0);a([b.property()],e.prototype,"defaultSymbol",null);a([b.reader("defaultSymbol")],e.prototype,"readDefaultSymbol",null);a([b.writer("defaultSymbol")],e.prototype,"writeDefaultSymbol",null);a([b.property({json:{write:!0}})],e.prototype,"fieldDelimiter",void 0);a([b.property({type:n,readOnly:!0})],e.prototype,"portal",void 0);
a([b.reader("portal",["styleName"])],e.prototype,"readPortal",null);a([b.property({readOnly:!0,json:{write:!0}})],e.prototype,"styleOrigin",void 0);a([b.reader("styleOrigin",["styleName","styleUrl"])],e.prototype,"readStyleOrigin",null);a([b.writer("styleOrigin")],e.prototype,"writeStyleOrigin",null);a([b.property()],e.prototype,"uniqueValueInfos",null);a([b.reader("uniqueValueInfos")],e.prototype,"readUniqueValueInfos",null);a([b.writer("uniqueValueInfos")],e.prototype,"writeUniqueValueInfos",null);
a([b.property({dependsOn:["field","field2","field3"],readOnly:!0})],e.prototype,"requiredFields",void 0);e=f=a([b.subclass("esri.renderers.UniqueValueRenderer")],e);var f;return e})},"esri/core/arrayUtils":function(){define([],function(){function e(d,a){return-1===d.indexOf(a)}function h(d,a,b){return!d.some(a.bind(null,b))}return{findIndex:function(d,a,b){for(var c,e=d.length,k=0;e>k;k++)if(c=d[k],a.call(b,c,k,d))return k;return-1},find:function(d,a,b){for(var c,e=d.length,k=0;e>k;k++)if(c=d[k],
a.call(b,c,k,d))return c},equals:function(d,a,b){if(!d&&!a)return!0;if(!d||!a||d.length!=a.length)return!1;if(b)for(var c=0;c<d.length;c++){if(!b(d[c],a[c]))return!1}else for(b=0;b<d.length;b++)if(d[b]!==a[b])return!1;return!0},difference:function(d,a,b){var c,m;return b?(c=a.filter(h.bind(null,d,b)),m=d.filter(h.bind(null,a,b))):(c=a.filter(e.bind(null,d)),m=d.filter(e.bind(null,a))),{added:c,removed:m}},range:function(d,a){null==a&&(a=d,d=0);for(var b=Array(a-d),c=d;a>c;c++)b[c-d]=c;return b},constant:function(d,
a){for(var b=Array(d),c=0;d>c;c++)b[c]=a;return b},binaryIndexOf:function(d,a,b){for(var c=d.length,e=0,k=c-1;k>e;){var h=e+Math.floor((k-e)/2);a>d[h]?e=h+1:k=h}k=d[e];return b?a>=d[c-1]?-1:k===a?e:e-1:k===a?e:-1}}})},"esri/symbols/support/symbolUtils":function(){define("require exports dojo/_base/lang ../Symbol3D ./jsonUtils ./Thumbnail ./StyleOrigin ../../core/urlUtils ../../core/promiseUtils ../../core/Error ../../core/sniff ../../request ../../portal/Portal ../../portal/PortalQueryParams".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t){function w(a,b){a=k.normalize(k.makeAbsolute(a,b));b=a.lastIndexOf("/");return-1===b?{url:a,base:a,filename:null}:{url:a,base:a.slice(0,b),filename:a.slice(b+1)}}function q(a,b){x(a,function(a){return k.makeAbsolute(a,b)})}function v(a,b){a.symbolLayers&&a.symbolLayers.forEach(b)}function x(a,b){v(a,function(a){(a=a.resource)&&a.href&&(a.href=b(a.href))})}function f(a,c){return a=d.clone(a),q(a,c),b.fromJSON(a)}function p(a,b){var c=w(a,b&&b.url&&b.url.path);
return D(c.url).then(function(b){return{reference:{styleUrl:a},data:b.data,base:c.base,filename:c.filename,styleUrl:a}})}function z(a,b){var c;b=b.portal||r.getDefault();var d=b.url+" - "+a;return F[d]?l.resolve(F[d]):y(a,b).then(function(a){return c=a,a.fetchData()}).then(function(b){b={data:b,base:c.itemUrl,filename:"data",styleName:a};return F[d]=b,b})}function y(a,b){return b.load().then(function(){if(!b.stylesGroupQuery)throw new g("layer-templates:styles-group-query-missing","The styles group query needs to be configured in the portal to query styles");
var a=new t({disableExtraQuery:!0,query:b.stylesGroupQuery});return b.queryGroups(a)}).then(function(b){b=b.results;if(!b||!Array.isArray(b)||0===b.length)throw new g("layer-templates:styles-missing","The styles group does not contain any styles");b=b[0];var c=new t({disableExtraQuery:!0,query:'typekeywords:"'+a+'"'});return b.queryItems(c)}).then(function(b){b=b.results;if(!b||!Array.isArray(b)||0===b.length)throw new g("layer-templates:style-missing","The style '${styleName}' is not part of the styles group",
{styleName:a});return b[0].load()})}function A(a,b){return a.styleUrl?p(a.styleUrl,b):a.styleName?z(a.styleName,b):l.reject(new g("layer-templates:style-url-and-name-missing","Either styleUrl or styleName is required in layerDefinition"))}function B(b,d,e){for(var h=function(g){if(g.name===d){var h=w(g.webRef,b.base);return{value:D(h.url).then(function(l){if((l=f(l.data,h.base))&&l.isInstanceOf(a)){if(g.thumbnail)if(g.thumbnail.href){var p=k.makeAbsolute(g.thumbnail.href,b.base);l.thumbnail=new c["default"]({url:p})}else g.thumbnail.imageData&&
(l.thumbnail=new c["default"]({url:"data:image/png;base64,"+g.thumbnail.imageData}));b.styleUrl?l.styleOrigin=new m({portal:e.portal,styleUrl:b.styleUrl,name:d}):b.styleName&&(l.styleOrigin=new m({portal:e.portal,styleName:b.styleName,name:d}))}return l})}}},p=0,n=b.data.items;p<n.length;p++){var q=h(n[p]);if("object"==typeof q)return q.value}return l.reject(new g("layer-templates:symbol-name-not-found","The symbol name '${symbolName}' could not be found",{symbolName:d}))}function D(a){var b={responseType:"json"};
return/\.json$/.test(a)||(b.query={f:"json"}),u(k.normalize(a),b)}Object.defineProperty(h,"__esModule",{value:!0});h.getIconHref=function(a,b){b=b.resource.href;return!n("esri-canvas-svg-support")&&a.styleOrigin&&C.test(b)?b.replace(C,"/resource/png/$1.png"):b};h.fetchStyleFromUrl=p;var F={};h.fetchStyle=A;h.fetchStyleSymbol=function(a,b){return a.name?A(a,b).then(function(c){return B(c,a.name,b)}):l.reject(new g("layer-templates:style-symbol-reference-name-missing","Missing name in style symbol reference"))};
h.fetchSymbolFromStyle=B;h.fetchSymbolSet=function(a){var b=a.data;if(!b.symbolSetUrl)return l.reject(new g("layer-templates:symbol-set-url-missing","Style does not provide symbol set URL",{style:b}));var c=w(b.symbolSetUrl,a.base);return D(c.url).then(function(a){a=a.data;if(0===a.length||!a[0].name)throw new g("layer-templates:symbol-set-missing-data","Invalid syntax or missing data in symbol set",{style:b});for(var d={},e=0;e<a.length;e++){var k=f(a[e],c.base);d[a[e].name]=k;a[e].name===b.defaultItem&&
(d.defaultSymbol=k)}return d.defaultSymbol||(d.defaultSymbol=d[a[0].name]),d})};h.createSymbol=function(a,b){return a?f(a,b&&b.url&&b.url.path):null};h.styleNameFromItem=function(a){var b=0;for(a=a.typeKeywords;b<a.length;b++){var c=a[b];if(/^Esri.*Style$/.test(c))return c}};h.isVolumetricSymbol=function(a){return(a=a&&a.symbolLayers)?a.some(function(a){a=a.type;return"object"===a||"path"===a||"extrude"===a}):!1};var C=/\/resource\/(.*?)\.svg$/})},"esri/renderers/support/diffUtils":function(){define("require exports dojo/_base/lang ../../core/Accessor ../../core/Collection ../../core/accessorSupport/utils".split(" "),
function(e,h,d,a,b,c){function m(d){return d instanceof b?Object.keys(d.items):d instanceof a?c.getProperties(d).keys():d?Object.keys(d):[]}function k(a,c){return a instanceof b?a.items[c]:a[c]}function l(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function g(a,b){var c=a.diff;if(c&&d.isFunction(c))return c(a,b);var e=m(a),h=m(b);if(0!==e.length||0!==h.length){if(!e.length||!h.length||l(a,b))return{type:"complete",oldValue:a,newValue:b};var v=h.filter(function(a){return-1===
e.indexOf(a)}),r=e.filter(function(a){return-1===h.indexOf(a)}),v=e.filter(function(c){return-1<h.indexOf(c)&&k(a,c)!==k(b,c)}).concat(v,r).sort();if((r=a?a.declaredClass:null)&&-1<n.indexOf(r)&&v.length)return{type:"complete",oldValue:a,newValue:b};var f,p;for(p in v){var r=v[p],u=k(a,r),y=k(b,r),A=void 0;d.isFunction(u)||d.isFunction(y)||u!==y&&(null!=u||null!=y)&&(A=c&&c[r]&&d.isFunction(c[r])?c[r](u,y):"object"==typeof u&&"object"==typeof y&&(u?u.declaredClass:null)===(y?y.declaredClass:null)?
g(u,y):{type:"complete",oldValue:u,newValue:y},A&&(f=f||{type:"partial",diff:{}},f.diff[r]=A))}return f}}Object.defineProperty(h,"__esModule",{value:!0});var n=["esri.Color","esri.portal.Portal"];h.diff=function(a,b){return d.isFunction(a)||d.isFunction(b)||!a&&!b?void 0:!a||!b||"object"==typeof a&&"object"==typeof a&&(a?a.declaredClass:null)!==(b?b.declaredClass:null)?{type:"complete",oldValue:a,newValue:b}:g(a,b)}})},"esri/renderers/support/jsonUtils":function(){define(["../../core/Warning","../SimpleRenderer",
"../UniqueValueRenderer","../ClassBreaksRenderer"],function(e,h,d,a){var b={simple:h,uniqueValue:d,classBreaks:a},c={fromJson:function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(k){console.warn(k.stack)}return c.fromJSON(a)},read:function(a,c,d){return a&&(a.styleName||a.styleUrl)&&"uniqueValue"!==a.type?(d&&d.messages&&d.messages.push(new e("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+a.type+"'",{definition:a,context:d})),
null):(c=a?b[a.type]||null:null)?(c=new c,c.read(a,d),c):(d&&d.messages&&a&&d.messages.push(new e("renderer:unsupported","Renderers of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:d})),null)},fromJSON:function(a){var c=a?b[a.type]||null:null;return c?c.fromJSON(a):null}};return c})},"esri/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary ../core/Error dojo/_base/array dojo/_base/lang ../symbols/support/jsonUtils ./Renderer ./support/arcadeUtils".split(" "),
function(e,h,d,a,b,c,m,k,l){var g=d({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),n=d({esriClassifyNaturalBreaks:"natural-breaks",esriClassifyEqualInterval:"equal-interval",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyGeometricalInterval:"geometrical-interval"}),u=e(k,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{value:null,json:{read:m.read,write:function(a,
b,c,d){(a=m.write(a,{},d))&&(b.backgroundFillSymbol=a)}}},classBreakInfos:{set:function(a){a&&a.forEach(this._processCBInfo,this);this._set("classBreakInfos",a)},json:{read:{source:["classBreakInfos","minValue"],reader:function(a,b,c){var d=b.minValue;if(a&&Array.isArray(a)){var e=a[0]&&null!=a[0].classMaxValue;return a.map(function(a){if(a=h.clone(a),e){var f=a.classMaxValue;a.minValue=d;d=a.maxValue=f}return a.symbol=m.read(a.symbol,b,c),a})}return a}},write:function(a,c,d,e){a=this.classBreakInfos||
[];d=a[0]&&a[0].minValue;c.minValue=d===-(1/0)?-Number.MAX_VALUE:d;c.classBreakInfos=b.map(a,function(a){return a=h.clone(a),a.symbol&&(a.symbol=m.write(a.symbol,{},e)),a.classMaxValue=a.maxValue===1/0?Number.MAX_VALUE:a.maxValue,delete a.minValue,delete a.maxValue,h.fixJson(a)})}}},classificationMethod:{value:null,json:{read:n.fromJSON,write:function(a,b){(a=n.toJSON(a))&&(b.classificationMethod=a)}}},defaultLabel:{value:null,json:{write:!0}},defaultSymbol:{value:null,json:{read:m.read,write:function(a,
b,c,d){(a=m.write(a,{},d))&&(b.defaultSymbol=a)}}},valueExpression:{value:null,json:{write:function(b,c,d,e){e&&"web-scene"===e.origin?b&&e.messages&&e.messages.push(new a("property:unsupported",this.declaredClass+".valueExpression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"valueExpression",context:e})):c.valueExpression=b}}},valueExpressionTitle:{value:null,json:{write:function(b,c,d,e){e&&"web-scene"===e.origin?b&&e.messages&&
e.messages.push(new a("property:unsupported",this.declaredClass+".valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"valueExpressionTitle",context:e})):c.valueExpressionTitle=b}}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return l.createFunction(this.valueExpression)}},legendOptions:{value:null,json:{read:function(a){return h.clone(a)},write:function(b,c,d,e){e&&"web-scene"===e.origin?b&&e.messages&&
e.messages.push(new a("property:unsupported",this.declaredClass+".legendOptions is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"legendOptions",context:e})):c.legendOptions=h.clone(b)}}},field:{value:null,json:{write:!0}},isMaxInclusive:!0,normalizationField:{value:null,json:{write:!0}},normalizationTotal:{value:null,json:{write:!0}},normalizationType:{value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var a=
this._get("normalizationType"),b=!!this.normalizationField,c=null!=this.normalizationTotal;return b||c?(a=b&&"field"||c&&"percent-of-total",b&&c&&console.warn("warning: both normalizationField and normalizationTotal are set!")):("field"===a||"percent-of-total"===a)&&(a=null),a},json:{read:g.fromJSON,write:function(a,b){(a=g.toJSON(a))&&(b.normalizationType=a)}}},requiredFields:{dependsOn:["field","normalizationField"]},type:"classBreaks"},constructor:function(){this.classBreakInfos=[]},addClassBreakInfo:function(a,
b,d){a=c.isObject(a)?a:{minValue:a,maxValue:b,symbol:d};this.classBreakInfos.push(a);this._processCBInfo(a)},removeClassBreakInfo:function(a,b){var c,d,e=this.classBreakInfos.length;for(d=0;e>d;d++)if(c=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],c[0]==a&&c[1]==b){this.classBreakInfos.splice(d,1);break}},getBreakIndex:function(a,b){var d,e,g=this.field;d=a.attributes;var k=this.classBreakInfos.length,f=this.isMaxInclusive;if(this.valueExpression)a=l.executeFunction(this.compiledFunc,
l.createExecContext(a,l.getViewInfo(b)));else if(c.isFunction(g))a=g(a);else if(a=parseFloat(d[g]),g=this.normalizationType)if(b=parseFloat(this.normalizationTotal),d=parseFloat(d[this.normalizationField]),"log"===g)a=Math.log(a)*Math.LOG10E;else if("percent-of-total"!==g||isNaN(b)){if("field"===g&&!isNaN(d)){if(isNaN(a)||isNaN(d))return-1;a/=d}}else a=a/b*100;if(null!=a&&!isNaN(a)&&"number"==typeof a)for(d=0;k>d;d++)if(e=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],e[0]<=a&&
(f?a<=e[1]:a<e[1]))return d;return-1},getClassBreakInfo:function(a,b){a=this.getBreakIndex(a,b);return-1!==a?this.classBreakInfos[a]:null},getSymbol:function(a,b){a=this.getBreakIndex(a,b);return-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol},clone:function(){return new u({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),classificationMethod:this.classificationMethod,defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),
valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:h.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:h.clone(this.visualVariables),legendOptions:h.clone(this.legendOptions),authoringInfo:h.clone(this.authoringInfo)})},collectRequiredFields:function(a){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(b){b&&
(a[b]=!0)})},_processCBInfo:function(a){var b=(a.minValue,a.maxValue,a.symbol);b&&(b.declaredClass||(a.symbol=m.fromJSON(b)))}});return u})},"esri/renderers/support/styleUtils":function(){define(["require","exports","../../core/promiseUtils","../../core/Warning"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});h.loadStyleRenderer=function(b,c){var e=b&&b.getAtOrigin&&b.getAtOrigin("renderer",c.origin);return e&&"uniqueValue"===e.type&&e.styleOrigin?e.populateFromStyle().otherwise(function(d){c&&
c.messages&&c.messages.push(new a("renderer:style-reference","Failed to create unique value renderer from style reference: "+d.message,{error:d,context:c}));b.clear("renderer",c.origin)}).then(function(){return null}):d.resolve(null)}})},"esri/layers/graphics/sources/MemorySource":function(){define("../../../core/Collection ../../../core/Promise ../../../core/promiseUtils ../../../core/Error ../../../tasks/support/FeatureSet ../../../Graphic ../QueryEngine".split(" "),function(e,h,d,a,b,c,m){return e.ofType(c).createSubclass([h],
{properties:{layer:{value:null},_queryEngine:{value:null,dependsOn:["layer.loaded"],get:function(){return this.get("layer.loaded")?new m({features:this,objectIdField:this.layer.objectIdField}):null}}},queryFeatures:function(a){return this._queryEngine?this._queryEngine.queryFeatures(a).then(function(a){var c=new b;return c.features=a,c}):this._rejectQuery("Not ready to execute query")},queryObjectIds:function(a){return this._queryEngine?this._queryEngine.queryObjectIds(a):this._rejectQuery("Not ready to execute query")},
queryFeatureCount:function(a){return this._queryEngine?this._queryEngine.queryFeatureCount(a):this._rejectQuery("Not ready to execute query")},queryExtent:function(a){return this._queryEngine?this._queryEngine.queryExtent(a):this._rejectQuery("Not ready to execute query")},_rejectQuery:function(b){return d.reject(new a("MemorySource",b))}})})},"esri/layers/graphics/QueryEngine":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Error ../../core/promiseUtils ../../geometry/support/graphicsUtils".split(" "),
function(e,h,d,a,b,c,m,k,l){e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.features=null,b.objectIdField=null,b}return d(b,a),b.prototype.queryFeatures=function(a){if(this.features)if(a)if(this._isSupportedQuery(a)){var b=this._createFilters(a);a=b.length?this._executeQuery(a,b):this._rejectQuery("Invalid query")}else a=this._rejectQuery("Unsupported query");else a=this._returnAllFeatures();else a=this._rejectQuery("Engine not initialized");return a},b.prototype.queryObjectIds=
function(a){return this.objectIdField?this.queryFeatures(a).then(this._getObjectIds.bind(this)):this._rejectQuery("Unsupported query")},b.prototype.queryFeatureCount=function(a){return this.queryFeatures(a).then(function(a){return a.length})},b.prototype.queryExtent=function(a){var b=this;return this.queryFeatures(a).then(function(a){return{count:a.length,extent:b._getExtent(a)}})},b.prototype._returnAllFeatures=function(){return k.resolve(this.features.toArray())},b.prototype._executeQuery=function(a,
b){var c=this,d=this.features.filter(function(d){return b.every(function(b){return b.call(c,d,a)})});return k.resolve(d.toArray())},b.prototype._isSupportedQuery=function(a){var b=!0;return(null!=a.distance||null!=a.geometryPrecision||a.groupByFieldsForStatistics&&a.groupByFieldsForStatistics.length||null!=a.maxAllowableOffset||a.multipatchOption||null!=a.num||a.orderByFields&&a.orderByFields.length||a.outFields&&a.outFields.length||a.outSpatialReference||a.outStatistics&&a.outStatistics.length||
a.pixelSize||a.quantizationParameters||a.relationParam||a.returnDistinctValues||null!=a.start||a.text||a.timeExtent||a.where||a.objectIds&&a.objectIds.length&&!this.objectIdField)&&(b=!1),b},b.prototype._createFilters=function(a){var b=[];return a.objectIds&&a.objectIds.length&&b.push(this._createObjectIdFilter()),a.geometry&&"extent"===a.geometry.type&&"intersects"===a.spatialRelationship&&b.push(this._createExtentFilter()),b},b.prototype._createExtentFilter=function(){return function(a,b){a=a.geometry;
b=b.geometry;return a&&b.intersects(a)}},b.prototype._createObjectIdFilter=function(){var a=this;return function(b,c){b=b.attributes;return-1<c.objectIds.indexOf(b&&b[a.objectIdField])}},b.prototype._rejectQuery=function(a){return k.reject(new m(this.declaredClass,a))},b.prototype._getObjectIds=function(a){var b=this.objectIdField,c=[];return a.forEach(function(a){a=(a=a.attributes)&&a[b];null!=a&&c.push(a)}),c},b.prototype._getExtent=function(a){return a.length?l.graphicsExtent(a):null},b}(b.declared(c));
return a([b.property()],e.prototype,"features",void 0),a([b.property()],e.prototype,"objectIdField",void 0),e=a([b.subclass("esri.layers.graphics.QueryEngine")],e)})},"esri/layers/support/fieldUtils":function(){define(["require","exports","dojo/_base/lang"],function(e,h,d){function a(a,e,k){if(a)for(var c=0;c<a.length;c++){var g=a[c],h=d.getObject(g,!1,e);(h=h&&"function"!=typeof h&&b(h,k))&&d.setObject(g,h.name,e)}}function b(a,b){if(null!=b){a=a.toLowerCase();for(var c=0;c<b.length;c++){var d=b[c];
if(d&&d.name.toLowerCase()===a)return d}}return null}Object.defineProperty(h,"__esModule",{value:!0});h.fixRendererFields=function(b,d){if(null!=b&&null!=d){var c=0;for(b=Array.isArray(b)?b:[b];c<b.length;c++){var e=b[c];if(a(h.rendererFields,e,d),e.visualVariables)for(var g=0,e=e.visualVariables;g<e.length;g++)a(h.visualVariableFields,e[g],d)}}};h.getField=b;h.rendererFields="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" ");
h.visualVariableFields=["field","normalizationField"]})},"esri/layers/support/FeatureType":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport ./InheritedDomain ./RangeDomain ./CodedValueDomain ./FeatureTemplate ../../core/lang".split(" "),function(e,h,d,a,b,c,m,k,l,g,n){e=function(a){function b(b){b=a.call(this,b)||this;return b.id=null,b.name=null,b.domains=null,b.templates=
null,b}return d(b,a),b.prototype.readDomains=function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];switch(d.type){case "range":b[c]=k.fromJSON(d);break;case "codedValue":b[c]=l.fromJSON(d);break;case "inherited":b[c]=m.fromJSON(d)}}return b},b.prototype.writeDomains=function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]&&a[d].toJSON());n.fixJson(c);b.domains=c},b.prototype.readTemplates=function(a){return a&&a.map(function(a){return new g(a)})},b.prototype.writeTemplates=
function(a,b){b.templates=a&&a.map(function(a){return a.toJSON()})},b}(b.declared(c));return a([b.property({json:{write:!0}})],e.prototype,"id",void 0),a([b.property({json:{write:!0}})],e.prototype,"name",void 0),a([b.property({json:{write:!0}})],e.prototype,"domains",void 0),a([b.reader("domains")],e.prototype,"readDomains",null),a([b.writer("domains")],e.prototype,"writeDomains",null),a([b.property({json:{write:!0}})],e.prototype,"templates",void 0),a([b.reader("templates")],e.prototype,"readTemplates",
null),a([b.writer("templates")],e.prototype,"writeTemplates",null),e=a([b.subclass("esri.layers.support.FeatureType")],e)})},"esri/layers/support/InheritedDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),function(e,h,d,a,b,c){e=function(a){function b(b){b=a.call(this,b)||this;return b.type="inherited",b}return d(b,a),b}(b.declared(c));return a([b.property()],e.prototype,
"type",void 0),e=a([b.subclass("esri.layers.support.InheritedDomain")],e)})},"esri/layers/support/FeatureTemplate":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang".split(" "),function(e,h,d,a,b,c,m,k){var l=m({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",
esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});e=function(a){function b(b){b=a.call(this,b)||this;
return b.name=null,b.description=null,b.drawingTool=null,b.prototype=null,b.thumbnail=null,b}return d(b,a),b.prototype.writeDrawingTool=function(a,b){b.drawingTool=l.toJSON(a)},b.prototype.writePrototype=function(a,b){b.prototype=k.fixJson(k.clone(a),!0)},b.prototype.writeThumbnail=function(a,b){b.thumbnail=k.fixJson(k.clone(a))},b}(b.declared(c));return a([b.property({json:{write:!0}})],e.prototype,"name",void 0),a([b.property({json:{write:!0}})],e.prototype,"description",void 0),a([b.property({json:{read:l.fromJSON,
write:!0}})],e.prototype,"drawingTool",void 0),a([b.writer("drawingTool")],e.prototype,"writeDrawingTool",null),a([b.property({json:{write:!0}})],e.prototype,"prototype",void 0),a([b.writer("prototype")],e.prototype,"writePrototype",null),a([b.property({json:{write:!0}})],e.prototype,"thumbnail",void 0),a([b.writer("thumbnail")],e.prototype,"writeThumbnail",null),e=a([b.subclass("esri.layers.support.FeatureTemplate")],e)})},"esri/layers/support/LabelClass":function(){define("../../core/JSONSupport ../../core/lang ../../core/kebabDictionary dojo/_base/lang dojo/number ../../PopupTemplate ../../widgets/Popup/PopupRendererViewModel ../../renderers/support/arcadeUtils ../../symbols/support/jsonUtils".split(" "),
function(e,h,d,a,b,c,m,k,l){var g=/__begin__/ig,n=/__end__/ig,u=/^__begin__/i,r=/__end__$/i,t=d({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",
esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",
esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"}),w=e.createSubclass({declaredClass:"esri.layers.support.LabelClass",properties:{name:{value:null,json:{write:!0}},labelExpression:{value:null,json:{write:!0}},labelExpressionInfo:{value:null,
json:{write:function(b,c,d,e){b=h.fixJson(b&&a.clone(b));c.labelExpressionInfo=this._processLabelExpressionInfo(b)}}},labelPlacement:{value:null,json:{read:function(a,b){return t.fromJSON(a)},write:function(a,b){(a=t.toJSON(a))&&(b.labelPlacement=a)}}},maxScale:{value:0,json:{write:function(a,b){(a||this.minScale)&&(b.maxScale=a)}}},minScale:{value:0,json:{write:function(a,b){(a||this.maxScale)&&(b.minScale=a)}}},requiredFields:{readOnly:!0,dependsOn:["labelExpression","labelExpressionInfo","where"],
get:function(){var a=Object.create(null);return this._collectRequiredFields(a),Object.keys(a)}},symbol:{value:null,json:{read:l.read,write:function(a,b,c,d){b.symbol=l.write(a,{},d)}}},useCodedValues:{value:null,json:{write:!0}},where:{value:null,json:{write:!0}}},getLabelExpression:function(){var a={expression:"",type:"none"};return this.labelExpressionInfo?this.labelExpressionInfo.value?(a.expression=this.labelExpressionInfo.value,a.type="conventional"):this.labelExpressionInfo.expression&&(a.expression=
this.labelExpressionInfo.expression,a.type="arcade"):this._validateLabelExpression(this.labelExpression)&&(a.expression=this._convertLabelExpression(this.labelExpression),a.type="conventional"),a},getOptions:function(){var a={},b=this.labelExpressionInfo;if(b){var c=b.expression;c&&!b.value&&(a.hasArcadeExpression=!0,a.compiledArcadeFunc=k.createFunction(c))}return a},clone:function(){return new w({labelExpression:this.labelExpression,labelExpressionInfo:a.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,
maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:this.symbol.clone(),where:this.where,useCodedValues:this.useCodedValues})},_collectRequiredFields:function(a){this._collectLabelExpressionRequiredFields(this.getLabelExpression(),a);this._collectWhereRequiredFields(this.where,a)},_validateLabelExpression:function(a){return/^(\s*\[[^\]]+\]\s*)+$/i.test(a)},_convertLabelExpression:function(a){return a.replace(/\[/g,"{").replace(/\]/g,"}")},_collectWhereRequiredFields:function(a,b){null!=
a&&(a=a.split(" "),3===a.length&&(b[a[0]]=!0),7===a.length&&(b[a[0]]=!0,b[a[4]]=!0))},_collectLabelExpressionRequiredFields:function(a,b){"arcade"===a.type?k.extractFieldNames(a.expression).forEach(function(a){b[a]=!0}):(a=a.expression.match(/{[^}]*}/g))&&a.forEach(function(a){b[a.slice(1,-1)]=!0})},_processLabelExpressionInfo:function(a){return a&&a.value&&(a.expression=this._convertTemplatedStringToArcade(a.value)),a},_convertTemplatedStringToArcade:function(b){var c;return b&&(c=a.replace(b,function(a,
b){return'__begin__$feature["'+b+'"]__end__'}),c=u.test(c)?c.replace(u,""):'"'+c,c=r.test(c)?c.replace(r,""):c+'"',c=c.replace(g,'" + ').replace(n,' + "')),c}});return w.evaluateWhere=function(a,b){var c=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return c>a?!0:!1;case "\x3c\x3d":return c>=a?!0:!1}return!1};try{if(null==a)return!0;var d=a.split(" ");if(3===d.length)return c(b[d[0]],
d[1],d[2]);if(7===d.length){var e=c(b[d[0]],d[1],d[2]),g=d[3],k=c(b[d[4]],d[5],d[6]);switch(g){case "AND":return e&&k;case "OR":return e||k}}return!1}catch(A){console.log("Error.: can't parse \x3d "+a)}},w.buildLabelText=function(a,b,c,d){var e="";if(d&&d.hasArcadeExpression)d.compiledArcadeFunc&&(a=k.createExecContext(b),a=k.executeFunction(d.compiledArcadeFunc,a),null!=a&&(e=a.toString()));else var f=b&&b.attributes||{},e=a.replace(/{[^}]*}/g,function(a){return w.formatField(a.slice(1,-1),a,f,c,
d)});return e},w.formatField=function(d,e,g,f,k){var l=d.toLowerCase();for(d=0;d<f.length;d++)if(f[d].name.toLowerCase()===l){e=g[f[d].name];var p=f[d].domain;if(p&&a.isObject(p)){if("codedValue"==p.type)for(g=0;g<p.codedValues.length;g++)p.codedValues[g].code==e&&(e=p.codedValues[g].name);else"range"==p.type&&p.minValue<=e&&e<=p.maxValue&&(e=p.name);break}p=f[d].type;"date"==p?(p=k&&k.dateFormat||"shortDate",p=c.prototype._dateFormatKebabDict.fromJSON(p),(p="DateFormat"+m.prototype._dateFormats[p])&&
(e=h.substitute({myKey:e},"{myKey:"+p+"}"))):("integer"==p||"small-integer"==p||"long"==p||"double"==p)&&k&&k.numberFormat&&k.numberFormat.digitSeparator&&k.numberFormat.places&&(e=b.format(e,{places:k.numberFormat.places}))}return null==e?"":e},w})},"esri/layers/support/labelingInfo":function(){define(["require","exports","./LabelClass"],function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});var a=/\[([^\[\]]+)\]/gi;h.reader=function(b,c,e){var k=this;return b?b.map(function(b){var g=new d;
if(g.read(b,e),g.labelExpression){var h=c.fields||c.layerDefinition&&c.layerDefinition.fields||k.fields;g.labelExpression=g.labelExpression.replace(a,function(a,b){a:if(h){a=b.toLowerCase();for(var c=0;c<h.length;c++){var d=h[c].name;if(d.toLowerCase()===a){b=d;break a}}}return"["+b+"]"})}return g}):null}})},"esri/layers/support/commonProperties":function(){define(["require","exports","../../core/accessorSupport/write","../../core/accessorSupport/utils","../../core/accessorSupport/PropertyOrigin"],
function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});h.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{webScene:{read:{source:["id","url","layerType"],reader:function(c,d){return null==d.screenSizePerspective&&"defaults"===this.originOf("screenSizePerspectiveEnabled")?void a.getProperties(this).store.set("screenSizePerspectiveEnabled",!1,b.OriginId.DEFAULTS):d.screenSizePerspective}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(a,b,e,h){"defaults"===
this.originOf("screenSizePerspectiveEnabled")&&a?b[e]=a:d.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},h)&&(b[e]=a)}}}}}}})},"esri/widgets/Search":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Search/SearchViewModel ./Search/SearchResultRenderer ./Widget ../core/lang ../core/watchUtils ../PopupTemplate dojo/regexp dojo/keys dojo/query dojo/i18n!./Search/nls/Search".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q){e=function(a){function b(b){b=a.call(this)||this;return b._inputNode=null,b._sourceMenuButtonNode=null,b._sourceListNode=null,b._suggestionListNode=null,b._searchResultRenderer=new k({container:document.createElement("div")}),b._popupTemplate=new u({title:q.searchResult,content:b._renderSearchResultsContent.bind(b)}),b.activeMenu="none",b.activeSource=null,b.activeSourceIndex=null,b.allPlaceholder=null,b.autoNavigate=null,b.autoSelect=null,b.defaultSource=
null,b.locationToAddressDistance=null,b.maxResults=null,b.maxSuggestions=null,b.minSuggestCharacters=null,b.popupEnabled=null,b.popupOpenOnSelect=null,b.popupTemplate=null,b.resultGraphic=null,b.resultGraphicEnabled=null,b.results=null,b.searchAllEnabled=null,b.searching=!1,b.searchTerm=null,b.selectedResult=null,b.sources=null,b.suggestions=null,b.suggestionsEnabled=null,b.view=null,b.viewModel=new m,b}return d(b,a),b.prototype.postInitialize=function(){var a=this;this.viewModel.popupTemplate=this._popupTemplate;
this.own(n.on(this,"viewModel","suggest-complete",function(b){0!==b.numResults&&(a.activeMenu="suggestion")}),n.on(this,"viewModel","search-clear",function(){a.activeMenu="none"}))},b.prototype.destroy=function(){this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)},b.prototype.clear=function(){},b.prototype.focus=function(){this._inputNode&&this._inputNode.focus()},b.prototype.blur=function(){this._inputNode&&
this._inputNode.blur();this.activeMenu="none"},b.prototype.search=function(a){return null},b.prototype.suggest=function(a){return null},b.prototype.render=function(){var a=this,b=this.viewModel,d=b.searchTerm,e=this._getSourceName(b.activeSourceIndex),k=d.trim(),h=this.id,l=c.tsx("input",{bind:this,placeholder:b.placeholder,"aria-label":q.searchButtonTitle,maxlength:b.maxInputLength,autocomplete:"off",type:"text",tabindex:"0","class":"esri-search__input",value:d,"aria-haspopup":"true",id:h+"_input",
role:"textbox",onclick:this._handleInputClick,onkeyup:this._handleInputKeyup,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterUpdate:this._storeInputNode,onfocus:this._handleInputFocus,onblur:this._handleInputBlur}),l=c.tsx("form",{key:"esri-search__form",bind:this,"class":"esri-search__form",onsubmit:this._formSubmit,role:"search"},l),n=d?c.tsx("div",{key:"esri-search__clear-button",bind:this,role:"button","class":c.join("esri-search__clear-button","esri-widget-button"),tabindex:"0",
title:q.clearButtonTitle,onclick:this._handleClearButtonClick,onkeydown:this._handleClearButtonClick},c.tsx("span",{"aria-hidden":"true","class":"esri-icon-close"})):null,t=b.suggestions?b.suggestions.map(function(b){var d=b.sourceIndex,e=b.results.length?a._getSuggestionHeaderNode(d):null;b=b.results.map(function(b,c){return a._getSuggestionNode(b,c,d)});return c.tsx("div",{key:"esri-search__suggestion-container-"+d},e,c.tsx("ul",{key:"esri-search__suggestion-list-"+d},b))}):null,t=c.tsx("div",{key:"esri-search__suggestions-menu",
"class":c.join("esri-menu","esri-search__suggestions-menu"),role:"menu",bind:this,afterUpdate:this._storeSuggestionsListNode},t),l=c.tsx("div",{key:"esri-search__input-container","class":"esri-search__input-container"},l,n,t),n=c.tsx("div",{key:"esri-search__submit-button",bind:this,role:"button",title:q.searchButtonTitle,"class":c.join("esri-search__submit-button","esri-widget-button"),tabindex:"0",onclick:this._handleSearchButtonClick,onkeydown:this._handleSearchButtonClick},c.tsx("span",{"aria-hidden":"true",
role:"presentation","class":"esri-icon-search"}),c.tsx("span",{"class":"esri-icon-font-fallback-text"},q.searchButtonTitle)),d=g.substitute({value:'"'+d+'"'},q.noResultsFound),d=k?c.tsx("div",{key:"esri-search__no_results"},c.tsx("div",{"class":"esri-search__warning-header"},q.noResults),c.tsx("div",{"class":"esri-search__warning-text"},d)):null,k=k?null:c.tsx("div",{key:"esri-search__empty-search"},c.tsx("span",{"aria-hidden":"true","class":"esri-icon-notice-triangle"}),c.tsx("span",{"class":"esri-search__no-value-text"},
q.emptyValue)),k=c.tsx("div",{key:"esri-search__error-menu","class":c.join("esri-menu","esri-search__warning-menu")},c.tsx("div",{"class":"esri-search__warning-body"},d,k)),t=b.sources,d=1<t.length,t=t&&t.toArray(),b=b.searchAllEnabled?this._getSourceNode(m.ALL_INDEX):null,e=d?c.tsx("div",{key:"esri-search__source-menu-button",bind:this,role:"button",title:q.searchIn,id:h+"_menu_button","class":c.join("esri-search__sources-button","esri-widget-button"),tabindex:"0",onkeydown:this._handleSourcesMenuToggleClick,
onclick:this._handleSourcesMenuToggleClick,onkeyup:this._handleSourceMenuButtonKeyup,afterUpdate:this._storeSourceMenuButtonNode},c.tsx("span",{"aria-hidden":"true",role:"presentation","class":"esri-icon-down-arrow esri-search__sources-button--down"}),c.tsx("span",{"aria-hidden":"true",role:"presentation","class":"esri-icon-up-arrow esri-search__sources-button--up"}),c.tsx("span",{"class":"esri-search__source-name"},e)):null,h=d?c.tsx("ul",{bind:this,afterUpdate:this._storeSourcesListNode},b,t.map(function(b,
c){return a._getSourceNode(c)})):null,h=c.tsx("div",{key:"esri-search__source-menu","class":c.join("esri-menu","esri-search__sources-menu"),role:"menu"},h),b=this.activeMenu,b=(v={},v["esri-search--multiple-sources"]=d,v["esri-search--loading"]=this.searching,v["esri-search--warning"]="warning"===b,v["esri-search--sources"]="source"===b,v["esri-search--show-suggestions"]="suggestion"===b,v);return c.tsx("div",{"class":"esri-search esri-widget"},c.tsx("div",{role:"presentation",classes:b,"class":"esri-search__container"},
e,h,l,n,k));var v},b.prototype._handleSourcesMenuToggleClick=function(){this.activeMenu="source"===this.activeMenu?"none":"source"},b.prototype._handleClearButtonClick=function(){this.viewModel.clear();this.focus()},b.prototype._handleSearchButtonClick=function(){this._performSearch()},b.prototype._handleSuggestionClick=function(a){(a=a.currentTarget["data-suggestion"])&&(this._performSearch(a),this.focus())},b.prototype._handleSourceClick=function(a){this.viewModel.activeSourceIndex=a.currentTarget["data-source-index"];
this.activeMenu="none";this.focus()},b.prototype._performSearch=function(a){var b=this;this.activeMenu="none";this._set("searching",!0);this.viewModel.search(a).always(function(a){var c=0;a&&a.forEach(function(a){c+=a.results.length});b.activeMenu=0===c?"warning":"none";b._set("searching",!1)})},b.prototype._handleInputFocus=function(){this.emit("search-focus")},b.prototype._handleInputBlur=function(){this.emit("search-blur")},b.prototype._storeSuggestionsListNode=function(a){this._suggestionListNode=
a},b.prototype._storeSourcesListNode=function(a){this._sourceListNode=a},b.prototype._storeInputNode=function(a){this._inputNode=a},b.prototype._storeSourceMenuButtonNode=function(a){this._sourceMenuButtonNode=a},b.prototype._handleInputClick=function(){this.activeMenu="none"},b.prototype._handleInputKeyup=function(a){var b=a.keyCode,c=a.ctrlKey||a.metaKey||b===t.copyKey||b===t.LEFT_ARROW||b===t.RIGHT_ARROW||b===t.ENTER,d=this._suggestionListNode?w("li",this._suggestionListNode):null,e=this.viewModel,
f=b===t.UP_ARROW,g=b===t.DOWN_ARROW;if(!c){if(b===t.TAB||b===t.ESCAPE)return e.cancelSuggest(),void(this.activeMenu="none");if((f||g)&&d)return this.activeMenu="suggestion",a.stopPropagation(),a.preventDefault(),e.cancelSuggest(),a=d[f?d.length-1:0],void(a&&a.focus());e.suggest()}},b.prototype._handleInputPaste=function(a){var b=this.viewModel;a=a.target;b.searchTerm!==a.value&&(b.searchTerm=a.value);b.suggest()},b.prototype._handleSourceMenuButtonKeyup=function(a){var b=a.keyCode,c=b===t.UP_ARROW,
b=b===t.DOWN_ARROW;if(c||b)a.stopPropagation(),a.preventDefault(),(a=this._sourceListNode?w("li",this._sourceListNode):null)&&(c=a[c?a.length-1:0])&&c.focus()},b.prototype._handleSourceKeyup=function(a){var b=a.target,c=this._sourceListNode?w("li",this._sourceListNode):null,d=a.keyCode;if(d===t.ESCAPE)return this.activeMenu="none",void this.focus();if(c){b=c.indexOf(b);if(d===t.UP_ARROW)return a.stopPropagation(),a.preventDefault(),a=b-1,c=0>a?this._sourceMenuButtonNode:c[a],void(c&&c.focus());d===
t.DOWN_ARROW&&(a.stopPropagation(),a.preventDefault(),a=b+1,(c=a>=c.length?this._sourceMenuButtonNode:c[a])&&c.focus())}},b.prototype._handleSuggestionKeyup=function(a){var b=a.target,c=this._suggestionListNode?w("li",this._suggestionListNode):null,b=c.indexOf(b),d=a.keyCode;if(this.viewModel.cancelSuggest(),d===t.BACKSPACE||d===t.DELETE)return void this.focus();if(d===t.ESCAPE)return this.activeMenu="none",void this.focus();c&&(d===t.UP_ARROW?(a.stopPropagation(),a.preventDefault(),a=b-1,0>a?this.focus():
(c=c[a])&&c.focus()):d===t.DOWN_ARROW&&(a.stopPropagation(),a.preventDefault(),a=b+1,a>=c.length?this.focus():(c=c[a])&&c.focus()))},b.prototype._formSubmit=function(a){a.preventDefault();this._performSearch()},b.prototype._getSourceName=function(a){var b=this.viewModel.sources.getItemAt(a);return a===m.ALL_INDEX?q.all:b?b.name:q.untitledSource},b.prototype._getSuggestionHeaderNode=function(a){var b=this.viewModel;return 1<b.sources.length&&b.activeSourceIndex===m.ALL_INDEX?(a=this._getSourceName(a),
c.tsx("div",{"class":"esri-header"},a)):null},b.prototype._splitResult=function(a,b){b=r.escapeString(b);return a.replace(new RegExp("(^|)("+b+")(|$)","ig"),"$1|$2|$3").split("|")},b.prototype._getSuggestionNode=function(a,b,d){var e=this.viewModel.searchTerm;if(e){var f=this._splitResult(a.text||q.untitledResult,e),g=e.toLowerCase(),k=[];return f.forEach(function(a,e){a&&a.length&&(e=d+"-"+b+"-"+e,a.toLowerCase()===g?k.push(c.tsx("strong",{key:"esri-search__partial-match-"+e},a)):k.push(a))}),c.tsx("li",
{bind:this,onclick:this._handleSuggestionClick,onkeydown:this._handleSuggestionClick,onkeyup:this._handleSuggestionKeyup,key:"esri-search__suggestion$-{sourceIndex}_"+b,"data-suggestion":a,role:"menuitem",tabindex:"0"},k)}},b.prototype._getSourceNode=function(a){var b=(d={},d["esri-search__source--active"]=a===this.viewModel.activeSourceIndex,d);return c.tsx("li",{bind:this,key:"esri-search__source-"+a,onclick:this._handleSourceClick,onkeydown:this._handleSourceClick,onkeyup:this._handleSourceKeyup,
"data-source-index":a,role:"menuitem","class":"esri-search__source",classes:b,tabindex:"0"},this._getSourceName(a));var d},b.prototype._renderSearchResultsContent=function(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer},b}(b.declared(l));return a([b.property(),c.renderable()],e.prototype,"activeMenu",void 0),a([b.aliasOf("viewModel.activeSource"),c.renderable()],e.prototype,"activeSource",void 0),a([b.aliasOf("viewModel.activeSourceIndex"),
c.renderable()],e.prototype,"activeSourceIndex",void 0),a([b.aliasOf("viewModel.allPlaceholder"),c.renderable()],e.prototype,"allPlaceholder",void 0),a([b.aliasOf("viewModel.autoNavigate")],e.prototype,"autoNavigate",void 0),a([b.aliasOf("viewModel.autoSelect")],e.prototype,"autoSelect",void 0),a([b.aliasOf("viewModel.defaultSource")],e.prototype,"defaultSource",void 0),a([b.aliasOf("viewModel.locationToAddressDistance")],e.prototype,"locationToAddressDistance",void 0),a([b.aliasOf("viewModel.maxResults")],
e.prototype,"maxResults",void 0),a([b.aliasOf("viewModel.maxSuggestions")],e.prototype,"maxSuggestions",void 0),a([b.aliasOf("viewModel.minSuggestCharacters")],e.prototype,"minSuggestCharacters",void 0),a([b.aliasOf("viewModel.popupEnabled")],e.prototype,"popupEnabled",void 0),a([b.aliasOf("viewModel.popupOpenOnSelect")],e.prototype,"popupOpenOnSelect",void 0),a([b.aliasOf("viewModel.popupTemplate")],e.prototype,"popupTemplate",void 0),a([b.aliasOf("viewModel.resultGraphic")],e.prototype,"resultGraphic",
void 0),a([b.aliasOf("viewModel.resultGraphicEnabled")],e.prototype,"resultGraphicEnabled",void 0),a([b.aliasOf("viewModel.results"),c.renderable()],e.prototype,"results",void 0),a([b.aliasOf("viewModel.searchAllEnabled"),c.renderable()],e.prototype,"searchAllEnabled",void 0),a([b.property({readOnly:!0}),c.renderable()],e.prototype,"searching",void 0),a([b.aliasOf("viewModel.searchTerm"),c.renderable()],e.prototype,"searchTerm",void 0),a([b.aliasOf("viewModel.selectedResult")],e.prototype,"selectedResult",
void 0),a([b.aliasOf("viewModel.sources"),c.renderable()],e.prototype,"sources",void 0),a([b.aliasOf("viewModel.suggestions"),c.renderable()],e.prototype,"suggestions",void 0),a([b.aliasOf("viewModel.suggestionsEnabled")],e.prototype,"suggestionsEnabled",void 0),a([b.aliasOf("viewModel.view"),c.renderable()],e.prototype,"view",void 0),a([c.vmEvent("search-clear search-complete search-start select-result suggest-start suggest-complete".split(" ")),b.property({type:m}),c.renderable("viewModel")],e.prototype,
"viewModel",void 0),a([b.aliasOf("viewModel.clear")],e.prototype,"clear",null),a([b.aliasOf("viewModel.search")],e.prototype,"search",null),a([b.aliasOf("viewModel.suggest")],e.prototype,"suggest",null),a([c.accessibleHandler()],e.prototype,"_handleSourcesMenuToggleClick",null),a([c.accessibleHandler()],e.prototype,"_handleClearButtonClick",null),a([c.accessibleHandler()],e.prototype,"_handleSearchButtonClick",null),a([c.accessibleHandler()],e.prototype,"_handleSuggestionClick",null),a([c.accessibleHandler()],
e.prototype,"_handleSourceClick",null),e=a([b.subclass("esri.widgets.Search")],e)})},"esri/widgets/Search/SearchViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/HandleRegistry ../../core/promiseUtils ../../core/watchUtils ../../styles/basic ./FeatureLayerSearchSource ./LocatorSearchSource ../../tasks/Locator dojo/has ../../Graphic ../../geometry/Point ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../PopupTemplate ../../geometry/SpatialReference ./support/geometryUtils dojo/i18n!./nls/Search ../../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y,A,B,D,F,C,E){function G(a,b){return a.hasOwnProperty(b)&&null!=a[b]&&""!==a[b]}var K=c.ofType(function(a){return a instanceof t||a instanceof r?a:a.featureLayer?new r(a):new t(a)}),L=D.WGS84,H=new t({locator:new w({url:"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"}),singleLineFieldName:"SingleLine",outFields:["Addr_type","Match_addr","StAddr","City"],name:C.esriLocatorName,localSearchOptions:{minScale:3E5,distance:5E4},placeholder:C.placeholder,
resultSymbol:new f({url:e.toUrl(q("trident")?"../../images/search/search-symbol-32.png":"../../images/search/search-symbol-32.svg"),size:24,width:24,height:24})});e=function(a){function b(b){b=a.call(this)||this;return b._suggestPromises=[],b._handles=new l,b._suggestDelayPromise=null,b._viewReadyPromise=null,b._viewAnimation=null,b._popupTemplate=new B({title:C.searchResult,content:"{Match_addr}"}),b.activeSource=null,b.activeSourceIndex=0,b.allPlaceholder=C.allPlaceholder,b.autoNavigate=!0,b.autoSelect=
!0,b.defaultSource=H,b.locationToAddressDistance=1500,b.maxInputLength=128,b.maxResults=6,b.maxSuggestions=6,b.minSuggestCharacters=1,b.placeholder="",b.popupOpenOnSelect=!0,b.popupTemplate=null,b.popupEnabled=!0,b.resultGraphicEnabled=!0,b.resultGraphic=null,b.results=null,b.selectedSuggestion=null,b.searchAllEnabled=!0,b.selectedResult=null,b.sources=new K([H]),b.suggestionDelay=150,b.suggestions=null,b.suggestionsEnabled=!0,b.view=null,b.zoomScale=1E3,b}return d(b,a),b.prototype.initialize=function(){var a=
this;this._handles.add([n.init(this,"activeSourceIndex",function(b){a._updateActiveSource();a._setPlaceholder(b)}),n.init(this,"allPlaceholder",function(){a._setPlaceholder(a.activeSourceIndex)}),n.init(this,"sources",function(){a._setDefaultActiveSourceIndex();a._setPlaceholder(a.activeSourceIndex)}),n.init(this,"searchAllEnabled",function(){return a._setDefaultActiveSourceIndex()})])},b.prototype.destroy=function(){this.clearGraphics();this._viewReadyPromise&&this._viewReadyPromise.cancel();this._handles.destroy();
this._handles=null},Object.defineProperty(b.prototype,"popup",{get:function(){return this.get("view.popup")||null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"searchTerm",{get:function(){return this._get("searchTerm")||""},set:function(a){this._set("searchTerm",a||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==a&&this._set("selectedSuggestion",null);""===a&&this._clear()},enumerable:!0,configurable:!0}),b.prototype.cancelSuggest=function(){this._cancelSuggestions();
var a=this._suggestDelayPromise;a&&a.cancel()},b.prototype.clear=function(){this.searchTerm=""},b.prototype.clearGraphics=function(){this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)},b.prototype.search=function(a){var b=this;this.emit("search-start");this.cancelSuggest();var c=this._getLocationSearch(a),d=this._createSuggestionForSearch(a);return this._ready(this.view).then(function(){return b._getResultsFromSources(c,d).then(function(a){var c=
{activeSourceIndex:b.activeSourceIndex,searchTerm:d.text,numResults:0,numErrors:0,errors:[],results:[]};return b._formatEvent(c,a,d),b._set("searchTerm",d.text),d.key&&d.sourceIndex&&b._set("selectedSuggestion",d),b._set("results",c.results),b.emit("search-complete",c),b._selectFirstResult(c.results).then(function(){return c.results})})})},b.prototype.select=function(a){var b=this;if(this.cancelSuggest(),this.clearGraphics(),!a)return g.reject(new m("searchviewmodel:missing-parameter","searchResult is required."));
var c=this.view,d=G(a,"sourceIndex")?a.sourceIndex:this._getSourceIndexOfResult(a),e=this.sources.getItemAt(d);if(!e)return g.reject(new m("searchviewmodel:missing-source","source not found for selection."));var f=e instanceof r?this._getSourcePopupTemplate(e):null,k=e.resultSymbol||this._getDefaultSymbol(a),h=G(e,"resultGraphicEnabled")?e.resultGraphicEnabled:this.resultGraphicEnabled,l=G(e,"autoNavigate")?e.autoNavigate:this.autoNavigate,p=G(e,"popupOpenOnSelect")?e.popupOpenOnSelect:this.popupOpenOnSelect,
n=G(e,"popupEnabled")?e.popupEnabled:this.popupEnabled,q=f||this.popupTemplate||this._popupTemplate,t=a.feature,u=this.popup;if(!t)return g.reject(new m("searchviewmodel:missing-feature","The SearchResult must contain a feature for selection."));f=F.getPointFromGeometry(t.geometry);return(this.view?F.getPointWithElevation(f,c):g.resolve(f)).then(function(f){k instanceof A&&(k.text=a.name);var g=new v({geometry:f,symbol:k,attributes:t.attributes,popupTemplate:n?q:null});return b._goToSearchResult(l,
a.extent).always(function(){return b._viewAnimation=null,h&&c&&c.graphics.push(g),u&&n&&p&&u.open({features:[g],location:f}),b._set("selectedResult",a),b._set("resultGraphic",g),b.emit("select-result",{result:a,source:e,sourceIndex:d}),a})})},b.prototype.suggest=function(a,b){var c=this;this.cancelSuggest();var d=a||this.searchTerm;return this.emit("suggest-start",{searchTerm:d}),this._suggestTimer(b).then(function(){return c._suggestImmediate(d).then(function(a){return c._set("suggestions",a.results),
c.emit("suggest-complete",a),a.results})})},b.prototype._clear=function(){this._viewAnimation&&(this._viewAnimation.stop(),this._viewAnimation=null);this._set("results",null);this._set("suggestions",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")},b.prototype._closePopup=function(){var a=this.get("view.popup"),b=this.resultGraphic;if(a&&this.popupEnabled&&b){var c=a.selectedFeature;c&&c===b&&a.close()}},b.prototype._suggestTimer=function(a){a=
g.after(null!=a?a:this.suggestionDelay);return this._suggestDelayPromise=a,a},b.prototype._getLocationSearch=function(a){return a instanceof v?F.getPointFromGeometry(a.geometry):a instanceof x?a:Array.isArray(a)&&2===a.length?new x({longitude:a[0],latitude:a[1]}):void 0},b.prototype._createSuggestionForSearch=function(a){if(a&&G(a,"key")&&G(a,"text")&&G(a,"sourceIndex"))return a;a="string"==typeof a?a:this.searchTerm;var b=this.selectedSuggestion,c=this.selectedResult;return b&&c&&b.text===c.name?
b:{text:a,key:null,sourceIndex:null}},b.prototype._getFirstResult=function(a){var b=null;return a&&a.some(function(a){a=a.results[0];var c=!!a;return c&&(b=a),c}),b},b.prototype._selectFirstResult=function(a){return this.autoSelect&&a&&this.view?(a=this._getFirstResult(a))?this.select(a):g.resolve():g.resolve()},b.prototype._suggestImmediate=function(a){var b=this;return this._ready(this.view).then(function(){return b._getSuggestionsFromSources(a)}).then(function(c){var d={activeSourceIndex:b.activeSourceIndex,
searchTerm:a,numResults:0,numErrors:0,errors:[],results:[]};return b._formatEvent(d,c),d})},b.prototype._formatEventSource=function(a,b,c){var d=b&&b.value||[];b=b&&b.error;var e=this.sources.getItemAt(c);b?(a.errors.push({sourceIndex:c,source:e,error:b}),a.numErrors++):(a.results.push({sourceIndex:c,source:e,results:d}),a.numResults+=d.length)},b.prototype._formatEvent=function(a,b,c){var d=this;if(b)if(-1===a.activeSourceIndex){var e=c&&G(c,"sourceIndex")&&-1!==c.sourceIndex?c.sourceIndex:void 0;
b.forEach(function(b,c){d._formatEventSource(a,b,void 0!==e?e:c)})}else this._formatEventSource(a,b[0],a.activeSourceIndex)},b.prototype._getResultsFromSources=function(a,b){var c=this,d=!a&&G(b,"sourceIndex")?b.sourceIndex:this.activeSourceIndex,e=[];return-1===d?this.sources.forEach(function(d,f){e.push(c._getResultsFromSource(a,b,f))}):e.push(this._getResultsFromSource(a,b,d)),g.eachAlways(e)},b.prototype._getSuggestionsFromSources=function(a){var b=this,c=this.activeSourceIndex,d=[];-1===c?this.sources.forEach(function(c,
e){c=b._getSuggestionsFromSource(a,e);b._suggestPromises.push(c);d.push(c)}):(c=this._getSuggestionsFromSource(a,c),this._suggestPromises.push(c),d.push(c));return g.eachAlways(d)},b.prototype._getResultsFromSource=function(a,b,c){var d=this.sources.getItemAt(c),e=this.get("view.spatialReference")||L,f=G(d,"maxResults")?d.maxResults:this.maxResults,g=d instanceof r&&G(d,"exactMatch")?d.exactMatch:!1,k=G(d,"zoomScale")?d.zoomScale:this.zoomScale,h=d instanceof t&&G(d,"locationToAddressDistance")?d.locationToAddressDistance:
this.locationToAddressDistance;return d.getResults({view:this.view,sourceIndex:c,location:a,suggestResult:b,spatialReference:e,exactMatch:g,maxResults:f,distance:h,zoomScale:k})},b.prototype._getSuggestionsFromSource=function(a,b){var c=this.sources.getItemAt(b),d=G(c,"suggestionsEnabled")?c.suggestionsEnabled:this.suggestionsEnabled,e=a.trim().length,f=G(c,"minSuggestCharacters")?c.minSuggestCharacters:this.minSuggestCharacters;return d&&e>=f?(d=this.get("view.spatialReference")||L,e=G(c,"maxSuggestions")?
c.maxSuggestions:this.maxSuggestions,c.getSuggestions({view:this.view,sourceIndex:b,suggestTerm:a,spatialReference:d,maxSuggestions:e})):g.resolve()},b.prototype.createDefaultSymbol=function(a,b){if("point"===b)return new y({color:a.color,size:a.size,outline:{color:a.outline.color,width:a.outline.width}});if("polyline"===b)return new z({color:a.color,width:a.width});if("polygon"===b)return new p({color:a.color,outline:{color:a.outline.color,width:a.outline.width}})},b.prototype._cancelSuggestions=
function(){var a=this;this._suggestPromises.forEach(function(b){b.cancel(a.declaredClass+": cancelling request")});this._suggestPromises.length=0},b.prototype._updateActiveSource=function(){var a=this.sources.getItemAt(this.activeSourceIndex)||null;this._set("activeSource",a)},b.prototype._getPlaceHolderText=function(a){var b=this.sources.getItemAt(a),c=this.allPlaceholder,c=void 0===c?C.allPlaceholder:c;return-1===a?c:b?b.placeholder:""},b.prototype._setPlaceholder=function(a){this._set("placeholder",
this._getPlaceHolderText(a))},b.prototype._setDefaultActiveSourceIndex=function(){this.activeSourceIndex=1!==this.sources.length&&this.searchAllEnabled?-1:0},b.prototype._getSourcePopupTemplate=function(a){var b=a.featureLayer;return b?G(a,"popupTemplate")?a.popupTemplate:b.popupTemplate:void 0},b.prototype._getSourceIndexOfResult=function(a){var b=null;return this.results.some(function(c){return c.results.some(function(d){return d===a?(b=c.sourceIndex,!0):void 0})}),b},b.prototype._goToSearchResult=
function(a,b){var c=this.view;a=c&&a&&!!b;var d={animate:a};b="3d"===c.type?c.goTo({target:b,tilt:0},d):c.goTo({target:b},d);return a&&(this._viewAnimation=b),b},b.prototype._ready=function(a){return(this._viewReadyPromise&&this._viewReadyPromise.cancel(),a)?(a=a.always(),this._viewReadyPromise=a,a):g.resolve()},b.prototype._getDefaultSymbol=function(a){var b=this.get("view.map.basemap.id");if(a=a&&a.feature&&a.feature.geometry&&a.feature.geometry.type)if(b=(b=u.getSchemes({theme:"default",basemap:b||
"topo",geometryType:a}))&&b.primaryScheme)return b.color&&G(b,"opacity")&&(b.color.a=b.opacity),this.createDefaultSymbol(b,a);return H.resultSymbol},b}(E.declared(b,k));return e.ALL_INDEX=-1,a([E.property({readOnly:!0})],e.prototype,"activeSource",void 0),a([E.property()],e.prototype,"activeSourceIndex",void 0),a([E.property()],e.prototype,"allPlaceholder",void 0),a([E.property()],e.prototype,"autoNavigate",void 0),a([E.property()],e.prototype,"autoSelect",void 0),a([E.property({readOnly:!0})],e.prototype,
"defaultSource",void 0),a([E.property()],e.prototype,"locationToAddressDistance",void 0),a([E.property()],e.prototype,"maxInputLength",void 0),a([E.property()],e.prototype,"maxResults",void 0),a([E.property()],e.prototype,"maxSuggestions",void 0),a([E.property()],e.prototype,"minSuggestCharacters",void 0),a([E.property({readOnly:!0})],e.prototype,"placeholder",void 0),a([E.property({dependsOn:["view.popup"],readOnly:!0})],e.prototype,"popup",null),a([E.property()],e.prototype,"popupOpenOnSelect",
void 0),a([E.property()],e.prototype,"popupTemplate",void 0),a([E.property()],e.prototype,"popupEnabled",void 0),a([E.property()],e.prototype,"resultGraphicEnabled",void 0),a([E.property({readOnly:!0})],e.prototype,"resultGraphic",void 0),a([E.property({readOnly:!0})],e.prototype,"results",void 0),a([E.property({readOnly:!0})],e.prototype,"selectedSuggestion",void 0),a([E.property()],e.prototype,"searchAllEnabled",void 0),a([E.property({readOnly:!0})],e.prototype,"selectedResult",void 0),a([E.property()],
e.prototype,"searchTerm",null),a([E.property({type:K})],e.prototype,"sources",void 0),a([E.property()],e.prototype,"suggestionDelay",void 0),a([E.property({readOnly:!0})],e.prototype,"suggestions",void 0),a([E.property()],e.prototype,"view",void 0),a([E.property()],e.prototype,"zoomScale",void 0),e=a([E.subclass("esri.widgets.Search.SearchViewModel")],e)})},"esri/styles/basic":function(){define(["dojo/_base/array","dojo/_base/lang","../Color"],function(e,h,d){function a(a,b){var c;if(a)switch(c={},
c.color=new d(a.color),b){case "point":c.outline={color:new d(a.outline.color),width:a.outline.width};c.size=a.size;break;case "polyline":c.width=a.width;break;case "polygon":c.outline={color:new d(a.outline.color),width:a.outline.width}}return c}var b={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),
dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,1],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[26,26,26,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[26,
26,26,1],outline:{color:[178,178,178,1],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,77,77,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,.8],outline:{color:[255,255,255,1],width:1}},secondary:[{color:[128,128,128,.8],outline:{color:[255,255,255,1],width:1}},{color:[255,255,255,
.8],outline:{color:[128,128,128,1],width:1}}]},dark:{primary:{color:[227,139,79,.8],outline:{color:[51,51,51,1],width:1}},secondary:[{color:[178,178,178,.8],outline:{color:[51,51,51,1],width:1}},{color:[26,26,26,.8],outline:{color:[128,128,128,1],width:1}}]}}}},c={};(function(){var a,d,e,g,h,u,r,t;for(a in b)for(g in d=b[a],e=d.basemapGroups,h=c[a]={basemaps:[].concat(e.light).concat(e.dark),point:{},polyline:{},polygon:{}},e)for(u=e[g],r=0;r<u.length;r++)t=u[r],d.pointSchemes&&(h.point[t]=d.pointSchemes[g]),
d.lineSchemes&&(h.polyline[t]=d.lineSchemes[g]),d.polygonSchemes&&(h.polygon[t]=d.polygonSchemes[g])})();return{getAvailableThemes:function(a){var d,h,g,m=[];for(d in b)h=b[d],g=c[d],a&&-1===e.indexOf(g.basemaps,a)||m.push({name:h.name,label:h.label,description:h.description,basemaps:g.basemaps.slice(0)});return m},getSchemes:function(b){var d,h,g=b.basemap,m=b.geometryType;b=c[b.theme];return d=b&&b[m],d=d&&d[g],d&&(h={primaryScheme:a(d.primary,m),secondarySchemes:e.map(d.secondary,function(b){return a(b,
m)})}),h},cloneScheme:function(a){var b;return a&&(b=h.mixin({},a),b.color&&(b.color=new d(b.color)),b.outline&&(b.outline={color:b.outline.color&&new d(b.outline.color),width:b.outline.width})),b}}})},"esri/widgets/Search/FeatureLayerSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ./SearchSource ./support/featureLayerUtils ../../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l){e=g=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;return b.displayField=null,b.exactMatch=!1,b.searchFields=null,b.searchQueryParams=null,b.searchTemplate=null,b.suggestionTemplate=null,b.suggestQueryParams=null,b}return d(e,a),Object.defineProperty(e.prototype,"featureLayer",{set:function(a){this._set("featureLayer",a);this._loadFeatureLayer()},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new g({autoNavigate:this.autoNavigate,
filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?c.clone(this.outFields):null,placeholder:this.placeholder,popup:this.popup,popupEnabled:this.popupEnabled,popupOpenOnSelect:this.popupOpenOnSelect,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,
suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,featureLayer:this.featureLayer,searchFields:this.searchFields?c.clone(this.searchFields):null,searchQueryParams:this.searchQueryParams?c.clone(this.searchQueryParams):null,suggestionTemplate:this.suggestionTemplate,suggestQueryParams:this.suggestQueryParams?c.clone(this.suggestQueryParams):null,zoomScale:this.zoomScale})},e.prototype.getResults=function(a){return k.getResults(b({source:this},
a))},e.prototype.getSuggestions=function(a){return k.getSuggestions(b({source:this},a))},e.prototype._getFirstStringField=function(){var a=this.featureLayer,b="";return a&&a.fields&&a.fields.some(function(a){return"string"===a.type?(b=a.name,!0):void 0}),b},e.prototype._getDisplayField=function(){return this.displayField||this.featureLayer.displayField||this._getFirstStringField()},e.prototype._setFallbackNameFromFeatureLayer=function(a){(a=this._getFeatureLayerTitle(a))&&(this.name||this._set("name",
a))},e.prototype._loadFeatureLayer=function(){var a=this,b=this.featureLayer;b&&b.load().then(function(){return a._setFallbackNameFromFeatureLayer(b)})},e.prototype._getFeatureLayerTitle=function(a){var b=a.title,c="";return(this.searchFields||[this._getDisplayField()]).forEach(function(b,d){c+=0===d?": ":", ";d=a.getField(b);c+=d&&d.alias||b}),b+c},e}(l.declared(m));a([l.property()],e.prototype,"displayField",void 0);a([l.property()],e.prototype,"exactMatch",void 0);a([l.property()],e.prototype,
"featureLayer",null);a([l.property()],e.prototype,"searchFields",void 0);a([l.property()],e.prototype,"searchQueryParams",void 0);a([l.property()],e.prototype,"searchTemplate",void 0);a([l.property()],e.prototype,"suggestionTemplate",void 0);a([l.property()],e.prototype,"suggestQueryParams",void 0);e=g=a([l.subclass("esri.widgets.Search.FeatureLayerSearchSource")],e);var g;return e})},"esri/widgets/Search/SearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Identifiable".split(" "),
function(e,h,d,a,b,c,m){e=function(a){function b(b){b=a.call(this)||this;return b.autoNavigate=!0,b.filter=null,b.maxResults=6,b.maxSuggestions=6,b.minSuggestCharacters=1,b.name="",b.outFields=null,b.placeholder="",b.popup=null,b.popupEnabled=!0,b.popupTemplate=null,b.popupOpenOnSelect=!0,b.prefix="",b.resultGraphicEnabled=!0,b.resultSymbol=null,b.searchExtent=null,b.suggestionsEnabled=!0,b.suffix="",b.withinViewEnabled=!1,b.zoomScale=null,b}return d(b,a),b}(b.declared(c,m));return a([b.property()],
e.prototype,"autoNavigate",void 0),a([b.property()],e.prototype,"filter",void 0),a([b.property()],e.prototype,"maxResults",void 0),a([b.property()],e.prototype,"maxSuggestions",void 0),a([b.property()],e.prototype,"minSuggestCharacters",void 0),a([b.property()],e.prototype,"name",void 0),a([b.property()],e.prototype,"outFields",void 0),a([b.property()],e.prototype,"placeholder",void 0),a([b.property()],e.prototype,"popup",void 0),a([b.property()],e.prototype,"popupEnabled",void 0),a([b.property()],
e.prototype,"popupTemplate",void 0),a([b.property()],e.prototype,"popupOpenOnSelect",void 0),a([b.property()],e.prototype,"prefix",void 0),a([b.property()],e.prototype,"resultGraphicEnabled",void 0),a([b.property()],e.prototype,"resultSymbol",void 0),a([b.property()],e.prototype,"searchExtent",void 0),a([b.property()],e.prototype,"suggestionsEnabled",void 0),a([b.property()],e.prototype,"suffix",void 0),a([b.property()],e.prototype,"withinViewEnabled",void 0),a([b.property()],e.prototype,"zoomScale",
void 0),e=a([b.subclass("esri.widgets.Search.SearchSource")],e)})},"esri/widgets/Search/support/featureLayerUtils":function(){define("require exports ../../../core/Error ../../../core/lang ../../../core/promiseUtils ../../../geometry/support/scaleUtils ./geometryUtils".split(" "),function(e,h,d,a,b,c,m){function k(a,b){var c=a.filter,d=a.searchExtent;a=a.withinViewEnabled;b=b.extent;return c&&c.geometry||d||(a&&b?b:void 0)}function l(a){return a?(a.loadStatus===z?a.load():a).then(b.resolve).otherwise(b.reject):
b.resolve()}function g(a){return a&&!!a.get("capabilities.query.supportsPagination")}function n(a){var b="";a&&a.fields.some(function(a){return"string"===a.type?(b=a.name,!0):void 0});return b}function u(a,b){return a&&b?b.every(function(b){return!!a.getField(b)}):!1}function r(a){for(var b=0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1}function t(a,b,c){var d=null;a=a.codedValues;return a&&a.some(function(a){var e=a.name,e=c?e:e.toLowerCase();return(c?b:b.toLowerCase())===e?(d=a.code.toString(),
!0):void 0}),d}function w(a,b){return(b=b&&b.where)?"("+a+") AND ("+b+")":a}function q(a,b,c,d,e){var f="";if(a){var g=y.test(b.url)&&r(a)?"N":"";c&&c.forEach(function(c){var h=b.getField(c);c=((c=b.getFieldDomain(c))&&"coded-value"===c.type?t(c,a,e):null)||a||null;if(null!==c){var k=h.type,h=h.name;"string"===k||"date"===k?e?h=w(h+" \x3d "+g+"'"+c+"'",d):(c=c.toUpperCase(),h=w("UPPER("+h+") LIKE "+g+"'%"+c+"%'",d)):"oid"===k||"small-integer"===k||"integer"===k||"single"===k||"double"===k?(c=parseFloat(c),
h=isNaN(c)?null:w(h+" \x3d "+c,d)):h=w(h+" \x3d "+c,d);h&&(f+=f?" OR ("+h+")":"("+h+")")}})}return f}function v(a,b){var c=null;a=a.codedValues;return a&&a.length&&a.some(function(a){return a.code===b?(c=a.name,!0):void 0}),c}function x(b,c,d,e){var f=b.attributes;e=b.layer.getFieldDomain(d);return c?a.substitute(f,c):d&&b.hasOwnProperty("attributes")&&f.hasOwnProperty(d)?(b=f[d],e&&"coded-value"===e.type?v(e,b):b):""}function f(a,b,c,d){return a.features.map(function(a){var e=a.attributes[a.layer.objectIdField];
return{text:x(a,b.suggestionTemplate,d,b),key:e,sourceIndex:c}})}function p(a,b,c,d,e,f,g){return a.features.map(function(a){var h=a.clone();a=x(a,c.searchTemplate,e,c);return{extent:m.createExtentFromGeometry(h.geometry,b,f,g),feature:h,name:a,sourceIndex:d}})}Object.defineProperty(h,"__esModule",{value:!0});var z="not-loaded",y=/https?:\/\/services.*\.arcgis\.com/i,A=/(?:\{([^}]+)\})/g;h.getResults=function(a){var e=a.exactMatch,f=void 0===e?!1:e,h=a.location,m=a.maxResults,t=a.spatialReference,
v=a.source,w=a.sourceIndex,r=a.suggestResult,z=a.view,x=a.zoomScale,B=v.featureLayer,y=v.filter,A=z&&z.scale,O=k(v,z);return l(B).then(function(){var a=v.displayField||v.featureLayer.displayField||n(v.featureLayer);if(!B.getField(a))return b.reject(new d("searchfeaturelayerutils:invalid-field","displayField is invalid."));var e=v.outFields||[a];if(!(e&&1===e.length&&"*"===e[0]||u(B,e)))return b.reject(new d("searchfeaturelayerutils:invalid-field","outField is invalid."));var k=B.createQuery(),l=v.searchQueryParams;
if(l&&k.set(l),t)k.outSpatialReference=t,(l=c.getUnitValueForSR(t))&&(k.maxAllowableOffset=l);if(k.returnGeometry=!0,e&&(k.outFields=e),h)k.geometry=h;else if(r.key)k.objectIds=[parseInt(r.key,10)];else{e=v.searchFields||[a];if(!u(B,e))return b.reject(new d("searchfeaturelayerutils:invalid-field","search field is invalid."));g(B)&&(k.num=m);O&&(k.geometry=O);l=r.text.trim();if(!l)return b.resolve();var D=v.prefix,F=v.suffix,l=(""+(void 0===D?"":D)+l+(void 0===F?"":F)).replace(/\'/g,"''"),e=q(l,B,
e,y,f);if(!e)return b.resolve();k.where=e}return B.queryFeatures(k).then(function(b){return p(b,z,v,w,a,A,x)})})};h.getSuggestions=function(a){var c=a.source,e=a.spatialReference,h=a.suggestTerm,m=a.maxSuggestions,p=a.sourceIndex,t=c.featureLayer,v=c.filter,w=k(c,a.view);return l(t).then(function(){if(!g(t))return b.resolve();var a=c.displayField||c.featureLayer.displayField||n(c.featureLayer),k=c.searchFields||[a],l=[];c.suggestionTemplate?c.suggestionTemplate.replace(A,function(a,b){return l.push(b),
a}):l.push(a);-1!==l.indexOf(t.objectIdField)||l.push(t.objectIdField);var r=!!t.getField(a),z=l&&1===l.length&&"*"===l[0]||u(t,l),x=u(t,k);if(!r)return b.reject(new d("searchfeaturelayerutils:invalid-field","displayField is invalid."));if(!z)return b.reject(new d("searchfeaturelayerutils:invalid-field","outField is invalid."));if(!x)return b.reject(new d("searchfeaturelayerutils:invalid-field","search field is invalid."));r=t.createQuery();(z=c.suggestQueryParams)&&r.set(z);r.outSpatialReference=
e;r.returnGeometry=!1;r.num=m;r.outFields=l;w&&(r.geometry=w);z=h.trim();if(!z)return b.resolve();var x=c.prefix,B=c.suffix,z=(""+(void 0===x?"":x)+z+(void 0===B?"":B)).replace(/\'/g,"''");return(k=q(z,t,k,v,!1))?(r.where=k,t.queryFeatures(r).then(function(b){return f(b,c,p,a)})):b.resolve()})}})},"esri/widgets/Search/support/geometryUtils":function(){define("require exports ../../../core/Error ../../../core/promiseUtils ../../../geometry/Point ../../../geometry/Extent ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry/Multipoint ../../../geometry/support/scaleUtils ../../../views/MapView".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){Object.defineProperty(h,"__esModule",{value:!0});h.getPointWithElevation=function(b,c){return c?b?b.hasZ||c instanceof n?a.resolve(b):(c=c.get("map.ground"))&&c.layers.length?c.queryElevation(b).then(function(a){return a.geometry}):a.resolve(b):a.reject(new d("searchgeometryutils:missing-parameter","point is missing.")):a.reject(new d("searchgeometryutils:missing-parameter","view is missing."))};h.getPointFromGeometry=function(a){return a instanceof b?a:a instanceof
c?a.center:a instanceof m?a.centroid:a instanceof l?a.getPoint(0):a instanceof k?a.getPoint(0,0):void 0};h.createExtentFromGeometry=function(a,d,e,h){a?a instanceof c||(a=a instanceof l||a instanceof m||a instanceof k?a.extent:a instanceof b?d&&d.map?(!isNaN(h)&&e>h?g.getExtentForScale(d,h):d.extent).clone().centerAt(a):new c({xmin:a.x-.25,ymin:a.y-.25,xmax:a.x+.25,ymax:a.y+.25,spatialReference:a.spatialReference}):void 0):a=void 0;return a}})},"esri/widgets/Search/LocatorSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../tasks/Locator ./SearchSource ./support/locatorUtils ../../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l,g){e=n=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;return b.categories=null,b.countryCode=null,b.localSearchOptions=null,b.locationToAddressDistance=1500,b.locator=null,b.searchTemplate="",b.singleLineFieldName=null,b}return d(e,a),e.prototype.castLocator=function(a){return"string"==typeof a?new m({url:a}):a},e.prototype.clone=function(){return new n({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,
minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?c.clone(this.outFields):null,placeholder:this.placeholder,popup:this.popup,popupEnabled:this.popupEnabled,popupOpenOnSelect:this.popupOpenOnSelect,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,
categories:this.categories?c.clone(this.categories):null,countryCode:this.countryCode,localSearchOptions:this.localSearchOptions?c.clone(this.localSearchOptions):null,locationToAddressDistance:this.locationToAddressDistance,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})},e.prototype.getResults=function(a){return l.getResults(b({source:this},a))},e.prototype.getSuggestions=function(a){return l.getSuggestions(b({source:this},
a))},e}(g.declared(k));a([g.property()],e.prototype,"categories",void 0);a([g.property()],e.prototype,"countryCode",void 0);a([g.property()],e.prototype,"localSearchOptions",void 0);a([g.property()],e.prototype,"locationToAddressDistance",void 0);a([g.property()],e.prototype,"locator",void 0);a([g.cast("locator")],e.prototype,"castLocator",null);a([g.property()],e.prototype,"searchTemplate",void 0);a([g.property()],e.prototype,"singleLineFieldName",void 0);e=n=a([g.subclass("esri.widgets.Search.LocatorSearchSource")],
e);var n;return e})},"esri/tasks/Locator":function(){define("dojo/_base/array dojo/_base/lang ../request ./Task ../geometry/SpatialReference ./support/AddressCandidate".split(" "),function(e,h,d,a,b,c){return a.createSubclass({declaredClass:"esri.tasks.Locator",properties:{categories:{value:null,type:[String]},countryCode:{value:null,type:String},outSpatialReference:{value:null,type:b},url:{}},addressToLocations:function(a,b){var c,e=a.outFields,k=a.searchExtent,m=a.countryCode,r=a.magicKey,t=a.distance,
w=a.categories,q=a.maxLocations,v=a.forStorage;a.location&&this.normalization&&(c=a.location.clone().normalize());k&&(k=k.shiftCentralMeridian());a=a.address;var x=this.outSpatialReference;a={query:this._encode(h.mixin({},this.parsedUrl.query,a,{f:"json",outSR:x&&JSON.stringify(x.toJSON()),outFields:e&&e.join(",")||null,searchExtent:k&&JSON.stringify(k.toJSON()),category:w&&w.join(",")||null,countryCode:m||null,magicKey:r||null,distance:t||null,location:c||null,maxLocations:q||null,forStorage:v||
null})),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=h.mixin({},this.requestOptions,b,a)),d(this.parsedUrl.path+"/findAddressCandidates",a).then(this._handleAddressToLocationsResponse)},suggestLocations:function(a,b){a.hasOwnProperty("location")&&this.normalization&&(a.location=a.location.clone().normalize());a.searchExtent&&(a.searchExtent=a.searchExtent.shiftCentralMeridian());a={query:this._encode(h.mixin({},this.parsedUrl.query,{f:"json",text:a.text,maxSuggestions:a.maxSuggestions,
searchExtent:a.searchExtent&&JSON.stringify(a.searchExtent.toJSON()),category:a.categories&&a.categories.join(",")||null,countryCode:a.countryCode||null,location:a.location||null,distance:a.distance||null},{f:"json"})),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=h.mixin({},this.requestOptions,b,a)),d(this.parsedUrl.path+"/suggest",a).then(this._handleSuggestLocationsResponse)},addressesToLocations:function(a,b){var c=this.outSpatialReference,g=[],k=a.categories,m=a.countryCode;
e.forEach(a.addresses,function(a,b){g.push({attributes:a})});a={query:this._encode(h.mixin({},this.parsedUrl.query,{category:k&&k.join(",")||null,sourceCountry:m||null},{addresses:JSON.stringify({records:g})},{f:"json",outSR:c&&JSON.stringify(c.toJSON())})),callbackParamName:"callback"};return(this.requestOptions||b)&&(a=h.mixin({},this.requestOptions,b,a)),d(this.parsedUrl.path+"/geocodeAddresses",a).then(this._handleAddressesToLocationsResponse)},locationToAddress:function(a,b,c){a&&this.normalization&&
(a=a.clone().normalize());var e=this.outSpatialReference;a={query:this._encode(h.mixin({},this.parsedUrl.query,{outSR:e&&JSON.stringify(e.toJSON()),location:a&&JSON.stringify(a.toJSON()),distance:b,f:"json"})),callbackParamName:"callback"};return(this.requestOptions||c)&&(a=h.mixin({},this.requestOptions,c,a)),d(this.parsedUrl.path+"/reverseGeocode",a).then(this._handleLocationToAddressResponse)},_handleAddressToLocationsResponse:function(a){var b,d;a=a.data;var e=a.spatialReference;return(a.candidates||
[]).map(function(a){return b=a.extent,d=a.location,b&&(b.spatialReference=e),d&&(d.spatialReference=e),c.fromJSON(a)})},_handleSuggestLocationsResponse:function(a){return a.data.suggestions||[]},_handleAddressesToLocationsResponse:function(a){var b;a=a.data;var d=a.spatialReference;return(a.locations||[]).map(function(a){return b=a.location,b&&(b.spatialReference=d),c.fromJSON(a)})},_handleLocationToAddressResponse:function(a){a=a.data;var b=a.address||{};return c.fromJSON({address:b.Match_addr||
"",attributes:b,location:a.location,score:100})}})})},"esri/tasks/support/AddressCandidate":function(){define(["../../core/JSONSupport","../../geometry/Extent","../../geometry/Point"],function(e,h,d){return e.createSubclass({declaredClass:"esri.tasks.support.AddressCandidate",properties:{address:null,attributes:null,extent:{value:null,type:h},location:{value:null,type:d},score:null}})})},"esri/widgets/Search/support/locatorUtils":function(){define(["require","exports","../../../Graphic","../../../core/promiseUtils",
"./geometryUtils"],function(e,h,d,a,b){function c(a){var b=a.spatialReference,c=a.location,d=a.distance,e=a.sourceIndex;a=a.source.locator;return b&&(a.outSpatialReference=b),a.locationToAddress(c,d).then(function(a){return g([a],e)})}function m(a,c){var d=a.filter,e=a.searchExtent;a=a.withinViewEnabled;var g=c&&c.extent;return b.createExtentFromGeometry(d&&d.geometry,c,c&&c.scale)||e||(a&&g?g:void 0)}function k(b){var c=b.source,d=b.suggestResult,e=b.spatialReference,h=b.view,k=b.maxResults,f=b.sourceIndex;
b=d.text.trim();if(!b)return a.resolve();b=""+(!d.key&&c.prefix?c.prefix:"")+b+(!d.key&&c.suffix?c.suffix:"");var l={},z=c.locator,r=h&&h.scale,A=m(c,h);if(!z)return a.resolve();c.categories&&(l.categories=c.categories);e&&(z.outSpatialReference=e);e=n(h,c,r);return e&&(l.location=e.location,l.distance=e.distance),l.maxLocations=k,A&&(l.searchExtent=A),c.countryCode&&(l.countryCode=c.countryCode),d.key&&(l.magicKey=d.key),l.address={},l.address[c.singleLineFieldName||u]=b,c.outFields&&(l.outFields=
c.outFields),z.addressToLocations(l).then(function(a){return g(a,f)})}function l(a,b){return a.map(function(a){return{text:a.text,key:a.magicKey,sourceIndex:b}})}function g(a,b){return a.map(function(a){var c=a.extent,e=a.location,g=a.address;a=new d({geometry:e,attributes:a.attributes});e=e?e.x+","+e.y:null;return{extent:c,feature:a,name:g||e,sourceIndex:b}})}function n(a,b,c){var d=b.localSearchOptions;if(a&&d&&d.hasOwnProperty("distance")&&d.hasOwnProperty("minScale")&&(b=d.minScale,d=d.distance,
!b||c&&b>=c))return{location:a.get("extent.center"),distance:d}}Object.defineProperty(h,"__esModule",{value:!0});var u="Single Line Input";h.getResults=function(a){return a.location?c(a):k(a)};h.getSuggestions=function(b){var c=b.source,d=b.spatialReference,e=b.view,g=b.suggestTerm,h=b.maxSuggestions,f=b.sourceIndex;b={};var k=c.locator,u=e&&e.scale,r=m(c,e);if(!k)return a.resolve();c.categories&&(b.categories=c.categories);k.outSpatialReference=d;(d=n(e,c,u))&&(b.location=d.location,b.distance=d.distance);
g=g.trim();if(!g)return a.resolve();d=c.prefix;e=c.suffix;return b.text=""+(void 0===d?"":d)+g+(void 0===e?"":e),r&&(b.searchExtent=r),b.maxSuggestions=h,c.countryCode&&(b.countryCode=c.countryCode),k.suggestLocations(b).then(function(a){return l(a,f)})}})},"esri/widgets/Search/nls/Search":function(){define({root:{searchButtonTitle:"Search",clearButtonTitle:"Clear search",placeholder:"Find address or place",searchIn:"Search in",all:"All",allPlaceholder:"Find address or place",emptyValue:"Please enter a search term.",
untitledResult:"Untitled",untitledSource:"Untitled source",noResults:"No results",noResultsFound:"There were no results found for {value}.",showMoreResults:"Show more results",hideMoreResults:"Hide",searchResult:"Search result",moreResultsHeader:"More results",esriLocatorName:"Esri World Geocoder"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/widgets/Search/SearchResultRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget ./SearchViewModel dojo/i18n!./nls/Search".split(" "),
function(e,h,d,a,b,c,m,k,l){e=function(a){function b(b){b=a.call(this)||this;return b.showMoreResultsOpen=!1,b.viewModel=null,b}return d(b,a),b.prototype.render=function(){var a=this,b=this.get("viewModel.selectedResult"),c=this.get("viewModel.results"),b=b&&b.name||"",d=1<this._countResults(c),e=d&&c.map(function(b){return a._moreResultsList(b)}),c=d?m.tsx("div",{key:"esri-search-renderer__more-results-button","class":"esri-search-result-renderer__more-results-item"},m.tsx("a",{href:"#",bind:this,
onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?l.hideMoreResults:l.showMoreResults)):null,d=d?m.tsx("div",{key:"esri-search-renderer__more-results-container","class":"esri-search-result-renderer__more-results-list"},e):null,e=(g={},g["esri-search-result-renderer__more-results--show-more-results"]=this.showMoreResultsOpen,g);return m.tsx("div",{"class":"esri-search-result-renderer esri-widget"},m.tsx("div",{key:"esri-search-renderer__container","class":"esri-search-result-renderer__more-results",
classes:e},m.tsx("div",{key:"esri-search-renderer__result-name","class":"esri-search-result-renderer__more-results-item"},b),m.tsx("div",{key:"esri-search-renderer__more-results"},c,d)));var g},b.prototype._showMoreResultsClick=function(a){a.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(a=this.get("viewModel.view.popup"))&&a.reposition()},b.prototype._selectResultClick=function(a){a.preventDefault();a=a.currentTarget["data-result"];this.viewModel&&this.viewModel.select(a)},
b.prototype._moreResultsList=function(a){var b=this,c=a.results,d=c.length,e=!!d,g=this.get("viewModel.selectedResult"),d=1===d&&c[0]===g,g=this._getSourceName(a.source,a.sourceIndex),g=1<this.get("viewModel.results").length&&!d?m.tsx("div",{key:"esri-search-result-renderer__header-"+a.sourceIndex,"class":"esri-search-result-renderer__more-results-list-header"},g):null,c=e&&c.map(function(a,c){return b._moreResultsListItem(a,c)}),c=e&&!d?m.tsx("ul",{key:"esri-search-result-renderer__list-"+a.sourceIndex},
c):null;return e?m.tsx("div",{key:"esri-search-result-renderer__results-"+a.sourceIndex},g,c):null},b.prototype._moreResultsListItem=function(a,b){var c=this.get("viewModel.selectedResult");return a!==c?m.tsx("li",{key:"esri-search-result-renderer__list-item-"+b},m.tsx("a",{href:"#",tabindex:"0",bind:this,"data-result":a,onclick:this._selectResultClick,onkeydown:this._selectResultClick},a.name)):null},b.prototype._getSourceName=function(a,b){return b===k.ALL_INDEX?l.all:a.name},b.prototype._countResults=
function(a){return a?a.reduce(function(a,b){return a+b.results.length},0):0},b}(b.declared(c));return a([m.renderable(),b.property()],e.prototype,"showMoreResultsOpen",void 0),a([b.property(),m.renderable(["viewModel.results","viewModel.selectedResult"])],e.prototype,"viewModel",void 0),a([m.accessibleHandler()],e.prototype,"_showMoreResultsClick",null),a([m.accessibleHandler()],e.prototype,"_selectResultClick",null),e=a([b.subclass("esri.widgets.Search.SearchResultRenderer")],e)})},"esri/widgets/Home":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Home/HomeViewModel dojo/i18n!./Home/nls/Home".split(" "),
function(e,h,d,a,b,c,m,k,l){e=function(a){function b(b){b=a.call(this)||this;return b.view=null,b.viewModel=new k,b.viewpoint=null,b}return d(b,a),b.prototype.go=function(){return null},b.prototype.render=function(){var a=this.get("viewModel.state"),b=(d={},d["esri-disabled"]="disabled"===a,d),a=(e={},e["esri-icon-loading-indicator"]="going-home"===a,e["esri-rotating"]="going-home"===a,e);return c.tsx("div",{bind:this,"class":"esri-home esri-widget-button esri-widget",classes:b,role:"button",tabIndex:0,
onclick:this._go,onkeydown:this._go},c.tsx("span",{classes:a,"aria-hidden":"true","class":"esri-icon esri-icon-home",title:l.title}),c.tsx("span",{"class":"esri-icon-font-fallback-text"},l.button));var d,e},b.prototype._go=function(){this.go()},b}(b.declared(m));return a([b.aliasOf("viewModel.view"),c.renderable()],e.prototype,"view",void 0),a([b.property({type:k}),c.renderable("viewModel.state"),c.vmEvent("go")],e.prototype,"viewModel",void 0),a([b.aliasOf("viewModel.viewpoint")],e.prototype,"viewpoint",
void 0),a([b.aliasOf("viewModel.go")],e.prototype,"go",null),a([c.accessibleHandler()],e.prototype,"_go",null),e=a([b.subclass("esri.widgets.Home")],e)})},"esri/widgets/Home/HomeViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/promiseUtils ../../core/Accessor ../../core/Error ../../core/Evented".split(" "),function(e,h,d,a,b,c,m,k,l){e=function(a){function b(b){b=a.call(this,
b)||this;return b._initialViewpoint=null,b._goingHome=null,b.go=b.go.bind(b),b}return d(b,a),b.prototype.destroy=function(){this._stopGoingHome();this.view=null},Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?this._goingHome?"going-home":"ready":"disabled"},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"view",{set:function(a){var b=this;this._initialViewpoint=null;a&&a.then(function(){b._initialViewpoint=a.viewpoint.clone();b.notifyChange("viewpoint")});
this._set("view",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"viewpoint",{get:function(){return this._get("viewpoint")||this._initialViewpoint},set:function(a){this._set("viewpoint",a)},enumerable:!0,configurable:!0}),b.prototype.go=function(){var a=this;if(!this.get("view.ready"))return c.reject(new k("home:disabled-state","Cannot go when disabled."));this._stopGoingHome();this.emit("go");var b=this.view.goTo(this.viewpoint).always(function(){a.notifyChange("state");a._goingHome=
null});return this._goingHome=b,this.notifyChange("state"),b},b.prototype._stopGoingHome=function(){this._goingHome&&(this._goingHome.cancel(),this._goingHome=null)},b}(b.declared(m,l));return a([b.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"state",null),a([b.property()],e.prototype,"view",null),a([b.property()],e.prototype,"viewpoint",null),e=a([b.subclass("esri.widgets.Home.HomeViewModel")],e)})},"esri/widgets/Home/nls/Home":function(){define({root:{button:"Home",title:"Default map view"},
ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/widgets/Legend":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Widget ../core/HandleRegistry ../core/watchUtils ./Legend/LegendViewModel dojo/i18n!./Legend/nls/Legend ../core/lang ./support/widgetUtils dojox/gfx ../core/accessorSupport/decorators ./support/widget".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t){e=function(a){function b(b){b=a.call(this)||this;return b._handleRegistry=new c,b.activeLayerInfos=null,b.basemapLegendVisible=!1,b.groundLegendVisible=!1,b.layerInfos=null,b.view=null,b.viewModel=new k,b}return d(b,a),b.prototype.postInitialize=function(){var a=this;this.own(m.on(this,"activeLayerInfos","change",function(){return a._refreshActiveLayerInfos(a.activeLayerInfos)}))},b.prototype.destroy=function(){this._handleRegistry.destroy();this._handleRegistry=
null},b.prototype.render=function(){var a=this,b=this.activeLayerInfos,c=n.join("esri-legend","esri-widget"),b=b&&b.toArray().map(function(b){return a._renderLegendForLayer(b)}).filter(function(a){return!!a});return t.tsx("div",{"class":c},b&&b.length?b:t.tsx("div",{"class":"esri-legend__message"},l.noLegend))},b.prototype._refreshActiveLayerInfos=function(a){var b=this;this._handleRegistry.removeAll();a.forEach(function(a){return b._renderOnActiveLayerInfoChange(a)});this.scheduleRender()},b.prototype._renderOnActiveLayerInfoChange=
function(a){var b=this,c=m.init(a,"version",function(){return b.scheduleRender()});this._handleRegistry.add(c,"version_"+a.layer.uid);a.children.forEach(function(a){return b._renderOnActiveLayerInfoChange(a)})},b.prototype._renderLegendForLayer=function(a){var b=this;if(!a.ready)return null;var c=!!a.children.length,d="esri-legend__"+a.layer.uid+"-version-"+a.version;if(c){var e=a.children.map(function(a){return b._renderLegendForLayer(a)}).toArray(),c=(g={},g["esri-legend__group-layer"]=c,g);return t.tsx("div",
{key:d,"class":"esri-legend__service",classes:c},t.tsx("p",{"class":"esri-legend__service-label"},a.title),e)}if((c=a.legendElements)&&!c.length)return null;g=c.map(function(c){return b._renderLegendForElement(c,a.layer)}).filter(function(a){return!!a});if(!g.length)return null;c=(e={},e["esri-legend__group-layer-child"]=!!a.parent,e);return t.tsx("div",{key:d,"class":"esri-legend__service",classes:c},t.tsx("p",{"class":"esri-legend__service-label"},a.title),t.tsx("div",{"class":"esri-legend__layer"},
g));var g},b.prototype._renderLegendForElement=function(a,b,c){var d=this,e="color-ramp"===a.type,f="opacity-ramp"===a.type,g="size-ramp"===a.type,h=null;if("symbol-table"===a.type||g){var k=a.infos.map(function(c){return d._renderLegendForElementInfo(c,b,g,a.legendType)}).filter(function(a){return!!a});k.length&&(h=t.tsx("div",{"class":"esri-legend__layer-body"},k))}else(e||f)&&(h=this._renderLegendForRamp(a.infos,a.overlayColor,f));if(!h)return null;var k=a.title,l=null;"string"==typeof k?l=k:k&&
(e=this._getTitle(k,e||f),l=k.title?k.title+" ("+e+")":e);c=c?"esri-legend__layer-child-table":"esri-legend__layer-table";e=l?t.tsx("div",{"class":"esri-legend__layer-caption"},l):null;return t.tsx("div",{"class":c},e,h)},b.prototype._renderLegendForRamp=function(a,b,c){var d=a.length-1,e=null,e=2<d?25*d:50,f=document.createElement("div");f.className="esri-legend__color-ramp "+(c?"esri-legend__opacity-ramp":"");f.style.height=e+"px";c=u.createSurface(f,"100%",e);try{a.forEach(function(a,b){a.offset=
b/d}),c.createRect({x:0,y:0,width:"100%",height:e}).setFill({type:"linear",x1:0,y1:0,x2:0,y2:e,colors:a}).setStroke(null),b&&0<b.a&&c.createRect({x:0,y:0,width:"100%",height:e}).setFill(b).setStroke(null)}catch(A){c.clear(),c.destroy()}if(!c)return null;a=a.filter(function(a){return!!a.label}).map(function(a){return t.tsx("div",{"class":"esri-legend__ramp-label"},a.label)});e={height:e+"px"};return t.tsx("div",{"class":"esri-legend__layer-row"},t.tsx("div",{"class":"esri-legend__layer-cell esri-legend__layer-cell--symbols",
styles:{width:"24px"}},t.tsx("div",{"class":"esri-legend__ramps",bind:f,afterCreate:this._attachToNode})),t.tsx("div",{"class":"esri-legend__layer-cell esri-legend__layer-cell--info"},t.tsx("div",{"class":"esri-legend__ramp-labels",styles:e},a)))},b.prototype._renderLegendForElementInfo=function(a,b,c,d){if(a.type)return this._renderLegendForElement(a,b,!0);var e=null;d=this._isImageryStretchedLegend(b,d);if(a.symbol&&a.preview?e=t.tsx("div",{"class":"esri-legend__symbol",bind:a.preview,afterCreate:this._attachToNode}):
a.src&&(e=this._renderImage(a,b,d)),!e)return null;b=(f={},f["esri-legend__imagery-layer-info--stretched"]=d,f);c=(g={},g["esri-legend__imagery-layer-info--stretched"]=d,g["esri-legend__size-ramp"]=!d&&c,g);return t.tsx("div",{"class":"esri-legend__layer-row"},t.tsx("div",{"class":"esri-legend__layer-cell esri-legend__layer-cell--symbols",classes:c},e),t.tsx("div",{"class":"esri-legend__layer-cell esri-legend__layer-cell--info",classes:b},a.label||""));var f,g},b.prototype._attachToNode=function(a){a.appendChild(this)},
b.prototype._renderImage=function(a,b,c){var d=a.src,e=a.opacity;c=(f={},f["esri-legend__imagery-layer-image--stretched"]=c,f["esri-legend__symbol"]=!c,f);return t.tsx("img",{src:d,border:0,width:a.width,height:a.height,classes:c,styles:{opacity:""+(null!=e?e:b.opacity)}});var f},b.prototype._isImageryStretchedLegend=function(a,b){return!!(b&&"Stretched"===b&&10.3<=a.version&&"esri.layers.ImageryLayer"===a.declaredClass)},b.prototype._getTitle=function(a,b){var c=null;return b?c=a.ratioPercentTotal?
"showRatioPercentTotal":a.ratioPercent?"showRatioPercent":a.ratio?"showRatio":a.normField?"showNormField":a.field?"showField":null:!b&&(c=a.normField?"showNormField":a.normByPct?"showNormPct":a.field?"showField":null),c?g.substitute({field:a.field,normField:a.normField},l[c]):null},b}(r.declared(b));return a([r.aliasOf("viewModel.activeLayerInfos"),t.renderable()],e.prototype,"activeLayerInfos",void 0),a([r.aliasOf("viewModel.basemapLegendVisible"),t.renderable()],e.prototype,"basemapLegendVisible",
void 0),a([r.aliasOf("viewModel.groundLegendVisible"),t.renderable()],e.prototype,"groundLegendVisible",void 0),a([r.aliasOf("viewModel.layerInfos"),t.renderable()],e.prototype,"layerInfos",void 0),a([r.aliasOf("viewModel.view"),t.renderable()],e.prototype,"view",void 0),a([r.property(),t.renderable()],e.prototype,"viewModel",void 0),e=a([r.subclass("esri.widgets.Legend")],e)})},"esri/widgets/Legend/LegendViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/HandleRegistry ./support/ActiveLayerInfo ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l,g){var n=c.ofType(k),u=(function(){return function(){}}(),"esri.layers.CSVLayer esri.layers.FeatureLayer esri.layers.MapImageLayer esri.layers.TileLayer esri.layers.StreamLayer esri.layers.SceneLayer esri.layers.GeoRSSLayer esri.layers.GroupLayer esri.layers.ImageryLayer esri.layers.WMSLayer esri.layers.WMTSLayer".split(" ")),r=["view.basemapView.baseLayerViews","view.groundView.layerViews","view.layerViews","view.basemapView.referenceLayerViews"];e=function(a){function b(b){b=
a.call(this,b)||this;return b._handles=new m,b._layerViewByLayerId={},b._layerInfosByLayerViewId={},b._activeLayerInfosByLayerViewId={},b.activeLayerInfos=new n,b.basemapLegendVisible=!1,b.groundLegendVisible=!1,b.layerInfos=[],b.view=null,b}return d(b,a),b.prototype.initialize=function(){this._handles.add(l.init(this,"view",this._viewHandles),"view")},b.prototype.destroy=function(){this._destroyViewActiveLayerInfos();this._handles.destroy();this.view=this._handles=null},Object.defineProperty(b.prototype,
"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0}),b.prototype._viewHandles=function(){this._handles.remove("state");this.view&&this._handles.add(l.init(this,"state",this._stateHandles),"state")},b.prototype._stateHandles=function(){this._resetAll();"ready"===this.state&&this._watchPropertiesAndAllLayerViews()},b.prototype._resetAll=function(){this._handles.remove(["all-layer-views","legend-properties"]);this._destroyViewActiveLayerInfos();this.activeLayerInfos.removeAll()},
b.prototype._destroyViewActiveLayerInfos=function(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)},b.prototype._destroyViewActiveLayerInfo=function(a){this._handles.remove(a);delete this._activeLayerInfosByLayerViewId[a]},b.prototype._watchPropertiesAndAllLayerViews=function(){var a=this.view.allLayerViews;a.length&&this._refresh();this._handles.add(a.on("change",this._allLayerViewsChangeHandle.bind(this)),"all-layer-views");this._handles.add(l.watch(this,
"layerInfos, basemapLegendVisible, groundLegendVisible",this._propertiesChangeHandle.bind(this)),"legend-properties")},b.prototype._allLayerViewsChangeHandle=function(a){var b=this;a.removed.forEach(function(a){return b._destroyViewActiveLayerInfo(a.uid)});this._refresh()},b.prototype._propertiesChangeHandle=function(){this._destroyViewActiveLayerInfos();this._refresh()},b.prototype._refresh=function(){this._layerInfosByLayerViewId={};this.activeLayerInfos.removeAll();this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,
this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this);this._sortActiveLayerInfos(this.activeLayerInfos)},b.prototype._sortActiveLayerInfos=function(a){var b={};this.view.allLayerViews.forEach(function(a,c){return b[a.layer.uid]=c});a.sort(function(a,c){return(b[c.layer.uid]||0)-(b[a.layer.uid]||0)})},b.prototype._generateLayerViews=function(){var a=[];return r.filter(this._filterLayerViews,this).map(this.get,this).filter(function(a){return null!=a}).forEach(this._collectLayerViews("layerViews",
a)),a},b.prototype._filterLayerViews=function(a){var b=!this.groundLegendVisible&&"view.groundView.layerViews"===a;return!(!this.basemapLegendVisible&&("view.basemapView.baseLayerViews"===a||"view.basemapView.referenceLayerViews"===a))&&!b},b.prototype._collectLayerViews=function(a,b){var c=function(d){return d&&d.forEach(function(d){b.push(d);c(d[a])}),b};return c},b.prototype._filterLayerViewsByLayerInfos=function(a){var b=this,c=this.layerInfos;return c&&c.length?c.some(function(c){return b._hasLayerInfo(c,
a)}):!0},b.prototype._hasLayerInfo=function(a,b){var c=this._isLayerUIDMatching(a.layer,b.layer.uid);return c&&(this._layerInfosByLayerViewId[b.uid]=a),c},b.prototype._isLayerUIDMatching=function(a,b){return a&&(a.uid===b||this._hasLayerUID(a.layers,b))},b.prototype._hasLayerUID=function(a,b){var c=this;return a&&a.some(function(a){return c._isLayerUIDMatching(a,b)})},b.prototype._isLayerViewSupported=function(a){return-1<u.indexOf(a.layer.declaredClass)?(this._layerViewByLayerId[a.layer.uid]=a,!0):
!1},b.prototype._generateActiveLayerInfo=function(a){var b=this;return this._isLayerActive(a)?void this._buildActiveLayerInfo(a):(this._handles.remove(a.uid),void this._handles.add(l.watch(a,"suspended, layer.legendEnabled",function(){return b._layerActiveHandle(a)}),a.uid))},b.prototype._layerActiveHandle=function(a){this._isLayerActive(a)&&(this._handles.remove(a.uid),this._buildActiveLayerInfo(a))},b.prototype._isLayerActive=function(a){return!a.suspended&&a.get("layer.legendEnabled")},b.prototype._buildActiveLayerInfo=
function(a){var b=this,c=a.layer,d=a.uid,e=this._layerInfosByLayerViewId[d],g=this._activeLayerInfosByLayerViewId[d];g||(g=new k({layer:c,title:e&&void 0!==e.title?e.title:c.title}),this._activeLayerInfosByLayerViewId[d]=g);g.parent||(e=(e=c.parent)&&this._layerViewByLayerId[e.uid],g.parent=e&&this._activeLayerInfosByLayerViewId[e.uid]);if(!this._handles.has(d)){var e=l.watch(c,"title",function(c){return b._titleHandle(c,g,a)}),h=l.watch(c,"legendEnabled",function(c){return b._legendEnabledHandle(c,
g,a)}),c=l.watch(c,"renderer, opacity",function(){return b._constructLegendElements(g,a)}),m=l.watch(a,"suspended",function(c){return b._suspendedHandle(c,g,a)}),n=l.whenTrue(this.view,"stationary",function(){return b._scaleHandle(g,a)});this._handles.add([e,h,c,m,n],d)}this._addActiveLayerInfo(g,a)},b.prototype._titleHandle=function(a,b,c){b.title=a;this._constructLegendElements(b,c)},b.prototype._legendEnabledHandle=function(a,b,c){a?this._addActiveLayerInfo(b,c):this._removeActiveLayerInfo(b)},
b.prototype._suspendedHandle=function(a,b,c){a?this._removeActiveLayerInfo(b):this._addActiveLayerInfo(b,c)},b.prototype._scaleHandle=function(a,b){a.scale!==this.view.scale&&this._constructLegendElements(a,b)},b.prototype._addActiveLayerInfo=function(a,b){this._isLayerActive(b)&&-1===this.activeLayerInfos.indexOf(a)&&((b=a.parent)?-1===b.children.indexOf(a)&&(b.children.push(a),this._sortActiveLayerInfos(b.children)):(this.activeLayerInfos.add(a),this._sortActiveLayerInfos(this.activeLayerInfos)))},
b.prototype._removeActiveLayerInfo=function(a){var b=a.parent;b?(a=b.children.indexOf(a),-1!==a&&b.children.splice(a,1)):this.activeLayerInfos.remove(a)},b.prototype._constructLegendElements=function(a,b){b=b.layer;a.scale=this.view.scale;b.featureCollections?a.buildLegendElementsForFeatureCollections(b.featureCollections):b.renderer?a.buildLegendElementsForRenderer():b.url&&a.buildLegendElementsForTools()},b}(g.declared(b));return a([g.property({type:n})],e.prototype,"activeLayerInfos",void 0),a([g.property()],
e.prototype,"basemapLegendVisible",void 0),a([g.property()],e.prototype,"groundLegendVisible",void 0),a([g.property()],e.prototype,"layerInfos",void 0),a([g.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"state",null),a([g.property()],e.prototype,"view",void 0),e=a([g.subclass("esri.widgets.Legend.LegendViewModel")],e)})},"esri/widgets/Legend/support/ActiveLayerInfo":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper dojo/_base/lang dojo/io-query ../../../core/Accessor ../../../core/Collection ../../../core/HandleRegistry ../../../core/Logger ../../../core/promiseUtils ../../../core/watchUtils ../../../layers/WMSLayer ../../../layers/WMTSLayer ../../../layers/MapImageLayer ../../../layers/support/ExportImageParameters ../../../renderers/SimpleRenderer ../../../renderers/ClassBreaksRenderer ../../../renderers/UniqueValueRenderer ../../../Color ../../../request ./colorRampUtils ./sizeRampUtils ../../../core/arrayUtils ../../../core/accessorSupport/decorators ../../../renderers/support/jsonUtils ../../../symbols/support/symbolPreview".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y,A,B,D,F,C){function E(a){return a.isInstanceOf(v)||a.isInstanceOf(x)||a.isInstanceOf(f)}var G=g.getLogger("esri.widgets.Legend.support.ActiveLayerInfo");e=function(a){function e(b){b=a.call(this,b)||this;return b._handles=new l,b._hasColorRamp=!1,b._hasOpacityRamp=!1,b._hasSizeRamp=!1,b._legendResponse={},b.children=new k,b.layer=null,b.legendElements=[],b.parent=null,b.scale=null,b.title=null,b}return d(e,a),e.prototype.initialize=function(){var a=
this,b=function(){return a.notifyChange("ready")};this._handles.add([u.on(this,"children","change",function(c){var d=c.removed,e=a._handles;c.added.map(function(a){var c="activeLayerInfo-ready-watcher-"+a.layer.uid;e.add(u.init(a,"ready",b),c)});d.forEach(function(a){return e.remove(a.layer.uid)});b()})])},e.prototype.destroy=function(){this._handles.destroy();this._legendResponse=this._handles=null},Object.defineProperty(e.prototype,"ready",{get:function(){return null===this.layer?!0:0<this.children.length?
this._isGroupActive():0<this.legendElements.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._get("version")+1},enumerable:!0,configurable:!0}),e.prototype.buildLegendElementsForFeatureCollections=function(a){var b=this;this.legendElements=[];a.forEach(function(a){if(a.featureSet.features.length){var c=a.layerDefinition,c=(c=c&&c.drawingInfo)&&F.fromJSON(c.renderer);if(!c)return void G.warn("drawingInfo not available!");b._getRendererLegendElements(c,
a.name).then(function(a){a&&a.length&&Array.prototype.push.apply(b.legendElements,a);b.notifyChange("ready")}).otherwise(function(a){G.warn("error while building legend for layer!",a)})}})},e.prototype.buildLegendElementsForRenderer=function(){var a=this;this._getRendererLegendElements(this.layer.renderer).then(function(b){a.legendElements=b;a.notifyChange("ready")}).otherwise(function(a){G.warn("error while building legend for layer!",a)})},e.prototype.buildLegendElementsForTools=function(){var a=
this,b=this.layer;b.isInstanceOf(t)?this._constructLegendElementsForWMTSlayer():b.isInstanceOf(r)?this._constructLegendElementsForWMSSublayers():b.isInstanceOf(w)?this._constructLegendElementsForSublayers():(this._handles.remove("imageryLayers-watcher"),this._getLegendLayers().then(function(c){a.legendElements=[];c.forEach(function(c){if("esri.layers.ImageryLayer"===a.layer.declaredClass){var d=b.watch("renderingRule, bandIds",function(){a._legendResponse["default"]=null;a.buildLegendElementsForTools()});
a._handles.add(d,"imageryLayers-watcher")}(c=a._generateSymbolTableElementForLegendLayer(c))&&c.infos.length&&a.legendElements.push(c);a.notifyChange("ready")});a.notifyChange("ready")}).otherwise(function(a){G.warn("Request to server for legend has failed!",a)}))},e.prototype._isGroupActive=function(){var a=this.children;return a.length?a.some(function(a){return a.ready}):!1},e.prototype._constructLegendElementsForWMTSlayer=function(){this.legendElements=[];this._handles.remove("wmts-activeLayer-watcher");
var a=this.layer,b=a.activeLayer;if(this._handles.add(u.watch(this.layer,"activeLayer",this._constructLegendElementsForWMTSlayer.bind(this)),"wmts-activeLayer-watcher"),b.styleId&&b.styles){var c=null;b.styles.some(function(a){return b.styleId===a.id?(c=a.legendUrl,!0):void 0});c&&(this.legendElements=[{type:"symbol-table",title:b.title,infos:[{src:c,opacity:a.opacity}]}])}this.notifyChange("ready")},e.prototype._constructLegendElementsForWMSSublayers=function(){this.legendElements=[];this._handles.remove("wms-sublayers-watcher");
var a=this.layer,c=null;(a.customParameters||a.customLayerParameters)&&(c=b.clone(a.customParameters||{}),b.mixin(c,a.customLayerParameters||{}));this._handles.add(u.watch(this.layer,"sublayers",this._constructLegendElementsForWMSSublayers.bind(this)),"wms-sublayers-watcher");this.legendElements=this._generateLegendElementsForWMSSublayers(a.sublayers,c);this.notifyChange("ready")},e.prototype._generateLegendElementsForWMSSublayers=function(a,b){var c=this,d=[];return this._handles.add(a.on("change",
this._constructLegendElementsForWMSSublayers.bind(this)),"wms-sublayers-watcher"),a.forEach(function(a){var e=a.watch("title, visible, legendEnabled",function(){return c._constructLegendElementsForWMSSublayers()});(c._handles.add(e,"wms-sublayers-watcher"),a.visible&&a.legendEnabled)&&(a=c._generateSymbolTableElementForWMSSublayer(a,b))&&a.infos.length&&d.unshift(a)}),d},e.prototype._generateSymbolTableElementForWMSSublayer=function(a,b){return!a.legendUrl&&a.sublayers?(b=this._generateLegendElementsForWMSSublayers(a.sublayers,
b).filter(function(a){return a}),{type:"symbol-table",title:a.title,infos:b}):this._generateSymbolTableElementForLegendUrl(a,b)},e.prototype._generateSymbolTableElementForLegendUrl=function(a,b){var d=a.legendUrl;if(d){var e={type:"symbol-table",title:a.title||a.name||a.id&&a.id+"",infos:[]};return b&&(d+="?"+c.objectToQuery(b)),e.infos.push({src:d,opacity:a.layer&&a.layer.opacity}),e}},e.prototype._getLegendLayers=function(a){var b=this,c=(a=a&&a.hasDynamicLayers?a.dynamicLayers:null)||"default",
d=this._legendResponse&&this._legendResponse[c];return d?n.resolve(d):this._legendRequest(a).then(function(a){a=a.layers;return b._legendResponse[c]=a,a})},e.prototype._legendRequest=function(a){var b=this.layer;a={f:"json",dynamicLayers:a};"esri.layers.ImageryLayer"===b.declaredClass&&(b.renderingRule&&(a.renderingRule=JSON.stringify(b.renderingRule.toJSON())),b.bandIds&&(a.bandIds=b.bandIds.join()));var c=b.url.replace(/(\/)+$/,"");if(10.01<=b.version){var d=c.indexOf("?");-1<d?c=c.substring(0,
d)+"/legend"+c.substring(d):c+="/legend";b.token&&(c+="?token\x3d"+b.token)}else b=c.toLowerCase().indexOf("/rest/"),b=c.substring(0,b)+c.substring(b+5,c.length),c="https://utility.arcgis.com/sharing/tools/legend?soapUrl\x3d"+encodeURI(b)+"\x26returnbytes\x3dtrue";return z(c,{query:a,callbackParamName:"callback"}).then(function(a){return a.data})},e.prototype._constructLegendElementsForSublayers=function(){var a=this;this.legendElements=[];this._handles.remove("sublayers-watcher");var b=this.layer,
c=new q({layer:b});this._getLegendLayers(c).then(function(c){var d={};c.forEach(function(a){d[a.layerId]=a});a._handles.add(u.watch(b,"sublayers",a._constructLegendElementsForSublayers.bind(a)),"sublayers-watcher");a.legendElements=a._generateLegendElementsForSublayers(b.sublayers,d,b.opacity);a.notifyChange("ready")}).otherwise(function(a){G.warn("Request to server for legend has failed!",a)}).then(function(){return c.destroy()});this.notifyChange("ready")},e.prototype._generateLegendElementsForSublayers=
function(a,b,c){var d=this,e=[];return this._handles.add(a.on("change",this._constructLegendElementsForSublayers.bind(this)),"sublayers-watcher"),a.forEach(function(a){var f=a.watch("renderer, opacity, title, visible",function(){return d._constructLegendElementsForSublayers()});if(d._handles.add(f,"sublayers-watcher"),a.visible&&a.legendEnabled)f=a&&null!=a.opacity?a.opacity:null,(a=d._generateSymbolTableElementForSublayer(a,b,null!=f?f*c:c))&&a.infos.length&&e.unshift(a)}),e},e.prototype._generateSymbolTableElementForSublayer=
function(a,b,c){var d=b[a.id];return!d&&a.sublayers?(b=this._generateLegendElementsForSublayers(a.sublayers,b,c).filter(function(a){return a}),{type:"symbol-table",title:a.title,infos:b}):this._generateSymbolTableElementForLegendLayer(d,a,c)},e.prototype._generateSymbolTableElementForLegendLayer=function(a,b,c){var d=this;if(a){var e=b&&b.renderer,f=a.layerName;e&&(e=b&&b.title?b.title:this._getRendererTitle(e,b))&&(f&&(e.title=f),f=e);f={type:"symbol-table",title:f,infos:[]};if(a.legendType&&(f.legendType=
a.legendType),a.legend&&this._isLegendLayerInScale(a,b))b=b?this._sanitizeLegendForSublayer(a.legend.slice(),b):a.legend,f.infos=b.map(function(b){var e=b.url;if(b.imageData&&0<b.imageData.length)e="data:image/png;base64,"+b.imageData;else{if(0===e.indexOf("http"))return null;var e=d.layer.url+"/"+a.layerId+"/images/"+e,f=d.layer.token;f&&(e+="?token\x3d"+f)}return{label:b.label,src:e,opacity:c,width:b.width,height:b.height}}).filter(function(a){return!!a});return f.infos.length?f:null}},e.prototype._isLegendLayerInScale=
function(a,b){b=b||this.layer;var c=null,d=null,e=!0;return!b.minScale&&0!==b.minScale||!b.maxScale&&0!==b.maxScale?(0===a.minScale&&b.tileInfo&&(c=b.tileInfo.lods[0].scale),0===a.maxScale&&b.tileInfo&&(d=b.tileInfo.lods[b.tileInfo.lods.length-1].scale)):(c=Math.min(b.minScale,a.minScale)||b.minScale||a.minScale,d=Math.max(b.maxScale,a.maxScale)),(0<c&&c<this.scale||d>this.scale)&&(e=!1),e},e.prototype._sanitizeLegendForSublayer=function(a,b){if(10.1>this.layer.version||0===a.length)return a;b=b.renderer;
var c=null,d=null;return a.some(function(a){return a.values})&&a.some(function(a,b){return a.values||(c=b,d=a,d.label||(d.label="others")),null!=d}),b?"uniqueValue"===b.type?d&&(a.splice(c,1),a.push(d)):"classBreaks"===b.type&&(d&&a.splice(c,1),a.reverse(),d&&a.push(d)):d&&(a.splice(c,1),a.push(d)),a},e.prototype._getRendererLegendElements=function(a,b){var c=this;return this._loadRenderer(a).then(function(a){c._hasColorRamp=!1;c._hasOpacityRamp=!1;c._hasSizeRamp=!1;var d=c._getVisualVariableLegendElements(a)||
[],e={type:"symbol-table",title:b||c._getRendererTitle(a),infos:[]},g=null;a.isInstanceOf(f)?a.uniqueValueInfos.forEach(function(a){a.symbol&&e.infos.push({label:a.label||a.value,value:a.value,symbol:a.symbol})}):a.isInstanceOf(x)?(g=c._isUnclassedRenderer(a))&&c._hasSizeRamp||(a.classBreakInfos.forEach(function(a){a.symbol&&e.infos.unshift({label:a.label||(g?null:a.minValue+" - "+a.maxValue),value:[a.minValue,a.maxValue],symbol:a.symbol})}),!g||(e.title=null)):a.isInstanceOf(v)&&a.symbol&&!c._hasSizeRamp&&
e.infos.push({label:a.label,symbol:a.symbol});var h=!1;if(E(a)){var k=a.defaultLabel,l=a.defaultSymbol;l&&!g&&(e.infos.push({label:k||"others",symbol:l}),h=!0)}h||a.isInstanceOf(v)||g&&!c._hasColorRamp&&!c._hasSizeRamp&&!c._hasOpacityRamp||d.push({type:"symbol-table",infos:[{label:a.defaultLabel,symbol:a.defaultSymbol}]});e.infos.length&&d.unshift(e);var m=c._getSymbolConfig(a.visualVariables),h=d.reduce(function(a,b){return a.concat(b.infos)},[]).filter(function(a){return!!a.symbol}).map(function(a){return c._getSymbolPreview(a,
m)});return a=null,n.eachAlways(h).then(function(){return d})})},e.prototype._getSymbolConfig=function(a){var b=!1,c=!1;if(a)for(var d=0;d<a.length&&(!b||!c);d++){var e=a[d];"size"===e.type&&("height"===e.axis&&(b=!0),"width-and-depth"===e.axis&&(c=!0))}return b&&c?"tall":null},e.prototype._getSymbolPreview=function(a,b){return C.renderPreviewHTML(a.symbol,{size:a.size,opacity:this.layer.opacity,symbolConfig:b}).then(function(b){return a.preview=b,a}).otherwise(function(){return a.preview=null,a})},
e.prototype._loadRenderer=function(a){var b=this,c=[];if(!E(a))return G.warn("Renderer not supported!"),n.reject();a=a.clone();var d=this._getMedianColor(a),e=this.layer.opacity;(a.isInstanceOf(x)||a.isInstanceOf(f))&&c.concat((a.classBreakInfos||a.uniqueValueInfos).map(function(a){return b._fetchSymbol(a.symbol,d,e).then(function(b){a.symbol=b}).otherwise(function(){a.symbol=null})}));return c.push(this._fetchSymbol(a.symbol||a.defaultSymbol,a.defaultSymbol?null:d,e).then(function(c){b._applySymbolToRenderer(a,
c,a.isInstanceOf(v))}).otherwise(function(){b._applySymbolToRenderer(a,null,a.isInstanceOf(v))})),n.eachAlways(c).then(function(){return a})},e.prototype._applySymbolToRenderer=function(a,b,c){c?a.symbol=b:a.defaultSymbol=b},e.prototype._getMedianColor=function(a){if(!a.visualVariables)return null;var b=B.find(a.visualVariables,function(a){return"color"===a.type});if(!b)return null;var c=null,d=null;if(b.colors)c=b.minDataValue,d=b.maxDataValue;else if(b.stops){if(1===b.stops.length)return b.stops[0].color;
c=b.stops[0].value;d=b.stops[b.stops.length-1].value}if(null!=c&&null!=d)return a.getColor(c+(d-c)/2,{colorInfo:b})},e.prototype._fetchSymbol=function(a,b,c){var d=this;return a?"web-style-symbol"===a.type?a.fetchSymbol().then(function(a){return d._getAppliedCloneSymbol(a,b,c)}).otherwise(function(){return G.warn("Fetching web-style-symbol failed!"),n.reject()}):n.resolve(this._getAppliedCloneSymbol(a,b,c)):n.reject()},e.prototype._getAppliedCloneSymbol=function(a,b,c){if(!a)return a;a=a.clone();
var d=-1<a.type.indexOf("3d");b=b&&b.toRgba();d?this._applyColorTo3dSymbol(a,b,c):(a.color&&(a.color=this._getOpacityAppliedColor(b||a.color.toRgba(),c)),(b=a.outline)&&b.color&&(b.color=this._getOpacityAppliedColor(b.color.toRgba(),c)));return a},e.prototype._applyColorTo3dSymbol=function(a,b,c){var d=this;a.symbolLayers.forEach(function(a){a&&(b&&(a.material||(a.material={}),a.material.color=new p(b)),null!=c&&(a.material&&a.material.color&&(a.material.color=d._getOpacityAppliedColor(a.material.color.toRgba(),
c)),a.outline&&a.outline.color&&(a.outline.color=d._getOpacityAppliedColor(a.outline.color.toRgba(),c))))})},e.prototype._getOpacityAppliedColor=function(a,b){return a[3]*=b,a},e.prototype._getVisualVariableLegendElements=function(a){var b=this,c=a.visualVariables,d=[],e=[],f=[],g=this.layer.opacity;if(!c)return null;c.forEach(function(a){"color"===a.type?d.push(a):"size"===a.type?e.push(a):"opacity"===a.type&&f.push(a)});var h,k,c=d.concat(e,f);0===d.length&&a.isInstanceOf(x)&&a.classBreakInfos&&
1===a.classBreakInfos.length&&(h=(h=a.classBreakInfos[0])&&h.symbol);if(0===d.length&&a.isInstanceOf(v)&&(h=a.symbol),h)-1<h.type.indexOf("3d")?(h=h.symbolLayers.getItemAt(0),h.get("material.color")&&(k=h.material.color)):h.url||(k=h.color),k&&(k=k.toRgba());return c.map(function(c){if(!c.legendOptions||!1!==c.legendOptions.showLegend){var d=b._getRampTitle(c,b.layer),e=y.getRampBorderColor(a),f=y.getRampOverlayColor(g),h=null;return"color"===c.type?(h={type:"color-ramp",title:d,borderColor:e,overlayColor:f,
infos:y.getRampStops(a,c)},b._hasColorRamp||(b._hasColorRamp=!(null==h.infos||!h.infos.length))):"size"===c.type?(h={type:"size-ramp",title:d,infos:A.getRampStops(a,c,b._getMedianColor(a),b.scale)},b._hasSizeRamp||(b._hasSizeRamp=!(null==h.infos||!h.infos.length))):"opacity"===c.type&&(h={type:"opacity-ramp",title:d,borderColor:e,overlayColor:f,infos:y.getRampStops(a,c,k)},b._hasOpacityRamp||(b._hasOpacityRamp=!(null==h.infos||!h.infos.length))),h.infos&&h}}).filter(function(a){return!!a})},e.prototype._getRampTitle=
function(a,c){var d=a.field,e=a.normalizationField,f=!1,g=!1,h=!1,k=null;if(d=b.isFunction(d)?null:d,e=b.isFunction(e)?null:e,a.legendOptions&&a.legendOptions.title)k=a.legendOptions.title;else if(a.valueExpressionTitle)k=a.valueExpressionTitle;else{if(c.renderer.authoringInfo&&c.renderer.authoringInfo.visualVariables)for(a=c.renderer.authoringInfo.visualVariables,k=0;k<a.length;k++){var l=a[k];if("colorInfo"===l.type){if("ratio"===l.style){f=!0;break}if("percent"===l.style){g=!0;break}if("percentTotal"===
l.style){h=!0;break}}}k={field:d&&this._getFieldAlias(d,c),normField:e&&this._getFieldAlias(e,c),ratio:f,ratioPercent:g,ratioPercentTotal:h}}return k},e.prototype._getRendererTitle=function(a,c){if(a.legendOptions&&a.legendOptions.title)return a.legendOptions.title;if(a.valueExpressionTitle)return a.valueExpressionTitle;var d=this.layer,e=a.field,f=null,g=null;a instanceof x&&(f=a.normalizationField,g="percent-of-total"===a.normalizationType);e=b.isFunction(e)?null:e;f=b.isFunction(f)?null:f;a=null;
return(e||f)&&(a={field:c?e:e&&this._getFieldAlias(e,d),normField:c?f:f&&this._getFieldAlias(f,d),normByPct:g}),a},e.prototype._getFieldAlias=function(a,c){var d=c.popupTemplate,d=d&&d.fieldInfos;c=b.isFunction(a)?null:c.getField&&c.getField(a);var e=null;d&&d.some(function(b){return a===b.fieldName?(e=b,!0):void 0});var d=e||c,f=null;return d&&(f=e&&e.label||c&&c.alias||d.name||d.fieldName),f},e.prototype._isUnclassedRenderer=function(a){var b=a.visualVariables,c=!1;return a.isInstanceOf(x)&&a.classBreakInfos&&
1===a.classBreakInfos.length&&b&&(c=a.field?b.some(function(b){return!(!b||a.field!==b.field||(a.normalizationField||b.normalizationField)&&a.normalizationField!==b.normalizationField)}):!!b.length),c},e}(D.declared(m));return a([D.property()],e.prototype,"children",void 0),a([D.property()],e.prototype,"layer",void 0),a([D.property()],e.prototype,"legendElements",void 0),a([D.property()],e.prototype,"parent",void 0),a([D.property({readOnly:!0})],e.prototype,"ready",null),a([D.property()],e.prototype,
"scale",void 0),a([D.property()],e.prototype,"title",void 0),a([D.property({dependsOn:["ready"],readOnly:!0,value:0})],e.prototype,"version",null),e=a([D.subclass("esri.widgets.Legend.support.ActiveLayerInfo")],e)})},"esri/layers/WMSLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators dojo/_base/lang ../core/Collection ../core/HandleRegistry ../core/promiseUtils ../core/accessorSupport/write ../core/CollectionFlattener ../geometry/Extent ../geometry/SpatialReference ../request ../Graphic ../PopupTemplate ./Layer ./mixins/OperationalLayer ./mixins/PortalLayer ./support/wmsUtils ./support/WMSSublayer ./support/ExportWMSImageParameters".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y){function A(a,b,c){var d=[],e=new Map;return a.forEach(function(a){var f=new z;(f.read(a,b),c&&-1===c.indexOf(f.name)&&(f.visible=!1),e[f.id]=f,null!=a.parentLayerId&&-1!==a.parentLayerId)?(a=e[a.parentLayerId],a.sublayers||(a.sublayers=[]),a.sublayers.unshift(f)):d.unshift(f)}),d}e=function(a){function b(b,c){var d=a.call(this)||this;return d._sublayersHandles=new k,d.allSublayers=new n({root:d,rootCollectionNames:["sublayers"],getChildrenFunction:function(a){return a.sublayers}}),
d.customParameters=null,d.customLayerParameters=null,d.copyright=null,d.description=null,d.fullExtent=null,d.fullExtents=null,d.featureInfoFormat=null,d.featureInfoUrl=null,d.imageFormat=null,d.imageMaxHeight=2048,d.imageMaxWidth=2048,d.imageTransparency=!0,d.legendEnabled=!0,d.mapUrl=null,d.maxScale=0,d.minScale=0,d.operationalLayerType="WMS",d.spatialReference=null,d.spatialReferences=null,d.sublayers=null,d.type="wms",d.version=null,d.watch("sublayers",function(a,b){b&&(b.forEach(function(a){a.layer=
null}),d._sublayersHandles.removeAll(),d._sublayersHandles=null);a&&(a.forEach(function(a){a.parent=d;a.layer=d}),d._sublayersHandles||(d._sublayersHandles=new k),d._sublayersHandles.add([a.on("after-add",function(a){a=a.item;a.parent=d;a.layer=d}),a.on("after-remove",function(a){a=a.item;a.parent=null;a.layer=null})]))},!0),d}return d(b,a),b.prototype.normalizeCtorArgs=function(a,b){return"string"==typeof a?c.mixin({url:a},b):a},b.prototype.load=function(){var a=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]}).then(function(){return a._fetchService()})),
this},b.prototype.readFullExtentFromItemOrWebMap=function(a,b,c){a=b.extent;b=b.spatialReferences;return new u(b&&0<b.length?{xmin:a[0][0],ymin:a[0][1],xmax:a[1][0],ymax:a[1][1],spatialReference:b[0]}:{xmin:a[0][0],ymin:a[0][1],xmax:a[1][0],ymax:a[1][1]})},b.prototype.writeFullExtent=function(a,b,c,d){b.extent=[[a.xmin,a.ymin],[a.xmax,a.ymax]]},b.prototype.readSpatialReferenceFromItemOrDocument=function(a,b,c){return new r(b.spatialReferences[0])},b.prototype.writeSpatialReferences=function(a,b,c,
d){var e=this.spatialReference&&this.spatialReference.wkid;a&&e?(b.spatialReferences=a.filter(function(a){return a!==e}),b.spatialReferences.unshift(e)):b.spatialReferences=a},b.prototype.readSublayersFromItemOrWebMap=function(a,b,c){return A(b.layers,c,b.visibleLayers)},b.prototype.readSublayers=function(a,b,c){return A(b.layers,c)},b.prototype.writeSublayers=function(a,b,d,e){b.layers=[];b.allLayers=[];var f=new Map;a=a.flatten(function(a){return(a=a.sublayers)&&a.toArray()}).toArray();a.forEach(function(a){"number"==
typeof a.parent.id&&(f.has(a.parent.id)?f.get(a.parent.id).push(a.id):f.set(a.parent.id,[a.id]))});a.forEach(function(a){var d=c.mixin({sublayer:a},e),g=a.write({parentLayerId:"number"==typeof a.parent.id?a.parent.id:-1},d);if(f.has(a.id)&&(g.sublayerIds=f.get(a.id)),b.allLayers.push(g),!a.sublayers&&a.name)a=a.write({},d),delete a.id,b.layers.push(a)});b.visibleLayers=a.filter(function(a){return a.visible&&!a.sublayers}).map(function(a){return a.name})},b.prototype.createExportImageParameters=function(a){this._exportWMSImageParameters=
new y({layer:this,extent:a});return this._exportWMSImageParameters.toJSON()},b.prototype.fetchImage=function(a,b,d,e){var f=this.parsedUrl.path;a=c.mixin({width:b,height:d},this.createExportImageParameters(a));return a=this._mixCustomParameters(a),t(f,{query:a,responseType:"image",allowImageDataAccess:e&&e.allowImageDataAccess||!1}).then(function(a){return a.data})},b.prototype.fetchFeatureInfo=function(a,b,d,e,f){var g=this,h=p.getPopupLayers(this._exportWMSImageParameters.visibleSublayers);if(!this.featureInfoUrl||
!h)return null;b=c.mixin({query_layers:h,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:b,height:d},"1.3.0"===this.version?{I:e,J:f}:{x:e,y:f});var k=c.mixin(this.createExportImageParameters(a),b);return k=this._mixCustomParameters(k),t(this.featureInfoUrl,{query:k,responseType:"text/html"}).then(function(a){var b=g.featureInfoUrl,b=b+(-1===b.indexOf("?")?"?":""),c;for(c in k)b+="?"===b.substring(b.length-1,b.length)?"":"\x26",b+=c+"\x3d"+k[c];return new w({popupTemplate:new q({title:g.title,
content:'\x3ciframe src\x3d"'+b+'" frameborder\x3d"0" marginwidth\x3d"0" marginheight\x3d"0"\x3e'+a.data+"\x3cframe\x3e"})})})},b.prototype.findSublayerById=function(a){return this.allSublayers.find(function(b){return b.id===a})},b.prototype._fetchService=function(){var a=this;return l.resolve().then(function(){return a.resourceInfo?{ssl:!1,data:a.resourceInfo}:(a.parsedUrl.query&&a.parsedUrl.query.service&&(a.parsedUrl.query.SERVICE=a.parsedUrl.query.service,delete a.parsedUrl.query),a.parsedUrl.query&&
a.parsedUrl.query.request&&(a.parsedUrl.query.REQUEST=a.parsedUrl.query.service,delete a.parsedUrl.query.request),t(a.parsedUrl.path,{query:c.mixin({SERVICE:"WMS",REQUEST:"GetCapabilities"},a.parsedUrl.query,a.customParameters),responseType:"xml"}))}).then(function(b){b.ssl&&(a.url=a.url.replace(/^http:/i,"https:"));a.resourceInfo||(b.data=p.parseCapabilities(b.data));b.data&&a.read(b.data,{origin:"service"})})},b.prototype._mixCustomParameters=function(a){if(!this.customLayerParameters&&!this.customParameters)return a;
var b=c.mixin({},this.customParameters,this.customLayerParameters),d;for(d in b)a[d.toLowerCase()]=b[d];return a},b}(b.declared(v,x,f));return a([b.shared({"2d":"../views/2d/layers/WMSLayerView2D"})],e.prototype,"viewModulePaths",void 0),a([b.property({readOnly:!0})],e.prototype,"allSublayers",void 0),a([b.property({json:{read:{source:"customParameters"}}})],e.prototype,"customParameters",void 0),a([b.property({json:{read:{source:"customLayerParameters"}}})],e.prototype,"customLayerParameters",void 0),
a([b.property()],e.prototype,"copyright",void 0),a([b.property()],e.prototype,"description",void 0),a([b.property({json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),a([b.reader(["web-map","portal-item"],"fullExtent",["extent"])],e.prototype,"readFullExtentFromItemOrWebMap",null),a([b.writer(["web-map","portal-item"],"fullExtent")],e.prototype,"writeFullExtent",null),a([b.property()],e.prototype,"fullExtents",void 0),a([b.property({json:{write:{ignoreOrigin:!0}}})],
e.prototype,"featureInfoFormat",void 0),a([b.property({json:{write:{ignoreOrigin:!0}}})],e.prototype,"featureInfoUrl",void 0),a([b.property({json:{read:{source:"supportedImageFormatTypes",reader:function(a,b){return(a=b.supportedImageFormatTypes)&&-1<a.indexOf("image/png")?"image/png":a&&a[0]}}}})],e.prototype,"imageFormat",void 0),a([b.property({json:{read:{source:"maxImageHeight"},write:{target:"maxHeight"}}})],e.prototype,"imageMaxHeight",void 0),a([b.property({json:{read:{source:"maxImageWidth"},
write:{target:"maxHeight"}}})],e.prototype,"imageMaxWidth",void 0),a([b.property()],e.prototype,"imageTransparency",void 0),a([b.property({type:Boolean,json:{read:{source:"showLegend"},write:{target:"showLegend"}}})],e.prototype,"legendEnabled",void 0),a([b.property({json:{write:{ignoreOrigin:!0}}})],e.prototype,"mapUrl",void 0),a([b.property({json:{write:{overridePolicy:function(a,b,c){return g.willPropertyWrite(this,"maxScale",{},c)?{ignoreOrigin:!0}:void 0}}}})],e.prototype,"maxScale",void 0),
a([b.property({json:{write:{overridePolicy:function(a,b,c){return g.willPropertyWrite(this,"minScale",{},c)?{ignoreOrigin:!0}:void 0}}}})],e.prototype,"minScale",void 0),a([b.property()],e.prototype,"operationalLayerType",void 0),a([b.property({json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],e.prototype,"spatialReference",void 0),a([b.reader(["web-map","portal-item"],"spatialReference",["spatialReferences"])],e.prototype,"readSpatialReferenceFromItemOrDocument",null),
a([b.property({json:{read:"spatialReferences",write:{ignoreOrigin:!0}}})],e.prototype,"spatialReferences",void 0),a([b.writer(["web-map","portal-item"],"spatialReferences")],e.prototype,"writeSpatialReferences",null),a([b.property({type:m.ofType(z)})],e.prototype,"sublayers",void 0),a([b.reader(["web-map","portal-item"],"sublayers",["layers","visibleLayers"])],e.prototype,"readSublayersFromItemOrWebMap",null),a([b.reader("service","sublayers",["layers"])],e.prototype,"readSublayers",null),a([b.writer(["web-map",
"portal-item"],"sublayers")],e.prototype,"writeSublayers",null),a([b.property({json:{read:!1},readOnly:!0,value:"wms"})],e.prototype,"type",void 0),a([b.property({json:{write:{ignoreOrigin:!0}}})],e.prototype,"version",void 0),e=a([b.subclass("esri.layers.WMSLayer")],e)})},"esri/layers/support/wmsUtils":function(){define(["require","exports","../../geometry/Extent","../../geometry/SpatialReference","../../core/urlUtils"],function(e,h,d,a,b){function c(a){return w.some(function(b){var c=b[1];return a>=
b[0]&&c>=a})}function m(a){var b=[];return a.forEach(function(a){b.push(a);a.sublayers&&a.sublayers.length&&(b=b.concat(m(a.sublayers)),delete a.sublayers)}),b}function k(a,b,c,d){return(a=l(a,c))?a.getAttribute(b):d}function l(a,b){return(a=b&&b.getElementsByTagName(a))&&0<a.length?a[0]:null}function g(a,b,c){return(a=l(a,b))?a.textContent:c}function n(b,c,e){if(!b)return null;var f,g,h,k,l=parseFloat(b.getAttribute("minx")),m=parseFloat(b.getAttribute("miny")),p=parseFloat(b.getAttribute("maxx"));
b=parseFloat(b.getAttribute("maxy"));e?(f=isNaN(m)?-Number.MAX_VALUE:m,g=isNaN(l)?-Number.MAX_VALUE:l,h=isNaN(b)?Number.MAX_VALUE:b,k=isNaN(p)?Number.MAX_VALUE:p):(f=isNaN(l)?-Number.MAX_VALUE:l,g=isNaN(m)?-Number.MAX_VALUE:m,h=isNaN(p)?Number.MAX_VALUE:p,k=isNaN(b)?Number.MAX_VALUE:b);c=new a({wkid:c});return new d({xmin:f,ymin:g,xmax:h,ymax:k,spatialReference:c})}function u(a,c){a=l(c,a);if(a=l("DCPType",a))if(a=l("HTTP",a))if(a=l("Get",a)){var d=k("OnlineResource","xlink:href",a,null);if(d){d.indexOf("\x26")===
d.length-1&&(d=d.substring(0,d.length-1));a=["service","request"];c=[];var d=b.urlToObject(d),e;for(e in d.query)d.query.hasOwnProperty(e)&&-1===a.indexOf(e.toLowerCase())&&c.push(e+"\x3d"+d.query[e]);return d.path+(c.length?"?"+c.join("\x26"):"")}}return null}function r(a,b){var c=a.getElementsByTagName("Operation");if(c&&c.length){var d=[];return Array.prototype.slice.call(c).forEach(function(a){a.getAttribute("name")===b&&(a=a.getElementsByTagName("Format"),Array.prototype.slice.call(a).forEach(function(a){d.push(a.textContent)}))}),
d}a=l(b,a).getElementsByTagName("Format");return Array.prototype.slice.call(a).map(function(a){return a.textContent})}function t(b,e){if(!b)return null;var f={id:v++,fullExtents:[],parentLayerId:null,queryable:"1"===b.getAttribute("queryable"),spatialReferences:[],sublayers:null},h=l("LatLonBoundingBox",b),k=l("EX_GeographicBoundingBox",b),m=null;h&&(m=n(h,4326));k&&(m=new d(0,0,0,0,new a({wkid:4326})),m.xmin=parseFloat(g("westBoundLongitude",k,0)),m.ymin=parseFloat(g("southBoundLatitude",k,0)),m.xmax=
parseFloat(g("eastBoundLongitude",k,0)),m.ymax=parseFloat(g("northBoundLatitude",k,0)));h||k||(m=new d(-180,-90,180,90,new a({wkid:4326})));var u=-1<["1.0.0","1.1.0","1.1.1"].indexOf(e)?"SRS":"CRS";return Array.prototype.slice.call(b.childNodes).forEach(function(a){if("Name"===a.nodeName)f.name=a.textContent||"";else if("Title"===a.nodeName)f.title=a.textContent||"";else if("Abstract"===a.nodeName)f.description=a.textContent||"";else if("BoundingBox"===a.nodeName){var b=a.getAttribute(u);if(b&&0===
b.indexOf("EPSG:")){var d=parseInt(b.substring(5),10);0===d||isNaN(d)||m||(m="1.3.0"===e?n(a,d,c(d)):n(a,d))}(d=b&&b.indexOf(":"))&&-1<d&&(d=parseInt(b.substring(d+1,b.length),10),0===d||isNaN(d)||(d=q[d]?q[d]:d),a="1.3.0"===e?n(a,d,c(d)):n(a,d),f.fullExtents.push(a))}else a.nodeName===u?a.textContent.split(" ").forEach(function(a){a=-1<a.indexOf(":")?parseInt(a.split(":")[1],10):parseInt(a,10);0===a||isNaN(a)||(q[a]&&(a=q[a]),-1===f.spatialReferences.indexOf(a)&&f.spatialReferences.push(a))}):"Style"!==
a.nodeName||f.legendURL?"Layer"===a.nodeName&&(a=t(a,e))&&(a.parentLayerId=f.id,f.sublayers||(f.sublayers=[]),f.sublayers.push(a)):(a=l("LegendURL",a))&&(a=l("OnlineResource",a))&&(f.legendURL=a.getAttribute("xlink:href"))}),f.extent=m&&m.toJSON(),f}Object.defineProperty(h,"__esModule",{value:!0});var w=[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,
2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],q={84:4326,83:4269,27:4267},v=-1;h.parseCapabilities=
function(a){if(a){"string"==typeof a&&(a=(new DOMParser).parseFromString(a,"text/xml"));var b=a.documentElement,c=l("Layer",b);if(c){var e,h=k("WMS_Capabilities","version",b,null)||k("WMT_MS_Capabilities","version",b,"1.3.0"),n=l("Service",b);a=g("Title",n,"")||g("Name",n,"");var q=g("AccessConstraints",n,""),v=g("Abstract",n,""),w=parseInt(g("MaxWidth",n,5E3),10),n=parseInt(g("MaxHeight",n,5E3),10),x=t(c,h),E=0,c=l("Capability",b);if(Array.prototype.slice.call(c.childNodes).forEach(function(a){"Layer"===
a.nodeName&&(0===E?e=a:1===E?(x.name&&(x.name="",x.sublayers.push(t(e,h))),x.sublayers.push(t(a,h))):x.sublayers.push(t(a,h)),E++)}),!x)return null;var G,K,L=[],c=x.fullExtents;(L=x.sublayers,L&&0!==L.length||L.push(x),G=x.extent,G)||(G=new d(L[0].extent),x.extent=G.toJSON(),G=x.extent);if(K=x.spatialReferences,!K.length&&0<L.length){var H=function(a){var b=[];return a.sublayers.forEach(function(a){!b.length&&a.spatialReferences.length&&(b=a.spatialReferences||H(a))}),b};L.forEach(function(a){K.length||
(K=a.spatialReferences||H(a))})}var I,N=u(b,"GetMap"),S=r(b,"GetMap"),M=u(b,"GetFeatureInfo");M&&(b=r(b,"GetFeatureInfo"),-1<b.indexOf("text/html")?I="text/html":-1<b.indexOf("text/plain")&&(I="text/plain"));if(!I){var ca=function(a){a&&(a.queryable=!1,a.sublayers&&a.sublayers.forEach(function(a){ca(a)}))};ca(x)}b=m(L);return{copyright:q,description:v,extent:G,fullExtents:c,featureInfoFormat:I,featureInfoUrl:M,mapUrl:N,maxImageWidth:w,maxImageHeight:n,layers:b,spatialReferences:K,supportedImageFormatTypes:S,
title:a,version:h}}}};h.coordsReversed=c;h.getPopupLayers=function(a){return a.length?a.filter(function(a){return a.popupEnabled&&a.name&&a.queryable}).map(function(a){return a.name}).join(","):""}})},"esri/layers/support/WMSSublayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/paramHelper ../../core/accessorSupport/decorators ../../core/Collection ../../core/accessorSupport/ensureType ../../core/HandleRegistry ../../core/JSONSupport ../../geometry/Extent".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){var u=0;e=r=function(a){function b(b){b=a.call(this)||this;return b._sublayersHandles=new l,b.fullExtents=null,b.featureInfoFormat=null,b.featureInfoUrl=null,b.popupEnabled=null,b.spatialReferences=null,b}return d(b,a),Object.defineProperty(b.prototype,"description",{get:function(){return this._get("description")},set:function(a){this._set("description",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"fullExtent",{get:function(){return this._get("fullExtent")},
set:function(a){this._set("fullExtent",a)},enumerable:!0,configurable:!0}),b.prototype.readExtent=function(a,b,c){return a=b.extent,a?n.fromJSON(a):null},Object.defineProperty(b.prototype,"id",{get:function(){var a=this._get("id");return null==a?u++:a},set:function(a){this._set("id",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"legendUrl",{get:function(){return this._get("legendUrl")},set:function(a){this._set("legendUrl",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,
"legendEnabled",{get:function(){return this._get("legendEnabled")},set:function(a){this._set("legendEnabled",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"layer",{set:function(a){this._set("layer",a);this.sublayers&&this.sublayers.forEach(function(b){return b.layer=a})},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"name",{get:function(){return this._get("name")},set:function(a){this._set("name",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,
"sublayers",{set:function(a){var b=this,c=this._get("sublayers");c&&(c.forEach(function(a){a.layer=null}),this._sublayersHandles.removeAll(),this._sublayersHandles=null);a&&(a.forEach(function(a){a.parent=b;a.layer=b.layer}),this._sublayersHandles.add([a.on("after-add",function(a){a=a.item;a.parent=b;a.layer=b.layer}),a.on("after-remove",function(a){a=a.item;a.parent=null;a.layer=null})]));this._set("sublayers",a)},enumerable:!0,configurable:!0}),b.prototype.castSublayers=function(a){return k["default"](m.ofType(r),
a)},Object.defineProperty(b.prototype,"title",{get:function(){return this._get("title")},set:function(a){this._set("title",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"visible",{get:function(){return this._get("visible")},set:function(a){this._setAndNotifyLayer("visible",a)},enumerable:!0,configurable:!0}),b.prototype.clone=function(){var a=new r;return this.hasOwnProperty("description")&&(a.description=this.description),this.hasOwnProperty("fullExtent")&&(a.fullExtent=this.fullExtent.clone()),
this.hasOwnProperty("fullExtents")&&(a.fullExtents=this.fullExtents.map(function(a){return a.clone()})),this.hasOwnProperty("featureInfoFormat")&&(a.featureInfoFormat=this.featureInfoFormat),this.hasOwnProperty("featureInfoUrl")&&(a.featureInfoUrl=this.featureInfoUrl),this.hasOwnProperty("legendUrl")&&(a.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(a.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(a.layer=this.layer),this.hasOwnProperty("name")&&(a.name=this.name),
this.hasOwnProperty("parent")&&(a.parent=this.parent),this.hasOwnProperty("queryable")&&(a.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(a.sublayers=this.sublayers&&this.sublayers.map(function(a){return a.clone()})),this.hasOwnProperty("spatialReferences")&&(a.spatialReferences=this.spatialReferences.map(function(a){return a})),this.hasOwnProperty("visible")&&(a.visible=this.visible),this.hasOwnProperty("title")&&(a.title=this.title),a},b.prototype._setAndNotifyLayer=function(a,b){var c=
this.layer;this._get(a)!==b&&(this._set(a,b),c&&c.emit("wms-sublayer-update",{propertyName:a,id:this.id}))},b}(c.declared(g));a([c.property()],e.prototype,"description",null);a([c.property({value:null})],e.prototype,"fullExtent",null);a([c.reader("fullExtent",["extent"])],e.prototype,"readExtent",null);a([c.property()],e.prototype,"fullExtents",void 0);a([c.property()],e.prototype,"featureInfoFormat",void 0);a([c.property()],e.prototype,"featureInfoUrl",void 0);a([c.property({json:{write:{ignoreOrigin:!0}}})],
e.prototype,"id",null);a([c.property({type:String,json:{read:{source:"legendURL"},write:{allowNull:!0,ignoreOrigin:!0}}})],e.prototype,"legendUrl",null);a([c.property({value:!0,type:Boolean,json:{read:{source:"showLegend"},write:{target:"showLegend"}}})],e.prototype,"legendEnabled",null);a([c.property({value:null})],e.prototype,"layer",null);a([c.property({value:null,json:{read:{source:"name"},write:{ignoreOrigin:!0}}})],e.prototype,"name",null);a([c.property()],e.prototype,"parent",void 0);a([c.property({json:{read:{source:"showPopup"},
write:{ignoreOrigin:!0}}})],e.prototype,"popupEnabled",void 0);a([c.property({json:{write:{ignoreOrigin:!0}}})],e.prototype,"queryable",void 0);a([c.property()],e.prototype,"sublayers",null);a([c.cast("sublayers")],e.prototype,"castSublayers",null);a([c.property({json:{read:{source:"spatialReferences"}}})],e.prototype,"spatialReferences",void 0);a([c.property({value:null,json:{write:{ignoreOrigin:!0}}})],e.prototype,"title",null);a([c.property({value:!0,json:{read:{source:"defaultVisibility"}}})],
e.prototype,"visible",null);e=r=a([c.subclass("esri.layers.support.WMSSublayer")],e);var r;return e})},"esri/layers/support/ExportWMSImageParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators dojo/_base/lang ../../core/Accessor ../../core/HandleRegistry ./wmsUtils".split(" "),function(e,h,d,a,b,c,m,k,l){var g={visible:"visibleSublayers"},n=[102100,3857,102113,900913],u=[3395,54004];e=function(a){function b(){var b=
null!==a&&a.apply(this,arguments)||this;return b._layerHandles=new k,b.extent=null,b}return d(b,a),Object.defineProperty(b.prototype,"layer",{set:function(a){var b=this;this._get("layer")!==a&&(this._set("layer",a),this._layerHandles&&(this._layerHandles.removeAll(),this._layerHandles=null),a&&(this._layerHandles||(this._layerHandles=new k),this._layerHandles.add([a.sublayers.on("change",function(){return b.notifyChange("visibleSublayers")}),a.on("wms-sublayer-update",function(a){return b.notifyChange(g[a.propertyName])})])))},
enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"layers",{get:function(){return this.visibleSublayers.map(function(a){return a.name}).join(",")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"version",{get:function(){return(this._get("version")||0)+1},set:function(a){this._set("version",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"visibleSublayers",{get:function(){var a=this.layer.sublayers,b=[],c=function(a){a.visible&&(a.sublayers?
a.sublayers.forEach(c):b.unshift(a))};return a&&a.forEach(c),b},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"wkid",{get:function(){var a=this.extent,b=this.layer.spatialReferences,c=a.spatialReference&&a.spatialReference.wkid;b&&-1===b.indexOf(c)&&a.spatialReference.latestWkid&&(c=a.spatialReference.latestWkid);a=n.some(function(a){return a===c});if(!b)return c;if(a){var d=[];b.forEach(function(a){-1<n.indexOf(a)&&d.push(a)});d.length||b.forEach(function(a){-1<u.indexOf(a)&&
d.push(a)});c=0<d.length?d[0]:n[0]}return c},enumerable:!0,configurable:!0}),b.prototype.toJSON=function(){var a=this.layer,b=this.extent,d=this.wkid;a.spatialReferences&&-1===a.spatialReferences.indexOf(d)&&b.spatialReference.latestWkid&&(d=b.spatialReference.latestWkid);b={bbox:"1.3.0"===a.version&&l.coordsReversed(d)?b.ymin+","+b.xmin+","+b.ymax+","+b.xmax:b.xmin+","+b.ymin+","+b.xmax+","+b.ymax,format:a.imageFormat,request:"GetMap",service:"WMS",styles:"",transparent:a.imageTransparency,version:a.version};
return isNaN(d)||("1.3.0"===a.version?b.crs="EPSG:"+d:b.srs="EPSG:"+d),c.mixin(b,{layers:this.layers}),b},b}(b.declared(m));return a([b.property()],e.prototype,"extent",void 0),a([b.property()],e.prototype,"layer",null),a([b.property({readOnly:!0,dependsOn:["visibleSublayers"]})],e.prototype,"layers",null),a([b.property({dependsOn:["layers","layer.imageTransparency"]})],e.prototype,"version",null),a([b.property({readOnly:!0,dependsOn:["layer.sublayers"]})],e.prototype,"visibleSublayers",null),a([b.property()],
e.prototype,"wkid",null),e=a([b.subclass("esri.layers.support.ExportWMSImageParameters")],e)})},"esri/layers/WMTSLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators dojo/_base/lang ../request ../core/HandleRegistry ../core/Collection ../core/promiseUtils ./Layer ./WebTileLayer ./mixins/OperationalLayer ./mixins/PortalLayer ./support/WMTSSublayer ./support/wmtsUtils".split(" "),function(e,h,d,a,b,c,m,k,
l,g,n,u,r,t,w,q){function v(a,b){return a.map(function(a){var c=new w;return c.read(a,b),c})}var x={"image/png":".png","image/png8":".png","image/png24":".png","image/png32":".png","image/jpg":".jpg","image/jpeg":".jpeg","image/gif":".gif","image/bmp":".bmp","image/tiff":".tif","image/jpgpng":"","image/jpegpng":"","image/unknown":""};e=function(a){function b(b,c){var d=a.call(this)||this;return d._sublayersHandles=new k,d.copyright=null,d.customParameters=null,d.customLayerParameters=null,d.operationalLayerType=
"WMTS",d.resourceInfo=null,d.serviceMode="RESTful",d.sublayers=null,d.type="wmts",d.version="1.0.0",d.watch("activeLayer",function(a,b){b&&(b.layer=null);a&&(a.layer=d)},!0),d.watch("sublayers",function(a,b){b&&(b.forEach(function(a){a.layer=null}),d._sublayersHandles.removeAll(),d._sublayersHandles=null);a&&(a.forEach(function(a){a.layer=d}),d._sublayersHandles||(d._sublayersHandles=new k),d._sublayersHandles.add([a.on("after-add",function(a){a.item.layer=d}),a.on("after-remove",function(a){a.item.layer=
null})]))},!0),d}return d(b,a),b.prototype.normalizeCtorArgs=function(a,b){return"string"==typeof a?c.mixin({},{url:a},b):a},b.prototype.load=function(){var a=this;return"KVP"!==this.serviceMode&&"RESTful"!==this.serviceMode?void console.error("WMTS mode could only be 'KVP' or 'RESTful'"):(this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMTS"]}).then(function(){return a._fetchService()})),this)},Object.defineProperty(b.prototype,"activeLayer",{get:function(){return this._get("activeLayer")},
set:function(a){this._set("activeLayer",a)},enumerable:!0,configurable:!0}),b.prototype.readActiveLayerFromService=function(a,b,c){var d,e=this;return this.activeLayer?b.layers.some(function(a){return a.id===e.activeLayer.id?(d=a,!0):!1}):(this.activeLayer=new w,d=b.layers[0]),this.activeLayer.read(d,c),this.activeLayer},b.prototype.readActiveLayerFromItemOrWebMap=function(a,b,c){return new w({id:b.wmtsInfo.layerIdentifier,tileMatrixSetId:b.wmtsInfo.tileMatrixSet})},b.prototype.readServiceMode=function(a,
b,c){return-1<b.templateUrl.indexOf("?")?"KVP":"RESTful"},b.prototype.readSublayersFromService=function(a,b,c){return v(b.layers,c)},Object.defineProperty(b.prototype,"title",{get:function(){return"Layer"===this._get("title")?this.activeLayer.title:this._get("title")},set:function(a){this._set("title",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"url",{get:function(){return this._get("url")},set:function(a){a&&"/"===a.substr(-1)?this._set("url",a.slice(0,-1)):this._set("url",
a)},enumerable:!0,configurable:!0}),b.prototype.readUrlFromService=function(a,b,c){return b.tileUrl},b.prototype.readUrlFromItemOrWebMap=function(a,b,c){return b.wmtsInfo.url},b.prototype.createWebTileLayer=function(a){var b=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId),c=this._getTileMatrixSetById(a.tileMatrixSetId).tileInfo,d=a.fullExtent;a={layerIdentifier:a.id,tileMatrixSet:a.tileMatrixSetId,url:this.url};return this.customLayerParameters&&
(a.customLayerParameters=this.customLayerParameters),this.customParameters&&(a.customParameters=this.customParameters),new u({fullExtent:d,urlTemplate:b,tileInfo:c,wmtsInfo:a})},b.prototype.fetchTile=function(a,b,c){a=this.getTileUrl(a,b,c);return m(a,{responseType:"image"}).then(function(a){return a.data})},b.prototype.findSublayerById=function(a){return this.sublayers.find(function(b){return b.id===a})},b.prototype.getTileUrl=function(a,b,c){var d=this._getTileMatrixSetById(this.activeLayer.tileMatrixSetId).tileInfo.lods[a],
d=d.levelValue?d.levelValue:String(d.level);(a=this.resourceInfo?"":q.getTileUrlFromResourceUrls(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.styleId,a,b,c))||(a=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId).replace(/\{level\}/gi,d).replace(/\{row\}/gi,b).replace(/\{col\}/gi,c));return a=this._appendCustomLayerParameters(a)},b.prototype.getUrlTemplate=function(a,b,c,d){var e="";if(!this.resourceInfo&&
(e=q.getTileUrlTemplateFromResourceUrls(a,b,c,d)))return e;"KVP"===this.serviceMode?e=this.url+"SERVICE\x3dWMTS\x26VERSION\x3d"+this.version+"\x26REQUEST\x3dGetTile\x26LAYER\x3d"+a+"\x26STYLE\x3d"+d+"\x26FORMAT\x3d"+c+"\x26TILEMATRIXSET\x3d"+b+"\x26TILEMATRIX\x3d{level}\x26TILEROW\x3d{row}\x26TILECOL\x3d{col}":"RESTful"===this.serviceMode&&(e="",x[c.toLowerCase()]&&(e=x[c.toLowerCase()]),e=this.url+a+"/"+d+"/"+b+"/{level}/{row}/{col}"+e);return e},b.prototype._fetchService=function(){var a=this;return g.resolve().then(function(){if(a.resourceInfo)return"KVP"===
a.resourceInfo.serviceMode&&(a.url+=-1<a.url.indexOf("?")?"":"?"),{ssl:!1,data:a.resourceInfo};var b=a._getCapabilitiesUrl(a.serviceMode);return m(b,{responseType:"text",callbackParamName:"callback"}).otherwise(function(c){return b=a._getCapabilitiesUrl("KVP"===a.serviceMode?"RESTful":"KVP"),m(b,{responseType:"text",callbackParamName:"callback"})})}).then(function(b){a.resourceInfo?b.data=q.parseResourceInfo(b.data):b.data=q.parseCapabilities(b.data,{serviceMode:a.serviceMode});b.data&&a.read(b.data,
{origin:"service"})})},b.prototype._getTileMatrixSetById=function(a){return this.findSublayerById(this.activeLayer.id).tileMatrixSets.find(function(b){return b.id===a})},b.prototype._appendCustomParameters=function(a){if(this.customParameters)for(var b in this.customParameters)a+=(-1===a.indexOf("?")?"?":"\x26")+b+"\x3d"+encodeURIComponent(this.customParameters[b]);return a},b.prototype._appendCustomLayerParameters=function(a){if(this.customLayerParameters||this.customParameters){var b=c.clone(this.customParameters||
{});c.mixin(b,this.customLayerParameters||{});for(var d in b)a+=(-1===a.indexOf("?")?"?":"\x26")+d+"\x3d"+encodeURIComponent(b[d])}return a},b.prototype._getCapabilitiesUrl=function(a){var b;return this.url=this.url.split("?")[0],"KVP"===a?(this.url+="?",b=this.url+"request\x3dGetCapabilities\x26service\x3dWMTS\x26version\x3d"+this.version):"RESTful"===a&&(b=this.url+"/"+this.version+"/WMTSCapabilities.xml"),b=this._appendCustomParameters(b)},b}(b.declared(n,r,t));return a([b.shared({"2d":"../views/2d/layers/WMTSLayerView2D"})],
e.prototype,"viewModulePaths",void 0),a([b.property({type:w,dependsOn:["sublayers"]})],e.prototype,"activeLayer",null),a([b.reader("service","activeLayer",["layers"])],e.prototype,"readActiveLayerFromService",null),a([b.reader(["web-map","portal-item"],"activeLayer",["wmtsInfo"])],e.prototype,"readActiveLayerFromItemOrWebMap",null),a([b.property()],e.prototype,"copyright",void 0),a([b.property()],e.prototype,"customParameters",void 0),a([b.property()],e.prototype,"customLayerParameters",void 0),a([b.property()],
e.prototype,"operationalLayerType",void 0),a([b.property()],e.prototype,"resourceInfo",void 0),a([b.property()],e.prototype,"serviceMode",void 0),a([b.reader(["portal-item","web-map"],"serviceMode",["templateUrl"])],e.prototype,"readServiceMode",null),a([b.property({type:l.ofType(w)})],e.prototype,"sublayers",void 0),a([b.reader("service","sublayers",["layers"])],e.prototype,"readSublayersFromService",null),a([b.property({dependsOn:["activeLayer"],json:{read:{source:"title"}}})],e.prototype,"title",
null),a([b.property({json:{read:!1},readOnly:!0,value:"wmts"})],e.prototype,"type",void 0),a([b.property()],e.prototype,"url",null),a([b.reader("service","url",["tileUrl"])],e.prototype,"readUrlFromService",null),a([b.reader(["portal-item","web-map"],"url",["wmtsInfo"])],e.prototype,"readUrlFromItemOrWebMap",null),a([b.property()],e.prototype,"version",void 0),e=a([b.subclass("esri.layers.WMTSLayer")],e)})},"esri/layers/WebTileLayer":function(){define("dojo/_base/lang dojo/_base/url dojo/string ../core/Error ../core/MultiOriginJSONSupport ../core/urlUtils ../geometry/SpatialReference ../geometry/Extent ../geometry/Point ./TiledLayer ./mixins/OperationalLayer ./mixins/ScaleRangeLayer ./mixins/PortalLayer ./support/TileInfo ./support/LOD".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w){return g.createSubclass([n,b,u,r],{declaredClass:"esri.layers.WebTileLayer",normalizeCtorArgs:function(a,b){return"string"==typeof a?e.mixin({urlTemplate:a},b||{}):a},getDefaults:function(a){var b=new k(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,m.WebMercator);return e.mixin(this.inherited(arguments),{fullExtent:b,tileInfo:new t({size:256,dpi:96,format:"PNG8",compressionQuality:0,origin:new l({x:-2.0037508342787E7,y:2.0037508342787E7,
spatialReference:m.WebMercator}),spatialReference:m.WebMercator,lods:[new w({level:0,scale:5.91657527591555E8,resolution:156543.033928}),new w({level:1,scale:2.95828763795777E8,resolution:78271.5169639999}),new w({level:2,scale:1.47914381897889E8,resolution:39135.7584820001}),new w({level:3,scale:7.3957190948944E7,resolution:19567.8792409999}),new w({level:4,scale:3.6978595474472E7,resolution:9783.93962049996}),new w({level:5,scale:1.8489297737236E7,resolution:4891.96981024998}),new w({level:6,scale:9244648.868618,
resolution:2445.98490512499}),new w({level:7,scale:4622324.434309,resolution:1222.99245256249}),new w({level:8,scale:2311162.217155,resolution:611.49622628138}),new w({level:9,scale:1155581.108577,resolution:305.748113140558}),new w({level:10,scale:577790.554289,resolution:152.874056570411}),new w({level:11,scale:288895.277144,resolution:76.4370282850732}),new w({level:12,scale:144447.638572,resolution:38.2185141425366}),new w({level:13,scale:72223.819286,resolution:19.1092570712683}),new w({level:14,
scale:36111.909643,resolution:9.55462853563415}),new w({level:15,scale:18055.954822,resolution:4.77731426794937}),new w({level:16,scale:9027.977411,resolution:2.38865713397468}),new w({level:17,scale:4513.988705,resolution:1.19432856685505}),new w({level:18,scale:2256.994353,resolution:.597164283559817}),new w({level:19,scale:1128.497176,resolution:.298582141647617})]})})},properties:{copyright:{value:"",json:{write:!0}},fullExtent:{json:{write:!0}},legendEnabled:{json:{read:{source:["showLegend"],
reader:function(a,b){return null!=b.showLegend?b.showLegend:!0}},write:{target:"showLegend"}}},levelValues:{dependsOn:["tileInfo"],get:function(){var a=[];return this.tileInfo?(this.tileInfo.lods.forEach(function(b){a[b.level]=b.levelValue||b.level},this),a):null}},operationalLayerType:"WebTiledLayer",popupEnabled:{json:{read:{source:["disablePopup"],reader:function(a,b){return null!=b.disablePopup?!b.disablePopup:!0}}}},refreshInterval:{json:{write:!0}},spatialReference:{type:m,value:m.WebMercator,
json:{read:{source:["spatialReference","fullExtent.spatialReference"],reader:function(a,b){return a||b.fullExtent&&b.fullExtent.spatialReference&&m.fromJSON(b.fullExtent.spatialReference)}}}},subDomains:{value:null,json:{write:!0}},tileInfo:{type:t,json:{write:!0}},tileServers:{value:null,dependsOn:["urlTemplate","subDomains"],get:function(){if(!this.urlTemplate)return null;var a,b=new h(this.urlTemplate),c=b.scheme?b.scheme+"://":"//",d=c+b.authority+"/",e=this.subDomains,g=[];return-1===b.authority.indexOf("{subDomain}")&&
g.push(d),e&&0<e.length&&1<b.authority.split(".").length&&e.forEach(function(d){-1<b.authority.indexOf("{subDomain}")&&(a=c+b.authority.replace(/\{subDomain\}/gi,d)+"/");g.push(a)},this),g=g.map(function(a){return"/"!==a.charAt(a.length-1)&&(a+="/"),a})}},type:{value:"web-tile",json:{read:!1}},urlPath:{dependsOn:["urlTemplate"],get:function(){if(!this.urlTemplate)return null;var a=this.urlTemplate,b=new h(a);return a.substring(((b.scheme?b.scheme+"://":"//")+b.authority+"/").length)}},urlTemplate:{json:{origins:{portalItem:{read:{source:"url"}}},
read:{source:["urlTemplate","templateUrl"],reader:function(a,b){return a||b.templateUrl}},write:function(a,b){a&&c.isProtocolRelative(a)&&(a="https:"+a);b.templateUrl=a?c.normalize(a):a}}},url:{json:{write:!1}},wmtsInfo:{json:{write:!0}}},getTileUrl:function(a,b,c){a=this.levelValues[a];var e=this.tileServers[b%this.tileServers.length]+d.substitute(this.urlPath,{level:a,col:c,row:b});return e=e.replace(/\{level\}/gi,a).replace(/\{row\}/gi,b).replace(/\{col\}/gi,c)},load:function(){var b=this.loadFromPortal({supportedTypes:["WMTS"]}).then(function(){if(!this.urlTemplate)throw new a("layer:load",
"WebTileLayer (title: '"+this.title+"', id: '"+this.id+"') is missing the required 'urlTemplate' property value");}.bind(this));return this.addResolvingPromise(b),this}})})},"esri/layers/support/WMTSSublayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/paramHelper ../../core/accessorSupport/decorators ../../core/Collection ../../core/JSONSupport ./TileMatrixSet ./WMTSStyle ../../geometry/Extent".split(" "),function(e,
h,d,a,b,c,m,k,l,g,n){e=u=function(a){function b(b){b=a.call(this)||this;return b.fullExtent=null,b.imageFormats=null,b.id=null,b.layer=null,b.styles=null,b.tileMatrixSetId=null,b.tileMatrixSets=null,b}return d(b,a),Object.defineProperty(b.prototype,"description",{get:function(){return this._get("description")},set:function(a){this._set("description",a)},enumerable:!0,configurable:!0}),b.prototype.readFullExtent=function(a,b,c){return a=b.fullExtent,a?n.fromJSON(a):null},Object.defineProperty(b.prototype,
"imageFormat",{get:function(){var a=this._get("imageFormat");return a||(a=this.imageFormats&&this.imageFormats.length?this.imageFormats[0]:""),a},set:function(a){return(-1<a.indexOf("image/")||-1===this.imageFormats.indexOf(a))&&(-1===a.indexOf("image/")&&(a="image/"+a),this.imageFormats&&-1===this.imageFormats.indexOf(a))?void console.error("The layer doesn't support the format of "+a):void this._set("imageFormat",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"styleId",{get:function(){var a=
this._get("styleId");return a||(a=this.styles&&this.styles.length?this.styles.getItemAt(0).id:""),a},set:function(a){this._set("styleId",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"title",{get:function(){return this._get("title")},set:function(a){this._set("title",a)},enumerable:!0,configurable:!0}),b.prototype.clone=function(){var a=new u;return this.hasOwnProperty("description")&&(a.description=this.description),this.hasOwnProperty("imageFormats")&&(a.imageFormats=this.imageFormats&&
this.imageFormats.slice()),this.hasOwnProperty("imageFormat")&&(a.imageFormat=this.imageFormat),this.hasOwnProperty("fullExtent")&&(a.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty("id")&&(a.id=this.id),this.hasOwnProperty("layer")&&(a.layer=this.layer),this.hasOwnProperty("styleId")&&(a.styleId=this.styleId),this.hasOwnProperty("styles")&&(a.styles=this.styles&&this.styles.clone()),this.hasOwnProperty("tileMatrixSetId")&&(a.tileMatrixSetId=this.tileMatrixSetId),this.hasOwnProperty("tileMatrixSets")&&
(a.tileMatrixSets=this.tileMatrixSets.clone()),this.hasOwnProperty("title")&&(a.title=this.title),a},b}(c.declared(k));a([c.property()],e.prototype,"description",null);a([c.property()],e.prototype,"fullExtent",void 0);a([c.reader("fullExtent",["fullExtent"])],e.prototype,"readFullExtent",null);a([c.property({dependsOn:["imageFormats"]})],e.prototype,"imageFormat",null);a([c.property({json:{read:{source:"formats"}}})],e.prototype,"imageFormats",void 0);a([c.property()],e.prototype,"id",void 0);a([c.property()],
e.prototype,"layer",void 0);a([c.property()],e.prototype,"styleId",null);a([c.property({type:m.ofType(g),json:{read:{source:"styles"}}})],e.prototype,"styles",void 0);a([c.property({value:null,json:{write:{ignoreOrigin:!0}}})],e.prototype,"title",null);a([c.property()],e.prototype,"tileMatrixSetId",void 0);a([c.property({type:m.ofType(l),json:{read:{source:"tileMatrixSets"}}})],e.prototype,"tileMatrixSets",void 0);e=u=a([c.subclass("esri.layers.support.WMTSSublayer")],e);var u;return e})},"esri/layers/support/TileMatrixSet":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/paramHelper ../../core/accessorSupport/decorators ../../core/JSONSupport".split(" "),
function(e,h,d,a,b,c,m){e=k=function(a){function b(b){b=a.call(this)||this;return b.fullExtent=null,b.id=null,b.tileInfo=null,b}return d(b,a),b.prototype.clone=function(){var a=new k;return this.hasOwnProperty("fullExtent")&&(a.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty("id")&&(a.id=this.id),this.hasOwnProperty("tileInfo")&&(a.tileInfo=this.tileInfo&&this.tileInfo.clone()),a},b}(c.declared(m));a([c.property({json:{read:{source:"fullExtent"}}})],e.prototype,"fullExtent",
void 0);a([c.property({json:{read:{source:"id"}}})],e.prototype,"id",void 0);a([c.property({json:{read:{source:"tileInfo"}}})],e.prototype,"tileInfo",void 0);e=k=a([c.subclass("esri.layer.support.TileMatrixSet")],e);var k;return e})},"esri/layers/support/WMTSStyle":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/paramHelper ../../core/accessorSupport/decorators ../../core/JSONSupport".split(" "),function(e,h,d,a,
b,c,m){e=k=function(a){function b(b){b=a.call(this)||this;return b.id=null,b.title=null,b.description=null,b.legendUrl=null,b}return d(b,a),b.prototype.clone=function(){var a=new k;return this.hasOwnProperty("description")&&(a.description=this.description),this.hasOwnProperty("id")&&(a.id=this.id),this.hasOwnProperty("isDefault")&&(a.isDefault=this.isDefault),this.hasOwnProperty("keywords")&&(a.keywords=this.keywords&&this.keywords.slice()),this.hasOwnProperty("legendUrl")&&(a.legendUrl=this.legendUrl),
this.hasOwnProperty("title")&&(a.title=this.title),a},b}(c.declared(m));a([c.property({json:{read:{source:"id"}}})],e.prototype,"id",void 0);a([c.property({json:{read:{source:"title"}}})],e.prototype,"title",void 0);a([c.property({json:{read:{source:"abstract"}}})],e.prototype,"description",void 0);a([c.property({json:{read:{source:"legendUrl"}}})],e.prototype,"legendUrl",void 0);a([c.property({json:{read:{source:"isDefault"}}})],e.prototype,"isDefault",void 0);a([c.property({json:{read:{source:"keywords"}}})],
e.prototype,"keywords",void 0);e=k=a([c.subclass("esri.layer.support.WMTSStyle")],e);var k;return e})},"esri/layers/support/wmtsUtils":function(){define("require exports ../../geometry/Extent ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/WKIDUnitConversion ./TileInfo".split(" "),function(e,h,d,a,b,c,m){function k(a,b){return(a=b.getElementsByTagName(a))&&0<a.length?a[0]:null}function l(a,b){return Array.prototype.slice.call(b.getElementsByTagName(a)).map(function(a){return a.textContent})}
function g(a,b){return a.split("\x3e").forEach(function(a){b=k(a,b)}),b&&b.textContent}function n(a,b,c,d){var e;return Array.prototype.slice.call(d.childNodes).some(function(d){if(-1<d.nodeName.indexOf(a)){var f=k(b,d),f=f&&f.textContent;return f===c||c.split(":")&&c.split(":")[1]===f?(e=d,!0):!1}}),e}function u(a){var b,c,d,e,f=[],h=A[a],k=Array.prototype.slice.call(h.getElementsByTagName("ResourceURL")),h=h.getElementsByTagName("Dimension");return h.length&&(b=g("Identifier",h[0]),c=l("Default",
h[0])||l("Value",h[0])),1<h.length&&(d=g("Identifier",h[1]),e=l("Default",h[1])||l("Value",h[1])),y[a]={dimensions:c,dimensions2:e},k.forEach(function(a){var g=a.getAttribute("template");if(b&&c.length)if(-1<g.indexOf("{"+b+"}"))g=g.replace("{"+b+"}","{dimensionValue}");else{var h=g.toLowerCase().indexOf("{"+b.toLowerCase()+"}");-1<h&&(g=g.substring(0,h)+"{dimensionValue}"+g.substring(h+b.length+2))}d&&e.length&&(-1<g.indexOf("{"+d+"}")?g=g.replace("{"+d+"}","{dimensionValue2}"):(h=g.toLowerCase().indexOf("{"+
d.toLowerCase()+"}"),-1<h&&(g=g.substring(0,h)+"{dimensionValue2}"+g.substring(h+d.length+2))));f.push({template:g,format:a.getAttribute("fomrat"),resourceType:a.getAttribute("resourceType")})}),f}function r(a){return Array.prototype.slice.call(a.getElementsByTagName("Style")).map(function(a){var b=k("LegendURL",a),c=k("Keywords",a),c=c&&l("Keyword",c);return{"abstract":g("Abstract",a),id:g("Identifier",a),isDefault:"true"===a.getAttribute("isDefault"),keywords:c,legendUrl:b&&b.getAttribute("xlink:href"),
title:g("Title",a)}})}function t(a,b){return l("TileMatrixSet",a).map(function(c){return w(c,a,b)})}function w(a,b,c){b=n("TileMatrixSetLink","TileMatrixSet",a,b);b=l("TileMatrix",b);var d=n("TileMatrixSet","Identifier",a,c);c=q(d);var e=c.spatialReference,f=e.wkid,h=k("TileMatrix",d),h=[parseInt(g("TileWidth",h),10),parseInt(g("TileHeight",h),10)],p=[];b.length?b.forEach(function(b,c){b=n("TileMatrix","Identifier",b,d);p.push(x(b,f,c,a))}):Array.prototype.slice.call(d.getElementsByTagName("TileMatrix")).forEach(function(b,
c){p.push(x(b,f,c,a))});b=v(d,c,h,p[0]);return{id:a,fullExtent:b,tileInfo:new m({dpi:96,spatialReference:e,size:h,origin:c,lods:p})}}function q(c){var d=g("SupportedCRS",c);d&&(d=d.toLowerCase());var e=parseInt(d.split(":").pop(),10);900913!==e&&3857!==e||(e=102100);var f=!1;-1<d.indexOf("crs84")||-1<d.indexOf("crs:84")?(e=4326,f=!0):-1<d.indexOf("crs83")||-1<d.indexOf("crs:83")?(e=4269,f=!0):(-1<d.indexOf("crs27")||-1<d.indexOf("crs:27"))&&(e=4267,f=!0);var h,l=new b({wkid:e});c=k("TileMatrix",c);
var m=g("TopLeftCorner",c).split(" ");c=m[0].split("E").map(function(a){return Number(a)});var m=m[1].split("E").map(function(a){return Number(a)}),p=c[0],n=m[0];1<c.length&&(p=c[0]*Math.pow(10,c[1]));1<m.length&&(n=m[0]*Math.pow(10,m[1]));var t=f&&4326===e&&90===p&&-180===n;return z.some(function(b,c){var g=Number(d.split(":").pop());return g>=b[0]&&g<=b[1]||4326===e&&(!f||t)?(h=new a(n,p,l),!0):(c===z.length-1&&(h=new a(p,n,l)),!1)}),h}function v(a,b,c,e){var f,h,l=k("BoundingBox",a);l&&(f=g("LowerCorner",
l).split(" "),h=g("UpperCorner",l).split(" "));f&&1<f.length&&h&&1<h.length?(a=parseFloat(f[0]),c=parseFloat(f[1]),f=parseFloat(h[0]),h=parseFloat(h[1])):(a=k("TileMatrix",a),f=parseFloat(g("MatrixWidth",a)),l=parseFloat(g("MatrixHeight",a)),a=b.x,h=b.y,f=a+f*c[0]*e.resolution,c=h-l*c[1]*e.resolution);return new d(a,c,f,h,b.spatialReference)}function x(a,b,c,d){var e=g("Identifier",a);a=g("ScaleDenominator",a).split("E").map(function(a){return Number(a)});a=1<a.length?a[0]*Math.pow(10,a[1]):a[0];
b=f(b,a,d);return a*=96/p,{level:c,levelValue:e,scale:a,resolution:b}}function f(a,b,d){var e;return e=c.hasOwnProperty(String(a))?c.values[c[a]]:"default028mm"===d?6370997*Math.PI/180:6378137*Math.PI/180,7*b/25E3/e}Object.defineProperty(h,"__esModule",{value:!0});var p=90.71428571428571,z=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,
4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,
2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,
5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],y=new Map,A=new Map;h.parseCapabilities=function(a,b){a=a.replace(/ows:/gi,"");a=(new DOMParser).parseFromString(a,"text/xml").documentElement;var c=k("Contents",a);if(!c)return void console.error("The WMTS capabilities XML is not valid");
var d,e,f,h=k("OperationsMetadata",a).querySelector("[name\x3d'GetTile']").getElementsByTagName("Get"),h=Array.prototype.slice.call(h),m=b.serviceMode;h.some(function(a){var b=k("Constraint",a);return!b||n("AllowedValues","Value",m,b)?(e=a.attributes[0].nodeValue,!0):(!b||n("AllowedValues","Value","RESTful",b)?f=a.attributes[0].nodeValue:(!b||n("AllowedValues","Value","KVP",b))&&(d=a.attributes[0].nodeValue),!1)});e||("KVP"===m&&f?(e=f,m="RESTful"):"RESTful"===m&&d&&(e=d,m="KVP"));-1===e.indexOf("/1.0.0/")&&
"RESTful"===m&&(e+="/");"KVP"===m&&(e+=-1<e.indexOf("?")?"":"?");b=g("ServiceIdentification\x3eAccessConstraints",a);a=Array.prototype.slice.call(c.getElementsByTagName("Layer")).map(function(a){var b=g("Identifier",a);A[b]=a;var d=g("Abstract",a),e=l("Format",a),f,h=k("WGS84BoundingBox",a);f=h?g("LowerCorner",h).split(" "):["-180","-90"];h=h?g("UpperCorner",h).split(" "):["180","90"];f={xmin:parseFloat(f[0]),ymin:parseFloat(f[1]),xmax:parseFloat(h[0]),ymax:parseFloat(h[1]),spatialReference:{wkid:4326}};
var h=r(a),m=g("Title",a);a=t(a,c);return{id:b,fullExtent:f,description:d,formats:e,styles:h,title:m,tileMatrixSets:a}});return{copyright:b,layers:a,tileUrl:e,serviceMode:m}};h.parseResourceInfo=function(a){return a.layers.forEach(function(a){a.tileMatrixSets.forEach(function(a){var b=a.tileInfo;96!==b.dpi&&(b.lods.forEach(function(c){c.scale=96*c.scale/b.dpi;c.resolution=f(b.spatialReference.wkid,c.scale*p/96,a.id)}),b.dpi=96)})}),a};h.getTileUrlFromResourceUrls=function(a,b,c,d,e,f){var g=u(a),
h=y[a].dimensions&&y[a].dimensions[0];a=y[a].dimensions2&&y[a].dimensions2[0];var k="";return g&&0<g.length&&(k=g[e%g.length].template.replace(/\{Style\}/gi,c).replace(/\{TileMatrixSet\}/gi,b).replace(/\{TileMatrix\}/gi,d).replace(/\{TileRow\}/gi,e).replace(/\{TileCol\}/gi,f).replace(/\{dimensionValue\}/gi,h).replace(/\{dimensionValue2\}/gi,a)),k};h.getTileUrlTemplateFromResourceUrls=function(a,b,c,d){c=u(a);var e="";if(c&&0<c.length){var f=y[a].dimensions&&y[a].dimensions[0];a=y[a].dimensions2&&
y[a].dimensions2[0];e=c[0].template;e.indexOf(".xxx")===e.length-4&&(e=e.slice(0,e.length-4));e=e.replace(/\{Style\}/gi,d);e=e.replace(/\{TileMatrixSet\}/gi,b);e=e.replace(/\{TileMatrix\}/gi,"{level}");e=e.replace(/\{TileRow\}/gi,"{row}");e=e.replace(/\{TileCol\}/gi,"{col}");e=e.replace(/\{dimensionValue\}/gi,f);e=e.replace(/\{dimensionValue2\}/gi,a)}return e}})},"esri/layers/MapImageLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators dojo/_base/lang dojo/io-query ../core/promiseUtils ../config ../request ./DynamicLayer ./mixins/ArcGISDynamicMapService ./mixins/OperationalLayer ./mixins/PortalLayer".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t){e=function(a){function b(b,c){b=a.call(this)||this;return b.alwaysRefetch=!1,b.legendEnabled=!0,b.operationalLayerType="ArcGISMapServiceLayer",b.type="map-image",b}return d(b,a),b.prototype.normalizeCtorArgs=function(a,b){return"string"==typeof a?c.mixin({url:a},b):a},b.prototype.load=function(){var a=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]}).then(function(){return a._fetchService()})),this},b.prototype.readLegendEnabled=
function(a,b){return null!=b.showLegend?b.showLegend:!0},b.prototype.writeLegendEnabled=function(a,b){b.showLegend=!!a},b.prototype.getImageUrl=function(a,b,d,e){var f=this,h=this.parsedUrl.path+"/export";a=c.mixin({},this.parsedUrl.query,this.createExportImageParameters(a,b,d,e),{f:"image",token:this.token,_ts:this.alwaysRefetch?(new Date).getTime():null});b=h+"?"+m.objectToQuery(a);return b.length>l.request.maxUrlLength?(a.f="json",g(h,{query:a,responseType:"json",callbackParamName:"callback"}).then(function(a){return a.data.href+
(f.token?"?token\x3d"+f.token:"")})):b},b.prototype._fetchService=function(){var a=this;return k.resolve().then(function(){return a.resourceInfo?{ssl:!1,data:a.resourceInfo}:g(a.parsedUrl.path,{query:c.mixin({f:"json"},a.parsedUrl.query),responseType:"json",callbackParamName:"callback"})}).then(function(b){b.ssl&&(a.url=a.url.replace(/^http:/i,"https:"));a.read(b.data,{origin:"service",url:a.parsedUrl})})},b}(b.declared(n,u,r,t));return a([b.property()],e.prototype,"alwaysRefetch",void 0),a([b.property({type:Boolean})],
e.prototype,"legendEnabled",void 0),a([b.reader("legendEnabled",["showLegend"])],e.prototype,"readLegendEnabled",null),a([b.writer("legendEnabled")],e.prototype,"writeLegendEnabled",null),a([b.property()],e.prototype,"operationalLayerType",void 0),a([b.property({json:{read:!1},readOnly:!0,value:"map-image"})],e.prototype,"type",void 0),e=a([b.subclass("esri.layers.MapImageLayer")],e)})},"esri/layers/DynamicLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/errors/CancelError ../request ../core/accessorSupport/decorators ../core/promiseUtils ../core/Error ./Layer".split(" "),
function(e,h,d,a,b,c,m,k,l,g){e=function(a){function e(){return null!==a&&a.apply(this,arguments)||this}return d(e,a),e.prototype.getImageUrl=function(a,b,c,d){throw new l("dynamiclayer:getImageUrl-not-implemented","getImageUrl() is not implemented");},e.prototype.fetchImage=function(a,d,e,g){var h,m;a=this.getImageUrl(a,d,e,g);var f={responseType:"image",allowImageDataAccess:g&&g.allowImageDataAccess||!1};return"string"==typeof a?(h=a,m=c(a,f)):m=a.then(function(a){return h=a,c(h,f)}),m.then(function(a){return a.data}).otherwise(function(a){return k.reject(a instanceof
b?a:new l("dynamiclayer:image-fetch-error","Unable to load image: "+h))})},e}(m.declared(g));return a([m.shared({"2d":"../views/2d/layers/MapImageLayerView2D","3d":"../views/3d/layers/DynamicLayerView3D"})],e.prototype,"viewModulePaths",void 0),e=a([m.subclass("esri.layers.DynamicLayer")],e)})},"esri/layers/mixins/ArcGISDynamicMapService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/PropertyOrigin ./ArcGISMapService ../support/Sublayer ../support/sublayerUtils ../../core/Collection ../../core/CollectionFlattener ../support/ExportImageParameters ../../geometry/support/scaleUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t){function w(a,b,c){var d=[],e={};return a.forEach(function(a){var f=new l;(f.read(a,b),c&&-1===c.indexOf(f.id)?f.visible=!1:f.visible=!0,e[f.id]=f,null!=a.parentLayerId&&-1!==a.parentLayerId)?(a=e[a.parentLayerId],a.sublayers||(a.sublayers=[]),a.sublayers.unshift(f)):d.unshift(f)}),d}function q(a,c){var d=c.get(a.id);return d?(b.mixin(a.__accessor__.store._values,d.__accessor__.store._values),d.sublayers&&(a.sublayers=d.sublayers.map(function(a){return q(a,c)}))):
a.sublayers&&a.sublayers.forEach(function(a){return q(a,c)}),a}e=function(a){function c(){var b=a.call(this)||this;return b.allSublayers=new u({root:b,rootCollectionNames:["sublayers"],getChildrenFunction:function(a){return a.sublayers}}),b.dpi=96,b.gdbVersion=null,b.imageFormat="png24",b.imageMaxHeight=2048,b.imageMaxWidth=2048,b.imageTransparency=!0,b.loaded=!1,b.sublayers=null,b.watch("sublayers",function(a,c){c&&(c.forEach(function(a){a.parent=null;a.layer=null}),b._sublayersHandles.forEach(function(a){return a.remove()}),
b._sublayersHandles=null);a&&(a.forEach(function(a){a.parent=b;a.layer=b}),b._sublayersHandles=[a.on("after-add",function(a){a=a.item;a.parent=b;a.layer=b}),a.on("after-remove",function(a){a=a.item;a.parent=null;a.layer=null})])},!0),b}return d(c,a),c.prototype.readCapabilities=function(a,b){a=a&&a.split(",").map(function(a){return a.trim()});return a=a||[],b.supportsDynamicLayers&&a.push("DynamicLayers"),a},c.prototype.readImageFormat=function(a,b){return(a=b.supportedImageFormatTypes)&&-1<a.indexOf("PNG32")?
"png32":"png24"},c.prototype.readServiceSublayers=function(a,b,c){return w(b.layers,c)},c.prototype.readSublayersFromItemOrWebMap=function(a,b,c){return!b.layers&&b.visibleLayers?b.visibleLayers.map(function(a){return{id:a}}):w(b.layers,c,b.visibleLayers)},c.prototype.readSublayers=function(a,b,c){a=w(b.layers,c);return this._updateSublayersForOrigin(m.OriginId.PORTAL_ITEM,a),this._updateSublayersForOrigin(m.OriginId.WEB_MAP,a),this._updateSublayersForOrigin(m.OriginId.WEB_SCENE,a),a},c.prototype.writeSublayers=
function(a,c,d,e){a=a.flatten(function(a){return(a=a.sublayers)&&a.toArray().reverse()}).toArray().reverse();var f=this.serviceSublayers.flatten(function(a){return(a=a.sublayers)&&a.toArray().reverse()}).toArray().reduce(function(a,b){return a.set(b.id,b),a},new Map),h=!1,k=!0;this.capabilities&&-1!==this.capabilities.indexOf("DynamicLayers")?(h=g.isExportDynamic(a,this.serviceSublayers,this),k=!h&&g.sameStructureAsService(a,this.serviceSublayers)):k=g.sameStructureAsService(a,this.serviceSublayers);
c.layers=[];a.forEach(function(a){var d=f.get(a.id),d=b.mixin({writeAsDynamic:h,writeOverridesOnly:k,serviceSublayer:d},e);a=a.write({},d);(!k||k&&1<Object.keys(a).length)&&c.layers.push(a)});c.visibleLayers=a.filter(function(a){return a.visible}).map(function(a){return a.id})},c.prototype.findSublayerById=function(a){return this.allSublayers.find(function(b){return b.id===a})},c.prototype.createServiceSublayers=function(){return this.serviceSublayers.map(function(a){return a.clone()})},c.prototype.createExportImageParameters=
function(a,c,d,e){a&&10<=this.version&&(a=a.clone().shiftCentralMeridian());var f=new r({layer:this,scale:t.getScale({extent:a,width:c})}),g=f.toJSON();f.layer=null;f.destroy();var f=!e||!e.rotation||10.3>this.version?{}:{rotation:-e.rotation},h=a&&a.spatialReference,h=h.wkid||JSON.stringify(h.toJSON());return e&&null!=e.pixelRatio&&(g.dpi*=e.pixelRatio),b.mixin({bbox:a&&a.xmin+","+a.ymin+","+a.xmax+","+a.ymax,bboxSR:h,imageSR:h,size:c+","+d},g,f)},c.prototype._updateSublayersForOrigin=function(a,
b){var c=this.__accessor__.store;if(c.has("sublayers",a)){var d=c.get("sublayers",a).flatten(function(a){return a.sublayers});if(d.every(function(a){return!a.__accessor__.store._values.hasOwnProperty("minScale")})){var e=d.reduce(function(a,b){return a.set(b.id,b),a},new Map);b=b.map(function(a){return q(a.clone(),e)});c.set("sublayers",new (n.ofType(l))(b),a)}}},c}(c.declared(k));return a([c.property({readOnly:!0})],e.prototype,"allSublayers",void 0),a([c.property({readOnly:!0})],e.prototype,"capabilities",
void 0),a([c.reader("service","capabilities",["supportsDynamicLayers"])],e.prototype,"readCapabilities",null),a([c.property()],e.prototype,"dpi",void 0),a([c.property()],e.prototype,"gdbVersion",void 0),a([c.property()],e.prototype,"imageFormat",void 0),a([c.reader("imageFormat",["supportedImageFormatTypes"])],e.prototype,"readImageFormat",null),a([c.property({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],e.prototype,"imageMaxHeight",void 0),a([c.property({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],
e.prototype,"imageMaxWidth",void 0),a([c.property()],e.prototype,"imageTransparency",void 0),a([c.property()],e.prototype,"loaded",void 0),a([c.property({readOnly:!0,type:n.ofType(l)})],e.prototype,"serviceSublayers",void 0),a([c.reader("service","serviceSublayers",["layers"])],e.prototype,"readServiceSublayers",null),a([c.property({type:n.ofType(l)})],e.prototype,"sublayers",void 0),a([c.reader(["web-map","web-scene","portal-item"],"sublayers",["layers","visibleLayers"])],e.prototype,"readSublayersFromItemOrWebMap",
null),a([c.reader("service","sublayers",["layers"])],e.prototype,"readSublayers",null),a([c.writer(["web-map","web-scene","portal-item"],"sublayers")],e.prototype,"writeSublayers",null),e=a([c.subclass("esri.layers.mixins.ArcGISDynamicMapService")],e)})},"esri/layers/support/Sublayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/paramHelper ../../core/accessorSupport/decorators dojo/io-query ../../core/Collection ../../core/JSONSupport ../../core/Logger ../../core/lang ../../core/accessorSupport/ensureType ../../core/accessorSupport/write ../../renderers/support/jsonUtils ../../tasks/QueryTask ../../tasks/support/Query ../../PopupTemplate ./LabelClass ./layerSourceUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f){var p=g.getLogger("esri.layers.support.Sublayer"),z=0;e=y=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b._sublayersHandles=null,b}return d(b,a),Object.defineProperty(b.prototype,"definitionExpression",{get:function(){return this._get("definitionExpression")},set:function(a){this._setAndNotifyLayer("definitionExpression",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"id",{get:function(){var a=this._get("id");
return null==a?z++:a},set:function(a){this._set("id",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"labelingInfo",{get:function(){return this._get("labelingInfo")},set:function(a){this._setAndNotifyLayer("labelingInfo",a)},enumerable:!0,configurable:!0}),b.prototype.writeLabelingInfo=function(a,b,c,d){(!d||d.writeAsDynamic)&&a&&a.length&&(b.layerDefinition={drawingInfo:{labelingInfo:a.map(function(a){return a.write({},d)})}})},Object.defineProperty(b.prototype,"labelsVisible",
{get:function(){return this._get("labelsVisible")},set:function(a){this._setAndNotifyLayer("labelsVisible",a)},enumerable:!0,configurable:!0}),b.prototype.writeLabelsVisible=function(a,b,c,d){d&&!d.writeAsDynamic||(b.showLabels=a)},Object.defineProperty(b.prototype,"legendEnabled",{get:function(){return this._get("legendEnabled")},set:function(a){this._set("legendEnabled",a)},enumerable:!0,configurable:!0}),b.prototype.writeLegendEnabled=function(a,b,c,d){b.showLegend=!!a},Object.defineProperty(b.prototype,
"layer",{set:function(a){this._set("layer",a);this.sublayers&&this.sublayers.forEach(function(b){return b.layer=a})},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"minScale",{get:function(){return this._get("minScale")},set:function(a){this._set("minScale",a)},enumerable:!0,configurable:!0}),b.prototype.readMinScale=function(a,b){return b.minScale||b.layerDefinition&&b.layerDefinition.minScale||0},b.prototype.writeMinScale=function(a,b,c,d){if(d&&d.writeOverridesOnly&&(c=d&&d.serviceSublayer)&&
c.minScale===a&&c.maxScale===this.maxScale)return;b.minScale=a},Object.defineProperty(b.prototype,"maxScale",{get:function(){return this._get("maxScale")},set:function(a){this._set("maxScale",a)},enumerable:!0,configurable:!0}),b.prototype.readMaxScale=function(a,b){return b.maxScale||b.layerDefinition&&b.layerDefinition.maxScale||0},b.prototype.writeMaxScale=function(a,b,c,d){if(d&&d.writeOverridesOnly&&(c=d&&d.serviceSublayer)&&c.maxScale===a&&c.minScale===this.minScale)return;b.maxScale=a},Object.defineProperty(b.prototype,
"opacity",{get:function(){return this._get("opacity")},set:function(a){this._setAndNotifyLayer("opacity",a)},enumerable:!0,configurable:!0}),b.prototype.readOpacity=function(a,b){return 1-.01*b.layerDefinition.drawingInfo.transparency},b.prototype.writeOpacity=function(a,b,c,d){d&&!d.writeAsDynamic||(b.layerDefinition={drawingInfo:{transparency:100-100*a}})},b.prototype.writeParent=function(a,b,c,d){d&&d.writeOverridesOnly||(this.parent&&this.parent!==this.layer?b.parentLayerId=this.parent.id:b.parentLayerId=
-1)},Object.defineProperty(b.prototype,"popupTemplate",{get:function(){return this._get("popupTemplate")},set:function(a){this._set("popupTemplate",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"renderer",{get:function(){return this._get("renderer")},set:function(a){this._setAndNotifyLayer("renderer",a)},enumerable:!0,configurable:!0}),b.prototype.readRenderer=function(a,b,c){return a=b.layerDefinition.drawingInfo.renderer||void 0,a&&(a=t.read(a,b,c)||void 0,a||p.error("Failed to create renderer",
{rendererDefinition:b.drawingInfo.renderer,layer:this,context:c})),a},b.prototype.writeRenderer=function(a,b,c,d){d&&!d.writeAsDynamic||(b.layerDefinition={drawingInfo:{renderer:a.toJSON()}})},Object.defineProperty(b.prototype,"source",{get:function(){return this._get("source")||{mapLayerId:this.id,type:f.MAPLAYER}},set:function(a){this._setAndNotifyLayer("source",a)},enumerable:!0,configurable:!0}),b.prototype.writeSource=function(a,b,c,d){d&&!d.writeAsDynamic&&d.writeOverridesOnly||(b.layerDefinition=
{source:f.sourceToJSON(a)})},Object.defineProperty(b.prototype,"sublayers",{set:function(a){var b=this,c=this._get("sublayers");c&&(c.forEach(function(a){a.parent=null;a.layer=null}),this._sublayersHandles.forEach(function(a){return a.remove()}),this._sublayersHandles=null);a&&(a.forEach(function(a){a.parent=b;a.layer=b.layer}),this._sublayersHandles=[a.on("after-add",function(a){a=a.item;a.parent=b;a.layer=b.layer}),a.on("after-remove",function(a){a=a.item;a.parent=null;a.layer=null})]);this._set("sublayers",
a)},enumerable:!0,configurable:!0}),b.prototype.castSublayers=function(a){return u["default"](k.ofType(y),a)},b.prototype.writeSublayers=function(a,b,c,d){d&&d.writeOverridesOnly||(b.subLayerIds=this.get("sublayers.length")?this.sublayers.map(function(a){return a.id}).toArray().reverse():null)},Object.defineProperty(b.prototype,"title",{get:function(){return this._get("title")},set:function(a){this._set("title",a)},enumerable:!0,configurable:!0}),b.prototype.writeTitle=function(a,b,c,d){if(d&&d.writeOverridesOnly&&
(c=d&&d.serviceSublayer)&&c.title===a)return;b.name=a},Object.defineProperty(b.prototype,"url",{get:function(){var a=this.layer,b=this.source;if(!a)return null;if(f.isMapLayerSource(b))return a.parsedUrl.path+"/"+b.mapLayerId;b={layer:JSON.stringify({source:f.sourceToJSON(this.source)})};return a.parsedUrl.path+"/dynamicLayer?"+m.objectToQuery(b)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"visible",{get:function(){return this._get("visible")},set:function(a){this._setAndNotifyLayer("visible",
a)},enumerable:!0,configurable:!0}),b.prototype.writeVisible=function(a,b,c,d){if(d&&d.writeOverridesOnly&&(c=d&&d.serviceSublayer)&&c.visible===a)return;b.defaultVisibility=a},b.prototype.clone=function(){var a=new y;return this.hasOwnProperty("definitionExpression")&&(a.definitionExpression=this.definitionExpression),this.hasOwnProperty("id")&&(a.id=this.id),this.hasOwnProperty("labelingInfo")&&(a.labelingInfo=n.clone(this.labelingInfo)),this.hasOwnProperty("labelsVisible")&&(a.labelsVisible=this.labelsVisible),
this.hasOwnProperty("legendEnabled")&&(a.legendEnabled=this.legendEnabled),this.hasOwnProperty("visible")&&(a.visible=this.visible),this.hasOwnProperty("layer")&&(a.layer=this.layer),this.hasOwnProperty("minScale")&&(a.minScale=this.minScale),this.hasOwnProperty("maxScale")&&(a.maxScale=this.maxScale),this.hasOwnProperty("opacity")&&(a.opacity=this.opacity),this.hasOwnProperty("parent")&&(a.parent=this.parent),this.hasOwnProperty("popupTemplate")&&(a.popupTemplate=this.popupTemplate.clone()),this.hasOwnProperty("renderer")&&
(a.renderer=this.renderer.clone()),this.hasOwnProperty("source")&&(a.source=n.clone(this.source)),this.hasOwnProperty("sublayers")&&(a.sublayers=this.sublayers.clone()),this.hasOwnProperty("title")&&(a.title=this.title),a},b.prototype.createQuery=function(){return new q({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})},b.prototype.queryFeatures=function(a){var b=this;void 0===a&&(a=this.createQuery());return(new w({url:this.url})).execute(a).then(function(a){return a&&a.features&&a.features.forEach(function(a){a.popupTemplate=
b.popupTemplate}),a})},b.prototype.toExportImageJSON=function(){var a={id:this.id,source:f.sourceToJSON(this.source)};this.definitionExpression&&(a.definitionExpression=this.definitionExpression);if(this.renderer||this.labelingInfo||null!=this.opacity||null!=this.labelsVisible){var b=a.drawingInfo={};this.renderer&&(b.renderer=this.renderer.toJSON());null!=this.labelsVisible&&(b.showLabels=this.labelsVisible);!1!==this.labelsVisible&&this.labelingInfo&&(b.labelingInfo=this.labelingInfo);null!=this.opacity&&
(b.transparency=100-100*this.opacity)}return a},b.prototype._setAndNotifyLayer=function(a,b){var c=this.layer;this._get(a)!==b&&(this._set(a,b),c&&c.emit("sublayer-update",{propertyName:a}))},b}(c.declared(l));a([c.property({value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],e.prototype,"definitionExpression",null);a([c.property({json:{write:{ignoreOrigin:!0}}})],e.prototype,"id",null);a([c.property({value:null,type:[x],
json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"}}})],e.prototype,"labelingInfo",null);a([c.writer("labelingInfo")],e.prototype,"writeLabelingInfo",null);a([c.property({json:{read:{source:"showLabels"}}})],e.prototype,"labelsVisible",null);a([c.writer("labelsVisible")],e.prototype,"writeLabelsVisible",null);a([c.property({value:!0,type:Boolean,json:{read:{source:"showLegend"}}})],e.prototype,"legendEnabled",null);a([c.writer("showLegend")],e.prototype,"writeLegendEnabled",null);a([c.property({value:null})],
e.prototype,"layer",null);a([c.property({value:0,json:{write:{overridePolicy:function(a,b,c){return r.willPropertyWrite(this,"maxScale",{},c)?{ignoreOrigin:!0}:void 0}}}})],e.prototype,"minScale",null);a([c.reader("portal-item","minScale",["minScale","layerDefinition.minScale"])],e.prototype,"readMinScale",null);a([c.writer("minScale")],e.prototype,"writeMinScale",null);a([c.property({value:0,json:{write:{overridePolicy:function(a,b,c){return r.willPropertyWrite(this,"minScale",{},c)?{ignoreOrigin:!0}:
void 0}}}})],e.prototype,"maxScale",null);a([c.reader("portal-item","maxScale",["maxScale","layerDefinition.maxScale"])],e.prototype,"readMaxScale",null);a([c.writer("maxScale")],e.prototype,"writeMaxScale",null);a([c.property()],e.prototype,"opacity",null);a([c.reader("opacity",["layerDefinition.drawingInfo.transparency"])],e.prototype,"readOpacity",null);a([c.writer("opacity")],e.prototype,"writeOpacity",null);a([c.property({json:{write:{allowNull:!0}}})],e.prototype,"parent",void 0);a([c.writer("parent")],
e.prototype,"writeParent",null);a([c.property({value:null,type:v,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],e.prototype,"popupTemplate",null);a([c.property({value:null,json:{write:{target:"layerDefinition.drawingInfo.renderer"}}})],e.prototype,"renderer",null);a([c.reader("renderer",["layerDefinition.drawingInfo.renderer"])],e.prototype,"readRenderer",null);a([c.writer("renderer")],e.prototype,"writeRenderer",null);a([c.property({cast:f.castSource,json:{read:{source:"layerDefinition.source",
reader:f.sourceFromJSON}}})],e.prototype,"source",null);a([c.writer("source")],e.prototype,"writeSource",null);a([c.property({value:null,json:{write:{allowNull:!0}}})],e.prototype,"sublayers",null);a([c.cast("sublayers")],e.prototype,"castSublayers",null);a([c.writer("sublayers")],e.prototype,"writeSublayers",null);a([c.property({value:null,json:{read:{source:"name"},write:{allowNull:!0,ignoreOrigin:!0}}})],e.prototype,"title",null);a([c.writer("title")],e.prototype,"writeTitle",null);a([c.property({readOnly:!0,
dependsOn:["layer","source"]})],e.prototype,"url",null);a([c.property({value:!0,json:{read:{source:"defaultVisibility"}}})],e.prototype,"visible",null);a([c.writer("visible")],e.prototype,"writeVisible",null);a([b(0,c.cast(q))],e.prototype,"queryFeatures",null);e=y=a([c.subclass("esri.layers.support.Sublayer")],e);var y;return e})},"esri/layers/support/layerSourceUtils":function(){define(["require","exports","../../core/lang","../../core/kebabDictionary"],function(e,h,d,a){function b(a){return null!=
a&&a.hasOwnProperty("mapLayerId")}function c(a){return null!=a&&a.hasOwnProperty("dataSource")}function m(a){if(a&&(b(a)&&(a.type=h.MAPLAYER),c(a)&&(a.type=h.DATALAYER,!a.dataSource.type))){var d=a.dataSource;d.workspaceId?d.gdbVersion?d.type="table":d.query||d.oidFields?d.type="query-table":d.type="raster":d.leftTableKey&&d.rightTableKey&&d.leftTableSource&&d.rightTableSource&&(d.type="join-table",d.leftTableSource=m(d.leftTableSource),d.rightTableSource=m(d.rightTableSource))}return a}function k(a){var b=
{};if(a.type===h.MAPLAYER)b.mapLayerId=a.mapLayerId,a.gdbVersion&&(b.gdbVersion=a.gdbVersion);else if(a.type===h.DATALAYER){a.fields&&(b.fields=a.fields);var c;c=a.dataSource;var e;switch(c.type){case "table":e={dataSourceName:c.dataSourceName,workspaceId:c.workspaceId,gdbVersion:c.gdbVersion};break;case "query-table":e={geometryType:g.toJSON(c.geometryType),workspaceId:c.workspaceId,query:c.query,oidFields:c.oidFields,spatialReference:c.spatialReference};break;case "join-table":e={leftTableSource:k(c.leftTableSource),
rightTableSource:k(c.rightTableSource),leftTableKey:c.leftTableKey,rightTableKey:c.rightTableKey,joinType:r.toJSON(c.joinType)};break;case "raster":e={workspaceId:c.workspaceId,dataSourceName:c.dataSourceName}}c=(e.type=u.toJSON(c.type),d.fixJson(e));b.dataSource=c}return b.type=n.toJSON(a.type),d.fixJson(b)}function l(a){var b={};if(n.fromJSON(a.type)===h.MAPLAYER)b.mapLayerId=a.mapLayerId,a.gdbVersion&&(b.gdbVersion=a.gdbVersion);else if(n.fromJSON(a.type)===h.DATALAYER){a.fields&&(b.fields=a.fields);
var c;c=a.dataSource;var e;switch(c.type){case "table":e={dataSourceName:c.dataSourceName,workspaceId:c.workspaceId,gdbVersion:c.gdbVersion};break;case "queryTable":e={geometryType:g.fromJSON(c.geometryType),workspaceId:c.workspaceId,query:c.query,oidFields:c.oidFields,spatialReference:c.spatialReference};break;case "joinTable":e={leftTableSource:l(c.leftTableSource),rightTableSource:l(c.rightTableSource),leftTableKey:c.leftTableKey,rightTableKey:c.rightTableKey,joinType:r.fromJSON(c.joinType)};break;
case "raster":e={workspaceId:c.workspaceId,dataSourceName:c.dataSourceName}}c=(e.type=u.fromJSON(c.type),d.fixJson(e));b.dataSource=c}return b.type=n.fromJSON(a.type),d.fixJson(b)}Object.defineProperty(h,"__esModule",{value:!0});h.MAPLAYER="map-layer";h.DATALAYER="data-layer";var g=a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),n=a({mapLayer:h.MAPLAYER,dataLayer:h.DATALAYER}),u=a({joinTable:"join-table",
queryTable:"query-table"}),r=a({esriLeftOuterJoin:"left-outer-join",esriLeftInnerJoin:"left-inner-join"});h.isMapLayerSource=b;h.isDataLayerSource=c;h.castSource=m;h.sourceToJSON=k;h.sourceFromJSON=l})},"esri/layers/support/sublayerUtils":function(){define(["require","exports","./layerSourceUtils"],function(e,h,d){function a(a,c){function b(a){var c=a.sublayers;d.unshift(a.id);c&&c.forEach(b)}if(!a||!a.length)return!0;var d=[];if(c.forEach(b),a.length>d.length)return!1;c=0;for(var e=d.length,g=0;g<
a.length;g++){for(var h=a[g].id;e>c&&d[c]!==h;)c++;if(c>=e)return!1}return!0}Object.defineProperty(h,"__esModule",{value:!0});h.isExportDynamic=function(b,c,e){return b.some(function(a){var b=a.source;return!(!b||b.type===d.MAPLAYER&&b.mapLayerId===a.id&&(!b.gdbVersion||b.gdbVersion===e.gdbVersion))||null!=a.renderer||null!=a.labelingInfo||a.hasOwnProperty("opacity")&&null!=a.opacity||a.hasOwnProperty("labelsVisible")&&null!=a.labelsVisible})?!0:!a(b,c)};h.sameStructureAsService=function(a,c){return c.flatten(function(a){return(a=
a.sublayers)&&a.toArray().reverse()}).toArray().reverse().every(function(b,c){return(c=a[c])&&b.id===c.id&&(null==b.sublayers&&null==c.sublayers||null!=b.sublayers&&null!=c.sublayers&&b.sublayers.map(function(a){return a.id}).join(",")===c.sublayers.map(function(a){return a.id}).join(","))})}})},"esri/layers/support/ExportImageParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators dojo/_base/lang ../../core/Accessor ./sublayerUtils".split(" "),
function(e,h,d,a,b,c,m,k){var l={visible:"visibleSublayers",definitionExpression:"layerDefs",labelsVisible:"hasDynamicLayers",labelingInfo:"hasDynamicLayers",opacity:"hasDynamicLayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.scale=0,b}return d(b,a),Object.defineProperty(b.prototype,"dynamicLayers",{get:function(){if(!this.hasDynamicLayers)return null;var a=this.visibleSublayers.map(function(a){return a.toExportImageJSON()});
return a.length?JSON.stringify(a):null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"hasDynamicLayers",{get:function(){return k.isExportDynamic(this.visibleSublayers,this.layer.serviceSublayers,this.layer)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"layer",{set:function(a){var b=this;this._get("layer")!==a&&(this._set("layer",a),this._layerHandles&&(this._layerHandles.forEach(function(a){return a.remove()}),this._layerHandles.length=0),a&&(this._layerHandles=
[a.allSublayers.on("change",function(){return b.notifyChange("visibleSublayers")}),a.on("sublayer-update",function(a){return b.notifyChange(l[a.propertyName])})]))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"layers",{get:function(){var a=this.visibleSublayers;return a?a.length?"show:"+a.map(function(a){return a.id}).join(","):"show:-1":null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"layerDefs",{get:function(){var a=this.visibleSublayers.filter(function(a){return null!=
a.definitionExpression});return a.length?JSON.stringify(a.reduce(function(a,b){return a[b.id]=b.definitionExpression,a},{})):null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"version",{get:function(){return(this._get("version")||0)+1},set:function(a){this._set("version",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"visibleSublayers",{get:function(){var a=this,b=this.layer.sublayers,c=[],d=function(b){var e=a.scale,g=0===b.minScale||e<=b.minScale,f=0===
b.maxScale||e>=b.maxScale;b.visible&&(0===e||g&&f)&&(b.sublayers?b.sublayers.forEach(d):c.unshift(b))};return b&&b.forEach(d),c},enumerable:!0,configurable:!0}),b.prototype.toJSON=function(){var a=this.layer,a={dpi:a.dpi,format:a.imageFormat,transparent:a.imageTransparency,gdbVersion:a.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?a.dynamicLayers=this.dynamicLayers:c.mixin(a,{layers:this.layers,layerDefs:this.layerDefs}),a},b}(b.declared(m));return a([b.property({readOnly:!0,
dependsOn:["hasDynamicLayers","visibleSublayers"]})],e.prototype,"dynamicLayers",null),a([b.property({readOnly:!0,dependsOn:["visibleSublayers","layer.serviceSublayers","layer.capabilities"]})],e.prototype,"hasDynamicLayers",null),a([b.property()],e.prototype,"layer",null),a([b.property({readOnly:!0,dependsOn:["visibleSublayers"]})],e.prototype,"layers",null),a([b.property({readOnly:!0,dependsOn:["visibleSublayers"]})],e.prototype,"layerDefs",null),a([b.property({type:Number})],e.prototype,"scale",
void 0),a([b.property({dependsOn:"layers layerDefs dynamicLayers layer.dpi layer.imageFormat layer.imageTransparency layer.gdbVersion".split(" ")})],e.prototype,"version",null),a([b.property({readOnly:!0,dependsOn:["layer.sublayers","scale"]})],e.prototype,"visibleSublayers",null),e=a([b.subclass("esri.layers.mixins.ExportImageParameters")],e)})},"esri/widgets/Legend/support/colorRampUtils":function(){define("require exports ../../../Color ./utils ../../../core/numberUtils ../../../symbols/support/gfxUtils".split(" "),
function(e,h,d,a,b,c){function m(a,b){var c=b-a;b=[0,.25,.5,.75,1].map(function(b){return Number((a+b*c).toFixed(6))});return k(0,4,b),b}function k(a,b,c){var d=a+(b-a)/2,e=c[0],g=c[1],h=c[2],l=Math.floor(e),f=Math.floor(g),m=Math.floor(h);l===e&&m===h&&f!==g&&l!==f&&m!==f&&(c[d]=f);a+1!==d&&k(a,d,c);d+1!==b&&k(d,b,c)}Object.defineProperty(h,"__esModule",{value:!0});var l=[64,64,64],g=[255,255,255];h.getRampBorderColor=function(a){var b=null;if("simple"===a.type)b=a.symbol;else if("uniqueValue"===
a.type||"classBreaks"===a.type)b=(a=(a=a.classBreakInfos||a.uniqueValueInfos)&&a[0])&&a.symbol;return(a=(a=b&&-1===b.type.indexOf("line-symbol")?c.getStroke(b):null)&&a.color)&&0<a.a&&!(240<=a.r&&240<=a.g&&240<=a.b)?a:null};h.getRampOverlayColor=function(a){var b=new d(g);return b.a=1-a,b};h.getRampStops=function(c,e,g){var h=!1,k=[],n=[];if(e.colors||e.opacityValues)k=m(e.minDataValue,e.maxDataValue);else if(e.stops){var r=e.stops,k=r.map(function(a){return a.value});(h=r.some(function(a){return!!a.label}))&&
(n=r.map(function(a){return a.label}))}var u=k[0],r=k[k.length-1];if(null==u&&null==r)return null;var f=r-u;return k.map(function(m,t){var p;if("opacity"===e.type){p=g;void 0===p&&(p=l);p=new d(p);var q=c.getOpacity(m,{opacityInfo:e});p=(null!=q&&(p.a=q),p)}else p=c.getColor(m,{colorInfo:e});t=h?n[t]:a.getLabelPrefix(t,k.length-1)+b.format(m);return{value:m,color:p,label:t,offset:f?1-(m-u)/f:1}}).reverse()}})},"esri/widgets/Legend/support/utils":function(){define(["require","exports"],function(e,
h){Object.defineProperty(h,"__esModule",{value:!0});h.getLabelPrefix=function(d,a){return 0===d?"\x3c ":d===a?"\x3e ":""}})},"esri/widgets/Legend/support/sizeRampUtils":function(){define("require exports ../../../symbols/Symbol3D ../../../symbols/SimpleMarkerSymbol ../../../symbols/PictureMarkerSymbol ../../../symbols/SimpleLineSymbol ../../../symbols/support/symbolUtils ../../../core/numberUtils ./utils".split(" "),function(e,h,d,a,b,c,m,k,l){function g(a,b){var c=null,d=null;if("simple"===a.type)c=
a.symbol;else if("uniqueValue"===a.type||"classBreaks"===a.type)c=(c=(a=a.classBreakInfos||a.uniqueValueInfos)&&a[0])&&c.symbol,d=1<a.length;if(!c||n(c))b=null;else{c=c.clone();if(b||d)-1<c.type.indexOf("3d")?u(c):(b=c,-1!==b.type.indexOf("line-symbol")?b.color=p:(b.color=x,"simple-marker-symbol"===b.type&&(b.outline={color:p,width:1.5})));b=c}return b}function n(a){if(a)return-1<a.type.indexOf("3d")?(a=a.symbolLayers)?a.some(function(a){return a&&"fill"===a.type}):!1:-1!==a.type.indexOf("fill-symbol")}
function u(a){m.isVolumetricSymbol(a)||(-1!==a.type.indexOf("line-symbol-3d")?a.symbolLayers.forEach(function(a){a.material={color:p}}):a.symbolLayers.forEach(function(a){"icon"!==a.type||a.resource&&a.resource.href?a.material={color:f}:(a.material={color:x},a.outline={color:p,size:1.5})}))}function r(a,b,c,d){var e=a.getSizeRangeAtScale(b,d),f=e&&t(e);if(e||f){for(var g=f.map(function(a){var c=e.minSize,d=e.maxSize,f=b.minDataValue,g=b.maxDataValue;return c>=a?f:a>=d?g:(a-c)/(d-c)*(g-f)+f}),g=k.round(g),
h=1;h<g.length-1;h++){var l=w(a,b,c,g[h],g[h-1],d);l&&(g[h]=l[0],f[h]=l[1])}return g}}function t(a){var b=a.minSize,c=y;a=(a.maxSize-b)/(c-1);for(var d=[],e=0;c>e;e++)d.push(b+a*e);return d}function w(a,b,c,d,e,f){var g=q(a,b,c,d,f);e=q(a,b,c,e,f);var h=k.numDigits(d),l=h.fractional,m=z,p=h.integer,n=h=null;0<d&&1>d&&(h=Math.pow(10,l),d*=h,p=k.numDigits(d).integer);for(l=p-1;0<=l;l--){var t=Math.pow(10,l),p=Math.floor(d/t)*t,t=Math.ceil(d/t)*t;null!=h&&(p/=h,t/=h);var r=(p+t)/2,r=k.round([p,r,t],
{indexes:[1]}),r=r[1],u=q(a,b,c,p,f),v=q(a,b,c,t,f),w=q(a,b,c,r,f),x=k.percentChange(g,u,e,null),B=k.percentChange(g,v,e,null),y=k.percentChange(g,w,e,null),A=x.previous<=m,D=B.previous<=m;if(A&&D&&(x.previous<=B.previous?(A=!0,D=!1):(D=!0,A=!1)),A?n=[p,u]:D?n=[t,v]:y.previous<=m&&(n=[r,w]),n)break}return n}function q(a,b,c,d,e){return a.getSize(d,{sizeInfo:b,scale:e,shape:-1!==c.type.indexOf("marker-symbol")?c.style:null})}function v(e,f){e=e.clone();if(e.isInstanceOf(d))m.isVolumetricSymbol(e)||
e.symbolLayers.forEach(function(a){"fill"!==a.type&&(a.size=f)});else if(e.isInstanceOf(a))e.size=f;else if(e.isInstanceOf(b)){var g=e.width,h=e.height;e.height=f;e.width=g/h*f}else e.isInstanceOf(c)?e.width=f:e.isInstanceOf(c)&&e.font&&(e.font.size=f);return e}Object.defineProperty(h,"__esModule",{value:!0});var x=[255,255,255],f=[200,200,200],p=[128,128,128],z=20,y=5;h.getRampStops=function(a,b,c,d){var e=b.legendOptions,e=e&&e.customValues,f=g(a,c);c=null!=b.minSize&&null!=b.maxSize;var h=b.stops&&
1<b.stops.length,p=!!b.target;if(f&&(e||c||h&&!p)){var n=m.isVolumetricSymbol(f),t=null,u=null,z=null,u=n&&!h?[b.minDataValue,b.maxDataValue]:e||r(a,b,f,d);!u&&h&&(u=b.stops.map(function(a){return a.value}),t=b.stops.some(function(a){return!!a.label}),t&&(z=b.stops.map(function(a){return a.label})));e=!n||u&&2===u.length;if(!u||!e)return null;var w=[12,30];return u.map(function(c,e){var g=n?w[e]:q(a,b,f,c,d),h=v(f,g);e=t?z[e]:l.getLabelPrefix(e,u.length-1)+k.format(c);return{value:c,symbol:h,label:e,
size:g}}).reverse()}}})},"esri/symbols/support/symbolPreview":function(){define(["require","exports","./previewSymbol2D","./previewSymbol3D"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});h.renderPreviewHTML=function(b,c){return-1===b.type.indexOf("3d")?d.previewSymbol2D(b,c):a.previewSymbol3D(b,c)}})},"esri/symbols/support/previewSymbol2D":function(){define("require exports dojox/gfx/_base ../SimpleMarkerSymbol ../../core/promiseUtils ../../core/Error ../../core/screenUtils ./renderUtils ./previewUtils ./gfxUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g){Object.defineProperty(h,"__esModule",{value:!0});h.previewSymbol2D=function(e,h){var n=h&&h.size?m.pt2px(h.size):null,t=h&&h.maxSize?m.pt2px(h.maxSize):null,u=g.getStroke(e),q={shape:null,fill:g.getFill(e),stroke:u};u&&u.width&&(u.width=Math.min(u.width,80));var v=0,x=0,f=u&&u.width||0,p=!1,z=null;switch(e.type){case "simple-marker-symbol":v=a.defaultProps;u=e.style;n=Math.min(n||m.pt2px(e.size||v.size),t||120);switch(v=n,x=n,u){case a.STYLE_CIRCLE:q.shape={type:"circle",
cx:0,cy:0,r:.5*n};break;case a.STYLE_CROSS:q.shape={type:"path",path:[{command:"M",values:[0,.5*x]},{command:"L",values:[v,.5*x]},{command:"M",values:[.5*v,0]},{command:"L",values:[.5*v,x]},{command:"E",values:[]}]};break;case a.STYLE_DIAMOND:q.shape={type:"path",path:[{command:"M",values:[0,.5*x]},{command:"L",values:[.5*v,0]},{command:"L",values:[v,.5*x]},{command:"L",values:[.5*v,x]},{command:"Z",values:[]}]};break;case a.STYLE_SQUARE:q.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",
values:[v,0]},{command:"L",values:[v,x]},{command:"L",values:[0,x]},{command:"Z",values:[]}]};break;case a.STYLE_X:q.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[v,x]},{command:"M",values:[v,0]},{command:"L",values:[0,x]},{command:"E",values:[]}]};break;case a.STYLE_PATH:p=!0,q.shape={type:"path",path:e.path||""}}break;case "simple-line-symbol":e=Math.min(n||f,t||80);v=22<e?2*e:40;x=e;u.width=e;f=0;q.shape={type:"path",path:[{command:"M",values:[0,.5*x]},{command:"L",values:[v,
.5*x]},{command:"E",values:[]}]};break;case "picture-fill-symbol":case "simple-fill-symbol":q.shape=l.shapes.fill[0];break;case "picture-marker-symbol":var z=t||120,u=m.pt2px(e.width),y=m.pt2px(e.height),z=Math.min(n||Math.max(u,y),z),v=u/y,u=1>=v?Math.ceil(z*v):z,y=1>=v?z:Math.ceil(z/v),v=u,x=y,z=h.opacity;q.shape={type:"image",x:-Math.round(u/2),y:-Math.round(y/2),width:u,height:y,src:e.url||""};break;case "text-symbol":u=e.text||"Aa";y=e.font;n=Math.min(n||m.pt2px(y.size),t||120);for(x=v=0;x<u.length;x++)t=
u.charAt(x),t=t===t.toUpperCase()?.7:.5,v+=n*t;x=n;q.shape={type:"text",text:u,x:0,y:.25*d.normalizedLength((y?n:0).toString()),align:"middle",decoration:e.decoration||y&&y.decoration,rotated:e.rotated,kerning:e.kerning};q.font=y&&{size:n,style:y.style,variant:y.variant,decoration:y.decoration,weight:y.weight,family:y.family}}return q.shape?(v=(v||22)+2*f,x=(x||22)+2*f,b.resolve(k.renderSymbol([[q]],[v,x],{node:h&&h.node,scale:p,opacity:z}))):b.reject(new c("symbolPreview: renderPreviewHTML2D","symbol not supported."))}})},
"esri/symbols/support/renderUtils":function(){define("require exports dojo/_base/lang dojo/Deferred dojox/gfx/matrix dojox/gfx ../../request ../../core/sniff ../../core/Error ../../core/promiseUtils ../../core/urlUtils".split(" "),function(e,h,d,a,b,c,m,k,l,g,n){function u(a){return a.map(function(a){return a.command+" "+a.values.join(",")}).join(" ").trim()}function r(a,e,g,h){var f=h&&h.node||document.createElement("div"),k=c.createSurface(f,e,g);null!=h.opacity&&(f.style.opacity=h.opacity.toString());
try{a.forEach(function(a){var c=k.createGroup(),f=0;a.forEach(function(a){var b=a.shape,d=a.fill,e=a.stroke;f+=e&&e.width||0;var g=null;b&&("path"===b.type&&"string"!=typeof b.path&&(b.path=u(b.path)),"image"===b.type&&b.src&&"data:"!==b.src.substr(0,5)&&(b.src+=(-1===b.src.indexOf("?")?"?":"\x26")+"legend\x3d1"),g=c.createShape(b).setFill(d).setStroke(e?e:{width:0}),"text"===b.type&&g.setFont(a.font))});var l=c.getBoundingBox();a=l.width;var m=l.height,p=-(l.x+a/2),n=-(l.y+m/2),t=k.getDimensions(),
p={dx:p+t.width/2,dy:n+t.height/2},n=!1;if(h.scale&&0!==l.width&&0!==l.height){var n=l.width/l.height,q=(e>g?e:g)-2*f,r=1,v=1;isNaN(q)||(1<n?(r=q/l.width,v=q/n/l.height):(v=q/l.height,r=q*n/l.width));c.applyTransform(b.scaleAt(r,v,t.width/2,t.height/2));n=!0}!n&&(a>e||m>g)&&(l=a/e>m/g,a=((l?e:g)-5)/(l?a:m),d.mixin(p,{xx:a,yy:a}));c.applyTransform(p)})}catch(z){return k.clear(),k.destroy(),null}return f}function t(b,c,d,e){if(!b)return g.reject(new l("renderUtils: imageDataSize","href not provided."));
var f;if(n.isDataProtocol(b)){var h=new Image;if(h.src=b,h.complete)f=g.resolve({data:h});else{var k=new a;f=k.promise;h.onload=function(){k.resolve({data:h})};h.onerror=k.reject}}else d||(b+=(-1===b.indexOf("?")?"?":"\x26")+"legend\x3d1"),f=m(b,{responseType:"image",allowImageDataAccess:d});return f.then(function(a){a=a.data;var b=a.width,f=a.height,g=b/f,h=c;e&&(h=Math.min(h,Math.max(b,f)));return{image:d?a:null,width:1>=g?Math.ceil(h*g):h,height:1>=g?h:Math.ceil(h/g)}}).otherwise(function(a){if(d)return t(b,
c,!1,e);throw a;})}Object.defineProperty(h,"__esModule",{value:!0});h.renderSymbol=function(a,b,c){var d=Math.ceil(b[0]);b=Math.ceil(b[1]);return a.some(function(a){return!!a.length})?r(a,d,b,c):null};h.tintImageWithColor=function(a,b,c,d){return t(a,b,!!c,d).then(function(d){var e=d.width?d.width:b,f=d.height?d.height:b;if(d.image&&c){var g=d.image.width,h=d.image.height;(k("edge")||k("ie"))&&/\.svg$/i.test(a)&&(--g,--h);var l,m;l=Math.ceil(e);m=Math.ceil(f);var n=document.createElement("canvas");
n.width=l;n.height=m;n.style.width=l+"px";n.style.height=m+"px";n=n.getContext("2d");l=(n.clearRect(0,0,l,m),n);l.drawImage(d.image,0,0,g,h,0,0,e,f);d=l.getImageData(0,0,e,f);g=c.r/255;h=c.g/255;m=c.b/255;for(var n=c.a,t=0;t<d.data.length;t+=4)d.data[t+0]*=g,d.data[t+1]*=h,d.data[t+2]*=m,d.data[t+3]*=n;l.putImageData(d,0,0);a=l.canvas.toDataURL("image/png")}return{url:a,width:e,height:f}}).otherwise(function(){return{url:a,width:b,height:b}})}})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base",
"./gfx/renderer!"],function(e,h,d){h.switchTo(d);return h})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(e,h,d,a,b){var c=null;d.add("vml",function(a,b,c){c.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';a="adj"in c.firstChild;c.innerHTML="";return a});return{load:function(m,k,l){function g(){k(["dojox/gfx/"+n],function(a){e.renderer=n;c=a;l(a)})}if(c&&"force"!=m)l(c);else{var n=b.forceGfxRenderer;m=!n&&(h.isString(b.gfxRenderer)?
b.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var u,r;!n&&m.length;)switch(m.shift()){case "svg":"SVGAngle"in a.global&&(n="svg");break;case "vml":d("vml")&&(n="vml");break;case "silverlight":try{d("ie")?(u=new ActiveXObject("AgControl.AgControl"),u.IsVersionSupported("1.0"))&&(r=!0):navigator.plugins["Silverlight Plug-In"]&&(r=!0)}catch(t){r=!1}finally{u=null}r&&(n="silverlight");break;case "canvas":a.global.CanvasRenderingContext2D&&(n="canvas")}"canvas"===n&&!1!==b.canvasEvents&&(n=
"canvasWithEvents");b.isDebug&&console.log("gfx renderer \x3d "+n);"svg"==n&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(g):g()}}}})},"esri/symbols/support/previewUtils":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});h.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],
extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],
cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},
{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},
{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};h.getExtrudeSymbolShapes=function(d){d*=.5;return[{type:"path",path:[{command:"M",values:[0,22*.35]},{command:"L",values:[6.6,.7*22]},{command:"L",values:[6.6,.7*22+d]},{command:"L",values:[0,.7*22+d-22*.35]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,.7*22]},{command:"L",values:[6.6,.7*22+d]},{command:"L",values:[22,d]},{command:"L",values:[22,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,0]},
{command:"L",values:[22,0]},{command:"L",values:[6.6,.7*22]},{command:"L",values:[0,22*.35]},{command:"Z",values:[]}]}]};h.getCubeShapes=function(d,a){var b=a?20:d,c=a?4:6,c=b-=22>=b?.5*c:c;a=a?.35*b:.5*b;return[{type:"path",path:[{command:"M",values:[.5*c,0]},{command:"L",values:[c,.5*a]},{command:"L",values:[.5*c,a]},{command:"L",values:[0,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*c,a]},{command:"L",values:[.5*c,d]},{command:"L",values:[0,
d-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*c,a]},{command:"L",values:[.5*c,d]},{command:"L",values:[c,d-.5*a]},{command:"L",values:[c,.5*a]},{command:"Z",values:[]}]}]};h.getCylinderShapes=function(d,a){var b=a?20:d;a=a?4:6;b-=22>=b?.5*a:a;a=.5*b;var c=.15*b;d-=c;return[{type:"ellipse",cx:.5*b,cy:d,rx:a,ry:c},{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[0,d]},{command:"L",values:[b,d]},{command:"L",values:[b,c]},{command:"Z",values:[]}]},{type:"ellipse",
cx:.5*b,cy:c,rx:a,ry:c}]};h.getConeShapes=function(d,a){var b=a?20:d;a=a?4:6;b-=22>=b?.5*a:a;a=.15*b;var c=b;d-=a;return[{type:"ellipse",cx:.5*b,cy:d,rx:.5*b,ry:a},{type:"path",path:[{command:"M",values:[.5*c,0]},{command:"L",values:[c,d]},{command:"L",values:[0,d]},{command:"Z",values:[]}]}]};h.getInvertedConeShapes=function(d){var a=d,a=a-(22>a?3:6),b=.15*a,c=a;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[c,0]},{command:"L",values:[.5*c,d-b]},{command:"Z",values:[]}]},
{type:"ellipse",cx:.5*a,cy:0,rx:.5*a,ry:b}]};h.getDiamondShapes=function(d){var a=d-(22>d?2:4),b=Math.floor(d/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*a,0]},{command:"L",values:[a,.5*d-b]},{command:"L",values:[.45*a-b,.5*d+b]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*a,0]},{command:"L",values:[.45*a-b,.5*d+b]},{command:"L",values:[0,.5*d-b]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*d-b]},{command:"L",values:[.45*a-b,.5*
d+b]},{command:"L",values:[.45*a,d]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*a,d]},{command:"L",values:[a,.5*d-b]},{command:"L",values:[.45*a-b,.5*d+b]},{command:"Z",values:[]}]}]};h.getTetrahedronShapes=function(d){var a=d-(22>d?1:2);return[{type:"path",path:[{command:"M",values:[.45*d,0]},{command:"L",values:[d,a]},{command:"L",values:[.45*d,.6*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*d,0]},{command:"L",values:[.45*d,.6*a]},{command:"L",
values:[0,a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[.45*d,.6*a]},{command:"L",values:[d,a]},{command:"Z",values:[]}]}]}})},"esri/symbols/support/previewSymbol3D":function(){define("require exports ../../core/Logger ../../core/promiseUtils ../../core/Error ../../core/screenUtils ./symbolUtils ./gfxUtils ./renderUtils ./previewUtils".split(" "),function(e,h,d,a,b,c,m,k,l,g){function n(a){var b=a.outline,d=a.get("material.color"),d=d&&d.toRgba().toString();
if(!b)return"fill"===a.type&&"255,255,255,1"===d?{color:"#bdc3c7",width:.75}:null;a=c.pt2px(b.size)||0;return{color:"rgba("+(null!=b.color?b.color.toRgba():"255,255,255,1")+")",width:Math.min(a,F)}}function u(b,c){var d=c&&c.resource;return d&&d.href&&"object"!==c.type?a.resolve(m.getIconHref(b,c)):b.thumbnail&&b.thumbnail.url?a.resolve(b.thumbnail.url):b.styleOrigin&&(b.styleOrigin.styleName||b.styleOrigin.styleUrl)?m.fetchStyleSymbol(b.styleOrigin,{portal:b.styleOrigin.portal}).always(function(a){return a&&
a.thumbnail&&a.thumbnail.url||A}):a.resolve(A)}function r(a,b){if(!a.material||!a.material.color)return a=Math.min(Math.max(k.defaultThematicColor.r+191.25*b,0),255),[a,a,a,100];for(var c=a.material.color.toRgb(),d=0;3>d;d++)c[d]=Math.min(Math.max(c[d]+191.25*b,0),255);return c.push(a.material.color.a),c}function t(a){return a.outline?n(a):{color:"rgba(0, 0, 0, 1)",width:1.5}}function w(a,b){if(!a.material)return{};for(var d=a.material.color.toRgb(),e="rgba(",f=0;3>f;f++)e+=Math.min(Math.max(d[f]+
191.25*b,0),255)+",";e+=a.material.color.a+");";a=a.size?c.pt2px(a.size):.75;return{color:e,width:Math.min(a,F)}}function q(a,b,c){c*=.75;return{type:"linear",x1:c?.25*c:0,y1:c?.5*c:0,x2:c||4,y2:c?.5*c:4,colors:[{color:a,offset:0},{color:b,offset:1}]}}function v(a){var b=a.depth,c=a.height;return(a=a.width)&&b&&c&&a===b&&c>a}function x(a,b,c,d){var e=a&&a.type,f="object"===e,h=[];if("icon"===e)switch(b){case "circle":h.push({shape:{type:"circle",cx:0,cy:0,r:.5*c},fill:r(a,0),stroke:n(a)});break;case "square":h.push({shape:{type:"path",
path:[{command:"M",values:[0,c]},{command:"L",values:[0,0]},{command:"L",values:[c,0]},{command:"L",values:[c,c]},{command:"Z",values:[]}]},fill:r(a,0),stroke:n(a)});break;case "cross":h.push({shape:{type:"path",path:[{command:"M",values:[.5*c,0]},{command:"L",values:[.5*c,c]},{command:"M",values:[0,.5*c]},{command:"L",values:[c,.5*c]},{command:"E",values:[]}]},stroke:t(a)});break;case "x":h.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[c,c]},{command:"M",values:[c,
0]},{command:"L",values:[0,c]},{command:"E",values:[]}]},stroke:t(a)});break;case "kite":h.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[.5*c,0]},{command:"L",values:[c,.5*c]},{command:"L",values:[.5*c,c]},{command:"Z",values:[]}]},fill:r(a,0),stroke:n(a)})}else if(f)switch(b){case "cone":b=r(a,0);a=r(a,-.6);a=q(b,a,d?E:c);c=g.getConeShapes(c,d);h.push({shape:c[0],fill:a});h.push({shape:c[1],fill:a});break;case "inverted-cone":d=r(a,0);a=r(a,-.6);a=q(d,a,c);c=g.getInvertedConeShapes(c);
h.push({shape:c[0],fill:a});h.push({shape:c[1],fill:d});break;case "cube":c=g.getCubeShapes(c,d);h.push({shape:c[0],fill:r(a,0)});h.push({shape:c[1],fill:r(a,-.3)});h.push({shape:c[2],fill:r(a,-.5)});break;case "cylinder":b=r(a,0);e=r(a,-.6);b=q(b,e,d?E:c);c=g.getCylinderShapes(c,d);h.push({shape:c[0],fill:b});h.push({shape:c[1],fill:b});h.push({shape:c[2],fill:r(a,0)});break;case "diamond":c=g.getDiamondShapes(c);h.push({shape:c[0],fill:r(a,-.3)});h.push({shape:c[1],fill:r(a,0)});h.push({shape:c[2],
fill:r(a,-.3)});h.push({shape:c[3],fill:r(a,-.7)});break;case "sphere":d=r(a,0);a=r(a,-.6);a=q(d,a);a.x1=0;a.y1=0;a.x2=.25*c;a.y2=.25*c;h.push({shape:{type:"circle",cx:0,cy:0,r:.5*c},fill:a});break;case "tetrahedron":c=g.getTetrahedronShapes(c),h.push({shape:c[0],fill:r(a,-.3)}),h.push({shape:c[1],fill:r(a,0)}),h.push({shape:c[2],fill:r(a,-.6)})}return h}function f(b,d){var e,f=d&&d.size?c.pt2px(d.size):null,g=d&&d.maxSize?c.pt2px(d.maxSize):null,h=d&&d.disableUpsampling,k=b.symbolLayers,m=[],p=0,
t=0,q=k.getItemAt(k.length-1);return q&&"icon"===q.type&&(e=q.size&&c.pt2px(q.size)),k.forEach(function(q,r){var z=q&&q.type,w="icon"===z,z="object"===z,y=w?q.size&&c.pt2px(q.size):0,A=f||y?Math.ceil(Math.min(f||y,g||D)):B;if(w||z){var F=n(q),C=F?F.width:0;if(q&&q.resource&&q.resource.href)r=u(b,q).then(function(a){return l.tintImageWithColor(a,A,q.get("material.color"),h)}).then(function(a){var b=a.width,c=a.height;return p=Math.max(p,b+2*C),t=Math.max(t,c+2*C),[{shape:{type:"image",width:b,height:c,
src:a.url},fill:null,stroke:null}]}),m.unshift(r);else{var F=(F=q.get("resource.primitive"))?F:w?"circle":"sphere",H=A;w&&(H=r<k.length-1&&f?y/e*A:A);r=d&&"tall"===d.symbolConfig||(z?v(q):!1);p=Math.max(p,r?E:H+2*C);t=Math.max(t,H+2*C);m.unshift(a.resolve(x(q,F,H,r)))}}}),a.eachAlways(m).then(function(a){var b=[];return a.forEach(function(a){a.value?b.push(a.value):a.error&&G.warn("error while building swatchInfo!",a.error)}),l.renderSymbol(b,[p,t],{node:d&&d.node,scale:!1})})}function p(b,d){var e,
f=b.symbolLayers,h=[];b=m.isVolumetricSymbol(b);var k=d&&d.size?c.pt2px(d.size):null,p=(d&&d.maxSize?c.pt2px(d.maxSize):null)||F,n=0,t=0;return f.forEach(function(a,b){var c=a&&a.type,d="line"===c;if(d||"path"===c){var f=w(a,0),l=f&&f.width||0,c=[];d?(0===b&&(e=l),a=Math.min(k||l,p),a=0===b?a:k?l/e*a:a,b=a>B?2*a:C,t=Math.max(t,a),n=Math.max(n,b),f.width=a,c.push({shape:{type:"path",path:[{command:"M",values:[0,.5*t]},{command:"L",values:[n,.5*t]},{command:"E",values:[]}]},stroke:f})):(f=Math.min(k||
B,p),b=r(a,0),d=r(a,-.2),a=w(a,-.4),a.width=1,c.push({shape:g.shapes.pathSymbol3DLayer[0],fill:d,stroke:a}),c.push({shape:g.shapes.pathSymbol3DLayer[1],fill:b,stroke:a}),n=t=Math.max(t,f+2));h.push(c)}}),a.resolve(l.renderSymbol(h,[n,t],{node:d&&d.node,scale:b}))}function z(b,d){var e=b.type===y;b=b.symbolLayers;var f=d&&d.size?c.pt2px(d.size):null,h=d&&d.maxSize?c.pt2px(d.maxSize):null,k=f||B,m=[],p=0,t=0;return b.forEach(function(a){var b=a.type,c="fill"===b,d="line"===b,f="extrude"===a.type,b=
[];if(!e||c){var l=g.shapes.fill[0];c?(d=(c=n(a))&&c.width||0,p=Math.max(p,B+d),t=Math.max(t,B+d),b.push({shape:l,fill:r(a,0),stroke:c})):d?(a=(c=w(a,0))&&c.width||0,l={stroke:c,shape:l},p=Math.max(p,B+a),t=Math.max(t,B+a),b.push(l)):f&&(l=w(a,-.4),c=r(a,0),a=r(a,-.2),d=Math.min(k,h||D),f=g.getExtrudeSymbolShapes(d),l.width=1,b.push({shape:f[0],fill:a,stroke:l}),b.push({shape:f[1],fill:a,stroke:l}),b.push({shape:f[2],fill:c,stroke:l}),a=.7*B+.5*d,p=Math.max(p,B+2*l.width),t=Math.max(t,a+2*l.width));
m.push(b)}}),a.resolve(l.renderSymbol(m,[p,t],{node:d&&d.node,scale:!1}))}Object.defineProperty(h,"__esModule",{value:!0});var y="mesh-symbol-3d",A=e.toUrl("../../images/Legend/legend3dsymboldefault.png"),B=22,D=120,F=80,C=40,E=20,G=d.getLogger("esri.symbols.support.previewSymbol3D");h.previewSymbol3D=function(c,d){if(0===c.symbolLayers.length)return a.reject(new b("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));var e=null;switch(c.type){case "point-symbol-3d":e=f(c,d);break;
case "line-symbol-3d":e=p(c,d);break;case "polygon-symbol-3d":case y:e=z(c,d)}return e?e:a.reject(new b("symbolPreview: swatchInfo3D","symbol not supported."))}})},"esri/widgets/Legend/nls/Legend":function(){define({root:{points:"Points",lines:"Lines",polygons:"Polygons",creatingLegend:"Creating legend",noLegend:"No legend",dotValue:"1 Dot \x3d {value} {unit}",currentObservations:"Current observations",previousObservations:"Previous observations",high:"High",low:"Low",esriMetersPerSecond:"m/s",esriKilometersPerHour:"km/h",
esriKnots:"knots",esriFeetPerSecond:"ft/sec",esriMilesPerHour:"mph",showField:"{field}",showNormField:"{field} divided by {normField}",showNormPct:"{field} as a percent of the total",showRatio:"Ratio of {field} to {normField}",showRatioPercent:"{field} as a percent of {normField}",showRatioPercentTotal:"{field} as a percent of {field} and {normField}"},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,
th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/widgets/LayerList":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Widget ./support/widget dojo/i18n!../nls/common dojo/i18n!./LayerList/nls/LayerList ../core/HandleRegistry ./LayerList/LayerListViewModel ../core/watchUtils".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u){var r=e.toUrl("./LayerList/images/default-action.svg");e=function(a){function b(){var b=
a.call(this)||this;return b._handleRegistry=new g,b.createActionsFunction=null,b.statusIndicatorsVisible=!0,b.listItemCreatedFunction=null,b.operationalItems=null,b.view=null,b.viewModel=new n,b}return d(b,a),b.prototype.postInitialize=function(){var a=this,b=this.operationalItems;this.own(u.on(this,"operationalItems","change",function(){return a._itemsChanged(b)}))},b.prototype.destroy=function(){this._handleRegistry.destroy();this._handleRegistry=null},b.prototype.triggerAction=function(a,b){},
b.prototype.render=function(){var a=this,b=this._getItems(),c=this.get("viewModel.state"),b=0===b.length?m.tsx("div",{"class":"esri-layer-list__no-items"},l.noItemsToDisplay):m.tsx("ul",{"class":m.join("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},b.map(function(b,c){return a._renderItem(b,null)})),c=(d={},d["esri-hidden"]="loading"===c,d["esri-disabled"]="disabled"===c,d);return m.tsx("div",{"class":"esri-layer-list esri-widget",classes:c},b);var d},
b.prototype._getItems=function(){var a=this;return this.operationalItems.toArray().filter(function(b){return a.errorsVisible||!b.error})},b.prototype._renderItem=function(a,b){var c=this,d=this.id+"_"+a.uid,e=d+"_actions",g=d+"__list",h=d+"__title",n=!!a.children.length,t=!!a.error,u=t?l.layerError:"",r=a.visibilityMode,q=a.children&&a.children.toArray(),v=(w={},w["esri-layer-list__list--exclusive"]="exclusive"===r,w["esri-layer-list__list--inherited"]="inherited"===r,w["esri-layer-list__list--independent"]=
"inherited"!==r&&"exclusive"!==r,w),w=(L={},L["esri-layer-list__item--has-children"]=n,L["esri-layer-list__item--error"]=!!u,L["esri-layer-list__item--updating"]=a.updating&&!b&&this.statusIndicatorsVisible,L["esri-layer-list__item--invisible-at-scale"]=!a.visibleAtCurrentScale,L),K=this._countActions(a.actionsSections),L=K?this._renderActionMenuItem(a,a.actionsSections):null,H=(I={},I["esri-icon-handle-horizontal"]=!a.actionsOpen,I["esri-icon-close"]=a.actionsOpen,I),I=a.actionsOpen?k.close:k.open,
I=1<K?m.tsx("div",{key:d+"__actions-menu-toggle","data-item":a,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,"class":"esri-layer-list__item-actions-menu-item",tabindex:"0",role:"button","aria-controls":e,"aria-label":I,title:I},m.tsx("span",{"aria-hidden":"true",classes:H})):null,L=K?m.tsx("div",{key:d+"__actions-menu","class":"esri-layer-list__item-actions-menu"},L,I):null,e=1<K?this._renderActionsSections(a,a.actionsSections,e):null,r=n?m.tsx("ul",{key:g,id:g,"class":"esri-layer-list__list",
classes:v,"aria-expanded":a.open?"true":"false",role:"exclusive"===r?"radiogroup":"group",hidden:a.open?null:!0},q.map(function(b,d){return c._renderItem(b,a)})):null,q=(N={},N["esri-layer-list__child-toggle--open"]=a.open,N),N=a.open?k.collapse:k.expand,g=n?m.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":a,key:d+"__toggle-children","class":"esri-layer-list__child-toggle",classes:q,tabindex:"0",role:"button","aria-controls":g,"aria-label":N,title:N},
m.tsx("span",{"aria-hidden":"true","class":m.join("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),m.tsx("span",{"aria-hidden":"true","class":m.join("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),m.tsx("span",{"aria-hidden":"true","class":m.join("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):null;b=this._createLabelNode(a,b,d,h);t=t?m.tsx("div",{key:d+"__error","class":"esri-layer-list__item-error-message",
role:"alert"},m.tsx("span",{"aria-hidden":"true","class":"esri-icon-notice-triangle"}),m.tsx("span",null,u)):null;return m.tsx("li",{key:d+"__list-item","class":"esri-layer-list__item",classes:w,"aria-labelledby":h},m.tsx("div",{key:d+"__list-item-container","class":"esri-layer-list__item-container"},g,b,L),t,e,r);var w,L,I,N},b.prototype._createLabelNode=function(a,b,c,d){c+="__label";b=b&&b.visibilityMode;var e=(f={},f["esri-icon-radio-checked"]="exclusive"===b&&a.visible,f["esri-icon-radio-unchecked"]=
"exclusive"===b&&!a.visible,f["esri-icon-visible"]="exclusive"!==b&&a.visible,f["esri-icon-non-visible"]="exclusive"!==b&&!a.visible,f),f="exclusive"===b?"radio":"checkbox",g=a.visibleAtCurrentScale?"":l.layerInvisibleAtScale,h=a.title||l.untitledLayer,g=m.tsx("span",{id:d,"class":"esri-layer-list__item-title"},m.tsx("span",{title:g,"aria-label":g}),h);return"inherited"===b?m.tsx("div",{key:c,"class":"esri-layer-list__item-label"},g):m.tsx("div",{key:c,onclick:this._labelClick,onkeydown:this._labelClick,
"data-item":a,"data-parent-visibility":b,tabindex:"0","aria-checked":a.visible?"true":"false",role:f,"aria-labelledby":d,"class":"esri-layer-list__item-label"},m.tsx("span",{"class":"esri-layer-list__item-toggle"},m.tsx("span",{"class":"esri-layer-list__item-toggle-icon","aria-hidden":"true",classes:e})),g);var f},b.prototype._renderActionMenuItem=function(a,b){if(b=(b=b.getItemAt(0))&&b.getItemAt(0)){var c=this._getActionImageStyles(b),d=(e={},e[b.className]=b.className,e["esri-layer-list__item-action-image"]=
c["background-image"],e),e=b.title;return m.tsx("div",{key:b.uid+"__action-menu-item",bind:this,"data-item":a,"data-action":b,onclick:this._triggerAction,onkeydown:this._triggerAction,"class":"esri-layer-list__item-actions-menu-item",role:"button",tabindex:"0",title:e,"aria-label":e},m.tsx("span",{classes:d,styles:c}))}var e},b.prototype._watchActionSectionChanges=function(a,b){var c=this,d="action-section"+b;this._handleRegistry.add(a.on("change",this.scheduleRender.bind(this)),d);a.forEach(function(a){return c._renderOnActionChanges(a,
b)})},b.prototype._renderOnActionChanges=function(a,b){var c=this;b="actions"+b;this._handleRegistry.add([u.init(a,"className, image, id, title, visible",function(){return c.scheduleRender()})],b)},b.prototype._renderOnItemChanges=function(a){var b=this,c=a.uid,d="items"+c;this._handleRegistry.add([u.init(a,"actionsOpen, visible, open, updating, title, visibleAtCurrentScale, error, visibilityMode",function(){return b.scheduleRender()}),a.actionsSections.on("change",function(){return b.scheduleRender()}),
a.children.on("change",function(){return b.scheduleRender()})],d);a.children.forEach(function(a){return b._renderOnItemChanges(a)});a.actionsSections.forEach(function(a){return b._watchActionSectionChanges(a,c)})},b.prototype._itemsChanged=function(a){var b=this;this._handleRegistry.removeAll();a.forEach(function(a){return b._renderOnItemChanges(a)});this.scheduleRender()},b.prototype._renderActionsSections=function(a,b,c){var d=this,e=this.id+"_"+a.uid;b=b.toArray().map(function(b){return m.tsx("ul",
{key:e+"__actions-list","class":"esri-layer-list__item-actions-list"},d._renderActionSection(a,b))});return m.tsx("div",{role:"group","aria-expanded":a.actionsOpen?"true":"false",key:e+"__actions-section",id:c,"class":"esri-layer-list__item-actions",hidden:a.actionsOpen?null:!0},b)},b.prototype._renderActionSection=function(a,b){var c=this;return(b&&b.toArray()).map(function(b){return c._renderAction(a,b)})},b.prototype._renderAction=function(a,b){var c=this._getActionImageStyles(b),d=(e={},e[b.className]=
b.className,e["esri-layer-list__item-action-image"]=c["background-image"],e);return m.tsx("li",{key:b.uid+"__action",bind:this,"data-item":a,"data-action":b,onclick:this._triggerAction,onkeydown:this._triggerAction,"class":"esri-layer-list__item-action",tabindex:"0",role:"button",title:b.title,"aria-label":b.title},m.tsx("span",{"aria-hidden":"true","class":"esri-layer-list__item-action-icon",classes:d,styles:c}),m.tsx("span",{"class":"esri-layer-list__item-action-title"},b.title));var e},b.prototype._countActions=
function(a){return a.reduce(function(a,b){return a+b.length},0)},b.prototype._getActionImageStyles=function(a){var b=a.image||null;return a.className||b||(b=r),{"background-image":b?'url("'+b+'")':null}},b.prototype._toggleActionsOpen=function(a){a=a.currentTarget["data-item"];a.actionsOpen=!a.actionsOpen},b.prototype._triggerAction=function(a){a=a.currentTarget;this.triggerAction(a["data-action"],a["data-item"])},b.prototype._labelClick=function(a){var b=a.currentTarget;a=b.getAttribute("data-parent-visibility");
b=b["data-item"];"exclusive"===a&&b.visible||(b.visible=!b.visible)},b.prototype._toggleChildrenClick=function(a){a=a.currentTarget["data-item"];a.open=!a.open},b}(b.declared(c));return a([b.aliasOf("viewModel.createActionsFunction"),m.renderable()],e.prototype,"createActionsFunction",void 0),a([b.property(),m.renderable()],e.prototype,"statusIndicatorsVisible",void 0),a([b.property(),m.renderable()],e.prototype,"errorsVisible",void 0),a([b.aliasOf("viewModel.listItemCreatedFunction"),m.renderable()],
e.prototype,"listItemCreatedFunction",void 0),a([b.aliasOf("viewModel.operationalItems"),m.renderable()],e.prototype,"operationalItems",void 0),a([b.aliasOf("viewModel.view"),m.renderable()],e.prototype,"view",void 0),a([m.vmEvent("trigger-action"),b.property({type:n}),m.renderable("viewModel.state")],e.prototype,"viewModel",void 0),a([b.aliasOf("viewModel.triggerAction")],e.prototype,"triggerAction",null),a([m.accessibleHandler()],e.prototype,"_toggleActionsOpen",null),a([m.accessibleHandler()],
e.prototype,"_triggerAction",null),a([m.accessibleHandler()],e.prototype,"_labelClick",null),a([m.accessibleHandler()],e.prototype,"_toggleChildrenClick",null),e=a([b.subclass("esri.widgets.LayerList")],e)})},"esri/widgets/LayerList/nls/LayerList":function(){define({root:{noItemsToDisplay:"There are currently no items to display.",layerInvisibleAtScale:"Layer not visible at current scale",layerError:"An error occurred loading this layer",untitledLayer:"Untitled layer"},ar:1,bs:1,cs:1,da:1,de:1,el:1,
es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/widgets/LayerList/LayerListViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/Evented ../../core/HandleRegistry ../../core/watchUtils ./ListItem ./support/layerListUtils dojo/debounce dojo/has ../../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t){var w=r("dojo-debug-messages"),q=c.ofType(g);e=function(a){function b(b){var c=a.call(this)||this;return c._actionsOpenMap=new Map,c._itemOpenMap=new Map,c._handles=new k,c.listItemCreatedFunction=null,c.operationalItems=new q,c.view=null,c._handles.add(l.init(c,"view",function(){return c._viewHandles()}),"view"),c._compileList=u(c._compileList,0),c}return d(b,a),b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null;this.operationalItems.removeAll()},
Object.defineProperty(b.prototype,"createActionsFunction",{get:function(){return this._get("createActionsFunction")||null},set:function(a){w&&console.warn('"createActionsFunction" is deprecated, use "listItemCreatedFunction" instead');this._set("createActionsFunction",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"state",{get:function(){var a=this.get("view");return this.get("view.ready")?"ready":a?"loading":"disabled"},enumerable:!0,configurable:!0}),b.prototype.triggerAction=
function(a,b){a&&this.emit("trigger-action",{action:a,item:b})},b.prototype._createMapHandles=function(a){var b=this;this._handles.remove("map");var c=a&&a.get("map.layers");c&&(c=c.on("change",function(){return b._compileList(a)}),this._handles.add(c,"map"))},b.prototype._resetMapItems=function(a){this._actionsOpenMap.clear();this._itemOpenMap.clear();this._createMapHandles(a);this._compileList(a)},b.prototype._setUpChildActions=function(a){var b=this;a.forEach(function(a){return b._setupActions(a)})},
b.prototype._watchItemProperties=function(a){var b=this;this._handles.add([l.watch(a,"actionsOpen",function(c){b._actionsOpenMap.set(a.layer,c)}),l.watch(a,"open",function(c){b._itemOpenMap.set(a.layer,c)}),a.children.on("change",function(){b._setUpChildActions(a.children)})],"list-items")},b.prototype._modifyListItemChildren=function(a){var b=this;a.forEach(function(a){return b._modifyListItem(a)})},b.prototype._modifyListItem=function(a){"function"==typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,
{item:a});this._modifyListItemChildren(a.children)},b.prototype._setupActions=function(a){if("function"==typeof this.createActionsFunction){var b=this.createActionsFunction.call(null,{item:a});b&&b.length&&(a.actionsSections=b)}this._setUpChildActions(a.children)},b.prototype._createListItem=function(a){var b=!!this._actionsOpenMap.get(a),c=!!this._itemOpenMap.get(a);a=new g({actionsOpen:b,open:c,layer:a,view:this.view});return this._setupActions(a),this._watchItemProperties(a),this._modifyListItem(a),
a},b.prototype._compileList=function(a){var b=this;if(!this.destroyed){this._handles.remove("list-items");var c=a&&a.get("map.layers"),d=[];c&&c.forEach(function(c){l.watch(c,"listMode",function(){return b._compileList(a)});"hide"!==n.findLayerListMode(c)&&(c=b._createListItem(c),d.unshift(c))});this.operationalItems.removeAll();this.operationalItems.addMany(d)}},b.prototype._viewHandles=function(){var a=this,b=this.view;this._handles.remove("layers");this._resetMapItems(b);b&&b.then(function(){a._handles.add([l.init(b,
"map",function(){return a._resetMapItems(b)}),b.layerViews.on("change",function(){return a._compileList(b)}),l.init(a,"createActionsFunction",function(){return a._compileList(b)}),l.init(a,"listItemCreatedFunction",function(){return a._compileList(b)})],"layers")})},b}(t.declared(b,m));return a([t.property()],e.prototype,"createActionsFunction",null),a([t.property()],e.prototype,"listItemCreatedFunction",void 0),a([t.property({type:q})],e.prototype,"operationalItems",void 0),a([t.property({dependsOn:["view.ready"],
readOnly:!0})],e.prototype,"state",null),a([t.property()],e.prototype,"view",void 0),e=a([t.subclass("esri.widgets.LayerList.LayerListViewModel")],e)})},"esri/widgets/LayerList/ListItem":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../support/Action ../../layers/support/Sublayer ../../core/Identifiable ../../core/HandleRegistry ../../core/watchUtils ./support/layerListUtils ../../core/accessorSupport/decorators".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r){var t=c.ofType(c.ofType(m));e=w=function(a){function b(b){b=a.call(this)||this;return b._handles=new g,b.actionsSections=new t,b.actionsOpen=!1,b.children=new (c.ofType(w)),b.error=null,b.open=!1,b.view=null,b.visible=null,b}return d(b,a),b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null},Object.defineProperty(b.prototype,"layer",{set:function(a){this._set("layer",a);this._watchLayerProperties(a)},enumerable:!0,configurable:!0}),
Object.defineProperty(b.prototype,"layerView",{get:function(){return this._findLayerView(this.layer)||null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"title",{get:function(){return this.get("layer.title")||""},set:function(a){return void 0===a?void this._clearOverride("title"):void this._override("title",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"updating",{get:function(){var a=this.layerView;return a?a.updating:this._isLayerUpdating(this.layer)},
enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"visibleAtCurrentScale",{get:function(){return!u.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"visibilityMode",{get:function(){return u.findLayerVisibilityMode(this.layer)||"independent"},enumerable:!0,configurable:!0}),b.prototype.clone=function(){return new w({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),
layer:this.layer,open:this.open,title:this.title,view:this.view,visible:this.visible})},b.prototype._addChildren=function(a){var b=this;if(this.children.removeAll(),a){var c=[];a.forEach(function(a){u.canDisplayLayer(a)&&(a=new w({layer:a,view:b.view}),c.unshift(a))});this.children.addMany(c)}},b.prototype._watchSublayerChanges=function(a){var b=this;a&&this._handles.add(a.on("change",function(){b._addChildren(a)}),"layer")},b.prototype._initializeChildLayers=function(a){this._addChildren(a);this._watchSublayerChanges(a)},
b.prototype._watchLayerProperties=function(a){var b=this;if(this._handles&&(this._handles.remove("layer"),a)){var c=u.getNormalizedChildLayerProperty(a);c&&this._handles.add(n.init(a,c,function(){b._initializeChildLayers(a[c])}),"layer")}},b.prototype._findLayerView=function(a){if(a){var b=this.get("view.allLayerViews");if(b)return b.find(function(b){return b.layer===a})}},b.prototype._isLayerUpdating=function(a){return a instanceof k?!1:"loading"===a.loadStatus},b}(r.declared(b,l));a([r.property({type:t})],
e.prototype,"actionsSections",void 0);a([r.property()],e.prototype,"actionsOpen",void 0);a([r.property({type:c})],e.prototype,"children",void 0);a([r.aliasOf("layer.loadError")],e.prototype,"error",void 0);a([r.property({value:null})],e.prototype,"layer",null);a([r.property({dependsOn:["layer","view"],readOnly:!0})],e.prototype,"layerView",null);a([r.property()],e.prototype,"open",void 0);a([r.property({dependsOn:["layer.title"]})],e.prototype,"title",null);a([r.property({dependsOn:["layer.loadStatus",
"layerView.updating"],readOnly:!0})],e.prototype,"updating",null);a([r.property({value:null})],e.prototype,"view",void 0);a([r.aliasOf("layer.visible")],e.prototype,"visible",void 0);a([r.property({dependsOn:["layer.minScale","layer.maxScale","view.scale"],readOnly:!0})],e.prototype,"visibleAtCurrentScale",null);a([r.property({dependsOn:["layer.visibilityMode"],readOnly:!0})],e.prototype,"visibilityMode",null);e=w=a([r.subclass("esri.widgets.LayerList.ListItem")],e);var w;return e})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["require",
"exports"],function(e,h){function d(a){return a&&a.hasOwnProperty("listMode")?a.listMode:void 0}function a(a){return a&&a.hasOwnProperty("minScale")?a.minScale:void 0}function b(a){return a&&a.hasOwnProperty("maxScale")?a.maxScale:void 0}Object.defineProperty(h,"__esModule",{value:!0});h.findLayerListMode=d;h.findLayerMinScale=a;h.findLayerMaxScale=b;h.findLayerVisibilityMode=function(a){return a&&a.hasOwnProperty("visibilityMode")?a.visibilityMode:void 0};h.getNormalizedChildLayerProperty=function(a){if(a&&
"hide-children"!==a.listMode&&"wmts"!==a.type){var b=void 0;return["sublayers","layers"].some(function(c){return a.hasOwnProperty(c)?(b=c,!0):void 0}),b}};h.canDisplayLayer=function(a){return"hide"!==d(a)};h.isLayerOutsideScaleRange=function(c,d){if(!c||isNaN(d))return!1;var e=a(c);c=b(c);e=!isNaN(e)&&0<e&&d>=e;d=!isNaN(c)&&0<c&&c>=d;return e||d}})},"dojo/debounce":function(){define([],function(){return function(e,h){var d;return function(){d&&clearTimeout(d);var a=this,b=arguments;d=setTimeout(function(){e.apply(a,
b)},h)}}})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(e,h,d,a,b){b=d("dojox.gfx.path.Path",b.Shape,{constructor:function(a){this.shape=h.clone(e.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=a;this.segmented=!1},setAbsoluteMode:function(a){this._confirmSegmented();this.absolute="string"==typeof a?"absolute"==a:a;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},
getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var a=this.bbox,b=this._getRealMatrix();this.bbox=null;for(var d=0,e=this.segments.length;d<e;++d)this._updateWithSegment(this.segments[d],b);b=this.bbox;this.bbox=a;return this.tbbox=b?[{x:b.l,y:b.t},{x:b.r,y:b.t},{x:b.r,y:b.b},{x:b.l,y:b.b}]:
null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(b,d,e){e&&(d=a.multiplyPoint(e,b,d),b=d.x,d=d.y);this.bbox&&"l"in this.bbox?(this.bbox.l>b&&(this.bbox.l=b),this.bbox.r<b&&(this.bbox.r=b),this.bbox.t>d&&(this.bbox.t=d),this.bbox.b<d&&(this.bbox.b=d)):this.bbox={l:b,b:d,r:b,t:d}},_updateWithSegment:function(a,b){var c=a.args,d=c.length,g;switch(a.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(g=
0;g<d;g+=2)this._updateBBox(c[g],c[g+1],b);this.last.x=c[d-2];this.last.y=c[d-1];this.absolute=!0;break;case "H":for(g=0;g<d;++g)this._updateBBox(c[g],this.last.y,b);this.last.x=c[d-1];this.absolute=!0;break;case "V":for(g=0;g<d;++g)this._updateBBox(this.last.x,c[g],b);this.last.y=c[d-1];this.absolute=!0;break;case "m":g=0;"x"in this.last||(this._updateBBox(this.last.x=c[0],this.last.y=c[1],b),g=2);for(;g<d;g+=2)this._updateBBox(this.last.x+=c[g],this.last.y+=c[g+1],b);this.absolute=!1;break;case "l":case "t":for(g=
0;g<d;g+=2)this._updateBBox(this.last.x+=c[g],this.last.y+=c[g+1],b);this.absolute=!1;break;case "h":for(g=0;g<d;++g)this._updateBBox(this.last.x+=c[g],this.last.y,b);this.absolute=!1;break;case "v":for(g=0;g<d;++g)this._updateBBox(this.last.x,this.last.y+=c[g],b);this.absolute=!1;break;case "c":for(g=0;g<d;g+=6)this._updateBBox(this.last.x+c[g],this.last.y+c[g+1],b),this._updateBBox(this.last.x+c[g+2],this.last.y+c[g+3],b),this._updateBBox(this.last.x+=c[g+4],this.last.y+=c[g+5],b);this.absolute=
!1;break;case "s":case "q":for(g=0;g<d;g+=4)this._updateBBox(this.last.x+c[g],this.last.y+c[g+1],b),this._updateBBox(this.last.x+=c[g+2],this.last.y+=c[g+3],b);this.absolute=!1;break;case "A":for(g=0;g<d;g+=7)this._updateBBox(c[g+5],c[g+6],b);this.last.x=c[d-2];this.last.y=c[d-1];this.absolute=!0;break;case "a":for(g=0;g<d;g+=7)this._updateBBox(this.last.x+=c[g+5],this.last.y+=c[g+6],b);this.absolute=!1}a=[a.action];for(g=0;g<d;++g)a.push(e.formatNumber(c[g],!0));if("string"==typeof this.shape.path)this.shape.path+=
a.join("");else for(g=0,d=a.length;g<d;++g)this.shape.path.push(a[g])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(a,b){this.tbbox=null;var c=this._validSegments[a.toLowerCase()];"number"==typeof c&&(c?b.length>=c&&(a={action:a,args:b.slice(0,b.length-b.length%c)},this.segments.push(a),this._updateWithSegment(a)):(a={action:a,args:[]},this.segments.push(a),this._updateWithSegment(a)))},_collectArgs:function(a,b){for(var c=0;c<b.length;++c){var d=b[c];"boolean"==
typeof d?a.push(d?1:0):"number"==typeof d?a.push(d):d instanceof Array?this._collectArgs(a,d):"x"in d&&"y"in d&&a.push(d.x,d.y)}},moveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"M":"m",a);return this},lineTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"L":"l",a);return this},hLineTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?
"H":"h",a);return this},vLineTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"V":"v",a);return this},curveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"C":"c",a);return this},smoothCurveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"S":"s",a);return this},qCurveTo:function(){this._confirmSegmented();var a=
[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"Q":"q",a);return this},qSmoothCurveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"T":"t",a);return this},arcTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"A":"a",a);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var a=
this.shape.path;this.shape.path=[];this._setPath(a);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(a){a=h.isArray(a)?a:a.match(e.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(a){for(var b="",c=[],d=a.length,g=0;g<d;++g){var n=a[g],u=parseFloat(n);isNaN(u)?(b&&this._pushSegment(b,c),c=[],b=n):c.push(u)}this._pushSegment(b,c)}},setShape:function(a){this.inherited(arguments,["string"==typeof a?{path:a}:a]);this.segmented=!1;this.segments=
[];e.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});d=d("dojox.gfx.path.TextPath",b,{constructor:function(a){"text"in this||(this.text=h.clone(e.defaultTextPath));"fontStyle"in this||(this.fontStyle=h.clone(e.defaultFont))},getText:function(){return this.text},setText:function(a){this.text=e.makeParameters(this.text,"string"==typeof a?{text:a}:a);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle="string"==typeof a?
e.splitFontString(a):e.makeParameters(e.defaultFont,a);this._setFont();return this}});return e.path={Path:b,TextPath:d}})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(e,h,d,a,b,c,m,k,l,g){function n(a,b){if(!u)return a.splice(b,1);var c=a.length;if(c){for(;b<c;)a[b]=a[b+1],b++;a.length--}}var u=!!b("chrome"),r=e.shape={};r.Shape=d("dojox.gfx.shape.Shape",
null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(b("gfxRegistry")){var a=r.register(this);this.getUID=function(){return a}}},destroy:function(){b("gfxRegistry")&&r.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},
getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var a=this.getBoundingBox();if(!a)return null;var b=this._getRealMatrix();return[g.multiplyPoint(b,a.x,a.y),g.multiplyPoint(b,a.x+a.width,a.y),g.multiplyPoint(b,a.x+a.width,a.y+a.height),g.multiplyPoint(b,a.x,a.y+a.height)]},getEventSource:function(){return this.rawNode},setClip:function(a){this.clip=a},getClip:function(){return this.clip},
setShape:function(a){this.shape=e.makeParameters(this.shape,a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var b=null;if("object"==typeof a&&"type"in a)switch(a.type){case "linear":b=e.makeParameters(e.defaultLinearGradient,a);break;case "radial":b=e.makeParameters(e.defaultRadialGradient,a);break;case "pattern":b=e.makeParameters(e.defaultPattern,a)}else b=e.normalizeColor(a);this.fillStyle=b;return this},setStroke:function(a){if(!a)return this.strokeStyle=
null,this;if("string"==typeof a||h.isArray(a)||a instanceof l)a={color:a};a=this.strokeStyle=e.makeParameters(e.defaultStroke,a);a.color=e.normalizeColor(a.color);return this},setTransform:function(a){this.matrix=g.clone(a?g.normalize(a):g.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=this.getParent();a&&(a._moveChildToBack(this),
this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},_setParent:function(a,b){this.parent=a;return this._updateParentMatrix(b)},_updateParentMatrix:function(a){this.parentMatrix=
a?g.clone(a):null;return this._applyTransform()},_getRealMatrix:function(){for(var a=this.matrix,b=this.parent;b;)b.matrix&&(a=g.multiply(b.matrix,a)),b=b.parent;return a}});r._eventsProcessing={on:function(a,b){return c(this.getEventSource(),a,r.fixCallback(this,e.fixTarget,b))},connect:function(a,b,c){"on"==a.substring(0,2)&&(a=a.substring(2));return this.on(a,c?h.hitch(b,c):b)},disconnect:function(a){return a.remove()}};r.fixCallback=function(b,c,d,e){e||(e=d,d=null);if(h.isString(e)){d=d||a.global;
if(!d[e])throw['dojox.gfx.shape.fixCallback: scope["',e,'"] is null (scope\x3d"',d,'")'].join("");return function(a){return c(a,b)?d[e].apply(d,arguments||[]):void 0}}return d?function(a){return c(a,b)?e.apply(d,arguments||[]):void 0}:function(a){return c(a,b)?e.apply(d,arguments):void 0}};h.extend(r.Shape,r._eventsProcessing);r.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(a){var b=a.getParent();b&&b.remove(a,
!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,b){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){b||(a.parent=null,a.parentMatrix=null);n(this.children,c);break}return this},clear:function(a){for(var b,c=0;c<this.children.length;++c)b=this.children[c],b.parent=null,b.parentMatrix=null,a&&b.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var a=null;m.forEach(this.children,function(b){var c=b.getBoundingBox();
c&&((b=b.getTransform())&&(c=g.multiplyRectangle(b,c)),a?(a.x=Math.min(a.x,c.x),a.y=Math.min(a.y,c.y),a.endX=Math.max(a.endX,c.x+c.width),a.endY=Math.max(a.endY,c.y+c.height)):a={x:c.x,y:c.y,endX:c.x+c.width,endY:c.y+c.height})});a&&(a.width=a.endX-a.x,a.height=a.endY-a.y);return a}return null},_moveChildToFront:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){n(this.children,b);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==
a){n(this.children,b);this.children.unshift(a);break}return this}};r.Surface=d("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){m.forEach(this._nodes,k.destroy);this._nodes=[];m.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;if(b("ie"))for(;this._parent.lastChild;)k.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},
_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(a){},whenLoaded:function(a,b){var d=h.hitch(a,b);if(this.isLoaded)d(this);else c.once(this,"load",function(a){d(a)})}});h.extend(r.Surface,r._eventsProcessing);r.Rect=d("dojox.gfx.shape.Rect",r.Shape,{constructor:function(a){this.shape=e.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});r.Ellipse=d("dojox.gfx.shape.Ellipse",r.Shape,{constructor:function(a){this.shape=e.getDefault("Ellipse");this.rawNode=
a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});r.Circle=d("dojox.gfx.shape.Circle",r.Shape,{constructor:function(a){this.shape=e.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});r.Line=d("dojox.gfx.shape.Line",r.Shape,{constructor:function(a){this.shape=e.getDefault("Line");this.rawNode=
a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});r.Polyline=d("dojox.gfx.shape.Polyline",r.Shape,{constructor:function(a){this.shape=e.getDefault("Polyline");this.rawNode=a},setShape:function(a,b){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);
return this},_normalizePoints:function(){var a=this.shape.points,b=a&&a.length;if(b&&"number"==typeof a[0]){for(var c=[],d=0;d<b;d+=2)c.push({x:a[d],y:a[d+1]});this.shape.points=c}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,b=a.length,c=a[0],d=c.x,e=c.y,f=c.x,g=c.y,h=1;h<b;++h)c=a[h],d>c.x&&(d=c.x),f<c.x&&(f=c.x),e>c.y&&(e=c.y),g<c.y&&(g=c.y);this.bbox={x:d,y:e,width:f-d,height:g-e}}return this.bbox}});r.Image=d("dojox.gfx.shape.Image",r.Shape,
{constructor:function(a){this.shape=e.getDefault("Image");this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});r.Text=d(r.Shape,{constructor:function(a){this.fontStyle=null;this.shape=e.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle="string"==typeof a?e.splitFontString(a):e.makeParameters(e.defaultFont,a);this._setFont();return this},getBoundingBox:function(){var a=
null;this.getShape().text&&(a=e._base._computeTextBoundingBox(this));return a}});r.Creator={createShape:function(a){switch(a.type){case e.defaultPath.type:return this.createPath(a);case e.defaultRect.type:return this.createRect(a);case e.defaultCircle.type:return this.createCircle(a);case e.defaultEllipse.type:return this.createEllipse(a);case e.defaultLine.type:return this.createLine(a);case e.defaultPolyline.type:return this.createPolyline(a);case e.defaultImage.type:return this.createImage(a);
case e.defaultText.type:return this.createText(a);case e.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(e.Group)},createRect:function(a){return this.createObject(e.Rect,a)},createEllipse:function(a){return this.createObject(e.Ellipse,a)},createCircle:function(a){return this.createObject(e.Circle,a)},createLine:function(a){return this.createObject(e.Line,a)},createPolyline:function(a){return this.createObject(e.Polyline,a)},createImage:function(a){return this.createObject(e.Image,
a)},createText:function(a){return this.createObject(e.Text,a)},createPath:function(a){return this.createObject(e.Path,a)},createTextPath:function(a){return this.createObject(e.TextPath,{}).setText(a)},createObject:function(a,b){return null}};return r})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u){function r(a,
b){return d.doc.createElementNS?d.doc.createElementNS(a,b):d.doc.createElement(b)}function t(a,b,c,d){return a.setAttributeNS?a.setAttributeNS(b,c,d):a.setAttribute(c,d)}function w(a){return q.useSvgWeb?d.doc.createTextNode(a,!0):d.doc.createTextNode(a)}var q=g.svg={};q.useSvgWeb="undefined"!=typeof window.svgweb;var v=navigator.userAgent,x=h("ios"),f=h("android"),p=h("chrome")||f&&4<=f?"auto":"optimizeLegibility";q.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};q.getRef=
function(b){return b&&"none"!=b?b.match(/^url\(#.+\)$/)?a.byId(b.slice(5,-1)):b.match(/^#dojoUnique\d+$/)?a.byId(b.slice(1)):null:null};q.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var z=0;q.Shape=b("dojox.gfx.svg.Shape",n.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var b=this.rawNode.getAttribute("fill");
(b=q.getRef(b))&&b.parentNode.removeChild(b)}this.clip&&(b=this.rawNode.getAttribute("clip-path"))&&(b=a.byId(b.match(/gfx_clip[\d]+/)[0]))&&b.parentNode.removeChild(b);n.Shape.prototype.destroy.apply(this,arguments)},setFill:function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var b,d=function(a){this.setAttribute(a,b[a].toFixed(8))};if("object"==typeof a&&"type"in a){switch(a.type){case "linear":b=g.makeParameters(g.defaultLinearGradient,
a);a=this._setFillObject(b,"linearGradient");c.forEach(["x1","y1","x2","y2"],d,a);break;case "radial":b=g.makeParameters(g.defaultRadialGradient,a);a=this._setFillObject(b,"radialGradient");c.forEach(["cx","cy","r"],d,a);break;case "pattern":b=g.makeParameters(g.defaultPattern,a),a=this._setFillObject(b,"pattern"),c.forEach(["x","y","width","height"],d,a)}this.fillStyle=b;return this}this.fillStyle=b=g.normalizeColor(a);this.rawNode.setAttribute("fill",b.toCss());this.rawNode.setAttribute("fill-opacity",
b.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(a){var b=this.rawNode;if(!a)return this.strokeStyle=null,b.setAttribute("stroke","none"),b.setAttribute("stroke-opacity",0),this;if("string"==typeof a||e.isArray(a)||a instanceof l)a={color:a};a=this.strokeStyle=g.makeParameters(g.defaultStroke,a);a.color=g.normalizeColor(a.color);if(a){var c=0>a.width?0:a.width;b.setAttribute("stroke",a.color.toCss());b.setAttribute("stroke-opacity",a.color.a);b.setAttribute("stroke-width",
c);b.setAttribute("stroke-linecap",a.cap);"number"==typeof a.join?(b.setAttribute("stroke-linejoin","miter"),b.setAttribute("stroke-miterlimit",a.join)):b.setAttribute("stroke-linejoin",a.join);var d=a.style.toLowerCase();d in q.dasharray&&(d=q.dasharray[d]);if(d instanceof Array){var d=e._toArray(d),f;for(f=0;f<d.length;++f)d[f]*=c;if("butt"!=a.cap){for(f=0;f<d.length;f+=2)d[f]-=c,1>d[f]&&(d[f]=1);for(f=1;f<d.length;f+=2)d[f]+=c}d=d.join(",")}b.setAttribute("stroke-dasharray",d);b.setAttribute("dojoGfxStrokeStyle",
a.style)}return this},_getParentSurface:function(){for(var a=this.parent;a&&!(a instanceof g.Surface);a=a.parent);return a},_setFillObject:function(a,b){var c=q.xmlns.svg;this.fillStyle=a;var d=this._getParentSurface().defNode,e=this.rawNode.getAttribute("fill");if(e=q.getRef(e))if(e.tagName.toLowerCase()!=b.toLowerCase()){var f=e.id;e.parentNode.removeChild(e);e=r(c,b);e.setAttribute("id",f);d.appendChild(e)}else for(;e.childNodes.length;)e.removeChild(e.lastChild);else e=r(c,b),e.setAttribute("id",
g._base._getUniqueId()),d.appendChild(e);if("pattern"==b)e.setAttribute("patternUnits","userSpaceOnUse"),c=r(c,"image"),c.setAttribute("x",0),c.setAttribute("y",0),c.setAttribute("width",(0>a.width?0:a.width).toFixed(8)),c.setAttribute("height",(0>a.height?0:a.height).toFixed(8)),t(c,q.xmlns.xlink,"xlink:href",a.src),e.appendChild(c);else for(e.setAttribute("gradientUnits","userSpaceOnUse"),b=0;b<a.colors.length;++b){var d=a.colors[b],f=r(c,"stop"),h=d.color=g.normalizeColor(d.color);f.setAttribute("offset",
d.offset.toFixed(8));f.setAttribute("stop-color",h.toCss());f.setAttribute("stop-opacity",h.a);e.appendChild(f)}this.rawNode.setAttribute("fill","url(#"+e.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return e},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+","+a.dy.toFixed(8)+
")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(a){a=this.rawNode=a;"image"!=this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this},setShape:function(a){this.shape=g.makeParameters(this.shape,a);for(var b in this.shape)if("type"!=
b){a=this.shape[b];if("width"===b||"height"===b)a=0>a?0:a;this.rawNode.setAttribute(b,a)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(b){this.inherited(arguments);var c=b?"width"in b?"rect":"cx"in b?"ellipse":"points"in b?"polyline":"d"in b?"path":null:null;if(b&&!c)return this;"polyline"===
c&&(b=e.clone(b),b.points=b.points.join(","));var d,f=k.get(this.rawNode,"clip-path");f&&(d=a.byId(f.match(/gfx_clip[\d]+/)[0]))&&d.removeChild(d.childNodes[0]);b?(d?(c=r(q.xmlns.svg,c),d.appendChild(c)):(f="gfx_clip"+ ++z,this.rawNode.setAttribute("clip-path","url(#"+f+")"),d=r(q.xmlns.svg,"clipPath"),c=r(q.xmlns.svg,c),d.appendChild(c),this.rawNode.parentNode.insertBefore(d,this.rawNode),k.set(d,"id",f)),k.set(c,b)):(this.rawNode.removeAttribute("clip-path"),d&&d.parentNode.removeChild(d));return this},
_removeClipNode:function(){var b,c=k.get(this.rawNode,"clip-path");c&&(b=a.byId(c.match(/gfx_clip[\d]+/)[0]))&&b.parentNode.removeChild(b);return b}});q.Group=b("dojox.gfx.svg.Group",q.Shape,{constructor:function(){n.Container._init.call(this)},setRawNode:function(a){this.rawNode=a;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);q.Shape.prototype.destroy.apply(this,arguments)}});q.Group.nodeType="g";q.Rect=b("dojox.gfx.svg.Rect",[q.Shape,n.Rect],{setShape:function(a){this.shape=
g.makeParameters(this.shape,a);this.bbox=null;for(var b in this.shape)if("type"!=b&&"r"!=b){a=this.shape[b];if("width"===b||"height"===b)a=0>a?0:a;this.rawNode.setAttribute(b,a)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});q.Rect.nodeType="rect";q.Ellipse=b("dojox.gfx.svg.Ellipse",[q.Shape,n.Ellipse],{});q.Ellipse.nodeType="ellipse";q.Circle=b("dojox.gfx.svg.Circle",[q.Shape,n.Circle],{});q.Circle.nodeType="circle";
q.Line=b("dojox.gfx.svg.Line",[q.Shape,n.Line],{});q.Line.nodeType="line";q.Polyline=b("dojox.gfx.svg.Polyline",[q.Shape,n.Polyline],{setShape:function(a,b){a&&a instanceof Array?(this.shape=g.makeParameters(this.shape,{points:a}),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=g.makeParameters(this.shape,a);this.bbox=null;this._normalizePoints();a=[];b=this.shape.points;for(var c=0;c<b.length;++c)a.push(b[c].x.toFixed(8),b[c].y.toFixed(8));this.rawNode.setAttribute("points",
a.join(" "));return this}});q.Polyline.nodeType="polyline";q.Image=b("dojox.gfx.svg.Image",[q.Shape,n.Image],{setShape:function(a){this.shape=g.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;for(var b in this.shape)if("type"!=b&&"src"!=b){var c=this.shape[b];if("width"===b||"height"===b)c=0>c?0:c;a.setAttribute(b,c)}a.setAttribute("preserveAspectRatio","none");t(a,q.xmlns.xlink,"xlink:href",this.shape.src);a.__gfxObject__=this;return this}});q.Image.nodeType="image";q.Text=b("dojox.gfx.svg.Text",
[q.Shape,n.Text],{setShape:function(a){this.shape=g.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;var b=this.shape;a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("text-anchor",b.align);a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.setAttribute("text-rendering",p);a.firstChild?a.firstChild.nodeValue=b.text:a.appendChild(w(b.text));return this},getTextWidth:function(){var a=this.rawNode,
b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,d=a.firstChild.nodeValue;b.appendChild(a);if(""!=d)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width):68;b.removeChild(a);return c},getBoundingBox:function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(D){a={x:0,y:0,width:0,height:0}}return a}});q.Text.nodeType="text";q.Path=b("dojox.gfx.svg.Path",[q.Shape,u.Path],{_updateWithSegment:function(a){this.inherited(arguments);"string"==typeof this.shape.path&&
this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});q.Path.nodeType="path";q.TextPath=b("dojox.gfx.svg.TextPath",[q.Shape,u.TextPath],{_updateWithSegment:function(a){this.inherited(arguments);this._setTextPath()},setShape:function(a){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var a=
this.rawNode;if(!a.firstChild){var b=r(q.xmlns.svg,"textPath"),c=w("");b.appendChild(c);a.appendChild(b)}b=(b=a.firstChild.getAttributeNS(q.xmlns.xlink,"href"))&&q.getRef(b);if(!b&&(c=this._getParentSurface())){var c=c.defNode,b=r(q.xmlns.svg,"path"),d=g._base._getUniqueId();b.setAttribute("id",d);c.appendChild(b);t(a.firstChild,q.xmlns.xlink,"xlink:href","#"+d)}b&&b.setAttribute("d",this.shape.path)}},_setText:function(){var a=this.rawNode;if(!a.firstChild){var b=r(q.xmlns.svg,"textPath"),c=w("");
b.appendChild(c);a.appendChild(b)}a=a.firstChild;b=this.text;a.setAttribute("alignment-baseline","middle");switch(b.align){case "middle":a.setAttribute("text-anchor","middle");a.setAttribute("startOffset","50%");break;case "end":a.setAttribute("text-anchor","end");a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor","start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift","0.5ex");a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",
b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.firstChild.data=b.text}});q.TextPath.nodeType="text";var y=534<function(){var a=/WebKit\/(\d*)/.exec(v);return a?a[1]:0}();q.Surface=b("dojox.gfx.svg.Surface",n.Surface,{constructor:function(){n.Container._init.call(this)},destroy:function(){n.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(a,b){if(!this.rawNode)return this;a=0>a?0:a;b=0>b?0:b;this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",
b);y&&(this.rawNode.style.width=a,this.rawNode.style.height=b);return this},getDimensions:function(){return this.rawNode?{width:g.normalizedLength(this.rawNode.getAttribute("width")),height:g.normalizedLength(this.rawNode.getAttribute("height"))}:null}});q.createSurface=function(b,c,d){var e=new q.Surface;e.rawNode=r(q.xmlns.svg,"svg");e.rawNode.setAttribute("overflow","hidden");c&&e.rawNode.setAttribute("width",0>c?0:c);d&&e.rawNode.setAttribute("height",0>d?0:d);c=r(q.xmlns.svg,"defs");e.rawNode.appendChild(c);
e.defNode=c;e._parent=a.byId(b);e._parent.appendChild(e.rawNode);g._base._fixMsTouchAction(e);return e};h={_setFont:function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)}};var A=n.Container;b=q.Container={openBatch:function(){if(!this._batch){var a;a=q.useSvgWeb?d.doc.createDocumentFragment(!0):
d.doc.createDocumentFragment();this.fragment=a}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(a){this!=a.getParent()&&(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),A.add.apply(this,arguments),a.setClip(a.clip));return this},remove:function(a,b){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&
this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),a._removeClipNode(),A.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var b=this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);a.appendChild(b)}return A.clear.apply(this,arguments)},getBoundingBox:A.getBoundingBox,_moveChildToFront:A._moveChildToFront,_moveChildToBack:A._moveChildToBack};
u=q.Creator={createObject:function(a,b){if(!this.rawNode)return null;var c=new a;a=r(q.xmlns.svg,a.nodeType);c.setRawNode(a);c.setShape(b);this.add(c);return c}};e.extend(q.Text,h);e.extend(q.TextPath,h);e.extend(q.Group,b);e.extend(q.Group,n.Creator);e.extend(q.Group,u);e.extend(q.Surface,b);e.extend(q.Surface,n.Creator);e.extend(q.Surface,u);q.fixTarget=function(a,b){a.gfxTarget||(a.gfxTarget=x&&a.target.wholeText?a.target.parentElement.__gfxObject__:a.target.__gfxObject__);return!0};q.useSvgWeb&&
(q.createSurface=function(b,c,d){var e=new q.Surface;c=0>c?0:c;d=0>d?0:d;if(!c||!d){var f=m.position(b);c=c||f.w;d=d||f.h}b=a.byId(b);var f=b.id?b.id+"_svgweb":g._base._getUniqueId(),h=r(q.xmlns.svg,"svg");h.id=f;h.setAttribute("width",c);h.setAttribute("height",d);svgweb.appendChild(h,b);h.addEventListener("SVGLoad",function(){e.rawNode=this;e.isLoaded=!0;var a=r(q.xmlns.svg,"defs");e.rawNode.appendChild(a);e.defNode=a;if(e.onLoad)e.onLoad(e)},!1);e.isLoaded=!1;return e},q.Surface.extend({destroy:function(){var a=
this.rawNode;svgweb.removeChild(a,a.parentNode)}}),h={connect:function(a,b,c){"on"===a.substring(0,2)&&(a=a.substring(2));c=2==arguments.length?b:e.hitch(b,c);this.getEventSource().addEventListener(a,c,!1);return[this,a,c]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);delete a[0]}},e.extend(q.Shape,h),e.extend(q.Surface,h));return q})},"dojo/io/script":function(){define("../_base/connect ../_base/kernel ../_base/lang ../sniff ../_base/window ../_base/xhr ../dom ../dom-construct ../request/script ../aspect".split(" "),
function(e,h,d,a,b,c,m,k,l,g){h.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var n={get:function(a){var b,d=this._makeScriptDeferred(a,function(a){b&&b.cancel()}),e=d.ioArgs;c._ioAddQueryToUrl(e);c._ioNotifyStart(d);b=l.get(e.url,{timeout:a.timeout,jsonp:e.jsonp,checkString:a.checkString,ioArgs:e,frameDoc:a.frameDoc,canAttach:function(a){e.requestId=a.id;e.scriptId=a.scriptId;e.canDelete=a.canDelete;return n._canAttach(e)}},!0);g.around(b,"isValid",function(a){return function(b){n._validCheck(d);
return a.call(this,b)}});b.then(function(){d.resolve(d)}).otherwise(function(a){d.ioArgs.error=a;d.reject(a)});return d},attach:l._attach,remove:l._remove,_makeScriptDeferred:function(a,b){b=c._ioSetArgs(a,b||this._deferredCancel,this._deferredOk,this._deferredError);var d=b.ioArgs;d.id=h._scopeName+"IoScript"+(a.callbackSuffix||this._counter++);d.canDelete=!1;d.jsonp=a.callbackParamName||a.jsonp;d.jsonp&&(d.query=d.query||"",0<d.query.length&&(d.query+="\x26"),d.query+=d.jsonp+"\x3d"+(a.frameDoc?
"parent.":"")+h._scopeName+".io.script.jsonp_"+d.id+"._jsonpCallback",d.frameDoc=a.frameDoc,d.canDelete=!0,b._jsonpCallback=this._jsonpCallback,this["jsonp_"+d.id]=b);b.addBoth(function(a){d.canDelete&&(a instanceof Error?n["jsonp_"+d.id]._jsonpCallback=function(){delete n["jsonp_"+d.id];if(d.requestId)h.global[l._callbacksProperty][d.requestId]()}:n._addDeadScript(d))});return b},_deferredCancel:function(a){a.canceled=!0},_deferredOk:function(a){a=a.ioArgs;return a.json||a.scriptLoaded||a},_deferredError:function(a,
b){console.log("dojo.io.script error",a);return a},_deadScripts:[],_counter:1,_addDeadScript:function(a){n._deadScripts.push({id:a.id,frameDoc:a.frameDoc});a.frameDoc=null},_validCheck:function(a){if((a=n._deadScripts)&&0<a.length){for(var b=0;b<a.length;b++)n.remove(a[b].id,a[b].frameDoc),delete n["jsonp_"+a[b].id],a[b].frameDoc=null;n._deadScripts=[]}return!0},_ioCheck:function(a){a=a.ioArgs;return a.json||a.scriptLoaded&&!a.args.checkString?!0:(a=a.args.checkString)&&eval("typeof("+a+") !\x3d 'undefined'")},
_resHandle:function(a){n._ioCheck(a)?a.callback(a):a.errback(Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(){return!0},_jsonpCallback:function(a){this.ioArgs.json=a;if(this.ioArgs.requestId)h.global[l._callbacksProperty][this.ioArgs.requestId](a)}};d.setObject("dojo.io.script",n);return n})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(e,
h,d,a,b,c,m,k,l,g,n){function u(a,b){a.canDelete&&v._remove(a.id,b.options.frameDoc,!0)}function r(a){A&&A.length&&(b.forEach(A,function(a){v._remove(a.id,a.frameDoc);a.frameDoc=null}),A=[]);return a.options.jsonp?!a.data:!0}function t(a){return!!this.scriptLoaded}function w(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function q(a,b){if(this.canDelete){var c=this.response.options;A.push({id:this.id,frameDoc:c.ioArgs?c.ioArgs.frameDoc:c.frameDoc});c.ioArgs&&(c.ioArgs.frameDoc=
null);c.frameDoc=null}b?this.reject(b):this.resolve(a)}function v(a,b,e){var g=d.parseArgs(a,d.deepCopy({},b));a=g.url;b=g.options;var k=d.deferred(g,u,r,b.jsonp?null:b.checkString?w:t,q);c.mixin(k,{id:x+f++,canDelete:!1});b.jsonp&&((new RegExp("[?\x26]"+b.jsonp+"\x3d")).test(a)||(a+=(~a.indexOf("?")?"\x26":"?")+b.jsonp+"\x3d"+(b.frameDoc?"parent.":"")+x+"_callbacks."+k.id),k.canDelete=!0,y[k.id]=function(a){g.data=a;k.handleResponse(g)});d.notify&&d.notify.emit("send",g,k.promise.cancel);if(!b.canAttach||
b.canAttach(k)){var l=v._attach(k.id,a,b.frameDoc,function(a){if(!(a instanceof Error)){var c=Error("Error loading "+(a.target?a.target.src:"script"));c.source=a;a=c}k.reject(a);v._remove(k.id,b.frameDoc,!0)});if(!b.jsonp&&!b.checkString)var n=m(l,p,function(a){if("load"===a.type||z.test(l.readyState))n.remove(),k.scriptLoaded=a})}h(k);return e?k:k.promise}g.add("script-readystatechange",function(a,b){return"undefined"!==typeof b.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||
"[object Opera]"!==a.opera.toString())});var x=e.id.replace(/[\/\.\-]/g,"_"),f=0,p=g("script-readystatechange")?"readystatechange":"load",z=/complete|loaded/,y=a.global[x+"_callbacks"]={},A=[];v.get=v;v._attach=function(a,b,c,d){c=c||n.doc;var e=c.createElement("script");if(d)m.once(e,"error",d);e.type="text/javascript";try{e.src=b}catch(G){d&&d(e)}e.id=a;e.async=!0;e.charset="utf-8";return c.getElementsByTagName("head")[0].appendChild(e)};v._remove=function(a,b,c){l.destroy(k.byId(a,b));y[a]&&(c?
y[a]=function(){delete y[a]}:delete y[a])};v._callbacksProperty=x+"_callbacks";return v})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(e){return e})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(e,h,d){var a=window,b={addOnWindowUnload:function(b,m){e.windowUnloaded||d(a,"unload",e.windowUnloaded=function(){});
d(a,"unload",h.hitch(b,m))},addOnUnload:function(b,e){d(a,"beforeunload",h.hitch(b,e))}};e.addOnWindowUnload=b.addOnWindowUnload;e.addOnUnload=b.addOnUnload;return b})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(e,h,d,a,b,c,m,k){e.byId=h.byId;e.isDescendant=h.isDescendant;e.setSelectable=h.setSelectable;e.getAttr=a.get;e.setAttr=a.set;e.hasAttr=a.has;e.removeAttr=a.remove;e.getNodeProp=
a.getNodeProp;e.attr=function(b,c,d){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,d)};e.hasClass=c.contains;e.addClass=c.add;e.removeClass=c.remove;e.toggleClass=c.toggle;e.replaceClass=c.replace;e._toDom=e.toDom=m.toDom;e.place=m.place;e.create=m.create;e.empty=function(a){m.empty(a)};e._destroyElement=e.destroy=function(a){m.destroy(a)};e._getPadExtents=e.getPadExtents=k.getPadExtents;e._getBorderExtents=e.getBorderExtents=k.getBorderExtents;e._getPadBorderExtents=
e.getPadBorderExtents=k.getPadBorderExtents;e._getMarginExtents=e.getMarginExtents=k.getMarginExtents;e._getMarginSize=e.getMarginSize=k.getMarginSize;e._getMarginBox=e.getMarginBox=k.getMarginBox;e.setMarginBox=k.setMarginBox;e._getContentBox=e.getContentBox=k.getContentBox;e.setContentSize=k.setContentSize;e._isBodyLtr=e.isBodyLtr=k.isBodyLtr;e._docScroll=e.docScroll=k.docScroll;e._getIeDocumentElementOffset=e.getIeDocumentElementOffset=k.getIeDocumentElementOffset;e._fixIeBiDiScrollLeft=e.fixIeBiDiScrollLeft=
k.fixIeBiDiScrollLeft;e.position=k.position;e.marginBox=function(a,b){return b?k.setMarginBox(a,b):k.getMarginBox(a)};e.contentBox=function(a,b){return b?k.setContentSize(a,b):k.getContentBox(a)};e.coords=function(a,b){e.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");a=h.byId(a);var c=d.getComputedStyle(a),c=k.getMarginBox(a,c);a=k.position(a,b);c.x=a.x;c.y=a.y;return c};e.getProp=b.get;e.setProp=b.set;e.prop=function(a,c,d){return 2==arguments.length?b["string"==typeof c?
"get":"set"](a,c):b.set(a,c,d)};e.getStyle=d.get;e.setStyle=d.set;e.getComputedStyle=d.getComputedStyle;e.__toPixelValue=e.toPixelValue=d.toPixelValue;e.style=function(a,b,c){switch(arguments.length){case 1:return d.get(a);case 2:return d["string"==typeof b?"get":"set"](a,b)}return d.set(a,b,c)};return e})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(e,h,d){h=h.NodeList;var a=h.prototype;a.connect=h._adaptAsForEach(function(){return e.connect.apply(this,
arguments)});a.coords=h._adaptAsMap(e.coords);h.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");d.forEach(h.events,function(b){var c="on"+b;a[c]=function(a,b){return this.connect(c,a,b)}});return e.NodeList=h})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(e,h,d,a,
b,c,m,k,l){function g(a){return function(b,c,d){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,d)}}var n=function(a){return 1==a.length&&"string"==typeof a[0]},u=function(a){var b=a.parentNode;b&&b.removeChild(a)},r=h.NodeList,t=r._adaptWithCondition,w=r._adaptAsForEach,q=r._adaptAsMap;a.extend(r,{_normalize:function(b,d){var f=!0===b.parse;if("string"==typeof b.template){var g=b.templateFunc||e.string&&e.string.substitute;b=g?g(b.template,b):b}g=typeof b;"string"==g||
"number"==g?(b=c.toDom(b,d&&d.ownerDocument),b=11==b.nodeType?a._toArray(b.childNodes):[b]):a.isArrayLike(b)?a.isArray(b)||(b=a._toArray(b)):b=[b];f&&(b._runParse=!0);return b},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,d,g){if(1==b.nodeType||"only"!=d)for(var f,h=a.length,k=h-1;0<=k;k--){var l=g?this._cloneNode(a[k]):a[k];if(a._runParse&&e.parser&&e.parser.parse)for(f||(f=b.ownerDocument.createElement("div")),f.appendChild(l),e.parser.parse(f),l=f.firstChild;f.firstChild;)f.removeChild(f.firstChild);
k==h-1?c.place(l,b,d):b.parentNode.insertBefore(l,b);b=l}},position:q(m.position),attr:t(g(k),n),style:t(g(l),n),addClass:w(b.add),removeClass:w(b.remove),toggleClass:w(b.toggle),replaceClass:w(b.replace),empty:w(c.empty),removeAttr:w(k.remove),marginBox:q(m.getMarginBox),place:function(a,b){var d=h(a)[0];return this.forEach(function(a){c.place(a,d,b)})},orphan:function(a){return(a?h._filterResult(this,a):this).forEach(u)},adopt:function(a,b){return h(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;
var b=new r;this.map(function(c){h(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,e=0;if("string"==typeof a){c=h._filterResult(this,b[0]);if(1==b.length)return c._stash(this);e=1}return this._wrap(d.filter(c,b[e],b[e+1]),this)},addContent:function(a,b){a=this._normalize(a,this[0]);for(var d=0,e;e=this[d];d++)a.length?this._place(a,e,b,0<d):c.empty(e);return this}});return r})},"esri/portal/support/layersCreator":function(){define("require exports dojo/has ../../core/promiseUtils ../../core/requireUtils ../PortalItem ./portalLayers ../../layers/Layer ../../renderers/support/styleUtils ./mapNotesUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g){function n(c,d,f){var g,h;return b.when(e,"../../layers/"+d).then(function(b){var d={};return c.itemId&&(d.portalItem={id:c.itemId,portal:f.context.portal}),g=new b(d),h=g,h.read(c,f.context),l.loadStyleRenderer(h,f.context).then(function(){return a.resolve(g)})})}function u(a,b){return r(a,b).then(function(c){return n(a,c,b)})}function r(b,d){var e=d.context,f=t(e),h=b.layerType||b.type;!h&&d&&d.defaultLayerType&&(h=d.defaultLayerType);d=f[h]||"UnknownLayer";if("Feature Collection"===
b.type){if(b.itemId)return(new c({id:b.itemId,portal:e&&e.portal})).load().then(m.selectLayerClassPath).then(function(a){return a.className})}else"ArcGISFeatureLayer"===h&&g.isMapNotesLayer(b)&&(d="MapNotesLayer");return a.resolve(d)}function t(a){switch(a.origin){case "web-scene":switch(a.layerContainerType){case "basemap":a=p;break;case "ground":a=f;break;default:a=x}break;default:switch(a.layerContainerType){case "basemap":a=y;break;default:a=z}}return a}function w(b,c,d){return c&&c.filter?d.then(function(b){var d=
c.filter(b);return void 0===d?a.resolve(b):d instanceof k?a.resolve(d):d}):d}function q(b,c,d){if(!c)return[];for(var e=[],f=[],g=0;g<c.length;g++){var h=c[g],k=u(h,d);if((e.push(k),f.push(null),"GroupLayer"===h.layerType)&&h.layers&&Array.isArray(h.layers)&&0<h.layers.length){h=h.layers.map(function(a){return u(a,d)});e.push.apply(e,h);for(var l=0;l<h.length;l++)f.push(k)}}var m={};return e.map(function(c,e){var g=function(a,b){m[b.id]=e;var c=a.findIndex(function(a){if(!a.id)return!1;a=m[a.id];
return void 0===a?!1:a>e});0>c&&(c=void 0);a.add(b,c)};c=w(b,d,c).then(function(c){return null!==f[e]?f[e].then(function(b){return g(b.layers,c),a.resolve(c)}):(g(b,c),a.resolve(c))});return v&&(c=c.otherwise(function(b){return console.error(b.toString?b.toString():b),a.reject(b)})),c})}Object.defineProperty(h,"__esModule",{value:!0});var v=d("dojo-debug-messages"),x={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",
ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",DefaultTileLayer:"TileLayer"},f={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer"},p={ArcGISTiledMapServiceLayer:"TileLayer",
ArcGISTiledImageServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",DefaultTileLayer:"TileLayer",VectorTileLayer:"VectorTileLayer"},z={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",
OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",GeoRSS:"GeoRSSLayer",KML:"UnsupportedLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},y={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",
bingLayer:"UnsupportedLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};h.createLayer=u;h.processLayer=w;h.populateLayers=q;h.populateOperationalLayers=function(a,b,c){return q(a,b,c)}})},"esri/portal/support/portalLayers":function(){define("require exports dojo/_base/lang ../PortalItem ../../core/promiseUtils ../../core/requireUtils ../../request ../../core/Collection ../../core/Error ./mapNotesUtils".split(" "),function(e,h,d,a,b,c,m,k,l,g){function n(a){switch(a.type){case "Map Service":return r(a);
case "Feature Service":return t(a);case "Feature Collection":return q(a);case "Scene Service":return w(a);case "Image Service":return v(a);case "Stream Service":return{className:"StreamLayer"};case "Vector Tile Service":return{className:"VectorTileLayer"};case "WMTS":return{className:"WebTileLayer"};case "WMS":return{className:"WMSLayer"};default:return b.reject(new l("portal:unknown-item-type","Unknown item type '${type}'",{type:a.type}))}}function u(a){return c.when(e,"../../layers/"+a.className).then(function(b){return{constructor:b,
properties:a.properties}})}function r(a){return x(a).then(function(a){return a?{className:"TileLayer"}:{className:"MapImageLayer"}})}function t(a){return f(a).then(function(a){if(a){var b={returnZ:!0,outFields:["*"]};return null!=a.id&&(b.layerId=a.id),{className:"FeatureLayer",properties:b}}return{className:"GroupLayer"}})}function w(a){return f(a).then(function(b){if(b){var c={},d=void 0;if(null!=b.id?(c.layerId=b.id,d=a.url+"/layers/"+b.id):d=a.url,Array.isArray(a.typeKeywords)&&0<a.typeKeywords.length){b=
{IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer"};for(var e=0,f=Object.keys(b);e<f.length;e++){var g=f[e];if(-1!==a.typeKeywords.indexOf(g))return{className:b[g]}}}return p(d).then(function(a){var b="SceneLayer";return null!=a&&"IntegratedMesh"===a.layerType?b="IntegratedMeshLayer":null!=a&&"PointCloud"===a.layerType&&(b="PointCloudLayer"),{className:b,properties:c}})}return{className:"GroupLayer"}})}function q(a){return a.load().then(function(){return a.fetchData()}).then(function(a){if(a&&
Array.isArray(a.layers)){if(g.isMapNotesLayer(a))return{className:"MapNotesLayer"};if(1===a.layers.length)return{className:"FeatureLayer"}}return{className:"GroupLayer"}})}function v(a){return x(a).then(function(b){var c=new k(a.typeKeywords);return b?c.find(function(a){return"elevation 3d layer"===a.toLowerCase()})?{className:"ElevationLayer"}:{className:"TileLayer"}:{className:"ImageryLayer"}})}function x(a){return p(a.url).then(function(a){return a.tileInfo})}function f(a){return!a.url||a.url.match(/\/\d+$/)?
b.resolve({}):a.load().then(function(){return a.fetchData()}).then(function(b){return b&&Array.isArray(b.layers)?1===b.layers.length?{id:b.layers[0].id}:!1:p(a.url).then(function(a){return a&&Array.isArray(a.layers)?1===a.layers.length?{id:a.layers[0].id}:!1:{}})})}function p(a){return m(a,{responseType:"json",callbackParamName:"callback",query:{f:"json"}}).then(function(a){return a.data})}Object.defineProperty(h,"__esModule",{value:!0});h.fromItem=function(c){return!c.portalItem||c.portalItem instanceof
a||c.portalItem.constructor&&c.portalItem.constructor._meta||(c=d.mixin({},c,{portalItem:new a(c.portalItem)})),c.portalItem.load().then(n).then(u).then(function(a){var e=d.mixin({portalItem:c.portalItem},a.properties);a=a.constructor;return"esri.layers.FeatureLayer"===a.declaredClass&&(e.returnZ=!0,e.outFields=["*"]),b.resolve(new a(e))})};h.selectLayerClassPath=n})},"esri/portal/support/mapNotesUtils":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});
h.isMapNotesLayer=function(d){var a=["TITLE","DESCRIPTION","IMAGE_URL","IMAGE_LINK_URL"];if((d=d.layers||d.featureCollection&&d.featureCollection.layers)&&Array.isArray(d))return d=d[0],d.layerDefinition.fields&&d.layerDefinition.fields.forEach(function(b){b=a.indexOf(b.name);-1<b&&a.splice(b,1)}),a.length?!1:!0}})},"esri/views/3d/layers/VectorTileLayerView3D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper dojo/promise/all ../../../core/accessorSupport/decorators ../../../core/Error ../../../core/promiseUtils ../../../core/watchUtils ../../vectorTiles/SchemaHelper ../../vectorTiles/TileHandler ../../vectorTiles/renderers/Renderer ../../layers/LayerView ./support/LayerViewUpdatingPercentage ../terrain/terrainUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w){e=function(a){function c(b){b=a.call(this)||this;return b._isUpdating=!1,b.minDataLevel=0,b.maxDataLevel=1/0,b}return d(c,a),c.prototype.initialize=function(){var a,c=this,d=w.checkIfTileInfoSupportedForView(this.layer.tileInfo256,this.layer.fullExtent,this.view.spatialReference,this.view.basemapTerrain.manifold);if(d){var e={layer:this.layer,error:d},h=void 0;switch(d.name){case "tilingscheme:local-gcs-not-supported":h=new m("layerview:local-gcs-not-supported",
"Geographic coordinate systems are not supported in local scenes",e);break;case "tilingscheme:spatial-reference-mismatch":case "tilingscheme:global-unsupported-spatial-reference":h=new m("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",e);break;default:h=new m("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",e)}this.addResolvingPromise(k.reject(h))}else a=l.whenTrueOnce(this.view,
"basemapTerrain.tilingSchemeLocked").then(function(){var a=c.view.basemapTerrain.tilingScheme.pixelSize[0];c.schemeHelper=new g(a,c.view.spatialReference.isWGS84);var b;if(b=256===a?c.layer.tileInfo256:c.view.spatialReference.isWGS84?c.layer.compatibleTileInfo512:c.layer.tileInfo,!c.view.basemapTerrain.tilingScheme.compatibleWith(b))return a=new m("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface"),k.reject(a)});d=this.layer;
d.tileInfo&&0<d.tileInfo.lods.length&&(this.minDataLevel=d.tileInfo.lods[0].level,this.maxDataLevel=d.tileInfo.lods[d.tileInfo.lods.length-1].level);var n,d=this._initializeTileHandler();this.tileHandler=d[0];this.renderer=d[1];this._tileHandlerPromise=n=d[2];this.watch("layer.currentStyleInfo",function(){var a,b,d;c._tileHandlerPromise.isFulfilled()||c._tileHandlerPromise.cancel("cancel");d=c._initializeTileHandler();a=d[0];b=d[1];d=d[2];c._tileHandlerPromise=n;d.then(function(){var d=c.tileHandler;
c.renderer=b;c.tileHandler=a;c.emit("data-changed");d.destroy()})});a=b([a,n]);this.addResolvingPromise(a)},c.prototype.destroy=function(){this.renderer=null;this.tileHandler.destroy();this.tileHandler=null},Object.defineProperty(c.prototype,"isTransparent",{get:function(){return!0},enumerable:!0,configurable:!0}),c.prototype.getTileUrl=function(a,b,c){return this.layer.getTileUrl(a,b,c)},c.prototype.isUpdating=function(){return this._isUpdating},c.prototype._evaluateUpdatingState=function(a){this._isUpdating=
!!a;this.notifyChange("updating")},c.prototype._initializeTileHandler=function(){var a=new n(this.layer,function(){},1),b=new u,c=a.start();return c.then(function(){b.initialize(a.spriteMosaic,a.glyphMosaic,!1)}),[a,b,c]},c}(c.declared(r,t));return a([c.property()],e.prototype,"view",void 0),a([c.property()],e.prototype,"layer",void 0),a([c.property({readOnly:!0})],e.prototype,"isTransparent",null),a([c.property()],e.prototype,"updatingPercentageValue",void 0),e=a([c.subclass("esri.views.3d.layers.VectorTileLayerView3D")],
e)})},"esri/views/vectorTiles/SchemaHelper":function(){define(["require","exports"],function(e,h){return function(){function d(a,b){this.lockedSchemaPixelSize=a;this.isWGS84=b}return d.prototype.getCompatibleLevelRowCol=function(a){var b=a[0],c=a[1];a=a[2];return this.isWGS84?(c>>=1,a>>=1):256===this.lockedSchemaPixelSize&&0<b&&(b--,c>>=1,a>>=1),[b,c,a]},d.prototype.getSchemaShift=function(a,b){var c=0,d=0;return(256===this.lockedSchemaPixelSize||this.isWGS84)&&(a[2]%2&&(c=2*b),a[1]%2&&(d=2*b)),[c,
d]},d.prototype.adjustLevel=function(a){return this.isWGS84?a:256===this.lockedSchemaPixelSize?0<a?a-1:0:a},d.create256x256CompatibleTileInfo=function(a){if(!a)return null;if(256===a.rows&&256===a.cols)return a;for(var b,c,d=a.format,e=a.compressionQuality,h=a.dpi,g=a.origin,n=a.spatialReference,u=4326===n.wkid,r=[],t=a.lods.length,w=0;t>w;w++){var q=a.lods[w];b=q.scale;c=u?q.resolution:2*q.resolution;r.push({level:q.level,scale:b,resolution:c})}return{rows:256,cols:256,dpi:h,format:d,compressionQuality:e,
origin:g,spatialReference:n,lods:r}},d.create512x512CompatibleTileInfo=function(a){if(!a||256===a.rows||256===a.cols)return null;for(var b,c,d=a.format,e=a.compressionQuality,h=a.dpi,g=a.origin,n=a.spatialReference,u=[],r=a.lods.length,t=0;r>t;t++){var w=a.lods[t];b=w.scale;c=.5*w.resolution;u.push({level:w.level,scale:b,resolution:c})}return{rows:512,cols:512,dpi:h,format:d,compressionQuality:e,origin:g,spatialReference:n,lods:u}},d}()})},"esri/views/vectorTiles/TileHandler":function(){define("require exports module dojo/Deferred dojo/promise/all dojo/has ../../core/workers ../../core/promiseUtils ../../core/requireUtils ../../core/LRUCache ../../request ../2d/tiling/TileKey ./TileIndex ./SpriteMosaic ./SpriteSource ./GlyphMosaic ./GlyphSource ./VectorTileDisplayObject ./GeometryUtils".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f){var p=new g(10);return function(){function g(a,b,c,d,e){void 0===d&&(d=!1);this.devicePixelRatio=c;this.allowUpdates=d;this._tileIndex=this._connection=this._glyphMosaic=this._spriteMosaic=null;this._updateQueue=new Map;this._ongoingRequests=new Map;this._vectorTileLayer=a;this._styleRepository=a.styleRepository;this._requestUpdate=b;this._tileInfoView=e}return g.prototype.destroy=function(){this.stop();this._vectorTileLayer=this._requestUpdate=this._styleRepository=
null;this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=null);this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null)},Object.defineProperty(g.prototype,"initialized",{get:function(){return this._broadcastPromise&&this._broadcastPromise.isFulfilled()},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"spriteMosaic",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"glyphMosaic",{get:function(){return this._glyphMosaic},
enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"ongoingRequestCount",{get:function(){return this._ongoingRequests.size},enumerable:!0,configurable:!0}),g.prototype.start=function(){var f=this;this.stop();var g=this._styleRepository,h=new w(g.sprite,this.devicePixelRatio);h.devicePixelRatio=this.devicePixelRatio;var k=h.load().then(function(){f._spriteMosaic=new t(1024,1024,250);f._spriteMosaic.setSpriteSource(h);c("stable-symbol-rendering")&&f._spriteMosaic.preloadSpriteItems()}),
p=new v(g.glyphs);this._glyphMosaic=new q(1024,1024,p);var n=this._fetchTileMap(this._vectorTileLayer.tileIndexUrl),r=m.open(this,l.getAbsMid("./WorkerTileHandler",e,d)).then(function(a){f._connection=a}),u=new a(function(a){k.isFulfilled()||k.cancel();n.isFulfilled()||n.cancel();r.isFulfilled()||r.cancel()});return b([k,n,r]).then(function(a){b(f._connection.broadcast("setLayers",g.styleJSON)).then(function(){u.resolve()})}),this._broadcastPromise=u.promise,this._broadcastPromise},g.prototype.stop=
function(){this._broadcastPromise&&!this._broadcastPromise.isFulfilled()&&this._broadcastPromise.cancel();this._updateQueue.forEach(function(a){return a.cancel()});this._ongoingRequests.forEach(function(a){return a.cancel()});this._connection&&(this._connection.close(),this._connection=null)},g.prototype.updateTile=function(a,b){var c=this;if(!this.allowUpdates)return k.resolve(null);if(!this._broadcastPromise.isFulfilled()||!this._connection)return k.reject(Error("no connection"));b=Math.round(f.degToByte(b.state.rotation));
if(a.rotation===b)return k.resolve(null);var d,e=a.key;return this._updateQueue.has(e.id)&&(d=this._updateQueue.get(e.id),d.cancel("cancel")),a.rotation=b,d=this._connection.invoke("update",{key:a.id,rotation:b},[],{id:a.workerID}).then(function(b){return a.updateSymbolData(b),b}).always(function(){c._updateQueue["delete"](e.id)}),this._updateQueue.set(a.id,d),d},g.prototype.getVectorTileWithLRC=function(a,b,c,d){var e=this;void 0===d&&(d=0);a=new u(a,b,c,0);b=this.getRefKey(a);var f=new x(a,b,this._vectorTileLayer.tileInfo,
this._styleRepository,this._glyphMosaic,0);return this.getTileData(f.key,0).then(function(a){return f.setData(a.tileData,a.workerId,e._connection),f})},g.prototype.getTileData=function(a,b){var c=this;if(!this._broadcastPromise.isFulfilled()||!this._connection)return k.reject(Error("no connection"));var d=this._tileIndex?this._tileIndex.dataKey(a):a;if(!d)return k.reject(Error("no data"));b=Math.round(f.degToByte(b));return this._getTileData(this._connection,a,d,b).then(function(a){return a&&a.tileData?
{tileData:a.tileData,workerId:a.workerId,connection:c._connection}:k.reject("No data")})},g.prototype.getRefKey=function(a){return this._tileIndex?this._tileIndex.dataKey(a):a},g.prototype.fetchTileData=function(a){a=u.pool.acquire(a);var b=this._vectorTileLayer.getTileUrl(a.level,a.row,a.col);return u.pool.release(a),n(b,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(a){return{data:{protobuff:a.data},buffers:[a.data]}})},g.prototype.getSprites=function(a){return k.resolve({data:{spriteItems:this._spriteMosaic.getSpriteItems(a.sprites)}})},
g.prototype.getGlyphs=function(a){return this._glyphMosaic.getGlyphItems(a.tileID,a.font,a.codePoints).then(function(a){return{data:{glyphItems:a}}})},g.prototype.getStyleRepository=function(){return this._styleRepository},g.prototype.getTileIndex=function(){return this._tileIndex},g.prototype._getTileData=function(a,b,c,d){var e=this,f={id:null};return(a=this._ongoingRequests.get(b.id))?a:(a=this._connection.invoke("getTile",{key:b.id,refKey:c.id,rotation:d,cacheTile:this.allowUpdates},[],f).then(function(a){return e._ongoingRequests["delete"](b.id),
{tileData:a,workerId:f.id}}).otherwise(function(a){return e._ongoingRequests["delete"](b.id),e._connection.invoke("destructTileData",{key:b.id},[],f),k.reject(a)}),this._ongoingRequests.set(b.id,a),a)},g.prototype._fetchTileMap=function(a){var b=this;return a?p.has(a)?(this._tileIndex=p.use(a),k.resolve()):n(a,{callbackParamName:"callback",responseType:"json"}).then(function(c){b._tileIndex=new r(c.data);p.insert(a,b._tileIndex)}):null},g}()})},"esri/core/workers":function(){define(["require","exports",
"./workers/workers"],function(e,h,d){Object.defineProperty(h,"__esModule",{value:!0});for(var a in d)h.hasOwnProperty(a)||(h[a]=d[a])})},"esri/core/workers/workers":function(){define("require exports dojo/Deferred dojo/promise/all ../promiseUtils ./Connection ./JobProxy".split(" "),function(e,h,d,a,b,c,m){function k(b,c){for(var d=[],e=0;e<r.length;e++)d.push(r[e].openConnection(b,c));return a(d).then(function(a){})}function l(a){if((t[a]=!0,!u)&&t.every(function(a){return a})){for(var b in x)(a=
v[b])&&x[b].resolve(a);x={};u=!0}}function g(a){var b=q++;a=new c(a,b);var e=new d;return v[b]=a,u?e.resolve(a):x[b]=e,e.promise}Object.defineProperty(h,"__esModule",{value:!0});var n=Math.max((navigator.hardwareConcurrency||2)-1,2),u=!1,r=[],t=[],w=0,q=0,v={},x={},f=!1;h.open=function(a,c){if(!1===f){for(var d=0;n>d;++d){var e=new m(v,d,l);r.push(e);t.push(!1)}f=!0}return g(a).then(function(a){return k(c,a.id).then(function(){return a}).otherwise(function(a){return b.reject(a)})})};h.terminate=function(){for(var a=
0;a<r.length;a++)r[a].terminate();r=[];t=[];u=!1};h.closeConnection=function(a){if(a)if(v[a.id]&&delete v[a.id],u)for(var b=0;b<r.length;b++)r[b].closeConnection(a.id);else(b=x[a.id])&&(b.promise.cancel(),delete x[a.id])};h.invoke=function(a,c,d,e,f){var g=null;if(e&&(g=e.id),null===g&&(g=w=(w+1)%r.length,!t[g]&&!r.some(function(a,b,c){return g=(g+1)%c.length,t[g]})))return b.reject(Error("No worker available"));a=r[g].invoke(a,c,d,f);return e&&(e.id=g),a};h.broadcast=function(a,b,c,d){for(var e=
[],f=0;f<r.length;f++)t[f]&&e.push(r[f].invoke(a,b,c,d));return e}})},"esri/core/workers/Connection":function(){define(["require","exports","./workers"],function(e,h,d){return function(){function a(a,c){this.client=a;this.id=c}return a.prototype.invoke=function(a,c,e,h){return d.invoke(a,c,e,h,this.id)},a.prototype.broadcast=function(a,c,e){return d.broadcast(a,c,e,this.id)},a.prototype.close=function(){d.closeConnection(this)},a}()})},"esri/core/workers/JobProxy":function(){define("require exports dojo/_base/kernel dojo/_base/lang dojo/Deferred ../../kernel ../../config ../../request ../Logger ../urlUtils ./WorkerFallbackImpl".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){function u(){if(!x){var a=void 0;try{a=new Worker(w)}catch(z){t.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new n}return r(a)}return f||(f=k(w,{responseType:"text"})),f.then(function(a){return new Worker(URL.createObjectURL(new Blob([a.data],{type:"text/javascript"})))}).otherwise(function(a){return t.warn("Failed to create Worker. Fallback to execute module in main thread",a),new n}).then(function(a){return r(a)})}function r(c){function e(b){if(b&&
b.data&&b.data.type)if(b=b.data.type,"\x3cworker-loaded\x3e"===b){b=c;var h;null!=m["default"]?(h=a.mixin({},m),delete h["default"],h=JSON.parse(JSON.stringify(h))):h=JSON.parse(JSON.stringify(m));var k={async:!0,baseUrl:v,locale:d.locale,has:{},paths:{}};a.mixin(k,m.workers.loaderConfig);k.has=a.mixin({"esri-cors":1,"dojo-test-sniff":0,"config-deferredInstrumentation":0,"host-webworker":1},k.has);k.paths=a.mixin({esri:"../esri",dojo:"../dojo",dojox:"../dojox",dstore:"../dstore",moment:"../moment"},
k.paths);b.postMessage({type:"\x3cconfigure\x3e",configure:{esriConfig:h,dojoConfig:k,loaderUrl:q}})}else"\x3cworker-configured\x3e"===b&&(c.removeEventListener("message",e),c.removeEventListener("error",f),g.resolve(c))}function f(a){a.preventDefault();c.removeEventListener("message",e);c.removeEventListener("error",f);t.warn("Failed to create Worker. Fallback to execute module in main thread",a);c=new n;c.addEventListener("message",e);c.addEventListener("error",f)}var g=new b;return c.addEventListener("message",
e),c.addEventListener("error",f),g.promise}var t=l.getLogger("esri.core.workers"),w=g.normalize(e.toUrl("./worker.js")),q=g.makeAbsolute(e.toUrl("dojo/dojo.js")),v=g.makeAbsolute("../",q)+"/",x=!g.hasSameOrigin(w,location.href),f=null;return function(){function a(a,b,c){var d=this;this.connections=a;this.index=b;this.workerInitCallback=c;this.msgCount=0;this.outgoingJobs={};this.incomingJobs={};this.incomingStaticJobs={};u().then(function(a){d.worker=a;d.worker.addEventListener("message",d.message.bind(d));
d.worker.addEventListener("error",function(a){a.preventDefault();t.error(a)});d.workerInitCallback(d.index)})}return a.prototype.terminate=function(){this.worker.terminate()},a.prototype.openConnection=function(a,b){return this.invoke("\x3copen-connection\x3e",{path:a},void 0,b)},a.prototype.closeConnection=function(a){this.invoke("\x3cclose-connection\x3e",void 0,void 0,a)},a.prototype.invoke=function(a,c,d,e){var f=this,g=++this.msgCount,h=new b(function(a){f.worker.postMessage({type:"\x3ccancel\x3e",
id:g,connection:e,data:{reason:a}});f.outgoingJobs[g]&&delete f.outgoingJobs[g]});return this.outgoingJobs[g]=h,this.worker.postMessage({type:a,id:g,connection:e,data:c},d),h.promise},a.prototype.message=function(a){var b=this;if(a&&a.data){var d=a.data.type;if(d){var e=a.data,f=a.data.id;if("\x3cresponse\x3e"===d&&f){if(a=this.outgoingJobs[f])delete this.outgoingJobs[f],e.error?a.reject(e.error):a.resolve(e.data)}else if("\x3ccancel\x3e"===d&&f)a=this.incomingJobs[f],(a&&a.cancel(e.data.reason),
e.staticMsg)&&(a=this.incomingStaticJobs[f])&&a.cancel(e.data.reason);else if("\x3cstatic-message\x3e"===d){var g=e.staticMsg;a=c.workerMessages[g];if(!a||"function"!=typeof a)return void this.worker.postMessage({type:"\x3cstatic-message\x3e",staticMsg:g,id:f,error:g+" message type is not available on the kernel!"});e=a.call(this,e.data);this.incomingStaticJobs[f]=e;e.then(function(a){b.worker.postMessage({type:"\x3cstatic-message\x3e",staticMsg:g,id:f,data:a.data},a.buffers)}).otherwise(function(a){a||
(a="Error encountered at method"+g);a.dojoType&&"cancel"===a.dojoType||b.worker.postMessage({type:"\x3cstatic-message\x3e",staticMsg:g,id:f,error:a})}).always(function(){delete b.incomingStaticJobs[f]})}else{var h=e.connection;if(a=this.connections[h])if(a=a.client){var k=a[d];"function"==typeof k&&(e=k.call(a,e.data),this.incomingJobs[f]=e,e.then(function(a){b.worker.postMessage({type:"\x3cresponse\x3e",id:f,connection:h,error:a.error,data:a.data},a.buffers)}).otherwise(function(a){a||(a="Error encountered at method"+
d);a.dojoType&&"cancel"===a.dojoType||b.worker.postMessage({type:"\x3cresponse\x3e",id:f,connection:h,error:a})}).always(function(){delete b.incomingJobs[f]}))}}}}},a}()})},"esri/core/workers/WorkerFallbackImpl":function(){define(["require","exports"],function(e,h){var d=function(){return this}(),a=function(){return function(){var a=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=
arguments[d];return b[c].apply(b,a)}})}}(),b=d.MutationObserver||d.WebKitMutationObserver,c=function(){var a;if(d.process&&d.process.nextTick)a=function(a){d.process.nextTick(a)};else if(d.Promise)a=function(a){d.Promise.resolve().then(a)};else if(b){var c=[],e=document.createElement("div");(new b(function(){for(;0<c.length;)c.shift()()})).observe(e,{attributes:!0});a=function(a){c.push(a);e.setAttribute("queueStatus","1")}}return a}();return function(){function b(){this._dispatcher=new a;this._connections=
{};this._outgoingStaticMessages={};this._isInitialized=!1;this._workerPostMessage({type:"\x3cworker-loaded\x3e"})}return b.prototype.terminate=function(){this._connections={}},Object.defineProperty(b.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"onerror",
{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,configurable:!0}),b.prototype.postMessage=function(a,b){var d=this;c(function(){d._workerMessageHandler(new MessageEvent("message",{data:a}))})},b.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)},b.prototype.addEventListener=function(a,b,c){this._dispatcher.addEventListener(a,
b,c)},b.prototype.removeEventListener=function(a,b,c){this._dispatcher.removeEventListener(a,b,c)},b.prototype._workerPostMessage=function(a,b){var d=this;c(function(){d.dispatchEvent(new MessageEvent("message",{data:a}))})},b.prototype._workerMessageHandler=function(a){var b=this,c=a.data;if(c){var d=c.connection,h=c.type;if("\x3cconfigure\x3e"===h)this._isInitialized||this._workerPostMessage({type:"\x3cworker-configured\x3e"});else if("\x3copen-connection\x3e"===h){a=c.data.path;var k=c.id;if(this._connections[d])return void this._workerPostMessage({type:"\x3cresponse\x3e",
id:k,connection:d});e(["./WorkerConnection",a],function(a,c){b._connections[d]=new a(c,{postMessage:function(a,c){return b._workerPostMessage(a,c)}},d);b._workerPostMessage({type:"\x3cresponse\x3e",id:k,data:{connection:d},error:void 0})})}else"\x3cclose-connection\x3e"===h?this._connections[d]&&delete this._connections[d]:"\x3cstatic-message\x3e"===h?(a=c.id,this._outgoingStaticMessages[a]&&(h=this._outgoingStaticMessages[a],delete this._outgoingStaticMessages[a],c.error?h.reject(c.error):h.resolve(c.data))):
h&&(c=this._connections[d])&&c.proxy.message(a)}},b}()})},"esri/core/LRUCache":function(){define(["require","exports"],function(e,h){return function(){function d(a){if(this._cache={},this._lruQueue=[],0>=a)throw Error("LRU cache size must be bigger than zero!");this._maxSize=a}return d.prototype.has=function(a){return void 0!==this._cache[a]},d.prototype.insert=function(a,b){return null!==this.use(a)?void(this._cache[a]=b):(this._collect(),this._cache[a]=b,void this._lruQueue.unshift(a))},d.prototype.use=
function(a){var b=this._cache[a];return b?(this._lruQueue.splice(this._lruQueue.indexOf(a),1),this._lruQueue.unshift(a),b):null},d.prototype.print=function(){for(var a=0,b=this._lruQueue;a<b.length;a++){var c=b[a];console.log("key: "+c+", value: "+this._cache[c])}},d.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var a=this._lruQueue.pop(),b=this._cache[a];b&&b.release&&b.release();delete this._cache[a]}},d}()})},"esri/views/2d/tiling/TileKey":function(){define(["require",
"exports","../../../core/ObjectPool"],function(e,h,d){e=function(){function a(a,c,d,e){"string"==typeof a?(a=a.split("/"),c=a[1],d=a[2],e=a[3],this.level=+a[0],this.row=+c,this.col=+d,this.world=+e||0):a&&"object"==typeof a?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):(this.level=+a||0,this.row=+c||0,this.col=+d||0,this.world=+e||0)}return a.from=function(b,c,d,e){return a.pool.acquire(b,c,d,e)},a.getId=function(a,c,d,e){return"object"==typeof a?a.level+"/"+a.row+
"/"+a.col+"/"+a.world:a+"/"+c+"/"+d+"/"+e},Object.defineProperty(a.prototype,"id",{get:function(){return a.getId(this)},enumerable:!0,configurable:!0}),a.prototype.equals=function(a){return this.level===a.level&&this.row===a.row&&this.col===a.col&&this.world===a.world},a.prototype.release=function(){this.world=this.col=this.row=this.level=0},a.prototype.set=function(a,c,d,e){var b=typeof a;"object"===b?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):"string"===b?
(a=a.split("/"),c=a[1],d=a[2],e=a[3],this.level=parseFloat(a[0]),this.row=parseFloat(c),this.col=parseFloat(d),this.world=parseFloat(e)):(this.level=a,this.row=c,this.col=d,this.world=e);return this},a.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world},a}();return e.pool=new d(e,!0,null,25,50),e})},"esri/views/vectorTiles/TileIndex":function(){define(["require","exports","../2d/tiling/TileKey"],function(e,h,d){return function(){function a(a){if(!("index"in a))throw Error("The tilemap is missing the 'index' property.");
this._tilemap=a.index}return a.prototype.dataKey=function(a){var b=[a];if(0>a.level||0>a.row||0>a.col||0<a.row>>a.level||0<a.col>>a.level)return null;for(;0!==a.level;)a=new d(a.level-1,a.row>>1,a.col>>1,a.world),b.push(a);var e,h=this._tilemap,l=b.pop();if(1===h)return l;for(;b.length;){a=b.pop();e=l.level+1;var g=2*l.row,n=2*l.col;if(e=[d.getId(e,g,n,a.world),d.getId(e,g,n+1,a.world),d.getId(e,g+1,n,a.world),d.getId(e,g+1,n+1,a.world)].indexOf(a.id),h){if(0===h[e]){l=null;break}if(1===h[e]){l=a;
break}l=a;h=h[e]}}return l},a.prototype.forEach=function(a,c,d,e,h){this._callback=h;this._maxLevel=c+a;this._forEach(this._tilemap,c,d,e)},a.prototype._forEach=function(a,c,d,e){0!==a&&(this._callback(c,d,e),c!==this._maxLevel&&"object"==typeof a&&(this._forEach(a[0],c+1,2*d,2*e),this._forEach(a[1],c+1,2*d,2*e+1),this._forEach(a[2],c+1,2*d+1,2*e),this._forEach(a[3],c+1,2*d+1,2*e+1)))},a}()})},"esri/views/vectorTiles/SpriteMosaic":function(){define("require exports ./Rect ./GeometryUtils ./RectangleBinPack ../webgl/Texture".split(" "),
function(e,h,d,a,b,c){return function(){function e(a,c,d){void 0===d&&(d=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=1;(0>=a||0>=c)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=a;this._pageHeight=c;0<d&&(this._maxItemSize=d);this._binPack=new b(a-4,c-4)}return e.prototype.getWidth=function(a){return a>=
this._size.length?-1:this._size[a][0]},e.prototype.getHeight=function(a){return a>=this._size.length?-1:this._size[a][1]},e.prototype.setSpriteSource=function(a){if(this.dispose(),this.pixelRatio=a.devicePixelRatio,0===this._mosaicsData.length)this._binPack=new b(this._pageWidth-4,this._pageHeight-4),this._mosaicsData[0]=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0);this._sprites=
a},e.prototype.getSpriteItem=function(a,b){void 0===b&&(b=!1);var c=this._mosaicRects[a];if(c)return c;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;var d=this._sprites.getSpritePosition(a);if(!d||!d.width||!d.height||0>d.width||0>d.height)return null;var e=this._allocateImage(d.width,d.height),h=e[0],k=e[1],e=e[2];return 0>=h.width?null:(c={rect:h,width:d.width,height:d.height,sdf:d.sdf,pixelRatio:d.pixelRatio,page:k},this._copy(h,d,k,e,b),this._mosaicRects[a]=c,c)},e.prototype.preloadSpriteItems=
function(){for(var a=0,b=this._sprites.spriteNames;a<b.length;a++)this.getSpriteItem(b[a],!0)},e.prototype.getSpriteItems=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d]=this.getSpriteItem(d)}return b},e.prototype.getMosaicItemPosition=function(a,b){b=(a=this.getSpriteItem(a,b))&&a.rect;if(!b)return null;b.width=a.width;b.height=a.height;return{size:[a.width,a.height],tl:[(b.x+2)/this._size[a.page][0],(b.y+2)/this._size[a.page][1]],br:[(b.x+2+a.width)/this._size[a.page][0],(b.y+2+a.height)/
this._size[a.page][1]],page:a.page}},e.prototype.bind=function(a,b,d,e){void 0===d&&(d=0);void 0===e&&(e=0);this._textures[d]||(this._textures[d]=new c(a,{pixelFormat:6408,dataType:5121,width:this._size[d][0],height:this._size[d][1]},new Uint8Array(this._mosaicsData[d].buffer)));var g=this._textures[d];g.setSamplingMode(b);this._dirties[d]&&g.setData(new Uint8Array(this._mosaicsData[d].buffer));a.bindTexture(g,e);this._dirties[d]=!1},e._copyBits=function(a,b,c,d,e,h,m,w,q,v,x){var f=d*b+c;m=w*h+m;
if(x)for(m-=h,x=-1;v>=x;x++,f=((x+v)%v+d)*b+c,m+=h)for(w=-1;q>=w;w++)e[m+w]=a[f+(w+q)%q];else for(x=0;v>x;x++){for(w=0;q>w;w++)e[m+w]=a[f+w];f+=b;m+=h}},e.prototype._copy=function(a,b,c,d,h){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(c>=this._mosaicsData.length)){var g=new Uint32Array(this._sprites.image.buffer),k=this._mosaicsData[c];k&&g||console.error("Source or target images are uninitialized!");e._copyBits(g,this._sprites.width,b.x,b.y,k,d[0],a.x+2,a.y+2,b.width,b.height,h);this._dirties[c]=
!0}},e.prototype._allocateImage=function(c,e){c+=2;e+=2;var g=Math.max(c,e);if(this._maxItemSize&&this._maxItemSize<g){var g=Math.pow(2,Math.ceil(a.log2(c))),h=Math.pow(2,Math.ceil(a.log2(e)));c=new d(0,0,c,e);return this._mosaicsData.push(new Uint32Array(g*h)),this._dirties.push(!0),this._size.push([g,h]),this._textures.push(void 0),[c,this._mosaicsData.length-1,[g,h]]}g=c%4?4-c%4:4;h=e%4?4-e%4:4;1===g&&(g=5);1===h&&(h=5);g=this._binPack.allocate(c+g,e+h);return 0>=g.width?(this._dirties[this._currentPage]||
(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new b(this._pageWidth-4,this._pageHeight-4),this._allocateImage(c,e)):[g,this._currentPage,[this._pageWidth,this._pageHeight]]},e.prototype.dispose=function(){this._binPack=null;this._mosaicRects={};for(var a=0,b=this._textures;a<
b.length;a++){var c=b[a];c&&c.dispose()}this._textures.length=0},e}()})},"esri/views/vectorTiles/Rect":function(){define(["require","exports"],function(e,h){return function(){function d(a,b,c,d){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===d&&(d=0);this.x=a;this.y=b;this.width=c;this.height=d}return Object.defineProperty(d.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0}),d}()})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require",
"exports"],function(e,h){function d(a,c){return a%=c,0<=a?a:a+c}Object.defineProperty(h,"__esModule",{value:!0});h.C_INFINITY=Number.POSITIVE_INFINITY;h.C_PI=Math.PI;h.C_2PI=2*h.C_PI;h.C_PI_BY_2=h.C_PI/2;h.C_RAD_TO_256=128/h.C_PI;h.C_256_TO_RAD=h.C_PI/128;h.C_DEG_TO_256=256/360;h.C_DEG_TO_RAD=h.C_PI/180;h.C_SQRT2=1.414213562;h.C_SQRT2_INV=1/h.C_SQRT2;var a=1/Math.LN2;h.positiveMod=d;h.radToByte=function(a){return d(a*h.C_RAD_TO_256,256)};h.degToByte=function(a){return d(a*h.C_DEG_TO_256,256)};h.log2=
function(b){return Math.log(b)*a};h.sqr=function(a){return a*a};h.clamp=function(a,c,d){return Math.min(Math.max(a,c),d)};h.interpolate=function(a,c,d){return a*(1-d)+c*d};h.between=function(a,c,d){return a>=c&&d>=a||a>=d&&c>=a}})},"esri/views/vectorTiles/RectangleBinPack":function(){define(["require","exports","./Rect"],function(e,h,d){return function(){function a(a,c){this._height=this._width=0;this._free=[];this._width=a;this._height=c;this._free.push(new d(0,0,a,c))}return a.prototype.allocate=
function(a,c){for(var b=null,e=-1,h=0;h<this._free.length;++h){var g=this._free[h];a<=g.width&&c<=g.height&&(null===b||g.y<=b.y&&g.x<=b.x)&&(b=g,e=h)}return null===b?new d:(this._free.splice(e,1),b.width<b.height?(b.width>a&&this._free.push(new d(b.x+a,b.y,b.width-a,c)),b.height>c&&this._free.push(new d(b.x,b.y+c,b.width,b.height-c))):(b.width>a&&this._free.push(new d(b.x+a,b.y,b.width-a,b.height)),b.height>c&&this._free.push(new d(b.x,b.y+c,a,b.height-c))),new d(b.x,b.y,a,c))},a.prototype.release=
function(a){for(var b=0;b<this._free.length;++b){var d=this._free[b];if(d.y===a.y&&d.height===a.height&&d.x+d.width===a.x)d.width+=a.width;else if(d.x===a.x&&d.width===a.width&&d.y+d.height===a.y)d.height+=a.height;else if(a.y===d.y&&a.height===d.height&&a.x+a.width===d.x)d.x=a.x,d.width+=a.width;else{if(a.x!==d.x||a.width!==d.width||a.y+a.height!==d.y)continue;d.y=a.y;d.height+=a.height}this._free.splice(b,1);this.release(a)}this._free.push(a)},a}()})},"esri/views/vectorTiles/SpriteSource":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojo/Deferred dojo/promise/all ../../request ../../kernel ../../core/promiseUtils".split(" "),
function(e,h,d,a,b,c,m,k,l){return function(){function a(a,b){this.baseURL=a;this.devicePixelRatio=b;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}return Object.defineProperty(a.prototype,"spriteNames",{get:function(){var a=[],b;for(b in this._spritesData)a.push(b);return a.sort(),a},enumerable:!0,configurable:!0}),a.prototype.getSpritePosition=function(a){return this._spritesData[a]},a.prototype.load=function(){var a=this;return this.loadStatus=
"loading",this.baseURL?this._loadSprites().then(function(){return a.loadStatus="loaded",a}).otherwise(function(b){return a.loadStatus="failed",a}):l.resolve(this)},a.prototype._loadSprites=function(){var a=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var d=this.baseURL,e=this._isRetina?"@2x":"",g=m(d+e+".json",{callbackParamName:"callback",responseType:"json"}).then(function(b){a._spritesData=b.data}),h=new b,l=new Image;l.crossOrigin="anonymous";l.onload=function(){l.onload=null;a.width=
l.width;a.height=l.height;var b=document.createElement("canvas");b.width=l.width;b.height=l.height;b=b.getContext("2d");b.drawImage(l,0,0,l.width,l.height);for(var b=b.getImageData(0,0,l.width,l.height),c=new Uint8Array(b.data),d=0;d<c.length;d+=4)b=c[d+3]/255,c[d]*=b,c[d+1]*=b,c[d+2]*=b;a.image=c;h.resolve()};d=""+d+e+".png";k.id&&(e=k.id.findCredential(d))&&e.token&&(d+="?token\x3d"+e.token);return l.src=d,c([g,h.promise])},a}()})},"esri/views/vectorTiles/GlyphMosaic":function(){define("require exports dojo/promise/all dojo/has ./Rect ../webgl/Texture ./RectangleBinPack".split(" "),
function(e,h,d,a,b,c,m){var k;a("stable-symbol-rendering")&&(k=new Set);return function(){function e(a,b,c){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;(0>=a||0>=b)&&console.error("Glyph mosaic width and height must be greater than zero!");this.width=a;this.height=b;this._glyphSource=c;this._binPack=new m(a-4,b-4);this._glyphData.push(new Uint8Array(a*b));this._dirties.push(!0);this._textures.push(void 0)}
return e.prototype.getGlyphItems=function(c,e,h){var g=this,l=[],n=this._glyphSource,u=new Set;c=1/256;for(var v=0;v<h.length;v++)u.add(Math.floor(h[v]*c));var x=[];return u.forEach(function(a){if(256>=a){var b=e+a;g._rangePromises.has(b)?x.push(g._rangePromises.get(b)):(a=n.getRange(e,a).always(function(){g._rangePromises["delete"](b)}),g._rangePromises.set(b,a),x.push(a))}}),d(x).then(function(c){(c=g._glyphIndex[e])||(c={},g._glyphIndex[e]=c);var d;if(a("stable-symbol-rendering")){k.clear();for(var f=
0;f<h.length;f++)d=h[f],k.add(d);var t=[];u.forEach(function(a){t.push(a)});t.sort();d=[];for(f=0;f<t.length;f++)for(var r=t[f],q=0;256>q;++q)d.push(256*r+q)}else d=h;f=0;for(r=d;f<r.length;f++)if(d=r[f],q=c[d])a("stable-symbol-rendering")&&!k.has(d)||(l[d]={rect:q.rect,metrics:q.metrics,page:q.page});else{var w=n.getGlyph(e,d);if(w&&w.metrics){var q=w.metrics,v=void 0;if(0===q.width)v=new b(0,0,0,0);else{var x=q.width+6,E=q.height+6,G=x%4?4-x%4:4,K=E%4?4-E%4:4;1===G&&(G=5);1===K&&(K=5);v=g._binPack.allocate(x+
G,E+K);v.isEmpty&&(g._dirties[g._currentPage]||(g._glyphData[g._currentPage]=null),g._currentPage=g._glyphData.length,g._glyphData.push(new Uint8Array(g.width*g.height)),g._dirties.push(!0),g._textures.push(void 0),g._binPack=new m(g.width-4,g.height-4),v=g._binPack.allocate(x+G,E+K));var G=g._glyphData[g._currentPage],w=w.bitmap,L=K=void 0;if(w)for(var H=0;E>H;H++)for(var K=x*H,L=g.width*(v.y+H+1)+v.x,I=0;x>I;I++)G[L+I+1]=w[K+I]}c[d]={rect:v,metrics:q,tileIDs:null,page:g._currentPage};a("stable-symbol-rendering")&&
!k.has(d)||(l[d]={rect:v,metrics:q,page:g._currentPage});g._dirties[g._currentPage]=!0}}return l})},e.prototype.removeGlyphs=function(a){for(var b in this._glyphIndex){var c=this._glyphIndex[b];if(c){var d=void 0,e;for(e in c)if(d=c[e],d.tileIDs["delete"](a),0===d.tileIDs.size){for(var g=this._glyphData[d.page],h=d.rect,k=void 0,l=void 0,f=0;f<h.height;f++)for(k=this.width*(h.y+f)+h.x,l=0;l<h.width;l++)g[k+l]=0;delete c[e];this._dirties[d.page]=!0}}}},e.prototype.bind=function(a,b,d,e){void 0===e&&
(e=0);this._textures[d]||(this._textures[d]=new c(a,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var g=this._textures[d];g.setSamplingMode(b);this._dirties[d]&&g.setData(this._glyphData[d]);a.bindTexture(g,e);this._dirties[d]=!1},e.prototype.dispose=function(){this._binPack=null;for(var a=0,b=this._textures;a<b.length;a++){var c=b[a];c&&c.dispose()}this._textures.length=0},e}()})},"esri/views/vectorTiles/GlyphSource":function(){define(["require",
"exports","../../core/promiseUtils","../../request","../../core/pbf"],function(e,h,d,a,b){var c=function(){function a(a){this._metrics=[];for(this._bitmaps=[];a.next();)switch(a.tag()){case 1:for(var b=a.getMessage();b.next();)switch(b.tag()){case 3:for(var c=b.getMessage(),d=void 0,e=void 0,h=void 0,k=void 0,l=void 0,m=void 0,x=void 0;c.next();)switch(c.tag()){case 1:d=c.getUInt32();break;case 2:e=c.getBytes();break;case 3:h=c.getUInt32();break;case 4:k=c.getUInt32();break;case 5:l=c.getSInt32();
break;case 6:m=c.getSInt32();break;case 7:x=c.getUInt32();break;default:c.skip()}d&&(this._metrics[d]={width:h,height:k,left:l,top:m,advance:x},this._bitmaps[d]=e);break;default:b.skip()}break;default:a.skip()}}return a.prototype.getMetrics=function(a){return this._metrics[a]},a.prototype.getBitmap=function(a){return this._bitmaps[a]},a}(),m=function(){function a(){this._ranges=[]}return a.prototype.getRange=function(a){return this._ranges[a]},a.prototype.addRange=function(a,b){this._ranges[a]=b},
a}();return function(){function e(a){this._glyphInfo={};this._baseURL=a}return e.prototype.getRange=function(e,g){var h=this._getFontStack(e);if(h.getRange(g))return d.resolve();var k=256*g,l=k+255;e=this._baseURL.replace("{fontstack}",e).replace("{range}",k+"-"+l);return a(e,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(a){h.addRange(g,new c(new b(new Uint8Array(a.data),new DataView(a.data))))})},e.prototype.getGlyph=function(a,b){if(a=this._getFontStack(a)){var c=Math.floor(b/
256);if(!(256<c)&&(a=a.getRange(c)))return{metrics:a.getMetrics(b),bitmap:a.getBitmap(b)}}},e.prototype._getFontStack=function(a){var b=this._glyphInfo[a];return b||(b=this._glyphInfo[a]=new m),b},e}()})},"esri/core/pbf":function(){define(["require","exports"],function(e,h){return function(){function d(a,b,c,d){this._tag=0;this._dataType=99;this._data=a;this._dataView=b;this._pos=c||0;this._end=d||a.byteLength}return d.prototype.clone=function(){return new d(this._data,this._dataView,this._pos,this._end)},
d.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var b=this._decodeVarint();if(this._tag=b>>3,this._dataType=7&b,!a||a===this._tag)break;this.skip()}return!0},d.prototype.empty=function(){return this._pos>=this._end},d.prototype.tag=function(){return this._tag},d.prototype.getInt32=function(){return this._decodeVarint()},d.prototype.getInt64=function(){return this._decodeVarint()},d.prototype.getUInt32=function(){return this._decodeVarint()},d.prototype.getUInt64=function(){return this._decodeVarint()},
d.prototype.getSInt32=function(){return this._decodeSVarint()},d.prototype.getSInt64=function(){return this._decodeSVarint()},d.prototype.getBool=function(){var a=0!==this._data[this._pos];return this._skip(1),a},d.prototype.getEnum=function(){return this._decodeVarint()},d.prototype.getFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getUint32(b+4,!0);return this._skip(8),a},d.prototype.getSFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+
4294967296*a.getInt32(b+4,!0);return this._skip(8),a},d.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);return this._skip(8),a},d.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);return this._skip(4),a},d.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);return this._skip(4),a},d.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);return this._skip(4),a},d.prototype.getString=function(){var a=
this._getLength(),b=this._pos,b=this._toString(this._data,b,b+a);return this._skip(a),b},d.prototype.getBytes=function(){var a=this._getLength(),b=this._pos,b=this._toBytes(this._data,b,b+a);return this._skip(a),b},d.prototype.getMessage=function(){var a=this._getLength(),b=this._pos,b=new d(this._data,this._dataView,b,b+a);return this._skip(a),b},d.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;
case 5:this._skip(4);break;default:throw Error("Invalid data type!");}},d.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a},d.prototype._decodeVarint=function(){var a,b=this._data,c=this._pos,d=0;if(10<=this._end-c){if(a=b[c++],d|=127&a,0!==(128&a))if(a=b[c++],d|=(127&a)<<7,0!==(128&a))if(a=b[c++],d|=(127&a)<<14,0!==(128&a))if(a=b[c++],d|=(127&a)<<21,0!==(128&a))if(a=b[c++],d+=268435456*(127&a),0!==(128&a))if(a=b[c++],d+=34359738368*
(127&a),0!==(128&a))if(a=b[c++],d+=4398046511104*(127&a),0!==(128&a))if(a=b[c++],d+=562949953421312*(127&a),0!==(128&a))if(a=b[c++],d+=72057594037927936*(127&a),0!==(128&a))if(a=b[c++],d+=0x7fffffffffffffff*(127&a),0!==(128&a))throw Error("Varint too long!");}else{for(var e=1;c!==this._end&&(a=b[c],0!==(128&a));)++c,d+=(127&a)*e,e*=128;if(c===this._end)throw Error("Varint overrun!");++c;d+=a*e}return this._pos=c,d},d.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/
2:a/2},d.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()},d.prototype._toString=function(a,b,c){var d="",e="";for(c=Math.min(this._end,c);c>b;++b){var h=a[b];128&h?e+="%"+h.toString(16):(d+=decodeURIComponent(e)+String.fromCharCode(h),e="")}return e.length&&(d+=decodeURIComponent(e)),d},d.prototype._toBytes=function(a,b,c){return c=Math.min(this._end,c),new Uint8Array(a.buffer,b,c-b)},d}()})},"esri/views/vectorTiles/VectorTileDisplayObject":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/libs/gl-matrix/vec2 ../../core/libs/gl-matrix/mat4 ../../core/ObjectPool ../../geometry/support/spatialReferenceUtils ../webgl/BufferObject ../2d/engine/DisplayObject ../2d/tiling/TileKey ./RenderBucket".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){e=function(c){function e(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];e=c.call(this)||this;return e._renderBuckets=[],e._vectorTileData=null,e._symbolUpdateData=null,e.status=5,e.coords=[0,0],e.tileTransform={transform:Float32Array[16],displayCoord:Float32Array[2]},e.stencilData={mask:0,reference:0},e.status=0,e.tileTransform.transform=b.create(),e.tileTransform.displayCoord=a.create(),0<d.length&&(g=e.acquire).call.apply(g,[e].concat(d)),e;var g}return d(e,
c),e.prototype.reset=function(){g.pool.release(this.key);this.refKey=this.key=null;this.coords[0]=0;this.height=this.width=this.coords[1]=0;this.resolution=null;this.rotation=0;this.id=this._connection=this.workerID=this._glyphsMosaic=this.styleLayers=this._vectorTileData=null;this.tileTransform.transform.fill(0);this.tileTransform.displayCoord.fill(0);this.stencilData.mask=0;this.stencilData.reference=0;this._renderBuckets.length=0;this._symbolUpdateData=null;this.status=0},e.prototype.acquire=function(a,
b,c,d,e,f){this.key=a;this.refKey=b;b=c.lods[a.level].resolution;var g=c.size[0]*b,h=c.origin,k=a.col*g,g=a.row*g,l=c.spatialReference,n=0;l&&(l._isWrappable?l._isWrappable():l.isWrappable)&&(n=m.getInfo(l),n=n.valid[1]-n.valid[0]);g=h.y-g;this.coords[0]=h.x+k+a.world*n;this.coords[1]=g;this.widthInPixels=c.size[1];this.coordRange=4096;this.resolution=b;this.rotation=f;this.styleLayers=d;this._glyphsMosaic=e;this.id=a.id;this.status=1},e.prototype.setData=function(a,b,c){this._vectorTileData=a;this.workerID=
b;this._connection=c;this.status=3},e.prototype.updateSymbolData=function(a){a&&(this._symbolUpdateData=a,this.requestRender())},e.prototype.dispose=function(){this.polygonTrianglesVertexArrayObject&&(this.polygonTrianglesVertexArrayObject.dispose(),this.polygonTrianglesVertexArrayObject=null);this.polygonOutlineVertexArrayObject&&(this.polygonOutlineVertexArrayObject.dispose(),this.polygonOutlineVertexArrayObject=null);this.lineTrianglesVertexArrayObject&&(this.lineTrianglesVertexArrayObject.dispose(),
this.lineTrianglesVertexArrayObject=null);this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.polygonTrianglesVertexBuffer&&(this.polygonTrianglesVertexBuffer.dispose(),this.polygonTrianglesVertexBuffer=null);this.polygonTrianglesIndexBuffer&&(this.polygonTrianglesIndexBuffer.dispose(),this.polygonTrianglesIndexBuffer=null);this.polygonOutlinesVertexBuffer&&
(this.polygonOutlinesVertexBuffer.dispose(),this.polygonOutlinesVertexBuffer=null);this.polygonOutlinesIndexBuffer&&(this.polygonOutlinesIndexBuffer.dispose(),this.polygonOutlinesIndexBuffer=null);this.lineVertexBuffer&&(this.lineVertexBuffer.dispose(),this.lineVertexBuffer=null);this.lineTrianglesIndexBuffer&&(this.lineTrianglesIndexBuffer.dispose(),this.lineTrianglesIndexBuffer=null);this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),
this.iconIndexBuffer=null);this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null);this.texture&&(this.texture.dispose(),this.texture=null);this._renderBuckets.length=0;this.status=7},e.prototype.attach=function(a){if(4===this.status)return!0;if(this.status=3,!this._vectorTileData)return!1;if(0===this._renderBuckets.length)for(var b=new Uint32Array(this._vectorTileData.bucketDataInfo),c=b.length,
d=0;c>d;){var e=b[d],f=b[d+1];if(0===f)f=new n.BackgroundRenderBucket,f.layerID=e,this._renderBuckets.push(f),d+=2;else if(1===f)f=new n.FillRenderBucket,f.layerID=e,f.triangleElementStart=b[d+2],f.triangleElementCount=b[d+3],f.outlineElementStart=b[d+4],f.outlineElementCount=b[d+5],this._renderBuckets.push(f),d+=6;else if(2===f)f=new n.LineRenderBucket,f.layerID=e,f.triangleElementStart=b[d+2],f.triangleElementCount=b[d+3],this._renderBuckets.push(f),d+=6;else if(3===f){f=new n.SymbolRenderBucket;
f.layerID=e;f.isSDF=0!==b[d+2];var e=b[d+3],g=d+4;if(0<e)for(var g=d+4,h=void 0,l=void 0,m=void 0,t=0;e>t;t++)h=b[g],l=b[g+1],m=b[g+2],f.markerPerPageElementsMap.set(h,[l,m]),g+=3;var r=b[g];if(0<r)for(g++,m=l=h=void 0,t=0;r>t;t++)h=b[g],l=b[g+1],m=b[g+2],f.glyphPerPageElementsMap.set(h,[l,m]),g+=3;this._renderBuckets.push(f);d+=5+3*e+3*r}else console.error("Bad bucket type!")}a=a.context;b=new Uint32Array(this._vectorTileData.bufferDataInfo);c=b.length;for(f=d=0;c>f;f+=2,d++)if(e=b[f],!(0>=b[f+1]||
0===this._vectorTileData.bufferData[d].byteLength))switch(e){case 2:this.polygonTrianglesVertexBuffer?this.polygonTrianglesVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.polygonTrianglesVertexBuffer=k.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 6:this.polygonTrianglesIndexBuffer?this.polygonTrianglesIndexBuffer.setData(this._vectorTileData.bufferData[d]):this.polygonTrianglesIndexBuffer=k.createIndex(a,35044,this._vectorTileData.bufferData[d]);break;case 3:this.polygonOutlinesVertexBuffer?
this.polygonOutlinesVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.polygonOutlinesVertexBuffer=k.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 7:this.polygonOutlinesIndexBuffer?this.polygonOutlinesIndexBuffer.setData(this._vectorTileData.bufferData[d]):this.polygonOutlinesIndexBuffer=k.createIndex(a,35044,this._vectorTileData.bufferData[d]);break;case 0:this.lineVertexBuffer?this.lineVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.lineVertexBuffer=
k.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 8:this.lineTrianglesIndexBuffer?this.lineTrianglesIndexBuffer.setData(this._vectorTileData.bufferData[d]):this.lineTrianglesIndexBuffer=k.createIndex(a,35044,this._vectorTileData.bufferData[d]);break;case 4:this.iconVertexBuffer?this.iconVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.iconVertexBuffer=k.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 9:this.iconIndexBuffer?this.iconIndexBuffer.setData(this._vectorTileData.bufferData[d]):
this.iconIndexBuffer=k.createIndex(a,35044,this._vectorTileData.bufferData[d]);break;case 5:this.textVertexBuffer?this.textVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.textVertexBuffer=k.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 10:this.textIndexBuffer?this.textIndexBuffer.setData(this._vectorTileData.bufferData[d]):this.textIndexBuffer=k.createIndex(a,35044,this._vectorTileData.bufferData[d])}return this.status=4,!0},e.prototype.detach=function(a){-1!==
this.workerID&&this._connection&&6!==this.status&&7!==this.status&&this._connection.broadcast("destructTileData",{key:this.id,worker:this.workerID},[]);this.dispose();c.prototype.detach.call(this,a)},e.prototype.doRender=function(a){if(this.visible&&4===this.status){var b=a.context,c=a.renderer;if(b&&c){var d=a.drawphase;this._symbolUpdateData&&this._updateSymbolData(a);b.setStencilFunction(514,this.stencilData.reference,this.stencilData.mask);var e=this.styleLayers,f=void 0!==a.layerOpacity?a.layerOpacity:
1;if(0!==f){var g,h=this._renderBuckets.length,k=0;if(0===d)for(k=h-1;0<=k;k--)g=this._renderBuckets[k],3!==g.type&&g.hasData()&&c.renderBucket(b,g,a.displayLevel,a.requiredLevel,d,this,e.layers[g.layerID],f);else for(k=0;h>k;k++)g=this._renderBuckets[k],g.hasData()&&c.renderBucket(b,g,a.displayLevel,a.requiredLevel,d,this,e.layers[g.layerID],f)}}}},e.prototype._updateSymbolData=function(a){var b=new Uint32Array(this._symbolUpdateData.bucketDataInfo),c=b.length;if(0===c)return this._symbolUpdateData=
null,!0;if(1>a.budget.remaining||4!==this.status)return this.requestRender(),!1;a=a.context;for(var d=new Uint32Array(this._symbolUpdateData.bufferDataInfo),e=d.length,f=0,g=0;e>g;g+=2,f++)switch(d[g]){case 4:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconVertexBuffer=k.createVertex(a,35044,this._symbolUpdateData.bufferData[f]);break;case 9:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.iconIndexBuffer=k.createIndex(a,
35044,this._symbolUpdateData.bufferData[f]);break;case 5:this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textVertexBuffer=k.createVertex(a,35044,this._symbolUpdateData.bufferData[f]);break;case 10:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null),this.textIndexBuffer=k.createIndex(a,35044,this._symbolUpdateData.bufferData[f])}a=this._renderBuckets.length;for(d=0;a>d;d++)this._renderBuckets[d]instanceof n.SymbolRenderBucket&&(e=
this._renderBuckets[d],e.markerPerPageElementsMap.clear(),e.glyphPerPageElementsMap.clear());for(a=0;c>a;){e=b[a];f=-1;g=this._renderBuckets.length;for(d=0;g>d;d++)if(this._renderBuckets[d].layerID===e){f=d;break}(d=this._renderBuckets[f])||(d=new n.SymbolRenderBucket,d.layerID=e,d.isSDF=0!==b[a+2],this._renderBuckets.push(d));var e=b[a+3],h=a+4;if(0<e)for(var h=a+4,l=g=f=void 0,m=0;e>m;m++)f=b[h],g=b[h+1],l=b[h+2],d.markerPerPageElementsMap.set(f,[g,l]),h+=3;var r=b[h];if(0<r)for(h++,l=g=f=void 0,
m=0;r>m;m++)f=b[h],g=b[h+1],l=b[h+2],d.glyphPerPageElementsMap.set(f,[g,l]),h+=3;a+=5+3*e+3*r}return this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null),this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null),this._symbolUpdateData=null,!0},e}(l);return e.pool=new c(e),e})},"esri/core/libs/gl-matrix/vec2":function(){define(["./common"],function(e){var h={};return h.create=function(){var d=new e.ARRAY_TYPE(2);
return d[0]=0,d[1]=0,d},h.clone=function(d){var a=new e.ARRAY_TYPE(2);return a[0]=d[0],a[1]=d[1],a},h.fromValues=function(d,a){var b=new e.ARRAY_TYPE(2);return b[0]=d,b[1]=a,b},h.copy=function(d,a){return d[0]=a[0],d[1]=a[1],d},h.set=function(d,a,b){return d[0]=a,d[1]=b,d},h.add=function(d,a,b){return d[0]=a[0]+b[0],d[1]=a[1]+b[1],d},h.subtract=function(d,a,b){return d[0]=a[0]-b[0],d[1]=a[1]-b[1],d},h.sub=h.subtract,h.multiply=function(d,a,b){return d[0]=a[0]*b[0],d[1]=a[1]*b[1],d},h.mul=h.multiply,
h.divide=function(d,a,b){return d[0]=a[0]/b[0],d[1]=a[1]/b[1],d},h.div=h.divide,h.ceil=function(d,a){return d[0]=Math.ceil(a[0]),d[1]=Math.ceil(a[1]),d},h.floor=function(d,a){return d[0]=Math.floor(a[0]),d[1]=Math.floor(a[1]),d},h.min=function(d,a,b){return d[0]=Math.min(a[0],b[0]),d[1]=Math.min(a[1],b[1]),d},h.max=function(d,a,b){return d[0]=Math.max(a[0],b[0]),d[1]=Math.max(a[1],b[1]),d},h.round=function(d,a){return d[0]=Math.round(a[0]),d[1]=Math.round(a[1]),d},h.scale=function(d,a,b){return d[0]=
a[0]*b,d[1]=a[1]*b,d},h.scaleAndAdd=function(d,a,b,c){return d[0]=a[0]+b[0]*c,d[1]=a[1]+b[1]*c,d},h.distance=function(d,a){var b=a[0]-d[0];d=a[1]-d[1];return Math.sqrt(b*b+d*d)},h.dist=h.distance,h.squaredDistance=function(d,a){var b=a[0]-d[0];d=a[1]-d[1];return b*b+d*d},h.sqrDist=h.squaredDistance,h.length=function(d){var a=d[0];d=d[1];return Math.sqrt(a*a+d*d)},h.len=h.length,h.squaredLength=function(d){var a=d[0];d=d[1];return a*a+d*d},h.sqrLen=h.squaredLength,h.negate=function(d,a){return d[0]=
-a[0],d[1]=-a[1],d},h.inverse=function(d,a){return d[0]=1/a[0],d[1]=1/a[1],d},h.normalize=function(d,a){var b=a[0],c=a[1],b=b*b+c*c;return 0<b&&(b=1/Math.sqrt(b),d[0]=a[0]*b,d[1]=a[1]*b),d},h.dot=function(d,a){return d[0]*a[0]+d[1]*a[1]},h.cross=function(d,a,b){a=a[0]*b[1]-a[1]*b[0];return d[0]=d[1]=0,d[2]=a,d},h.lerp=function(d,a,b,c){var e=a[0];a=a[1];return d[0]=e+c*(b[0]-e),d[1]=a+c*(b[1]-a),d},h.random=function(d,a){a=a||1;var b=2*e.RANDOM()*Math.PI;return d[0]=Math.cos(b)*a,d[1]=Math.sin(b)*
a,d},h.transformMat2=function(d,a,b){var c=a[0];a=a[1];return d[0]=b[0]*c+b[2]*a,d[1]=b[1]*c+b[3]*a,d},h.transformMat2d=function(d,a,b){var c=a[0];a=a[1];return d[0]=b[0]*c+b[2]*a+b[4],d[1]=b[1]*c+b[3]*a+b[5],d},h.transformMat3=function(d,a,b){var c=a[0];a=a[1];return d[0]=b[0]*c+b[3]*a+b[6],d[1]=b[1]*c+b[4]*a+b[7],d},h.transformMat4=function(d,a,b){var c=a[0];a=a[1];return d[0]=b[0]*c+b[4]*a+b[12],d[1]=b[1]*c+b[5]*a+b[13],d},h.forEach=function(){var d=h.create();return function(a,b,c,e,h,l){b||(b=
2);c||(c=0);for(e=e?Math.min(e*b+c,a.length):a.length;e>c;c+=b)d[0]=a[c],d[1]=a[c+1],h(d,d,l),a[c]=d[0],a[c+1]=d[1];return a}}(),h.str=function(d){return"vec2("+d[0]+", "+d[1]+")"},h.exactEquals=function(d,a){return d[0]===a[0]&&d[1]===a[1]},h.equals=function(d,a){var b=d[0];d=d[1];var c=a[0];a=a[1];return Math.abs(b-c)<=e.EPSILON*Math.max(1,Math.abs(b),Math.abs(c))&&Math.abs(d-a)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(a))},h})},"esri/core/libs/gl-matrix/common":function(){define([],function(){var e=
{EPSILON:1E-6};e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;e.RANDOM=Math.random;e.ENABLE_SIMD=!1;e.SIMD_AVAILABLE=e.ARRAY_TYPE===Float32Array&&"SIMD"in this;e.USE_SIMD=e.ENABLE_SIMD&&e.SIMD_AVAILABLE;e.setMatrixArrayType=function(d){e.ARRAY_TYPE=d};var h=Math.PI/180;return e.toRadian=function(d){return d*h},e.equals=function(d,a){return Math.abs(d-a)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(a))},e})},"esri/core/libs/gl-matrix/mat4":function(){define(["./common"],function(e){var h=
{scalar:{},SIMD:{}};return h.create=function(){var d=new e.ARRAY_TYPE(16);return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},h.clone=function(d){var a=new e.ARRAY_TYPE(16);return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[8]=d[8],a[9]=d[9],a[10]=d[10],a[11]=d[11],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15],a},h.copy=function(d,a){return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=
a[4],d[5]=a[5],d[6]=a[6],d[7]=a[7],d[8]=a[8],d[9]=a[9],d[10]=a[10],d[11]=a[11],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15],d},h.fromValues=function(d,a,b,c,h,k,l,g,n,u,r,t,w,q,v,x){var f=new e.ARRAY_TYPE(16);return f[0]=d,f[1]=a,f[2]=b,f[3]=c,f[4]=h,f[5]=k,f[6]=l,f[7]=g,f[8]=n,f[9]=u,f[10]=r,f[11]=t,f[12]=w,f[13]=q,f[14]=v,f[15]=x,f},h.set=function(d,a,b,c,e,h,l,g,n,u,r,t,w,q,v,x,f){return d[0]=a,d[1]=b,d[2]=c,d[3]=e,d[4]=h,d[5]=l,d[6]=g,d[7]=n,d[8]=u,d[9]=r,d[10]=t,d[11]=w,d[12]=q,d[13]=v,d[14]=
x,d[15]=f,d},h.identity=function(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},h.scalar.transpose=function(d,a){if(d===a){var b=a[1],c=a[2],e=a[3],h=a[6],l=a[7],g=a[11];d[1]=a[4];d[2]=a[8];d[3]=a[12];d[4]=b;d[6]=a[9];d[7]=a[13];d[8]=c;d[9]=h;d[11]=a[14];d[12]=e;d[13]=l;d[14]=g}else d[0]=a[0],d[1]=a[4],d[2]=a[8],d[3]=a[12],d[4]=a[1],d[5]=a[5],d[6]=a[9],d[7]=a[13],d[8]=a[2],d[9]=a[6],d[10]=a[10],d[11]=a[14],d[12]=a[3],
d[13]=a[7],d[14]=a[11],d[15]=a[15];return d},h.SIMD.transpose=function(d,a){var b,c,e,h,l,g,n,u,r,t;return b=SIMD.Float32x4.load(a,0),c=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),h=SIMD.Float32x4.load(a,12),l=SIMD.Float32x4.shuffle(b,c,0,1,4,5),g=SIMD.Float32x4.shuffle(e,h,0,1,4,5),n=SIMD.Float32x4.shuffle(l,g,0,2,4,6),u=SIMD.Float32x4.shuffle(l,g,1,3,5,7),SIMD.Float32x4.store(d,0,n),SIMD.Float32x4.store(d,4,u),l=SIMD.Float32x4.shuffle(b,c,2,3,6,7),g=SIMD.Float32x4.shuffle(e,h,2,3,6,7),r=
SIMD.Float32x4.shuffle(l,g,0,2,4,6),t=SIMD.Float32x4.shuffle(l,g,1,3,5,7),SIMD.Float32x4.store(d,8,r),SIMD.Float32x4.store(d,12,t),d},h.transpose=e.USE_SIMD?h.SIMD.transpose:h.scalar.transpose,h.scalar.invert=function(d,a){var b=a[0],c=a[1],e=a[2],h=a[3],l=a[4],g=a[5],n=a[6],u=a[7],r=a[8],t=a[9],w=a[10],q=a[11],v=a[12],x=a[13],f=a[14];a=a[15];var p=b*g-c*l,z=b*n-e*l,y=b*u-h*l,A=c*n-e*g,B=c*u-h*g,D=e*u-h*n,F=r*x-t*v,C=r*f-w*v,E=r*a-q*v,G=t*f-w*x,K=t*a-q*x,L=w*a-q*f,H=p*L-z*K+y*G+A*E-B*C+D*F;return H?
(H=1/H,d[0]=(g*L-n*K+u*G)*H,d[1]=(e*K-c*L-h*G)*H,d[2]=(x*D-f*B+a*A)*H,d[3]=(w*B-t*D-q*A)*H,d[4]=(n*E-l*L-u*C)*H,d[5]=(b*L-e*E+h*C)*H,d[6]=(f*y-v*D-a*z)*H,d[7]=(r*D-w*y+q*z)*H,d[8]=(l*K-g*E+u*F)*H,d[9]=(c*E-b*K-h*F)*H,d[10]=(v*B-x*y+a*p)*H,d[11]=(t*y-r*B-q*p)*H,d[12]=(g*C-l*G-n*F)*H,d[13]=(b*G-c*C+e*F)*H,d[14]=(x*z-v*A-f*p)*H,d[15]=(r*A-t*z+w*p)*H,d):null},h.SIMD.invert=function(d,a){var b,c,e,h,l,g,n,u,r,t,w=SIMD.Float32x4.load(a,0),q=SIMD.Float32x4.load(a,4),v=SIMD.Float32x4.load(a,8);a=SIMD.Float32x4.load(a,
12);return l=SIMD.Float32x4.shuffle(w,q,0,1,4,5),c=SIMD.Float32x4.shuffle(v,a,0,1,4,5),b=SIMD.Float32x4.shuffle(l,c,0,2,4,6),c=SIMD.Float32x4.shuffle(c,l,1,3,5,7),l=SIMD.Float32x4.shuffle(w,q,2,3,6,7),h=SIMD.Float32x4.shuffle(v,a,2,3,6,7),e=SIMD.Float32x4.shuffle(l,h,0,2,4,6),h=SIMD.Float32x4.shuffle(h,l,1,3,5,7),l=SIMD.Float32x4.mul(e,h),l=SIMD.Float32x4.swizzle(l,1,0,3,2),g=SIMD.Float32x4.mul(c,l),n=SIMD.Float32x4.mul(b,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,
l),g),n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,l),n),n=SIMD.Float32x4.swizzle(n,2,3,0,1),l=SIMD.Float32x4.mul(c,e),l=SIMD.Float32x4.swizzle(l,1,0,3,2),g=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,l),g),r=SIMD.Float32x4.mul(b,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(h,l)),r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,l),r),r=SIMD.Float32x4.swizzle(r,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,3,0,1),h),l=SIMD.Float32x4.swizzle(l,1,0,3,2),e=SIMD.Float32x4.swizzle(e,
2,3,0,1),g=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),g),u=SIMD.Float32x4.mul(b,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(e,l)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,l),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),l=SIMD.Float32x4.mul(b,c),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,l),u),r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),r),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,l),u),r=SIMD.Float32x4.sub(r,
SIMD.Float32x4.mul(e,l)),l=SIMD.Float32x4.mul(b,h),l=SIMD.Float32x4.swizzle(l,1,0,3,2),n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(e,l)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),u),l=SIMD.Float32x4.swizzle(l,2,3,0,1),n=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),n),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(c,l)),l=SIMD.Float32x4.mul(b,e),l=SIMD.Float32x4.swizzle(l,1,0,3,2),n=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,l),n),r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(c,l)),l=SIMD.Float32x4.swizzle(l,2,
3,0,1),n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(h,l)),r=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),r),t=SIMD.Float32x4.mul(b,g),t=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(t,2,3,0,1),t),t=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(t,1,0,3,2),t),l=SIMD.Float32x4.reciprocalApproximation(t),t=SIMD.Float32x4.sub(SIMD.Float32x4.add(l,l),SIMD.Float32x4.mul(t,SIMD.Float32x4.mul(l,l))),(t=SIMD.Float32x4.swizzle(t,0,0,0,0))?(SIMD.Float32x4.store(d,0,SIMD.Float32x4.mul(t,g)),SIMD.Float32x4.store(d,4,SIMD.Float32x4.mul(t,
n)),SIMD.Float32x4.store(d,8,SIMD.Float32x4.mul(t,u)),SIMD.Float32x4.store(d,12,SIMD.Float32x4.mul(t,r)),d):null},h.invert=e.USE_SIMD?h.SIMD.invert:h.scalar.invert,h.scalar.adjoint=function(d,a){var b=a[0],c=a[1],e=a[2],h=a[3],l=a[4],g=a[5],n=a[6],u=a[7],r=a[8],t=a[9],w=a[10],q=a[11],v=a[12],x=a[13],f=a[14];a=a[15];return d[0]=g*(w*a-q*f)-t*(n*a-u*f)+x*(n*q-u*w),d[1]=-(c*(w*a-q*f)-t*(e*a-h*f)+x*(e*q-h*w)),d[2]=c*(n*a-u*f)-g*(e*a-h*f)+x*(e*u-h*n),d[3]=-(c*(n*q-u*w)-g*(e*q-h*w)+t*(e*u-h*n)),d[4]=-(l*
(w*a-q*f)-r*(n*a-u*f)+v*(n*q-u*w)),d[5]=b*(w*a-q*f)-r*(e*a-h*f)+v*(e*q-h*w),d[6]=-(b*(n*a-u*f)-l*(e*a-h*f)+v*(e*u-h*n)),d[7]=b*(n*q-u*w)-l*(e*q-h*w)+r*(e*u-h*n),d[8]=l*(t*a-q*x)-r*(g*a-u*x)+v*(g*q-u*t),d[9]=-(b*(t*a-q*x)-r*(c*a-h*x)+v*(c*q-h*t)),d[10]=b*(g*a-u*x)-l*(c*a-h*x)+v*(c*u-h*g),d[11]=-(b*(g*q-u*t)-l*(c*q-h*t)+r*(c*u-h*g)),d[12]=-(l*(t*f-w*x)-r*(g*f-n*x)+v*(g*w-n*t)),d[13]=b*(t*f-w*x)-r*(c*f-e*x)+v*(c*w-e*t),d[14]=-(b*(g*f-n*x)-l*(c*f-e*x)+v*(c*n-e*g)),d[15]=b*(g*w-n*t)-l*(c*w-e*t)+r*(c*n-
e*g),d},h.SIMD.adjoint=function(d,a){var b,c,e,h,l,g,n,u,r,t,w,q;b=SIMD.Float32x4.load(a,0);c=SIMD.Float32x4.load(a,4);e=SIMD.Float32x4.load(a,8);a=SIMD.Float32x4.load(a,12);return u=SIMD.Float32x4.shuffle(b,c,0,1,4,5),l=SIMD.Float32x4.shuffle(e,a,0,1,4,5),h=SIMD.Float32x4.shuffle(u,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,u,1,3,5,7),u=SIMD.Float32x4.shuffle(b,c,2,3,6,7),n=SIMD.Float32x4.shuffle(e,a,2,3,6,7),g=SIMD.Float32x4.shuffle(u,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,u,1,3,5,7),u=SIMD.Float32x4.mul(g,
n),u=SIMD.Float32x4.swizzle(u,1,0,3,2),r=SIMD.Float32x4.mul(l,u),t=SIMD.Float32x4.mul(h,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,u),r),t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,u),t),t=SIMD.Float32x4.swizzle(t,2,3,0,1),u=SIMD.Float32x4.mul(l,g),u=SIMD.Float32x4.swizzle(u,1,0,3,2),r=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,u),r),q=SIMD.Float32x4.mul(h,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(n,u)),q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,
u),q),q=SIMD.Float32x4.swizzle(q,2,3,0,1),u=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,3,0,1),n),u=SIMD.Float32x4.swizzle(u,1,0,3,2),g=SIMD.Float32x4.swizzle(g,2,3,0,1),r=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,u),r),w=SIMD.Float32x4.mul(h,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(g,u)),w=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,u),w),w=SIMD.Float32x4.swizzle(w,2,3,0,1),u=SIMD.Float32x4.mul(h,l),u=SIMD.Float32x4.swizzle(u,1,0,3,2),w=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,
u),w),q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,u),q),u=SIMD.Float32x4.swizzle(u,2,3,0,1),w=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),w),q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(g,u)),u=SIMD.Float32x4.mul(h,n),u=SIMD.Float32x4.swizzle(u,1,0,3,2),t=SIMD.Float32x4.sub(t,SIMD.Float32x4.mul(g,u)),w=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,u),w),u=SIMD.Float32x4.swizzle(u,2,3,0,1),t=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,u),t),w=SIMD.Float32x4.sub(w,SIMD.Float32x4.mul(l,u)),u=SIMD.Float32x4.mul(h,g),
u=SIMD.Float32x4.swizzle(u,1,0,3,2),t=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,u),t),q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(l,u)),u=SIMD.Float32x4.swizzle(u,2,3,0,1),t=SIMD.Float32x4.sub(t,SIMD.Float32x4.mul(n,u)),q=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,u),q),SIMD.Float32x4.store(d,0,r),SIMD.Float32x4.store(d,4,t),SIMD.Float32x4.store(d,8,w),SIMD.Float32x4.store(d,12,q),d},h.adjoint=e.USE_SIMD?h.SIMD.adjoint:h.scalar.adjoint,h.determinant=function(d){var a=d[0],b=d[1],c=d[2],e=d[3],h=d[4],l=d[5],
g=d[6],n=d[7],u=d[8],r=d[9],t=d[10],w=d[11],q=d[12],v=d[13],x=d[14];d=d[15];return(a*l-b*h)*(t*d-w*x)-(a*g-c*h)*(r*d-w*v)+(a*n-e*h)*(r*x-t*v)+(b*g-c*l)*(u*d-w*q)-(b*n-e*l)*(u*x-t*q)+(c*n-e*g)*(u*v-r*q)},h.SIMD.multiply=function(d,a,b){var c=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),h=SIMD.Float32x4.load(a,8);a=SIMD.Float32x4.load(a,12);var l=SIMD.Float32x4.load(b,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,
1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),a))));SIMD.Float32x4.store(d,0,l);l=SIMD.Float32x4.load(b,4);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),a))));SIMD.Float32x4.store(d,
4,l);l=SIMD.Float32x4.load(b,8);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),a))));SIMD.Float32x4.store(d,8,l);b=SIMD.Float32x4.load(b,12);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,0,0,0,0),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,
1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b,3,3,3,3),a))));return SIMD.Float32x4.store(d,12,c),d},h.scalar.multiply=function(d,a,b){var c=a[0],e=a[1],h=a[2],l=a[3],g=a[4],n=a[5],u=a[6],r=a[7],t=a[8],w=a[9],q=a[10],v=a[11],x=a[12],f=a[13],p=a[14];a=a[15];var z=b[0],y=b[1],A=b[2],B=b[3];return d[0]=z*c+y*g+A*t+B*x,d[1]=z*e+y*n+A*w+B*f,d[2]=z*h+y*u+A*q+B*p,d[3]=z*l+y*r+A*v+B*a,z=b[4],y=b[5],A=b[6],B=b[7],d[4]=z*c+
y*g+A*t+B*x,d[5]=z*e+y*n+A*w+B*f,d[6]=z*h+y*u+A*q+B*p,d[7]=z*l+y*r+A*v+B*a,z=b[8],y=b[9],A=b[10],B=b[11],d[8]=z*c+y*g+A*t+B*x,d[9]=z*e+y*n+A*w+B*f,d[10]=z*h+y*u+A*q+B*p,d[11]=z*l+y*r+A*v+B*a,z=b[12],y=b[13],A=b[14],B=b[15],d[12]=z*c+y*g+A*t+B*x,d[13]=z*e+y*n+A*w+B*f,d[14]=z*h+y*u+A*q+B*p,d[15]=z*l+y*r+A*v+B*a,d},h.multiply=e.USE_SIMD?h.SIMD.multiply:h.scalar.multiply,h.mul=h.multiply,h.scalar.translate=function(d,a,b){var c,e,h,l,g,n,u,r,t,w,q,v,x=b[0],f=b[1];b=b[2];return a===d?(d[12]=a[0]*x+a[4]*
f+a[8]*b+a[12],d[13]=a[1]*x+a[5]*f+a[9]*b+a[13],d[14]=a[2]*x+a[6]*f+a[10]*b+a[14],d[15]=a[3]*x+a[7]*f+a[11]*b+a[15]):(c=a[0],e=a[1],h=a[2],l=a[3],g=a[4],n=a[5],u=a[6],r=a[7],t=a[8],w=a[9],q=a[10],v=a[11],d[0]=c,d[1]=e,d[2]=h,d[3]=l,d[4]=g,d[5]=n,d[6]=u,d[7]=r,d[8]=t,d[9]=w,d[10]=q,d[11]=v,d[12]=c*x+g*f+t*b+a[12],d[13]=e*x+n*f+w*b+a[13],d[14]=h*x+u*f+q*b+a[14],d[15]=l*x+r*f+v*b+a[15]),d},h.SIMD.translate=function(d,a,b){var c=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),h=SIMD.Float32x4.load(a,
8),l=SIMD.Float32x4.load(a,12);b=SIMD.Float32x4(b[0],b[1],b[2],0);a!==d&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=a[4],d[5]=a[5],d[6]=a[6],d[7]=a[7],d[8]=a[8],d[9]=a[9],d[10]=a[10],d[11]=a[11]);c=SIMD.Float32x4.mul(c,SIMD.Float32x4.swizzle(b,0,0,0,0));e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(b,1,1,1,1));h=SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(b,2,2,2,2));a=SIMD.Float32x4.add(c,SIMD.Float32x4.add(e,SIMD.Float32x4.add(h,l)));return SIMD.Float32x4.store(d,12,a),d},h.translate=e.USE_SIMD?
h.SIMD.translate:h.scalar.translate,h.scalar.scale=function(d,a,b){var c=b[0],e=b[1];b=b[2];return d[0]=a[0]*c,d[1]=a[1]*c,d[2]=a[2]*c,d[3]=a[3]*c,d[4]=a[4]*e,d[5]=a[5]*e,d[6]=a[6]*e,d[7]=a[7]*e,d[8]=a[8]*b,d[9]=a[9]*b,d[10]=a[10]*b,d[11]=a[11]*b,d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15],d},h.SIMD.scale=function(d,a,b){var c,e,h;b=SIMD.Float32x4(b[0],b[1],b[2],0);return c=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(d,0,SIMD.Float32x4.mul(c,SIMD.Float32x4.swizzle(b,0,0,0,0))),e=SIMD.Float32x4.load(a,
4),SIMD.Float32x4.store(d,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(b,1,1,1,1))),h=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(d,8,SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(b,2,2,2,2))),d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15],d},h.scale=e.USE_SIMD?h.SIMD.scale:h.scalar.scale,h.rotate=function(d,a,b,c){var h,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y,A,B,D,F,C,E,G,K,L=c[0],H=c[1];c=c[2];var I=Math.sqrt(L*L+H*H+c*c);return Math.abs(I)<e.EPSILON?null:(I=1/I,L*=I,H*=I,c*=I,h=Math.sin(b),k=Math.cos(b),
l=1-k,g=a[0],n=a[1],u=a[2],r=a[3],t=a[4],w=a[5],q=a[6],v=a[7],x=a[8],f=a[9],p=a[10],z=a[11],y=L*L*l+k,A=H*L*l+c*h,B=c*L*l-H*h,D=L*H*l-c*h,F=H*H*l+k,C=c*H*l+L*h,E=L*c*l+H*h,G=H*c*l-L*h,K=c*c*l+k,d[0]=g*y+t*A+x*B,d[1]=n*y+w*A+f*B,d[2]=u*y+q*A+p*B,d[3]=r*y+v*A+z*B,d[4]=g*D+t*F+x*C,d[5]=n*D+w*F+f*C,d[6]=u*D+q*F+p*C,d[7]=r*D+v*F+z*C,d[8]=g*E+t*G+x*K,d[9]=n*E+w*G+f*K,d[10]=u*E+q*G+p*K,d[11]=r*E+v*G+z*K,a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]),d)},h.scalar.rotateX=function(d,a,b){var c=Math.sin(b);
b=Math.cos(b);var e=a[4],h=a[5],l=a[6],g=a[7],n=a[8],u=a[9],r=a[10],t=a[11];return a!==d&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]),d[4]=e*b+n*c,d[5]=h*b+u*c,d[6]=l*b+r*c,d[7]=g*b+t*c,d[8]=n*b-e*c,d[9]=u*b-h*c,d[10]=r*b-l*c,d[11]=t*b-g*c,d},h.SIMD.rotateX=function(d,a,b){var c=SIMD.Float32x4.splat(Math.sin(b));b=SIMD.Float32x4.splat(Math.cos(b));a!==d&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]);var e=SIMD.Float32x4.load(a,
4);a=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(d,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,b),SIMD.Float32x4.mul(a,c))),SIMD.Float32x4.store(d,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,b),SIMD.Float32x4.mul(e,c))),d},h.rotateX=e.USE_SIMD?h.SIMD.rotateX:h.scalar.rotateX,h.scalar.rotateY=function(d,a,b){var c=Math.sin(b);b=Math.cos(b);var e=a[0],h=a[1],l=a[2],g=a[3],n=a[8],u=a[9],r=a[10],t=a[11];return a!==d&&(d[4]=a[4],d[5]=a[5],d[6]=a[6],d[7]=a[7],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=
a[15]),d[0]=e*b-n*c,d[1]=h*b-u*c,d[2]=l*b-r*c,d[3]=g*b-t*c,d[8]=e*c+n*b,d[9]=h*c+u*b,d[10]=l*c+r*b,d[11]=g*c+t*b,d},h.SIMD.rotateY=function(d,a,b){var c=SIMD.Float32x4.splat(Math.sin(b));b=SIMD.Float32x4.splat(Math.cos(b));a!==d&&(d[4]=a[4],d[5]=a[5],d[6]=a[6],d[7]=a[7],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]);var e=SIMD.Float32x4.load(a,0);a=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(d,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,b),SIMD.Float32x4.mul(a,c))),SIMD.Float32x4.store(d,
8,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,c),SIMD.Float32x4.mul(a,b))),d},h.rotateY=e.USE_SIMD?h.SIMD.rotateY:h.scalar.rotateY,h.scalar.rotateZ=function(d,a,b){var c=Math.sin(b);b=Math.cos(b);var e=a[0],h=a[1],l=a[2],g=a[3],n=a[4],u=a[5],r=a[6],t=a[7];return a!==d&&(d[8]=a[8],d[9]=a[9],d[10]=a[10],d[11]=a[11],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]),d[0]=e*b+n*c,d[1]=h*b+u*c,d[2]=l*b+r*c,d[3]=g*b+t*c,d[4]=n*b-e*c,d[5]=u*b-h*c,d[6]=r*b-l*c,d[7]=t*b-g*c,d},h.SIMD.rotateZ=function(d,a,b){var c=
SIMD.Float32x4.splat(Math.sin(b));b=SIMD.Float32x4.splat(Math.cos(b));a!==d&&(d[8]=a[8],d[9]=a[9],d[10]=a[10],d[11]=a[11],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]);var e=SIMD.Float32x4.load(a,0);a=SIMD.Float32x4.load(a,4);return SIMD.Float32x4.store(d,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,b),SIMD.Float32x4.mul(a,c))),SIMD.Float32x4.store(d,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,b),SIMD.Float32x4.mul(e,c))),d},h.rotateZ=e.USE_SIMD?h.SIMD.rotateZ:h.scalar.rotateZ,h.fromTranslation=function(d,
a){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=a[0],d[13]=a[1],d[14]=a[2],d[15]=1,d},h.fromScaling=function(d,a){return d[0]=a[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=a[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=a[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},h.fromRotation=function(d,a,b){var c,h,k,l=b[0],g=b[1];b=b[2];var n=Math.sqrt(l*l+g*g+b*b);return Math.abs(n)<e.EPSILON?null:(n=1/n,l*=n,g*=n,b*=n,c=Math.sin(a),h=Math.cos(a),k=1-h,d[0]=l*l*k+h,d[1]=
g*l*k+b*c,d[2]=b*l*k-g*c,d[3]=0,d[4]=l*g*k-b*c,d[5]=g*g*k+h,d[6]=b*g*k+l*c,d[7]=0,d[8]=l*b*k+g*c,d[9]=g*b*k-l*c,d[10]=b*b*k+h,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d)},h.fromXRotation=function(d,a){var b=Math.sin(a);a=Math.cos(a);return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=a,d[6]=b,d[7]=0,d[8]=0,d[9]=-b,d[10]=a,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},h.fromYRotation=function(d,a){var b=Math.sin(a);a=Math.cos(a);return d[0]=a,d[1]=0,d[2]=-b,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=b,d[9]=0,
d[10]=a,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},h.fromZRotation=function(d,a){var b=Math.sin(a);a=Math.cos(a);return d[0]=a,d[1]=b,d[2]=0,d[3]=0,d[4]=-b,d[5]=a,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},h.fromRotationTranslation=function(d,a,b){var c=a[0],e=a[1],h=a[2],l=a[3],g=c+c,n=e+e,u=h+h;a=c*g;var r=c*n,c=c*u,t=e*n,e=e*u,h=h*u,g=l*g,n=l*n,l=l*u;return d[0]=1-(t+h),d[1]=r+l,d[2]=c-n,d[3]=0,d[4]=r-l,d[5]=1-(a+h),d[6]=e+g,d[7]=0,d[8]=c+n,d[9]=e-g,d[10]=1-
(a+t),d[11]=0,d[12]=b[0],d[13]=b[1],d[14]=b[2],d[15]=1,d},h.getTranslation=function(d,a){return d[0]=a[12],d[1]=a[13],d[2]=a[14],d},h.getRotation=function(d,a){var b=a[0]+a[5]+a[10],c=0;return 0<b?(c=2*Math.sqrt(b+1),d[3]=.25*c,d[0]=(a[6]-a[9])/c,d[1]=(a[8]-a[2])/c,d[2]=(a[1]-a[4])/c):a[0]>a[5]&a[0]>a[10]?(c=2*Math.sqrt(1+a[0]-a[5]-a[10]),d[3]=(a[6]-a[9])/c,d[0]=.25*c,d[1]=(a[1]+a[4])/c,d[2]=(a[8]+a[2])/c):a[5]>a[10]?(c=2*Math.sqrt(1+a[5]-a[0]-a[10]),d[3]=(a[8]-a[2])/c,d[0]=(a[1]+a[4])/c,d[1]=.25*
c,d[2]=(a[6]+a[9])/c):(c=2*Math.sqrt(1+a[10]-a[0]-a[5]),d[3]=(a[1]-a[4])/c,d[0]=(a[8]+a[2])/c,d[1]=(a[6]+a[9])/c,d[2]=.25*c),d},h.fromRotationTranslationScale=function(d,a,b,c){var e=a[0],h=a[1],l=a[2],g=a[3],n=e+e,u=h+h,r=l+l;a=e*n;var t=e*u,e=e*r,w=h*u,h=h*r,l=l*r,n=g*n,u=g*u,g=g*r,r=c[0],q=c[1];c=c[2];return d[0]=(1-(w+l))*r,d[1]=(t+g)*r,d[2]=(e-u)*r,d[3]=0,d[4]=(t-g)*q,d[5]=(1-(a+l))*q,d[6]=(h+n)*q,d[7]=0,d[8]=(e+u)*c,d[9]=(h-n)*c,d[10]=(1-(a+w))*c,d[11]=0,d[12]=b[0],d[13]=b[1],d[14]=b[2],d[15]=
1,d},h.fromRotationTranslationScaleOrigin=function(d,a,b,c,e){var h=a[0],l=a[1],g=a[2],m=a[3],u=h+h,r=l+l,t=g+g;a=h*u;var w=h*r,h=h*t,q=l*r,l=l*t,g=g*t,u=m*u,r=m*r,m=m*t,t=c[0],v=c[1];c=c[2];var x=e[0],f=e[1];e=e[2];return d[0]=(1-(q+g))*t,d[1]=(w+m)*t,d[2]=(h-r)*t,d[3]=0,d[4]=(w-m)*v,d[5]=(1-(a+g))*v,d[6]=(l+u)*v,d[7]=0,d[8]=(h+r)*c,d[9]=(l-u)*c,d[10]=(1-(a+q))*c,d[11]=0,d[12]=b[0]+x-(d[0]*x+d[4]*f+d[8]*e),d[13]=b[1]+f-(d[1]*x+d[5]*f+d[9]*e),d[14]=b[2]+e-(d[2]*x+d[6]*f+d[10]*e),d[15]=1,d},h.fromQuat=
function(d,a){var b=a[0],c=a[1],e=a[2];a=a[3];var h=b+b,l=c+c,g=e+e,b=b*h,n=c*h,c=c*l,u=e*h,r=e*l,e=e*g,h=a*h,l=a*l;a*=g;return d[0]=1-c-e,d[1]=n+a,d[2]=u-l,d[3]=0,d[4]=n-a,d[5]=1-b-e,d[6]=r+h,d[7]=0,d[8]=u+l,d[9]=r-h,d[10]=1-b-c,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},h.frustum=function(d,a,b,c,e,h,l){var g=1/(b-a),k=1/(e-c),m=1/(h-l);return d[0]=2*h*g,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=2*h*k,d[6]=0,d[7]=0,d[8]=(b+a)*g,d[9]=(e+c)*k,d[10]=(l+h)*m,d[11]=-1,d[12]=0,d[13]=0,d[14]=l*h*2*m,d[15]=0,d},
h.perspective=function(d,a,b,c,e){a=1/Math.tan(a/2);var h=1/(c-e);return d[0]=a/b,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=a,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=(e+c)*h,d[11]=-1,d[12]=0,d[13]=0,d[14]=2*e*c*h,d[15]=0,d},h.perspectiveFromFieldOfView=function(d,a,b,c){var e=Math.tan(a.upDegrees*Math.PI/180),h=Math.tan(a.downDegrees*Math.PI/180),l=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var g=2/(l+a),n=2/(e+h);return d[0]=g,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=n,d[6]=0,d[7]=0,d[8]=
-((l-a)*g*.5),d[9]=(e-h)*n*.5,d[10]=c/(b-c),d[11]=-1,d[12]=0,d[13]=0,d[14]=c*b/(b-c),d[15]=0,d},h.ortho=function(d,a,b,c,e,h,l){var g=1/(a-b),k=1/(c-e),m=1/(h-l);return d[0]=-2*g,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*k,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*m,d[11]=0,d[12]=(a+b)*g,d[13]=(e+c)*k,d[14]=(l+h)*m,d[15]=1,d},h.lookAt=function(d,a,b,c){var m,k,l,g,n,u,r,t,w,q,v=a[0],x=a[1];a=a[2];var f=c[0],p=c[1];c=c[2];var z=b[0],y=b[1];b=b[2];return Math.abs(v-z)<e.EPSILON&&Math.abs(x-y)<e.EPSILON&&Math.abs(a-
b)<e.EPSILON?h.identity(d):(r=v-z,t=x-y,w=a-b,q=1/Math.sqrt(r*r+t*t+w*w),r*=q,t*=q,w*=q,m=p*w-c*t,k=c*r-f*w,l=f*t-p*r,q=Math.sqrt(m*m+k*k+l*l),q?(q=1/q,m*=q,k*=q,l*=q):(m=0,k=0,l=0),g=t*l-w*k,n=w*m-r*l,u=r*k-t*m,q=Math.sqrt(g*g+n*n+u*u),q?(q=1/q,g*=q,n*=q,u*=q):(g=0,n=0,u=0),d[0]=m,d[1]=g,d[2]=r,d[3]=0,d[4]=k,d[5]=n,d[6]=t,d[7]=0,d[8]=l,d[9]=u,d[10]=w,d[11]=0,d[12]=-(m*v+k*x+l*a),d[13]=-(g*v+n*x+u*a),d[14]=-(r*v+t*x+w*a),d[15]=1,d)},h.str=function(d){return"mat4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+
", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+", "+d[9]+", "+d[10]+", "+d[11]+", "+d[12]+", "+d[13]+", "+d[14]+", "+d[15]+")"},h.frob=function(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)+Math.pow(d[3],2)+Math.pow(d[4],2)+Math.pow(d[5],2)+Math.pow(d[6],2)+Math.pow(d[7],2)+Math.pow(d[8],2)+Math.pow(d[9],2)+Math.pow(d[10],2)+Math.pow(d[11],2)+Math.pow(d[12],2)+Math.pow(d[13],2)+Math.pow(d[14],2)+Math.pow(d[15],2))},h.add=function(d,a,b){return d[0]=a[0]+b[0],d[1]=a[1]+
b[1],d[2]=a[2]+b[2],d[3]=a[3]+b[3],d[4]=a[4]+b[4],d[5]=a[5]+b[5],d[6]=a[6]+b[6],d[7]=a[7]+b[7],d[8]=a[8]+b[8],d[9]=a[9]+b[9],d[10]=a[10]+b[10],d[11]=a[11]+b[11],d[12]=a[12]+b[12],d[13]=a[13]+b[13],d[14]=a[14]+b[14],d[15]=a[15]+b[15],d},h.subtract=function(d,a,b){return d[0]=a[0]-b[0],d[1]=a[1]-b[1],d[2]=a[2]-b[2],d[3]=a[3]-b[3],d[4]=a[4]-b[4],d[5]=a[5]-b[5],d[6]=a[6]-b[6],d[7]=a[7]-b[7],d[8]=a[8]-b[8],d[9]=a[9]-b[9],d[10]=a[10]-b[10],d[11]=a[11]-b[11],d[12]=a[12]-b[12],d[13]=a[13]-b[13],d[14]=a[14]-
b[14],d[15]=a[15]-b[15],d},h.sub=h.subtract,h.multiplyScalar=function(d,a,b){return d[0]=a[0]*b,d[1]=a[1]*b,d[2]=a[2]*b,d[3]=a[3]*b,d[4]=a[4]*b,d[5]=a[5]*b,d[6]=a[6]*b,d[7]=a[7]*b,d[8]=a[8]*b,d[9]=a[9]*b,d[10]=a[10]*b,d[11]=a[11]*b,d[12]=a[12]*b,d[13]=a[13]*b,d[14]=a[14]*b,d[15]=a[15]*b,d},h.multiplyScalarAndAdd=function(d,a,b,c){return d[0]=a[0]+b[0]*c,d[1]=a[1]+b[1]*c,d[2]=a[2]+b[2]*c,d[3]=a[3]+b[3]*c,d[4]=a[4]+b[4]*c,d[5]=a[5]+b[5]*c,d[6]=a[6]+b[6]*c,d[7]=a[7]+b[7]*c,d[8]=a[8]+b[8]*c,d[9]=a[9]+
b[9]*c,d[10]=a[10]+b[10]*c,d[11]=a[11]+b[11]*c,d[12]=a[12]+b[12]*c,d[13]=a[13]+b[13]*c,d[14]=a[14]+b[14]*c,d[15]=a[15]+b[15]*c,d},h.exactEquals=function(d,a){return d[0]===a[0]&&d[1]===a[1]&&d[2]===a[2]&&d[3]===a[3]&&d[4]===a[4]&&d[5]===a[5]&&d[6]===a[6]&&d[7]===a[7]&&d[8]===a[8]&&d[9]===a[9]&&d[10]===a[10]&&d[11]===a[11]&&d[12]===a[12]&&d[13]===a[13]&&d[14]===a[14]&&d[15]===a[15]},h.equals=function(d,a){var b=d[0],c=d[1],h=d[2],k=d[3],l=d[4],g=d[5],n=d[6],u=d[7],r=d[8],t=d[9],w=d[10],q=d[11],v=d[12],
x=d[13],f=d[14];d=d[15];var p=a[0],z=a[1],y=a[2],A=a[3],B=a[4],D=a[5],F=a[6],C=a[7],E=a[8],G=a[9],K=a[10],L=a[11],H=a[12],I=a[13],N=a[14];a=a[15];return Math.abs(b-p)<=e.EPSILON*Math.max(1,Math.abs(b),Math.abs(p))&&Math.abs(c-z)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(h-y)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(k-A)<=e.EPSILON*Math.max(1,Math.abs(k),Math.abs(A))&&Math.abs(l-B)<=e.EPSILON*Math.max(1,Math.abs(l),Math.abs(B))&&Math.abs(g-D)<=e.EPSILON*Math.max(1,Math.abs(g),
Math.abs(D))&&Math.abs(n-F)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(F))&&Math.abs(u-C)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(r-E)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(t-G)<=e.EPSILON*Math.max(1,Math.abs(t),Math.abs(G))&&Math.abs(w-K)<=e.EPSILON*Math.max(1,Math.abs(w),Math.abs(K))&&Math.abs(q-L)<=e.EPSILON*Math.max(1,Math.abs(q),Math.abs(L))&&Math.abs(v-H)<=e.EPSILON*Math.max(1,Math.abs(v),Math.abs(H))&&Math.abs(x-I)<=e.EPSILON*Math.max(1,Math.abs(x),Math.abs(I))&&
Math.abs(f-N)<=e.EPSILON*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(d-a)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(a))},h})},"esri/views/vectorTiles/RenderBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});e=function(){return function(a){this.type=a}}();h.RenderBucket=e;a=function(a){function b(){var b=a.call(this,2)||this;return b.triangleElementStart=0,b.triangleElementCount=
0,b.joinStart=0,b.joinCount=0,b}return d(b,a),b.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.joinCount},b}(e);h.LineRenderBucket=a;a=function(a){function b(){var b=a.call(this,1)||this;return b.triangleElementStart=0,b.triangleElementCount=0,b.outlineElementStart=0,b.outlineElementCount=0,b}return d(b,a),b.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.outlineElementCount},b}(e);h.FillRenderBucket=a;a=function(a){function b(){var b=a.call(this,3)||
this;return b.markerPerPageElementsMap=new Map,b.glyphPerPageElementsMap=new Map,b.isSDF=!1,b}return d(b,a),b.prototype.hasData=function(){return 0<this.markerPerPageElementsMap.size||0<this.glyphPerPageElementsMap.size},b}(e);h.SymbolRenderBucket=a;e=function(a){function b(){return a.call(this,0)||this}return d(b,a),b.prototype.hasData=function(){return!0},b}(e);h.BackgroundRenderBucket=e})},"esri/views/vectorTiles/renderers/Renderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../GeometryUtils ./BackgroundRenderer ./LineRenderer ./FillRenderer ./SymbolRenderer ./TileInfoRenderer ./FadeRecorder".split(" "),
function(e,h,d,a,b,c,m,k,l,g){return function(){function e(){this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this._pixelRatio=1}return e.prototype.initialize=function(a,d,e){void 0===e&&(e=!0);this._SpriteMosaic=a;this._glyphMosaic=d;this._ignoreSpeed=!e;this._backgroundRenderer=new b;this._lineRenderer=new c;this._fillRenderer=new m;this._symbolRenderer=
new k;this._tileInfoRenderer=new l;this._fadeRecorder=new g.FadeRecorder(300);this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._backgroundColor=new Float32Array([1,0,0,1])},e.prototype.dispose=function(){this._backgroundRenderer&&(this._backgroundRenderer.dispose(),this._backgroundRenderer=null);this._lineRenderer&&(this._lineRenderer.dispose(),this._lineRenderer=null);this._fillRenderer&&(this._fillRenderer.dispose(),this._fillRenderer=null);this._symbolRenderer&&
(this._symbolRenderer.dispose(),this._symbolRenderer=null);this._tileInfoRenderer&&(this._tileInfoRenderer.dispose(),this._tileInfoRenderer=null)},e.prototype.setStateParams=function(b,c,e){this._pixelRatio=c;this._fadeRecorder.recordLevel(e);this._state=b;(this._state.width!==this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)&&(this._extrudeScaleVector[0]=2/b.width,this._extrudeScaleVector[1]=-2/b.height,d.identity(this._extrudeMatrix),d.rotate(this._extrudeMatrix,
this._extrudeMatrix,-b.rotation*a.C_DEG_TO_RAD,this._extrudeRotateVector),d.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),d.transpose(this._extrudeMatrix,this._extrudeMatrix),d.identity(this._extrudeNoRotationMatrix),d.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),d.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=
this._state.rotation)},e.prototype.drawClippingMasks=function(a,b){if(0!==b.length){a.setDepthWriteEnabled(!1);a.setDepthTestEnabled(!1);a.setStencilTestEnabled(!0);a.setBlendingEnabled(!1);a.setColorMask(!1,!1,!1,!1);a.setStencilOp(7680,7680,7681);a.setStencilWriteMask(255);a.setClearStencil(0);a.clear(a.gl.STENCIL_BUFFER_BIT);for(var c=0;c<b.length;c++){var d=b[c];d.attached&&d.visible&&(a.setStencilFunctionSeparate(1032,519,d.stencilData.reference,d.stencilData.mask),this._backgroundRenderer.renderSolidColor(a,
{u_matrix:d.tileTransform.transform,u_normalized_origin:d.tileTransform.displayCoord,u_coord_range:d.coordRange,u_depth:0,u_color:this._backgroundColor}))}a.setColorMask(!0,!0,!0,!0);a.setBlendingEnabled(!0)}},e.prototype.renderDebug=function(a,b){var c=b.key;this._backgroundColor.set([c.col%2,c.row%2,0===c.col%2&&0===c.row%2?1:0,.5]);this._backgroundRenderer.renderSolidColor(a,{u_matrix:b.tileTransform.transform,u_normalized_origin:b.tileTransform.displayCoord,u_coord_range:b.coordRange,u_depth:0,
u_color:this._backgroundColor})},e.prototype.renderBucket=function(a,b,c,d,e,g,h,f){switch(b.type){case 0:2!==e&&this._renderBackground(a,c,e,g,h,f);break;case 1:2!==e&&this._renderFill(a,b,c,e,g,h,f);break;case 2:1===e&&this._renderLine(a,b,c,g,h,f);break;case 3:2===e&&this._renderSymbol(a,b,c,d,g,h,f)}},e.prototype.renderTileInfo=function(a,b){this._tileInfoRenderer.render(a,b)},e.prototype.needsRedraw=function(){return this._fadeRecorder.needsRedraw()},e.prototype._renderBackground=function(a,
b,c,d,e,g){this._backgroundRenderer.render(a,b,c,d,e,this._SpriteMosaic,this._SpriteMosaic.pixelRatio,g)},e.prototype._renderLine=function(a,b,c,d,e,g){this._lineRenderer.render(a,b,c,this._state,d,e,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,g)},e.prototype._renderFill=function(a,b,c,d,e,g,h){this._fillRenderer.render(a,b,c,this._state.rotation,d,e,g,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,h)},e.prototype._renderSymbol=function(a,b,c,d,e,g,h){var f=
!0;d===e.key.level&&(f=!1);a.setStencilTestEnabled(f);this._symbolRenderer.render(a,b,c,this._state.rotation,this._fadeRecorder.getFadeValues(this._ignoreSpeed),e,g,this._SpriteMosaic,this._glyphMosaic,this._extrudeMatrix,this._extrudeNoRotationMatrix,this._SpriteMosaic.pixelRatio,h)},e}()})},"esri/views/vectorTiles/renderers/BackgroundRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject ./vtShaderSnippets".split(" "),
function(e,h,d,a,b,c,m,k){return function(){function e(){this._patternMatrix=d.create();this._color=a.create();this._initialized=!1}return e.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._patternProgram&&(this._patternProgram.dispose(),this._patternProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null);this._patternVertexArrayObject&&(this._patternVertexArrayObject.dispose(),
this._patternVertexArrayObject=null)},e.prototype.renderSolidColor=function(a,b){this._initialized||this._initialize(a);a.bindVAO(this._solidVertexArrayObject);a.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",b.u_matrix);this._solidProgram.setUniform2fv("u_normalized_origin",b.u_normalized_origin);this._solidProgram.setUniform1f("u_coord_range",b.u_coord_range||4096);this._solidProgram.setUniform1f("u_depth",b.u_depth||0);this._solidProgram.setUniform4fv("u_color",
b.u_color||new Float32Array([1,0,0,1]));a.drawArrays(5,0,4);a.bindVAO()},e.prototype.render=function(a,b,c,e,h,k,l,m){this._initialized||this._initialize(a);var g=h.getPaintValue("background-color",b);m*=h.getPaintValue("background-opacity",b);var f=h.getPaintValue("background-pattern",b),p=void 0!==f,n=g[3]*m,r=p||1>n;if(!(r&&0===c||!r&&1===c)){if(p){a.bindVAO(this._patternVertexArrayObject);a.bindProgram(this._patternProgram);c=k.getMosaicItemPosition(f,!0);if(!c)return;b=e.coordRange/512/Math.pow(2,
Math.floor(b)-e.key.level)/l;d.identity(this._patternMatrix);l=1/(c.size[1]*b);this._patternMatrix[0]=1/(c.size[0]*b);this._patternMatrix[4]=l;k.bind(a,9729,0);this._patternProgram.setUniformMatrix4fv("u_transformMatrix",e.tileTransform.transform);this._patternProgram.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord);this._patternProgram.setUniform1f("u_depth",h.z);this._patternProgram.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix);this._patternProgram.setUniform1f("u_opacity",
m);this._patternProgram.setUniform2f("u_pattern_tl",c.tl[0],c.tl[1]);this._patternProgram.setUniform2f("u_pattern_br",c.br[0],c.br[1]);this._patternProgram.setUniform1i("u_texture",0)}else this._color[0]=n*g[0],this._color[1]=n*g[1],this._color[2]=n*g[2],this._color[3]=n,a.bindVAO(this._solidVertexArrayObject),a.bindProgram(this._solidProgram),this._solidProgram.setUniformMatrix4fv("u_transformMatrix",e.tileTransform.transform),this._solidProgram.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord),
this._solidProgram.setUniform1f("u_coord_range",e.coordRange),this._solidProgram.setUniform1f("u_depth",h.z||0),this._solidProgram.setUniform4fv("u_color",this._color);a.drawArrays(5,0,4);a.bindVAO()}},e.prototype._initialize=function(a){if(this._initialized)return!0;var d={a_pos:0},e=new b(a,k.backgroundVS,k.backgroundFS,d);if(!e)return!1;var g=new b(a,k.patternFillShaderVS,k.patternFillShaderFS,d);if(!g)return!1;var h={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},
l=new Int8Array([0,0,1,0,0,1,1,1]),q=m.createVertex(a,35044,l),q=new c(a,d,h,{geometry:q}),l=new Int16Array([0,0,4096,0,0,4096,4096,4096]),l=m.createVertex(a,35044,l);a=new c(a,d,{geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:l});return this._solidProgram=e,this._patternProgram=g,this._vertexAttributes=h,this._solidVertexArrayObject=q,this._patternVertexArrayObject=a,this._initialized=!0,!0},e}()})},"esri/core/libs/gl-matrix/mat3":function(){define(["./common"],
function(e){var h={};return h.create=function(){var d=new e.ARRAY_TYPE(9);return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=1,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},h.fromMat4=function(d,a){return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[4],d[4]=a[5],d[5]=a[6],d[6]=a[8],d[7]=a[9],d[8]=a[10],d},h.clone=function(d){var a=new e.ARRAY_TYPE(9);return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[8]=d[8],a},h.copy=function(d,a){return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=a[4],d[5]=
a[5],d[6]=a[6],d[7]=a[7],d[8]=a[8],d},h.fromValues=function(d,a,b,c,h,k,l,g,n){var m=new e.ARRAY_TYPE(9);return m[0]=d,m[1]=a,m[2]=b,m[3]=c,m[4]=h,m[5]=k,m[6]=l,m[7]=g,m[8]=n,m},h.set=function(d,a,b,c,e,h,l,g,n,u){return d[0]=a,d[1]=b,d[2]=c,d[3]=e,d[4]=h,d[5]=l,d[6]=g,d[7]=n,d[8]=u,d},h.identity=function(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=1,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},h.transpose=function(d,a){if(d===a){var b=a[1],c=a[2],e=a[5];d[1]=a[3];d[2]=a[6];d[3]=b;d[5]=a[7];d[6]=c;d[7]=e}else d[0]=
a[0],d[1]=a[3],d[2]=a[6],d[3]=a[1],d[4]=a[4],d[5]=a[7],d[6]=a[2],d[7]=a[5],d[8]=a[8];return d},h.invert=function(d,a){var b=a[0],c=a[1],e=a[2],h=a[3],l=a[4],g=a[5],n=a[6],u=a[7];a=a[8];var r=a*l-g*u,t=-a*h+g*n,w=u*h-l*n,q=b*r+c*t+e*w;return q?(q=1/q,d[0]=r*q,d[1]=(-a*c+e*u)*q,d[2]=(g*c-e*l)*q,d[3]=t*q,d[4]=(a*b-e*n)*q,d[5]=(-g*b+e*h)*q,d[6]=w*q,d[7]=(-u*b+c*n)*q,d[8]=(l*b-c*h)*q,d):null},h.adjoint=function(d,a){var b=a[0],c=a[1],e=a[2],h=a[3],l=a[4],g=a[5],n=a[6],u=a[7];a=a[8];return d[0]=l*a-g*u,
d[1]=e*u-c*a,d[2]=c*g-e*l,d[3]=g*n-h*a,d[4]=b*a-e*n,d[5]=e*h-b*g,d[6]=h*u-l*n,d[7]=c*n-b*u,d[8]=b*l-c*h,d},h.determinant=function(d){var a=d[3],b=d[4],c=d[5],e=d[6],h=d[7],l=d[8];return d[0]*(l*b-c*h)+d[1]*(-l*a+c*e)+d[2]*(h*a-b*e)},h.multiply=function(d,a,b){var c=a[0],e=a[1],h=a[2],l=a[3],g=a[4],n=a[5],u=a[6],r=a[7];a=a[8];var t=b[0],w=b[1],q=b[2],v=b[3],x=b[4],f=b[5],p=b[6],z=b[7];b=b[8];return d[0]=t*c+w*l+q*u,d[1]=t*e+w*g+q*r,d[2]=t*h+w*n+q*a,d[3]=v*c+x*l+f*u,d[4]=v*e+x*g+f*r,d[5]=v*h+x*n+f*
a,d[6]=p*c+z*l+b*u,d[7]=p*e+z*g+b*r,d[8]=p*h+z*n+b*a,d},h.mul=h.multiply,h.translate=function(d,a,b){var c=a[0],e=a[1],h=a[2],l=a[3],g=a[4],n=a[5],u=a[6],r=a[7];a=a[8];var t=b[0];b=b[1];return d[0]=c,d[1]=e,d[2]=h,d[3]=l,d[4]=g,d[5]=n,d[6]=t*c+b*l+u,d[7]=t*e+b*g+r,d[8]=t*h+b*n+a,d},h.rotate=function(d,a,b){var c=a[0],e=a[1],h=a[2],l=a[3],g=a[4],n=a[5],u=a[6],r=a[7];a=a[8];var t=Math.sin(b);b=Math.cos(b);return d[0]=b*c+t*l,d[1]=b*e+t*g,d[2]=b*h+t*n,d[3]=b*l-t*c,d[4]=b*g-t*e,d[5]=b*n-t*h,d[6]=u,d[7]=
r,d[8]=a,d},h.scale=function(d,a,b){var c=b[0];b=b[1];return d[0]=c*a[0],d[1]=c*a[1],d[2]=c*a[2],d[3]=b*a[3],d[4]=b*a[4],d[5]=b*a[5],d[6]=a[6],d[7]=a[7],d[8]=a[8],d},h.fromTranslation=function(d,a){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=1,d[5]=0,d[6]=a[0],d[7]=a[1],d[8]=1,d},h.fromRotation=function(d,a){var b=Math.sin(a);a=Math.cos(a);return d[0]=a,d[1]=b,d[2]=0,d[3]=-b,d[4]=a,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},h.fromScaling=function(d,a){return d[0]=a[0],d[1]=0,d[2]=0,d[3]=0,d[4]=a[1],d[5]=0,d[6]=0,
d[7]=0,d[8]=1,d},h.fromMat2d=function(d,a){return d[0]=a[0],d[1]=a[1],d[2]=0,d[3]=a[2],d[4]=a[3],d[5]=0,d[6]=a[4],d[7]=a[5],d[8]=1,d},h.fromQuat=function(d,a){var b=a[0],c=a[1],e=a[2];a=a[3];var h=b+b,l=c+c,g=e+e,b=b*h,n=c*h,c=c*l,u=e*h,r=e*l,e=e*g,h=a*h,l=a*l;a*=g;return d[0]=1-c-e,d[3]=n-a,d[6]=u+l,d[1]=n+a,d[4]=1-b-e,d[7]=r-h,d[2]=u-l,d[5]=r+h,d[8]=1-b-c,d},h.normalFromMat4=function(d,a){var b=a[0],c=a[1],e=a[2],h=a[3],l=a[4],g=a[5],n=a[6],u=a[7],r=a[8],t=a[9],w=a[10],q=a[11],v=a[12],x=a[13],f=
a[14];a=a[15];var p=b*g-c*l,z=b*n-e*l,y=b*u-h*l,A=c*n-e*g,B=c*u-h*g,D=e*u-h*n,F=r*x-t*v,C=r*f-w*v,r=r*a-q*v,E=t*f-w*x,t=t*a-q*x,w=w*a-q*f;return(q=p*w-z*t+y*E+A*r-B*C+D*F)?(q=1/q,d[0]=(g*w-n*t+u*E)*q,d[1]=(n*r-l*w-u*C)*q,d[2]=(l*t-g*r+u*F)*q,d[3]=(e*t-c*w-h*E)*q,d[4]=(b*w-e*r+h*C)*q,d[5]=(c*r-b*t-h*F)*q,d[6]=(x*D-f*B+a*A)*q,d[7]=(f*y-v*D-a*z)*q,d[8]=(v*B-x*y+a*p)*q,d):null},h.str=function(d){return"mat3("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+")"},h.frob=
function(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)+Math.pow(d[3],2)+Math.pow(d[4],2)+Math.pow(d[5],2)+Math.pow(d[6],2)+Math.pow(d[7],2)+Math.pow(d[8],2))},h.add=function(d,a,b){return d[0]=a[0]+b[0],d[1]=a[1]+b[1],d[2]=a[2]+b[2],d[3]=a[3]+b[3],d[4]=a[4]+b[4],d[5]=a[5]+b[5],d[6]=a[6]+b[6],d[7]=a[7]+b[7],d[8]=a[8]+b[8],d},h.subtract=function(d,a,b){return d[0]=a[0]-b[0],d[1]=a[1]-b[1],d[2]=a[2]-b[2],d[3]=a[3]-b[3],d[4]=a[4]-b[4],d[5]=a[5]-b[5],d[6]=a[6]-b[6],d[7]=a[7]-b[7],
d[8]=a[8]-b[8],d},h.sub=h.subtract,h.multiplyScalar=function(d,a,b){return d[0]=a[0]*b,d[1]=a[1]*b,d[2]=a[2]*b,d[3]=a[3]*b,d[4]=a[4]*b,d[5]=a[5]*b,d[6]=a[6]*b,d[7]=a[7]*b,d[8]=a[8]*b,d},h.multiplyScalarAndAdd=function(d,a,b,c){return d[0]=a[0]+b[0]*c,d[1]=a[1]+b[1]*c,d[2]=a[2]+b[2]*c,d[3]=a[3]+b[3]*c,d[4]=a[4]+b[4]*c,d[5]=a[5]+b[5]*c,d[6]=a[6]+b[6]*c,d[7]=a[7]+b[7]*c,d[8]=a[8]+b[8]*c,d},h.exactEquals=function(d,a){return d[0]===a[0]&&d[1]===a[1]&&d[2]===a[2]&&d[3]===a[3]&&d[4]===a[4]&&d[5]===a[5]&&
d[6]===a[6]&&d[7]===a[7]&&d[8]===a[8]},h.equals=function(d,a){var b=d[0],c=d[1],h=d[2],k=d[3],l=d[4],g=d[5],n=d[6],u=d[7],r=d[8],t=a[0],w=a[1],q=a[2],v=a[3],x=a[4],f=a[5];d=d[6];var p=a[7];a=a[8];return Math.abs(b-t)<=e.EPSILON*Math.max(1,Math.abs(b),Math.abs(t))&&Math.abs(c-w)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(h-q)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(q))&&Math.abs(k-v)<=e.EPSILON*Math.max(1,Math.abs(k),Math.abs(v))&&Math.abs(l-x)<=e.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&
Math.abs(g-f)<=e.EPSILON*Math.max(1,Math.abs(g),Math.abs(f))&&Math.abs(n-d)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(u-p)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(r-a)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))},h})},"esri/core/libs/gl-matrix/vec4":function(){define(["./common"],function(e){var h={};return h.create=function(){var d=new e.ARRAY_TYPE(4);return d[0]=0,d[1]=0,d[2]=0,d[3]=0,d},h.clone=function(d){var a=new e.ARRAY_TYPE(4);return a[0]=d[0],a[1]=d[1],
a[2]=d[2],a[3]=d[3],a},h.fromValues=function(d,a,b,c){var h=new e.ARRAY_TYPE(4);return h[0]=d,h[1]=a,h[2]=b,h[3]=c,h},h.copy=function(d,a){return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d},h.set=function(d,a,b,c,e){return d[0]=a,d[1]=b,d[2]=c,d[3]=e,d},h.add=function(d,a,b){return d[0]=a[0]+b[0],d[1]=a[1]+b[1],d[2]=a[2]+b[2],d[3]=a[3]+b[3],d},h.subtract=function(d,a,b){return d[0]=a[0]-b[0],d[1]=a[1]-b[1],d[2]=a[2]-b[2],d[3]=a[3]-b[3],d},h.sub=h.subtract,h.multiply=function(d,a,b){return d[0]=a[0]*
b[0],d[1]=a[1]*b[1],d[2]=a[2]*b[2],d[3]=a[3]*b[3],d},h.mul=h.multiply,h.divide=function(d,a,b){return d[0]=a[0]/b[0],d[1]=a[1]/b[1],d[2]=a[2]/b[2],d[3]=a[3]/b[3],d},h.div=h.divide,h.ceil=function(d,a){return d[0]=Math.ceil(a[0]),d[1]=Math.ceil(a[1]),d[2]=Math.ceil(a[2]),d[3]=Math.ceil(a[3]),d},h.floor=function(d,a){return d[0]=Math.floor(a[0]),d[1]=Math.floor(a[1]),d[2]=Math.floor(a[2]),d[3]=Math.floor(a[3]),d},h.min=function(d,a,b){return d[0]=Math.min(a[0],b[0]),d[1]=Math.min(a[1],b[1]),d[2]=Math.min(a[2],
b[2]),d[3]=Math.min(a[3],b[3]),d},h.max=function(d,a,b){return d[0]=Math.max(a[0],b[0]),d[1]=Math.max(a[1],b[1]),d[2]=Math.max(a[2],b[2]),d[3]=Math.max(a[3],b[3]),d},h.round=function(d,a){return d[0]=Math.round(a[0]),d[1]=Math.round(a[1]),d[2]=Math.round(a[2]),d[3]=Math.round(a[3]),d},h.scale=function(d,a,b){return d[0]=a[0]*b,d[1]=a[1]*b,d[2]=a[2]*b,d[3]=a[3]*b,d},h.scaleAndAdd=function(d,a,b,c){return d[0]=a[0]+b[0]*c,d[1]=a[1]+b[1]*c,d[2]=a[2]+b[2]*c,d[3]=a[3]+b[3]*c,d},h.distance=function(d,a){var b=
a[0]-d[0],c=a[1]-d[1],e=a[2]-d[2];d=a[3]-d[3];return Math.sqrt(b*b+c*c+e*e+d*d)},h.dist=h.distance,h.squaredDistance=function(d,a){var b=a[0]-d[0],c=a[1]-d[1],e=a[2]-d[2];d=a[3]-d[3];return b*b+c*c+e*e+d*d},h.sqrDist=h.squaredDistance,h.length=function(d){var a=d[0],b=d[1],c=d[2];d=d[3];return Math.sqrt(a*a+b*b+c*c+d*d)},h.len=h.length,h.squaredLength=function(d){var a=d[0],b=d[1],c=d[2];d=d[3];return a*a+b*b+c*c+d*d},h.sqrLen=h.squaredLength,h.negate=function(d,a){return d[0]=-a[0],d[1]=-a[1],d[2]=
-a[2],d[3]=-a[3],d},h.inverse=function(d,a){return d[0]=1/a[0],d[1]=1/a[1],d[2]=1/a[2],d[3]=1/a[3],d},h.normalize=function(d,a){var b=a[0],c=a[1],e=a[2];a=a[3];var h=b*b+c*c+e*e+a*a;return 0<h&&(h=1/Math.sqrt(h),d[0]=b*h,d[1]=c*h,d[2]=e*h,d[3]=a*h),d},h.dot=function(d,a){return d[0]*a[0]+d[1]*a[1]+d[2]*a[2]+d[3]*a[3]},h.lerp=function(d,a,b,c){var e=a[0],h=a[1],l=a[2];a=a[3];return d[0]=e+c*(b[0]-e),d[1]=h+c*(b[1]-h),d[2]=l+c*(b[2]-l),d[3]=a+c*(b[3]-a),d},h.random=function(d,a){return a=a||1,d[0]=
e.RANDOM(),d[1]=e.RANDOM(),d[2]=e.RANDOM(),d[3]=e.RANDOM(),h.normalize(d,d),h.scale(d,d,a),d},h.transformMat4=function(d,a,b){var c=a[0],e=a[1],h=a[2];a=a[3];return d[0]=b[0]*c+b[4]*e+b[8]*h+b[12]*a,d[1]=b[1]*c+b[5]*e+b[9]*h+b[13]*a,d[2]=b[2]*c+b[6]*e+b[10]*h+b[14]*a,d[3]=b[3]*c+b[7]*e+b[11]*h+b[15]*a,d},h.transformQuat=function(d,a,b){var c=a[0],e=a[1],h=a[2],l=b[0],g=b[1],n=b[2];b=b[3];var u=b*c+g*h-n*e,r=b*e+n*c-l*h,t=b*h+l*e-g*c,c=-l*c-g*e-n*h;return d[0]=u*b+c*-l+r*-n-t*-g,d[1]=r*b+c*-g+t*-l-
u*-n,d[2]=t*b+c*-n+u*-g-r*-l,d[3]=a[3],d},h.forEach=function(){var d=h.create();return function(a,b,c,e,h,l){b||(b=4);c||(c=0);for(e=e?Math.min(e*b+c,a.length):a.length;e>c;c+=b)d[0]=a[c],d[1]=a[c+1],d[2]=a[c+2],d[3]=a[c+3],h(d,d,l),a[c]=d[0],a[c+1]=d[1],a[c+2]=d[2],a[c+3]=d[3];return a}}(),h.str=function(d){return"vec4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")"},h.exactEquals=function(d,a){return d[0]===a[0]&&d[1]===a[1]&&d[2]===a[2]&&d[3]===a[3]},h.equals=function(d,a){var b=d[0],c=d[1],h=d[2];d=
d[3];var k=a[0],l=a[1],g=a[2];a=a[3];return Math.abs(b-k)<=e.EPSILON*Math.max(1,Math.abs(b),Math.abs(k))&&Math.abs(c-l)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(l))&&Math.abs(h-g)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(d-a)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(a))},h})},"esri/views/vectorTiles/renderers/vtShaderSnippets":function(){define("require exports ../../webgl/ShaderSnippets dojo/text!./Shaders.xml dojo/text!./shaders/background.vs.glsl dojo/text!./shaders/background.fs.glsl dojo/text!./shaders/lineShader.vs.glsl dojo/text!./shaders/lineShader.fs.glsl dojo/text!./shaders/patternLineShader.vs.glsl dojo/text!./shaders/patternLineShader.fs.glsl dojo/text!./shaders/lineJoinShader.vs.glsl dojo/text!./shaders/lineJoinShader.fs.glsl dojo/text!./shaders/lineJoinQuadShader.vs.glsl dojo/text!./shaders/lineJoinQuadShader.fs.glsl dojo/text!./shaders/solidFillShader.vs.glsl dojo/text!./shaders/solidFillShader.fs.glsl dojo/text!./shaders/patternFillShader.vs.glsl dojo/text!./shaders/patternFillShader.fs.glsl dojo/text!./shaders/fillOutlineShader.vs.glsl dojo/text!./shaders/fillOutlineShader.fs.glsl dojo/text!./shaders/iconShader.vs.glsl dojo/text!./shaders/iconShader.fs.glsl dojo/text!./shaders/sdfShader.vs.glsl dojo/text!./shaders/sdfShader.fs.glsl dojo/text!./shaders/tileInfo.vs.glsl dojo/text!./shaders/tileInfo.fs.glsl".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y,A,B,D,F){function C(a,b){E+='\x3csnippet name\x3d"'+a+'"\x3e\x3c![CDATA[';E+=b;E+="]]\x3e\x3c/snippet\x3e"}var E="",E=E+'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e',E=E+"\x3csnippets\x3e";C("backgroundVS",b);C("backgroundFS",c);C("lineShaderVS",m);C("lineShaderFS",k);C("patternLineShaderVS",l);C("patternLineShaderFS",g);C("lineJoinShaderVS",n);C("lineJoinShaderFS",u);C("lineJoinQuadShaderVS",r);C("lineJoinQuadShaderFS",t);C("solidFillShaderVS",
w);C("solidFillShaderFS",q);C("patternFillShaderVS",v);C("patternFillShaderFS",x);C("fillOutlineShaderVS",f);C("fillOutlineShaderFS",p);C("iconShaderVS",z);C("iconShaderFS",y);C("sdfShaderVS",A);C("sdfShaderFS",B);C("tileInfoVS",D);C("tileInfoFS",F);E+="\x3c/snippets\x3e";e=new d;return d.parse(E,e),d.parse(a,e),e})},"esri/views/vectorTiles/renderers/LineRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec2 ../../webgl/Program ../../webgl/VertexArrayObject ../GeometryUtils ./vtShaderSnippets".split(" "),
function(e,h,d,a,b,c,m,k,l,g){return function(){function e(){this._triangleAttributeLocations={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2};this._initialized=!1;this._viewProjMat=d.create();this._offsetVector=b.create();this._screenSize=c.create();this._color=a.create();this._dashArray=c.create()}return e.prototype.dispose=function(){this._triangleslProgram&&(this._triangleslProgram.dispose(),this._triangleslProgram=null);this._patternLineProgram&&(this._patternLineProgram.dispose(),this._patternLineProgram=
null)},e.prototype.render=function(a,b,c,e,g,h,k,f,m,n){if(0!==b.triangleElementCount){this._initialized||this._initialize(a);var p=g.tileTransform.transform,r=g.coordRange/512,t=h.getPaintValue("line-translate",c);if(0!==t[0]||0!==t[1]){d.copy(this._viewProjMat,g.tileTransform.transform);var p=t[0],t=t[1],u=0,q=0,q=(1<<g.key.level)/Math.pow(2,c)*r,u=e.rotation;if(1===h.getPaintValue("line-translate-anchor",c)){e=Math.sin(l.C_DEG_TO_RAD*-u);var z=Math.cos(l.C_DEG_TO_RAD*-u),u=q*(p*z-t*e),q=q*(p*e+
t*z)}else u=q*p,q*=t;this._offsetVector[0]=u;this._offsetVector[1]=q;this._offsetVector[2]=0;d.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);p=this._viewProjMat}e=h.getPaintValue("line-pattern",c);u=void 0!==e;t=1/m;m=h.getPaintValue("line-blur",c)+t;q=h.getPaintValue("line-width",c);t=.5*(q+t);n*=h.getPaintValue("line-opacity",c);var z=h.getPaintValue("line-color",c),w=z[3]*n;this._color[0]=w*z[0];this._color[1]=w*z[1];this._color[2]=w*z[2];this._color[3]=w;if(z=this._getTrianglesVAO(a,
g))(a.bindVAO(z),u)?(c=k.getMosaicItemPosition(e,!0))&&(k.bind(a,9729,c.page,1),a.bindProgram(this._patternLineProgram),this._patternLineProgram.setUniformMatrix4fv("u_transformMatrix",p),this._patternLineProgram.setUniformMatrix4fv("u_extrudeMatrix",f),this._patternLineProgram.setUniform2fv("u_normalized_origin",g.tileTransform.displayCoord),this._patternLineProgram.setUniform1f("u_depth",h.z),this._patternLineProgram.setUniform1f("u_lineHalfWidth",t),this._patternLineProgram.setUniform1f("u_blur",
m),this._patternLineProgram.setUniform1f("u_opacity",n),this._patternLineProgram.setUniform2f("u_pattern_tl",c.tl[0],c.tl[1]),this._patternLineProgram.setUniform2f("u_pattern_br",c.br[0],c.br[1]),this._patternLineProgram.setUniform2f("u_spriteSize",r*c.size[0],c.size[1]),this._patternLineProgram.setUniform1i("u_texture",1)):(k=h.getPaintValue("line-dasharray",c),2>k.length&&(k=[1,-1]),r*=q,this._dashArray[0]=r*k[0],this._dashArray[1]=r*k[1],a.bindProgram(this._triangleslProgram),this._triangleslProgram.setUniformMatrix4fv("u_transformMatrix",
p),this._triangleslProgram.setUniformMatrix4fv("u_extrudeMatrix",f),this._triangleslProgram.setUniform2fv("u_normalized_origin",g.tileTransform.displayCoord),this._triangleslProgram.setUniform1f("u_depth",h.z),this._triangleslProgram.setUniform4fv("u_color",this._color),this._triangleslProgram.setUniform1f("u_lineHalfWidth",t),this._triangleslProgram.setUniform2fv("u_dasharray",this._dashArray),this._triangleslProgram.setUniform1f("u_blur",m)),a.drawElements(4,b.triangleElementCount,5125,12*b.triangleElementStart),
a.bindVAO()}},e.prototype._initialize=function(a){if(this._initialized)return!0;var b=new m(a,g.lineShaderVS,g.lineShaderFS,this._triangleAttributeLocations);a=new m(a,g.patternLineShaderVS,g.patternLineShaderFS,this._triangleAttributeLocations);return this._triangleslProgram=b,this._patternLineProgram=a,this._trianglesVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:12,normalized:!1,
divisor:0},{name:"a_accumulatedDistance",count:1,type:5122,offset:8,stride:12,normalized:!1,divisor:0}]},this._initialized=!0,!0},e.prototype._getTrianglesVAO=function(a,b){if(b.lineTrianglesVertexArrayObject)return b.lineTrianglesVertexArrayObject;var c=b.lineVertexBuffer,d=b.lineTrianglesIndexBuffer;return c&&d?(b.lineTrianglesVertexArrayObject=new k(a,this._triangleAttributeLocations,this._trianglesVertexAttributes,{geometry:c},d),b.lineTrianglesVertexArrayObject):null},e}()})},"esri/core/libs/gl-matrix/vec3":function(){define(["./common"],
function(e){var h={};return h.create=function(){var d=new e.ARRAY_TYPE(3);return d[0]=0,d[1]=0,d[2]=0,d},h.clone=function(d){var a=new e.ARRAY_TYPE(3);return a[0]=d[0],a[1]=d[1],a[2]=d[2],a},h.fromValues=function(d,a,b){var c=new e.ARRAY_TYPE(3);return c[0]=d,c[1]=a,c[2]=b,c},h.copy=function(d,a){return d[0]=a[0],d[1]=a[1],d[2]=a[2],d},h.set=function(d,a,b,c){return d[0]=a,d[1]=b,d[2]=c,d},h.add=function(d,a,b){return d[0]=a[0]+b[0],d[1]=a[1]+b[1],d[2]=a[2]+b[2],d},h.subtract=function(d,a,b){return d[0]=
a[0]-b[0],d[1]=a[1]-b[1],d[2]=a[2]-b[2],d},h.sub=h.subtract,h.multiply=function(d,a,b){return d[0]=a[0]*b[0],d[1]=a[1]*b[1],d[2]=a[2]*b[2],d},h.mul=h.multiply,h.divide=function(d,a,b){return d[0]=a[0]/b[0],d[1]=a[1]/b[1],d[2]=a[2]/b[2],d},h.div=h.divide,h.ceil=function(d,a){return d[0]=Math.ceil(a[0]),d[1]=Math.ceil(a[1]),d[2]=Math.ceil(a[2]),d},h.floor=function(d,a){return d[0]=Math.floor(a[0]),d[1]=Math.floor(a[1]),d[2]=Math.floor(a[2]),d},h.min=function(d,a,b){return d[0]=Math.min(a[0],b[0]),d[1]=
Math.min(a[1],b[1]),d[2]=Math.min(a[2],b[2]),d},h.max=function(d,a,b){return d[0]=Math.max(a[0],b[0]),d[1]=Math.max(a[1],b[1]),d[2]=Math.max(a[2],b[2]),d},h.round=function(d,a){return d[0]=Math.round(a[0]),d[1]=Math.round(a[1]),d[2]=Math.round(a[2]),d},h.scale=function(d,a,b){return d[0]=a[0]*b,d[1]=a[1]*b,d[2]=a[2]*b,d},h.scaleAndAdd=function(d,a,b,c){return d[0]=a[0]+b[0]*c,d[1]=a[1]+b[1]*c,d[2]=a[2]+b[2]*c,d},h.distance=function(d,a){var b=a[0]-d[0],c=a[1]-d[1];d=a[2]-d[2];return Math.sqrt(b*b+
c*c+d*d)},h.dist=h.distance,h.squaredDistance=function(d,a){var b=a[0]-d[0],c=a[1]-d[1];d=a[2]-d[2];return b*b+c*c+d*d},h.sqrDist=h.squaredDistance,h.length=function(d){var a=d[0],b=d[1];d=d[2];return Math.sqrt(a*a+b*b+d*d)},h.len=h.length,h.squaredLength=function(d){var a=d[0],b=d[1];d=d[2];return a*a+b*b+d*d},h.sqrLen=h.squaredLength,h.negate=function(d,a){return d[0]=-a[0],d[1]=-a[1],d[2]=-a[2],d},h.inverse=function(d,a){return d[0]=1/a[0],d[1]=1/a[1],d[2]=1/a[2],d},h.normalize=function(d,a){var b=
a[0],c=a[1],e=a[2],b=b*b+c*c+e*e;return 0<b&&(b=1/Math.sqrt(b),d[0]=a[0]*b,d[1]=a[1]*b,d[2]=a[2]*b),d},h.dot=function(d,a){return d[0]*a[0]+d[1]*a[1]+d[2]*a[2]},h.cross=function(d,a,b){var c=a[0],e=a[1];a=a[2];var h=b[0],l=b[1];b=b[2];return d[0]=e*b-a*l,d[1]=a*h-c*b,d[2]=c*l-e*h,d},h.lerp=function(d,a,b,c){var e=a[0],h=a[1];a=a[2];return d[0]=e+c*(b[0]-e),d[1]=h+c*(b[1]-h),d[2]=a+c*(b[2]-a),d},h.hermite=function(d,a,b,c,e,h){var k=h*h,g=k*(2*h-3)+1,m=k*(h-2)+h,u=k*(h-1);h=k*(3-2*h);return d[0]=a[0]*
g+b[0]*m+c[0]*u+e[0]*h,d[1]=a[1]*g+b[1]*m+c[1]*u+e[1]*h,d[2]=a[2]*g+b[2]*m+c[2]*u+e[2]*h,d},h.bezier=function(d,a,b,c,e,h){var k=1-h,g=k*k,m=h*h,u=g*k,g=3*h*g,k=3*m*k;h*=m;return d[0]=a[0]*u+b[0]*g+c[0]*k+e[0]*h,d[1]=a[1]*u+b[1]*g+c[1]*k+e[1]*h,d[2]=a[2]*u+b[2]*g+c[2]*k+e[2]*h,d},h.random=function(d,a){a=a||1;var b=2*e.RANDOM()*Math.PI,c=2*e.RANDOM()-1,h=Math.sqrt(1-c*c)*a;return d[0]=Math.cos(b)*h,d[1]=Math.sin(b)*h,d[2]=c*a,d},h.transformMat4=function(d,a,b){var c=a[0],e=a[1];a=a[2];var h=b[3]*
c+b[7]*e+b[11]*a+b[15];return h=h||1,d[0]=(b[0]*c+b[4]*e+b[8]*a+b[12])/h,d[1]=(b[1]*c+b[5]*e+b[9]*a+b[13])/h,d[2]=(b[2]*c+b[6]*e+b[10]*a+b[14])/h,d},h.transformMat3=function(d,a,b){var c=a[0],e=a[1];a=a[2];return d[0]=c*b[0]+e*b[3]+a*b[6],d[1]=c*b[1]+e*b[4]+a*b[7],d[2]=c*b[2]+e*b[5]+a*b[8],d},h.transformQuat=function(d,a,b){var c=a[0],e=a[1],h=a[2];a=b[0];var l=b[1],g=b[2];b=b[3];var n=b*c+l*h-g*e,u=b*e+g*c-a*h,r=b*h+a*e-l*c,c=-a*c-l*e-g*h;return d[0]=n*b+c*-a+u*-g-r*-l,d[1]=u*b+c*-l+r*-a-n*-g,d[2]=
r*b+c*-g+n*-l-u*-a,d},h.rotateX=function(d,a,b,c){var e=[],h=[];return e[0]=a[0]-b[0],e[1]=a[1]-b[1],e[2]=a[2]-b[2],h[0]=e[0],h[1]=e[1]*Math.cos(c)-e[2]*Math.sin(c),h[2]=e[1]*Math.sin(c)+e[2]*Math.cos(c),d[0]=h[0]+b[0],d[1]=h[1]+b[1],d[2]=h[2]+b[2],d},h.rotateY=function(d,a,b,c){var e=[],h=[];return e[0]=a[0]-b[0],e[1]=a[1]-b[1],e[2]=a[2]-b[2],h[0]=e[2]*Math.sin(c)+e[0]*Math.cos(c),h[1]=e[1],h[2]=e[2]*Math.cos(c)-e[0]*Math.sin(c),d[0]=h[0]+b[0],d[1]=h[1]+b[1],d[2]=h[2]+b[2],d},h.rotateZ=function(d,
a,b,c){var e=[],h=[];return e[0]=a[0]-b[0],e[1]=a[1]-b[1],e[2]=a[2]-b[2],h[0]=e[0]*Math.cos(c)-e[1]*Math.sin(c),h[1]=e[0]*Math.sin(c)+e[1]*Math.cos(c),h[2]=e[2],d[0]=h[0]+b[0],d[1]=h[1]+b[1],d[2]=h[2]+b[2],d},h.forEach=function(){var d=h.create();return function(a,b,c,e,h,l){b||(b=3);c||(c=0);for(e=e?Math.min(e*b+c,a.length):a.length;e>c;c+=b)d[0]=a[c],d[1]=a[c+1],d[2]=a[c+2],h(d,d,l),a[c]=d[0],a[c+1]=d[1],a[c+2]=d[2];return a}}(),h.angle=function(d,a){d=h.fromValues(d[0],d[1],d[2]);a=h.fromValues(a[0],
a[1],a[2]);h.normalize(d,d);h.normalize(a,a);a=h.dot(d,a);return 1<a?0:Math.acos(a)},h.str=function(d){return"vec3("+d[0]+", "+d[1]+", "+d[2]+")"},h.exactEquals=function(d,a){return d[0]===a[0]&&d[1]===a[1]&&d[2]===a[2]},h.equals=function(d,a){var b=d[0],c=d[1];d=d[2];var h=a[0],k=a[1];a=a[2];return Math.abs(b-h)<=e.EPSILON*Math.max(1,Math.abs(b),Math.abs(h))&&Math.abs(c-k)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(d-a)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(a))},h})},"esri/views/vectorTiles/renderers/FillRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../../../core/libs/gl-matrix/vec3 ../../webgl/Program ../../webgl/VertexArrayObject ../GeometryUtils ./vtShaderSnippets".split(" "),
function(e,h,d,a,b,c,m,k,l,g){var n=1/65536;return function(){function e(){this._outlineAttributeLocations={a_pos:0,a_offset:1,a_xnormal:2};this._fillAttributeLocations={a_pos:0};this._initialized=!1;this._viewProjMat=d.create();this._offsetVector=c.create();this._patternMatrix=a.create();this._color=b.create();this._outlineColor=b.create()}return e.prototype.dispose=function(){this._solidFillProgram&&(this._solidFillProgram.dispose(),this._solidFillProgram=null);this._patternFillProgram&&(this._patternFillProgram.dispose(),
this._patternFillProgram=null);this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null)},e.prototype.render=function(b,c,e,g,h,k,f,m,u,y,A){if(0!==c.triangleElementCount){this._initialized||this._initialize(b);var p=f.getPaintValue("fill-pattern",e),r=void 0!==p;if(!r||0!==h){var t=f.getPaintValue("fill-antialias",e)&&!r;A*=f.getPaintValue("fill-opacity",e);var q=f.getPaintValue("fill-color",e),z=!1;if(!r){var w=q[3]*A;1===w&&0===h&&(z=!0);1>w&&1===h&&(z=!0)}if(z||0!==h){var v=
k.tileTransform.transform,w=k.coordRange/512,x=f.getPaintValue("fill-translate",e);if(0!==x[0]||0!==x[1]){d.copy(this._viewProjMat,k.tileTransform.transform);var v=x[0],x=x[1],H=0,I=0,w=(1<<k.key.level)/Math.pow(2,e)*w;1===f.getPaintValue("fill-translate-anchor",e)?(I=Math.sin(l.C_DEG_TO_RAD*-g),g=Math.cos(l.C_DEG_TO_RAD*-g),H=w*(v*g-x*I),I=w*(v*I+x*g)):(H=w*v,I=w*x);this._offsetVector[0]=H;this._offsetVector[1]=I;this._offsetVector[2]=0;d.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);
v=this._viewProjMat}if(g=this._getTrianglesVAO(b,k))if(r?1===h&&(p=m.getMosaicItemPosition(p,!0))&&(w=k.coordRange/512/Math.pow(2,Math.round(e)-k.key.level)/y,a.identity(this._patternMatrix),r=1/(p.size[1]*w),this._patternMatrix[0]=1/(p.size[0]*w),this._patternMatrix[4]=r,b.bindVAO(g),m.bind(b,9729,p.page,1),b.bindProgram(this._patternFillProgram),this._patternFillProgram.setUniformMatrix4fv("u_transformMatrix",v),this._patternFillProgram.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord),
this._patternFillProgram.setUniform1f("u_depth",f.z),this._patternFillProgram.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),this._patternFillProgram.setUniform1f("u_opacity",A),this._patternFillProgram.setUniform2f("u_pattern_tl",p.tl[0],p.tl[1]),this._patternFillProgram.setUniform2f("u_pattern_br",p.br[0],p.br[1]),this._patternFillProgram.setUniform1i("u_texture",1),b.drawElements(4,c.triangleElementCount,5125,12*c.triangleElementStart),b.bindVAO()):z&&(w=q[3]*A,this._color[0]=w*q[0],
this._color[1]=w*q[1],this._color[2]=w*q[2],this._color[3]=w,b.bindVAO(g),b.bindProgram(this._solidFillProgram),this._solidFillProgram.setUniformMatrix4fv("u_transformMatrix",v),this._solidFillProgram.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord),this._solidFillProgram.setUniform1f("u_depth",f.z+n),this._solidFillProgram.setUniform4fv("u_color",this._color),b.drawElements(4,c.triangleElementCount,5125,12*c.triangleElementStart),b.bindVAO()),t&&0<c.outlineElementCount&&1===h){e=
f.getPaintValue("fill-outline-color",e);if(0===e[3]){if(1!==this._color[3])return;e=q}y=.75/y;A*=e[3];this._outlineColor[0]=A*e[0];this._outlineColor[1]=A*e[1];this._outlineColor[2]=A*e[2];this._outlineColor[3]=A;if(A=this._getOutlineVAO(b,k))b.bindVAO(A),b.bindProgram(this._outlineProgram),this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",v),this._outlineProgram.setUniformMatrix4fv("u_extrudeMatrix",u),this._outlineProgram.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord),
this._outlineProgram.setUniform1f("u_depth",f.z),this._outlineProgram.setUniform1f("u_outline_width",y),this._outlineProgram.setUniform4fv("u_color",this._outlineColor),b.drawElements(4,c.outlineElementCount,5125,12*c.outlineElementStart),b.bindVAO()}}}}},e.prototype._initialize=function(a){if(this._initialized)return!0;var b=new m(a,g.solidFillShaderVS,g.solidFillShaderFS,{a_pos:0});if(!b)return!1;var c=new m(a,g.patternFillShaderVS,g.patternFillShaderFS,this._fillAttributeLocations);if(!c)return!1;
a=new m(a,g.fillOutlineShaderVS,g.fillOutlineShaderFS,this._outlineAttributeLocations);return this._solidFillProgram=b,this._patternFillProgram=c,this._trianglesVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},this._outlineProgram=a,this._outlineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",
count:2,type:5120,offset:6,stride:8,normalized:!1,divisor:0}]},this._initialized=!0,!0},e.prototype._getTrianglesVAO=function(a,b){if(b.polygonTrianglesVertexArrayObject)return b.polygonTrianglesVertexArrayObject;var c=b.polygonTrianglesVertexBuffer,d=b.polygonTrianglesIndexBuffer;return c&&d?(b.polygonTrianglesVertexArrayObject=new k(a,this._fillAttributeLocations,this._trianglesVertexAttributes,{geometry:c},d),b.polygonTrianglesVertexArrayObject):null},e.prototype._getOutlineVAO=function(a,b){if(b.polygonOutlineVertexArrayObject)return b.polygonOutlineVertexArrayObject;
var c=b.polygonOutlinesVertexBuffer,d=b.polygonOutlinesIndexBuffer;return c&&d?(b.polygonOutlineVertexArrayObject=new k(a,this._outlineAttributeLocations,this._outlineVertexAttributes,{geometry:c},d),b.polygonOutlineVertexArrayObject):null},e}()})},"esri/views/vectorTiles/renderers/SymbolRenderer":function(){define(["require","exports","./IconRenderer","./SDFRenderer"],function(e,h,d,a){return function(){function b(){this._iconRenderer=new d;this._sdfRenderer=new a}return b.prototype.dispose=function(){this._iconRenderer&&
(this._iconRenderer.dispose(),this._iconRenderer=null);this._sdfRenderer&&(this._sdfRenderer.dispose(),this._sdfRenderer=null)},b.prototype.render=function(a,b,d,e,g,h,u,r,t,w,q,v,x){b.hasData()&&(0<b.markerPerPageElementsMap.size&&(b.isSDF||this._iconRenderer.render(a,b,d,e,g,h,u,r,w,q,x)),0<b.glyphPerPageElementsMap.size&&this._sdfRenderer.render(a,b,d,e,g,h,u,t,w,q,v,x))},b}()})},"esri/views/vectorTiles/renderers/IconRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../webgl/Program ../../webgl/VertexArrayObject ../GeometryUtils ./vtShaderSnippets".split(" "),
function(e,h,d,a,b,c,m,k){return function(){function e(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._spritesTextureSize=new Float32Array(2);this._initialized=!1;this._extrudeMat=d.create();this._scaleVec=a.create()}return e.prototype.dispose=function(){this._iconProgram&&(this._iconProgram.dispose(),this._iconProgram=null)},e.prototype.render=function(a,b,c,e,h,k,l,v,x,f,p){var g=this;this._initialized||this._initialize(a);p*=l.getPaintValue("icon-opacity",c);var n=
l.getLayoutValue("icon-rotation-alignment",c);1===n&&(1!==l.getLayoutValue("symbol-placement",c)||l.hasLayoutProperty("icon-rotation-alignment")||(n=0));var r=0===n,n=l.getLayoutValue("icon-keep-upright",c)&&r,t=l.getLayoutValue("icon-size",c);e=m.degToByte(e);r?d.copy(this._extrudeMat,x):d.copy(this._extrudeMat,f);1!==t&&(this._scaleVec[0]=t,this._scaleVec[1]=t,this._scaleVec[2]=1,d.scale(this._extrudeMat,this._extrudeMat,this._scaleVec));a.bindProgram(this._iconProgram);(x=this._getIconVAO(a,k))&&
(a.bindVAO(x),this._iconProgram.setUniformMatrix4fv("u_transformMatrix",k.tileTransform.transform),this._iconProgram.setUniformMatrix4fv("u_extrudeMatrix",this._extrudeMat),this._iconProgram.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord),this._iconProgram.setUniform1f("u_depth",l.z),this._iconProgram.setUniform1f("u_mapRotation",e),this._iconProgram.setUniform1f("u_keepUpright",n?1:0),this._iconProgram.setUniform1f("u_level",10*c),this._iconProgram.setUniform1f("u_fadeSpeed",10*
h.fadeSpeed),this._iconProgram.setUniform1f("u_minfadeLevel",10*h.minfadeLevel),this._iconProgram.setUniform1f("u_maxfadeLevel",10*h.maxfadeLevel),this._iconProgram.setUniform1f("u_fadeChange",10*(c+h.fadeChange)),this._iconProgram.setUniform1f("u_opacity",p),this._iconProgram.setUniform1i("u_texture",1),b.markerPerPageElementsMap.forEach(function(b,c){g._spritesTextureSize[0]=v.getWidth(c)/4;g._spritesTextureSize[1]=v.getHeight(c)/4;g._iconProgram.setUniform2fv("u_mosaicSize",g._spritesTextureSize);
v.bind(a,9729,c,1);a.drawElements(4,b[1],5125,12*b[0])}),a.bindVAO())},e.prototype._initialize=function(a){return this._initialized?!0:(this._iconProgram=new b(a,k.iconShaderVS,k.iconShaderFS,this._attributeLocations),this._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",
count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]},this._initialized=!0,!0)},e.prototype._getIconVAO=function(a,b){if(b.iconVertexArrayObject)return b.iconVertexArrayObject;var d=b.iconVertexBuffer,e=b.iconIndexBuffer;return d&&e?(b.iconVertexArrayObject=new c(a,this._attributeLocations,this._iconVertexAttributes,{geometry:d},e),b.iconVertexArrayObject):null},e}()})},"esri/views/vectorTiles/renderers/SDFRenderer":function(){define("require exports dojo/has ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec4 ../../../core/libs/gl-matrix/vec3 ../../webgl/Program ../../webgl/VertexArrayObject ../GeometryUtils ./vtShaderSnippets".split(" "),
function(e,h,d,a,b,c,m,k,l,g){var n=1/65536;return function(){function e(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._initialized=!1;this._extrudeMat=a.create();this._haloColor=b.create();this._sdfColor=b.create();this._scaleVec=c.create()}return e.prototype.dispose=function(){this._sdfProgram&&(this._sdfProgram.dispose(),this._sdfProgram=null)},e.prototype.render=function(b,c,e,g,h,k,f,m,u,y,A,B){var p=this;if(!d("esri-vector-tiles-avoid-text")){this._initialized||
this._initialize(b);var r=f.getLayoutValue("text-size",e),t=r/24;g=l.degToByte(g);var q=f.getLayoutValue("text-rotation-alignment",e);1===q&&(1!==f.getLayoutValue("symbol-placement",e)||f.hasLayoutProperty("text-rotation-alignment")||(q=0));var z=0===q,q=f.getLayoutValue("text-keep-upright",e)&&z,w=.1*24/r/A,v=B*f.getPaintValue("text-opacity",e);this._glyphTextureSize||(this._glyphTextureSize=new Float32Array([m.width/4,m.height/4]));z?a.copy(this._extrudeMat,u):a.copy(this._extrudeMat,y);this._scaleVec[0]=
t;this._scaleVec[1]=t;this._scaleVec[2]=1;a.scale(this._extrudeMat,this._extrudeMat,this._scaleVec);b.bindProgram(this._sdfProgram);(u=this._getSDFVAO(b,k))&&(b.bindVAO(u),this._sdfProgram.setUniformMatrix4fv("u_transformMatrix",k.tileTransform.transform),this._sdfProgram.setUniformMatrix4fv("u_extrudeMatrix",this._extrudeMat),this._sdfProgram.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord),this._sdfProgram.setUniform1f("u_depth",f.z+n),this._sdfProgram.setUniform2fv("u_mosaicSize",
this._glyphTextureSize),this._sdfProgram.setUniform1f("u_mapRotation",g),this._sdfProgram.setUniform1f("u_keepUpright",q?1:0),this._sdfProgram.setUniform1f("u_level",10*e),this._sdfProgram.setUniform1f("u_fadeSpeed",10*h.fadeSpeed),this._sdfProgram.setUniform1f("u_minfadeLevel",10*h.minfadeLevel),this._sdfProgram.setUniform1f("u_maxfadeLevel",10*h.maxfadeLevel),this._sdfProgram.setUniform1f("u_fadeChange",10*(e+h.fadeChange)),this._sdfProgram.setUniform1f("u_opacity",v),this._sdfProgram.setUniform1i("u_texture",
0),c.glyphPerPageElementsMap.forEach(function(a,c){m.bind(b,9729,c,0);c=f.getPaintValue("text-halo-color",e);if(0<c[3]){var d=c[3]*v;p._haloColor[0]=d*c[0];p._haloColor[1]=d*c[1];p._haloColor[2]=d*c[2];p._haloColor[3]=d;c=w+f.getPaintValue("text-halo-blur",e)/t/8;d=.75-f.getPaintValue("text-halo-width",e)/t/8;p._sdfProgram.setUniform4fv("u_color",p._haloColor);p._sdfProgram.setUniform1f("u_edgeDistance",d);p._sdfProgram.setUniform1f("u_edgeWidth",c);b.drawElements(4,a[1],5125,12*a[0])}c=f.getPaintValue("text-color",
e);0<c[3]&&(d=c[3]*v,p._sdfColor[0]=d*c[0],p._sdfColor[1]=d*c[1],p._sdfColor[2]=d*c[2],p._sdfColor[3]=d,p._sdfProgram.setUniform4fv("u_color",p._sdfColor),p._sdfProgram.setUniform1f("u_edgeDistance",.75),p._sdfProgram.setUniform1f("u_edgeWidth",w),b.drawElements(4,a[1],5125,12*a[0]))}),b.bindVAO())}},e.prototype._initialize=function(a){return this._initialized?!0:(this._sdfProgram=new m(a,g.sdfShaderVS,g.sdfShaderFS,this._attributeLocations),this._sdfVertexAttributes={geometry:[{name:"a_pos",count:2,
type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]},this._initialized=!0,!0)},e.prototype._getSDFVAO=function(a,b){if(b.textVertexArrayObject)return b.textVertexArrayObject;var c=b.textVertexBuffer,d=b.textIndexBuffer;return c&&d?(b.textVertexArrayObject=
new k(a,this._attributeLocations,this._sdfVertexAttributes,{geometry:c},d),b.textVertexArrayObject):null},e}()})},"esri/views/vectorTiles/renderers/TileInfoRenderer":function(){define("require exports ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject ../../webgl/Texture ../GeometryUtils ./vtShaderSnippets".split(" "),function(e,h,d,a,b,c,m,k){return function(){function e(){this._initialized=!1;this._maxWidth=0;this._color=new Float32Array([1,0,0,1])}return e.prototype.dispose=
function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null)},e.prototype.render=function(a,b){this._initialized||this._initialize(a);a.bindVAO(this._outlineVertexArrayObject);
a.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",b.coordRange);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);a.setLineWidth(2);a.drawArrays(3,0,4);a.bindVAO();var c=this._getTexture(a,b);c&&(a.bindVAO(this._tileInfoVertexArrayObject),
a.bindProgram(this._tileInfoProgram),a.bindTexture(c,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",b.coordRange/512),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",c.descriptor.width,c.descriptor.height),a.drawArrays(5,
0,4),a.bindVAO())},e.prototype._initialize=function(c){if(this._initialized)return!0;var e={a_pos:0},g=new d(c,k.backgroundVS,k.backgroundFS,e),h=new d(c,k.tileInfoVS,k.tileInfoFS,e),l={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},m=new Int8Array([0,0,1,0,1,1,0,1]),m=b.createVertex(c,35044,m),m=new a(c,e,l,{geometry:m}),q=new Int8Array([0,0,1,0,0,1,1,1]),q=b.createVertex(c,35044,q);c=new a(c,e,l,{geometry:q});return this._outlineProgram=g,this._tileInfoProgram=
h,this._vertexAttributes=l,this._outlineVertexArrayObject=m,this._tileInfoVertexArrayObject=c,this._initialized=!0,!0},e.prototype._getTexture=function(a,b){if(b.texture)return b.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var d=b.key.id,e=this._canvas.getContext("2d");e.font="24px sans-serif";e.textAlign=
"left";e.textBaseline="middle";var g=e.measureText(d),g=Math.pow(2,Math.ceil(m.log2(g.width+2)));g>this._maxWidth&&(this._maxWidth=g);return e.clearRect(0,0,this._maxWidth,32),e.fillStyle=b.key.level>b.refKey.level?"red":"blue",e.fillText(d,0,16),b.texture=new c(a,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas),b.texture},e}()})},"esri/views/vectorTiles/renderers/FadeRecorder":function(){define(["require","exports","../../../core/now"],function(e,h,d){Object.defineProperty(h,
"__esModule",{value:!0});e=(function(){return function(a,b){this.level=a;this.now=b}}(),function(){return function(a,b,c,d){this.fadeSpeed=a;this.minfadeLevel=b;this.maxfadeLevel=c;this.fadeChange=d}}());h.FadeProperties=e;e=function(){function a(a){void 0===a&&(a=300);this._levelSnapshots=[];this._duration=a}return a.prototype.recordLevel=function(a){var b=d(),e=this._levelSnapshots;0===e.length&&(e.push({level:a,now:0}),e.push({level:a,now:0}));2!==e.length&&e[0].level===a||e.push({level:a,now:b})},
a.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var a=this._duration,c=this._levelSnapshots,d=c.length,e=c[d-1],h=-1;d>h+1&&c[h+1].now+a<e.now;)h++;for(0>h&&(h=0);d>h;h++)if(c[h].level!==e.level)return!0;return!1},a.prototype.getFadeValues=function(a){void 0===a&&(a=!1);for(var b=this._duration,e=d(),h=this._levelSnapshots;3<h.length&&h[1].now+b<e;)h.shift();h[1].now+b<e&&(h[0].level=h[1].level);var l=h[0].level,g=h[h.length-1],n=g.level,u=Math.min(l,n),l=Math.max(l,
n),h=(g.level-h[1].level)/((g.now-h[1].now)/b),b=(e-g.now)/b*h;return a?{fadeSpeed:0,minfadeLevel:u,maxfadeLevel:l,fadeChange:0}:{fadeSpeed:h,minfadeLevel:u,maxfadeLevel:l,fadeChange:b}},a}();h.FadeRecorder=e})},"esri/views/layers/LayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Evented ../../core/Identifiable ../../core/Promise ../../core/HandleRegistry ../../core/Logger".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.handles=new g,b.parent=null,b.view=null,b}return d(b,a),b.prototype.initialize=function(){var a=this;this.addResolvingPromise(this.layer);this.otherwise(function(b){if("layerview:create-error"!==b.name){var c=a.layer&&a.layer.id||"no id",d=a.layer&&a.layer.title||"no title";n.getLogger(a.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+d+"', id: '"+c+"')",
b)}})},b.prototype.destroy=function(){this.layer=this.view=this.parent=null},Object.defineProperty(b.prototype,"layer",{get:function(){return this._get("layer")},set:function(a){this.handles.remove("layer");a&&this.handles.add(a.on("refresh",this.refresh.bind(this)),"layer");this._set("layer",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"updating",{get:function(){return!this.suspended&&
this.isUpdating()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(a){return void 0===a?void this._clearOverride("visible"):void this._override("visible",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"fullOpacity",{get:function(){var a=this.get("layer.opacity"),a=null!=a?a:1,b=this.get("parent.fullOpacity");return a*(null!=b?b:1)},enumerable:!0,configurable:!0}),b.prototype.refresh=
function(){},b.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},b.prototype.isUpdating=function(){return!1},b}(b.declared(c,m,k,l));return a([b.property({value:null})],e.prototype,"layer",null),a([b.property()],e.prototype,"parent",void 0),a([b.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],e.prototype,"suspended",null),a([b.property({type:Boolean,dependsOn:["suspended"],
readOnly:!0})],e.prototype,"updating",null),a([b.property()],e.prototype,"view",void 0),a([b.property({dependsOn:["layer.visible"]})],e.prototype,"visible",null),a([b.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],e.prototype,"fullOpacity",null),e=a([b.subclass("esri.views.layers.LayerView")],e)})},"esri/views/3d/layers/support/LayerViewUpdatingPercentage":function(){define(["../../../../core/Accessor"],function(e){return e.createSubclass([],{properties:{updating:{readOnly:!0},updatingPercentageValue:{value:100,
readOnly:!0},updatingPercentage:{dependsOn:["updating","updatingPercentageValue"],readOnly:!0,value:0,get:function(){return this.updating?this.updatingPercentageValue:0}}},constructor:function(){}})})},"esri/views/3d/terrain/terrainUtils":function(){define("require exports ./terrainUtilsPlanar ./terrainUtilsSpherical ../../../layers/TiledLayer ../../../layers/TileLayer ../../../layers/BaseTileLayer ../../../layers/BaseElevationLayer ../../../layers/ElevationLayer ../../../layers/VectorTileLayer ../../../support/basemapDefinitions".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n){function u(a){return a&&a.isInstanceOf(g)}function r(a){return a&&"esri.views.3d.layers.TiledLayerView3D"===a.declaredClass}function t(a){return a&&"esri.views.3d.layers.VectorTileLayerView3D"===a.declaredClass}function w(a){return a&&"esri.views.3d.layers.ElevationLayerView3D"===a.declaredClass}function q(){x={};for(var a in n)n[a].baseMapLayers.forEach(function(a){x[a.url]=19});x["//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"]=20}Object.defineProperty(h,
"__esModule",{value:!0});var v={planar:d,spherical:a};h.weakAssert=function(a,b){a||console.warn("Terrain: "+b)};h.autoUpdateSkirtsVisibility=function(a,b){v[a.manifold].autoUpdateSkirtsVisibility(a,b)};h.isTiledLayer=function(a){return a&&(a.isInstanceOf(b)||a.isInstanceOf(m)||a.isInstanceOf(k))};h.isVectorTileLayer=u;h.isTiledMapLayerView=r;h.isVectorTileLayerView=t;h.isElevationLayerView=w;h.isTiledLayerView=function(a){return a&&(r(a)||w(a)||t(a))};h.useFetchTileForLayer=function(a){return a.fetchTile&&
!(a.fetchTile===c.prototype.fetchTile||a.fetchTile===l.prototype.fetchTile)};var x=null;h.getKnownTiledServiceLevelCap=function(a){x||q();a=a&&a.replace(/https?:/,"");return a in x?x[a]:1/0};h.prepareKnownTiledServiceLevelCaps=q;h.checkIfTileInfoSupportedForView=function(a,b,c,d){var e;return e="local"===d||"planar"===d?"planar":"spherical",v[e].checkIfTileInfoSupportedForViewSR(a,b,c)};h.getTileInfo=function(a){return u(a)?a.tileInfo256:a.tileInfo}})},"esri/views/3d/terrain/terrainUtilsPlanar":function(){define("require exports ./TilingScheme ./TerrainConst ../../../core/Error ../support/aaBoundingRect ../lib/glMatrix".split(" "),
function(e,h,d,a,b,c,m){function k(a,b,c,d){g.set(c,n);n[d]=b[d];d=g.subtract(n,b);var e=g.subtract(a,b,u),e=g.dot(e,d),h=g.dot(d,d);b=0>=e?b:e>=h?c:g.add(b,g.scale(d,e/h),n);a=g.subtract(a,b,n);return Math.PI/2-Math.atan(a[2]/Math.sqrt(a[0]*a[0]+a[1]*a[1]))}function l(a,b){var c=a.getElevationBounds();a=a.extent;c=.5*(c[0]+c[1]);r[0]=a[0];r[1]=a[1];r[2]=c;t[0]=a[2];t[1]=a[3];t[2]=c;c=1/0;a=1/0;return b[0]<r[0]?c=k(b,r,t,0):b[0]>t[0]&&(c=k(b,t,r,0)),b[1]<r[1]?a=k(b,r,t,1):b[1]>t[1]&&(a=k(b,t,r,1)),
Math.min(c,a)}Object.defineProperty(h,"__esModule",{value:!0});var g=m.vec3d,n=g.create(),u=g.create(),r=g.create(),t=g.create();h.autoUpdateSkirtsVisibility=function(a,b){var d,e=!0,f=a.extent,g=c.containsPoint(f,b);g?d=a.getElevation(b):(d=a.getElevationBounds(),d=.5*(d[0]+d[1]));d>b[2]?e=!1:g||(c.containsPointWithMargin(f,b,a.hideSkirtsDistanceFromExtentMargin*Math.min(f[2]-f[0],f[3]-f[1]))?l(a,b)>a.hideSkirtsMinimumCameraTilt&&(e=!1):e=!1);e!==a.skirts&&(a.skirts=e)};h.tiltOnEdge=k;h.tiltToExtentEdge=
l;h.checkIfTileInfoSupportedForViewSR=function(e,g,h){if(e.spatialReference.isGeographic)return new b("tilingscheme:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes");var k=d.checkUnsupported(e);if(k)return k;var f;f=e.lods;var k=f[0].resolution*Math.pow(2,f[0].level),l=[k*e.size[0],k*e.size[1]],m=[e.origin.x,e.origin.y];g=c.fromExtent(g);var n=c.create();d.computeRowColExtent(g,l,m,n);l=(n[2]-n[0])*(n[3]-n[1]);l>a.MAX_ROOT_TILES?(f=f[0].scale*Math.pow(2,f[0].level),
k=Math.max((g[3]-g[1])/e.size[1],(g[2]-g[0])/e.size[0])*f/k,g=Math.floor(Math.log(k)/Math.log(10)),f=(k=Math.ceil(k/Math.pow(10,g))*Math.pow(10,g),new b("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(f).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+k.toLocaleString()+".",{level0Scale:f,suggestedLevel0Scale:k,requiredNumRootTiles:l,allowedNumRootTiles:a.MAX_ROOT_TILES}))):f=null;return f?f:h&&!e.spatialReference.equals(h)?new b("tilingscheme:spatial-reference-mismatch",
"The tiling scheme does not match the spatial reference of the local scene"):null}})},"esri/views/3d/terrain/TilingScheme":function(){define(["../../../core/Error","../../../geometry/SpatialReference","../../../geometry/support/scaleUtils","../support/projectionUtils","../support/mathUtils"],function(e,h,d,a,b){var c=a.webMercator.x2lon,m=a.webMercator.y2lat,k=[0,0,0,0],l=function(a){var b=l._checkUnsupported(a);if(b)throw b;this.spatialReference=a.spatialReference;this._isWebMercator=this.spatialReference.isWebMercator;
this._isWGS84=this.spatialReference.isWGS84;this.origin=[a.origin.x,a.origin.y];this.pixelSize=[a.size[0],a.size[1]];var c=a.lods.reduce(function(a,b,c){return b.level<a.min&&(a.min=b.level,a.minIndex=c),a.max=Math.max(a.max,b.level),a},{min:1/0,minIndex:0,max:-(1/0)}),d=a.lods[c.minIndex],e=Math.pow(2,d.level),b=d.resolution*e,d=d.scale*e;this.levels=Array(c.max+1);for(c=0;c<this.levels.length;c++)this.levels[c]={resolution:b,scale:d,tileSize:[b*a.size[0],b*a.size[1]]},b/=2,d/=2};return l.prototype=
{getExtent:function(a,d,e,h,k){h=h||Array(4);var g=this.levels[a];a=g.tileSize[0];g=g.tileSize[1];h[0]=this.origin[0]+e*a;h[2]=h[0]+a;h[3]=this.origin[1]-d*g;h[1]=h[3]-g;k&&(this._isWebMercator?(k[0]=c(h[0]),k[1]=m(h[1]),k[2]=c(h[2]),k[3]=m(h[3])):this._isWGS84&&(k[0]=b.deg2rad(h[0]),k[1]=b.deg2rad(h[1]),k[2]=b.deg2rad(h[2]),k[3]=b.deg2rad(h[3])))},ensureMaxLod:function(a){for(;this.levels.length<=a;){var b=this.levels[this.levels.length-1],c=b.resolution/2;this.levels.push({resolution:c,scale:b.scale/
2,tileSize:[c*this.pixelSize[0],c*this.pixelSize[1]]})}},capMaxLod:function(a){this.levels.length>a+1&&(this.levels.length=a+1)},getMaxLod:function(){return this.levels.length-1},scaleAtLevel:function(a){return this.levels[0].scale/Math.pow(2,a)},levelAtScale:function(a){var b=this.levels[0].scale;return a>=b?0:Math.log(b/a)*Math.LOG2E},compatibleWith:function(a){if(!(a instanceof l)){if(l._checkUnsupported(a))return!1;a=new l(a)}if(!a.spatialReference.equals(this.spatialReference)||a.pixelSize[0]!==
this.pixelSize[0]||a.pixelSize[1]!==this.pixelSize[1])return!1;var c=Math.min(this.levels.length,a.levels.length)-1,d=this.levels[c].resolution,e=b.floatEqualAbsolute,g=.5*d;return e(a.origin[0],this.origin[0],g)&&e(a.origin[1],this.origin[1],g)?(g=.5*d/Math.pow(2,c)/Math.max(this.pixelSize[0],this.pixelSize[1])*12,e(d,a.levels[c].resolution,g)):!1},rootTilesInExtent:function(a,b,c){var d=this.levels[0].tileSize;l.computeRowColExtent(a,d,this.origin,k);a=k[1];var e=k[3],g=k[0],h=k[2],m=h-g,n=e-a;
m*n>c&&(c=Math.floor(Math.sqrt(c)),n>c&&(a=a+Math.floor(.5*n)-Math.floor(.5*c),e=a+c),m>c&&(g=g+Math.floor(.5*m)-Math.floor(.5*c),h=g+c));c=Array((h-g)*(e-a));m=0;for(n=a;e>n;n++)for(var f=g;h>f;f++)c[m++]=[0,n,f];return b&&(b[0]=this.origin[0]+g*d[0],b[1]=this.origin[1]-e*d[1],b[2]=this.origin[0]+h*d[0],b[3]=this.origin[1]-a*d[1]),c}},l.computeRowColExtent=function(a,b,c,d){var e=.001*(a[2]-a[0]+(a[3]-a[1]));d[0]=Math.floor((a[0]+e-c[0])/b[0]);d[2]=Math.ceil((a[2]-e-c[0])/b[0]);d[1]=Math.floor((c[1]-
a[3]+e)/b[1]);d[3]=Math.ceil((c[1]-a[1]-e)/b[1])},l.isPowerOfTwo=function(a){a=a.lods;var c=a[0].resolution*Math.pow(2,a[0].level);return!a.some(function(a){return!b.floatEqualRelative(a.resolution,c/Math.pow(2,a.level))})},l.hasGapInLevels=function(a){a=a.lods.map(function(a){return a.level});a.sort(function(a,b){return a-b});for(var b=1;b<a.length;b++)if(a[b]!==a[0]+b)return!0;return!1},l.tileSizeSupported=function(a){var b=a.size[1];return b===a.size[0]&&0===(b&b-1)&&128<=b&&512>=b},l._checkUnsupported=
function(a){return a?1>a.lods.length?new e("tilingscheme:generic","Tiling scheme must have at least one level"):l.isPowerOfTwo(a)?null:new e("tilingscheme:power-of-two","Tiling scheme must be power of two"):new e("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")},l.checkUnsupported=function(a){var b=l._checkUnsupported(a);return b?b:l.hasGapInLevels(a)?new e("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):l.tileSizeSupported(a)?
null:new e("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]")},l.fromExtent=function(a,b){var c=a[2]-a[0],e=a[3]-a[1],g=d.getUnitValueForSR(b),h=1.2*Math.max(c,e);a=new l({size:[256,256],origin:{x:a[0]-.5*(h-c),y:a[3]+.5*(h-e)},lods:[{level:0,resolution:h/256,scale:1/(256/96*.0254/(h*g))}],spatialReference:b});return a.ensureMaxLod(20),a},l.WebMercatorAuxiliarySphereTileInfo={size:[256,256],origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:h.WebMercator,
lods:[{level:0,resolution:156543.03392800014,scale:5.91657527591555E8}]},l.makeWebMercatorAuxiliarySphere=function(a){a=a||19;var b=new l(l.WebMercatorAuxiliarySphereTileInfo);return b.ensureMaxLod(a),b},l.WebMercatorAuxiliarySphere=l.makeWebMercatorAuxiliarySphere(19),l.makeWGS84WithTileSize=function(a,b){b=b||16;var c=256/a;a=new l({size:[a,a],origin:{x:-180,y:90},spatialReference:h.WGS84,lods:[{level:0,resolution:.703125*c,scale:2.95497598570834E8*c}]});return a.ensureMaxLod(b),a},l})},"esri/views/3d/support/projectionUtils":function(){define("../../../geometry/SpatialReference ../../../geometry/Point ./mathUtils ./earthUtils ../lib/glMatrix ../webgl-engine/lib/BufferVectorMath".split(" "),
function(e,h,d,a,b,c){var m,k,l,g,n=b.vec3d,u=b.mat4d,r=c.Vec3Compact,t=n.create(),w=n.create(),q=n.create(),v=d.deg2rad(1),x=d.rad2deg(1),f=new e({wkt:'      GEOCCS["Spherical geocentric",        DATUM["Not specified",          SPHEROID["Sphere",'+a.earthRadius+',0]],        PRIMEM["Greenwich",0.0,          AUTHORITY["EPSG","8901"]],        UNIT["m",1.0],        AXIS["Geocentric X",OTHER],        AXIS["Geocentric Y",EAST],        AXIS["Geocentric Z",NORTH]      ]    '}),p=a.earthRadius,z=function(a){return a===
f?1:a.isWGS84?2:a.isWebMercator?3:0};e=function(a,b,c,d){c[d++]=a[b++];c[d++]=a[b++];c[d]=a[b]};var y=function(a,b,c,e){var f=.4999999*Math.PI,g=v*a[b+1],g=d.clamp(g,-f,f),f=Math.sin(g);c[e++]=v*a[b]*p;c[e++]=p/2*Math.log((1+f)/(1-f));c[e]=a[b+2]},A=function(a,b,c,d){var e=p+a[b+2],f=v*a[b+1];a=v*a[b];b=Math.cos(f);c[d++]=Math.cos(a)*b*e;c[d++]=Math.sin(a)*b*e;c[d]=Math.sin(f)*e},B=[void 0,A,e,y],D=[void 0,function(a,b,c,e){var f=r.length(a,b),g=d.asin(a[b+2]/f);a=(0<a[b+1]?1:-1)*d.acos(a[b]/(Math.cos(g)*
f));c[e++]=x*a;c[e++]=x*g;c[e]=f-p},e,function(a,b,c,d){c[d++]=x*(a[b++]/p);c[d++]=x*(Math.PI/2-2*Math.atan(Math.exp(-1*a[b++]/p)));c[d]=a[b]}];return{SphericalRenderSpatialReference:f,vectorToVector:function(a,b,c,d){return 2===a.length?(t[0]=a[0],t[1]=a[1],t[2]=0,a=t):a===c&&(n.set(a,t),a=t),this.bufferToBuffer(a,b,0,c,d,0,1)},pointToVector:function(a,b,c){t[0]=a.x;t[1]=a.y;var d=a.z;return t[2]=void 0!==d?d:0,this.bufferToBuffer(t,a.spatialReference,0,b,c,0,1)},vectorToPoint:function(a,b,c,d){var e;
return"esri.SpatialReference"===c.declaredClass?(d=c,e=new h({spatialReference:d})):(e=c,d=d||e.spatialReference),this.bufferToBuffer(a,b,0,t,d,0,1)?(e.x=t[0],e.y=t[1],e.z=t[2],e.spatialReference=d,e):null},xyzToVector:function(a,b,c,d,e,f){return t[0]=a,t[1]=b,t[2]=c,this.bufferToBuffer(t,d,0,e,f,0,1)},bufferToBuffer:function(a,b,c,d,e,f,h){h=h||1;m!==b&&(k=z(b),m=b);l!==e&&(g=z(e),l=e);h=c+3*h;if(k!==g||0===k&&!b.equals(e)){if(!(0<k&&0<g))return!1;if(2!==g){var p=B[g];if(2!==k)for(e=D[k];h>c;c+=
3,f+=3)e(a,c,w,0,b.wkid),p(w,0,d,f);else for(;h>c;c+=3,f+=3)p(a,c,d,f)}else for(e=D[k];h>c;c+=3,f+=3)e(a,c,d,f,b.wkid)}else if(d!==a||c!==f)for(;h>c;c++,f++)d[f]=a[c];return!0},computeLinearTransformation:function(a,b,c,d){var e=z(a),f=z(d);if(e===f&&(0!==e||a.equals(d)))return u.identity(c),u.translate(c,b),!0;if(1===f){if(d=D[e])return d(b,0,w,0,a.wkid),A(w,0,q,0),d=v*w[0],b=v*w[1],a=Math.sin(d),d=Math.cos(d),e=Math.sin(b),b=Math.cos(b),c[0]=-a,c[4]=-e*d,c[8]=b*d,c[12]=q[0],c[1]=d,c[5]=-e*a,c[9]=
b*a,c[13]=q[1],c[2]=0,c[6]=b,c[10]=e,c[14]=q[2],c[3]=0,c[7]=0,c[11]=0,c[15]=1,!0}else if(3===f&&(2===e||1===e))return D[e](b,0,w,0,a.wkid),a=v*w[1],y(w,0,q,0),u.identity(c),u.translate(c,q),a=1/Math.cos(a),u.scale(c,[a,a,1]),!0;return!1},mbsToMbs:function(a,b,c,d){var e=z(b),f=z(d);if(e===f&&(0!==e||b.equals(d)))return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],!0;if(1===f){if(d=D[e])return d(a,0,w,0,b.wkid),A(w,0,c,0),c[3]=a[3],!0}else if(3===f&&(2===e||1===e))return D[e](a,0,w,0,b.wkid),b=v*w[1],(b=
Math.abs(b)+Math.asin(a[3]/(p+a[2])),y(w,0,c,0),b>.9999*Math.PI)?c[3]=Number.MAX_VALUE:c[3]=1/Math.cos(b)*a[3],!0;return!1},extentToBoundingBox:function(a,b,c){if(null==a)return!1;var d=!0;return t[0]=null!=a.xmin?a.xmin:0,t[1]=null!=a.ymin?a.ymin:0,t[2]=null!=a.zmin?a.zmin:0,d=d&&this.bufferToBuffer(t,a.spatialReference,0,b,c,0,1),t[0]=null!=a.xmax?a.xmax:0,t[1]=null!=a.ymax?a.ymax:0,t[2]=null!=a.zmax?a.zmax:0,d=d&&this.bufferToBuffer(t,a.spatialReference,0,b,c,3,1),null==a.xmin&&(b[0]=-(1/0)),null==
a.ymin&&(b[1]=-(1/0)),null==a.zmin&&(b[2]=-(1/0)),null==a.xmax&&(b[3]=1/0),null==a.ymax&&(b[4]=1/0),null==a.zmax&&(b[5]=1/0),d},extentToBoundingRect:function(a,b,c){if(null==a)return!1;var d=!0;return t[0]=null!=a.xmin?a.xmin:0,t[1]=null!=a.ymin?a.ymin:0,t[2]=null!=a.zmin?a.zmin:0,d=d&&this.bufferToBuffer(t,a.spatialReference,0,t,c,0,1),b[0]=t[0],b[1]=t[1],t[0]=null!=a.xmax?a.xmax:0,t[1]=null!=a.ymax?a.ymax:0,t[2]=null!=a.zmax?a.zmax:0,d=d&&this.bufferToBuffer(t,a.spatialReference,0,t,c,0,1),b[2]=
t[0],b[3]=t[1],null==a.xmin&&(b[0]=-(1/0)),null==a.ymin&&(b[1]=-(1/0)),null==a.xmax&&(b[2]=1/0),null==a.ymax&&(b[3]=1/0),d},webMercator:{x2lon:function(a){return a/p},y2lat:function(a){return Math.PI/2-2*Math.atan(Math.exp(-1*a/p))},lon2x:function(a){return a*p},lat2y:function(a){a=Math.sin(a);return p/2*Math.log((1+a)/(1-a))}}}})},"esri/views/3d/support/earthUtils":function(){define(["dojo/_base/lang","./mathUtils","../../../geometry/Point","../../../geometry/SpatialReference","../../../geometry/support/webMercatorUtils"],
function(e,h,d,a,b){var c=6378137*Math.PI,m=new d(0,0,a.WGS84),k={earthRadius:6378137,halfEarthCircumference:c,earthCircumference:2*c,metersPerDegree:c/180,getGreatCircleDistance:function(a,b,c,d){void 0===c&&void 0===d&&e.isObject(a)&&e.isObject(b)&&(c=b.get("longitude"),d=b.get("latitude"),b=a.get("latitude"),a=a.get("longitude"));b=h.deg2rad(b);d=h.deg2rad(d);a=h.deg2rad(a);var g=h.deg2rad(c);c=Math.sin((b-d)/2);a=Math.sin((a-g)/2);b=12756274*h.asin(Math.sqrt(c*c+Math.cos(b)*Math.cos(d)*a*a));
return b=Math.round(1E4*b)/1E4},getGreatCircleSpanAt:function(a,b,c){var e=b.spatialReference,g=new d(b.x,a.y,e),h=new d(c.x,a.y,e);b=new d(a.x,b.y,e);a=new d(a.x,c.y,e);return{lon:this.getGreatCircleDistance(g,h),lat:this.getGreatCircleDistance(b,a)}},getLonDeltaForDistance:function(a,b,c){a=c/6378137;b=h.deg2rad(b);a=Math.sin(a/2);b=Math.cos(b);b=2*h.asin(Math.sqrt(a*a/(b*b)));return h.rad2deg(b)},getLatDeltaForDistance:function(a,b,c){return h.rad2deg(c/6378137)},getLatLonDeltaForDistance:function(a,
b,c){return{lat:this.getLatDeltaForDistance(a,b,c),lon:this.getLonDeltaForDistance(a,b,c)}},getMaxCameraAltitude:function(a){a=h.deg2rad(a/2);return 6378137*(1-Math.sin(a))/Math.sin(a)},getViewExtentDistance:function(a,b){b=h.deg2rad(b/2);return 12756274*h.acos((Math.pow(a+6378137,2)+Math.pow(6378137,2)-Math.pow((a+6378137)*Math.cos(b)-Math.sqrt(Math.pow(Math.cos(b)*(a+6378137),2)-a*a-12756274*a),2))/(12756274*(a+6378137)))},computeCarthesianDistance:function(a,b){function c(a){var b=h.deg2rad(a.get("latitude")),
c=h.deg2rad(a.get("longitude")),d=Math.cos(b);a=6378137+(a.z||0);return[Math.cos(c)*d*a,Math.sin(b)*a,-Math.sin(c)*d*a]}a=c(a);b=c(b);b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]];return Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2])},longitudeToTimezone:function(a,b){a/=15;return b||(a=Math.round(a)),a},positionToTimezone:function(c,d){c.spatialReference.wkid!==a.WGS84.wkid?b.webMercatorToGeographic(c,!1,m):(m.x=c.x,m.y=c.y);m.z=c.z;d||(d={hours:0,minutes:0,seconds:0});d.hours=k.longitudeToTimezone(m.x,!0);c=d.hours%
1;d.hours-=c;d.minutes=60*c;c=d.minutes%1;return d.minutes-=c,d.seconds=Math.round(60*c),d}};return k})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});!function(d){d.length=function(a,b){var c=a[b],d=a[b+1];a=a[b+2];return Math.sqrt(c*c+d*d+a*a)};d.normalize=function(a,b){var c=a[b],d=a[b+1],e=a[b+2],c=1/Math.sqrt(c*c+d*d+e*e);a[b]*=c;a[b+1]*=c;a[b+2]*=c};d.scale=function(a,b,c){a[b]*=c;a[b+
1]*=c;a[b+2]*=c};d.add=function(a,b,c,d,e,h){void 0===h&&(h=b);e=e||a;e[h]=a[b]+c[d];e[h+1]=a[b+1]+c[d+1];e[h+2]=a[b+2]+c[d+2]};d.subtract=function(a,b,c,d,e,h){void 0===h&&(h=b);e=e||a;e[h]=a[b]-c[d];e[h+1]=a[b+1]-c[d+1];e[h+2]=a[b+2]-c[d+2]}}(h.Vec3Compact||(h.Vec3Compact={}))})},"esri/views/3d/terrain/TerrainConst":function(){define(["require","exports","./TilingScheme","../support/aaBoundingRect"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});!function(a){a[a.MAP=0]="MAP";
a[a.ELEVATION=1]="ELEVATION";a[a.LAYER_CLASS_COUNT=2]="LAYER_CLASS_COUNT"}(h.LayerClass||(h.LayerClass={}));!function(a){a[a.NONE=0]="NONE";a[a.SPLIT=1]="SPLIT";a[a.VSPLITMERGE=2]="VSPLITMERGE";a[a.MERGE=4]="MERGE";a[a.DECODE_ELEVATION=8]="DECODE_ELEVATION";a[a.UPDATE_GEOMETRY=16]="UPDATE_GEOMETRY";a[a.UPDATE_TEXTURE=32]="UPDATE_TEXTURE"}(h.TileUpdateTypes||(h.TileUpdateTypes={}));h.TILE_LOADING_DEBUGLOG=!1;h.MAX_ROOT_TILES=64;h.MAX_TILE_TESSELATION=512;h.ELEVATION_NODATA_VALUE=3.40282347E37;h.noDataValueOpt=
{noDataValue:h.ELEVATION_NODATA_VALUE};h.ELEVATION_DESIRED_RESOLUTION_LEVEL=4;h.TILEMAP_SIZE_EXP=5;h.TILEMAP_SIZE=1<<h.TILEMAP_SIZE_EXP;h.WEBMERCATOR_WORLD_EXTENT=a.create([0,0,0,0]);d.WebMercatorAuxiliarySphere.getExtent(0,0,0,h.WEBMERCATOR_WORLD_EXTENT);h.GEOGRAPHIC_WORLD_EXTENT=a.create([-180,-90,180,90])})},"esri/views/3d/support/aaBoundingRect":function(){define(["require","exports"],function(e,h){function d(a){return a[0]>=a[2]?0:a[2]-a[0]}function a(a){return a[1]>=a[3]?0:a[3]-a[1]}function b(a){return 4===
a.length}Object.defineProperty(h,"__esModule",{value:!0});h.create=function(a){return void 0===a&&(a=h.ZERO),[a[0],a[1],a[2],a[3]]};h.fromExtent=function(a){return[a.xmin,a.ymin,a.xmax,a.ymax]};h.expand=function(a,d,e){void 0===e&&(e=a);var c=d.declaredClass;return"esri.geometry.Extent"===c?(e[0]=Math.min(a[0],d.xmin),e[1]=Math.min(a[1],d.ymin),e[2]=Math.max(a[2],d.xmax),e[3]=Math.max(a[3],d.ymax)):"esri.geometry.Point"===c?(e[0]=Math.min(a[0],d.x),e[1]=Math.min(a[1],d.y),e[2]=Math.max(a[2],d.x),
e[3]=Math.max(a[3],d.y)):b(d)?(e[0]=Math.min(a[0],d[0]),e[1]=Math.min(a[1],d[1]),e[2]=Math.max(a[2],d[2]),e[3]=Math.max(a[3],d[3])):Array.isArray(d)&&(2===d.length||3===d.length)&&(e[0]=Math.min(a[0],d[0]),e[1]=Math.min(a[1],d[1]),e[2]=Math.max(a[2],d[0]),e[3]=Math.max(a[3],d[1])),e};h.allFinite=function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};h.width=d;h.height=a;h.center=function(b,e){return void 0===e&&(e=[0,0]),e[0]=b[0]+d(b)/2,e[1]=b[1]+a(b)/2,e};h.containsPoint=function(a,
b){return b[0]>=a[0]&&b[1]>=a[1]&&b[0]<=a[2]&&b[1]<=a[3]};h.containsPointWithMargin=function(a,b,d){return b[0]>=a[0]-d&&b[1]>=a[1]-d&&b[0]<=a[2]+d&&b[1]<=a[3]+d};h.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};h.offset=function(a,b,d,e){return void 0===e&&(e=a),e[0]=a[0]+b,e[1]=a[1]+d,e[2]=a[2]+b,e[3]=a[3]+d,e};h.setMin=function(a,b,d){return void 0===d&&(d=a),d[0]=b[0],d[1]=b[1],d!==a&&(d[2]=a[2],d[3]=a[3]),d};h.setMax=function(a,
b,d){return void 0===d&&(d=a),d[2]=b[0],d[3]=b[1],d!==a&&(d[0]=a[0],d[1]=a[1]),a};h.set=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a};h.is=b;h.isPoint=function(b){return!(0!==d(b)&&isFinite(b[0])||0!==a(b)&&isFinite(b[1]))};h.equals=function(a,d,e){if(null==a||null==d)return a===d;if(!b(a)||!b(d))return!1;if(e)for(var c=0;c<a.length;c++){if(!e(a[c],d[c]))return!1}else for(c=0;c<a.length;c++)if(a[c]!==d[c])return!1;return!0};h.POSITIVE_INFINITY=[-(1/0),-(1/0),1/0,1/0];h.NEGATIVE_INFINITY=
[1/0,1/0,-(1/0),-(1/0)];h.ZERO=[0,0,0,0]})},"esri/views/3d/terrain/terrainUtilsSpherical":function(){define(["require","exports","./TilingScheme","../../../core/Error"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});h.autoUpdateSkirtsVisibility=function(a,c){};h.checkIfTileInfoSupportedForViewSR=function(b,c,e){c=b.lods.length-1;if(b.spatialReference.isWebMercator){if(!d.makeWebMercatorAuxiliarySphere(c).compatibleWith(b))return new a("tilingscheme:incompatible-global-web-mercator",
"The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!b.spatialReference.isWGS84)return new a("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!d.makeWGS84WithTileSize(b.size[1],c).compatibleWith(b))return new a("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme")}return e&&!b.spatialReference.equals(e)?new a("tilingscheme:spatial-reference-mismatch",
"The tiling scheme does not match the spatial reference of the global scene"):void 0}})},"esri/layers/TileLayer":function(){define("dojo/_base/lang dojo/io-query ../request ../core/urlUtils ../core/promiseUtils ../geometry/SpatialReference ./TiledLayer ./mixins/ArcGISMapService ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./support/arcgisLayers ./support/arcgisLayerUrl".split(" "),function(e,h,d,a,b,c,m,k,l,g,n,u,r){return m.createSubclass([k,l,g,n],{declaredClass:"esri.layers.TileLayer",
_mapsWithAttribution:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},
_attributionServices:["services.arcgisonline.com/arcgis/rest/services","servicesdev.arcgisonline.com/arcgis/rest/services","servicesqa.arcgisonline.com/arcgis/rest/services"],normalizeCtorArgs:function(a,b){return"string"==typeof a?e.mixin({},{url:a},b):a},load:function(){this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service","Map Service"]}).always(this._fetchService.bind(this)))},properties:{operationalLayerType:{get:function(){if(this.capabilities)return-1!==this.capabilities.indexOf("Map")?
"ArcGISTiledMapServiceLayer":"ArcGISTiledImageServiceLayer";var a=this.url||this.portalItem&&this.portalItem.url;return a&&/\/ImageServer(\/|\/?$)/i.test(a)?"ArcGISTiledImageServiceLayer":"ArcGISTiledMapServiceLayer"}},attributionDataUrl:{dependsOn:["parsedUrl"],get:function(){return this._getDefaultAttribution(this._getMapName(this.parsedUrl.path.toLowerCase()))}},popupTemplates:null,tileServers:{dependsOn:["parsedUrl"],value:null,cast:function(b){return Array.isArray(b)?b.map(function(b){return a.urlToObject(b).path}):
null},get:function(){return this._getDefaultTileServers(this.parsedUrl.path)}},type:{value:"tile",json:{read:!1}},spatialReference:{json:{read:{source:["spatialReference","tileInfo"],reader:function(a,b){return a=a||b.tileInfo&&b.tileInfo.spatialReference,a&&c.fromJSON(a)}}}}},getTileUrl:function(a,b,c){var d=this.tileServers,e=this.parsedUrl.query?h.objectToQuery(this.parsedUrl.query):"";this.token&&(e=e+(e?"\x26":"")+"token\x3d"+encodeURIComponent(this.token));this.resampling&&!this.tilemapCache&&
this.supportsBlankTile&&(e=e+(e?"\x26":"")+"blankTile\x3dfalse");this.refreshTimestamp&&(e=e+(e?"\x26":"")+"_ts\x3d"+this.refreshTimestamp);a=(d&&d.length?d[b%d.length]:this.parsedUrl.path)+"/tile/"+a+"/"+b+"/"+c;return a+=e?"?"+e:""},_fetchService:function(){return b.resolve().then(function(){return this.resourceInfo||d(this.parsedUrl.path,{query:e.mixin({f:"json"},this.parsedUrl.query),responseType:"json",callbackParamName:"callback"})}.bind(this)).then(function(a){return a.ssl&&(this.url=this.url.replace(/^http:/i,
"https:")),this.read(a.data,{origin:"service",url:this.parsedUrl}),10.1!==this.version||r.isHostedAgolService(this.url)?void 0:u.fetchServerVersion(this.url).then(function(a){this.read({currentVersion:a})}.bind(this)).otherwise(function(){})}.bind(this))},_getMapName:function(a){return(a=a.match(/^(?:https?:)?\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i))&&a[2]},_getDefaultAttribution:function(b){if(b){var c;b=b.toLowerCase();for(var d=0,e=this._mapsWithAttribution.length;e>
d;d++)if(c=this._mapsWithAttribution[d],-1<c.toLowerCase().indexOf(b))return a.makeAbsolute("//static.arcgis.com/attribution/"+c)}},_getDefaultTileServers:function(a){var b=-1!==a.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),c=-1!==a.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return b||c?[a,a.replace(b?/server\.arcgisonline/i:/services\.arcgisonline/i,b?"services.arcgisonline":"server.arcgisonline")]:[]}})})},"esri/layers/support/arcgisLayers":function(){define("require exports dojo/_base/lang dojo/when ./arcgisLayerUrl ../../core/promiseUtils ../../core/requireUtils ../../request ../../core/Error ./arcgisLayerUrl".split(" "),
function(e,h,d,a,b,c,m,k,l,g){function n(a,b){return a.sublayerIds.map(function(c){return new a.Constructor(d.mixin({},b,{layerId:c,sublayerTitleMode:"service-name"}))})}function u(b){var d=g.parse(b);if(!d)return c.reject(new l("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:b}));var h;h=d.serverType;var k=d.sublayer,n={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(h){case "MapServer":h=null!=k?"FeatureLayer":
t(b).then(function(a){return a?"TileLayer":"MapImageLayer"});break;case "ImageServer":h=q(b).then(function(a){var b=a.tileInfo&&a.tileInfo.format;return a.tileInfo?b&&"LERC"===b.toUpperCase()&&a.cacheType&&"elevation"===a.cacheType.toLowerCase()?"ElevationLayer":"TileLayer":"ImageryLayer"});break;case "SceneServer":h=q(d.url.path).then(function(a){var b={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer"};return a&&Array.isArray(a.layers)&&
0<a.layers.length&&(a=a.layers[0].layerType,null!=b[a])?b[a]:"SceneLayer"});break;default:h=n[h]}var u,w={FeatureLayer:!0,SceneLayer:!0},x={parsedUrl:d,Constructor:null,sublayerIds:null};return a(h).then(function(a){return u=a,w[a]&&null==k?r(b).then(function(a){1!==a.length&&(x.sublayerIds=a)}):void 0}).then(function(){return m.when(e,v+"/"+u)}).then(function(a){return x.Constructor=a,x})}function r(a){return q(a).then(function(a){return a&&Array.isArray(a.layers)?a.layers.map(function(a){return a.id}).reverse():
[]})}function t(a){return q(a).then(function(a){return a.tileInfo})}function w(a,b){a=a.Constructor.prototype.declaredClass;return"esri.layers.FeatureLayer"===a||"esri.layers.StreamLayer"===a?d.mixin({returnZ:!0,outFields:["*"]},b):b}function q(a){return k(a,{responseType:"json",callbackParamName:"callback",query:{f:"json"}}).then(function(a){return a.data})}Object.defineProperty(h,"__esModule",{value:!0});var v="..";h.fromUrl=function(a){return u(a.url).then(function(b){var f=w(b,d.mixin({},a.properties,
{url:a.url}));return b.sublayerIds?m.when(e,v+"/GroupLayer").then(function(a){var d=new a({title:b.parsedUrl.title});return n(b,f).forEach(function(a){return d.add(a)}),c.resolve(d)}):c.resolve(new b.Constructor(f))})};h.fetchServerVersion=function(a){if(!b.test(a))return c.reject();a=a.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return k(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){return a.data&&a.data.currentVersion?a.data.currentVersion:c.reject()})}})},
"esri/layers/BaseTileLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../request ../core/Error ../geometry/Extent ../geometry/SpatialReference ./Layer ./support/TileInfo ../core/accessorSupport/decorators".split(" "),function(e,h,d,a,b,c,m,k,l,g,n){var u={id:"0/0/0",level:0,row:0,col:0,extent:null};e=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;return b.tileInfo=g.create({spatialReference:k.WebMercator,size:256}),
b.type="base-tile",b.fullExtent=new m(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,k.WebMercator),b.spatialReference=k.WebMercator,b}return d(e,a),e.prototype.getTileBounds=function(a,b,c,d){d=d||[0,0,0,0];return u.level=a,u.row=b,u.col=c,u.extent=d,this.tileInfo.updateTileInfo(u),u.extent=null,d},e.prototype.getTileUrl=function(a,b,d){throw new c("basetilelayer:gettileurl-not-implemented","getTileUrl() is not implemented");},e.prototype.fetchTile=function(a,c,d,e){a=this.getTileUrl(a,
c,d);return"string"==typeof a?b(a,{responseType:"image",allowImageDataAccess:e&&e.allowImageDataAccess||!1}).then(function(a){return a.data}):a.then(function(a){return b(a,{responseType:"image"})}).then(function(a){return a.data})},e}(n.declared(l));return a([n.shared({"2d":"../views/2d/layers/TiledLayerView2D","3d":"../views/3d/layers/TiledLayerView3D"})],e.prototype,"viewModulePaths",void 0),a([n.property({type:g})],e.prototype,"tileInfo",void 0),a([n.property({readOnly:!0,value:"base-tile"})],
e.prototype,"type",void 0),a([n.property()],e.prototype,"fullExtent",void 0),a([n.property()],e.prototype,"spatialReference",void 0),e=a([n.subclass("esri.layers.BaseTileLayer")],e)})},"esri/layers/BaseElevationLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../geometry/Extent ../geometry/SpatialReference ./Layer ./support/TileInfo ../core/accessorSupport/decorators".split(" "),function(e,h,d,a,b,c,m,k,l,g){var n={id:"0/0/0",
level:0,row:0,col:0,extent:null};e=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;return b.tileInfo=l.create({spatialReference:m.WebMercator,size:256}),b.fullExtent=new c(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,m.WebMercator),b.spatialReference=m.WebMercator,b.type="base-elevation",b}return d(e,a),e.prototype.getTileBounds=function(a,b,c,d){d=d||[0,0,0,0];return n.level=a,n.row=b,n.col=c,n.extent=d,this.tileInfo.updateTileInfo(n),n.extent=null,
d},e.prototype.fetchTile=function(a,c,d,e){throw new b("BaseElevationLayer:fetchtile-not-implemented","fetchTile() is not implemented");},e}(g.declared(k));return a([g.shared({"3d":"../views/3d/layers/ElevationLayerView3D"})],e.prototype,"viewModulePaths",void 0),a([g.property({type:l})],e.prototype,"tileInfo",void 0),a([g.property()],e.prototype,"fullExtent",void 0),a([g.property()],e.prototype,"spatialReference",void 0),a([g.property({readOnly:!0,value:"base-elevation"})],e.prototype,"type",void 0),
e=a([g.subclass("esri.layers.BaseElevationLayer")],e)})},"esri/layers/VectorTileLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../core/accessorSupport/decorators ../core/Error ../core/MultiOriginJSONSupport ../core/urlUtils ../core/promiseUtils ../core/lang ../request ../geometry/Extent ../geometry/SpatialReference ../portal/support/jsonContext ./TiledLayer ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./mixins/ArcGISCachedService ./support/TileInfo ./support/vectorTileLayerLoader ../views/vectorTiles/style/StyleRepository ../views/vectorTiles/SchemaHelper".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t,w,q,v,x,f,p,z,y,A,B){e=function(a){function c(b,c){b=a.call(this)||this;return b.currentStyleInfo=null,b.fullExtent=null,b.operationalLayerType="VectorTileLayer",b.tileInfo=null,b.type="vector-tile",b.url=null,b}return d(c,a),c.prototype.normalizeCtorArgs=function(a,c){return"string"==typeof a?b.mixin({},{url:a},c):a},c.prototype.load=function(){var a=this,b=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1}).then(function(){if(a.portalItem&&
a.portalItem.id){var b=a.portalItem.itemUrl+"/resources/styles/root.json";return u(b,{query:{f:"json"}}).then(function(c){c.data&&a.read({url:b},w.createForItem(a.portalItem))})}}).always(function(){return a.loadStyle()});return this.addResolvingPromise(b),this},Object.defineProperty(c.prototype,"attributionDataUrl",{get:function(){var a=this.currentStyleInfo;return(a=a&&a.serviceUrl&&l.urlToObject(a.serviceUrl))?this._getDefaultAttribution(a.path):null},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,
"serviceUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"spatialReference",{get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"styleUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null},enumerable:!0,configurable:!0}),c.prototype.writeStyleUrl=function(a,b){a&&l.isProtocolRelative(a)&&
(a="https:"+a);a&&!n.endsWith(a,"root.json")&&(a=l.join(a,"root.json"));b.styleUrl=a},c.prototype.readTileIndexType=function(a,b){return b.type},c.prototype.readTileIndexUrl=function(a,b){return l.join(this.serviceUrl,b.tileMap)},c.prototype.readTileServers=function(a,b){var c=this;a=b.tiles;return this.serviceUrl&&a.forEach(function(a,b,d){d[b]=l.join(c.serviceUrl,a)}),a},c.prototype.readVersion=function(a,b){return b.version?parseFloat(b.version):parseFloat(b.currentVersion)},c.prototype.readTileInfo256=
function(a,b){return z.fromJSON(B.create256x256CompatibleTileInfo(this.tileInfo.toJSON()))},c.prototype.readCompatibleTileInfo512=function(a,b){return z.fromJSON(B.create512x512CompatibleTileInfo(this.tileInfo.toJSON()))},c.prototype.loadStyle=function(a){a=a||this.url;if(this._loadingPromise&&"string"==typeof a&&this.url===a)return this._loadingPromise;var b=this._loadingPromise;return this._loadingPromise=this._getSourceAndStyle(a),b&&!b.isFulfilled()&&b.cancel(),this._loadingPromise},c.prototype.getTileUrl=
function(a,b,c){var d=this.tileServers[b%this.tileServers.length];return d=d.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{x\}/gi,c.toString())},c.prototype.write=function(a,b){return b&&b.origin&&!this.styleUrl?(b.messages&&b.messages.push(new m("vectortilelayer:unsupported","VectorTileLayer ("+this.title+", "+this.id+") with style defined by JSON only are not supported",{layer:this})),null):this.inherited(arguments,[a,b])},c.prototype._getSourceAndStyle=function(a){var b=
this;return a?y.loadMetadata(a).then(function(a){b._set("currentStyleInfo",{serviceUrl:a.serviceUrl,styleUrl:a.styleUrl,spriteUrl:a.spriteUrl,glyphsUrl:a.glyphsUrl,style:a.style,layerDefinition:a.layerDefinition});b._set("styleRepository",new A(a.style,a));b.read(a.layerDefinition)}):g.reject(Error("invalid style!"))},c.prototype._getDefaultAttribution=function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);
a=["World_Basemap","World_Basemap_WGS84"];if(b){var c=b[3]&&b[3].toLowerCase();if(c)for(var b=b[2]||"",d=0;d<a.length;d++){var e=a[d];if(-1<e.toLowerCase().indexOf(c))return l.normalize("//static.arcgis.com/attribution/Vector"+b+"/"+e)}}},c}(c.declared(q,v,x,f,k,p));return a([c.shared({"2d":"../views/2d/layers/VectorTileLayerView2D","3d":"../views/3d/layers/VectorTileLayerView3D"})],e.prototype,"viewModulePaths",void 0),a([c.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],e.prototype,"attributionDataUrl",
null),a([c.property({readOnly:!0})],e.prototype,"currentStyleInfo",void 0),a([c.property({type:r,readOnly:!0})],e.prototype,"fullExtent",void 0),a([c.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],e.prototype,"serviceUrl",null),a([c.property({type:t,dependsOn:["tileInfo"],readOnly:!0})],e.prototype,"spatialReference",null),a([c.property({readOnly:!0})],e.prototype,"styleRepository",void 0),a([c.property({readOnly:!0,dependsOn:["currentStyleInfo"],json:{write:{ignoreOrigin:!0}}})],e.prototype,
"styleUrl",null),a([c.writer("styleUrl")],e.prototype,"writeStyleUrl",null),a([c.property({readOnly:!0})],e.prototype,"tileIndexType",void 0),a([c.reader("tileIndexType",["tileIndexType","type"])],e.prototype,"readTileIndexType",null),a([c.property({readOnly:!0})],e.prototype,"tileIndexUrl",void 0),a([c.reader("tileIndexUrl",["tileIndexUrl","tileMap"])],e.prototype,"readTileIndexUrl",null),a([c.property({readOnly:!0,type:z})],e.prototype,"tileInfo",void 0),a([c.property({readOnly:!0})],e.prototype,
"tileServers",void 0),a([c.reader("tileServers",["tiles"])],e.prototype,"readTileServers",null),a([c.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],e.prototype,"type",void 0),a([c.property({json:{origins:{webDocument:{read:{source:"styleUrl"}},portalItem:{read:{source:"url"}}},write:!1,read:!1}})],e.prototype,"url",void 0),a([c.property({readOnly:!0})],e.prototype,"version",void 0),a([c.reader("version",["version","currentVersion"])],e.prototype,"readVersion",null),a([c.property({readOnly:!0})],
e.prototype,"tileInfo256",void 0),a([c.reader("tileInfo256",["tileInfo"])],e.prototype,"readTileInfo256",null),a([c.property({readOnly:!0})],e.prototype,"compatibleTileInfo512",void 0),a([c.reader("compatibleTileInfo512",["tileInfo"])],e.prototype,"readCompatibleTileInfo512",null),e=a([c.subclass("esri.layers.VectorTileLayer")],e)})},"esri/portal/support/jsonContext":function(){define(["require","exports","../Portal","../../core/urlUtils"],function(e,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});
h.createForItem=function(b){return{origin:"portal-item",url:a.urlToObject(b.itemUrl),portal:b.portal||d.getDefault()}}})},"esri/layers/support/vectorTileLayerLoader":function(){define("require exports dojo/has dojo/_base/lang ../../core/promiseUtils ../../core/urlUtils ../../config ../../request".split(" "),function(e,h,d,a,b,c,m,k){function l(a){if(a){var b=c.getOrigin(a);return c.canUseXhr(b)||-1!==q.indexOf(b)||q.push(b),a}}function g(a,b,d){if(null!=b.sources){d&&-1!==d.path.indexOf("root.json")&&
(d.path=d.path.substr(0,d.path.indexOf("root.json")),a.styleUrl=d.path);var e=r(b,d),f=b.sprite,g=b.glyphs;e&&e.url&&(e=d&&d.path?d.path:e.url,b.sprite&&!c.isAbsolute(b.sprite)&&(f=c.join(e,b.sprite)),b.glyphs&&!c.isAbsolute(b.glyphs)&&(g=c.join(e,b.glyphs)));return a.style=b,a.spriteUrl=f,a.glyphsUrl=g,u(a,b,d)}return b.hasOwnProperty("tileInfo")?(a.layerDefinition=b,a.serviceUrl=d.path,n(a,b,d)):void 0}function n(a,b,d){if(w&&!b.hasOwnProperty("defaultStyles"))throw Error("Service definition must have 'defaultStyles' element!");
b=b.defaultStyles;return c.isAbsolute(b)?a.styleUrl=c.normalize(b):a.styleUrl=c.normalize(c.join(d.path,b)),l(a.styleUrl),k(c.join(a.styleUrl,"root.json"),{responseType:"json"}).then(function(b){var d=b.data.sprite,e=b.data.glyphs;return d&&!c.isAbsolute(d)&&(d=c.join(a.styleUrl,d)),e&&!c.isAbsolute(e)&&(e=c.join(a.styleUrl,e)),a.spriteUrl=d,a.glyphsUrl=e,a.style=b.data,b.data})}function u(a,d,e){d=r(d,e);return d||b.reject("Source isn't available in the syle object!"),d.url?(a.serviceUrl=d.url,c.isAbsolute(a.serviceUrl)||
(a.serviceUrl=c.join(e.path,a.serviceUrl)),l(a.serviceUrl),k(a.serviceUrl,{query:{f:"json"},responseType:"json"}).then(function(b){return a.layerDefinition=t(b.data),a})):(a.layerDefinition=t(d),b.resolve(a))}function r(a,b){if(!a.sources)return null;var d=a.sources;a=null;if(d.esri){if(a=d.esri,b&&a.url&&!c.isAbsolute(a.url))d=b.path.substring(0,b.path.lastIndexOf("/")),a.url=c.join(d,a.url)}else{for(var e=0,g=Object.keys(d);e<g.length;e++)if(b=g[e],-1!==b.toLocaleLowerCase().indexOf("street")&&
"vector"===a.type){a=d[b];break}if(!a)for(e=0,g=Object.keys(d);e<g.length&&(b=g[e],a=d[b],"vector"!==a.type);e++);}return a}function t(a){if(a.hasOwnProperty("tileInfo"))return a;for(var b={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},c=(b.xmax-b.xmin)/512,d=[],e=a.hasOwnProperty("minzoom")?parseFloat(a.minzoom):0,g=a.hasOwnProperty("maxzoom")?parseFloat(a.maxzoom):16;g>e;e++){var h=c/Math.pow(2,e);d.push({level:e,
scale:Math.floor(3779.527559055118*h),resolution:h})}return a.tiles.forEach(l),{capabilities:"TilesOnly",initialExtent:b,fullExtent:b,minScale:d[0].scale,maxScale:d[d.length-1].scale,tiles:a.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:d,spatialReference:{wkid:102100}}}}Object.defineProperty(h,"__esModule",{value:!0});var w=d("dojo-debug-messages"),q=m.defaults&&m.defaults.io.corsEnabledServers||m.request.corsEnabledServers;h.loadMetadata=
function(d){if(!d)return b.reject("invalid input URL!");var e={layerDefinition:null,parsedUrl:null,serviceUrl:null,style:null,styleUrl:null,url:null,spriteUrl:null,glyphsUrl:null};if("string"!=typeof d)return g(e,d,null).then(function(){return e});d=e.url=c.normalize(d);var f=e.parsedUrl=c.urlToObject(d);return l(d),k(f.path,{responseType:"json",query:a.mixin({f:"json"},f.query)}).then(function(a){return g(e,a.data,f)}).then(function(){return e})}})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require",
"exports","./StyleLayer","dojo/has"],function(e,h,d,a){return function(){function b(c,d){if(this.styleJSON=c,this.version=parseFloat(c.version),this.sprite=d?d.spriteUrl:c.sprite,this.glyphs=d?d.glyphsUrl:c.glyphs,a("stable-symbol-rendering")){var e=(c.layers||[]).filter(function(a){return a.layout&&a.layout["text-font"]})[0];e&&(c.layers||[]).forEach(function(a){a.layout&&a.layout["text-font"]&&(a.layout["text-font"]=e.layout["text-font"])})}this.layers=(c.layers||[]).map(b._create);this._identifyRefLayers()}
return b.prototype._identifyRefLayers=function(){for(var a=[],b=[],d=0,e=this.layers;d<e.length;d++){var g=e[d];if(1===g.type){var h=g.sourceLayer,h=h+("|"+JSON.stringify(g.minzoom)),h=h+("|"+JSON.stringify(g.maxzoom)),h=h+("|"+JSON.stringify(g.filter));a.push({key:h,layer:g})}2===g.type&&(h=g.sourceLayer,h+="|"+JSON.stringify(g.minzoom),h+="|"+JSON.stringify(g.maxzoom),h+="|"+JSON.stringify(g.filter),h+="|"+JSON.stringify(g.layout["line-cap"]),h+="|"+JSON.stringify(g.layout["line-join"]),b.push({key:h,
layer:g}))}this._assignRefLayers(a);this._assignRefLayers(b)},b.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var b,c,d=a.length,e=0;d>e;e++){var h=a[e];if(h.key===b)h.layer.refLayerId=c;else if(b=h.key,c=h.layer.id,1===h.layer.type&&!h.layer.hasPaintProperty("fill-outline-color"))for(var u=e+1;d>u;u++){var r=a[u];if(r.key!==b)break;if(r.layer.hasPaintProperty("fill-outline-color")){a[e]=r;a[u]=h;c=r.layer.id;break}}}},b._create=function(a,
b,e){b=1-1/(e.length+1)*(1+b);switch(a.type){case "background":return new d.StyleLayer(0,a,b);case "fill":return new d.StyleLayer(1,a,b);case "line":return new d.StyleLayer(2,a,b);case "symbol":return new d.StyleLayer(3,a,b);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":throw Error("Unsupported vector tile circle layer");}throw Error("Unknown vector tile layer");},b}()})},"esri/views/vectorTiles/style/StyleLayer":function(){define(["require","exports","./StyleDefinition",
"./StyleProperty","./Filter"],function(e,h,d,a,b){Object.defineProperty(h,"__esModule",{value:!0});e=function(){function c(a,b,c){switch(this.type=a,this.id=b.id,this.source=b.source,this.sourceLayer=b["source-layer"],this.minzoom=b.minzoom,this.maxzoom=b.maxzoom,this.filter=b.filter,this.layout=b.layout,this.paint=b.paint,this.z=c,a){case 0:this._layoutDefinition=d.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=d.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=
d.StyleDefinition.fillLayoutDefinition;this._paintDefinition=d.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=d.StyleDefinition.lineLayoutDefinition;this._paintDefinition=d.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=d.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=d.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}return c.prototype.getFeatureFilter=
function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=b.createFilter(this.filter)},c.prototype.hasLayoutProperty=function(a){var b=this._layoutProperties;return b&&b[a]?!0:!1},c.prototype.hasPaintProperty=function(a){var b=this._paintProperties;return b?void 0!==b[a]:!1},c.prototype.getLayoutValue=function(a,b){var c,d=this._layoutProperties;d&&(d=d[a])&&(c=d.getValue(b));a=this._layoutDefinition[a];return void 0===c&&(c=a["default"]),"enum"===a.type&&(c=a.values.indexOf(c)),
c},c.prototype.getPaintValue=function(a,b){var c,d=this._paintProperties;d&&(d=d[a])&&(c=d.getValue(b));a=this._paintDefinition[a];return void 0===c&&(c=a["default"]),"enum"===a.type&&(c=a.values.indexOf(c)),c},c.prototype._parseLayout=function(b){var c={},d;for(d in b)c[d]=new a(this._layoutDefinition[d],b[d]);return c},c.prototype._parsePaint=function(b){var c={},d;for(d in b)c[d]=new a(this._paintDefinition[d],b[d]);return c},c}();h.StyleLayer=e;e=function(){return function(a,b){this.cap=a.getLayoutValue("line-cap",
b);this.join=a.getLayoutValue("line-join",b);this.miterLimit=a.getLayoutValue("line-miter-limit",b);this.roundLimit=a.getLayoutValue("line-round-limit",b)}}();h.LineLayout=e;e=function(){return function(a,b,d){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b);this.optional=a.getLayoutValue("icon-optional",b);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b);this.size=a.getLayoutValue("icon-size",b);this.rotate=
a.getLayoutValue("icon-rotate",b);this.padding=a.getLayoutValue("icon-padding",b);this.keepUpright=a.getLayoutValue("icon-keep-upright",b);this.offset=a.getLayoutValue("icon-offset",b);d&&1===this.rotationAlignment&&!a.hasLayoutProperty("icon-rotation-alignment")&&(this.rotationAlignment=0)}}();h.IconLayout=e;e=function(){return function(a,b,d){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b);this.optional=a.getLayoutValue("text-optional",
b);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b);this.font=a.getLayoutValue("text-font",b);this.maxWidth=a.getLayoutValue("text-max-width",b);this.lineHeight=a.getLayoutValue("text-line-height",b);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b);this.justify=a.getLayoutValue("text-justify",b);this.anchor=a.getLayoutValue("text-anchor",b);this.maxAngle=a.getLayoutValue("text-max-angle",b);this.size=a.getLayoutValue("text-size",b);this.rotate=a.getLayoutValue("text-rotate",
b);this.padding=a.getLayoutValue("text-padding",b);this.keepUpright=a.getLayoutValue("text-keep-upright",b);this.transform=a.getLayoutValue("text-transform",b);this.offset=a.getLayoutValue("text-offset",b);d&&1===this.rotationAlignment&&!a.hasLayoutProperty("text-rotation-alignment")&&(this.rotationAlignment=0)}}();h.TextLayout=e})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});e=function(){return function(){}}();
e.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};e.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};e.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number",
"default":1.05}};e.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",
values:["map","viewport"],"default":"viewport"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!0},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},
"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number",
"default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};e.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,
"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};e.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};
e.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",
value:"number","default":[]},"line-pattern":{type:"string"}};e.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},
"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};e.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,
"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};e.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",
minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};h.StyleDefinition=e})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(e,h,d,a){return function(){function b(a,d){switch(a.type){case "number":a=
!0;break;case "color":a=!0;d=b._parseColor(d);break;case "array":a="number"===a.value;break;default:a=!1}a?this.getValue=this._interpolate(d):this.getValue=this._piecewise(d)}return b.prototype._piecewise=function(a){var b=a.stops;return b?function(a){var c=b.length;if(0!==c){for(var d=0,e=0;c>e&&b[e][0]<=a;e++)d=e;return b[d][1]}}:function(){return a}},b.prototype._interpolate=function(b){var c=b.stops;if(c){var d=b.base||1;return function(b){for(var e,h,k=c.length,l=0;k>l;l++){var m=c[l];if(!(m[0]<=
b)){h=m;break}e=m}if(e&&h){l=h[0]-e[0];b-=e[0];b=1===d?b/l:(Math.pow(d,b)-1)/(Math.pow(d,l)-1);if(Array.isArray(e[1])){e=e[1];h=h[1];k=[];for(l=0;l<e.length;l++)k.push(a.interpolate(e[l],h[l],b));return k}return a.interpolate(e[1],h[1],b)}return e?e[1]:h?h[1]:void 0}}return function(){return b}},b._parseColor=function(a){if(Array.isArray(a))return a;if("string"==typeof a)return a=new d(a),[a.r/255,a.g/255,a.b/255,a.a||1];if(a&&a.stops)return a.stops=a.stops.map(function(a){return[a[0],b._parseColor(a[1])]}),
a;throw Error("Incorrect color definition "+a);},b}()})},"esri/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(e,h){e=function(){function d(a,b,c){this._op=a;"$type"===b?(c instanceof Array?this._val=c.map(function(a){return d._types.indexOf(a)}):this._val=d._types.indexOf(c),this._op+=11):(this._key=b,this._val=c)}return d.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==
this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=this._val;case 6:return a.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var b=0,c=this._val;b<c.length;b++){var d=c[b];if(d.filter(a))return!0}return!1;case 10:b=0;for(c=this._val;b<c.length;b++)if(d=c[b],!d.filter(a))return!1;return!0;case 11:b=0;for(c=this._val;b<
c.length;b++)if(d=c[b],d.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}},d.createFilter=function(a){if(!a)return new d(0,void 0,!0);var b=a[0];if(1>=a.length)return new d(0,void 0,"any"!==b);switch(b){case "\x3d\x3d":return new d(1,
a[1],a[2]);case "!\x3d":return new d(2,a[1],a[2]);case "\x3e":return new d(4,a[1],a[2]);case "\x3c":return new d(3,a[1],a[2]);case "\x3e\x3d":return new d(6,a[1],a[2]);case "\x3c\x3d":return new d(5,a[1],a[2]);case "in":return new d(7,a[1],a.slice(2));case "!in":return new d(8,a[1],a.slice(2));case "any":return new d(9,void 0,a.slice(1).map(d.createFilter.bind(this)));case "all":return new d(10,void 0,a.slice(1).map(d.createFilter.bind(this)));case "none":return new d(11,void 0,a.slice(1).map(d.createFilter.bind(this)));
default:throw Error("invalid operator: "+b);}},d}();return e._types=["Unknown","Point","LineString","Polygon"],e})},"esri/views/3d/layers/ElevationLayerView3D":function(){define(["../../../core/declare","../../../core/promiseUtils","../../../core/Error","./TiledLayerView3D"],function(e,h,d,a){return e(a,{declaredClass:"esri.views.3d.layers.ElevationLayerView3D",properties:{isTransparent:{readOnly:!0,get:function(){return!0}}},initialize:function(){var a=this.get("view.map.ground.layers");a&&-1!==
a.indexOf(this.layer)||this.addResolvingPromise(h.reject(new d("layerview:elevation-layer-only","3D elevation layer '"+this.layer.id+"' can only be added in the map ground")))}})})},"esri/views/3d/layers/TiledLayerView3D":function(){define("dojo/request/xhr ../../../core/declare ../../../core/watchUtils ../../../core/promiseUtils ../../../core/Error ../../../layers/support/arcgisLayerUrl ../../layers/LayerView ../terrain/terrainUtils ./support/LayerViewUpdatingPercentage".split(" "),function(e,h,
d,a,b,c,m,k,l){function g(a){var b=null,c=a.search(/\/rest\/services\//i);return 0<c&&(b=a.substring(0,c+6)),b}return h([m,l],{declaredClass:"esri.views.3d.layers.TiledLayerView3D",properties:{formatIsTransparent:{dependsOn:["layer.tileInfo.format"],get:function(){return"jpg"!==this.get("layer.tileInfo.format")}},isTransparent:{dependsOn:["fullOpacity","formatIsTransparent"],readOnly:!0,get:function(){return 1>this.fullOpacity||this.formatIsTransparent}}},_numUpdating:0,_maxNumUpdating:0,_isUpdating:!1,
minDataLevel:0,maxDataLevel:1/0,initialize:function(){var c=this.layer.tileInfo,e=k.checkIfTileInfoSupportedForView(c,this.layer.fullExtent,this.view.spatialReference,this.view.basemapTerrain.manifold);if(e){var g={layer:this.layer,error:e};switch(e.name){case "tilingscheme:local-gcs-not-supported":e=new b("layerview:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes",g);break;case "tilingscheme:spatial-reference-mismatch":case "tilingscheme:global-unsupported-spatial-reference":e=
new b("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",g);break;default:e=new b("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",g)}this.addResolvingPromise(a.reject(e))}else e=d.whenTrueOnce(this.view,"basemapTerrain.tilingSchemeLocked").then(function(){if(!this.view.basemapTerrain.tilingScheme.compatibleWith(c)){var d=new b("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface");
return a.reject(d)}}.bind(this)),this.addResolvingPromise(e);this._checkServiceVersionCompatibility();var h=1/0,l=0;c.lods.forEach(function(a){h=Math.min(a.level,h);l=Math.max(a.level,l)});l=Math.min(l,k.getKnownTiledServiceLevelCap(this.layer.url));this.minDataLevel=h;this.maxDataLevel=l},getTileUrl:function(a,b,c){return this.layer.getTileUrl(a,b,c)},_checkServiceVersionCompatibility:function(){if(!c.isHostedAgolService(this.layer.url))if(10.22>this.layer.version){var d=new b("layerview:service-version-too-old",
"Tiled Map Layers on servers prior to 10.2.2 are not supported. Detected version: "+this.layer.version,{minVersion:10.22,detectedVersion:this.layer.version});this.addResolvingPromise(a.reject(d))}else if(10.22===this.layer.version&&!c.isHostedSecuredProxyService(this.layer.url,this.layer.get("portalItem.id"))){var d=g(this.layer.url),h=new b("tiledlayerview3d:service-missing-cors-patch","Tiled Map Layers from 10.2.2 servers are only supported if all server updates have been applied."),d=e(d+"self?f\x3djson",
{headers:{"X-Requested-With":null},timeout:1E4,handleAs:"json"}).then(function(a){if(!a||a.error)throw h;}).otherwise(function(){throw h;});this.addResolvingPromise(d)}},_evaluateUpdatingState:function(a){this._isUpdating=!!a;this.notifyChange("updating")},isUpdating:function(){return this._isUpdating}})})},"esri/views/3d/webgl-engine/lib/FloatingBoxLocalOriginFactory":function(){define(["require","exports","./gl-matrix"],function(e,h,d){var a=d.vec3d;e=function(){function c(a,b){this._origins=[];
this._boxSize=a;this._maxNumOrigins=b}return c.prototype.getOrigin=function(d){for(var e,h=this._origins.length,g=!1,m=Number.MAX_VALUE,u=0;h>u;u++){var r=this._origins[u];a.subtract(d,r.vec3,b);b[0]=Math.abs(b[0]);b[1]=Math.abs(b[1]);b[2]=Math.abs(b[2]);var t=b[0]+b[1]+b[2];m>t&&(e=r,m=t,g=b[0]<this._boxSize&&b[1]<this._boxSize&&b[2]<this._boxSize)}g||e&&null!=this._maxNumOrigins&&!(this._origins.length<this._maxNumOrigins)||(e=c.OFFSET,e={vec3:[d[0]+e,d[1]+e,d[2]+e],id:c.ORIGIN_PREFIX+this._origins.length},
this._origins.push(e));return e},c}();e.OFFSET=1.11;e.ORIGIN_PREFIX="fb_";var b=a.create();return e})},"esri/views/3d/webgl-engine/lib/gl-matrix":function(){define([],function(){var e={};return function(e,d){d(e,!0);d(e,!1)}(e,function(e,d){var a={};!function(){if("undefined"!=typeof Float32Array){var b=new Float32Array(1),c=new Int32Array(b.buffer);a.invsqrt=function(a){b[0]=a;c[0]=1597463007-(c[0]>>1);var d=b[0];return d*(1.5-.5*a*d*d)}}else a.invsqrt=function(a){return 1/Math.sqrt(a)}}();var b=
Array;"undefined"!=typeof Float32Array&&(b=d?Float32Array:Array);var c={create:function(a){var c=new b(3);return a?(c[0]=a[0],c[1]=a[1],c[2]=a[2]):c[0]=c[1]=c[2]=0,c},createFrom:function(a,c,d){var e=new b(3);return e[0]=a,e[1]=c,e[2]=d,e},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},set3:function(a,b,c,d){return d[0]=a,d[1]=b,d[2]=c,d},add:function(a,b,c){return c&&a!==c?(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c):(a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a)},subtract:function(a,b,c){return c&&
a!==c?(c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c):(a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a)},multiply:function(a,b,c){return c&&a!==c?(c[0]=a[0]*b[0],c[1]=a[1]*b[1],c[2]=a[2]*b[2],c):(a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a)},max:function(a,b,c){return c[0]=Math.max(a[0],b[0]),c[1]=Math.max(a[1],b[1]),c[2]=Math.max(a[2],b[2]),c},min:function(a,b,c){return c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],
b},scale:function(a,b,c){return c&&a!==c?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c):(a[0]*=b,a[1]*=b,a[2]*=b,a)},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1];a=a[2];var e=Math.sqrt(c*c+d*d+a*a);return e?1===e?(b[0]=c,b[1]=d,b[2]=a,b):(e=1/e,b[0]=c*e,b[1]=d*e,b[2]=a*e,b):(b[0]=0,b[1]=0,b[2]=0,b)},cross:function(a,b,c){c||(c=a);var d=a[0],e=a[1];a=a[2];var f=b[0],g=b[1];b=b[2];return c[0]=e*b-a*g,c[1]=a*f-d*b,c[2]=d*g-e*f,c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*
a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1];a=a[2]-b[2];return(b=Math.sqrt(d*d+e*e+a*a))?(b=1/b,c[0]=d*b,c[1]=e*b,c[2]=a*b,c):(c[0]=0,c[1]=0,c[2]=0,c)},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d},dist:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+d*d+a*a)},dist2:function(a,
b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return c*c+d*d+a*a}},h=null,k=new b(4);c.unproject=function(a,b,c,d,e){e||(e=a);h||(h=w.create());var f=h;return k[0]=2*(a[0]-d[0])/d[2]-1,k[1]=2*(a[1]-d[1])/d[3]-1,k[2]=2*a[2]-1,k[3]=1,w.multiply(c,b,f),w.inverse(f)?(w.multiplyVec4(f,k),0===k[3]?null:(e[0]=k[0]/k[3],e[1]=k[1]/k[3],e[2]=k[2]/k[3],e)):null};var l=c.createFrom(1,0,0),g=c.createFrom(0,1,0),n=c.createFrom(0,0,1);c.rotationTo=function(a,b,d){d||(d=q.create());var e=c.dot(a,b),f=c.create();if(1<=
e)q.set(v,d);else if(-.999999>e)c.cross(l,a,f),1E-6>f.length&&c.cross(g,a,f),1E-6>f.length&&c.cross(n,a,f),c.normalize(f),q.fromAxisAngle(f,Math.PI,d);else{var e=Math.sqrt(2*(1+e)),h=1/e;c.cross(a,b,f);d[0]=f[0]*h;d[1]=f[1]*h;d[2]=f[2]*h;d[3]=.5*e;q.normalize(d)}return 1<d[3]?d[3]=1:-1>d[3]&&(d[3]=-1),d};var u=c.create(),r=c.create();c.project=function(a,b,d,e){e||(e=a);c.direction(b,d,u);c.subtract(a,b,r);a=c.dot(u,r);c.scale(u,a,e);c.add(e,b,e)};c.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+
"]"};var t={create:function(a){var c=new b(9);return a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8]):c[0]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=0,c},createFrom:function(a,c,d,e,g,h,k,l,m){var f=new b(9);return f[0]=a,f[1]=c,f[2]=d,f[3]=e,f[4]=g,f[5]=h,f[6]=k,f[7]=l,f[8]=m,f},determinant:function(a){var b=a[3],c=a[4],d=a[5],e=a[6],f=a[7],g=a[8];return a[0]*(g*c-d*f)+a[1]*(-g*b+d*e)+a[2]*(f*b-c*e)},inverse:function(a,b){var c,d=a[0],e=a[1],f=a[2],g=a[3],
h=a[4],k=a[5],l=a[6],m=a[7];a=a[8];var p=a*h-k*m,n=-a*g+k*l,r=m*g-h*l,q=d*p+e*n+f*r;return q?(c=1/q,b||(b=t.create()),b[0]=p*c,b[1]=(-a*e+f*m)*c,b[2]=(k*e-f*h)*c,b[3]=n*c,b[4]=(a*d-f*l)*c,b[5]=(-k*d+f*g)*c,b[6]=r*c,b[7]=(-m*d+e*l)*c,b[8]=(h*d-e*g)*c,b):null},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7];a=a[8];var p=b[0],n=b[1],r=b[2],q=b[3],t=b[4],u=b[5],z=b[6],v=b[7];b=b[8];return c[0]=p*d+n*g+r*l,c[1]=p*e+n*h+r*m,c[2]=p*f+n*k+r*a,c[3]=q*d+t*g+u*l,
c[4]=q*e+t*h+u*m,c[5]=q*f+t*k+u*a,c[6]=z*d+v*g+b*l,c[7]=z*e+v*h+b*m,c[8]=z*f+v*k+b*a,c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];return c[0]=d*a[0]+b*a[3]+a[6],c[1]=d*a[1]+b*a[4]+a[7],c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];return c[0]=d*a[0]+e*a[3]+b*a[6],c[1]=d*a[1]+e*a[4]+b*a[7],c[2]=d*a[2]+e*a[5]+b*a[8],c},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},identity:function(a){return a||
(a=t.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],d=a[5];return a[1]=a[3],a[2]=a[6],a[3]=b,a[5]=a[7],a[6]=c,a[7]=d,a}return b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8],b},toMat4:function(a,b){return b||(b=w.create()),b[15]=1,b[14]=0,b[13]=0,b[12]=0,b[11]=0,b[10]=a[8],b[9]=a[7],b[8]=a[6],b[7]=0,b[6]=a[5],b[5]=a[4],b[4]=a[3],b[3]=0,b[2]=a[2],b[1]=a[1],b[0]=a[0],b},str:function(a){return"["+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},w={create:function(a){var c=new b(16);return 4===arguments.length?(c[0]=arguments[0],c[1]=arguments[1],c[2]=arguments[2],c[3]=arguments[3],c[4]=arguments[4],c[5]=arguments[5],c[6]=arguments[6],c[7]=arguments[7],c[8]=arguments[8],c[9]=arguments[9],c[10]=arguments[10],c[11]=arguments[11],c[12]=arguments[12],c[13]=arguments[13],c[14]=arguments[14],c[15]=arguments[15]):a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],
c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c},createFrom:function(a,c,d,e,g,h,k,l,m,n,r,q,t,u,v,w){var f=new b(16);return f[0]=a,f[1]=c,f[2]=d,f[3]=e,f[4]=g,f[5]=h,f[6]=k,f[7]=l,f[8]=m,f[9]=n,f[10]=r,f[11]=q,f[12]=t,f[13]=u,f[14]=v,f[15]=w,f},createFromMatrixRowMajor:function(a){var c=new b(16);return c[0]=a[0],c[4]=a[1],c[8]=a[2],c[12]=a[3],c[1]=a[4],c[5]=a[5],c[9]=a[6],c[13]=a[7],c[2]=a[8],c[6]=a[9],c[10]=
a[10],c[14]=a[11],c[3]=a[12],c[7]=a[13],c[11]=a[14],c[15]=a[15],c},createFromMatrix:function(a){var c=new b(16);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},setRowMajor:function(a,
b){return b[0]=a[0],b[4]=a[1],b[8]=a[2],b[12]=a[3],b[1]=a[4],b[5]=a[5],b[9]=a[6],b[13]=a[7],b[2]=a[8],b[6]=a[9],b[10]=a[10],b[14]=a[11],b[3]=a[12],b[7]=a[13],b[11]=a[14],b[15]=a[15],b},identity:function(a){return a||(a=w.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],d=a[3],e=a[6],f=a[7],g=a[11];return a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=b,a[6]=a[9],a[7]=a[13],
a[8]=c,a[9]=e,a[11]=a[14],a[12]=d,a[13]=f,a[14]=g,a}return b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15],b},determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],l=a[8],m=a[9],n=a[10],r=a[11],q=a[12],t=a[13],u=a[14];a=a[15];return q*m*h*e-l*t*h*e-q*g*n*e+f*t*n*e+l*g*u*e-f*m*u*e-q*m*d*k+l*t*d*k+q*c*n*k-b*t*n*k-l*c*u*k+b*m*u*k+q*g*d*r-f*t*d*r-q*
c*h*r+b*t*h*r+f*c*u*r-b*g*u*r-l*g*d*a+f*m*d*a+l*c*h*a-b*m*h*a-f*c*n*a+b*g*n*a},inverse:function(a,b){b||(b=a);var c,d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7],n=a[8],p=a[9],r=a[10],q=a[11],t=a[12],u=a[13],v=a[14];a=a[15];var w=d*k-e*h,x=d*l-f*h,P=d*m-g*h,W=e*l-f*k,aa=e*m-g*k,R=f*m-g*l,T=n*u-p*t,ba=n*v-r*t,U=n*a-q*t,ea=p*v-r*u,Z=p*a-q*u,fa=r*a-q*v,ja=w*fa-x*Z+P*ea+W*U-aa*ba+R*T;return ja?(c=1/ja,b[0]=(k*fa-l*Z+m*ea)*c,b[1]=(-e*fa+f*Z-g*ea)*c,b[2]=(u*R-v*aa+a*W)*c,b[3]=(-p*R+r*aa-q*W)*
c,b[4]=(-h*fa+l*U-m*ba)*c,b[5]=(d*fa-f*U+g*ba)*c,b[6]=(-t*R+v*P-a*x)*c,b[7]=(n*R-r*P+q*x)*c,b[8]=(h*Z-k*U+m*T)*c,b[9]=(-d*Z+e*U-g*T)*c,b[10]=(t*aa-u*P+a*w)*c,b[11]=(-n*aa+p*P-q*w)*c,b[12]=(-h*ea+k*ba-l*T)*c,b[13]=(d*ea-e*ba+f*T)*c,b[14]=(-t*W+u*x-v*w)*c,b[15]=(n*W-p*x+r*w)*c,b):null},toRotationMat:function(a,b){return b||(b=w.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},toMat3:function(a,
b){return b||(b=t.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[4],b[4]=a[5],b[5]=a[6],b[6]=a[8],b[7]=a[9],b[8]=a[10],b},toInverseMat3:function(a,b){var c,d=a[0],e=a[1],f=a[2],g=a[4],h=a[5],k=a[6],l=a[8],m=a[9];a=a[10];var n=a*h-k*m,p=-a*g+k*l,r=m*g-h*l,q=d*n+e*p+f*r;return q?(c=1/q,b||(b=t.create()),b[0]=n*c,b[1]=(-a*e+f*m)*c,b[2]=(k*e-f*h)*c,b[3]=p*c,b[4]=(a*d-f*l)*c,b[5]=(-k*d+f*g)*c,b[6]=r*c,b[7]=(-m*d+e*l)*c,b[8]=(h*d-e*g)*c,b):null},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],
g=a[3],h=a[4],k=a[5],l=a[6],m=a[7],n=a[8],p=a[9],r=a[10],q=a[11],t=a[12],u=a[13],v=a[14];a=a[15];var w=b[0],x=b[1],z=b[2],W=b[3],aa=b[4],R=b[5],T=b[6],ba=b[7],U=b[8],ea=b[9],Z=b[10],fa=b[11],ja=b[12],ta=b[13],ra=b[14];b=b[15];return c[0]=w*d+x*h+z*n+W*t,c[1]=w*e+x*k+z*p+W*u,c[2]=w*f+x*l+z*r+W*v,c[3]=w*g+x*m+z*q+W*a,c[4]=aa*d+R*h+T*n+ba*t,c[5]=aa*e+R*k+T*p+ba*u,c[6]=aa*f+R*l+T*r+ba*v,c[7]=aa*g+R*m+T*q+ba*a,c[8]=U*d+ea*h+Z*n+fa*t,c[9]=U*e+ea*k+Z*p+fa*u,c[10]=U*f+ea*l+Z*r+fa*v,c[11]=U*g+ea*m+Z*q+fa*
a,c[12]=ja*d+ta*h+ra*n+b*t,c[13]=ja*e+ta*k+ra*p+b*u,c[14]=ja*f+ta*l+ra*r+b*v,c[15]=ja*g+ta*m+ra*q+b*a,c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];return c[0]=a[0]*d+a[4]*e+a[8]*b+a[12],c[1]=a[1]*d+a[5]*e+a[9]*b+a[13],c[2]=a[2]*d+a[6]*e+a[10]*b+a[14],c},multiplyVec4:function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];b=b[3];return c[0]=a[0]*d+a[4]*e+a[8]*f+a[12]*b,c[1]=a[1]*d+a[5]*e+a[9]*f+a[13]*b,c[2]=a[2]*d+a[6]*e+a[10]*f+a[14]*b,c[3]=a[3]*d+a[7]*e+a[11]*f+a[15]*b,c},translate:function(a,
b,c){var d,e,f,g,h,k,l,m,n,p,r,q,t=b[0],u=b[1];b=b[2];return c&&a!==c?(d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7],n=a[8],p=a[9],r=a[10],q=a[11],c[0]=d,c[1]=e,c[2]=f,c[3]=g,c[4]=h,c[5]=k,c[6]=l,c[7]=m,c[8]=n,c[9]=p,c[10]=r,c[11]=q,c[12]=d*t+h*u+n*b+a[12],c[13]=e*t+k*u+p*b+a[13],c[14]=f*t+l*u+r*b+a[14],c[15]=g*t+m*u+q*b+a[15],c):(a[12]=a[0]*t+a[4]*u+a[8]*b+a[12],a[13]=a[1]*t+a[5]*u+a[9]*b+a[13],a[14]=a[2]*t+a[6]*u+a[10]*b+a[14],a[15]=a[3]*t+a[7]*u+a[11]*b+a[15],a)},scale:function(a,b,c){var d=
b[0],e=b[1];b=b[2];return c&&a!==c?(c[0]=a[0]*d,c[1]=a[1]*d,c[2]=a[2]*d,c[3]=a[3]*d,c[4]=a[4]*e,c[5]=a[5]*e,c[6]=a[6]*e,c[7]=a[7]*e,c[8]=a[8]*b,c[9]=a[9]*b,c[10]=a[10]*b,c[11]=a[11]*b,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c):(a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a)},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*
a[10]))},rotate:function(a,b,c,d){var e,f,g,h,k,l,m,n,p,r,q,t,u,v,w,x,z,y,aa,R,T,ba,U,ea,Z=c[0],fa=c[1];c=c[2];var ja=Math.sqrt(Z*Z+fa*fa+c*c);return ja?(1!==ja&&(ja=1/ja,Z*=ja,fa*=ja,c*=ja),e=Math.sin(b),f=Math.cos(b),g=1-f,h=a[0],k=a[1],l=a[2],m=a[3],n=a[4],p=a[5],r=a[6],q=a[7],t=a[8],u=a[9],v=a[10],w=a[11],x=Z*Z*g+f,z=fa*Z*g+c*e,y=c*Z*g-fa*e,aa=Z*fa*g-c*e,R=fa*fa*g+f,T=c*fa*g+Z*e,ba=Z*c*g+fa*e,U=fa*c*g-Z*e,ea=c*c*g+f,d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a,d[0]=h*x+n*z+t*
y,d[1]=k*x+p*z+u*y,d[2]=l*x+r*z+v*y,d[3]=m*x+q*z+w*y,d[4]=h*aa+n*R+t*T,d[5]=k*aa+p*R+u*T,d[6]=l*aa+r*R+v*T,d[7]=m*aa+q*R+w*T,d[8]=h*ba+n*U+t*ea,d[9]=k*ba+p*U+u*ea,d[10]=l*ba+r*U+v*ea,d[11]=m*ba+q*U+w*ea,d):null},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[4],f=a[5],g=a[6],h=a[7],k=a[8],l=a[9],m=a[10],n=a[11];return c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[4]=e*b+k*d,c[5]=f*b+l*d,c[6]=g*b+m*d,c[7]=h*b+n*d,c[8]=e*-d+
k*b,c[9]=f*-d+l*b,c[10]=g*-d+m*b,c[11]=h*-d+n*b,c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],f=a[1],g=a[2],h=a[3],k=a[8],l=a[9],m=a[10],n=a[11];return c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=e*b+k*-d,c[1]=f*b+l*-d,c[2]=g*b+m*-d,c[3]=h*b+n*-d,c[8]=e*d+k*b,c[9]=f*d+l*b,c[10]=g*d+m*b,c[11]=h*d+n*b,c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],f=a[1],g=a[2],h=a[3],k=a[4],l=a[5],m=a[6],
n=a[7];return c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=e*b+k*d,c[1]=f*b+l*d,c[2]=g*b+m*d,c[3]=h*b+n*d,c[4]=e*-d+k*b,c[5]=f*-d+l*b,c[6]=g*-d+m*b,c[7]=h*-d+n*b,c},frustum:function(a,b,c,d,e,g,h){h||(h=w.create());var f=b-a,k=d-c,l=g-e;return h[0]=2*e/f,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=2*e/k,h[6]=0,h[7]=0,h[8]=(b+a)/f,h[9]=(d+c)/k,h[10]=-(g+e)/l,h[11]=-1,h[12]=0,h[13]=0,h[14]=-(g*e*2)/l,h[15]=0,h},perspective:function(a,b,c,d,e){a=
c*Math.tan(a*Math.PI/360);b*=a;return w.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,g,h){h||(h=w.create());var f=b-a,k=d-c,l=g-e;return h[0]=2/f,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=2/k,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=-2/l,h[11]=0,h[12]=-(a+b)/f,h[13]=-(d+c)/k,h[14]=-(g+e)/l,h[15]=1,h},lookAt:function(a,b,c,d){d||(d=w.create());var e,f,g,h,k,l,m,n,p,r,q=a[0],t=a[1];a=a[2];var u=c[0],v=c[1];c=c[2];var x=b[0],z=b[1];b=b[2];return q===x&&t===z&&a===b?w.identity(d):(m=q-x,n=t-z,p=a-b,r=1/Math.sqrt(m*
m+n*n+p*p),m*=r,n*=r,p*=r,e=v*p-c*n,f=c*m-u*p,g=u*n-v*m,r=Math.sqrt(e*e+f*f+g*g),r?(r=1/r,e*=r,f*=r,g*=r):(e=0,f=0,g=0),h=n*g-p*f,k=p*e-m*g,l=m*f-n*e,r=Math.sqrt(h*h+k*k+l*l),r?(r=1/r,h*=r,k*=r,l*=r):(h=0,k=0,l=0),d[0]=e,d[1]=h,d[2]=m,d[3]=0,d[4]=f,d[5]=k,d[6]=n,d[7]=0,d[8]=g,d[9]=l,d[10]=p,d[11]=0,d[12]=-(e*q+f*t+g*a),d[13]=-(h*q+k*t+l*a),d[14]=-(m*q+n*t+p*a),d[15]=1,d)},fromRotationTranslation:function(a,b,c){c||(c=w.create());var d=a[0],e=a[1],f=a[2],g=a[3],h=d+d,k=e+e,l=f+f;a=d*h;var m=d*k,d=
d*l,n=e*k,e=e*l,f=f*l,h=g*h,k=g*k,g=g*l;return c[0]=1-(n+f),c[1]=m+g,c[2]=d-k,c[3]=0,c[4]=m-g,c[5]=1-(a+f),c[6]=e+h,c[7]=0,c[8]=d+k,c[9]=e-h,c[10]=1-(a+n),c[11]=0,c[12]=b[0],c[13]=b[1],c[14]=b[2],c[15]=1,c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},q={create:function(a){var c=new b(4);return a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]):c[0]=c[1]=c[2]=
c[3]=0,c},createFrom:function(a,c,d,e){var f=new b(4);return f[0]=a,f[1]=c,f[2]=d,f[3]=e,f},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},identity:function(a){return a||(a=q.create()),a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}},v=q.identity();q.calculateW=function(a,b){var c=a[0],d=a[1],e=a[2];return b&&a!==b?(b[0]=c,b[1]=d,b[2]=e,b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),b):(a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a)};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};
q.inverse=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],c=(c=c*c+d*d+e*e+f*f)?1/c:0;return b&&a!==b?(b[0]=-a[0]*c,b[1]=-a[1]*c,b[2]=-a[2]*c,b[3]=a[3]*c,b):(a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a)};q.conjugate=function(a,b){return b&&a!==b?(b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b):(a[0]*=-1,a[1]*=-1,a[2]*=-1,a)};q.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};q.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2];a=a[3];var f=Math.sqrt(c*c+d*d+e*e+a*
a);return 0===f?(b[0]=0,b[1]=0,b[2]=0,b[3]=0,b):(f=1/f,b[0]=c*f,b[1]=d*f,b[2]=e*f,b[3]=a*f,b)};q.add=function(a,b,c){return c&&a!==c?(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c):(a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a)};q.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];var g=b[0],h=b[1],k=b[2];b=b[3];return c[0]=d*b+a*g+e*k-f*h,c[1]=e*b+a*h+f*g-d*k,c[2]=f*b+a*k+d*h-e*g,c[3]=a*b-d*g-e*h-f*k,c};q.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];
b=a[0];var g=a[1],h=a[2];a=a[3];var k=a*d+g*f-h*e,l=a*e+h*d-b*f,m=a*f+b*e-g*d,d=-b*d-g*e-h*f;return c[0]=k*a+d*-b+l*-h-m*-g,c[1]=l*a+d*-g+m*-b-k*-h,c[2]=m*a+d*-h+k*-g-l*-b,c};q.scale=function(a,b,c){return c&&a!==c?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c):(a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a)};q.toMat3=function(a,b){b||(b=t.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,k=e+e;a=c*g;var l=c*h,c=c*k,m=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;return b[0]=1-(m+e),b[1]=l+f,b[2]=c-h,b[3]=l-f,b[4]=
1-(a+e),b[5]=d+g,b[6]=c+h,b[7]=d-g,b[8]=1-(a+m),b};q.toMat4=function(a,b){b||(b=w.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,k=e+e;a=c*g;var l=c*h,c=c*k,m=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;return b[0]=1-(m+e),b[1]=l+f,b[2]=c-h,b[3]=0,b[4]=l-f,b[5]=1-(a+e),b[6]=d+g,b[7]=0,b[8]=c+h,b[9]=d-g,b[10]=1-(a+m),b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};q.slerp=function(a,b,c,d){d||(d=a);var e,f,g,h,k=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];return 1<=Math.abs(k)?(d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=
a[2],d[3]=a[3]),d):(e=Math.acos(k),f=Math.sqrt(1-k*k),.001>Math.abs(f)?(d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d):(g=Math.sin((1-c)*e)/f,h=Math.sin(c*e)/f,d[0]=a[0]*g+b[0]*h,d[1]=a[1]*g+b[1]*h,d[2]=a[2]*g+b[2]*h,d[3]=a[3]*g+b[3]*h,d))};q.fromRotationMatrix=function(a,b){b||(b=q.create());var c,d=a[0]+a[4]+a[8];if(0<d)c=Math.sqrt(d+1),b[3]=.5*c,c=.5/c,b[0]=(a[7]-a[5])*c,b[1]=(a[2]-a[6])*c,b[2]=(a[3]-a[1])*c;else{c=q.fromRotationMatrix.s_iNext=q.fromRotationMatrix.s_iNext||
[1,2,0];d=0;a[4]>a[0]&&(d=1);a[8]>a[3*d+d]&&(d=2);var e=c[d],f=c[e];c=Math.sqrt(a[3*d+d]-a[3*e+e]-a[3*f+f]+1);b[d]=.5*c;c=.5/c;b[3]=(a[3*f+e]-a[3*e+f])*c;b[e]=(a[3*e+d]+a[3*d+e])*c;b[f]=(a[3*f+d]+a[3*d+f])*c}return b};t.toQuat4=q.fromRotationMatrix;(function(){var a=t.create();q.fromAxes=function(b,c,d,e){return a[0]=c[0],a[3]=c[1],a[6]=c[2],a[1]=d[0],a[4]=d[1],a[7]=d[2],a[2]=b[0],a[5]=b[1],a[8]=b[2],q.fromRotationMatrix(a,e)}})();q.identity=function(a){return a||(a=q.create()),a[0]=0,a[1]=0,a[2]=
0,a[3]=1,a};q.fromAngleAxis=function(a,b,c){c||(c=q.create());a*=.5;var d=Math.sin(a);return c[3]=Math.cos(a),c[0]=d*b[0],c[1]=d*b[1],c[2]=d*b[2],c};q.toAngleAxis=function(b,c){c||(c=b);var d=b[0]*b[0]+b[1]*b[1]+b[2]*b[2];0<d?(c[3]=2*Math.acos(b[3]),d=a.invsqrt(d),c[0]=b[0]*d,c[1]=b[1]*d,c[2]=b[2]*d):(c[3]=0,c[0]=1,c[1]=0,c[2]=0);return c};q.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var x={create:function(a){var c=new b(4);return a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]):
c[0]=c[1]=c[2]=c[3]=0,c},createFrom:function(a,c,d,e){var f=new b(4);return f[0]=a,f[1]=c,f[2]=d,f[3]=e,f},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},identity:function(a){return a||(a=x.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},transpose:function(a,b){return b&&a!==b?(b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3],b):(b=a[1],a[1]=a[2],a[2]=b,a)},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2];a=a[3];var f=c*a-e*d;return f?
(f=1/f,b[0]=a*f,b[1]=-d*f,b[2]=-e*f,b[3]=c*f,b):null},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];return c[0]=d*b[0]+e*b[2],c[1]=d*b[1]+e*b[3],c[2]=f*b[0]+a*b[2],c[3]=f*b[1]+a*b[3],c},rotate:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];var g=Math.sin(b);b=Math.cos(b);return c[0]=d*b+e*g,c[1]=d*-g+e*b,c[2]=f*b+a*g,c[3]=f*-g+a*b,c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];return c[0]=d*a[0]+b*a[1],c[1]=d*a[2]+b*a[3],c},scale:function(a,b,c){c||(c=a);
var d=a[1],e=a[2],f=a[3],g=b[0];b=b[1];return c[0]=a[0]*g,c[1]=d*b,c[2]=e*g,c[3]=f*b,c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};d=d?"":"d";e["glMath"+d]=a;e["vec2"+d]={create:function(a){var c=new b(2);return a?(c[0]=a[0],c[1]=a[1]):(c[0]=0,c[1]=0),c},createFrom:function(a,c){var d=new b(2);return d[0]=a,d[1]=c,d},add:function(a,b,c){return c||(c=b),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c},subtract:function(a,b,c){return c||(c=b),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c},multiply:function(a,
b,c){return c||(c=b),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c},divide:function(a,b,c){return c||(c=b),c[0]=a[0]/b[0],c[1]=a[1]/b[1],c},scale:function(a,b,c){return c||(c=a),c[0]=a[0]*b,c[1]=a[1]*b,c},dist:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){return b[0]=a[0],b[1]=a[1],b},set2:function(a,b,c){return c[0]=a,c[1]=b,c},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b},normalize:function(a,
b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];return 0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0,b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];return c?(c[0]=c[1]=0,c[2]=a,c):a},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];return(b=d*d+a*a)?(b=1/Math.sqrt(b),c[0]=d*b,c[1]=a*b,c):(c[0]=0,c[1]=0,c[2]=0,c)},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),
d[1]=a[1]+c*(b[1]-a[1]),d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};e["vec3"+d]=c;e["vec4"+d]={create:function(a){var c=new b(4);return a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]):(c[0]=0,c[1]=0,c[2]=0,c[3]=0),c},createFrom:function(a,c,d,e){var f=new b(4);return f[0]=a,f[1]=c,f[2]=d,f[3]=e,f},add:function(a,b,c){return c||(c=b),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c},subtract:function(a,b,c){return c||(c=b),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],
c},multiply:function(a,b,c){return c||(c=b),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c[2]=a[2]*b[2],c[3]=a[3]*b[3],c},divide:function(a,b,c){return c||(c=b),c[0]=a[0]/b[0],c[1]=a[1]/b[1],c[2]=a[2]/b[2],c[3]=a[3]/b[3],c},scale:function(a,b,c){return c||(c=a),c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},set4:function(a,b,c,d,e){return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},negate:function(a,
b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d[3]=a[3]+c*(b[3]-a[3]),d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};e["mat2"+d]=x;e["mat3"+d]=t;e["mat4"+d]=w;e["quat4"+d]=q}),e})},"esri/views/3d/webgl-engine/lib/Layer":function(){define("require exports dojo/has ./IdGen ./Octree ./PerformanceTimer ./Util ./gl-matrix ./ModelContentType".split(" "),
function(e,h,d,a,b,c,m,k,l){var g=k.vec3d,n=d("dojo-debug-messages");e=function(){function a(b,c,d){this._parentStages=[];this._children=[];this.id=a._idGen.gen(d);this.name=b;c=c||{};this.group=c.group||"";this.state=c.state||"VISIBLE";this.interaction=c.interaction||"PICKABLE";this.translation=g.create(c.translation);this._extent=[g.createFrom(0,0,0),g.createFrom(1E3,1E3,1E3)];this._extentDirty=!0}return a.prototype.getId=function(){return this.id},a.prototype.getParentStages=function(){return this._parentStages},
a.prototype.addParentStage=function(a){-1===this._parentStages.indexOf(a)&&this._parentStages.push(a)},a.prototype.removeParentStage=function(a){a=this._parentStages.indexOf(a);-1<a&&this._parentStages.splice(a,1)},a.prototype.getName=function(){return this.name},a.prototype.getGroup=function(){return this.group},a.prototype.getState=function(){return this.state},a.prototype.getInteraction=function(){return this.interaction},a.prototype.getTranslation=function(){return this.translation},a.prototype.getObjectIds=
function(){return this._children.map(function(a){return a.getId()})},a.prototype.getObjects=function(){return this._children},a.prototype.setState=function(a){this.state=a},a.prototype.getExtent=function(){return this._updateExtent(),this._extent},a.prototype.addObject=function(a){this._children.push(a);a.addParentLayer(this);this.notifyDirty("layObjectAdded",a);this._invalidateExtent();this._spatialAccelerator&&this._spatialAccelerator.add(a)},a.prototype.hasObject=function(a){return-1<this._children.indexOf(a)},
a.prototype.removeObject=function(a){return null!=m.arrayRemove(this._children,a)?(a.removeParentLayer(this),this.notifyDirty("layObjectRemoved",a),this._invalidateExtent(),this._spatialAccelerator&&this._spatialAccelerator.remove(a),!0):!1},a.prototype.replaceObject=function(a,b){var c=this._children.indexOf(a);m.assert(-1<c,"Layer.replaceObject: layer doesn't contain specified object");this._children[c]=b;a.removeParentLayer(this);b.addParentLayer(this);this.notifyDirty("layObjectReplaced",[a,b]);
this._invalidateExtent();this._spatialAccelerator&&(this._spatialAccelerator.remove(a),this._spatialAccelerator.add(b))},a.prototype.notifyObjectBBChanged=function(a,b){this._spatialAccelerator&&this._spatialAccelerator.update(a,b)},a.prototype.getCenter=function(){this._updateExtent();var a=g.create();return g.lerp(this._extent[0],this._extent[1],.5,a)},a.prototype.getBSRadius=function(){return this._updateExtent(),.5*g.dist(this._extent[0],this._extent[1])},a.prototype.getSpatialQueryAccelerator=
function(){return this._spatialAccelerator?this._spatialAccelerator:50<this._children.length?(this._createOctree(),this._spatialAccelerator):void 0},a.prototype.shaderTransformationChanged=function(){this.notifyDirty("shaderTransformationChanged",null)},a.prototype.invalidateSpatialQueryAccelerator=function(){this._spatialAccelerator=null},a.prototype.notifyDirty=function(a,b,c,d){c=c||l.LAYER;d=d||this;for(var e=0;e<this._parentStages.length;e++)this._parentStages[e].notifyDirty(c,d,a,b)},a.prototype._createOctree=
function(){for(var a=this.getExtent(),d=0,e=0;3>e;e++)d=Math.max(d,a[1][e]-a[0][e]);e=g.create();g.lerp(a[0],a[1],.5,e);var h;if(n&&(h=new c(1),h.start()),this._spatialAccelerator=new b(e,1.2*d),this._spatialAccelerator.add(this._children),h)a=h.stop(),console.info("Octree for layer "+this.id+" created in "+Math.round(a)+" ms")},a.prototype._invalidateExtent=function(){this._extentDirty=!0},a.prototype._updateExtent=function(){if(this._extentDirty){if(0===this._children.length)return void(this._extent=
[[0,0,0],[0,0,0]]);var a=this._children[0];this._extent=[g.create(a.getBBMin()),g.create(a.getBBMax())];for(a=0;a<this._children.length;++a)for(var b=this._children[a],c=b.getBBMin(),b=b.getBBMax(),d=0;3>d;++d)this._extent[0][d]=Math.min(this._extent[0][d],c[d]),this._extent[1][d]=Math.max(this._extent[1][d],b[d]);this._extentDirty=!1}},a}();return e._idGen=new a,e})},"esri/views/3d/webgl-engine/lib/IdGen":function(){define(["require","exports"],function(e,h){return function(){function d(){this._count=
0}return d.prototype.gen=function(a){return null==a&&(a="a"),a+"_"+this._count++},d}()})},"esri/views/3d/webgl-engine/lib/Octree":function(){define("require exports ./gl-matrix ./Util dojo/has ./PerformanceTimer".split(" "),function(e,h,d,a,b,c){function m(a,b,c){return c=c||a,c[0]=a[0]+b,c[1]=a[1]+b,c[2]=a[2]+b,c}var k=d.vec3d,l=b("dojo-debug-messages");e=function(){function b(a,b,c){this._maximumObjectsPerNode=10;this._maximumDepth=20;this._autoResize=!0;this._outsiders=[];c&&(void 0!==c.maximumObjectsPerNode&&
(this._maximumObjectsPerNode=c.maximumObjectsPerNode),void 0!==c.maximumDepth&&(this._maximumDepth=c.maximumDepth),void 0!==c.autoResize&&(this._autoResize=c.autoResize));isNaN(a[0])||isNaN(a[1])||isNaN(a[2])||isNaN(b)?this._root=new g(null,k.createFrom(0,0,0),.5):this._root=new g(null,a,b/2)}return Object.defineProperty(b.prototype,"center",{get:function(){return this._root.center},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"size",{get:function(){return 2*this._root.halfSize},
enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"root",{get:function(){return this._root.node},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"outsiders",{get:function(){return this._outsiders.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"maximumObjectsPerNode",{get:function(){return this._maximumObjectsPerNode},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"maximumDepth",{get:function(){return this._maximumDepth},
enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"autoResize",{get:function(){return this._autoResize},enumerable:!0,configurable:!0}),b.prototype.add=function(a){a=this._objectOrObjectsArray(a);this._grow(a);for(var b=g.acquire(),c=0;c<a.length;c++){var d=a[c];b.init(this._root);0===d.getBSRadius()||isNaN(d.getBSRadius())||!this._autoResize&&!this._fitsInsideTree(this._boundingSphereFromObject(d,v))?this._outsiders.push(d):this._add(d,b)}g.release(b)},b.prototype.remove=function(b,
c){b=this._objectOrObjectsArray(b);for(var d=g.acquire(),e=!0,f=0;f<b.length;f++){var h=b[f],k=this._boundingSphereFromObject(c||h,v);0===k.radius||isNaN(k.radius)||!this._autoResize&&!this._fitsInsideTree(k)?e=null!=a.arrayRemove(this._outsiders,h):(d.init(this._root),e=this._remove(h,k,d))}return g.release(d),this._shrink(),e},b.prototype.update=function(a,b){this.remove(a,b);this.add(a)},b.prototype.forEachAlongRay=function(b,c,d){this._forEachTest(function(d){return m(d.center,2*-d.halfSize,t),
m(d.center,2*d.halfSize,w),a.rayBoxTest(b,c,t,w)},d)},b.prototype.forEachInBoundingBox=function(a,b,c){this._forEachTest(function(c){for(var d=2*c.halfSize,e=0;3>e;e++)if(c.center[e]+d<a[e]||c.center[e]-d>b[e])return!1;return!0},c)},b.prototype.forEachNode=function(a){this._forEachNode(this._root,function(b){return a(b.node,b.center,2*b.halfSize)})},b.prototype._forEachTest=function(a,b){this._outsiders.forEach(b);this._forEachNode(this._root,function(c){return a(c)?(c=c.node,c.terminals.forEach(b),
null!==c.residents&&c.residents.forEach(b),!0):!1})},b.prototype._forEachNode=function(a,b){a=g.acquire().init(a);for(var c=[a];0!==c.length;){if(a=c.pop(),b(a)&&!a.isLeaf())for(var d=0;d<a.node.children.length;d++)a.node.children[d]&&c.push(g.acquire().init(a).advance(d));g.release(a)}},b.prototype._objectOrObjectsArray=function(a){return Array.isArray(a)||(u[0]=a,a=u),a},b.prototype._remove=function(b,c,d){q.length=0;var e,f;if(d.advanceTo(c,function(a,b){q.push(a.node,b)})?(e=null!=a.arrayRemove(d.node.terminals,
b),f=0===d.node.terminals.length):(e=null!=a.arrayRemove(d.node.residents,b),f=0===d.node.residents.length),f)for(b=q.length-2;0<=b&&this._purge(q[b],q[b+1]);b-=2);return e},b.prototype._nodeIsEmpty=function(a){if(0!==a.terminals.length)return!1;if(null!==a.residents)return 0===a.residents.length;for(var b=0;b<a.children.length;b++)if(a.children[b])return!1;return!0},b.prototype._purge=function(a,b){return 0<=b&&(a.children[b]=null),this._nodeIsEmpty(a)?(null===a.residents&&(a.residents=[]),!0):!1},
b.prototype._add=function(a,b){b.advanceTo(this._boundingSphereFromObject(a,v))?b.node.terminals.push(a):(b.node.residents.push(a),b.node.residents.length>this._maximumObjectsPerNode&&b.depth<this._maximumDepth&&this._split(b))},b.prototype._split=function(a){var b=a.node.residents;a.node.residents=null;for(var c=0;c<b.length;c++){var d=g.acquire().init(a);this._add(b[c],d);g.release(d)}},b.prototype._grow=function(a){if(0!==a.length&&this._autoResize&&(a=this._boundingSphereFromObjects(a,this._boundingSphereFromObject,
x),!isNaN(a.radius)&&0!==a.radius&&!this._fitsInsideTree(a))){var b,d;if(l&&(b=new c(1),b.start()),this._nodeIsEmpty(this._root.node))k.set(a.center,this._root.center),this._root.halfSize=1.25*a.radius,d="grow-empty";else{var e=g.acquire();this._rootBoundsForRootAsSubNode(a,e);this._placingRootViolatesMaxDepth(e)?(this._rebuildTree(a,e),d="rebuild"):(this._growRootAsSubNode(e),d="sub-node");g.release(e)}l&&(b=b.stop(),console.info("Octree grown in "+Math.round(b)+" ms (strategy: "+d+")"))}},b.prototype._rebuildTree=
function(a,b){var c=this;k.set(b.center,f.center);f.radius=b.halfSize;a=this._boundingSphereFromObjects([a,f],function(a){return a},p);b=g.acquire().init(this._root);this._root.initFrom(null,a.center,1.25*a.radius);this._forEachNode(b,function(a){return c.add(a.node.terminals),null!==a.node.residents&&c.add(a.node.residents),!0});g.release(b)},b.prototype._placingRootViolatesMaxDepth=function(a){var b=0;this._forEachNode(this._root,function(a){return b=Math.max(b,a.depth),!0});return b+Math.log(a.halfSize/
this._root.halfSize)*Math.LOG2E>this._maximumDepth},b.prototype._rootBoundsForRootAsSubNode=function(a,b){var c=a.radius,d=a.center;a=-(1/0);for(var e=this._root.center,f=this._root.halfSize,g=0;3>g;g++){var h=Math.max(0,Math.ceil((e[g]-f-(d[g]-c))/(2*f))),k=Math.max(0,Math.ceil((d[g]+c-(e[g]+f))/(2*f)))+1;a=Math.max(a,Math.pow(2,Math.ceil(Math.log(h+k)*Math.LOG2E)));z[g].min=h;z[g].max=k}for(g=0;3>g;g++)h=z[g].min,k=z[g].max,c=(a-(h+k))/2,h+=Math.ceil(c),k+=Math.floor(c),r[g]=e[g]-f-h*f*2+(k+h)*
f;return b.initFrom(null,r,a*f,0)},b.prototype._growRootAsSubNode=function(a){var b=this._root.node;k.set(this._root.center,x.center);x.radius=this._root.halfSize;this._root.init(a);a.advanceTo(x,null,!0);a.node.children=b.children;a.node.residents=b.residents;a.node.terminals=b.terminals},b.prototype._shrink=function(){if(this._autoResize)for(;;){var a=this._findShrinkIndex();if(-1===a)break;this._root.advance(a);this._root.depth=0}},b.prototype._findShrinkIndex=function(){if(0!==this._root.node.terminals.length||
this._root.isLeaf())return-1;for(var a=null,b=this._root.node.children,c=0,d=0;d<b.length&&null==a;)c=d++,a=b[c];for(;d<b.length;)if(b[d++])return-1;return c},b.prototype._fitsInsideTree=function(a){var b=this._root.center,c=this._root.halfSize,d=a.center;return c>=a.radius&&d[0]>=b[0]-c&&d[0]<=b[0]+c&&d[1]>=b[1]-c&&d[1]<=b[1]+c&&d[2]>=b[2]-c&&d[2]<=b[2]+c},b.prototype._boundingSphereFromObject=function(a,b){return k.set(a.getCenter(),b.center),b.radius=a.getBSRadius(),b},b.prototype._boundingSphereFromObjects=
function(a,b,c){if(1===a.length){var d=b(a[0],x);k.set(d.center,c.center);c.radius=d.radius}else{t[0]=1/0;t[1]=1/0;t[2]=1/0;w[0]=-(1/0);w[1]=-(1/0);w[2]=-(1/0);for(var e=0;e<a.length;e++){var d=b(a[e],x),f=t,g=d.center,h=d.radius;f[0]=Math.min(f[0],g[0]-h);f[1]=Math.min(f[1],g[1]-h);f[2]=Math.min(f[2],g[2]-h);f=w;g=d.center;d=d.radius;f[0]=Math.max(f[0],g[0]+d);f[1]=Math.max(f[1],g[1]+d);f[2]=Math.max(f[2],g[2]+d)}k.scale(k.add(t,w,c.center),.5);c.radius=Math.max(w[0]-t[0],w[1]-t[1],w[2]-t[2])/2}return c},
b}();var g=function(){function a(a,b,c,d){void 0===c&&(c=0);void 0===d&&(d=0);this.center=k.create();this.initFrom(a,b,c,0)}return a.prototype.init=function(a){return this.initFrom(a.node,a.center,a.halfSize,a.depth)},a.prototype.initFrom=function(b,c,d,e){return void 0===b&&(b=null),void 0===d&&(d=this.halfSize),void 0===e&&(e=this.depth),this.node=b||a.createEmptyNode(),c&&k.set(c,this.center),this.halfSize=d,this.depth=e,this},a.prototype.advance=function(b){var c=this.node.children[b];c||(c=a.createEmptyNode(),
this.node.children[b]=c);this.node=c;this.halfSize/=2;this.depth++;b=n[b];return this.center[0]+=b[0]*this.halfSize,this.center[1]+=b[1]*this.halfSize,this.center[2]+=b[2]*this.halfSize,this},a.prototype.advanceTo=function(a,b,c){for(void 0===c&&(c=!1);;){if(this.isTerminalFor(a))return b&&b(this,-1),!0;if(this.isLeaf()&&!c)return b&&b(this,-1),!1;this.isLeaf()&&(this.node.residents=null);var d=this._childIndex(a);b&&b(this,d);this.advance(d)}},a.prototype.isLeaf=function(){return null!=this.node.residents},
a.prototype.isTerminalFor=function(a){return a.radius>this.halfSize/2},a.prototype._childIndex=function(a){a=a.center;for(var b=this.center,c=0,d=0;3>d;d++)b[d]<a[d]&&(c|=1<<d);return c},a.createEmptyNode=function(){return{children:[null,null,null,null,null,null,null,null],terminals:[],residents:[]}},a.acquire=function(){if(0===this._pool.length)return new a;var b=this._pool[this._pool.length-1];return this._pool.length--,b},a.release=function(a){this._pool.push(a)},a}();g._pool=[];var n=[[-1,-1,
-1],[1,-1,-1],[-1,1,-1],[1,1,-1],[-1,-1,1],[1,-1,1],[-1,1,1],[1,1,1]],u=[null],r=k.create(),t=k.create(),w=k.create(),q=[],v={center:k.create(),radius:0},x={center:k.create(),radius:0},f={center:k.create(),radius:0},p={center:k.create(),radius:0},z=[{min:0,max:0},{min:0,max:0},{min:0,max:0}];return e})},"esri/views/3d/webgl-engine/lib/Util":function(){define(["require","exports","./gl-matrix"],function(e,h,d){function a(a,b){if(!a)throw a=Error("dummy"),a.stack&&console.log(a.stack),new L(b);}function b(a,
b,c){return b>a?b:a>c?c:a}function c(a){return a/180*Math.PI}function m(a){return 180*a/Math.PI}function k(a,b,c){d.mat4d.multiply(b,a,r);d.mat4d.inverse(r);for(a=0;8>a;++a)d.mat4d.multiplyVec4(r,t[a],w),d.vec3d.set3(w[0]/w[3],w[1]/w[3],w[2]/w[3],c[a])}function l(a,b,c,e){d.vec3d.subtract(a,b,v);d.vec3d.subtract(c,b,x);d.vec3d.cross(x,v,e);d.vec3d.normalize(e);e[3]=-d.vec3d.dot(e,a)}function g(a,b,c,d){var e=6378137/Math.sqrt(1-h.ECCENTRICITY_SQUARED*Math.pow(Math.sin(a),2)),f=Math.cos(a);d[0]=(e+
c)*Math.cos(b)*f;d[1]=(e*(1-h.ECCENTRICITY_SQUARED)+c)*Math.sin(a);d[2]=-(e+c)*Math.sin(b)*f}function n(a){for(var b in a)return b}function u(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2]}Object.defineProperty(h,"__esModule",{value:!0});var r=d.mat4d.create(),t=[d.vec4d.createFrom(-1,-1,-1,1),d.vec4d.createFrom(1,-1,-1,1),d.vec4d.createFrom(1,1,-1,1),d.vec4d.createFrom(-1,1,-1,1),d.vec4d.createFrom(-1,-1,1,1),d.vec4d.createFrom(1,-1,1,1),d.vec4d.createFrom(1,1,1,1),d.vec4d.createFrom(-1,1,1,1)],w=d.vec4d.create(),
q=[d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create()],v=d.vec3d.create(),x=d.vec3d.create(),f=d.vec3d.create(),p=d.vec3d.create(),z=d.vec3d.create(),y=d.vec3d.create(),A=d.vec3d.create(),B=d.vec3d.create(),D=d.vec3d.create(),F=d.vec3d.create(),C=d.vec3d.create(),E=d.vec3d.create(),G=d.vec3d.create(),K=d.vec3d.create(),L=function(){function a(a){this.message=a}return a.prototype.toString=function(){return"AssertException: "+
this.message},a}();h.AssertException=L;h.EARTH_RADIUS=6378137;h.METER2FEET=3.28084;h.ECCENTRICITY_SQUARED=.0066943799901414;h.VertexAttrConstants={POSITION:"position",NORMAL:"normal",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region"};h.assert=a;h.verify=function(a,b){a||(console.log("Verify failed: "+b),console.log(Error("dummy").stack))};h.createQuadVertexUvBuffer=function(a){void 0===a&&(a=Float32Array);a=new a(20);return a[0]=-1,a[1]=
-1,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=-1,a[7]=0,a[8]=1,a[9]=0,a[10]=-1,a[11]=1,a[12]=0,a[13]=0,a[14]=1,a[15]=1,a[16]=1,a[17]=0,a[18]=1,a[19]=1,a};h.isPowerOfTwo=function(a){return 0===(a&a-1)};h.lerp=function(a,b,c){return a+(b-a)*c};h.clamp=b;h.fallbackIfUndefined=function(a,b){return void 0===a?b:a};h.hex2rgb=function(a){a=Math.floor(a);return[(a>>16&255)/255,(a>>8&255)/255,(255&a)/255]};h.rgb2hex=function(a){var c=b(Math.round(255*a[0]),0,255),d=b(Math.round(255*a[1]),0,255);a=b(Math.round(255*a[2]),
0,255);return"0x"+((c<<16)+(d<<8)+a).toString(16)};h.dec2hex=function(a){a=a.toString(16);return"00000000".substr(0,8-a.length)+a};h.deg2rad=c;h.rad2deg=m;h.azimuthElevationAngle2Direction=function(a,b){a=1.5*Math.PI-a;b=.5*Math.PI-b;return[Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b)]};h.rayPlane=function(a,b,c,e){var f=d.vec3d.dot(c,b);if(0===f)return!1;c=-(d.vec3d.dot(c,a)+c[3])/f;return d.vec3d.add(a,d.vec3d.scale(b,c,e),e),!0};h.raySphereClosestPositive=function(a,b,c,e){var f=
d.vec3d.dot(b,b),g=2*d.vec3d.dot(b,a);c=d.vec3d.dot(a,a)-c*c;c=g*g-4*f*c;if(0>c)return!1;var h=Math.sqrt(c);c=(-g-h)/(2*f);f=(-g+h)/(2*f);return(0>c||c>f&&0<f)&&(c=f),0<c?(d.vec3d.add(a,d.vec3d.scale(b,c,e),e),!0):!1};h.rayTriangle3D=function(a,b,c,e,f,g,h,k,l){void 0===l&&(l=d.vec3d.create());var m=e[h]-c[g],n=e[h+1]-c[g+1],p=e[h+2]-c[g+2];e=f[k]-c[g];h=f[k+1]-c[g+1];f=f[k+2]-c[g+2];var r=b[1]*f-h*b[2],q=b[2]*e-f*b[0],t=b[0]*h-e*b[1];k=m*r+n*q+p*t;if(-1E-5<k&&1E-5>k)return!1;k=1/k;var u=a[0]-c[g],
v=a[1]-c[g+1];a=a[2]-c[g+2];if(l[1]=k*(u*r+v*q+a*t),0>l[1]||1<l[1])return!1;c=v*p-n*a;a=a*m-p*u;m=u*n-m*v;return l[2]=k*(b[0]*c+b[1]*a+b[2]*m),0>l[2]||1<l[1]+l[2]?!1:(l[0]=k*(e*c+h*a+f*m),!0)};h.rayBoxTest=function(a,b,c,d){var e,f=(c[0]-a[0])/b[0],g=(d[0]-a[0])/b[0];f>g&&(e=f,f=g,g=e);var h=(c[1]-a[1])/b[1],k=(d[1]-a[1])/b[1];if(h>k&&(e=h,h=k,k=e),f>k||h>g)return!1;h>f&&(f=h);g>k&&(g=k);c=(c[2]-a[2])/b[2];a=(d[2]-a[2])/b[2];return c>a&&(e=c,c=a,a=e),f>a||c>g?!1:(g>a&&(g=a),0>g?!1:!0)};h.rayRay2D=
function(a,b,c,e,f,g){void 0===g&&(g=d.vec2d.create());var h=(e[f]-c[f])*(b[0]-a[0])-(e[0]-c[0])*(b[f]-a[f]);if(0===h)return!1;c=((e[0]-c[0])*(a[f]-c[f])-(e[f]-c[f])*(a[0]-c[0]))/h;return g[0]=a[0]+c*(b[0]-a[0]),g[1]=a[f]+c*(b[f]-a[f]),!0};h.matrix2frustum=k;h.matrix2frustumPlanes=function(a,b,c,d){void 0===d&&(d=c,c=q);k(a,b,c);l(c[4],c[0],c[3],d[0]);l(c[1],c[5],c[6],d[1]);l(c[4],c[5],c[1],d[2]);l(c[3],c[2],c[6],d[3]);l(c[0],c[1],c[2],d[4]);l(c[5],c[4],c[7],d[5])};h.point2plane=l;h.project=function(b,
c,e,f,g){g||(g=b);w[0]=b[0];w[1]=b[1];w[2]=b[2];w[3]=1;d.mat4d.multiplyVec4(c,w);2<g.length&&(g[2]=-w[2]);d.mat4d.multiplyVec4(e,w);a(0!==w[3]);g[0]=w[0]/w[3];g[1]=w[1]/w[3];g[2]=w[2]/w[3];g[0]=(.5*g[0]+.5)*f[2]+f[0];g[1]=(.5*g[1]+.5)*f[3]+f[1]};h.geodeticToGeocentricLatidude=function(a){return Math.atan((1-h.ECCENTRICITY_SQUARED)*Math.tan(a))};h.latLon2positionWGS84Ellipsoid=g;h.pos2latLon=function(a,c){var e=d.vec3d.length(a);c[0]=Math.asin(b(a[1]/e,-1,1));c[1]=(0>a[2]?1:-1)*Math.acos(b(a[0]/(Math.cos(c[0])*
e),-1,1));c[0]=m(c[0]);c[1]=m(c[1]);c[2]=e};h.pos2latLonWGS84Ellipsoid=function(a,b){var c=a[0],d=-a[2],e=a[1],f=Math.sqrt(Math.pow(6378137,2)*(1-h.ECCENTRICITY_SQUARED));a=Math.sqrt(Math.pow(c,2)+Math.pow(d,2));var g=Math.atan2(6378137*e,f*a),c=Math.atan2(d,c),d=Math.atan2(e+Math.pow(Math.sqrt((Math.pow(6378137,2)-Math.pow(f,2))/Math.pow(f,2)),2)*f*Math.pow(Math.sin(g),3),a-6378137*h.ECCENTRICITY_SQUARED*Math.pow(Math.cos(g),3));a=a/Math.cos(d)-6378137/Math.sqrt(1-h.ECCENTRICITY_SQUARED*Math.pow(Math.sin(d),
2))+h.EARTH_RADIUS;b[0]=d;b[1]=c;b[2]=a};h.computeGlobeTransformation=function(a,b,e){var h=c(a[0]);a=c(a[1]);return g(h,a,b,f),d.mat4d.translate(e,f),d.mat4d.rotateY(e,.5*Math.PI+a),d.mat4d.rotateX(e,.5*Math.PI-h),e};h.readUInt16=function(a,b){return a[b]+(a[b+1]<<8)};h.readUInt32=function(a,b){return a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24)};h.setIfDefined=function(a,b,c){void 0!==b[a]&&(c[a]=b[a])};h.array2object=function(a,b){var c={};if(void 0!==b)for(var d=0;d<a.length;d++){var e=a[d];c[b(e)]=
e}else for(b=0;b<a.length;b++)e=a[b],c[e]=e;return c};h.object2array=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};h.mergeObjects=function(a,b,c){if(void 0===c&&(c={}),c!==a)for(var d in a)c[d]=a[d];if(c!==b)for(var e in b)c[e]=b[e];return c};h.subtractObjects=function(a,b){var c={},d;for(d in a)void 0===b[d]&&(c[d]=a[d]);return c};h.intersectObjects=function(a,b){var c={},d;for(d in a)void 0!==b[d]&&(c[d]=a[d]);return c};h.getFirstObjectKey=n;h.getFirstObjectValue=function(a){return a[n(a)]};
h.objectEmpty=function(a){for(var b in a)return!1;return!0};h.arraysEqual=function(a,b){if(a.length!==b.length)return!1;for(var c=0,d=a.length;d>c;++c)if(a[c]!==b[c])return!1;return!0};h.arrayRemove=function(a,b){var c=a.indexOf(b);return-1!==c?(a[c]=a[a.length-1],a.pop(),b):null};h.byteBuffer2base64image=function(b,c,d,e,f){var g=4*c;a(b.length===g*d,"buffer length must match image resolution");var h=document.createElement("canvas");h.width=c;h.height=d;var k=h.getContext("2d");c=k.getImageData(0,
0,c,d);for(var l=c.data,m=0;d>m;++m)for(var n=m*g,p=(d-1-m)*g,r=0;g>r;++r)l[n++]=b[p++];return k.putImageData(c,0,0),h.toDataURL(e,f)};h.cround=function(a){return Math.round(100*a)/100};h.logWithBase=function(a,b){return Math.log(a)/Math.log(b)};h.setMatrixTranslation=u;h.setMatrixTranslation3=function(a,b,c,d){a[12]=b;a[13]=c;a[14]=d};h.getMatrixTranslation=function(a,b){return void 0===b&&(b=d.vec3d.create()),b[0]=a[12],b[1]=a[13],b[2]=a[14],b};h.createTranslationMatrix=function(a,b){return a=d.mat4d.identity(a),
u(a,b),a};h.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};h.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};h.fovx2fovd=function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(.5*a)/b)};h.fovy2fovd=function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(.5*a)/c)};h.fovd2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/Math.sqrt(b*b+c*c))};h.fovd2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/Math.sqrt(b*b+c*c))};h.nextHighestPowerOfTwo=
function(a){--a;for(var b=1;32>b;b<<=1)a|=a>>b;return a+1};h.linelineDistance3D=function(a,b,c,e){var f,g,h,k,l,m;if((p[0]=a[0]-c[0],p[1]=a[1]-c[1],p[2]=a[2]-c[2],z[0]=e[0]-c[0],z[1]=e[1]-c[1],z[2]=e[2]-c[2],1E-4>Math.abs(z[0])&&1E-4>Math.abs(z[1])&&1E-4>Math.abs(z[2]))||(y[0]=b[0]-a[0],y[1]=b[1]-a[1],y[2]=b[2]-a[2],1E-4>Math.abs(y[0])&&1E-4>Math.abs(y[1])&&1E-4>Math.abs(y[2]))||(f=p[0]*z[0]+p[1]*z[1]+p[2]*z[2],g=z[0]*y[0]+z[1]*y[1]+z[2]*y[2],h=p[0]*y[0]+p[1]*y[1]+p[2]*y[2],k=z[0]*z[0]+z[1]*z[1]+
z[2]*z[2],l=y[0]*y[0]+y[1]*y[1]+y[2]*y[2],m=l*k-g*g,1E-4>Math.abs(m)))return[!1];b=(f*g-h*k)/m;f=(f+g*b)/k;A[0]=a[0]+b*y[0];A[1]=a[1]+b*y[1];A[2]=a[2]+b*y[2];B[0]=c[0]+f*z[0];B[1]=c[1]+f*z[1];B[2]=c[2]+f*z[2];return[!0,d.vec3d.dist(A,B),A,B]};h.projectVectorVector2D=function(a,b,c){E[0]=b[0]-a[0];E[1]=b[1]-a[1];E[2]=0;G[0]=c[0]-a[0];G[1]=c[1]-a[1];G[2]=0;K[0]=c[0];K[1]=c[1];K[2]=0;b=d.vec3d.dot(G,E);c=d.vec3d.length(E);b/=c*c;C[0]=E[0]*b;C[1]=E[1]*b;D[0]=a[0]+C[0];D[1]=a[1]+C[1];d.vec3d.subtract(K,
D,F);a=d.vec3d.length(F);b=d.vec3d.length(G);c=d.vec3d.length(E);var e=d.vec3d.length(C);return(e>b||e>c)&&(a=Number.MAX_VALUE),a};e=function(){var a=window.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};if(a.oNow)return function(){return a.oNow()};var b;return b=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now(),function(){return Date.now()-
b}}();h.performance={now:e}})},"esri/views/3d/webgl-engine/lib/PerformanceTimer":function(){define(["require","exports","./Util"],function(e,h,d){return function(){function a(a){this._filterSampleIndex=0;this._lastTime=NaN;this._numMeasurements=this._totalTime=0;this._filterSamples=Array(a);this.reset();this._filterSize=a}return a.prototype.reset=function(){for(var a=this._filterSampleIndex=0;a<this._filterSize;a++)this._filterSamples[a]=NaN},a.prototype.start=function(){this._tsStart=d.performance.now()},
a.prototype.stop=function(){return this._lastTime=d.performance.now()-this._tsStart,this._totalTime+=this._lastTime,this._numMeasurements++,this._filterSize&&(this._filterSamples[this._filterSampleIndex]=this._lastTime,this._filterSampleIndex=(this._filterSampleIndex+1)%this._filterSize),this._lastTime},a.prototype.getLast=function(){return this._lastTime},a.prototype.getLastFiltered=function(){for(var a=0,c=0;c<this._filterSamples.length;c++)a+=this._filterSamples[c];return a/this._filterSamples.length},
a.prototype.getAverage=function(){return this._totalTime/this._numMeasurements},a.prototype.getTotal=function(){return this._totalTime},a.prototype.getNumMeasurements=function(){return this._numMeasurements},a}()})},"esri/views/3d/webgl-engine/lib/ModelContentType":function(){define(["require","exports"],function(e,h){e=function(){return function(){}}();return e.LAYER="layers",e.OBJECT="objects",e.GEOMETRY="geometries",e.MATERIAL="materials",e.TEXTURE="textures",e})},"esri/views/3d/webgl-engine/lib/MaterialCollection":function(){define(["require",
"exports","./ModelContentType"],function(e,h,d){return function(){function a(a){this.materials={};this.stage=a}return a.prototype.getMaterial=function(a){return this.materials[a]},a.prototype.addMaterial=function(a,c){this.materials[a]=c;this.stage.add(d.MATERIAL,c)},a.prototype.dispose=function(){for(var a in this.materials)this.stage.remove(d.MATERIAL,this.materials[a].getId());this.materials={}},a}()})},"esri/views/3d/webgl-engine/lib/TextTextureAtlas":function(){define("require exports ./Texture ./ModelContentType ../../../webgl/Texture ../../../webgl/enums".split(" "),
function(e,h,d,a,b,c){var m=function(){function a(a){this.textTextures={};this.dirty=!1;this._glTexture=null;this.id=d.idGen.gen(a)}return a.prototype.getId=function(){return this.id},a.prototype.dispose=function(){},a.prototype.deferredLoading=function(){return!1},a.prototype.getWidth=function(){return 512},a.prototype.getHeight=function(){return 512},a.prototype.initializeThroughRender=function(a,c){c.wrapMode=33071;c.samplingMode=9987;c.flipped=!0;c.preMultiplyAlpha=!0;c.hasMipmap=!0;var d=this._drawToCanvas();
return this._glTexture=new b(a,c,d),this.dirty=!1,this._glTexture},a.prototype.redraw=function(){if(this.dirty&&this._glTexture){var a=this._drawToCanvas();this._glTexture.setData(a);this.dirty=!1}},a.prototype.setUnloadFunc=function(a){this._unloadFunc=a},a.prototype.unload=function(){null!=this._unloadFunc&&(this._unloadFunc(this.id),this._unloadFunc=null)},a.prototype._drawToCanvas=function(){var b=a._create2Dcanvas(),c=b.getContext("2d");c.clearRect(0,0,512,512);for(var d in this.textTextures){var e=
this.textTextures[d];e.textTexture.renderText(1,e.placement.width,e.placement.height,c,e.placement.atlasOffX,e.placement.atlasOffY)}return b},a._create2Dcanvas=function(){return a._textCanvas2D||(a._textCanvas2D=document.createElement("canvas"),a._textCanvas2D.setAttribute("id","canvas2d"),a._textCanvas2D.setAttribute("width",(512).toString()),a._textCanvas2D.setAttribute("height",(512).toString()),a._textCanvas2D.setAttribute("style","display:none")),a._textCanvas2D},a}();return function(){function b(a,
b){this._textureAtlasSubtextures=[];this._curLineHeight=this._curY=this._curX=0;this._idHint=a;this._stage=b}return b.prototype.dispose=function(){for(var b=0;b<this._textureAtlasSubtextures.length;b++)this._stage.remove(a.TEXTURE,this._textureAtlasSubtextures[b].getId());this._textureAtlasSubtextures=[]},b.prototype.addTextTexture=function(b){for(var c=JSON.stringify(b.getParams())+"_"+b.getString(),d=0;d<this._textureAtlasSubtextures.length;d++){var e=this._textureAtlasSubtextures[d].textTextures[c];
if(null!=e)return e.placement}var h=null;0===this._textureAtlasSubtextures.length&&(h=new m(this._idHint),this._textureAtlasSubtextures.push(h));var k,l,d=b.getTextWidth(),e=b.getTextHeight(),q=d+2,v=e+2+2;this._curLineHeight=Math.max(this._curLineHeight,v);512>this._curX+q&&512>this._curY+this._curLineHeight?(k=this._curX,l=this._curY,this._curX+=q):512>this._curY+this._curLineHeight+v?(this._curX=0,this._curY+=this._curLineHeight,k=this._curX,l=this._curY,this._curX+=q):(h=new m(this._idHint),this._textureAtlasSubtextures.push(h),
this._curX=0,this._curY=0,this._curLineHeight=v,k=this._curX,l=this._curY,this._curX+=q);null!=h&&this._stage.add(a.TEXTURE,h);h=this._textureAtlasSubtextures[this._textureAtlasSubtextures.length-1];k={uvMinMax:[k/512,1-(l+e)/512,(k+d)/512,1-l/512],atlasOffX:k,atlasOffY:l,width:d,height:e,texture:h};return h.textTextures[c]={placement:k,textTexture:b},h.dirty=!0,k},b}()})},"esri/views/3d/webgl-engine/lib/Texture":function(){define("require exports ./IdGen ./Util ./DDSUtil ./gl-matrix ../../../webgl/FramebufferObject ../../../webgl/Texture ../../../webgl/Util ../../../webgl/VertexArrayObject ../../../webgl/BufferObject ../../../webgl/enums ./DefaultVertexBufferLayouts ./DefaultVertexAttributeLocations".split(" "),
function(e,h,d,a,b,c,m,k,l,g,n,u,r,t){function w(b,c,d,e,g,h,l){l=!1!==l;var f=new Image;f.onerror=function(){h(null);f.onerror=void 0;f.onload=void 0};f.onload=function(){if(a.assert(1<=f.width&&1<=f.height),d.samplingMode=l?9987:9729,d.hasMipmap=l,a.isPowerOfTwo(f.width)&&a.isPowerOfTwo(f.height)){d.width=f.width;d.height=f.height;var c=new k(b,d,f)}else c=q(b,f,d,e,g);b.bindTexture(c);h(c);f.onerror=void 0;f.onload=void 0};f.src=c}function q(b,c,d,e,h){var f=a.nextHighestPowerOfTwo(c.width),p=
a.nextHighestPowerOfTwo(c.height);a.assert(f!==c.width||p!==c.height);d.width=f;d.height=p;var q=new k(b,d),u=m.createWithAttachments(b,q,{colorTarget:0,depthStencilTarget:0});c=new k(b,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0,maxAnisotropy:8,preMultiplyAlpha:d.preMultiplyAlpha},c);if(b.bindFramebuffer(u),void 0===h)h=b.getViewport(),h=[h.x,h.y,h.width,h.height];b.setViewport(0,0,f,p);e=e.get("texOnly");f=v.identity();b.bindProgram(e);e.setUniformMatrix4fv("model",
f);e.setUniformMatrix4fv("view",f);e.setUniformMatrix4fv("proj",f);e.setUniform4f("color",1,1,1,1);e.setUniform1i("tex",0);e=new g(b,t.Default3D,{geometry:r.Pos3Tex},{geometry:n.createVertex(b,35044,a.createQuadVertexUvBuffer())});return b.bindTexture(c,0),b.bindVAO(e),b.setDepthTestEnabled(!1),b.setBlendingEnabled(!1),b.drawArrays(5,0,l.vertexCount(e,"geometry")),b.setDepthTestEnabled(!0),b.bindFramebuffer(null),b.setViewport(h[0],h[1],h[2],h[3]),e.dispose(!0),c.dispose(),b.bindFramebuffer(null),
u.detachColorTexture(),u.dispose(),d.hasMipmap&&q.generateMipmap(),q}var v=c.mat4d;e=function(){function c(a,b,d){this.data=a;this.id=c.idGen.gen(b);this.unloadFunc=void 0;this.params=d||{};this.params.wrapClamp=this.params.wrapClamp||!1;this.params.mipmap=!1!==this.params.mipmap;this.params.noUnpackFlip=this.params.noUnpackFlip||!1;this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1;this.estimatedTexMemRequiredMB=c.estimateTexMemRequiredMB(this.data,this.params)}return c.estimateTexMemRequiredMB=
function(a,b){return null==a?0:a instanceof ArrayBuffer||a instanceof Uint8Array?a.byteLength/1E6:a instanceof Image||a instanceof ImageData||a instanceof HTMLCanvasElement?1.3*a.width*a.height*4/1E6:1.3*b.width*b.height*4/1E6||0},c.prototype.getId=function(){return this.id},c.prototype.getEstimatedTexMemRequiredMB=function(){return this.estimatedTexMemRequiredMB},c.prototype.dispose=function(){this.data=void 0},c.prototype.deferredLoading=function(){return"string"==typeof this.data},c.prototype.getWidth=
function(){return this.params.width},c.prototype.getHeight=function(){return this.params.height},c.prototype.initializeThroughUpload=function(d,e,g,h,l){var f=this.data;if(e.flipped=!this.params.noUnpackFlip,e.samplingMode=this.params.mipmap?9987:9729,e.hasMipmap=this.params.mipmap,e.wrapMode=this.params.wrapClamp?33071:10497,e.preMultiplyAlpha=this.params.preMultiplyAlpha,"string"==typeof f)w(d,f,e,g,h,l,this.params.mipmap);else{if(f instanceof Image||f instanceof ImageData||f instanceof HTMLCanvasElement)this.params.width=
f.width,this.params.height=f.height,!this.params.mipmap&&this.params.wrapClamp||a.isPowerOfTwo(f.width)&&a.isPowerOfTwo(f.height)?(e.width=f.width,e.height=f.height,e=new k(d,e,f)):e=q(d,f,e,g,h);else if(f instanceof ArrayBuffer&&this.params.encoding===c.DDS_ENCODING)e=b.createDDSTexture(d,e,f,this.params.mipmap);else if(f instanceof Uint8Array&&this.params.encoding===c.DDS_ENCODING)e=b.createDDSTexture(d,e,f.buffer,this.params.mipmap);else if(f instanceof Uint8Array)a.assert(0<this.params.width&&
0<this.params.height),e.pixelFormat=1===this.params.components?6409:6408,e.width=this.params.width,e.height=this.params.height,e=new k(d,e,f);else{if(null!==f)throw console.warn("Unsupported image data"),Error("Unsupported image data");e=new k(d,e,null)}d.bindTexture(e);l(e)}this.data=void 0},c.prototype.setUnloadFunc=function(a){this.unloadFunc=a},c.prototype.unload=function(){void 0!==this.unloadFunc&&(this.unloadFunc(this.id),this.unloadFunc=void 0)},c}();return e.idGen=new d,e.DDS_ENCODING="image/vnd-ms.dds",
e})},"esri/views/3d/webgl-engine/lib/DDSUtil":function(){define(["require","exports","../../../webgl/Texture","../../../webgl/enums"],function(e,h,d,a){function b(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}Object.defineProperty(h,"__esModule",{value:!0});var c=b("DXT1"),m=b("DXT3"),k=b("DXT5");h.createDDSTexture=function(a,b,e,h){var g=new Int32Array(e,0,31);if(542327876!==g[0])return console.error("Invalid magic number in DDS header"),null;if(!(g[20]&
4))return console.error("Unsupported format, must contain a FourCC code"),null;var l,n;l=g[21];switch(l){case c:l=8;n=33776;break;case m:l=16;n=33778;break;case k:l=16;n=33779;break;default:return console.error("Unsupported FourCC code:",String.fromCharCode(255&l,l>>8&255,l>>16&255,l>>24&255)),null}var q=1;g[2]&131072&&!1!==h&&(q=Math.max(1,g[7]));var u,x;h=g[4];var f=g[3],p=g[1]+4;b.samplingMode=1<q?9987:9729;b.hasMipmap=1<q;b.width=g[4];b.height=g[3];b=new d(a,b);a.bindTexture(b);for(g=0;q>g&&(x=
Math.floor((h+3)/4)*Math.floor((f+3)/4)*l,u=new Uint8Array(e,p,x)),a.gl.compressedTexImage2D(a.gl.TEXTURE_2D,g,n,h,f,0,u),p+=x,(1!==h||1!==f)&&1!==q;++g)h=Math.max(1,h>>1),f=Math.max(1,f>>1);return b}})},"esri/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error"],function(e,h,d,a){return function(){function b(){}return b.vertexCount=function(a,d){return a.vertexBuffers[d].size/b.getStride(a.layout[d])},b.getStride=function(a){return a[0].stride},
b.getBytesPerElement=function(a){switch(a){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}},b.addDescriptor=function(a,d,e,h,g,n){var c=b.getBytesPerElement(h);if(0<a.length){var k=a[0].stride,l=k+c*e;a.forEach(function(a){return a.stride=l});a.push({name:d,count:e,type:h,offset:k,stride:l,normalized:g,divisor:n})}else a.push({name:d,count:e,type:h,offset:0,stride:c*e,normalized:g,
divisor:n})},b.assertCompatibleVertexAttributeLocations=function(a,b){a=a.locations===b.locations;return a||console.error("VertexAttributeLocations are incompatible"),a},b.hasAttribute=function(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return!0;return!1},b.findAttribute=function(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return a[c];return null},b.copyFramebufferToTexture=function(a,b,d,e,g){void 0===g&&(g=0);var c=a.getBoundFramebufferObject(),h=a.getBoundTexture(0);a.bindFramebuffer(b);
a.bindTexture(d,0);a.gl.copyTexImage2D(a.gl.TEXTURE_2D,g,d.descriptor.pixelFormat,e[0],e[1],e[2],e[3],0);a.gl.flush();a.bindFramebuffer(c);a.bindTexture(h,0)},b.assert=function(b,d){if(!b)throw new a(d);},b.setBaseInstanceOffset=function(a,b){var c={},e;for(e in a)c[e]=a[e].map(function(a){return a.divisor?d({},a,{baseInstance:b}):a});return c},b}()})},"esri/views/3d/webgl-engine/lib/DefaultVertexBufferLayouts":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",
{value:!0});h.Pos3=[{name:"position",count:3,type:5126,offset:0,stride:12,normalized:!1}];h.Pos3Tex=[{name:"position",count:3,type:5126,offset:0,stride:20,normalized:!1},{name:"uv0",count:2,type:5126,offset:12,stride:20,normalized:!1}];h.Pos3Color=[{name:"position",count:3,type:5126,offset:0,stride:16,normalized:!1},{name:"color",count:4,type:5121,offset:12,stride:16,normalized:!1}];h.Pos3Norm=[{name:"position",count:3,type:5126,offset:0,stride:24,normalized:!1},{name:"normal",count:3,type:5126,offset:12,
stride:24,normalized:!1}];h.Pos3NormTex=[{name:"position",count:3,type:5126,offset:0,stride:32,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:32,normalized:!1},{name:"uv0",count:2,type:5126,offset:24,stride:32,normalized:!1}];h.Pos3NormCol=[{name:"position",count:3,type:5126,offset:0,stride:28,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:28,normalized:!1},{name:"color",count:4,type:5121,offset:24,stride:28,normalized:!1}];h.Pos3NormTexCol=[{name:"position",count:3,
type:5126,offset:0,stride:36,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:36,normalized:!1},{name:"uv0",count:2,type:5126,offset:24,stride:36,normalized:!1},{name:"color",count:4,type:5121,offset:32,stride:36,normalized:!1}];h.Pos3NormTexRegion=[{name:"position",count:3,type:5126,offset:0,stride:40,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:40,normalized:!1},{name:"uv0",count:2,type:5126,offset:24,stride:40,normalized:!1},{name:"region",count:4,type:5123,
offset:32,stride:40,normalized:!1}];h.Pos3NormTexRegionCol=[{name:"position",count:3,type:5126,offset:0,stride:44,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:44,normalized:!1},{name:"uv0",count:2,type:5126,offset:24,stride:44,normalized:!1},{name:"region",count:4,type:5123,offset:32,stride:44,normalized:!1},{name:"color",count:4,type:5121,offset:40,stride:44,normalized:!1}];h.Pos3NormSymcol=[{name:"position",count:3,type:5126,offset:0,stride:28,normalized:!1},{name:"normal",count:3,
type:5126,offset:12,stride:28,normalized:!1},{name:"symbolColor",count:4,type:5121,offset:24,stride:28,normalized:!1}];h.Pos3NormTexSymcol=[{name:"position",count:3,type:5126,offset:0,stride:36,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:36,normalized:!1},{name:"uv0",count:2,type:5126,offset:24,stride:36,normalized:!1},{name:"symbolColor",count:4,type:5121,offset:32,stride:36,normalized:!1}];h.Pos3NormColSymcol=[{name:"position",count:3,type:5126,offset:0,stride:32,normalized:!1},
{name:"normal",count:3,type:5126,offset:12,stride:32,normalized:!1},{name:"color",count:4,type:5121,offset:24,stride:32,normalized:!1},{name:"symbolColor",count:4,type:5121,offset:28,stride:32,normalized:!1}];h.Pos3NormTexColSymcol=[{name:"position",count:3,type:5126,offset:0,stride:40,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:40,normalized:!1},{name:"uv0",count:2,type:5126,offset:24,stride:40,normalized:!1},{name:"color",count:4,type:5121,offset:32,stride:40,normalized:!1},
{name:"symbolColor",count:4,type:5121,offset:36,stride:40,normalized:!1}];h.Pos3NormTexRegionSymcol=[{name:"position",count:3,type:5126,offset:0,stride:44,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:44,normalized:!1},{name:"uv0",count:2,type:5126,offset:24,stride:44,normalized:!1},{name:"region",count:4,type:5123,offset:32,stride:44,normalized:!1},{name:"symbolColor",count:4,type:5121,offset:40,stride:44,normalized:!1}];h.Pos3NormTexRegionColSymcol=[{name:"position",count:3,type:5126,
offset:0,stride:48,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:48,normalized:!1},{name:"uv0",count:2,type:5126,offset:24,stride:48,normalized:!1},{name:"region",count:4,type:5123,offset:32,stride:48,normalized:!1},{name:"color",count:4,type:5121,offset:40,stride:48,normalized:!1},{name:"symbolColor",count:4,type:5121,offset:44,stride:48,normalized:!1}];h.Pos2=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}];h.Pos2Tex=[{name:"position",count:2,type:5126,offset:0,
stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}];h.Model=[{name:"model",count:16,type:5126,offset:0,stride:128,normalized:!1,divisor:1},{name:"modelNormal",count:16,type:5126,offset:64,stride:128,normalized:!1,divisor:1}];h.ModelCol=[{name:"model",count:16,type:5126,offset:0,stride:144,normalized:!1,divisor:1},{name:"modelNormal",count:16,type:5126,offset:64,stride:144,normalized:!1,divisor:1},{name:"instanceColor",count:4,type:5126,offset:128,stride:144,normalized:!1,
divisor:1}]})},"esri/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations":function(){define(["require","exports"],function(e,h){Object.defineProperty(h,"__esModule",{value:!0});h.Default3D={position:0,normal:1,uv0:2,color:3,instanceColor:3,size:4,auxpos1:5,symbolColor:5,auxpos2:6,featureAttribute:6,instanceFeatureAttribute:6,region:7,model:8,modelNormal:12}})},"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\n\t${!actionBarTemplate}\n\x3c/div\x3e\n\n',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\n\t\t\t\tid\x3d"${id}_label"\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\n\t\t\t\x3e\x3c/span\n\t\t\x3e\x3c/span\n\t\x3e\x3c/span\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\n/\x3e\x3c/span\x3e\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:esri/widgets/Popup/templates/Popup.html":'\x3cdiv role\x3d"presentation" class\x3d"${_css.invisible}"\x3e\n  \x3c!-- Popup Container --\x3e\n  \x3cdiv data-dojo-attach-point\x3d"_containerNode" class\x3d"${_css.container} ${_css.alignTop} ${_css.shadow}"\x3e\n    \x3cdiv class\x3d"${_css.main}"\x3e\n      \x3c!-- Popup Docked Pagination --\x3e\n      \x3csection class\x3d"${_css.paginationDocked}"\x3e\n        \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\n          \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\n          \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"${_css.paginationDockedButtons}"\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousDockedNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\n          \x3c/div\x3e\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextDockedNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextDockedNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\n          \x3c/div\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuDockedNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e\n      \x3c/section\x3e\n      \x3c!-- /Popup Docked Pagination --\x3e\n      \x3c!-- Popup Header --\x3e\n      \x3cheader class\x3d"${_css.header}"\x3e\n        \x3ch1 data-dojo-attach-point\x3d"_titleNode" class\x3d"${_css.headerTitle}"\x3e\x3c/h1\x3e\n        \x3cdiv class\x3d"${_css.headerButtons}"\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_dockNode" class\x3d"${_css.button} ${_css.buttonDock}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToRight}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToTop}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToLeft}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToBottom}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.dock}\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconUndock}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.undock}\x3c/span\x3e\n          \x3c/div\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_closeNode" class\x3d"${_css.button}" title\x3d"${_i18n.close}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconClose}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.close}\x3c/span\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e\n      \x3c/header\x3e\n      \x3c!-- /Popup Header --\x3e\n      \x3c!-- Popup Content --\x3e\n      \x3carticle class\x3d"${_css.content}" data-dojo-attach-point\x3d"_bodyContentNode"\x3e\x3c/article\x3e\n      \x3c!-- /Popup Content --\x3e\n      \x3c!-- Popup Footer --\x3e\n      \x3cfooter class\x3d"${_css.footer}"\x3e\n        \x3c!-- Popup Actions --\x3e\n        \x3cdiv data-dojo-attach-point\x3d"_actionsNode" class\x3d"${_css.actions}"\x3e\x3c/div\x3e\n        \x3c!-- /Popup Actions --\x3e\n        \x3c!-- Popup Pagination --\x3e\n        \x3csection class\x3d"${_css.pagination}"\x3e\n          \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\n          \x3c/div\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\n          \x3c/div\x3e\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\n          \x3c/div\x3e\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\n          \x3c/div\x3e\n        \x3c/section\x3e\n        \x3c!-- /Popup Pagination --\x3e\n      \x3c/footer\x3e\n      \x3c!-- /Popup Footer --\x3e\n      \x3c!-- Popup Menu --\x3e\n      \x3csection class\x3d"${_css.featureMenu}" data-dojo-attach-point\x3d"_pageMenuSectionNode" aria-hidden\x3d"true"\x3e\n        \x3ch2 class\x3d"${_css.featureMenuHeader}" data-dojo-attach-point\x3d"_pageMenuInfoNode"\x3e\x3c/h2\x3e\n        \x3cnav class\x3d"${_css.featureMenuViewport}"\x3e\n          \x3col class\x3d"${_css.featureMenuList}" role\x3d"menu" data-dojo-attach-point\x3d"_paginationNode"\x3e\x3c/ol\x3e\n        \x3c/nav\x3e\n      \x3c/section\x3e\n      \x3c!-- /Popup Menu --\x3e\n    \x3c/div\x3e\n    \x3c!-- Popup Pointer --\x3e\n    \x3cdiv class\x3d"${_css.pointer}" role\x3d"presentation"\x3e\n      \x3cdiv class\x3d"${_css.pointerDirection} ${_css.shadow}"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3c!-- /Popup Pointer --\x3e\n  \x3c/div\x3e\n  \x3c!-- /Popup Container --\x3e\n\x3c/div\x3e\n',
"url:esri/views/2d/engine/webgl/Shaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\n\x3c!--\n  Add your GLSL snippets to this file. You should start from\n  importing your old GLSL files. For instance, if you have a\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\n  and then copy and paste the GLSL source as the content. You will then convert your\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\n--\x3e\n\x3csnippets\x3e\n\n  \x3csnippet name\x3d"foobarVS"\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"foobarFS"\x3e\n  \x3c/snippet\x3e\n\n\x3c/snippets\x3e\n\n',
"url:esri/views/2d/engine/webgl/bitblit.vs.glsl":"attribute vec2 a_pos;\nattribute vec2 a_tex;\n\nvarying mediump vec2 v_uv;\n\nvoid main(void) {\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\n  v_uv \x3d a_tex;\n}\n","url:esri/views/2d/engine/webgl/bitblit.fs.glsl":"\tuniform lowp sampler2D u_tex;\n\tuniform lowp float u_opacity;\n\n\tvarying mediump vec2 v_uv;\n\n\tvoid main() {\n\t\tlowp vec4 color \x3d texture2D(u_tex, v_uv);\n\n    // Note: output in pre-multiplied alpha for correct alpha compositing\n\t\tgl_FragColor \x3d color *  u_opacity;\n\t}\n",
"url:esri/views/2d/engine/webgl/stencil.vs.glsl":"attribute vec2 a_pos;\n\nvoid main() {\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\n}\n","url:esri/views/2d/engine/webgl/stencil.fs.glsl":"void main() {\n  gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\n}\n","url:esri/views/vectorTiles/renderers/Shaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\n\x3c!--\n  Add your GLSL snippets to this file. You should start from\n  importing your old GLSL files. For instance, if you have a\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\n  and then copy and paste the GLSL source as the content. You will then convert your\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\n--\x3e\n\x3csnippets\x3e\n\n  \x3csnippet name\x3d"foobarVS"\x3e\n  \x3c/snippet\x3e\n\n  \x3csnippet name\x3d"foobarFS"\x3e\n  \x3c/snippet\x3e\n\n\x3c/snippets\x3e\n\n',
"url:esri/views/vectorTiles/renderers/shaders/background.vs.glsl":"attribute vec2 a_pos;\n\nuniform highp mat4 u_transformMatrix;\nuniform mediump vec2 u_normalized_origin;\nuniform mediump float u_coord_range;\nuniform mediump float u_depth;\n\nvoid main() {\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\n}\n","url:esri/views/vectorTiles/renderers/shaders/background.fs.glsl":"uniform lowp vec4 u_color;\nvoid main() {\n  gl_FragColor \x3d u_color;\n}",
"url:esri/views/vectorTiles/renderers/shaders/lineShader.vs.glsl":"/* The implementation of the renderer is based on the article and implementation of MB described here:\n* https://www.mapbox.com/blog/drawing-antialiased-lines/\n*/\n\nattribute vec2 a_pos;\nattribute vec4 a_offsetAndNormal;\nattribute float a_accumulatedDistance;\n\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\n// relative to the tile's upper left corner\n// the extrusion vector.\nuniform highp mat4 u_transformMatrix;\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\nuniform highp mat4 u_extrudeMatrix;\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\nuniform highp vec2 u_normalized_origin;\n// the z of the layer. Given by the order of the layers in the style\nuniform mediump float u_depth;\n// the inset and outset of the line\nuniform mediump float u_lineHalfWidth;\n// the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\nvarying mediump vec2 v_normal;\n// the accumulated distance along the line. We need this information in order to render the dashes.\nvarying highp float v_accumulatedDistance;\n\nconst float scale \x3d 1.0 / 31.0;\n\nvoid main()\n{\n  v_normal \x3d a_offsetAndNormal.zw * scale;\n\n  // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\n  // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\n  mediump vec2 dist \x3d u_lineHalfWidth * a_offsetAndNormal.xy * scale;\n\n  // transform the vertex\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\n\n  // the accumulated distance will be used to calculate the dashes (or the no-data...)\n  v_accumulatedDistance \x3d a_accumulatedDistance;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/lineShader.fs.glsl":"/* The implementation of the renderer is based on the article and implementation of MB described here:\n* https://www.mapbox.com/blog/drawing-antialiased-lines/\n*/\n\nuniform mediump float u_lineHalfWidth;\nuniform lowp vec4 u_color;\nuniform mediump vec2 u_dasharray;\nuniform lowp float u_blur;\n\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\n\nvoid main()\n{\n  // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\n  // and any value in between will be inside the line (the sign represent the direction - right or left).\n  // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\n  mediump float fragDist \x3d length(v_normal) * u_lineHalfWidth;\n\n  // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\n  // We need to count for both sides of the line.\n  lowp float alpha \x3d clamp( min(fragDist + u_blur + 1.0, u_lineHalfWidth - fragDist) / u_blur, 0.0, 1.0);\n\n  // now calculate the dashes given the accumulated distance of the line:\n  // start with calculating a normalized position along the line\n  lowp float dashPos \x3d  mod(v_accumulatedDistance, u_dasharray.x + u_dasharray.y);\n\n  // calculate the contribution to the alpha of the dash part. It is provided by the shortest portion of the position along the dash.\n  // we must clamp since the value might be bigger than 1 or smaller than zero (when over a dash).\n  //   | \x3c--- pos along the dash part\n  // -------_______-------_______\n  // when the dashPos is over the 'gap' part of the dash u_dasharray.x - dashPos is negative and therefore the alpha will\n  // get clamped to zero.\n  // when u_dasharray.x - dashPos is positive, or when dashPos is smaller than 1.0, it gives us a soft edge to each dash part.\n  // along the direction of the line.\n  lowp float dashAlpha \x3d clamp( min(dashPos, u_dasharray.x - dashPos), 0.0, 1.0);\n\n  // if we don't have a no-data part to the dash then it is a solid line\n  dashAlpha \x3d max(sign(-u_dasharray.y), dashAlpha); //sign(-u_dasharray.y) \x3e 0.0 ? 1.0 : dashAlpha;\n  // finally multiply the fragment's alpha by the calculated dash-alpha\n  alpha *\x3d dashAlpha;\n\n  // output the fragment color\n gl_FragColor \x3d alpha * u_color;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/patternLineShader.vs.glsl":"attribute vec2 a_pos;\nattribute vec4 a_offsetAndNormal;\nattribute float a_accumulatedDistance;\n\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\n// relative to the tile's upper left corner\n// the extrusion vector.\nuniform highp mat4 u_transformMatrix;\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\nuniform highp mat4 u_extrudeMatrix;\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\nuniform highp vec2 u_normalized_origin;\n// the z of the layer. Given by the order of the layers in the style\nuniform mediump float u_depth;\n// the inset and outset of the line\nuniform mediump float u_lineHalfWidth;\n// the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\nvarying mediump vec2 v_normal;\n// the accumulated distance along the line. We need this information in order to render the dashes.\nvarying highp float v_accumulatedDistance;\n\nconst float scale \x3d 1.0 / 31.0;\n\nvoid main()\n{\n  v_normal \x3d a_offsetAndNormal.zw * scale;\n\n  // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\n  // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\n  // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\n  mediump vec2 dist \x3d u_lineHalfWidth * a_offsetAndNormal.xy * scale;\n\n  // transform the vertex\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\n\n  // the accumulated distance will be used to calculate the dashes (or the no-data...)\n  v_accumulatedDistance \x3d a_accumulatedDistance;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/patternLineShader.fs.glsl":"uniform mediump float u_lineHalfWidth;\nuniform lowp float u_blur;\nuniform lowp float u_opacity;\nuniform mediump vec2 u_pattern_tl;\nuniform mediump vec2 u_pattern_br;\nuniform mediump vec2 u_spriteSize;\nuniform sampler2D u_texture;\n\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\n\n// Horizontal scale is used to scale the horizontal texture coordinate v_normal.x before adding it as an offset to the\n// accumulated distance. Most vertices will have v_normal.x \x3d\x3d 0, because the pattern must be sampled only depending on\n// the v_accumulatedDistance value. But tessellation at caps can have vertices with v_normal.x !\x3d 0, thus allowing to\n// \"keep moving\" for a few more pixel even when the line has ended or has not started yet.\nconst mediump float tileCoordRatio \x3d 8.0;\n\nvoid main()\n{\n  // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\n  // and any value in between will be inside the line (the sign represent the direction - right or left).\n  // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\n  mediump float fragDist \x3d length(v_normal) * u_lineHalfWidth;\n\n  // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\n  // We need to count for both sides of the line.\n  lowp float alpha \x3d clamp( min(fragDist + u_blur + 1.0, u_lineHalfWidth - fragDist) / u_blur, 0.0, 1.0);\n  // add the line's opacity to the alpha\n  alpha *\x3d u_opacity;\n\n  // we need to calculate the relative portion of the line texture along the line given the accumulated distance aliong the line\n  // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\n  mediump float relativeTexX \x3d mod((v_accumulatedDistance + v_normal.x * u_lineHalfWidth * tileCoordRatio) / u_spriteSize.x, 1.0);\n\n  // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\n  // which range from -1.0 to 1.0. On the line's centerline, the value of the interpolated normal is 0.0, however the relative\n  // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\n  // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\n  //              | -\x3e linwe-width / 2\n  //      - - - - - - - - - - - - - -\n  //              | -\x3e linwe-width / 2\n  //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\n\n  mediump float relativeTexY \x3d 0.5 + (v_normal.y * u_lineHalfWidth / (0.5 * u_spriteSize.y));\n\n  // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\n  mediump vec2 texCoord \x3d mix(u_pattern_tl, u_pattern_br, vec2(relativeTexX, relativeTexY));\n\n  // get the color from the texture\n  lowp vec4 color \x3d texture2D(u_texture, texCoord);\n\n  // 'un-premultiply' the color\n  lowp float inv_alpha \x3d (1.0 / clamp(color.a, 0.00390625, 1.0));\n  // finally write the fragment value\n  gl_FragColor \x3d alpha * color;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/lineJoinShader.vs.glsl":"attribute vec2 a_pos;\n\nuniform highp mat4 u_transformMatrix;\nuniform highp vec2 u_normalized_origin;\nuniform highp float u_depth;\nuniform highp vec2 u_screen;\nuniform mediump float u_size;\nuniform mediump float u_pixelRatio;\n\nvarying mediump vec2 v_vertexPosition;\n\nvoid main()\n{\n  gl_PointSize \x3d u_pixelRatio * u_size;\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0);\n\n  // calculate the vertex position in pixels (we need to add one in order to shift the origin from the center of the viewport)\n  v_vertexPosition \x3d (gl_Position.xy + 1.0) * u_screen;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/lineJoinShader.fs.glsl":"uniform lowp vec4 u_color;\nuniform mediump float u_lineHalfWidth;\nuniform mediump float u_oneOverPixelRatio;\n\nvarying mediump vec2 v_vertexPosition;\n\nvoid main()\n{\n  // get the distance of the current fragment from the actual vertex\n  mediump float fragDist \x3d length(v_vertexPosition - u_oneOverPixelRatio * gl_FragCoord.xy);\n\n  // rounding the quare: calculate the alpha given the difference between the line-width and the distance of the fragment\n  // from the center-line. We will end up with a nice round circle with a soft edge.\n  lowp float alpha \x3d clamp(u_lineHalfWidth - fragDist, 0.0, 1.0);\n\n  // finally output the fragment color\n  gl_FragColor \x3d alpha * u_color;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/lineJoinQuadShader.vs.glsl":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\n\nuniform highp mat4 u_transformMatrix;\nuniform highp mat4 u_extrudeMatrix;\nuniform highp vec2 u_normalized_origin;\nuniform highp float u_depth;\n// The width/height of the screen\nuniform mediump vec2 u_screen;\n// u_size is the diameter of the join in tile units\nuniform mediump float u_size;\n\nvarying mediump vec2 v_fragmentOffset;\n\nvoid main()\n{\n  // calculate the offset in pixels from the join's center to the vertex\n  highp vec2 dist \x3d u_size * a_vertexOffset;\n\n  // calculate the position of the join's center in normalized coordinates\n  highp vec4 center_pos \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0);\n\n  // offset in normalized display units\n  highp vec4 vertex_offset \x3d u_extrudeMatrix * vec4(dist, 0.0, 0.0);\n\n  // calculate the vertex offset in windows coordinates\n  v_fragmentOffset \x3d u_screen * vertex_offset.xy;\n\n  // finally calculate the vertex position\n  gl_Position \x3d center_pos + vertex_offset;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/lineJoinQuadShader.fs.glsl":"uniform lowp vec4 u_color;\nuniform mediump float u_lineHalfWidth;\n\nvarying mediump vec2 v_fragmentOffset;\n\nvoid main()\n{\n  // Calculate the antialiasing fade factor\n  lowp float alpha \x3d clamp(u_lineHalfWidth * u_lineHalfWidth - dot(v_fragmentOffset, v_fragmentOffset), 0.0, 1.0);\n  //lowp float alpha  \x3d 1.0 - smoothstep(u_lineHalfWidth - 0.25, u_lineHalfWidth + 0.25, dist);\n  // YF: if needed w can also use a smoothstep around the edge of the circle and use a single pixel or so as the edge width\n\n  // finally output the fragment color\n  gl_FragColor \x3d alpha * u_color;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/solidFillShader.vs.glsl":"attribute vec2 a_pos;\n\nuniform highp mat4 u_transformMatrix;\nuniform highp vec2 u_normalized_origin;\nuniform mediump float u_depth;\n\nvoid main()\n{\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\n}\n","url:esri/views/vectorTiles/renderers/shaders/solidFillShader.fs.glsl":"uniform lowp vec4 u_color;\nvoid main()\n{\n  gl_FragColor \x3d u_color;\n}","url:esri/views/vectorTiles/renderers/shaders/patternFillShader.vs.glsl":"uniform highp mat4 u_transformMatrix;\nuniform highp vec2 u_normalized_origin;\nuniform mediump float u_depth;\nuniform mediump mat3 u_pattern_matrix; // can we use meduim precision??\n\nattribute vec2 a_pos;\n\nvarying mediump vec2 v_tileTextureCoord;\n\nvoid main()\n{\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0);\n  // calculate the texture coordinates of the current vertex. It will of course get interpolated.\n  // The pattern matrix is a 3x3 scale matrix which 'tiles' the texture inside the tile, translating from tile coordinates\n  // (-4k to 8k -1) to texture coordinates.\n  v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/patternFillShader.fs.glsl":"uniform lowp float u_opacity;\nuniform mediump vec2 u_pattern_tl;\nuniform mediump vec2 u_pattern_br;\nuniform sampler2D u_texture;\n\nvarying mediump vec2 v_tileTextureCoord;\n\nvoid main()\n{\n  // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\n  mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\n  // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\n  // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\n  // we need to only sample from area that has our sprite in the mosaic.\n  mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\n  // sample the sprite mosaic\n  lowp vec4 color \x3d texture2D(u_texture, samplePos);\n  gl_FragColor \x3d u_opacity * color;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/fillOutlineShader.vs.glsl":"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_xnormal;\n\nuniform highp mat4 u_transformMatrix;\nuniform highp mat4 u_extrudeMatrix;\nuniform highp vec2 u_normalized_origin;\nuniform mediump float u_depth;\nuniform mediump float u_outline_width;\n\nvarying lowp vec2 v_normal;\n\nconst float scale \x3d 1.0 / 15.0;\n\nvoid main()\n{\n  v_normal \x3d a_xnormal;\n\n   // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\n    // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\n  mediump vec4 dist \x3d vec4(u_outline_width * a_offset * scale, 0.0, 0.0);\n\n  // Remove the texture normal bit of the position before scaling it with the\n  // model/view matrix. Add the extrusion vector *after* the model/view matrix\n  // because we're extruding the line in pixel space, regardless of the current\n  // tile's zoom level.\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * dist;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/fillOutlineShader.fs.glsl":"uniform lowp vec4 u_color;\nvarying mediump vec2 v_normal;\n\nvoid main()\n{\n  // Calculate the distance of the pixel from the line in pixels.\n  lowp float dist \x3d abs(v_normal.y);\n\n  lowp float alpha \x3d smoothstep(1.0, 0.0, dist);\n  gl_FragColor \x3d alpha * u_color;\n}\n","url:esri/views/vectorTiles/renderers/shaders/iconShader.vs.glsl":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_tex;\nattribute vec4 a_levelInfo;\n\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\n// relative to the tile's upper left corner\n// the extrusion vector.\nuniform highp mat4 u_transformMatrix;\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\nuniform highp mat4 u_extrudeMatrix;\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\nuniform highp vec2 u_normalized_origin;\n// the size of the mosaic given in pixels\nuniform vec2 u_mosaicSize;\n// the z of the layer. Given by the order of the layers in the style\nuniform mediump float u_depth;\n// the map's rotation from the north\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\n// indicate whether the current set of iconst should be kept upright when the map is rotated\nuniform lowp float u_keepUpright;\n// the rate of the change in the opacity (fade) of the icons\nuniform mediump float u_fadeSpeed;\n// the low level we transition (to/from)\nuniform mediump float u_minfadeLevel;\n// the high level we transition (to/from)\nuniform mediump float u_maxfadeLevel;\n// the amount of fade given teh current time past the last recorded level\nuniform mediump float u_fadeChange;\n// the opacity of the layer given by the painter\nuniform mediump float u_opacity;\n// the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\nvarying lowp vec2 v_tex;\n// the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\n// opacity of the layer given by the painter\nvarying lowp float v_transparency;\n\n// the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\n// by 16 and then at the shader devide by the same number\nconst float offsetPrecision \x3d 1.0 / 32.0;\n\nvoid main()\n{\n  mediump float a_labelMinLevel \x3d a_levelInfo[0];\n  mediump float a_angle        \x3d a_levelInfo[1];\n  mediump float a_minLevel    \x3d a_levelInfo[2];\n  mediump float a_maxLevel    \x3d a_levelInfo[3];\n\n  // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\n  mediump float delta_z \x3d 0.0;\n\n  // If the label rotates with the map, and if the rotated label is upside down, hide it\n  mediump float rotated \x3d mod(a_angle - u_mapRotation, 256.0);\n  delta_z +\x3d (1.0 - step(u_keepUpright,0.0)) * step(65.0,rotated) * (1.0 - step(193.0,rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (65 \x3c\x3d rotated) \x26\x26 (rotated \x3c 193)\n\n  // u_level is the current service level adjusted for the change in font size\n  delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\n  delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\n\n  // calculate the alpha given the change in the fade and the fade-speed\n  lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\n\n  // if the speed is positive we are zooming in and therefore we need to 'fade-in'. Else we need to 'fade-out'\n  v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\n\n  // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\n  if (u_maxfadeLevel \x3c a_labelMinLevel)\n  {\n      v_transparency \x3d 0.0;\n  }\n  if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\n  {\n      v_transparency \x3d 1.0;\n  }\n\n  // if label had been faded out, clip it\n  delta_z +\x3d step(v_transparency, 0.0);\n\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\n  v_tex \x3d a_tex.xy / u_mosaicSize;\n\n  v_transparency *\x3d u_opacity;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/iconShader.fs.glsl":"uniform lowp sampler2D u_texture;\nvarying lowp vec2 v_tex;\nvarying lowp float v_transparency;\n\nvoid main()\n{\n  lowp vec4 color \x3d texture2D(u_texture, v_tex);\n  gl_FragColor \x3d v_transparency * color;\n}\n","url:esri/views/vectorTiles/renderers/shaders/sdfShader.vs.glsl":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_tex;\nattribute vec4 a_levelInfo;\n\n// attribute bool a_visible; // --\x3e a one bit controlling the visibility of the vertex\n\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\n// relative to the tile's upper left corner\n// the extrusion vector.\nuniform highp mat4 u_transformMatrix;\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\nuniform highp mat4 u_extrudeMatrix;\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\nuniform highp vec2 u_normalized_origin;\n// the size of the mosaic given in pixels\nuniform vec2 u_mosaicSize;\n// the z of the layer. Given by the order of the layers in the style\nuniform mediump float u_depth;\n// the map's rotation from the north\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\n// indicate whether the current set of iconst should be kept upright when the map is rotated\nuniform lowp float u_keepUpright;\n// the rate of the change in the opacity (fade) of the icons\nuniform mediump float u_fadeSpeed;\n// the low level we transition (to/from)\nuniform mediump float u_minfadeLevel;\n// the high level we transition (to/from)\nuniform mediump float u_maxfadeLevel;\n// the amount of fade given teh current time past the last recorded level\nuniform mediump float u_fadeChange;\n// the opacity of the layer given by the painter\nuniform mediump float u_opacity;\n// the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\nvarying lowp vec2 v_tex;\n// the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\n// opacity of the layer given by the painter\nvarying lowp float v_transparency;\n\n// the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\n// by 16 and then at the shader devide by the same number\nconst float offsetPrecision \x3d 1.0 / 32.0;\n\nvoid main()\n{\n  mediump float a_labelMinLevel \x3d a_levelInfo[0];\n  mediump float a_angle        \x3d a_levelInfo[1];\n  mediump float a_minLevel    \x3d a_levelInfo[2];\n  mediump float a_maxLevel    \x3d a_levelInfo[3];\n\n  // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\n  mediump float delta_z \x3d 0.0;\n\n  // TODO: force clipping the vertex in case that the vertex isn't visible\n  //delta_z +\x3d a_visible ? 0.0 : 1.0;\n\n  // If the label rotates with the map, and if the rotated label is upside down, hide it\n  mediump float rotated \x3d mod(a_angle - u_mapRotation, 256.0);\n  delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(65.0, rotated) * (1.0 - step(193.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (65 \x3c\x3d rotated) \x26\x26 (rotated \x3c 193)\n\n  // u_level is the current service level adjusted for the change in font size\n  delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\n  delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\n\n  // calculate the alpha given the change in the fade and the fade-speed\n  lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\n\n  // if the speed is positive we are zooming in and therefore we need to 'fade-in'. Else we need to 'fade-out'\n  v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\n\n  // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\n  if (u_maxfadeLevel \x3c a_labelMinLevel)\n  {\n      v_transparency \x3d 0.0;\n  }\n  if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\n  {\n      v_transparency \x3d 1.0;\n  }\n\n  // if label has been faded out, clip it\n  delta_z +\x3d step(v_transparency, 0.0);\n\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\n  v_tex \x3d a_tex.xy / u_mosaicSize;\n\n  v_transparency *\x3d u_opacity;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/sdfShader.fs.glsl":"uniform lowp sampler2D u_texture;\nuniform lowp vec4 u_color;\nuniform mediump float u_edgeDistance;\nuniform mediump float u_edgeWidth;\n\nvarying lowp vec2 v_tex;\nvarying lowp float v_transparency;\n\n// this is taken from http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf\n// and https://www.mapbox.com/blog/text-signed-distance-fields/\n// http://metalbyexample.com/rendering-text-in-metal-with-signed-distance-fields/\n\nvoid main()\n{\n  // read the distance from the SDF texture\n  lowp float dist \x3d texture2D(u_texture, v_tex).a;\n  // use a smooth-step in order to calculate the geometry of the shape given by the distance field\n  mediump float alpha \x3d smoothstep(u_edgeDistance - u_edgeWidth, u_edgeDistance + u_edgeWidth, dist) * v_transparency;\n\n  gl_FragColor \x3d alpha * u_color;\n\n// YF: this code allow having both a fill and an outline colors combined in a single pass\n//  lowp float geometryAlpha \x3d smoothstep(0.75 - 0.21, 0.75 + 0.21, dist) * v_transparency;\n//  lowp vec4 geometryColor \x3d vec4(u_color.rgb, geometryAlpha * u_color.a);\n//\n//  if (true) {\n//    lowp float haloAlpha \x3d smoothstep(0.0 - 0.1, 0.0 + 0.1, dist) * v_transparency;\n//    lowp vec4 haloColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\n//    haloColor \x3d vec4(haloColor.rgb, haloAlpha);\n//\n//    // calculate the composite color\n//    lowp float compositeAlpha \x3d geometryColor.a + haloColor.a * (1.0 - geometryColor.a);\n//    lowp vec3 compositeColor \x3d vec3(geometryColor) * geometryColor.a + vec3(haloColor) * haloColor.a * (1.0 - geometryColor.a);\n//    compositeColor /\x3d compositeAlpha;\n//    gl_FragColor \x3d vec4(compositeColor, compositeAlpha);\n//  }\n//  else {\n//    gl_FragColor \x3d geometryColor;\n//  }\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/tileInfo.vs.glsl":"attribute vec2 a_pos;\n\nuniform highp mat4 u_transformMatrix;\nuniform mediump vec2 u_normalized_origin;\nuniform mediump float u_depth;\nuniform mediump float u_coord_ratio;\nuniform mediump vec2 u_delta; // in tile coordinates\nuniform mediump vec2 u_dimensions; // in tile coordinates\n\nvarying mediump vec2 v_tex;\n\nvoid main() {\n  mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\n\n  v_tex \x3d a_pos;\n}\n",
"url:esri/views/vectorTiles/renderers/shaders/tileInfo.fs.glsl":"uniform mediump sampler2D u_texture;\nvarying mediump vec2 v_tex;\n\nvoid main(void) {\n  lowp vec4 color \x3d texture2D(u_texture, v_tex);\n  gl_FragColor \x3d 0.75 * color;\n}\n","*now":function(e){e(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn"]'])},"*noref":1}});
(function(){var e=this.require;e({cache:{}});!e.async&&e(["dojo"]);e.boot&&e.apply(null,e.boot)})();